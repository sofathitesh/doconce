TITLE: How various formats can deal with LaTeX math
AUTHOR: HPL
DATE: today


This document is translated to the format ${FORMAT}.

__Test 1: Inline math.__ A sentence contains the equation $u(t)=e^{-at}$.

__Test 2: A single equation without label.__ Here it is

!bt
\[ u(t)=e^{-at} \]
!et

__Test 3: A single equation with label.__ Here it is as a one-line
latex code,

!bc
|bt
\begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
|et
!ec
looking like

!bt
\begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
!et
and as a three-line latex code:

!bc
|bt
\begin{equation}
u(t)=e^{-at} label{eq1b}
\end{equation}
|et
!ec
looking like

!bt
\begin{equation}
u(t)=e^{-at} label{eq1b}
\end{equation}
!et
This equation has label (ref{eq1b}).


__Test 4: Multiple, aligned equations without label.__ Only the align
environment is supported by other formats than LaTeX for typesetting
multiple, aligned equations. The code reads

!bc
|bt
\begin{align*}
u(t)&=e^{-at}\\
v(t) &= \frac{du}{dt}
\end{align*}
|et
!ec
and results in

!bt
\begin{align*}
u(t)&=e^{-at}\\
v(t) &= \frac{du}{dt}
\end{align*}
!et

__Test 5: Multiple, aligned equations with label.__ We use align with
labels:

!bc
|bt
\begin{align}
u(t)&=e^{-at}
label{eq2}\\
v(t) &= \frac{du}{dt}
label{eq3}
\end{align}
|et
!ec
and results in

!bt
\begin{align}
u(t)&=e^{-at} label{eq2}\\
v(t) &= \frac{du}{dt} label{eq3}
\end{align}
!et
We can refer to the last equations as the system (ref{eq2})-(ref{eq3}).

# #if FORMAT == "sphinx"
Actually, *Sphinx does not support the align environment with labels*,
such as we write above,
but Doconce splits in this case the equations into separate, single equations
with labels. Hence the user can write one code with align and labels
and have to work in LaTeX, HTML, and Sphinx. The generated Sphinx code
in the present case is

!bc rst
.. math::
   :label: eq2

        u(t)=e^{-at}


.. math::
   :label: eq3

        v(t) = \frac{du}{dt}

!ec
# #endif

# #if FORMAT == "pandoc"
Pandoc-extended Markdown output does not work with labels and
multiple equations (the HTML output is just the raw LaTeX code).
Doconce therefore splits an align environment
into separate, single equations in case of Markdown output.
However, labels will do not work, neither for single equations nor for
multiple ones. One can hence write with align and labels and get excellent
output in LaTeX, HTML, and Sphinx, while the equations looks nice in
Markdown-based HTML although the lables cannot be used for reference.
# #endif

