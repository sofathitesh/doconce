
************** File: testdoc.do.txt *****************
TITLE: A Document for Testing Doconce
AUTHOR: Hans Petter Langtangen Email: hpl@simula.no at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo
AUTHOR: Kaare Dump at Segfault Inc, Cyberspace
AUTHOR: A. Dummy Author
AUTHOR: I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst
AUTHOR: J. Doe mail: j_doe@cyberspace.com
DATE: today

TOC: on

# #include "_testdoc.do.txt"


************** File: _testdoc.do.txt *****************
!split

<%doc>
This is Mako comment block
to test the use of Mako as preprocessor.
</%doc>


The format of this document is
% if FORMAT == 'html':
plain, homemade HTML (from Doconce).
  % elif FORMAT == 'latex':
plain, homemade LaTeX (from Doconce).
  % elif FORMAT == 'pdflatex':
plain, homemade pdfLaTeX (from Doconce).
  %else:
${FORMAT}
% endif

% if SOMEVAR is not UNDEFINED:
# Just a comment
% endif

__Abstract.__
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

# Cannot demonstrate chapter headings since abstract and chapter
# is mutually exclusive in LaTeX

======= Section 1 =======
label{sec1}

Here is a nested list:

  * item1
  * item2
  * item3 which continues
    on the next line to test that feature
  * and a sublist
    * with indented subitem1
    * and a subitem2
  * and perhaps an ordered sublist
    o first item
    o second item,
      continuing on a new line

!bquote
Here are two lines that make up
a block quote.
!equote

!split and check if these extra words are included properly in the comment

===== Subsection 1 =====

More text, with a reference back to Section ref{sec1} and further
to Section ref{subsubsec:ex}. idx{`somefunc` function}

# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

@@@CODE ../doc/manual/__testcode.f fromto: subroutine@
and then just the subroutine,
@@@CODE ../doc/manual/__testcode.f from-to:a comment@^C\s+END1
and finally the complete file:
@@@CODE ../doc/manual/__testcode.f

Testing other code environments. First Python:
!bc
|bc pycod
def f(x):
    return x+1
|ec
!ec
which gets rendered as

!bc pycod
def f(x):
    return x+1
!ec

Now a complete program to be shown via Python Online Tutorial:
!bc pyoptpro
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
!ec

Then Cython:
!bc cycod
cpdef f(double x):
    return x + 1
!ec

# This one tests a + sign before a code environment
C++:
!bc cpppro
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
!ec
# The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

!bc
|bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
|ec
!ec
which then is typeset as

!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec

HTML:

!bc htmlcod
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
!ec

System call:
!bc sys
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
!ec

It is time to test `verbatim inline font` especially with `a newline
inside the text` and an exclamation mark at the end: `BEGIN`! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the `verb` typesetting... Also test backslashes
like `\begin` and `\end` in inline verbatim text.

Here is some color{red}{red} color and an attempt to write color{green}{with
green color containing a linebreak.
And one more.} Some formats will only display this correctly when
HTML is the output format.


===== Subsection 2: Testing figures and movies =====
label{subsec:ex}
idx{figures}

Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. label{fig:impact}

Figures without captions are allowed and will be inlined.

FIGURE:[../doc/manual/figs/streamtubes, width=200]

idx{movies}

=== Test of movies ===

Movie ref{mov:tsunami} shows a tsunami.

MOVIE: [../doc/manual/figs/mjolnir.mpeg, width=700 height=400] Mjolnir tsunami (by Sylfest Glimsdal) label{mov:tsunami}.

Test empty caption (for inline movie):

MOVIE: [../doc/manual/figs/wavepacket.mpeg, width=700 height=400]

# Test wrong syntax and multi-line caption

   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

# Check out the correct with and height of YouTube movies from the
# embed command that the YouTube page can generate. Similar for Vimeo.

MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] Movies can be uploaded to YouTube and embedded as HTML or as a link.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Computational fluid dynamics movie.


# Test multi-line caption in figure

Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

# Must be a blank line after MOVIE or FIGURE to detect this problem

# Test URL as figure name

FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]

# Test wikimedia type of files that otherwise reside in subdirs
# #if FORMAT == "mwiki"
FIGURE: [testfigs/df_plot.png, width=800] This is a wikimedia figure file.

# Non-uploaded file with no caption
FIGURE: [testfigs/df2s8765s_plot.png, width=200, frac=0.4]
# #endif

# Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

===== The $\theta$ parameter (not $\nabla$?) =====
label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
!bc
def f(theta):
    return theta**2
!ec

__More on $\theta$.__ Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

!bt
\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}
!et

Or with align with label and numbers:

!bt
\begin{align}
\Ddt{u} &= 0
label{aligneq1}\\
\half &= \halfi\\
\half\x &= \normalvec
label{aligneq2}
\end{align}
!et

% if FORMAT == "sphinx":
Sphinx makes a fix here and splits align into multiple equation
environments.
% endif
% if FORMAT == "mwiki":
The labels above are removed in mwiki since mwiki cannot refer to
labels in equations.
% endif

===== Custom Environments =====

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the `.tex` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<%
theorem_counter = 4
%>

# begin theorem
label{theorem:fundamental1}
<%
theorem_counter += 1
theorem_fundamental1 = theorem_counter
%>

__Theorem ${theorem_counter}.__
Let $a=1$ and $b=2$. Then $c=3$.
# end theorem

# begin proof
__Proof.__
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$|$END$
# end proof

As we see, the proof of Theorem ${theorem_counter} is a modest
achievement.


===== Tables =====
label{subsec:table}

idx{test index with `verbatim text` which is possible}
idx{test `two` (separate) `verbatim expressions` which is also possible}
idx{index with!subindex}

# index with comma could fool sphinx
idx{index, with comma, and one more}

Let us take this table from the manual:

% if FORMAT in ("latex", "pdflatex"):
\begin{table}
\caption{
Testing table environment in LaTeX, enabled by testing on the "latex" format
with the preprocessor.
label{mytab}
}
% endif

  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|

% if FORMAT in ("latex", "pdflatex"):
\end{table}
% endif

The Doconce source code reads
!bc ccq
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
!ec

Here is yet another table to test that we can handle more than
one table:

  |--l-------l----------l----------|
  |time  | velocity | acceleration |
  |--l-------l----------l----------|
  | 0.0  | 1.4186   | -5.01        |
  | 1.0  | 1.376512 | 11.919       |
  | 3.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

|-------------------------------|
|$i$ | $h_i$|$\bar T_i$ | `L_i` |
|-l-----r---------r---------r---|
|0   |0     |288        |-0.0065|
|1   |11,000|216        |0.0	|
|2   |20,000|216        |0.001	|
|3   |32,000|228        |0.0028	|
|4   |47,000|270        |0.0	|
|5   |51,000|270        |-0.0028|
|6   |71,000|214        |`NaN`	|
|-------------------------------|

And add one with verbatim headings (with underscores),
and rows starting with `|-` because of a negative number,
and `|` right after verbatim word (with no space):

|-----------------------------------------|
| exact | `v_1`   | $a_i$ + `v_2`|`verb_3_`|
|---r--------r---------r-----------r------|
|9      | 9.62    | 5.57      |  8.98     |
|-20    | -23.39  | -7.65     | -19.93    |
|10     | 17.74   | -4.50     |  9.96     |
|0      | -9.19   | 4.13      | -0.26     |
|-----------------------------------------|


===== A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` =====

__Files `my_file_v1.py` and `my_file_v2.py` define some math $a_{i-1}$.__ Here is
some text.

===== Bibliography test =====

Here is an example: cite{Langtangen_Pedersen_2002} discussed propagation of
large destructive water waves, cite{Langtangen_et_al_2002} gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in cite{Langtangen_1994a}.
The book chapter cite{Mardal_et_al_2003a} contains information on
C++ software tools for programming multigrid methods. A real retro
reference is cite{Langtangen_1988d} about a big FORTRAN package.
Multiple references are also possible, e.g., see
cite{Langtangen_Pedersen_2002,Mardal_et_al_2003a}.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
cite{Langtangen_1992c,Langtangen_1994a,Mortensen_et_al_2011,Langtangen_Pedersen_2002}
and
cite{Langtangen_et_al_2002,Glimsdal_et_al_20006,Rahman_et_al_2006b,Haga_et_al_2011a,Langtangen_2003a,Langtangen_2008a,Langtangen:95}
and all the work of
cite{Langtangen_2012,Mardal_et_al_2003a,Jeberg_et_al_2004} as well as
old work cite{Langtangen_1988d} and cite{Langtangen_1989e}, and the
talk cite{Langtangen_talk_2007a}.
Langtangen also had two thesis cite{Langtangen:85,Langtangen_1989e}.
More retro citations are
the old ME-IN323 book cite{Langtangen:91} and the
cite{Langtangen:94b} OONSKI '94 paper.


===== Example: Examples can be typeset as exercises =====
label{Example}

Examples can start with a subsection heading starting with `Example:`
and then, with the command-line option `--examples_as_exercises` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


!bsubex
State some problem.

!bsol
The answer to this subproblem can be written here.
!esol
!esubex

!bsubex
State some other problem.

!bhint
A hint can be given.
!ehint

!bhint
Maybe even another hint?
!ehint

!bsol
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.
!esol
!esubex


===== URLs =====
label{subsubsec:ex}

Testing of URLs: hpl's home page "hpl":"http://folk.uio.no/hpl", or
the entire URL if desired, "URL": "http://folk.uio.no/hpl".  Here is a
plain file link "URL": "testdoc.do.txt", or "url":"testdoc.do.txt", or
URL: "testdoc.do.txt" or url : "testdoc.do.txt" or "a link with
newline": "testdoc.do.txt". Can test spaces with the link with word
too: "hpl": "http://folk.uio.no/hpl" or "hpl" :
"http://folk.uio.no/hpl". Also `file:///` works: "link to a
file":"file:///home/hpl/vc/doconce/doc/demos/manual/manual.html" is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: "`hpl@simula.no`": "mailto:hpl@simula.no", or just a "mail link": "mailto:hpl@simula.no", or a raw URL: "mailto:hpl@simula.no".

Here are some tough tests of URLs, especially for the `latex` format:
"Newton-Cotes":
"http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas" formulas
and a "good book":
"http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1". Need to test
Newton-Cotes with percentage in URL too:
URL: "http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"
and URL: "http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae" which has a shebang.

For the `--device=paper` option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
"`decay_mod`":
"https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py".

# Comments should be inserted outside paragraphs (because in the rst
# format extra blanks make a paragraph break).

# Note that when there is no http: or file:, it can be a file link
# if the link name is URL, url, "URL", or "url". Such files should,
# if rst output is desired, but placed in a `_static*` folder.

More tough tests: repeated URLs whose footnotes when using the
`--device=paper` option must be correct. We have
"google": "http://google.com", "google": "http://google.com", and
"google": "http://google.com", which should result in exactly three
footnotes.


% if FORMAT == "latex":

===== Test of Some LaTeX Fixes =====

Let's check abbr. of some common kind, e.g. the well-known i.e.
expression as an example. Moreover, Dr. Tang and Prof. Monsen,
or maybe also prof. Ting,
will go to the Dept. of Science to test how Mr. Hansen is doing together
with Ms. Larsen. A reference like Sec. ref{subsubsec:ex} or
Ch. ref{subsubsec:ex}, or even App. ref{subsubsec:ex}, must also be
handled. Likewise, this is test no. $i$ of Doconce features.
A sentence containing "refines lines" could easily
fool a regex substitution with only i.e. since the dot matches anything.
Also, look at Fig. 4 to see how the data compares with Tab. ref{mytab}.
% endif

===== LaTeX Mathematics =====

Here is an equation without label using backslash-bracket environment:
!bt
\[ a = b + c \]
!et
or with number and label, as in (ref{my:eq1}), using the equation environment:
!bt
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u label{my:eq1}
\end{equation}
!et
We can refer to this equation by (ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
!bt
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\
b &= \nabla^2 u + \nabla^4 v
\end{align*}
!et


% if FORMAT in ('latex', 'pdflatex', 'sphinx', 'html', 'pandoc'):
And here is a system of equations with labels in an align environment:
!bt
\begin{align}
a &= q + 4 + 5+ 6 label{eq1} \\
b &= \nabla^2 u + \nabla^4 x label{eq2}
\end{align}
!et
We can refer to (ref{eq1})-(ref{eq2}). They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in `CG-2`.
Also test $a_{i-j}$ as well as $kx-wt$.

Many of the next environments will fail in non-latex formats.
Testing multiline:
!bt
\begin{multline}
a = b = q + \\
  f + \nabla\cdot\nabla u
label{multiline:eq1}
\end{multline}
!et
Testing split:
!bt
\begin{equation}
label{split:envir:eq}
\begin{split}
a = b = q &+ \\
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
!et
We can refer to the last equation by (ref{split:envir:eq}).

Testing gather:
!bt
\begin{gather}
a = b \\
c = d + 7 + 9
\end{gather}
!et

Testing alignat:
!bt
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 label{eq1a} \\
b &= \nabla^2 u + \nabla^4 x & x\in\Omega label{eq2a}
\end{alignat}
!et
Let us refer to (ref{eq1})-(ref{eq2}) again, and to the
alignat variant (ref{eq1a})-(ref{eq2a}), and to (ref{my:eq1}).

Testing eqnarray:
!bt
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, label{myeq1}\\
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g label{myeq2}
\end{eqnarray}
!et
% endif

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem ref{demo:ex:1} and Project ref{demo:ex:2},
as well as Projects ref{proj:circle1} and ref{exer:you}, and in
between there we have Exercise ref{exer:some:formula}.

======= Exercises =======

===== Problem: Flip a Coin =====
label{demo:ex:1}
files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

# Torture tests
file=myfile_should_be_a_part_of_the_text
solutions = mysol.txt, mysol_flip_coin.py, yet_another.file

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

!bhint
Use `r = random.random()` and define head as `r <= 0.5`.
!ehint

# Test syntax error

  !bhint
Draw an integer among $\{1,2\}$ with
`r = random.randint(1,2)` and define head when `r` is 1.
  !ehint

!bans
If the `random.random()` function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
!eans

!bsol
!bc pycod
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
!ec
!esol

=== Remarks ===

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

 o Mark 1.
 o Mark 2.

===== Not an exercise =====

Should be possible to stick a normal section in the middle of many
exercises.

===== Project: Compute a Probability =====

# Minimalistic exercise

label{demo:ex:2}

What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

!bhint
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard `random` module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
!ehint

===== Project: Explore Distributions of Random Circles =====

label{proj:circle1}
file=circles.pdf

The formula for a circle is given by

!bt
\begin{align}
x &= x_0 + R\cos 2\pi t,\\
y &= y_0 + R\sin 2\pi t,
\end{align}
!et
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate `n` points on a circle:

!bc pypro
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
!ec

# Often in an exercise we have some comments about the solution
# which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the `circle` function
above.

!bsubex
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

!bans
Here goes the short answer to part a).
!eans

!bsol
Here goes a full solution to part a).
!esol

!bhint
Use the `numpy.random` module to draw the
$x_0$, $y_0$, and $R$ quantities.
!ehint

!esubex

!bsubex
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.

file=norm.py  # test local filename for subexercise
!esubex

!bsubex
Let $R$ and $(x_0,y_0)$ be normally distributed.
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.
!eremarks

===== Exercise: Determine some Distance =====
label{exer:dist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
With math in answer: $a=b$.
!eans

!bhint
First hint to subexercise a).
With math $a=b$ in hint:

!bt
\[ a=b. \]
!et
And with code (in plain verbatim) returning $x+1$ in hint:

!bc
def func(x):
    return x + 1  # with code in hint
!ec
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

!bt
\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]
!et

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
!bt
\[ \hbox{math in solution: } a = b \]
!et
And code `a=b` in this solution:
!bc
a = b  # code in solution
!ec
End of solution is here.
!esol

#  No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


===== {Exercise}: Some exercise without the "Exercise:" prefix =====

# Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

!bt
\[ \exp{(0)} = 1 \]
!et

And a test that the code `lambda x: x+2` is correctly placed here:

!bc
lambda x: x+2
!ec

===== Example: Just an example =====

# This example needs the --examples_as_exercises option, otherwise
# it is just typeset as it is written.

!bsubex
What is the capital of Norway?

!bans
Oslo.
!eans
!esubex

======= Here goes another section =======

With some text, before we continue with exercises.

======= More Exercises =======

===== Exercise: Make references to projects and problems =====

label{exer:some:formula}
file=verify_formula.py

Pick a statement from Project ref{proj:circle1} or Problem ref{demo:ex:1}
and verify it.


% if FORMAT in ('rst', 'sphinx', 'html'):
===== Project: References in a headings do not work well in ${FORMAT} =====
% else:
===== Project: References to Project ref{demo:ex:2} in a heading works for ${FORMAT} =====
% endif

label{exer:you}
file=selc_composed.pdf

Refer to the previous exercise as Exercise ref{exer:some:formula},
the two before that as Projects ref{demo:ex:2} and ref{proj:circle1},
and this one as Project ref{exer:you}.

======= References =======

BIBFILE: papers.pub


======= Appendix: Just for testing; part I =======

This is the first appendix.

===== A subsection within an appendix =====

Some text.

======= Appendix: Just for testing; part II =======

This is more stuff for an appendix.

===== Appendix: Testing identical titles =====

Without label.


===== Appendix: Testing identical titles =====
label{test:title:id1}

With label.

===== Appendix: Testing identical titles =====
label{test:title:id2}

With label.

===== Appendix: Testing identical titles =====

Without label.

!bnotice Tip
Here is a tip or hint box, typeset as a notice box.
!enotice


# #if FORMAT in ("latex", "pdflatex")
\clearpage
# #endif

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent "Script for Introduction to Version Control":
"http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/" provides a more detailed motivation why you will benefit greatly
from using version control systems.

!bsummary
_Bold remark:_ Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
!esummary

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are "Dropbox":
"http://dropbox.com" and "Google Drive": "http://drive.google.com".
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


===== Appendix: Testing inline comments =====

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl:
not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp:
Simply go to URL:"http://dropbox.com" and watch the video. It explains
how files, like `myfile.py`, perhaps containing much math, like
$\partial u/\partial t$, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

===== Appendix: Testing headings ending with `verbatim inline` =====

The point here is to test 1) `verbatim` code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.


************** File: testdoc.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="A Document for Testing Doconce">
<meta name="keywords" content="figures,movies,index with subindex,index, with comma, and one more">



<style type="text/css">
    /* solarized style */
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #FFBF00;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #fbeed5;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0000"></a>
<!-- begin top navigation -->
<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- end top navigation -->

<p>
<!-- ------------------- main content ---------------------- -->


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen, Kaare Dump, A. Dummy Author, I. S. Overworked, and J. Doe -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Table of contents</h2>

<p>
<a href="._part0001_testdoc.html#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:ex"> Subsection 2: Testing figures and movies </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec3"> Test of movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec5"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec8"> Bibliography test </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec11"> LaTeX Mathematics </a><br>
<a href="._part0002_testdoc.html#___sec12"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec14"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec15"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec20"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec21"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec22"> Example 2: Just an example </a><br>
<a href="._part0002_testdoc.html#___sec23"> Here goes another section </a><br>
<a href="._part0002_testdoc.html#___sec24"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="._part0002_testdoc.html#___sec27"> References </a><br>
<a href="._part0002_testdoc.html#___sec28"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec29"> A subsection within an appendix </a><br>
<a href="._part0002_testdoc.html#___sec30"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec31"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec34"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec35"> Appendix: Testing inline comments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a><br>

<p>
<p>
<!-- begin bottom navigation -->
<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- end bottom navigation -->

<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: testdoc.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}
% #ifdef MOVIE15
\usepackage{movie15}
% #endif


% #ifndef MOVIE
% #define MOVIE "media9"
% #endif

% #if MOVIE == "media9"
\usepackage{media9}
% #elif MOVIE == "movie15"
\usepackage{movie15}
% #elif MOVIE == "multimedia"
\usepackage{multimedia}
% #elif MOVIE == "href-run"
% #endif

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}


% #ifdef TODONOTES
\usepackage{ifthen,xkeyval,tikz,calc,graphicx}
\usepackage[shadow]{todonotes}
\newcommand{\shortinlinecomment}[3]{%
\todo[size=\normalsize,fancyline,color=orange!40,caption={#3}]{%
 \begin{spacing}{0.75}{\bf #1}: #2\end{spacing}}}
\newcommand{\longinlinecomment}[3]{%
\todo[inline,color=orange!40,caption={#3}]{{\bf #1}: #2}}
% #else
\newcommand{\shortinlinecomment}[3]{{\bf #1}: \emph{#2}}
\newcommand{\longinlinecomment}[3]{{\bf #1}: \emph{#2}}
% #endif

% #ifdef LINENUMBERS
\usepackage[mathlines]{lineno}  % show line numbers
\linenumbers
% #endif

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---

\newenvironment{exercise}{}{}
\newcounter{exerno}


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{A Document for Testing Doconce}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
A Document for Testing Doconce
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{A Document for Testing Doconce}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{A Document for Testing Doconce}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
A Document for Testing Doconce
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Email: \texttt{hpl@simula.no}. Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo.}
\and Kaare Dump\footnote{Segfault Inc, Cyberspace.}
\and A. Dummy Author
\and I. S. Overworked\footnote{Inst1; Inst2, Somewhere; Third Inst, Elsewhere; and Fourth Inst.}
\and J. Doe\footnote{Email: \texttt{j\_doe@cyberspace.com}.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})}}\\ [3mm]
    
    {\Large\textsf{Kaare Dump${}^{3}$}}\\ [3mm]
    
    {\Large\textsf{A. Dummy Author${}^{}$}}\\ [3mm]
    
    {\Large\textsf{I. S. Overworked${}^{4, 5, 6, 7}$}}\\ [3mm]
    
    {\Large\textsf{J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
{\large\textsf{${}^3$Segfault Inc, Cyberspace} \\ [1.5mm]}
{\large\textsf{${}^4$Inst1} \\ [1.5mm]}
{\large\textsf{${}^5$Inst2, Somewhere} \\ [1.5mm]}
{\large\textsf{${}^6$Third Inst, Elsewhere} \\ [1.5mm]}
{\large\textsf{${}^7$Fourth Inst} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{Hans Petter Langtangen and Kaare Dump and A. Dummy Author and I. S. Overworked and J. Doe}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo\email{hpl@simula.no} \and Kaare Dump\at Segfault Inc, Cyberspace \and A. Dummy Author \and I. S. Overworked\at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and and Fourth Inst \and J. Doe\email{j_doe@cyberspace.com}}

% #elif LATEX_HEADING == "beamer"
\author{Hans Petter Langtangen\inst{1,2}
\and
Kaare Dump\inst{3}
\and
A. Dummy Author\inst{}
\and
I. S. Overworked\inst{4,5,6,7}
\and
J. Doe\inst{}}
\institute{Center for Biomedical Computing, Simula Research Laboratory\inst{1}
\and
Department of Informatics, University of Oslo\inst{2}
\and
Segfault Inc, Cyberspace\inst{3}
\and
Inst1\inst{4}
\and
Inst2, Somewhere\inst{5}
\and
Third Inst, Elsewhere\inst{6}
\and
Fourth Inst\inst{7}}
% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})} \\ [0mm]
\end{center}


\begin{center}
{\bf Kaare Dump${}^{3}$} \\ [0mm]
\end{center}


\begin{center}
{\bf A. Dummy Author${}^{}$} \\ [0mm]
\end{center}


\begin{center}
{\bf I. S. Overworked${}^{4, 5, 6, 7}$} \\ [0mm]
\end{center}


\begin{center}
{\bf J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\centerline{{\small ${}^3$Segfault Inc, Cyberspace}}
\centerline{{\small ${}^4$Inst1}}
\centerline{{\small ${}^5$Inst2, Somewhere}}
\centerline{{\small ${}^6$Third Inst, Elsewhere}}
\centerline{{\small ${}^7$Fourth Inst}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\tableofcontents
% #ifdef TODONOTES
\listoftodos[List of inline comments]
% #endif

\vspace{1cm} % after toc





% !split




The format of this document is
plain, homemade {\LaTeX} (from Doconce).


% #if LATEX_HEADING == "Springer_collection"
\abstract{
% #else
\begin{abstract}
% #endif
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
% #if LATEX_HEADING == "Springer_collection"
}
% #else
\end{abstract}
% #endif



\section{Section 1}
\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\bfcod
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efcod
and then just the subroutine,
\bfcod

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\efcod
and finally the complete file:
\bfpro
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efpro

Testing other code environments. First Python:
\bccq
!bc pycod
def f(x):
    return x+1
!ec
\eccq
which gets rendered as

\bpycod
def f(x):
    return x+1
\epycod

Now a complete program to be shown via Python Online Tutorial:
\bpypro
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\epypro
\noindent
(\href{{http://pythontutor.com/visualize.html\#code=def+f\%28x\%29\%3A\%0A++++return+x+\%2B+1\%0A\%0Aa+\%3D+2\%0Ax+\%3D+a\%0Aa+\%3D+1\%0Av+\%3D+f\%28x\%29\%0Aprint+v&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0}}{Visualize execution}) 


Then Cython:
\bcycod
cpdef f(double x):
    return x + 1
\ecycod

% This one tests a + sign before a code environment
C++:
\bcpppro
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\ecpppro
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\bccq
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\eccq
which then is typeset as

\bcod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\ecod

HTML:

\bhtmlcod
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
\ehtmlcod

System call:
\bsys
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
\esys

It is time to test \code{verbatim inline font} especially with \code{a newline
inside the text} and an exclamation mark at the end: \code{BEGIN}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the \code{verb} typesetting... Also test backslashes
like \code{\begin} and \code{\end} in inline verbatim text.

Here is some \textcolor{red}{red} color and an attempt to write \textcolor{green}{with
green color containing a linebreak.
And one more.} Some formats will only display this correctly when
HTML is the output format.


\subsection{Subsection 2: Testing figures and movies}
\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed and will be inlined.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
\end{center}


\index{movies}

\paragraph{Test of movies.}
Movie~\ref{mov:tsunami} shows a tsunami.


\begin{figure}[ht]
\begin{center}

% #if MOVIE == "media9"
\includemedia[
width=0.8\linewidth,
label=../doc/manual/figs/mjolnir.mpeg,
activate=pageopen,         % or onclick or pagevisible
addresource=../doc/manual/figs/mjolnir.mpeg,  % embed the video in the PDF
flashvars={
source=../doc/manual/figs/mjolnir.mpeg
&autoPlay=true
&loop=true
&scaleMode=letterbox   % preserve aspect ration while scaling this video
}]{}{VPlayer.swf}

% #ifdef MOVIE_CONTROLS
\mediabutton[
  mediacommand=../doc/manual/figs/mjolnir.mpeg:playPause,
  overface=\\textcolor{blue}{\fbox{\strut Play/Pause}},
  downface=\\textcolor{red}{\fbox{\strut Play/Pause}}
  ]{\fhox{\strut Play/Pause}}
% #endif

% #elif MOVIE == "movie15"
\includemovie[poster,
label=../doc/manual/figs/mjolnir.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/mjolnir.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/mjolnir.mpeg}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/mjolnir.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/mjolnir.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/mjolnir.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/mjolnir.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/mjolnir.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif

% #elif MOVIE == "multimedia"
% Beamer-style \movie command
\movie[
label=../doc/manual/figs/mjolnir.mpeg,
width=0.9\linewidth,
autostart]{../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif

\end{center}
\caption{Mjolnir tsunami (by Sylfest Glimsdal) \label{mov:tsunami}.}
\end{figure}


Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play \href{{wavepacket.html}}{\nolinkurl{wavepacket.html}})
% #if MOVIE == "media9"
\includemedia[
width=0.8\linewidth,
label=../doc/manual/figs/wavepacket.mpeg,
activate=pageopen,         % or onclick or pagevisible
addresource=../doc/manual/figs/wavepacket.mpeg,  % embed the video in the PDF
flashvars={
source=../doc/manual/figs/wavepacket.mpeg
&autoPlay=true
&loop=true
&scaleMode=letterbox   % preserve aspect ration while scaling this video
}]{}{VPlayer.swf}

% #ifdef MOVIE_CONTROLS
\mediabutton[
  mediacommand=../doc/manual/figs/wavepacket.mpeg:playPause,
  overface=\\textcolor{blue}{\fbox{\strut Play/Pause}},
  downface=\\textcolor{red}{\fbox{\strut Play/Pause}}
  ]{\fhox{\strut Play/Pause}}
% #endif

% #elif MOVIE == "movie15"
\includemovie[poster,
label=../doc/manual/figs/wavepacket.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/wavepacket.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/wavepacket.mpeg}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/wavepacket.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/wavepacket.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/wavepacket.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/wavepacket.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/wavepacket.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif

% #elif MOVIE == "multimedia"
% Beamer-style \movie command
\movie[
label=../doc/manual/figs/wavepacket.mpeg,
width=0.9\linewidth,
autostart]{../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif


% Test wrong syntax and multi-line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files \code{../doc/manual/figs/wavepacket_*.png} in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}}{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}})


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate. Similar for Vimeo.

 Movies can be uploaded to YouTube and embedded as HTML or as a link. \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

 Computational fluid dynamics movie. \href{{http://vimeo.com/55562330}}{\nolinkurl{http://vimeo.com/55562330}}


% Test multi-line caption in figure

Here is figure~\ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.eps}}
  \caption{
  A long caption spanning several lines and containing verbatim words like \protect \code{my\_file\_v1} and \protect \code{my\_file\_v2} as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}
\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\bccq
def f(theta):
    return theta**2
\eccq

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}


\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the \code{.tex} by proper begin-end {\LaTeX} environments for theorems.
Should look nice in most formats!



% begin theorem
\label{theorem:fundamental1}


\paragraph{Theorem 5.}
Let $a=1$ and $b=2$. Then $c=3$.
% end theorem

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.


\subsection{Tables}
\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\bccq
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\eccq

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ \code{L\_i} } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & \code{NaN} \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with \code{|-} because of a negative number,
and \code{|} right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ \code{v\_1} } & \multicolumn{1}{c}{ $a_i$ + \code{v\_2} } & \multicolumn{1}{c}{ \code{verb\_3\_} } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: \protect\code{my\_file\_v1} and \protect\code{my\_file\_v2} }

\paragraph{Files \protect\code{my\_file\_v1.py} and \protect\code{my\_file\_v2.py} define some math $a_{i-1}$.}
Here is
some text.

\subsection{Bibliography test}

Here is an example: \cite{Langtangen_Pedersen_2002} discussed propagation of
large destructive water waves, \cite{Langtangen_et_al_2002} gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in \cite{Langtangen_1994a}.
The book chapter \cite{Mardal_et_al_2003a} contains information on
C++ software tools for programming multigrid methods. A real retro
reference is \cite{Langtangen_1988d} about a big FORTRAN package.
Multiple references are also possible, e.g., see
\cite{Langtangen_Pedersen_2002,Mardal_et_al_2003a}.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
\cite{Langtangen_1992c,Langtangen_1994a,Mortensen_et_al_2011,Langtangen_Pedersen_2002}
and
\cite{Langtangen_et_al_2002,Glimsdal_et_al_20006,Rahman_et_al_2006b,Haga_et_al_2011a,Langtangen_2003a,Langtangen_2008a,Langtangen:95}
and all the work of
\cite{Langtangen_2012,Mardal_et_al_2003a,Jeberg_et_al_2004} as well as
old work \cite{Langtangen_1988d} and \cite{Langtangen_1989e}, and the
talk \cite{Langtangen_talk_2007a}.
Langtangen also had two thesis \cite{Langtangen:85,Langtangen_1989e}.
More retro citations are
the old ME-IN323 book \cite{Langtangen:91} and the
\cite{Langtangen:94b} OONSKI '94 paper.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}
\label{Example}

Examples can start with a subsection heading starting with \code{Example:}
and then, with the command-line option \code{--examples_as_exercises} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---


\subsection{URLs}
\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl} or \href{{http://folk.uio.no/hpl}}{hpl}. Also \code{file:///} works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html}}{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: \href{{mailto:hpl@simula.no}}{\nolinkurl{hpl@simula.no}}, or just a \href{{mailto:hpl@simula.no}}{mail link}, or a raw \href{{mailto:hpl@simula.no}}{\nolinkurl{mailto:hpl@simula.no}}.

Here are some tough tests of URLs, especially for the \code{latex} format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

For the \code{--device=paper} option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
\href{{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py}}{\nolinkurl{decay_mod}}.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a \code{_static*} folder.

More tough tests: repeated URLs whose footnotes when using the
\code{--device=paper} option must be correct. We have
\href{{http://google.com}}{google}, \href{{http://google.com}}{google}, and
\href{{http://google.com}}{google}, which should result in exactly three
footnotes.



\subsection{Test of Some {\LaTeX} Fixes}

Let's check abbr.~of some common kind, e.g.~the well-known i.e.
expression as an example. Moreover, Dr.~Tang and Prof.~Monsen,
or maybe also prof.~Ting,
will go to the Dept.~of Science to test how Mr.~Hansen is doing together
with Ms.~Larsen. A reference like Sec.~\ref{subsubsec:ex} or
Ch.~\ref{subsubsec:ex}, or even App.~\ref{subsubsec:ex}, must also be
handled. Likewise, this is test no.~$i$ of Doconce features.
A sentence containing "refines lines" could easily
fool a regex substitution with only i.e.~since the dot matches anything.
Also, look at Fig.~4 to see how the data compares with Tab.~\ref{mytab}.

\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash-bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}). They are a bit simpler than
the Navier-Stokes equations. And test {\LaTeX} hyphen in \code{CG-2}.
Also test $a_{i-j}$ as well as $kx-wt$.

Many of the next environments will fail in non-latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.

\section{Exercises}



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}
\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error




\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use \code{r = random.random()} and define head as \code{r <= 0.5}.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
\code{r = random.randint(1,2)} and define head when \code{r} is 1.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
If the \code{random.random()} function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Code:
\bpycod
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
\epycod
% --- end solution of exercise ---
Filenames: \code{flip_coin.py}, \code{flip_coin.pdf}.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---


\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}
\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard \code{random} module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}
\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate \code{n} points on a circle:

\bpypro
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\epypro

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the \code{circle} function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the \code{numpy.random} module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
Here goes the short answer to part a).
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution to part a).
% --- end solution of exercise ---

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: \code{norm.py}.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: \code{circles.pdf}.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}
\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
\[ \hbox{math in solution: } a = b \]
And code \code{a=b} in this solution:
\bccq
a = b  # code in solution
\eccq
End of solution is here.
% --- end solution of exercise ---


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code (in plain verbatim) returning $x+1$ in hint:

\bccq
def func(x):
    return x + 1  # with code in hint
\eccq
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: \code{subexer_a.pdf}.


% --- begin answer of exercise ---
\paragraph{Answer.}
Short answer to subexercise a).
With math in answer: $a=b$.
% --- end answer of exercise ---

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: \code{subexer_b.pdf}.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes the solution of this subexercise.
% --- end solution of exercise ---

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code \code{lambda x: x+2} is correctly placed here:

\bccq
lambda x: x+2
\eccq

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples_as_exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.

\section{More Exercises}



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}
\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: \code{verify_formula.py}.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for latex}
\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: \code{selc_composed.pdf}.

\end{exercise}
% --- end exercise ---




\bibliographystyle{plain}
\bibliography{papers.bib}





\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.

\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.


\subsection{Appendix: Testing identical titles}
\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}
\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\begin{graybox1admon}[Tip.]
Here is a tip or hint box, typeset as a notice box.
\end{graybox1admon}

\clearpage

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent \href{{http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/}}{Script for Introduction to Version Control} provides a more detailed motivation why you will benefit greatly
from using version control systems.


\begin{graybox1admon}[Summary.]
\textbf{Bold remark:} Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
\end{graybox1admon}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are \href{{http://dropbox.com}}{Dropbox} and \href{{http://drive.google.com}}{Google Drive}.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


\subsection{Appendix: Testing inline comments}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. \shortinlinecomment{hpl 1}{ not sure if in the cloud is understood by all. }{ not sure if in } I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. \longinlinecomment{mp 2}{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} and watch the video. It explains
how files, like \code{myfile.py}, perhaps containing much math, like
$\partial u/\partial t$, are easily communicated between machines. }{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} } It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  \longinlinecomment{hpl 3}{ The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools. }{ The following text aims }

\subsection{Appendix: Testing headings ending with \protect\code{verbatim inline} }

The point here is to test 1) \code{verbatim} code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in {\LaTeX}.

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: testdoc.tex_ptex2tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
twoside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

\usepackage[a4paper]{geometry}

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}



\usepackage{movie15}

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}


\usepackage{ifthen,xkeyval,tikz,calc,graphicx}
\usepackage[shadow]{todonotes}
\newcommand{\shortinlinecomment}[3]{%
\todo[size=\normalsize,fancyline,color=orange!40,caption={#3}]{%
 \begin{spacing}{0.75}{\bf #1}: #2\end{spacing}}}
\newcommand{\longinlinecomment}[3]{%
\todo[inline,color=orange!40,caption={#3}]{{\bf #1}: #2}}

\usepackage[mathlines]{lineno}  % show line numbers
\linenumbers

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}

% --- end of standard preamble for documents ---

\newenvironment{exercise}{}{}
\newcounter{exerno}


\usepackage{theorem}
\newtheorem{theorem}{Theorem}[section]

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
A Document for Testing Doconce
\end{spacing}
}}}


% ----------------- author(s) -------------------------
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})}}\\ [3mm]
    
    {\Large\textsf{Kaare Dump${}^{3}$}}\\ [3mm]
    
    {\Large\textsf{A. Dummy Author${}^{}$}}\\ [3mm]
    
    {\Large\textsf{I. S. Overworked${}^{4, 5, 6, 7}$}}\\ [3mm]
    
    {\Large\textsf{J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
{\large\textsf{${}^3$Segfault Inc, Cyberspace} \\ [1.5mm]}
{\large\textsf{${}^4$Inst1} \\ [1.5mm]}
{\large\textsf{${}^5$Inst2, Somewhere} \\ [1.5mm]}
{\large\textsf{${}^6$Third Inst, Elsewhere} \\ [1.5mm]}
{\large\textsf{${}^7$Fourth Inst} \\ [1.5mm]}
% ----------------- end author(s) -------------------------



\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage



\tableofcontents

\subsection*{List of Exercises, Problems, and Projects}
\begin{tabular}{lrll}
Problem & 1 & Flip a Coin & p.~\pageref{demo:ex:1} \\
Project & 1 & Compute a Probability & p.~\pageref{demo:ex:2} \\
Project & 2 & Explore Distributions of Random Circles & p.~\pageref{proj:circle1} \\
Exercise & 1 & Determine some Distance & p.~\pageref{exer:dist} \\
Exercise & 2 & Some exercise without the "Exercise:" prefix & \\
Exercise & 3 & Make references to projects and problems & p.~\pageref{exer:some:formula} \\
Project & 3 & References to Project ref{demo:ex:2} in a ... & p.~\pageref{exer:you} \\
\end{tabular}
% --- end of table of exercises


\listoftodos[List of inline comments]

\clearpage % after toc





% !split




The format of this document is
plain, homemade \textsc{pdf}{\LaTeX} (from Doconce).


\begin{abstract}
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
\end{abstract}



\section{Section 1}
\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code--blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}
\noindent
and then just the subroutine,
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\end{minted}
\noindent
and finally the complete file:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}
\noindent

Testing other code environments. First Python:
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
!bc pycod
def f(x):
    return x+1
!ec
\end{Verbatim}
\noindent
which gets rendered as

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def f(x):
    return x+1
\end{minted}
\noindent

Now a complete program to be shown via Python Online Tutorial:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\end{minted}
\noindent

Then Cython:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{cython}
cpdef f(double x):
    return x + 1
\end{minted}
\noindent

% This one tests a + sign before a code environment
C++:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{c++}
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\end{minted}
\noindent
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\end{Verbatim}
\noindent
which then is typeset as

\providecommand{\shadedskip}{}
\definecolor{shadecolor}{rgb}{0.87843, 0.95686, 1.0}
\renewenvironment{shadedskip}{
\def\FrameCommand{\colorbox{shadecolor}}\FrameRule0.6pt
\MakeFramed {\FrameRestore}\vskip3mm}{\vskip0mm\endMakeFramed}
\providecommand{\shadedquoteBlue}{}
\renewenvironment{shadedquoteBlue}[1][]{
\bgroup\rmfamily
\fboxsep=0mm\relax
\begin{shadedskip}
\list{}{\parsep=-2mm\parskip=0mm\topsep=0pt\leftmargin=2mm
\rightmargin=2\leftmargin\leftmargin=4pt\relax}
\item\relax}
{\endlist\end{shadedskip}\egroup}\begin{shadedquoteBlue}
\fontsize{9pt}{9pt}
\begin{Verbatim}
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\end{Verbatim}
\end{shadedquoteBlue}
\noindent

HTML:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{html}
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
\end{minted}
\noindent

System call:
\vspace{4pt}
\begin{Verbatim}[numbers=none,frame=lines,label=\fbox{{\tiny Terminal}},fontsize=\fontsize{9pt}{9pt},
labelposition=topline,framesep=2.5mm,framerule=0.7pt]
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
\end{Verbatim}

It is time to test {\fontsize{10pt}{10pt}\Verb!verbatim inline font!} especially with {\fontsize{10pt}{10pt}\Verb!a newline inside the text!} and an exclamation mark at the end: {\fontsize{10pt}{10pt}\Verb!BEGIN!}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the {\fontsize{10pt}{10pt}\Verb!verb!} typesetting... Also test backslashes
like {\fontsize{10pt}{10pt}\Verb!\begin!} and {\fontsize{10pt}{10pt}\Verb!\end!} in inline verbatim text.

Here is some \textcolor{red}{red} color and an attempt to write \textcolor{green}{with
green color containing a linebreak.
And one more.} Some formats will only display this correctly when
HTML is the output format.


\subsection{Subsection 2: Testing figures and movies}
\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed and will be inlined.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
\end{center}


\index{movies}

\paragraph{Test of movies.}
Movie~\ref{mov:tsunami} shows a tsunami.


\begin{figure}[ht]
\begin{center}

\includemovie[poster,
label=../doc/manual/figs/mjolnir.mpeg,
autoplay,
%controls,
%toolbar,
text={\small (Loading ../doc/manual/figs/mjolnir.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/mjolnir.mpeg}
\movieref[rate=0.5]{../doc/manual/figs/mjolnir.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/mjolnir.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/mjolnir.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/mjolnir.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/mjolnir.mpeg}{Stop}


\end{center}
\caption{Mjolnir tsunami (by Sylfest Glimsdal) \label{mov:tsunami}.}
\end{figure}


Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play \href{{wavepacket.html}}{\nolinkurl{wavepacket.html}\footnote{\texttt{wavepacket.html}}})
\includemovie[poster,
label=../doc/manual/figs/wavepacket.mpeg,
autoplay,
%controls,
%toolbar,
text={\small (Loading ../doc/manual/figs/wavepacket.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/wavepacket.mpeg}
\movieref[rate=0.5]{../doc/manual/figs/wavepacket.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/wavepacket.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/wavepacket.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/wavepacket.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/wavepacket.mpeg}{Stop}



% Test wrong syntax and multi--line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files {\fontsize{10pt}{10pt}\Verb!../doc/manual/figs/wavepacket_*.png!} in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}}{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}\footnote{\texttt{file:///home/hpl/vc/doconce/test/wavepacket\_0001.html}}})


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate. Similar for Vimeo.

 Movies can be uploaded to YouTube and embedded as HTML or as a link. \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

 Computational fluid dynamics movie. \href{{http://vimeo.com/55562330}}{\nolinkurl{http://vimeo.com/55562330}}


% Test multi--line caption in figure

Here is figure~\ref{myfig} with a long multi--line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
  \caption{
  A long caption spanning several lines and containing verbatim words like {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v1!} and {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v2!} as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}
\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
def f(theta):
    return theta**2
\end{Verbatim}
\noindent

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}


\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the {\fontsize{10pt}{10pt}\Verb!.tex!} by proper begin--end {\LaTeX} environments for theorems.
Should look nice in most formats!



\begin{theorem}
\label{theorem:fundamental1}



Let $a=1$ and $b=2$. Then $c=3$.
\end{theorem}

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.


\subsection{Tables}
\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\end{Verbatim}
\noindent

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ {\fontsize{10pt}{10pt}\Verb!L\_i!} } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & {\fontsize{10pt}{10pt}\Verb!NaN!} \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with {\fontsize{10pt}{10pt}\Verb!|-!} because of a negative number,
and {\fontsize{10pt}{10pt}\Verb!|!} right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ {\fontsize{10pt}{10pt}\Verb!v\_1!} } & \multicolumn{1}{c}{ $a_i$ + {\fontsize{10pt}{10pt}\Verb!v\_2!} } & \multicolumn{1}{c}{ {\fontsize{10pt}{10pt}\Verb!verb\_3\_!} } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v1!} and {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v2!} }

\paragraph{Files {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v1.py!} and {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v2.py!} define some math $a_{i-1}$.}
Here is
some text.

\subsection{Bibliography test}

Here is an example: \cite{Langtangen_Pedersen_2002} discussed propagation of
large destructive water waves, \cite{Langtangen_et_al_2002} gave
an overview of numerical methods for solving the Navier--Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in \cite{Langtangen_1994a}.
The book chapter \cite{Mardal_et_al_2003a} contains information on
C++ software tools for programming multigrid methods. A real retro
reference is \cite{Langtangen_1988d} about a big FORTRAN package.
Multiple references are also possible, e.g., see
\cite{Langtangen_Pedersen_2002,Mardal_et_al_2003a}.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
\cite{Langtangen_1992c,Langtangen_1994a,Mortensen_et_al_2011,Langtangen_Pedersen_2002}
and
\cite{Langtangen_et_al_2002,Glimsdal_et_al_20006,Rahman_et_al_2006b,Haga_et_al_2011a,Langtangen_2003a,Langtangen_2008a,Langtangen:95}
and all the work of
\cite{Langtangen_2012,Mardal_et_al_2003a,Jeberg_et_al_2004} as well as
old work \cite{Langtangen_1988d} and \cite{Langtangen_1989e}, and the
talk \cite{Langtangen_talk_2007a}.
Langtangen also had two thesis \cite{Langtangen:85,Langtangen_1989e}.
More retro citations are
the old ME-IN323 book \cite{Langtangen:91} and the
\cite{Langtangen:94b} OONSKI '94 paper.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}
\label{Example}

Examples can start with a subsection heading starting with {\fontsize{10pt}{10pt}\Verb!Example:!}
and then, with the command--line option {\fontsize{10pt}{10pt}\Verb!--examples_as_exercises!} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---


\subsection{URLs}
\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}} or \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}. Also {\fontsize{10pt}{10pt}\Verb!file:///!} works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html}}{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi--colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: \href{{mailto:hpl@simula.no}}{\nolinkurl{hpl@simula.no}\footnote{\texttt{mailto:hpl@simula.no}}}, or just a \href{{mailto:hpl@simula.no}}{mail link}\footnote{\texttt{mailto:hpl@simula.no}}, or a raw \href{{mailto:hpl@simula.no}}{\nolinkurl{mailto:hpl@simula.no}\footnote{\texttt{mailto:hpl@simula.no}}}.

Here are some tough tests of URLs, especially for the {\fontsize{10pt}{10pt}\Verb!latex!} format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes}\footnote{\texttt{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes\_formulas}} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}\footnote{\texttt{http://www.springer.com/mathematics/computational+science+\%26+engineering/book/978-3-642-23098-1}}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

For the {\fontsize{10pt}{10pt}\Verb!--device=paper!} option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
\href{{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py}}{\nolinkurl{decay_mod}\footnote{\texttt{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay\_mod.py}}}.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a {\fontsize{10pt}{10pt}\Verb!_static*!} folder.

More tough tests: repeated URLs whose footnotes when using the
{\fontsize{10pt}{10pt}\Verb!--device=paper!} option must be correct. We have
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, \href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, and
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, which should result in exactly three
footnotes.



\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash--bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align--astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}). They are a bit simpler than
the Navier--Stokes equations. And test {\LaTeX} hyphen in {\fontsize{10pt}{10pt}\Verb!CG-2!}.
Also test $a_{i-j}$ as well as $kx-wt$.

Many of the next environments will fail in non--latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.

\section{Exercises}



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}
\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error




\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use {\fontsize{10pt}{10pt}\Verb!r = random.random()!} and define head as {\fontsize{10pt}{10pt}\Verb!r <= 0.5!}.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
{\fontsize{10pt}{10pt}\Verb!r = random.randint(1,2)!} and define head when {\fontsize{10pt}{10pt}\Verb!r!} is 1.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
If the {\fontsize{10pt}{10pt}\Verb!random.random()!} function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Code:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
\end{minted}
\noindent
% --- end solution of exercise ---
Filenames: {\fontsize{10pt}{10pt}\Verb!flip_coin.py!}, {\fontsize{10pt}{10pt}\Verb!flip_coin.pdf!}.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---


\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}
\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard {\fontsize{10pt}{10pt}\Verb!random!} module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}
\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate {\fontsize{10pt}{10pt}\Verb!n!} points on a circle:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\end{minted}
\noindent

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the {\fontsize{10pt}{10pt}\Verb!circle!} function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the {\fontsize{10pt}{10pt}\Verb!numpy.random!} module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
Here goes the short answer to part a).
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution to part a).
% --- end solution of exercise ---

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: {\fontsize{10pt}{10pt}\Verb!norm.py!}.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: {\fontsize{10pt}{10pt}\Verb!circles.pdf!}.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}
\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
\[ \hbox{math in solution: } a = b \]
And code {\fontsize{10pt}{10pt}\Verb!a=b!} in this solution:
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
a = b  # code in solution
\end{Verbatim}
\noindent
End of solution is here.
% --- end solution of exercise ---


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code (in plain verbatim) returning $x+1$ in hint:

\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
def func(x):
    return x + 1  # with code in hint
\end{Verbatim}
\noindent
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: {\fontsize{10pt}{10pt}\Verb!subexer_a.pdf!}.


% --- begin answer of exercise ---
\paragraph{Answer.}
Short answer to subexercise a).
With math in answer: $a=b$.
% --- end answer of exercise ---

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: {\fontsize{10pt}{10pt}\Verb!subexer_b.pdf!}.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes the solution of this subexercise.
% --- end solution of exercise ---

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code {\fontsize{10pt}{10pt}\Verb!lambda x: x+2!} is correctly placed here:

\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
lambda x: x+2
\end{Verbatim}
\noindent

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples_as_exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.

\section{More Exercises}



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}
\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: {\fontsize{10pt}{10pt}\Verb!verify_formula.py!}.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for pdflatex}
\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: {\fontsize{10pt}{10pt}\Verb!selc_composed.pdf!}.

\end{exercise}
% --- end exercise ---




\bibliographystyle{plain}
\bibliography{papers.bib}





\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.

\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.


\subsection{Appendix: Testing identical titles}
\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}
\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\begin{graybox1admon}[Tip.]
Here is a tip or hint box, typeset as a notice box.
\end{graybox1admon}

\clearpage

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent \href{{http://software--carpentry.org/2010/07/script--for-introduction-to--version-control/}}{Script for Introduction to Version Control}\footnote{\texttt{http://software--carpentry.org/2010/07/script--for-introduction-to--version-control/}} provides a more detailed motivation why you will benefit greatly
from using version control systems.


\begin{graybox1admon}[Summary.]
\textbf{Bold remark:} Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
\end{graybox1admon}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are \href{{http://dropbox.com}}{Dropbox}\footnote{\texttt{http://dropbox.com}} and \href{{http://drive.google.com}}{Google Drive}\footnote{\texttt{http://drive.google.com}}.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in--depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to--know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


\subsection{Appendix: Testing inline comments}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. \shortinlinecomment{hpl 1}{ not sure if in the cloud is understood by all. }{ not sure if in } I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. \longinlinecomment{mp 2}{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} and watch the video. It explains
how files, like {\fontsize{10pt}{10pt}\Verb!myfile.py!}, perhaps containing much math, like
$\partial u/\partial t$, are easily communicated between machines. }{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} } It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  \longinlinecomment{hpl 3}{ The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in--depth explanations of the concepts and tools. }{ The following text aims }

\subsection{Appendix: Testing headings ending with {\fontsize{10pt}{10pt}\protect\Verb!verbatim inline!} }

The point here is to test 1) {\fontsize{10pt}{10pt}\Verb!verbatim!} code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in {\LaTeX}.

% ------------------- end of main content ---------------


\printindex

\end{document}

************** File: testdoc.tex_doconce_ptex2tex *****************
\bsys (!bc sys) -> begin{quote}begin{Verbatim}
\bpypro (!bc pypro) -> \begin{python:nt}
\bfcod (!bc fcod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
\bfpro (!bc fpro) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bhtmlcod (!bc htmlcod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{html}
\bcycod (!bc cycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{cython}
\bcpppro (!bc cpppro) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{c++}
\bcod (!bc cod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in testdoc.tex
----------- end of doconce ptex2tex output ----------------
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
twoside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{anslistings,minted,fancyvrb} % packages needed for verbatim environments



\usepackage{media9}


%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}


\newcommand{\shortinlinecomment}[3]{{\bf #1}: \emph{#2}}
\newcommand{\longinlinecomment}[3]{{\bf #1}: \emph{#2}}


\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---

\newenvironment{exercise}{}{}
\newcounter{exerno}


\usepackage{theorem}
\newtheorem{theorem}{Theorem}[section]

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
A Document for Testing Doconce
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})} \\ [0mm]
\end{center}


\begin{center}
{\bf Kaare Dump${}^{3}$} \\ [0mm]
\end{center}


\begin{center}
{\bf A. Dummy Author${}^{}$} \\ [0mm]
\end{center}


\begin{center}
{\bf I. S. Overworked${}^{4, 5, 6, 7}$} \\ [0mm]
\end{center}


\begin{center}
{\bf J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\centerline{{\small ${}^3$Segfault Inc, Cyberspace}}
\centerline{{\small ${}^4$Inst1}}
\centerline{{\small ${}^5$Inst2, Somewhere}}
\centerline{{\small ${}^6$Third Inst, Elsewhere}}
\centerline{{\small ${}^7$Fourth Inst}}
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\tableofcontents

\subsection*{List of Exercises, Problems, and Projects}
\begin{tabular}{lrll}
Problem & 1 & Flip a Coin & p.~\pageref{demo:ex:1} \\
Project & 1 & Compute a Probability & p.~\pageref{demo:ex:2} \\
Project & 2 & Explore Distributions of Random Circles & p.~\pageref{proj:circle1} \\
Exercise & 1 & Determine some Distance & p.~\pageref{exer:dist} \\
Exercise & 2 & Some exercise without the "Exercise:" prefix & \\
Exercise & 3 & Make references to projects and problems & p.~\pageref{exer:some:formula} \\
Project & 3 & References to Project ref{demo:ex:2} in a ... & p.~\pageref{exer:you} \\
\end{tabular}
% --- end of table of exercises



\clearpage % after toc





% !split




The format of this document is
plain, homemade \textsc{pdf}{\LaTeX} (from Doconce).


\begin{abstract}
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
\end{abstract}



\section{Section 1}
\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code--blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}
and then just the subroutine,
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\end{minted}
and finally the complete file:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}

Testing other code environments. First Python:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
!bc pycod
def f(x):
    return x+1
!ec
\end{Verbatim}
which gets rendered as

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def f(x):
    return x+1
\end{minted}

Now a complete program to be shown via Python Online Tutorial:
\begin{python:nt}
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\end{python:nt}

Then Cython:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{cython}
cpdef f(double x):
    return x + 1
\end{minted}

% This one tests a + sign before a code environment
C++:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{c++}
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\end{minted}
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\end{Verbatim}
which then is typeset as

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\end{Verbatim}

HTML:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{html}
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
\end{minted}

System call:
begin{quote}begin{Verbatim}
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
end{Verbatim}end{quote}

It is time to test \Verb!verbatim inline font! especially with \Verb!a newline inside the text! and an exclamation mark at the end: \Verb!BEGIN!! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the \Verb!verb! typesetting... Also test backslashes
like \Verb!\begin! and \Verb!\end! in inline verbatim text.

Here is some \textcolor{red}{red} color and an attempt to write \textcolor{green}{with
green color containing a linebreak.
And one more.} Some formats will only display this correctly when
HTML is the output format.


\subsection{Subsection 2: Testing figures and movies}
\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed and will be inlined.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
\end{center}


\index{movies}

\paragraph{Test of movies.}
Movie~\ref{mov:tsunami} shows a tsunami.


\begin{figure}[ht]
\begin{center}

\includemedia[
width=0.8\linewidth,
label=../doc/manual/figs/mjolnir.mpeg,
activate=pageopen,         % or onclick or pagevisible
addresource=../doc/manual/figs/mjolnir.mpeg,  % embed the video in the PDF
flashvars={
source=../doc/manual/figs/mjolnir.mpeg
&autoPlay=true
&loop=true
&scaleMode=letterbox   % preserve aspect ration while scaling this video
}]{}{VPlayer.swf}



\end{center}
\caption{Mjolnir tsunami (by Sylfest Glimsdal) \label{mov:tsunami}.}
\end{figure}


Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play \href{{wavepacket.html}}{\nolinkurl{wavepacket.html}\footnote{\texttt{wavepacket.html}}})
\includemedia[
width=0.8\linewidth,
label=../doc/manual/figs/wavepacket.mpeg,
activate=pageopen,         % or onclick or pagevisible
addresource=../doc/manual/figs/wavepacket.mpeg,  % embed the video in the PDF
flashvars={
source=../doc/manual/figs/wavepacket.mpeg
&autoPlay=true
&loop=true
&scaleMode=letterbox   % preserve aspect ration while scaling this video
}]{}{VPlayer.swf}




% Test wrong syntax and multi--line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files \Verb!../doc/manual/figs/wavepacket_*.png! in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}}{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}\footnote{\texttt{file:///home/hpl/vc/doconce/test/wavepacket\_0001.html}}})


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate. Similar for Vimeo.

 Movies can be uploaded to YouTube and embedded as HTML or as a link. \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

 Computational fluid dynamics movie. \href{{http://vimeo.com/55562330}}{\nolinkurl{http://vimeo.com/55562330}}


% Test multi--line caption in figure

Here is figure~\ref{myfig} with a long multi--line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
  \caption{
  A long caption spanning several lines and containing verbatim words like \protect \Verb!my\_file\_v1! and \protect \Verb!my\_file\_v2! as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}
\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
def f(theta):
    return theta**2
\end{Verbatim}

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}


\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the \Verb!.tex! by proper begin--end {\LaTeX} environments for theorems.
Should look nice in most formats!



\begin{theorem}
\label{theorem:fundamental1}



Let $a=1$ and $b=2$. Then $c=3$.
\end{theorem}

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.


\subsection{Tables}
\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\end{Verbatim}

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ \Verb!L\_i! } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & \Verb!NaN! \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with \Verb!|-! because of a negative number,
and \Verb!|! right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ \Verb!v\_1! } & \multicolumn{1}{c}{ $a_i$ + \Verb!v\_2! } & \multicolumn{1}{c}{ \Verb!verb\_3\_! } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: \protect\Verb!my\_file\_v1! and \protect\Verb!my\_file\_v2! }

\paragraph{Files \protect\Verb!my\_file\_v1.py! and \protect\Verb!my\_file\_v2.py! define some math $a_{i-1}$.}
Here is
some text.

\subsection{Bibliography test}

Here is an example: \cite{Langtangen_Pedersen_2002} discussed propagation of
large destructive water waves, \cite{Langtangen_et_al_2002} gave
an overview of numerical methods for solving the Navier--Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in \cite{Langtangen_1994a}.
The book chapter \cite{Mardal_et_al_2003a} contains information on
C++ software tools for programming multigrid methods. A real retro
reference is \cite{Langtangen_1988d} about a big FORTRAN package.
Multiple references are also possible, e.g., see
\cite{Langtangen_Pedersen_2002,Mardal_et_al_2003a}.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
\cite{Langtangen_1992c,Langtangen_1994a,Mortensen_et_al_2011,Langtangen_Pedersen_2002}
and
\cite{Langtangen_et_al_2002,Glimsdal_et_al_20006,Rahman_et_al_2006b,Haga_et_al_2011a,Langtangen_2003a,Langtangen_2008a,Langtangen:95}
and all the work of
\cite{Langtangen_2012,Mardal_et_al_2003a,Jeberg_et_al_2004} as well as
old work \cite{Langtangen_1988d} and \cite{Langtangen_1989e}, and the
talk \cite{Langtangen_talk_2007a}.
Langtangen also had two thesis \cite{Langtangen:85,Langtangen_1989e}.
More retro citations are
the old ME-IN323 book \cite{Langtangen:91} and the
\cite{Langtangen:94b} OONSKI '94 paper.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}
\label{Example}

Examples can start with a subsection heading starting with \Verb!Example:!
and then, with the command--line option \Verb!--examples_as_exercises! be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---


\subsection{URLs}
\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}\footnote{\texttt{testdoc.do.txt}}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}} or \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}. Also \Verb!file:///! works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html}}{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi--colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: \href{{mailto:hpl@simula.no}}{\nolinkurl{hpl@simula.no}\footnote{\texttt{mailto:hpl@simula.no}}}, or just a \href{{mailto:hpl@simula.no}}{mail link}\footnote{\texttt{mailto:hpl@simula.no}}, or a raw \href{{mailto:hpl@simula.no}}{\nolinkurl{mailto:hpl@simula.no}\footnote{\texttt{mailto:hpl@simula.no}}}.

Here are some tough tests of URLs, especially for the \Verb!latex! format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes}\footnote{\texttt{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes\_formulas}} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}\footnote{\texttt{http://www.springer.com/mathematics/computational+science+\%26+engineering/book/978-3-642-23098-1}}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

For the \Verb!--device=paper! option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
\href{{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py}}{\nolinkurl{decay_mod}\footnote{\texttt{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay\_mod.py}}}.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a \Verb!_static*! folder.

More tough tests: repeated URLs whose footnotes when using the
\Verb!--device=paper! option must be correct. We have
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, \href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, and
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, which should result in exactly three
footnotes.



\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash--bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align--astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}). They are a bit simpler than
the Navier--Stokes equations. And test {\LaTeX} hyphen in \Verb!CG-2!.
Also test $a_{i-j}$ as well as $kx-wt$.

Many of the next environments will fail in non--latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.

\section{Exercises}



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}
\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error




\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use \Verb!r = random.random()! and define head as \Verb!r <= 0.5!.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
\Verb!r = random.randint(1,2)! and define head when \Verb!r! is 1.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
If the \Verb!random.random()! function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Code:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
\end{minted}
% --- end solution of exercise ---
Filenames: \Verb!flip_coin.py!, \Verb!flip_coin.pdf!.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---


\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}
\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard \Verb!random! module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}
\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate \Verb!n! points on a circle:

\begin{python:nt}
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\end{python:nt}

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the \Verb!circle! function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the \Verb!numpy.random! module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
Here goes the short answer to part a).
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution to part a).
% --- end solution of exercise ---

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: \Verb!norm.py!.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: \Verb!circles.pdf!.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}
\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
\[ \hbox{math in solution: } a = b \]
And code \Verb!a=b! in this solution:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
a = b  # code in solution
\end{Verbatim}
End of solution is here.
% --- end solution of exercise ---


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code (in plain verbatim) returning $x+1$ in hint:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
def func(x):
    return x + 1  # with code in hint
\end{Verbatim}
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: \Verb!subexer_a.pdf!.


% --- begin answer of exercise ---
\paragraph{Answer.}
Short answer to subexercise a).
With math in answer: $a=b$.
% --- end answer of exercise ---

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: \Verb!subexer_b.pdf!.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes the solution of this subexercise.
% --- end solution of exercise ---

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code \Verb!lambda x: x+2! is correctly placed here:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
lambda x: x+2
\end{Verbatim}

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples_as_exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.

\section{More Exercises}



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}
\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: \Verb!verify_formula.py!.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for pdflatex}
\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: \Verb!selc_composed.pdf!.

\end{exercise}
% --- end exercise ---




\bibliographystyle{plain}
\bibliography{papers.bib}





\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.

\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.


\subsection{Appendix: Testing identical titles}
\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}
\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\begin{graybox1admon}[Tip.]
Here is a tip or hint box, typeset as a notice box.
\end{graybox1admon}

\clearpage

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent \href{{http://software--carpentry.org/2010/07/script--for-introduction-to--version-control/}}{Script for Introduction to Version Control}\footnote{\texttt{http://software--carpentry.org/2010/07/script--for-introduction-to--version-control/}} provides a more detailed motivation why you will benefit greatly
from using version control systems.


\begin{graybox1admon}[Summary.]
\textbf{Bold remark:} Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
\end{graybox1admon}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are \href{{http://dropbox.com}}{Dropbox}\footnote{\texttt{http://dropbox.com}} and \href{{http://drive.google.com}}{Google Drive}\footnote{\texttt{http://drive.google.com}}.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in--depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to--know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


\subsection{Appendix: Testing inline comments}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. \shortinlinecomment{hpl 1}{ not sure if in the cloud is understood by all. }{ not sure if in } I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. \longinlinecomment{mp 2}{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} and watch the video. It explains
how files, like \Verb!myfile.py!, perhaps containing much math, like
$\partial u/\partial t$, are easily communicated between machines. }{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} } It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  \longinlinecomment{hpl 3}{ The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in--depth explanations of the concepts and tools. }{ The following text aims }

\subsection{Appendix: Testing headings ending with \protect\Verb!verbatim inline! }

The point here is to test 1) \Verb!verbatim! code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in {\LaTeX}.

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: testdoc.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

A Document for Testing Doconce
==============================

:Author: Hans Petter Langtangen (hpl at simula.no), Kaare Dump, A. Dummy Author, I. S. Overworked, J. Doe (j_doe at cyberspace.com)
:Date: Jan 32, 2100

.. contents:: Table of Contents
   :depth: 2



.. !split





The format of this document is
rst

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

.. Cannot demonstrate chapter headings since abstract and chapter

.. is mutually exclusive in LaTeX


.. _sec1:


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line



..

    Here are two lines that make up
    a block quote.

.. !split and check if these extra words are included properly in the comment


Subsection 1
------------

More text, with a reference back to the section `Section 1`_ and further
to the section `URLs`_. 
.. sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console


Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


.. This one tests a + sign before a code environment

C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

.. The next should get correctly typset in sphinx (cod is fcod)

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end


HTML::


        <table>
        <tr><td>Column 1</td><td>Column 2</td></tr>
        <tr><td>0.67526 </td><td>0.92871 </td></tr>
        <!-- comment -->
        </table>


System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test ``verbatim inline font`` especially with ``a newline
inside the text`` and an exclamation mark at the end: ``BEGIN``! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the ``verb`` typesetting... Also test backslashes
like ``\begin`` and ``\end`` in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


.. _subsec:ex:

Subsection 2: Testing figures and movies
----------------------------------------

Test of figures. In particular we refer to Figure `fig:impact`_ in which
there is a flow.


.. _fig:impact:

.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200

   *Visualization of flow by streamtubes*  (fig:impact)


Figures without captions are allowed and will be inlined.


.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200




Test of movies
~~~~~~~~~~~~~~

Movie `mov:tsunami`_ shows a tsunami.

.. raw:: html
        
        <embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p><em>Mjolnir tsunami (by Sylfest Glimsdal) .</em></p>



Test empty caption (for inline movie):

.. raw:: html
        
        <embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p><em></em></p>



.. Test wrong syntax and multi-line caption


.. raw:: html
        
        <p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
        <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>



.. Check out the correct with and height of YouTube movies from the

.. embed command that the YouTube page can generate. Similar for Vimeo.


.. raw:: html
        
        <iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>
        
        <em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>
        



.. raw:: html
        
        <iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>
        
        <em>Computational fluid dynamics movie.</em>
        




.. Test multi-line caption in figure


Here is figure `myfig`_ with a long multi-line caption
and an extra space before the FIGURE keyword.


.. _myfig:

.. figure:: ../doc/manual/figs/wavepacket_0001.png
   :width: 500

   *A long caption spanning several lines and containing verbatim words like ``my_file_v1`` and ``my_file_v2`` as well as math with subscript as in $t_{i+1}$*  (myfig)


.. Must be a blank line after MOVIE or FIGURE to detect this problem


.. Test URL as figure name



.. figure:: https://doconce.googlecode.com/hg/doc/blog/f_plot.png
   :width: 500



.. Test wikimedia type of files that otherwise reside in subdirs


.. Somewhat challenging heading with latex math, \t, \n, ? and parenthesis


.. _decay:sec:theta:

The \theta parameter (not \nabla?)
----------------------------------

Functions do not always need to be advanced, here is one
involving \theta::


        def f(theta):
            return theta**2


*More on \theta.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
\frac{1}{2}, {1/2}, \pmb{x}, \frac{Du}{dt},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the ``.tex`` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



.. begin theorem


*Theorem 5.* Let a=1 and b=2. Then c=3.

.. end theorem


.. begin proof

*Proof.* Since c=a+b, the result follows from straightforward addition.
END
.. end proof


As we see, the proof of Theorem 5 is a modest
achievement.


.. _subsec:table:

Tables
------


.. index with comma could fool sphinx


Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

========  ========  ========  ========  
   i        h_i     \bar T_i  ``L_i``   
========  ========  ========  ========  
0                0       288   -0.0065  
1           11,000       216       0.0  
2           20,000       216     0.001  
3           32,000       228    0.0028  
4           47,000       270       0.0  
5           51,000       270   -0.0028  
6           71,000       214   ``NaN``  
========  ========  ========  ========  

And add one with verbatim headings (with underscores),
and rows starting with ``|-`` because of a negative number,
and ``|`` right after verbatim word (with no space):

=============  =============  =============  =============  
    exact         ``v_1``     a_i + ``v_2``   ``verb_3_``   
=============  =============  =============  =============  
            9           9.62           5.57           8.98  
          -20         -23.39          -7.65         -19.93  
           10          17.74          -4.50           9.96  
            0          -9.19           4.13          -0.26  
=============  =============  =============  =============  


A test of verbatim words in heading with subscript a_i: ``my_file_v1`` and ``my_file_v2``
-----------------------------------------------------------------------------------------

*Files ``my_file_v1.py`` and ``my_file_v2.py`` define some math a_{i-1}.* Here is
some text.

Bibliography test
-----------------

Here is an example: [Ref01]_ discussed propagation of
large destructive water waves, [Ref02]_ gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [Ref03]_.
The book chapter [Ref04]_ contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [Ref05]_ about a big FORTRAN package.
Multiple references are also possible, e.g., see
[Ref01]_ [Ref04]_.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[Ref06]_ [Ref03]_ [Ref07]_ [Ref01]_
and
[Ref02]_ [Ref08]_ [Ref09]_ [Ref10]_ [Ref11]_ [Ref12]_ [Ref13]_
and all the work of
[Ref14]_ [Ref04]_ [Ref15]_ as well as
old work [Ref05]_ and [Ref16]_, and the
talk [Ref17]_.
Langtangen also had two thesis [Ref18]_ [Ref16]_.
More retro citations are
the old ME-IN323 book [Ref19]_ and the
[Ref20]_ OONSKI '94 paper.




.. --- begin exercise ---


.. _Example:

Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with ``Example:``
and then, with the command-line option ``--examples_as_exercises`` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

.. --- end exercise ---



.. _subsubsec:ex:

URLs
----

Testing of URLs: hpl's home page `hpl <http://folk.uio.no/hpl>`_, or
the entire URL if desired, `<http://folk.uio.no/hpl>`_.  Here is a
plain file link `<testdoc.do.txt>`_, or `<testdoc.do.txt>`_, or
`<testdoc.do.txt>`_ or `<testdoc.do.txt>`_ or `a link with
newline <testdoc.do.txt>`_. Can test spaces with the link with word
too: `hpl <http://folk.uio.no/hpl>`_ or `hpl <http://folk.uio.no/hpl>`_. Also ``file:///`` works: `link to a
file <file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>`_ is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in `<http://folk.uio.no/hpl>`_, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: `hpl@simula.no <mailto:hpl@simula.no>`_, or just a `mail link <mailto:hpl@simula.no>`_, or a raw `<mailto:hpl@simula.no>`_.

Here are some tough tests of URLs, especially for the ``latex`` format:
`Newton-Cotes <http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_ formulas
and a `good book <http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>`_. Need to test
Newton-Cotes with percentage in URL too:
`<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_
and `<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>`_ which has a shebang.

For the ``--device=paper`` option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
`decay_mod <https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py>`_.

.. Comments should be inserted outside paragraphs (because in the rst

.. format extra blanks make a paragraph break).


.. Note that when there is no http: or file:, it can be a file link

.. if the link name is URL, url, "URL", or "url". Such files should,

.. if rst output is desired, but placed in a ``_static*`` folder.


More tough tests: repeated URLs whose footnotes when using the
``--device=paper`` option must be correct. We have
`google <http://google.com>`_, `google <http://google.com>`_, and
`google <http://google.com>`_, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::

        \begin{equation}
        {\partial u\over\partial t} = \nabla^2 u label{my:eq1}
        \end{equation}

We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::

        \begin{align*}
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        \end{align*}




More mathematical typesetting is demonstrated in the coming exercises.

Below, we have `Problem 1: Flip a Coin`_ and `Project 1: Compute a Probability`_,
as well as `Project 2: Explore Distributions of Random Circles`_ and `Project 3: References in a headings do not work well in rst`_, and in
between there we have `Exercise 3: Make references to projects and problems`_.

Exercises
=========



.. --- begin exercise ---


.. _demo:ex:1:

Problem 1: Flip a Coin
----------------------
.. keywords = random numbers; Monte Carlo simulation


.. Torture tests


Make a program that simulates flipping a coin N times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


.. Test syntax error





Remarks  (1)
~~~~~~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.

.. --- begin hint in exercise ---


*Hint 1.* Use ``r = random.random()`` and define head as ``r <= 0.5``.

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Draw an integer among \{1,2\} with
``r = random.randint(1,2)`` and define head when ``r`` is 1.

.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* If the ``random.random()`` function returns a number <1/2, let it be
head, otherwise tail. Repeat this N number of times.

.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

.. --- end solution of exercise ---

Filenames: ``flip_coin.py``, ``flip_coin.pdf``.

.. solution files: mysol.txt, mysol_flip_coin.py, yet_another.file


.. --- end exercise ---



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.



.. --- begin exercise ---


.. _demo:ex:2:

Project 1: Compute a Probability
--------------------------------

.. Minimalistic exercise



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval [0,1)?

.. --- begin hint in exercise ---


*Hint.* To answer this question empirically, let a program
draw N such random numbers using Python's standard ``random`` module,
count how many of them, M, that fall in the interval (0.5,0.6), and
compute the probability as M/N.

.. --- end hint in exercise ---


.. --- end exercise ---





.. --- begin exercise ---


.. _proj:circle1:

Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where R is the radius of the circle, (x_0,y_0) is the
center point, and t is a parameter in the unit interval [0,1].
For any t, (x,y) is a point on the circle.
The formula can be used to generate ``n`` points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)


.. Often in an exercise we have some comments about the solution

.. which we normally want to keep where they are.


The goal of this project is to draw N circles with random
center and radius. Plot each circle using the ``circle`` function
above.


*a)* Let R be normally distributed and (x_0,y_0) uniformly distributed.

.. --- begin hint in exercise ---


*Hint.* Use the ``numpy.random`` module to draw the
x_0, y_0, and R quantities.

.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* Here goes the short answer to part a).

.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Here goes a full solution to part a).

.. --- end solution of exercise ---


*b)* Let R be uniformly distributed and (x_0,y_0) normally distributed.
Filename: ``norm.py``.

*c)* Let R and (x_0,y_0) be normally distributed.

Filename: ``circles.pdf``.

.. Closing remarks for this Project


Remarks  (2)
~~~~~~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


.. --- end exercise ---





.. --- begin exercise ---


.. _exer:dist:

Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





.. No meaning in this weired test example:

The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


.. --- begin solution of exercise ---

*Solution.* Here goes a full solution of the whole exercise.
With some math a=b in this solution::

        \[ \hbox{math in solution: } a = b \]

And code ``a=b`` in this solution::


        a = b  # code in solution

End of solution is here.

.. --- end solution of exercise ---



*a)* Subexercises are numbered a), b), etc.

.. --- begin hint in exercise ---


*Hint 1.* First hint to subexercise a).
With math a=b in hint::

        \[ a=b. \]

And with code (in plain verbatim) returning x+1 in hint::


        def func(x):
            return x + 1  # with code in hint

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Second hint to subexercise a).

.. --- end hint in exercise ---

Filename: ``subexer_a.pdf``.


.. --- begin answer of exercise ---

*Answer.* Short answer to subexercise a).
With math in answer: a=b.

.. --- end answer of exercise ---


*b)* Here goes the text for subexercise b).


Some math \cos^2 x + \sin^2 x = 1 written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]


.. --- begin hint in exercise ---


*Hint.* A hint for this subexercise.

.. --- end hint in exercise ---

Filename: ``subexer_b.pdf``.


.. --- begin solution of exercise ---

*Solution.* Here goes the solution of this subexercise.

.. --- end solution of exercise ---


.. Closing remarks for this Exercise


Remarks  (3)
~~~~~~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


.. --- end exercise ---





.. --- begin exercise ---


Some exercise without the "Exercise:" prefix
--------------------------------------------

.. Another minimalistic exercise


Just some text. And some math saying that e^0=1 on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code ``lambda x: x+2`` is correctly placed here::


        lambda x: x+2


.. --- end exercise ---





.. --- begin exercise ---


Example 2: Just an example
--------------------------

.. This example needs the --examples_as_exercises option, otherwise

.. it is just typeset as it is written.



*a)* What is the capital of Norway?

*Answer.* Oslo.

.. --- end exercise ---



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============



.. --- begin exercise ---


.. _exer:some:formula:

Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from `Project 2: Explore Distributions of Random Circles`_ or `Problem 1: Flip a Coin`_
and verify it.
Filename: ``verify_formula.py``.

.. --- end exercise ---





.. --- begin exercise ---


.. _exer:you:

Project 3: References in a headings do not work well in rst
-----------------------------------------------------------

Refer to the previous exercise as `Exercise 3: Make references to projects and problems`_,
the two before that as `Project 1: Compute a Probability`_ and `Project 2: Explore Distributions of Random Circles`_,
and this one as `Project 3: References in a headings do not work well in rst`_.
Filename: ``selc_composed.pdf``.

.. --- end exercise ---



References
==========


Bibliography
============

.. [Ref01]
   **H. P. Langtangen and G. Pedersen**. Propagation of Large Destructive Waves,
   *International Journal of Applied Mechanics and Engineering*,
   7(1),
   pp. 187-204,
   2002.

.. [Ref02]
   **H. P. Langtangen, K.-A. Mardal and R. Winther**. Numerical Methods for Incompressible Viscous Flow,
   *Advances in Water Resources*,
   25,
   pp. 1125-1146,
   2002.

.. [Ref03]
   **H. P. Langtangen**. Numerical Solution of First Passage Problems in Random Vibrations,
   *SIAM Journal of Scientific and Statistical Computing*,
   15,
   pp. 997-996,
   1994.

.. [Ref04]
   **K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen**. Software Tools for Multigrid Methods,
   Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming,
   edited by **H. P. Langtangen and A. Tveito**,
   Springer,
   2003.

.. [Ref05]
   **H. P. Langtangen**. The FEMDEQS Program System,
   *Department of Mathematics, University of Oslo*,
   1989.

.. [Ref06]
   **H. P. Langtangen**. Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
   *SIAM Journal on Scientific Computing*,
   13,
   pp. 1394-1417,
   1992.

.. [Ref07]
   **M. Mortensen, H. P. Langtangen and G. N. Wells**. A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
   *Advances in Water Resources*,
   34(9),
   `doi: 10.1016/j.advwatres.2011.02.013 <http://dx.doi.org/10.1016/j.advwatres.2011.02.013>`_,
   2011.

.. [Ref08]
   **S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt**. Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
   *International Journal of Fluid Mechanics Research*,
   33(1),
   pp. 15-43,
   2006.

.. [Ref09]
   **S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen**. Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
   *Physical Review B: Condensed Matter and Materials Physics*,
   74,
   2006.

.. [Ref10]
   **J. B. Haga, H. Osnes and H. P. Langtangen**. On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
   *International Journal of Analytical and Numerical Methods in Geomechanics*,
   `doi: 10.1002/nag.1062 <http://dx.doi.org/10.1002/nag.1062>`_,
   2011,
   `http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract <http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract>`_.

.. [Ref11]
   **H. P. Langtangen**. *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,
   Springer,
   2003.

.. [Ref12]
   **H. P. Langtangen**. *Python Scripting for Computational Science*,
   Springer,
   2008.

.. [Ref13]
   **H. P. Langtangen and G. Pedersen**. Finite Elements for the Boussinesq Wave Equations,
   Waves and Non-linear Processes in Hydrodynamics,
   edited by **J. Grue, B. Gjevik and J. E. Weber**,
   Kluwer Academic Publishers,
   pp. pp. 117-126,
   1995,
   `http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310 <http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310>`_.

.. [Ref14]
   **H. P. Langtangen**. *A Primer on Scientific Programming With Python*,
   Springer,
   2012.

.. [Ref15]
   **P. V. Jeberg, H. P. Langtangen and C. B. Terp**. Optimization With Diffpack: Practical Example From Welding,
   *Simula Research Laboratory*,
   2004.

.. [Ref16]
   **H. P. Langtangen**. Computational Methods for Two-Phase Flow in Oil Reservoirs,
   Ph.D. Thesis,
   Mechanics Division, Department of Mathematics, University of Oslo,
   1989.

.. [Ref17]
   [Ref17]. **H. P. Langtangen**,
   Computational Modeling of Huge Tsunamis From Asteroid Impacts,
   Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
   2007.

.. [Ref18]
   **H. P. Langtangen**. Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
   M.Sc. Thesis,
   Mechanics Division, Department of Mathematics, University of Oslo,
   1985.

.. [Ref19]
   **H. P. Langtangen and A. Tveito**. Numerical Methods in Continuum Mechanics,
   *Center for Industrial Research*,
   1991.

.. [Ref20]
   **H. P. Langtangen**. Diffpack: Software for Partial Differential Equations,
   Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA,
   edited by **A. Vermeulen**,
   1994.





Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles  (1)
---------------------------------------

Without label.


.. _test:title:id1:

Appendix: Testing identical titles  (2)
---------------------------------------

With label.

.. _test:title:id2:

Appendix: Testing identical titles  (3)
---------------------------------------

With label.

Appendix: Testing identical titles  (4)
---------------------------------------

Without label.


.. admonition:: Tip

   Here is a tip or hint box, typeset as a notice box.


Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent `Script for Introduction to Version Control <http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/>`_ provides a more detailed motivation why you will benefit greatly
from using version control systems.


.. admonition:: Summary

   **Bold remark:** Make some text with this summary.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.


Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are `Dropbox <http://dropbox.com>`_ and `Google Drive <http://drive.google.com>`_.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


Appendix: Testing inline comments
---------------------------------

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. (**hpl 1**: not sure if in the cloud is understood by all.) I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. (**mp 2**: Simply go to `<http://dropbox.com>`_ and watch the video. It explains
how files, like ``myfile.py``, perhaps containing much math, like
\partial u/\partial t, are easily communicated between machines.) It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  (**hpl 3**: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.)

Appendix: Testing headings ending with ``verbatim inline``
----------------------------------------------------------

The point here is to test 1) ``verbatim`` code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

************** File: testdoc.sphinx.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

A Document for Testing Doconce
==============================

:Author: Hans Petter Langtangen (hpl at simula.no), Kaare Dump, A. Dummy Author, I. S. Overworked, J. Doe (j_doe at cyberspace.com)
:Date: Jan 32, 2100

.. !split





The format of this document is
sphinx

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

.. Cannot demonstrate chapter headings since abstract and chapter

.. is mutually exclusive in LaTeX


.. _sec1:


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line



..

    Here are two lines that make up
    a block quote.

.. !split and check if these extra words are included properly in the comment


Subsection 1
------------

More text, with a reference back to the section :ref:`sec1` and further
to the section :ref:`subsubsec:ex`. 
.. index:: somefunc function


.. sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console


Let's do some copying from files too. First from subroutine up to the very end,


.. code-block:: fortran

              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine,

.. code-block:: fortran

              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file:

.. code-block:: fortran

        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python:

.. code-block:: text


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as


.. code-block:: python

        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial:

.. raw:: html

        <iframe width="950" height="500" frameborder="0"
                src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
        </iframe>


Then Cython:

.. code-block:: cython

        cpdef f(double x):
            return x + 1


.. This one tests a + sign before a code environment

C++:

.. code-block:: c++

        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

.. The next should get correctly typset in sphinx (cod is fcod)

And a little bit of Fortran:


.. code-block:: text


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as


.. code-block:: fortran

              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end


HTML:


.. code-block:: html

        <table>
        <tr><td>Column 1</td><td>Column 2</td></tr>
        <tr><td>0.67526 </td><td>0.92871 </td></tr>
        <!-- comment -->
        </table>


System call:

.. code-block:: console

        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test ``verbatim inline font`` especially with ``a newline
inside the text`` and an exclamation mark at the end: ``BEGIN``! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the ``verb`` typesetting... Also test backslashes
like ``\begin`` and ``\end`` in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


.. _subsec:ex:

Subsection 2: Testing figures and movies
----------------------------------------

.. index:: figures


Test of figures. In particular we refer to Figure :ref:`fig:impact` in which
there is a flow.


.. _fig:impact:

.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200

   *Visualization of flow by streamtubes*


Figures without captions are allowed and will be inlined.


.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200




.. index:: movies


Test of movies
~~~~~~~~~~~~~~

Movie :ref:`mov:tsunami` shows a tsunami.

.. raw:: html
        
        <embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p><em>Mjolnir tsunami (by Sylfest Glimsdal) .</em></p>



Test empty caption (for inline movie):

.. raw:: html
        
        <embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p><em></em></p>



.. Test wrong syntax and multi-line caption


.. raw:: html
        
        <p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
        <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>



.. Check out the correct with and height of YouTube movies from the

.. embed command that the YouTube page can generate. Similar for Vimeo.


.. raw:: html
        
        <iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>
        
        <em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>
        



.. raw:: html
        
        <iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>
        
        <em>Computational fluid dynamics movie.</em>
        




.. Test multi-line caption in figure


Here is figure :ref:`myfig` with a long multi-line caption
and an extra space before the FIGURE keyword.


.. _myfig:

.. figure:: ../doc/manual/figs/wavepacket_0001.png
   :width: 500

   A long caption spanning several lines and containing verbatim words like ``my_file_v1`` and ``my_file_v2`` as well as math with subscript as in :math:`t_{i+1}`


.. Must be a blank line after MOVIE or FIGURE to detect this problem


.. Test URL as figure name



.. figure:: https://doconce.googlecode.com/hg/doc/blog/f_plot.png
   :width: 500



.. Test wikimedia type of files that otherwise reside in subdirs


.. Somewhat challenging heading with latex math, \t, \n, ? and parenthesis


.. _decay:sec:theta:

The :math:`\theta` parameter (not :math:`\nabla`?)
--------------------------------------------------

Functions do not always need to be advanced, here is one
involving :math:`\theta`:

.. code-block:: text


        def f(theta):
            return theta**2


*More on :math:`\theta`.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
:math:`\frac{1}{2}`, :math:`{1/2}`, :math:`\pmb{x}`, :math:`\frac{Du}{dt}`,
both inline and in block:


.. math::
        
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        


Or with align with label and numbers:


.. math::
   :label: aligneq1
        
        \frac{Du}{dt} = 0
        
        



.. math::
          
        \frac{1}{2} = {1/2}
        



.. math::
   :label: aligneq2
          
        \frac{1}{2}\pmb{x} = \pmb{n}
        
        


Sphinx makes a fix here and splits align into multiple equation
environments.

Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the ``.tex`` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



.. begin theorem


*Theorem 5.* Let :math:`a=1` and :math:`b=2`. Then :math:`c=3`.

.. end theorem


.. begin proof

*Proof.* Since :math:`c=a+b`, the result follows from straightforward addition.
:math:`\Diamond`
.. end proof


As we see, the proof of Theorem 5 is a modest
achievement.


.. _subsec:table:

Tables
------


.. index:: test index with verbatim text which is possible


.. index:: test two (separate) verbatim expressions which is also possible


.. index::
   single: index with; subindex


.. index with comma could fool sphinx


.. index::
   single: index, with comma, and one more


Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads

.. code-block:: text


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

================  ================  ================  ================  
   :math:`i`        :math:`h_i`     :math:`\bar T_i`      ``L_i``       
================  ================  ================  ================  
0                                0               288           -0.0065  
1                           11,000               216               0.0  
2                           20,000               216             0.001  
3                           32,000               228            0.0028  
4                           47,000               270               0.0  
5                           51,000               270           -0.0028  
6                           71,000               214           ``NaN``  
================  ================  ================  ================  

And add one with verbatim headings (with underscores),
and rows starting with ``|-`` because of a negative number,
and ``|`` right after verbatim word (with no space):

=====================  =====================  =====================  =====================  
        exact                 ``v_1``         :math:`a_i` + ``v_2``       ``verb_3_``       
=====================  =====================  =====================  =====================  
                    9                   9.62                   5.57                   8.98  
                  -20                 -23.39                  -7.65                 -19.93  
                   10                  17.74                  -4.50                   9.96  
                    0                  -9.19                   4.13                  -0.26  
=====================  =====================  =====================  =====================  


A test of verbatim words in heading with subscript :math:`a_i`: ``my_file_v1`` and ``my_file_v2``
-------------------------------------------------------------------------------------------------

*Files ``my_file_v1.py`` and ``my_file_v2.py`` define some math :math:`a_{i-1}`.* Here is
some text.

Bibliography test
-----------------

Here is an example: [Ref01]_ discussed propagation of
large destructive water waves, [Ref02]_ gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [Ref03]_.
The book chapter [Ref04]_ contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [Ref05]_ about a big FORTRAN package.
Multiple references are also possible, e.g., see
[Ref01]_ [Ref04]_.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[Ref06]_ [Ref03]_ [Ref07]_ [Ref01]_
and
[Ref02]_ [Ref08]_ [Ref09]_ [Ref10]_ [Ref11]_ [Ref12]_ [Ref13]_
and all the work of
[Ref14]_ [Ref04]_ [Ref15]_ as well as
old work [Ref05]_ and [Ref16]_, and the
talk [Ref17]_.
Langtangen also had two thesis [Ref18]_ [Ref16]_.
More retro citations are
the old ME-IN323 book [Ref19]_ and the
[Ref20]_ OONSKI '94 paper.




.. --- begin exercise ---


.. _Example:

Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with ``Example:``
and then, with the command-line option ``--examples_as_exercises`` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

.. --- end exercise ---



.. _subsubsec:ex:

URLs
----

Testing of URLs: hpl's home page `hpl <http://folk.uio.no/hpl>`_, or
the entire URL if desired, `<http://folk.uio.no/hpl>`_.  Here is a
plain file link `<testdoc.do.txt>`_, or `<testdoc.do.txt>`_, or
`<testdoc.do.txt>`_ or `<testdoc.do.txt>`_ or `a link with
newline <testdoc.do.txt>`_. Can test spaces with the link with word
too: `hpl <http://folk.uio.no/hpl>`_ or `hpl <http://folk.uio.no/hpl>`_. Also ``file:///`` works: `link to a
file <file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>`_ is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in `<http://folk.uio.no/hpl>`_, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: `hpl@simula.no <mailto:hpl@simula.no>`_, or just a `mail link <mailto:hpl@simula.no>`_, or a raw `<mailto:hpl@simula.no>`_.

Here are some tough tests of URLs, especially for the ``latex`` format:
`Newton-Cotes <http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_ formulas
and a `good book <http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>`_. Need to test
Newton-Cotes with percentage in URL too:
`<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_
and `<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>`_ which has a shebang.

For the ``--device=paper`` option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
`decay_mod <https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py>`_.

.. Comments should be inserted outside paragraphs (because in the rst

.. format extra blanks make a paragraph break).


.. Note that when there is no http: or file:, it can be a file link

.. if the link name is URL, url, "URL", or "url". Such files should,

.. if rst output is desired, but placed in a ``_static*`` folder.


More tough tests: repeated URLs whose footnotes when using the
``--device=paper`` option must be correct. We have
`google <http://google.com>`_, `google <http://google.com>`_, and
`google <http://google.com>`_, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment:

.. math::
         a = b + c 

or with number and label, as in :eq:`my:eq1`, using the equation environment:

.. math::
   :label: my:eq1
        
        {\partial u\over\partial t} = \nabla^2 u 
        

We can refer to this equation by :eq:`my:eq1`.

Here is a system without equation numbers, using the align-astrisk environment:

.. math::
        
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        



And here is a system of equations with labels in an align environment:

.. math::
   :label: eq1
        
        a = q + 4 + 5+ 6  
        



.. math::
   :label: eq2
          
        b = \nabla^2 u + \nabla^4 x 
        

We can refer to :eq:`eq1`-:eq:`eq2`. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in ``CG-2``.
Also test :math:`a_{i-j}` as well as :math:`kx-wt`.

Many of the next environments will fail in non-latex formats.
Testing multiline:

.. math::
   :label: multiline:eq1
        
        a = b = q + \\ 
          f + \nabla\cdot\nabla u
        
        

Testing split:

.. math::
   :label: split:envir:eq
        
        
        
        a = b = q &+ \\ 
          & f + \nabla\cdot\nabla u
        
        

We can refer to the last equation by :eq:`split:envir:eq`.

Testing gather:

.. math::
        
        a = b \\ 
        c = d + 7 + 9
        


Testing alignat:

.. math::
        \begin{alignat}{2}
        a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0  \\ 
        b &= \nabla^2 u + \nabla^4 x & x\in\Omega 
        \end{alignat}

Let us refer to :eq:`eq1`-:eq:`eq2` again, and to the
alignat variant :eq:`eq1a`-:eq:`eq2a`, and to :eq:`my:eq1`.

Testing eqnarray:

.. math::
        
        {\partial u\over\partial t}  &=  \nabla^2 u + f, \\ 
        {\partial v\over\partial t}  &=  \nabla\cdot(q(u)\nabla v) + g 
        


More mathematical typesetting is demonstrated in the coming exercises.

Below, we have :ref:`demo:ex:1` and :ref:`demo:ex:2`,
as well as :ref:`proj:circle1` and :ref:`exer:you`, and in
between there we have :ref:`exer:some:formula`.

Exercises
=========



.. --- begin exercise ---


.. _demo:ex:1:

Problem 1: Flip a Coin
----------------------
.. keywords = random numbers; Monte Carlo simulation


.. Torture tests


Make a program that simulates flipping a coin :math:`N` times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


.. Test syntax error





Remarks  (1)
~~~~~~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.

.. --- begin hint in exercise ---


*Hint 1.* Use ``r = random.random()`` and define head as ``r <= 0.5``.

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Draw an integer among :math:`\{1,2\}` with
``r = random.randint(1,2)`` and define head when ``r`` is 1.

.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* If the ``random.random()`` function returns a number :math:`<1/2`, let it be
head, otherwise tail. Repeat this :math:`N` number of times.

.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Code:

.. code-block:: python

        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

.. --- end solution of exercise ---

Filenames: ``flip_coin.py``, ``flip_coin.pdf``.

.. solution files: mysol.txt, mysol_flip_coin.py, yet_another.file


.. --- end exercise ---



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.



.. --- begin exercise ---


.. _demo:ex:2:

Project 1: Compute a Probability
--------------------------------

.. Minimalistic exercise



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval :math:`[0,1)`?

.. --- begin hint in exercise ---


*Hint.* To answer this question empirically, let a program
draw :math:`N` such random numbers using Python's standard ``random`` module,
count how many of them, :math:`M`, that fall in the interval :math:`(0.5,0.6)`, and
compute the probability as :math:`M/N`.

.. --- end hint in exercise ---


.. --- end exercise ---





.. --- begin exercise ---


.. _proj:circle1:

Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by


.. math::
        
        x = x_0 + R\cos 2\pi t,
        



.. math::
          
        y = y_0 + R\sin 2\pi t,
        

where :math:`R` is the radius of the circle, :math:`(x_0,y_0)` is the
center point, and :math:`t` is a parameter in the unit interval :math:`[0,1]`.
For any :math:`t`, :math:`(x,y)` is a point on the circle.
The formula can be used to generate ``n`` points on a circle:


.. code-block:: python

        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)


.. Often in an exercise we have some comments about the solution

.. which we normally want to keep where they are.


The goal of this project is to draw :math:`N` circles with random
center and radius. Plot each circle using the ``circle`` function
above.


*a)* Let :math:`R` be normally distributed and :math:`(x_0,y_0)` uniformly distributed.

.. --- begin hint in exercise ---


*Hint.* Use the ``numpy.random`` module to draw the
:math:`x_0`, :math:`y_0`, and :math:`R` quantities.

.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* Here goes the short answer to part a).

.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Here goes a full solution to part a).

.. --- end solution of exercise ---


*b)* Let :math:`R` be uniformly distributed and :math:`(x_0,y_0)` normally distributed.
Filename: ``norm.py``.

*c)* Let :math:`R` and :math:`(x_0,y_0)` be normally distributed.

Filename: ``circles.pdf``.

.. Closing remarks for this Project


Remarks  (2)
~~~~~~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


.. --- end exercise ---





.. --- begin exercise ---


.. _exer:dist:

Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





.. No meaning in this weired test example:

The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


.. --- begin solution of exercise ---

*Solution.* Here goes a full solution of the whole exercise.
With some math :math:`a=b` in this solution:

.. math::
         \hbox{math in solution: } a = b 

And code ``a=b`` in this solution:

.. code-block:: text


        a = b  # code in solution

End of solution is here.

.. --- end solution of exercise ---



*a)* Subexercises are numbered a), b), etc.

.. --- begin hint in exercise ---


*Hint 1.* First hint to subexercise a).
With math :math:`a=b` in hint:


.. math::
         a=b. 

And with code (in plain verbatim) returning :math:`x+1` in hint:


.. code-block:: text


        def func(x):
            return x + 1  # with code in hint

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Second hint to subexercise a).

.. --- end hint in exercise ---

Filename: ``subexer_a.pdf``.


.. --- begin answer of exercise ---

*Answer.* Short answer to subexercise a).
With math in answer: :math:`a=b`.

.. --- end answer of exercise ---


*b)* Here goes the text for subexercise b).


Some math :math:`\cos^2 x + \sin^2 x = 1` written one a single line:


.. math::
         \cos^2 x + \sin^2 x = 1 \thinspace .


.. --- begin hint in exercise ---


*Hint.* A hint for this subexercise.

.. --- end hint in exercise ---

Filename: ``subexer_b.pdf``.


.. --- begin solution of exercise ---

*Solution.* Here goes the solution of this subexercise.

.. --- end solution of exercise ---


.. Closing remarks for this Exercise


Remarks  (3)
~~~~~~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


.. --- end exercise ---





.. --- begin exercise ---


Some exercise without the "Exercise:" prefix
--------------------------------------------

.. Another minimalistic exercise


Just some text. And some math saying that :math:`e^0=1` on a single line,
to test that math block insertion is correct:


.. math::
         \exp{(0)} = 1 


And a test that the code ``lambda x: x+2`` is correctly placed here:


.. code-block:: text


        lambda x: x+2


.. --- end exercise ---





.. --- begin exercise ---


Example 2: Just an example
--------------------------

.. This example needs the --examples_as_exercises option, otherwise

.. it is just typeset as it is written.



*a)* What is the capital of Norway?

*Answer.* Oslo.

.. --- end exercise ---



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============



.. --- begin exercise ---


.. _exer:some:formula:

Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from :ref:`proj:circle1` or :ref:`demo:ex:1`
and verify it.
Filename: ``verify_formula.py``.

.. --- end exercise ---





.. --- begin exercise ---


.. _exer:you:

Project 3: References in a headings do not work well in sphinx
--------------------------------------------------------------

Refer to the previous exercise as :ref:`exer:some:formula`,
the two before that as :ref:`demo:ex:2` and :ref:`proj:circle1`,
and this one as :ref:`exer:you`.
Filename: ``selc_composed.pdf``.

.. --- end exercise ---



References
==========


Bibliography
============

.. [Ref01]
   **H. P. Langtangen and G. Pedersen**. Propagation of Large Destructive Waves,
   *International Journal of Applied Mechanics and Engineering*,
   7(1),
   pp. 187-204,
   2002.

.. [Ref02]
   **H. P. Langtangen, K.-A. Mardal and R. Winther**. Numerical Methods for Incompressible Viscous Flow,
   *Advances in Water Resources*,
   25,
   pp. 1125-1146,
   2002.

.. [Ref03]
   **H. P. Langtangen**. Numerical Solution of First Passage Problems in Random Vibrations,
   *SIAM Journal of Scientific and Statistical Computing*,
   15,
   pp. 997-996,
   1994.

.. [Ref04]
   **K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen**. Software Tools for Multigrid Methods,
   Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming,
   edited by **H. P. Langtangen and A. Tveito**,
   Springer,
   2003.

.. [Ref05]
   **H. P. Langtangen**. The FEMDEQS Program System,
   *Department of Mathematics, University of Oslo*,
   1989.

.. [Ref06]
   **H. P. Langtangen**. Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
   *SIAM Journal on Scientific Computing*,
   13,
   pp. 1394-1417,
   1992.

.. [Ref07]
   **M. Mortensen, H. P. Langtangen and G. N. Wells**. A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
   *Advances in Water Resources*,
   34(9),
   `doi: 10.1016/j.advwatres.2011.02.013 <http://dx.doi.org/10.1016/j.advwatres.2011.02.013>`_,
   2011.

.. [Ref08]
   **S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt**. Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
   *International Journal of Fluid Mechanics Research*,
   33(1),
   pp. 15-43,
   2006.

.. [Ref09]
   **S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen**. Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
   *Physical Review B: Condensed Matter and Materials Physics*,
   74,
   2006.

.. [Ref10]
   **J. B. Haga, H. Osnes and H. P. Langtangen**. On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
   *International Journal of Analytical and Numerical Methods in Geomechanics*,
   `doi: 10.1002/nag.1062 <http://dx.doi.org/10.1002/nag.1062>`_,
   2011,
   `http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract <http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract>`_.

.. [Ref11]
   **H. P. Langtangen**. *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,
   Springer,
   2003.

.. [Ref12]
   **H. P. Langtangen**. *Python Scripting for Computational Science*,
   Springer,
   2008.

.. [Ref13]
   **H. P. Langtangen and G. Pedersen**. Finite Elements for the Boussinesq Wave Equations,
   Waves and Non-linear Processes in Hydrodynamics,
   edited by **J. Grue, B. Gjevik and J. E. Weber**,
   Kluwer Academic Publishers,
   pp. pp. 117-126,
   1995,
   `http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310 <http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310>`_.

.. [Ref14]
   **H. P. Langtangen**. *A Primer on Scientific Programming With Python*,
   Springer,
   2012.

.. [Ref15]
   **P. V. Jeberg, H. P. Langtangen and C. B. Terp**. Optimization With Diffpack: Practical Example From Welding,
   *Simula Research Laboratory*,
   2004.

.. [Ref16]
   **H. P. Langtangen**. Computational Methods for Two-Phase Flow in Oil Reservoirs,
   Ph.D. Thesis,
   Mechanics Division, Department of Mathematics, University of Oslo,
   1989.

.. [Ref17]
   [Ref17]. **H. P. Langtangen**,
   Computational Modeling of Huge Tsunamis From Asteroid Impacts,
   Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
   2007.

.. [Ref18]
   **H. P. Langtangen**. Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
   M.Sc. Thesis,
   Mechanics Division, Department of Mathematics, University of Oslo,
   1985.

.. [Ref19]
   **H. P. Langtangen and A. Tveito**. Numerical Methods in Continuum Mechanics,
   *Center for Industrial Research*,
   1991.

.. [Ref20]
   **H. P. Langtangen**. Diffpack: Software for Partial Differential Equations,
   Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA,
   edited by **A. Vermeulen**,
   1994.





Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles  (1)
---------------------------------------

Without label.


.. _test:title:id1:

Appendix: Testing identical titles  (2)
---------------------------------------

With label.

.. _test:title:id2:

Appendix: Testing identical titles  (3)
---------------------------------------

With label.

Appendix: Testing identical titles  (4)
---------------------------------------

Without label.


.. admonition:: Tip

   Here is a tip or hint box, typeset as a notice box.


Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent `Script for Introduction to Version Control <http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/>`_ provides a more detailed motivation why you will benefit greatly
from using version control systems.


.. admonition:: Summary

   **Bold remark:** Make some text with this summary.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.


Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are `Dropbox <http://dropbox.com>`_ and `Google Drive <http://drive.google.com>`_.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


Appendix: Testing inline comments
---------------------------------

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. (**hpl 1**: not sure if in the cloud is understood by all.) I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. (**mp 2**: Simply go to `<http://dropbox.com>`_ and watch the video. It explains
how files, like ``myfile.py``, perhaps containing much math, like
:math:`\partial u/\partial t`, are easily communicated between machines.) It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  (**hpl 3**: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.)

Appendix: Testing headings ending with ``verbatim inline``
----------------------------------------------------------

The point here is to test 1) ``verbatim`` code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

************** File: testdoc.gwiki *****************
#summary A Document for Testing Doconce

By *Hans Petter Langtangen* (hpl at simula.no), *Kaare Dump*, *A. Dummy Author*, *I. S. Overworked*, and *J. Doe* (j_doe at cyberspace.com)
==== Jan 32, 2100 ====

<wiki: toc max_depth="2" />



<wiki:comment> !split </wiki:comment>




The format of this document is
gwiki

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<wiki:comment> Cannot demonstrate chapter headings since abstract and chapter </wiki:comment>
<wiki:comment> is mutually exclusive in LaTeX </wiki:comment>

== Section 1 ==


Here is a nested list:


  * item1
  * item2
  * item3 which continues    on the next line to test that feature
  * and a sublist

    * with indented subitem1
    * and a subitem2


  * and perhaps an ordered sublist

   # first item
   # second item,      continuing on a new line





<wiki:comment> !split and check if these extra words are included properly in the comment </wiki:comment>

==== Subsection 1 ====

More text, with a reference back to the section [#Section_1] and further
to the section [#URLs]. 
<wiki:comment> sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console </wiki:comment>

Let's do some copying from files too. First from subroutine up to the very end,

{{{
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}
and then just the subroutine,
{{{

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
}}}
and finally the complete file:
{{{
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}

Testing other code environments. First Python:
{{{
!bc pycod
def f(x):
    return x+1
!ec
}}}
which gets rendered as

{{{
def f(x):
    return x+1
}}}

Now a complete program to be shown via Python Online Tutorial:
{{{
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
}}}

Then Cython:
{{{
cpdef f(double x):
    return x + 1
}}}

<wiki:comment> This one tests a + sign before a code environment </wiki:comment>
C++:
{{{
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
}}}
<wiki:comment> The next should get correctly typset in sphinx (cod is fcod) </wiki:comment>
And a little bit of Fortran:

{{{
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
}}}
which then is typeset as

{{{
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
}}}

HTML:

{{{
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
}}}

System call:
{{{
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
}}}

It is time to test `verbatim inline font` especially with `a newline
inside the text` and an exclamation mark at the end: `BEGIN`! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the `verb` typesetting... Also test backslashes
like `\begin` and `\end` in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


==== Subsection 2: Testing figures and movies ====

Test of figures. In particular we refer to Figure fig:impact in which
there is a flow.



---------------------------------------------------------------

Figure:  Visualization of flow by streamtubes. (fig:impact)

(the URL of the image file ../doc/manual/figs/streamtubes.png must be inserted here)

<wiki:comment>
Put the figure file ../doc/manual/figs/streamtubes.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



Figures without captions are allowed and will be inlined.



---------------------------------------------------------------

Figure: 

(the URL of the image file ../doc/manual/figs/streamtubes.png must be inserted here)

<wiki:comment>
Put the figure file ../doc/manual/figs/streamtubes.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------




==== Test of movies ====

Movie mov:tsunami shows a tsunami.

 Mjolnir tsunami (by Sylfest Glimsdal) . (Movie ../doc/manual/figs/mjolnir.mpeg: play mjolnir.html)

Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play wavepacket.html)

<wiki:comment> Test wrong syntax and multi-line caption </wiki:comment>


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files `../doc/manual/figs/wavepacket_*.png` in wavepacket_0001.html)


<wiki:comment> Check out the correct with and height of YouTube movies from the </wiki:comment>
<wiki:comment> embed command that the YouTube page can generate. Similar for Vimeo. </wiki:comment>

 Movies can be uploaded to YouTube and embedded as HTML or as a link. http://www.youtube.com/watch?v=_O7iUiftbKU

 Computational fluid dynamics movie. http://vimeo.com/55562330


<wiki:comment> Test multi-line caption in figure </wiki:comment>

Here is figure myfig with a long multi-line caption
and an extra space before the FIGURE keyword.



---------------------------------------------------------------

Figure:  A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in `t_{i+1}`. (myfig) 

(the URL of the image file ../doc/manual/figs/wavepacket_0001.png must be inserted here)

<wiki:comment>
Put the figure file ../doc/manual/figs/wavepacket_0001.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



<wiki:comment> Must be a blank line after MOVIE or FIGURE to detect this problem </wiki:comment>

<wiki:comment> Test URL as figure name </wiki:comment>



---------------------------------------------------------------

Figure: 

(the URL of the image file https://doconce.googlecode.com/hg/doc/blog/f_plot.png must be inserted here)

<wiki:comment>
Put the figure file https://doconce.googlecode.com/hg/doc/blog/f_plot.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



<wiki:comment> Test wikimedia type of files that otherwise reside in subdirs </wiki:comment>

<wiki:comment> Somewhat challenging heading with latex math, \t, \n, ? and parenthesis </wiki:comment>

==== The `\theta` parameter (not `\nabla`?) ====

Functions do not always need to be advanced, here is one
involving `\theta`:
{{{
def f(theta):
    return theta**2
}}}

*More on `\theta`.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
`\frac{1}{2}`, `{1/2}`, `\pmb{x}`, `\frac{Du}{dt}`,
both inline and in block:

{{{
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
}}}

Or with align with label and numbers:

{{{
\begin{align}
\frac{Du}{dt} &= 0
label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
label{aligneq2}
\end{align}
}}}


==== Custom Environments ====

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the `.tex` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<wiki:comment> begin theorem </wiki:comment>



*Theorem 5.* Let `a=1` and `b=2`. Then `c=3`.
<wiki:comment> end theorem </wiki:comment>

<wiki:comment> begin proof </wiki:comment>
*Proof.* Since `c=a+b`, the result follows from straightforward addition.
`END`
<wiki:comment> end proof </wiki:comment>

As we see, the proof of Theorem 5 is a modest
achievement.


==== Tables ====

<wiki:comment> index with comma could fool sphinx </wiki:comment>

Let us take this table from the manual:



 ||      *time*       ||    *velocity*     ||  *acceleration*   ||
 ||  0.0              ||  1.4186           ||  -5.01            ||
 ||  2.0              ||  1.376512         ||  11.919           ||
 ||  4.0              ||  1.1E+1           ||  14.717624        ||



The Doconce source code reads
{{{
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
}}}

Here is yet another table to test that we can handle more than
one table:


 ||      *time*       ||    *velocity*     ||  *acceleration*   ||
 ||  0.0              ||  1.4186           ||  -5.01            ||
 ||  1.0              ||  1.376512         ||  11.919           ||
 ||  3.0              ||  1.1E+1           ||  14.717624        ||


And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


 ||     _`i`_       ||    _`h_i`_      ||  _`\bar T_i`_   ||    _`L_i`_      ||
 ||  0              ||  0              ||  288            ||  -0.0065        ||
 ||  1              ||  11,000         ||  216            ||  0.0            ||
 ||  2              ||  20,000         ||  216            ||  0.001          ||
 ||  3              ||  32,000         ||  228            ||  0.0028         ||
 ||  4              ||  47,000         ||  270            ||  0.0            ||
 ||  5              ||  51,000         ||  270            ||  -0.0028        ||
 ||  6              ||  71,000         ||  214            ||  `NaN`          ||


And add one with verbatim headings (with underscores),
and rows starting with `|-` because of a negative number,
and `|` right after verbatim word (with no space):


 ||      *exact*       ||      _`v_1`_       ||  _`a_i` + `v_2`_   ||    _`verb_3_`_     ||
 ||  9                 ||  9.62              ||  5.57              ||  8.98              ||
 ||  -20               ||  -23.39            ||  -7.65             ||  -19.93            ||
 ||  10                ||  17.74             ||  -4.50             ||  9.96              ||
 ||  0                 ||  -9.19             ||  4.13              ||  -0.26             ||



==== A test of verbatim words in heading with subscript `a_i`: `my_file_v1` and `my_file_v2` ====

*Files `my_file_v1.py` and `my_file_v2.py` define some math `a_{i-1}`.* Here is
some text.

==== Bibliography test ====

Here is an example: [1] discussed propagation of
large destructive water waves, [2] gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [3].
The book chapter [4] contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [5] about a big FORTRAN package.
Multiple references are also possible, e.g., see
[1] [4].

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[6] [3] [7] [1]
and
[2] [8] [9] [10] [11] [12] [13]
and all the work of
[14] [4] [15] as well as
old work [5] and [16], and the
talk [17].
Langtangen also had two thesis [18] [16].
More retro citations are
the old ME-IN323 book [19] and the
[20] OONSKI '94 paper.




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Example 1: Examples can be typeset as exercises ====

Examples can start with a subsection heading starting with `Example:`
and then, with the command-line option `--examples_as_exercises` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<wiki:comment> --- end exercise --- </wiki:comment>


==== URLs ====

Testing of URLs: hpl's home page [http://folk.uio.no/hpl hpl], or
the entire URL if desired, http://folk.uio.no/hpl.  Here is a
plain file link testdoc.do.txt, or testdoc.do.txt, or
testdoc.do.txt or testdoc.do.txt or [testdoc.do.txt a link with
newline]. Can test spaces with the link with word
too: [http://folk.uio.no/hpl hpl] or [http://folk.uio.no/hpl hpl]. Also `file:///` works: [file:///home/hpl/vc/doconce/doc/demos/manual/manual.html link to a
file] is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: [mailto:hpl@simula.no `hpl@simula.no`], or just a [mailto:hpl@simula.no mail link], or a raw mailto:hpl@simula.no.

Here are some tough tests of URLs, especially for the `latex` format:
[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas Newton-Cotes] formulas
and a [http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1 good book]. Need to test
Newton-Cotes with percentage in URL too:
http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.

For the `--device=paper` option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
[https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py `decay_mod`].

<wiki:comment> Comments should be inserted outside paragraphs (because in the rst </wiki:comment>
<wiki:comment> format extra blanks make a paragraph break). </wiki:comment>

<wiki:comment> Note that when there is no http: or file:, it can be a file link </wiki:comment>
<wiki:comment> if the link name is URL, url, "URL", or "url". Such files should, </wiki:comment>
<wiki:comment> if rst output is desired, but placed in a `_static*` folder. </wiki:comment>

More tough tests: repeated URLs whose footnotes when using the
`--device=paper` option must be correct. We have
[http://google.com google], [http://google.com google], and
[http://google.com google], which should result in exactly three
footnotes.



==== LaTeX Mathematics ====

Here is an equation without label using backslash-bracket environment:
{{{
\[ a = b + c \]
}}}
or with number and label, as in Equation (my:eq1), using the equation environment:
{{{
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u label{my:eq1}
\end{equation}
}}}
We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment:
{{{
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
}}}



More mathematical typesetting is demonstrated in the coming exercises.

Below, we have [#Problem_1:_Flip_a_Coin] and [#Project_1:_Compute_a_Probability],
as well as [#Project_2:_Explore_Distributions_of_Random_Circles] and [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_gwiki], and in
between there we have [#Exercise_3:_Make_references_to_projects_and_problems].

== Exercises ==



<wiki:comment> --- begin exercise --- </wiki:comment>

==== Problem 1: Flip a Coin ====

<wiki:comment> keywords = random numbers; Monte Carlo simulation </wiki:comment>

<wiki:comment> Torture tests </wiki:comment>

Make a program that simulates flipping a coin `N` times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<wiki:comment> Test syntax error </wiki:comment>




==== Remarks ====

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list


# Mark 1.
# Mark 2.<wiki:comment> --- begin hint in exercise --- </wiki:comment>


*Hint 1.* Use `r = random.random()` and define head as `r <= 0.5`.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint 2.* Draw an integer among `\{1,2\}` with
`r = random.randint(1,2)` and define head when `r` is 1.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
*Answer.* If the `random.random()` function returns a number `<1/2`, let it be
head, otherwise tail. Repeat this `N` number of times.
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Code:
{{{
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
}}}
<wiki:comment> --- end solution of exercise --- </wiki:comment>
Filenames: `flip_coin.py`, `flip_coin.pdf`.
<wiki:comment> solution files: mysol.txt, mysol_flip_coin.py, yet_another.file </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>


==== Not an exercise ====

Should be possible to stick a normal section in the middle of many
exercises.



<wiki:comment> --- begin exercise --- </wiki:comment>

==== Project 1: Compute a Probability ====

<wiki:comment> Minimalistic exercise </wiki:comment>


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval `[0,1)`?

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint.* To answer this question empirically, let a program
draw `N` such random numbers using Python's standard `random` module,
count how many of them, `M`, that fall in the interval `(0.5,0.6)`, and
compute the probability as `M/N`.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Project 2: Explore Distributions of Random Circles ====

The formula for a circle is given by

{{{
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
}}}
where `R` is the radius of the circle, `(x_0,y_0)` is the
center point, and `t` is a parameter in the unit interval `[0,1]`.
For any `t`, `(x,y)` is a point on the circle.
The formula can be used to generate `n` points on a circle:

{{{
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
}}}

<wiki:comment> Often in an exercise we have some comments about the solution </wiki:comment>
<wiki:comment> which we normally want to keep where they are. </wiki:comment>

The goal of this project is to draw `N` circles with random
center and radius. Plot each circle using the `circle` function
above.


*a)* Let `R` be normally distributed and `(x_0,y_0)` uniformly distributed.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint.* Use the `numpy.random` module to draw the
`x_0`, `y_0`, and `R` quantities.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
*Answer.* Here goes the short answer to part a).
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Here goes a full solution to part a).
<wiki:comment> --- end solution of exercise --- </wiki:comment>

*b)* Let `R` be uniformly distributed and `(x_0,y_0)` normally distributed.
Filename: `norm.py`.

*c)* Let `R` and `(x_0,y_0)` be normally distributed.

Filename: `circles.pdf`.

<wiki:comment> Closing remarks for this Project </wiki:comment>

==== Remarks ====

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Exercise 1: Determine some Distance ====

Intro to this exercise. Questions are in subexercises below.





<wiki:comment> No meaning in this weired test example: </wiki:comment>
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Here goes a full solution of the whole exercise.
With some math `a=b` in this solution:
{{{
\[ \hbox{math in solution: } a = b \]
}}}
And code `a=b` in this solution:
{{{
a = b  # code in solution
}}}
End of solution is here.
<wiki:comment> --- end solution of exercise --- </wiki:comment>


*a)* Subexercises are numbered a), b), etc.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint 1.* First hint to subexercise a).
With math `a=b` in hint:

{{{
\[ a=b. \]
}}}
And with code (in plain verbatim) returning `x+1` in hint:

{{{
def func(x):
    return x + 1  # with code in hint
}}}
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint 2.* Second hint to subexercise a).
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: `subexer_a.pdf`.


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
*Answer.* Short answer to subexercise a).
With math in answer: `a=b`.
<wiki:comment> --- end answer of exercise --- </wiki:comment>

*b)* Here goes the text for subexercise b).


Some math `\cos^2 x + \sin^2 x = 1` written one a single line:

{{{
\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]
}}}

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint.* A hint for this subexercise.
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: `subexer_b.pdf`.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Here goes the solution of this subexercise.
<wiki:comment> --- end solution of exercise --- </wiki:comment>

<wiki:comment> Closing remarks for this Exercise </wiki:comment>

==== Remarks ====

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Some exercise without the "Exercise:" prefix ====

<wiki:comment> Another minimalistic exercise </wiki:comment>

Just some text. And some math saying that `e^0=1` on a single line,
to test that math block insertion is correct:

{{{
\[ \exp{(0)} = 1 \]
}}}

And a test that the code `lambda x: x+2` is correctly placed here:

{{{
lambda x: x+2
}}}

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Example 2: Just an example ====

<wiki:comment> This example needs the --examples_as_exercises option, otherwise </wiki:comment>
<wiki:comment> it is just typeset as it is written. </wiki:comment>


*a)* What is the capital of Norway?

*Answer.* Oslo.

<wiki:comment> --- end exercise --- </wiki:comment>


== Here goes another section ==

With some text, before we continue with exercises.

== More Exercises ==



<wiki:comment> --- begin exercise --- </wiki:comment>

==== Exercise 3: Make references to projects and problems ====

Pick a statement from [#Project_2:_Explore_Distributions_of_Random_Circles] or [#Problem_1:_Flip_a_Coin]
and verify it.
Filename: `verify_formula.py`.

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Project 3: References to [#Project_1:_Compute_a_Probability] in a heading works for gwiki ====

Refer to the previous exercise as [#Exercise_3:_Make_references_to_projects_and_problems],
the two before that as [#Project_1:_Compute_a_Probability] and [#Project_2:_Explore_Distributions_of_Random_Circles],
and this one as [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_gwiki].
Filename: `selc_composed.pdf`.

<wiki:comment> --- end exercise --- </wiki:comment>


== References ==


== Bibliography ==


 # H. P. Langtangen and G. Pedersen.     Propagation of Large Destructive Waves,    *International Journal of Applied Mechanics and Engineering*,    7(1),    pp. 187-204,    2002.
 # H. P. Langtangen, K.-A. Mardal and R. Winther.     Numerical Methods for Incompressible Viscous Flow,    *Advances in Water Resources*,    25,    pp. 1125-1146,    2002.
 # H. P. Langtangen.     Numerical Solution of First Passage Problems in Random Vibrations,    *SIAM Journal of Scientific and Statistical Computing*,    15,    pp. 997-996,    1994.
 # K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen.     Software Tools for Multigrid Methods,    *Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming*,    edited by H. P. Langtangen and A. Tveito,    Springer,    2003.
 # H. P. Langtangen.     The FEMDEQS Program System,    *Department of Mathematics, University of Oslo*,    1989.
 # H. P. Langtangen.     Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,    *SIAM Journal on Scientific Computing*,    13,    pp. 1394-1417,    1992.
 # M. Mortensen, H. P. Langtangen and G. N. Wells.     A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,    *Advances in Water Resources*,    34(9),    [http://dx.doi.org/10.1016/j.advwatres.2011.02.013 doi: 10.1016/j.advwatres.2011.02.013],    2011.
 # S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt.     Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,    *International Journal of Fluid Mechanics Research*,    33(1),    pp. 15-43,    2006.
 # S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen.     Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,    *Physical Review B: Condensed Matter and Materials Physics*,    74,    2006.
# J. B. Haga, H. Osnes and H. P. Langtangen.     On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,    *International Journal of Analytical and Numerical Methods in Geomechanics*,    [http://dx.doi.org/10.1002/nag.1062 doi: 10.1002/nag.1062],    2011,    http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract.
# H. P. Langtangen.     *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,    Springer,    2003.
# H. P. Langtangen.     *Python Scripting for Computational Science*,    Springer,    2008.
# H. P. Langtangen and G. Pedersen.     Finite Elements for the Boussinesq Wave Equations,    Waves and Non-linear Processes in Hydrodynamics,    edited by J. Grue, B. Gjevik and J. E. Weber,    Kluwer Academic Publishers,    pp. pp. 117-126,    1995,    http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310.
# H. P. Langtangen.     *A Primer on Scientific Programming With Python*,    Springer,    2012.
# P. V. Jeberg, H. P. Langtangen and C. B. Terp.     Optimization With Diffpack: Practical Example From Welding,    *Simula Research Laboratory*,    2004.
# H. P. Langtangen.     Computational Methods for Two-Phase Flow in Oil Reservoirs,    Ph.D. Thesis,    Mechanics Division, Department of Mathematics, University of Oslo,    1989.
# H. P. Langtangen.     Computational Modeling of Huge Tsunamis From Asteroid Impacts,    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,    2007.
# H. P. Langtangen.     Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,    M.Sc. Thesis,    Mechanics Division, Department of Mathematics, University of Oslo,    1985.
# H. P. Langtangen and A. Tveito.     Numerical Methods in Continuum Mechanics,    *Center for Industrial Research*,    1991.
# H. P. Langtangen.     Diffpack: Software for Partial Differential Equations,    *Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA*,    edited by A. Vermeulen,    1994.

== Appendix: Just for testing; part I ==

This is the first appendix.

==== A subsection within an appendix ====

Some text.

== Appendix: Just for testing; part II ==

This is more stuff for an appendix.

==== Appendix: Testing identical titles ====

Without label.


==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

Without label.

*Tip.* 
Here is a tip or hint box, typeset as a notice box.

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent [http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/ Script for Introduction to Version Control] provides a more detailed motivation why you will benefit greatly
from using version control systems.

*Summary.* 
*Bold remark:* Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are [http://dropbox.com Dropbox] and [http://drive.google.com Google Drive].
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


==== Appendix: Testing inline comments ====

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl:
not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp:
Simply go to http://dropbox.com and watch the video. It explains
how files, like `myfile.py`, perhaps containing much math, like
`\partial u/\partial t`, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  ===== Appendix: Testing headings ending with `verbatim inline` =====

The point here is to test 1) `verbatim` code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.


************** File: testdoc.mwiki *****************
#TITLE (actually governed by the filename): A Document for Testing Doconce

By '''Hans Petter Langtangen''' (hpl at simula.no), '''Kaare Dump''', '''A. Dummy Author''', '''I. S. Overworked''', and '''J. Doe''' (j_doe at cyberspace.com)
==== Jan 32, 2100 ====

__TOC__



<!-- !split -->




The format of this document is
mwiki

''Abstract.'' This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->

== Section 1 ==


Here is a nested list:


<ul>
  <li> item1
  <li> item2
  <li> item3 which continues
    on the next line to test that feature
  <li> and a sublist

<ul>
    <li><li> with indented subitem1
    <li><li> and a subitem2
</ul>

  <li> and perhaps an ordered sublist

<ol>
   <li><li> first item
   <li><li> second item,
      continuing on a new line
</ol>

</ul>



<!-- !split and check if these extra words are included properly in the comment -->

==== Subsection 1 ====

More text, with a reference back to the section [#Section_1] and further
to the section [#URLs]. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

Let's do some copying from files too. First from subroutine up to the very end,

<syntaxhighlight lang="fortran">
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
</syntaxhighlight>
and then just the subroutine,
<syntaxhighlight lang="fortran">
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
</syntaxhighlight>
and finally the complete file:
<syntaxhighlight lang="fortran">
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
</syntaxhighlight>

Testing other code environments. First Python:
<syntaxhighlight lang="text">
!bc pycod
def f(x):
    return x+1
!ec
</syntaxhighlight>
which gets rendered as

<syntaxhighlight lang="python">
def f(x):
    return x+1
</syntaxhighlight>

Now a complete program to be shown via Python Online Tutorial:
<syntaxhighlight lang="python">
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
</syntaxhighlight>

Then Cython:
<syntaxhighlight lang="python">
cpdef f(double x):
    return x + 1
</syntaxhighlight>

<!-- This one tests a + sign before a code environment -->
C++:
<syntaxhighlight lang="cpp">
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
</syntaxhighlight>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<syntaxhighlight lang="text">
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</syntaxhighlight>
which then is typeset as

<syntaxhighlight lang="python">
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</syntaxhighlight>

HTML:

<syntaxhighlight lang="html5">
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
</syntaxhighlight>

System call:
<syntaxhighlight lang="bash">
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
</syntaxhighlight>

It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


==== Subsection 2: Testing figures and movies ====

Test of figures. In particular we refer to Figure fig:impact in which
there is a flow.


[[File:Streamtubes.png|frame|200px|alt=Streamtubes.png|Visualization of flow by streamtubes. (fig:impact)]] <!-- not yet uploaded to common.wikimedia.org -->


Figures without captions are allowed and will be inlined.


[[File:Streamtubes.png|frame|200px|alt=Streamtubes.png|<span title=""></span>]] <!-- not yet uploaded to common.wikimedia.org -->



==== Test of movies ====

Movie mov:tsunami shows a tsunami.

 Mjolnir tsunami (by Sylfest Glimsdal) . (Movie ../doc/manual/figs/mjolnir.mpeg: play mjolnir.html)

Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play wavepacket.html)

<!-- Test wrong syntax and multi-line caption -->


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files <code>../doc/manual/figs/wavepacket_*.png</code> in wavepacket_0001.html)


<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->

 Movies can be uploaded to YouTube and embedded as HTML or as a link. http://www.youtube.com/watch?v=_O7iUiftbKU

 Computational fluid dynamics movie. http://vimeo.com/55562330


<!-- Test multi-line caption in figure -->

Here is figure myfig with a long multi-line caption
and an extra space before the FIGURE keyword.


[[File:Wavepacket 0001.png|frame|500px|alt=Wavepacket 0001.png|A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in <math>t_{i+1}</math>. (myfig)]] <!-- not yet uploaded to common.wikimedia.org -->


<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<!-- Test URL as figure name -->


[[File:f_plot.png|frame|500,px|link=https://doconce.googlecode.com/hg/doc/blog|alt=f_plot.png|<span title=""></span>]]


<!-- Test wikimedia type of files that otherwise reside in subdirs -->

    [[File:Df plot.png|frame|800px|alt=Df plot.png|This is a wikimedia figure file.]] <!-- user: Hplwp, filename: df_plot.png, timestamp: 2013-01-10T11:37:05Z -->


<!-- Non-uploaded file with no caption -->

[[File:Df2s8765s plot.png|frame|200,px|alt=Df2s8765s plot.png|<span title=""></span>]] <!-- not yet uploaded to common.wikimedia.org -->


<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

==== The <math>\theta</math> parameter (not <math>\nabla</math>?) ====

Functions do not always need to be advanced, here is one
involving <math>\theta</math>:
<syntaxhighlight lang="text">
def f(theta):
    return theta**2
</syntaxhighlight>

''More on <math>\theta</math>.''
Here is more text following headline with math.

Newcommands must also be tested in this test report:
<math>\frac{1}{2}</math>, <math>{1/2}</math>, <math>\pmb{x}</math>, <math>\frac{Du}{dt}</math>,
both inline and in block:

:<math>
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
</math>

Or with align with label and numbers:

:<math>
\begin{align}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align}
</math>

The labels above are removed in mwiki since mwiki cannot refer to
labels in equations.

==== Custom Environments ====

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<!-- begin theorem -->



''Theorem 5.''
Let <math>a=1</math> and <math>b=2</math>. Then <math>c=3</math>.
<!-- end theorem -->

<!-- begin proof -->
''Proof.''
Since <math>c=a+b</math>, the result follows from straightforward addition.
<math>\Diamond</math>
<!-- end proof -->

As we see, the proof of Theorem 5 is a modest
achievement.


==== Tables ====

<!-- index with comma could fool sphinx -->

Let us take this table from the manual:


<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>

The Doconce source code reads
<syntaxhighlight lang="text">
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</syntaxhighlight>

Here is yet another table to test that we can handle more than
one table:

<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<table border="1">
<tr><td align="center"><b>     <math>i</math>    </b></td> <td align="center"><b>    <math>h_i</math>   </b></td> <td align="center"><b> <math>\bar T_i</math> </b></td> <td align="center"><b>    <code>L_i</code>   </b></td> </tr>
<tr><td align="left">   0                        </td> <td align="right">   0                        </td> <td align="right">   288                      </td> <td align="right">   -0.0065                  </td> </tr>
<tr><td align="left">   1                        </td> <td align="right">   11,000                   </td> <td align="right">   216                      </td> <td align="right">   0.0                      </td> </tr>
<tr><td align="left">   2                        </td> <td align="right">   20,000                   </td> <td align="right">   216                      </td> <td align="right">   0.001                    </td> </tr>
<tr><td align="left">   3                        </td> <td align="right">   32,000                   </td> <td align="right">   228                      </td> <td align="right">   0.0028                   </td> </tr>
<tr><td align="left">   4                        </td> <td align="right">   47,000                   </td> <td align="right">   270                      </td> <td align="right">   0.0                      </td> </tr>
<tr><td align="left">   5                        </td> <td align="right">   51,000                   </td> <td align="right">   270                      </td> <td align="right">   -0.0028                  </td> </tr>
<tr><td align="left">   6                        </td> <td align="right">   71,000                   </td> <td align="right">   214                      </td> <td align="right">   <code>NaN</code>         </td> </tr>
</table>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<table border="1">
<tr><td align="center"><b>                exact                </b></td> <td align="center"><b>           <code>v_1</code>          </b></td> <td align="center"><b> <math>a_i</math> + <code>v_2</code> </b></td> <td align="center"><b>         <code>verb_3_</code>        </b></td> </tr>
<tr><td align="right">   9                                      </td> <td align="right">   9.62                                   </td> <td align="right">   5.57                                   </td> <td align="right">   8.98                                   </td> </tr>
<tr><td align="right">   -20                                    </td> <td align="right">   -23.39                                 </td> <td align="right">   -7.65                                  </td> <td align="right">   -19.93                                 </td> </tr>
<tr><td align="right">   10                                     </td> <td align="right">   17.74                                  </td> <td align="right">   -4.50                                  </td> <td align="right">   9.96                                   </td> </tr>
<tr><td align="right">   0                                      </td> <td align="right">   -9.19                                  </td> <td align="right">   4.13                                   </td> <td align="right">   -0.26                                  </td> </tr>
</table>

==== A test of verbatim words in heading with subscript <math>a_i</math>: <code>my_file_v1</code> and <code>my_file_v2</code> ====

''Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math <math>a_{i-1}</math>.''
Here is
some text.

==== Bibliography test ====

Here is an example: [1] discussed propagation of
large destructive water waves, [2] gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [3].
The book chapter [4] contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [5] about a big FORTRAN package.
Multiple references are also possible, e.g., see
[1] [4].

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[6] [3] [7] [1]
and
[2] [8] [9] [10] [11] [12] [13]
and all the work of
[14] [4] [15] as well as
old work [5] and [16], and the
talk [17].
Langtangen also had two thesis [18] [16].
More retro citations are
the old ME-IN323 book [19] and the
[20] OONSKI '94 paper.




<!-- --- begin exercise --- -->

==== Example 1: Examples can be typeset as exercises ====

Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples_as_exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.


''a)''
State some problem.

''Solution.''
The answer to this subproblem can be written here.

''b)''
State some other problem.

''Hint 1.''
A hint can be given.

''Hint 2.''
Maybe even another hint?

''Solution.''
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<!-- --- end exercise --- -->


==== URLs ====

Testing of URLs: hpl's home page [http://folk.uio.no/hpl hpl], or
the entire URL if desired, http://folk.uio.no/hpl.  Here is a
plain file link testdoc.do.txt, or testdoc.do.txt, or
testdoc.do.txt or testdoc.do.txt or [testdoc.do.txt a link with
newline]. Can test spaces with the link with word
too: [http://folk.uio.no/hpl hpl] or [http://folk.uio.no/hpl hpl]. Also <code>file:///</code> works: [file:///home/hpl/vc/doconce/doc/demos/manual/manual.html link to a
file] is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: [mailto:hpl@simula.no <code>hpl@simula.no</code>], or just a [mailto:hpl@simula.no mail link], or a raw mailto:hpl@simula.no.

Here are some tough tests of URLs, especially for the <code>latex</code> format:
[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas Newton-Cotes] formulas
and a [http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1 good book]. Need to test
Newton-Cotes with percentage in URL too:
http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.

For the <code>--device=paper</code> option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
[https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py <code>decay_mod</code>].

<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

More tough tests: repeated URLs whose footnotes when using the
<code>--device=paper</code> option must be correct. We have
[http://google.com google], [http://google.com google], and
[http://google.com google], which should result in exactly three
footnotes.



==== LaTeX Mathematics ====

Here is an equation without label using backslash-bracket environment:
:<math>
 a = b + c 
</math>
or with number and label, as in Equation (my:eq1), using the equation environment:
:<math>
{\partial u\over\partial t} = \nabla^2 u </math>
We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment:
:<math>
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
</math>



More mathematical typesetting is demonstrated in the coming exercises.

Below, we have [#Problem_1:_Flip_a_Coin] and [#Project_1:_Compute_a_Probability],
as well as [#Project_2:_Explore_Distributions_of_Random_Circles] and [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_mwiki], and in
between there we have [#Exercise_3:_Make_references_to_projects_and_problems].

== Exercises ==



<!-- --- begin exercise --- -->

==== Problem 1: Flip a Coin ====

<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- Torture tests -->

Make a program that simulates flipping a coin <math>N</math> times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<!-- Test syntax error -->




==== Remarks ====

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list


<ol>
<li> Mark 1.
<li> Mark 2.
<!-- --- begin hint in exercise --- -->
</ol>

''Hint 1.''
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

''Hint 2.''
Draw an integer among <math>\{1,2\}</math> with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
''Answer.''
If the <code>random.random()</code> function returns a number <math><1/2</math>, let it be
head, otherwise tail. Repeat this <math>N</math> number of times.
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
''Solution.''
Code:
<syntaxhighlight lang="python">
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
</syntaxhighlight>
<!-- --- end solution of exercise --- -->
Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<!-- --- end exercise --- -->


==== Not an exercise ====

Should be possible to stick a normal section in the middle of many
exercises.



<!-- --- begin exercise --- -->

==== Project 1: Compute a Probability ====

<!-- Minimalistic exercise -->


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval <math>[0,1)</math>?

<!-- --- begin hint in exercise --- -->

''Hint.''
To answer this question empirically, let a program
draw <math>N</math> such random numbers using Python's standard <code>random</code> module,
count how many of them, <math>M</math>, that fall in the interval <math>(0.5,0.6)</math>, and
compute the probability as <math>M/N</math>.
<!-- --- end hint in exercise --- -->

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Project 2: Explore Distributions of Random Circles ====

The formula for a circle is given by

:<math>
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
</math>
where <math>R</math> is the radius of the circle, <math>(x_0,y_0)</math> is the
center point, and <math>t</math> is a parameter in the unit interval <math>[0,1]</math>.
For any <math>t</math>, <math>(x,y)</math> is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<syntaxhighlight lang="python">
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
</syntaxhighlight>

<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

The goal of this project is to draw <math>N</math> circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.


''a)''
Let <math>R</math> be normally distributed and <math>(x_0,y_0)</math> uniformly distributed.

<!-- --- begin hint in exercise --- -->

''Hint.''
Use the <code>numpy.random</code> module to draw the
<math>x_0</math>, <math>y_0</math>, and <math>R</math> quantities.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
''Answer.''
Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
''Solution.''
Here goes a full solution to part a).
<!-- --- end solution of exercise --- -->

''b)''
Let <math>R</math> be uniformly distributed and <math>(x_0,y_0)</math> normally distributed.
Filename: <code>norm.py</code>.

''c)''
Let <math>R</math> and <math>(x_0,y_0)</math> be normally distributed.

Filename: <code>circles.pdf</code>.

<!-- Closing remarks for this Project -->

==== Remarks ====

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Exercise 1: Determine some Distance ====

Intro to this exercise. Questions are in subexercises below.





<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<!-- --- begin solution of exercise --- -->
''Solution.''
Here goes a full solution of the whole exercise.
With some math <math>a=b</math> in this solution:
:<math>
 \hbox{math in solution: } a = b 
</math>
And code <code>a=b</code> in this solution:
<syntaxhighlight lang="text">
a = b  # code in solution
</syntaxhighlight>
End of solution is here.
<!-- --- end solution of exercise --- -->


''a)''
Subexercises are numbered a), b), etc.

<!-- --- begin hint in exercise --- -->

''Hint 1.''
First hint to subexercise a).
With math <math>a=b</math> in hint:

:<math>
 a=b. 
</math>
And with code (in plain verbatim) returning <math>x+1</math> in hint:

<syntaxhighlight lang="text">
def func(x):
    return x + 1  # with code in hint
</syntaxhighlight>
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

''Hint 2.''
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.


<!-- --- begin answer of exercise --- -->
''Answer.''
Short answer to subexercise a).
With math in answer: <math>a=b</math>.
<!-- --- end answer of exercise --- -->

''b)''
Here goes the text for subexercise b).


Some math <math>\cos^2 x + \sin^2 x = 1</math> written one a single line:

:<math>
 \cos^2 x + \sin^2 x = 1 \thinspace .
</math>

<!-- --- begin hint in exercise --- -->

''Hint.''
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.


<!-- --- begin solution of exercise --- -->
''Solution.''
Here goes the solution of this subexercise.
<!-- --- end solution of exercise --- -->

<!-- Closing remarks for this Exercise -->

==== Remarks ====

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Some exercise without the "Exercise:" prefix ====

<!-- Another minimalistic exercise -->

Just some text. And some math saying that <math>e^0=1</math> on a single line,
to test that math block insertion is correct:

:<math>
 \exp{(0)} = 1 
</math>

And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<syntaxhighlight lang="text">
lambda x: x+2
</syntaxhighlight>

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Example 2: Just an example ====

<!-- This example needs the --examples_as_exercises option, otherwise -->
<!-- it is just typeset as it is written. -->


''a)''
What is the capital of Norway?

''Answer.''
Oslo.

<!-- --- end exercise --- -->


== Here goes another section ==

With some text, before we continue with exercises.

== More Exercises ==



<!-- --- begin exercise --- -->

==== Exercise 3: Make references to projects and problems ====

Pick a statement from [#Project_2:_Explore_Distributions_of_Random_Circles] or [#Problem_1:_Flip_a_Coin]
and verify it.
Filename: <code>verify_formula.py</code>.

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Project 3: References to [#Project_1:_Compute_a_Probability] in a heading works for mwiki ====

Refer to the previous exercise as [#Exercise_3:_Make_references_to_projects_and_problems],
the two before that as [#Project_1:_Compute_a_Probability] and [#Project_2:_Explore_Distributions_of_Random_Circles],
and this one as [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_mwiki].
Filename: <code>selc_composed.pdf</code>.

<!-- --- end exercise --- -->


== References ==


== Bibliography ==


<ol>
 <li> H. P. Langtangen and G. Pedersen. 
    Propagation of Large Destructive Waves,
    ''International Journal of Applied Mechanics and Engineering'',
    7(1),
    pp. 187-204,
    2002.
 <li> H. P. Langtangen, K.-A. Mardal and R. Winther. 
    Numerical Methods for Incompressible Viscous Flow,
    ''Advances in Water Resources'',
    25,
    pp. 1125-1146,
    2002.
 <li> H. P. Langtangen. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    ''SIAM Journal of Scientific and Statistical Computing'',
    15,
    pp. 997-996,
    1994.
 <li> K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen. 
    Software Tools for Multigrid Methods,
    ''Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming'',
    edited by H. P. Langtangen and A. Tveito,
    Springer,
    2003.
 <li> H. P. Langtangen. 
    The FEMDEQS Program System,
    ''Department of Mathematics, University of Oslo'',
    1989.
 <li> H. P. Langtangen. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    ''SIAM Journal on Scientific Computing'',
    13,
    pp. 1394-1417,
    1992.
 <li> M. Mortensen, H. P. Langtangen and G. N. Wells. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    ''Advances in Water Resources'',
    34(9),
    [http://dx.doi.org/10.1016/j.advwatres.2011.02.013 doi: 10.1016/j.advwatres.2011.02.013],
    2011.
 <li> S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    ''International Journal of Fluid Mechanics Research'',
    33(1),
    pp. 15-43,
    2006.
 <li> S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    ''Physical Review B: Condensed Matter and Materials Physics'',
    74,
    2006.
<li> J. B. Haga, H. Osnes and H. P. Langtangen. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    ''International Journal of Analytical and Numerical Methods in Geomechanics'',
    [http://dx.doi.org/10.1002/nag.1062 doi: 10.1002/nag.1062],
    2011,
    http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract.
<li> H. P. Langtangen. 
    ''Computational Partial Differential Equations - Numerical Methods and Diffpack Programming'',
    Springer,
    2003.
<li> H. P. Langtangen. 
    ''Python Scripting for Computational Science'',
    Springer,
    2008.
<li> H. P. Langtangen and G. Pedersen. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by J. Grue, B. Gjevik and J. E. Weber,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310.
<li> H. P. Langtangen. 
    ''A Primer on Scientific Programming With Python'',
    Springer,
    2012.
<li> P. V. Jeberg, H. P. Langtangen and C. B. Terp. 
    Optimization With Diffpack: Practical Example From Welding,
    ''Simula Research Laboratory'',
    2004.
<li> H. P. Langtangen. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.
<li> H. P. Langtangen. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.
<li> H. P. Langtangen. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.
<li> H. P. Langtangen and A. Tveito. 
    Numerical Methods in Continuum Mechanics,
    ''Center for Industrial Research'',
    1991.
<li> H. P. Langtangen. 
    Diffpack: Software for Partial Differential Equations,
    ''Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA'',
    edited by A. Vermeulen,
    1994.
</ol>

== Appendix: Just for testing; part I ==

This is the first appendix.

==== A subsection within an appendix ====

Some text.

== Appendix: Just for testing; part II ==

This is more stuff for an appendix.

==== Appendix: Testing identical titles ====

Without label.


==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

Without label.


{{mbox
| type = notice
| textstyle = font-size: 90%;
| text = '''Tip.''' Here is a tip or hint box, typeset as a notice box.
}}

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent [http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/ Script for Introduction to Version Control] provides a more detailed motivation why you will benefit greatly
from using version control systems.


{{mbox
| type = Summary.
| textstyle = font-size: 90%;
| text = '''Summary.''' '''Bold remark:''' Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
}}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are [http://dropbox.com Dropbox] and [http://drive.google.com Google Drive].
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


==== Appendix: Testing inline comments ====

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp 2: Simply go to http://dropbox.com and watch the video. It explains
how files, like <code>myfile.py</code>, perhaps containing much math, like
<math>\partial u/\partial t</math>, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl 3: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

==== Appendix: Testing headings ending with <code>verbatim inline</code> ====

The point here is to test 1) <code>verbatim</code> code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.


************** File: testdoc.cwiki *****************
#summary A Document for Testing Doconce
<wiki:toc max_depth="2" />
By **Hans Petter Langtangen** (hpl at simula.no), **Kaare Dump**, **A. Dummy Author**, **I. S. Overworked**, and **J. Doe** (j_doe at cyberspace.com)
=== Jan 32, 2100 ===

<<TableOfContents>>



<wiki:comment> !split </wiki:comment>




The format of this document is
cwiki

//Abstract.// This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<wiki:comment> Cannot demonstrate chapter headings since abstract and chapter </wiki:comment>
<wiki:comment> is mutually exclusive in LaTeX </wiki:comment>

= Section 1 =


Here is a nested list:


  * item1
  * item2
  * item3 which continues    on the next line to test that feature
  * and a sublist

    ** with indented subitem1
    //* and a subitem2


  // and perhaps an ordered sublist

   ## first item
   ## second item,      continuing on a new line





<wiki:comment> !split and check if these extra words are included properly in the comment </wiki:comment>

== Subsection 1 ==

More text, with a reference back to the section [#Section_1] and further
to the section [#URLs]. 
<wiki:comment> sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console </wiki:comment>

Let's do some copying from files too. First from subroutine up to the very end,

{{{
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}
and then just the subroutine,
{{{

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
}}}
and finally the complete file:
{{{
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}

Testing other code environments. First Python:
{{{
!bc pycod
def f(x):
    return x+1
!ec
}}}
which gets rendered as

{{{
def f(x):
    return x+1
}}}

Now a complete program to be shown via Python Online Tutorial:
{{{
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
}}}

Then Cython:
{{{
cpdef f(double x):
    return x + 1
}}}

<wiki:comment> This one tests a + sign before a code environment </wiki:comment>
C++:
{{{
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
}}}
<wiki:comment> The next should get correctly typset in sphinx (cod is fcod) </wiki:comment>
And a little bit of Fortran:

{{{
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
}}}
which then is typeset as

{{{
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
}}}

HTML:

{{{
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
}}}

System call:
{{{
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
}}}

It is time to test {{{verbatim inline font}}} especially with {{{a newline
inside the text}}} and an exclamation mark at the end: {{{BEGIN}}}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the {{{verb}}} typesetting... Also test backslashes
like {{{\begin}}} and {{{\end}}} in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


== Subsection 2: Testing figures and movies ==


Test of figures. In particular we refer to Figure fig:impact in which
there is a flow.

{{../doc/manual/figs/streamtubes.png| Visualization of flow by streamtubes. (fig:impact)}}

Figures without captions are allowed and will be inlined.

{{../doc/manual/figs/streamtubes.png|}}


=== Test of movies ===

Movie mov:tsunami shows a tsunami.

 Mjolnir tsunami (by Sylfest Glimsdal) . (Movie ../doc/manual/figs/mjolnir.mpeg: play [[mjolnir.html]])

Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play [[wavepacket.html]])

<wiki:comment> Test wrong syntax and multi-line caption </wiki:comment>


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files {{{../doc/manual/figs/wavepacket_*.png}}} in [[wavepacket_0001.html]])


<wiki:comment> Check out the correct with and height of YouTube movies from the </wiki:comment>
<wiki:comment> embed command that the YouTube page can generate. Similar for Vimeo. </wiki:comment>

 Movies can be uploaded to YouTube and embedded as HTML or as a link. [[http://www.youtube.com/watch?v=_O7iUiftbKU]]

 Computational fluid dynamics movie. [[http://vimeo.com/55562330]]


<wiki:comment> Test multi-line caption in figure </wiki:comment>

Here is figure myfig with a long multi-line caption
and an extra space before the FIGURE keyword.

{{../doc/manual/figs/wavepacket_0001.png| A long caption spanning several lines and containing verbatim words like {{{my_file_v1}}} and {{{my_file_v2}}} as well as math with subscript as in {{{t_{i+1}}}}. (myfig) }}

<wiki:comment> Must be a blank line after MOVIE or FIGURE to detect this problem </wiki:comment>

<wiki:comment> Test URL as figure name </wiki:comment>

{{https://doconce.googlecode.com/hg/doc/blog/f_plot.png|}}

<wiki:comment> Test wikimedia type of files that otherwise reside in subdirs </wiki:comment>

<wiki:comment> Somewhat challenging heading with latex math, \t, \n, ? and parenthesis </wiki:comment>

== The {{{\theta}}} parameter (not {{{\nabla}}}?) ==


Functions do not always need to be advanced, here is one
involving {{{\theta}}}:
{{{
def f(theta):
    return theta**2
}}}

//More on {{{\theta}}}.// Here is more text following headline with math.

Newcommands must also be tested in this test report:
{{{\frac{1}{2}}}}, {{{{1/2}}}}, {{{\pmb{x}}}}, {{{\frac{Du}{dt}}}},
both inline and in block:

{{{
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
}}}

Or with align with label and numbers:

{{{
\begin{align}
\frac{Du}{dt} &= 0
label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
label{aligneq2}
\end{align}
}}}


== Custom Environments ==

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the {{{.tex}}} by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<wiki:comment> begin theorem </wiki:comment>



//Theorem 5.// Let {{{a=1}}} and {{{b=2}}}. Then {{{c=3}}}.
<wiki:comment> end theorem </wiki:comment>

<wiki:comment> begin proof </wiki:comment>
//Proof.// Since {{{c=a+b}}}, the result follows from straightforward addition.
END
<wiki:comment> end proof </wiki:comment>

As we see, the proof of Theorem 5 is a modest
achievement.


== Tables ==



<wiki:comment> index with comma could fool sphinx </wiki:comment>

Let us take this table from the manual:



 | =time             | =velocity         | =acceleration     |
 |  0.0              |  1.4186           |  -5.01            |
 |  2.0              |  1.376512         |  11.919           |
 |  4.0              |  1.1E+1           |  14.717624        |



The Doconce source code reads
{{{
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
}}}

Here is yet another table to test that we can handle more than
one table:


 | =time             | =velocity         | =acceleration     |
 |  0.0              |  1.4186           |  -5.01            |
 |  1.0              |  1.376512         |  11.919           |
 |  3.0              |  1.1E+1           |  14.717624        |


And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


 | ={{{i}}}            | ={{{h_i}}}          | ={{{\bar T_i}}}     | ={{{L_i}}}          |
 |  0                  |  0                  |  288                |  -0.0065            |
 |  1                  |  11,000             |  216                |  0.0                |
 |  2                  |  20,000             |  216                |  0.001              |
 |  3                  |  32,000             |  228                |  0.0028             |
 |  4                  |  47,000             |  270                |  0.0                |
 |  5                  |  51,000             |  270                |  -0.0028            |
 |  6                  |  71,000             |  214                |  {{{NaN}}}          |


And add one with verbatim headings (with underscores),
and rows starting with {{{|-}}} because of a negative number,
and {{{|}}} right after verbatim word (with no space):


 | =exact                     | ={{{v_1}}}                 | ={{{a_i}}} + {{{v_2}}}     | ={{{verb_3_}}}             |
 |  9                         |  9.62                      |  5.57                      |  8.98                      |
 |  -20                       |  -23.39                    |  -7.65                     |  -19.93                    |
 |  10                        |  17.74                     |  -4.50                     |  9.96                      |
 |  0                         |  -9.19                     |  4.13                      |  -0.26                     |



== A test of verbatim words in heading with subscript {{{a_i}}}: {{{my_file_v1}}} and {{{my_file_v2}}} ==

//Files {{{my_file_v1.py}}} and {{{my_file_v2.py}}} define some math {{{a_{i-1}}}}.// Here is
some text.

== Bibliography test ==

Here is an example: [1] discussed propagation of
large destructive water waves, [2] gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [3].
The book chapter [4] contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [5] about a big FORTRAN package.
Multiple references are also possible, e.g., see
[1] [4].

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[6] [3] [7] [1]
and
[2] [8] [9] [10] [11] [12] [13]
and all the work of
[14] [4] [15] as well as
old work [5] and [16], and the
talk [17].
Langtangen also had two thesis [18] [16].
More retro citations are
the old ME-IN323 book [19] and the
[20] OONSKI '94 paper.




<wiki:comment> --- begin exercise --- </wiki:comment>

== Example 1: Examples can be typeset as exercises ==


Examples can start with a subsection heading starting with {{{Example:}}}
and then, with the command-line option {{{--examples_as_exercises}}} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


//a)// State some problem.

//Solution.// The answer to this subproblem can be written here.

//b)// State some other problem.

//Hint 1.// A hint can be given.

//Hint 2.// Maybe even another hint?

//Solution.// The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<wiki:comment> --- end exercise --- </wiki:comment>


== URLs ==


Testing of URLs: hpl's home page [[http://folk.uio.no/hpl|hpl]], or
the entire URL if desired, [[http://folk.uio.no/hpl]].  Here is a
plain file link [[testdoc.do.txt]], or [[testdoc.do.txt]], or
[[testdoc.do.txt]] or [[testdoc.do.txt]] or [[testdoc.do.txt|a link with
newline]]. Can test spaces with the link with word
too: [[http://folk.uio.no/hpl|hpl]] or [[http://folk.uio.no/hpl|hpl]]. Also {{{file:///}}} works: [[file:///home/hpl/vc/doconce/doc/demos/manual/manual.html|link to a
file]] is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in [[http://folk.uio.no/hpl]], if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: [[mailto:hpl@simula.no|{{{hpl@simula.no}}}]], or just a [[mailto:hpl@simula.no|mail link]], or a raw [[mailto:hpl@simula.no]].

Here are some tough tests of URLs, especially for the {{{latex}}} format:
[[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas|Newton-Cotes]] formulas
and a [[http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1|good book]]. Need to test
Newton-Cotes with percentage in URL too:
[[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas]]
and [[http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae]] which has a shebang.

For the {{{--device=paper}}} option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
[[https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py|{{{decay_mod}}}]].

<wiki:comment> Comments should be inserted outside paragraphs (because in the rst </wiki:comment>
<wiki:comment> format extra blanks make a paragraph break). </wiki:comment>

<wiki:comment> Note that when there is no http: or file:, it can be a file link </wiki:comment>
<wiki:comment> if the link name is URL, url, "URL", or "url". Such files should, </wiki:comment>
<wiki:comment> if rst output is desired, but placed in a {{{_static*}}} folder. </wiki:comment>

More tough tests: repeated URLs whose footnotes when using the
{{{--device=paper}}} option must be correct. We have
[[http://google.com|google]], [[http://google.com|google]], and
[[http://google.com|google]], which should result in exactly three
footnotes.



== LaTeX Mathematics ==

Here is an equation without label using backslash-bracket environment:
{{{
\[ a = b + c \]
}}}
or with number and label, as in Equation (my:eq1), using the equation environment:
{{{
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u label{my:eq1}
\end{equation}
}}}
We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment:
{{{
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
}}}



More mathematical typesetting is demonstrated in the coming exercises.

Below, we have [#Problem_1:_Flip_a_Coin] and [#Project_1:_Compute_a_Probability],
as well as [#Project_2:_Explore_Distributions_of_Random_Circles] and [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_cwiki], and in
between there we have [#Exercise_3:_Make_references_to_projects_and_problems].

= Exercises =



<wiki:comment> --- begin exercise --- </wiki:comment>

== Problem 1: Flip a Coin ==

<wiki:comment> keywords = random numbers; Monte Carlo simulation </wiki:comment>

<wiki:comment> Torture tests </wiki:comment>

Make a program that simulates flipping a coin {{{N}}} times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<wiki:comment> Test syntax error </wiki:comment>




=== Remarks ===

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list


# Mark 1.
# Mark 2.<wiki:comment> --- begin hint in exercise --- </wiki:comment>


//Hint 1.// Use {{{r = random.random()}}} and define head as {{{r <= 0.5}}}.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint 2.// Draw an integer among {{{\{1,2\}}}} with
{{{r = random.randint(1,2)}}} and define head when {{{r}}} is 1.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
//Answer.// If the {{{random.random()}}} function returns a number {{{<1/2}}}, let it be
head, otherwise tail. Repeat this {{{N}}} number of times.
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Code:
{{{
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
}}}
<wiki:comment> --- end solution of exercise --- </wiki:comment>
Filenames: {{{flip_coin.py}}}, {{{flip_coin.pdf}}}.
<wiki:comment> solution files: mysol.txt, mysol_flip_coin.py, yet_another.file </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>


== Not an exercise ==

Should be possible to stick a normal section in the middle of many
exercises.



<wiki:comment> --- begin exercise --- </wiki:comment>

== Project 1: Compute a Probability ==


<wiki:comment> Minimalistic exercise </wiki:comment>


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval {{{[0,1)}}}?

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint.// To answer this question empirically, let a program
draw {{{N}}} such random numbers using Python's standard {{{random}}} module,
count how many of them, {{{M}}}, that fall in the interval {{{(0.5,0.6)}}}, and
compute the probability as {{{M/N}}}.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

== Project 2: Explore Distributions of Random Circles ==


The formula for a circle is given by

{{{
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
}}}
where {{{R}}} is the radius of the circle, {{{(x_0,y_0)}}} is the
center point, and {{{t}}} is a parameter in the unit interval {{{[0,1]}}}.
For any {{{t}}}, {{{(x,y)}}} is a point on the circle.
The formula can be used to generate {{{n}}} points on a circle:

{{{
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
}}}

<wiki:comment> Often in an exercise we have some comments about the solution </wiki:comment>
<wiki:comment> which we normally want to keep where they are. </wiki:comment>

The goal of this project is to draw {{{N}}} circles with random
center and radius. Plot each circle using the {{{circle}}} function
above.


//a)// Let {{{R}}} be normally distributed and {{{(x_0,y_0)}}} uniformly distributed.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint.// Use the {{{numpy.random}}} module to draw the
{{{x_0}}}, {{{y_0}}}, and {{{R}}} quantities.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
//Answer.// Here goes the short answer to part a).
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Here goes a full solution to part a).
<wiki:comment> --- end solution of exercise --- </wiki:comment>

//b)// Let {{{R}}} be uniformly distributed and {{{(x_0,y_0)}}} normally distributed.
Filename: {{{norm.py}}}.

//c)// Let {{{R}}} and {{{(x_0,y_0)}}} be normally distributed.

Filename: {{{circles.pdf}}}.

<wiki:comment> Closing remarks for this Project </wiki:comment>

=== Remarks ===

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

== Exercise 1: Determine some Distance ==


Intro to this exercise. Questions are in subexercises below.





<wiki:comment> No meaning in this weired test example: </wiki:comment>
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Here goes a full solution of the whole exercise.
With some math {{{a=b}}} in this solution:
{{{
\[ \hbox{math in solution: } a = b \]
}}}
And code {{{a=b}}} in this solution:
{{{
a = b  # code in solution
}}}
End of solution is here.
<wiki:comment> --- end solution of exercise --- </wiki:comment>


//a)// Subexercises are numbered a), b), etc.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint 1.// First hint to subexercise a).
With math {{{a=b}}} in hint:

{{{
\[ a=b. \]
}}}
And with code (in plain verbatim) returning {{{x+1}}} in hint:

{{{
def func(x):
    return x + 1  # with code in hint
}}}
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint 2.// Second hint to subexercise a).
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: {{{subexer_a.pdf}}}.


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
//Answer.// Short answer to subexercise a).
With math in answer: {{{a=b}}}.
<wiki:comment> --- end answer of exercise --- </wiki:comment>

//b)// Here goes the text for subexercise b).


Some math {{{\cos^2 x + \sin^2 x = 1}}} written one a single line:

{{{
\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]
}}}

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint.// A hint for this subexercise.
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: {{{subexer_b.pdf}}}.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Here goes the solution of this subexercise.
<wiki:comment> --- end solution of exercise --- </wiki:comment>

<wiki:comment> Closing remarks for this Exercise </wiki:comment>

=== Remarks ===

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

== Some exercise without the "Exercise:" prefix ==

<wiki:comment> Another minimalistic exercise </wiki:comment>

Just some text. And some math saying that {{{e^0=1}}} on a single line,
to test that math block insertion is correct:

{{{
\[ \exp{(0)} = 1 \]
}}}

And a test that the code {{{lambda x: x+2}}} is correctly placed here:

{{{
lambda x: x+2
}}}

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

== Example 2: Just an example ==

<wiki:comment> This example needs the --examples_as_exercises option, otherwise </wiki:comment>
<wiki:comment> it is just typeset as it is written. </wiki:comment>


//a)// What is the capital of Norway?

//Answer.// Oslo.

<wiki:comment> --- end exercise --- </wiki:comment>


= Here goes another section =

With some text, before we continue with exercises.

= More Exercises =



<wiki:comment> --- begin exercise --- </wiki:comment>

== Exercise 3: Make references to projects and problems ==


Pick a statement from [#Project_2:_Explore_Distributions_of_Random_Circles] or [#Problem_1:_Flip_a_Coin]
and verify it.
Filename: {{{verify_formula.py}}}.

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

== Project 3: References to [#Project_1:_Compute_a_Probability] in a heading works for cwiki ==


Refer to the previous exercise as [#Exercise_3:_Make_references_to_projects_and_problems],
the two before that as [#Project_1:_Compute_a_Probability] and [#Project_2:_Explore_Distributions_of_Random_Circles],
and this one as [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_cwiki].
Filename: {{{selc_composed.pdf}}}.

<wiki:comment> --- end exercise --- </wiki:comment>


= References =


= Bibliography =


 # H. P. Langtangen and G. Pedersen.     Propagation of Large Destructive Waves,    //International Journal of Applied Mechanics and Engineering//,    7(1),    pp. 187-204,    2002.
 # H. P. Langtangen, K.-A. Mardal and R. Winther.     Numerical Methods for Incompressible Viscous Flow,    //Advances in Water Resources//,    25,    pp. 1125-1146,    2002.
 # H. P. Langtangen.     Numerical Solution of First Passage Problems in Random Vibrations,    //SIAM Journal of Scientific and Statistical Computing//,    15,    pp. 997-996,    1994.
 # K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen.     Software Tools for Multigrid Methods,    //Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming//,    edited by H. P. Langtangen and A. Tveito,    Springer,    2003.
 # H. P. Langtangen.     The FEMDEQS Program System,    //Department of Mathematics, University of Oslo//,    1989.
 # H. P. Langtangen.     Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,    //SIAM Journal on Scientific Computing//,    13,    pp. 1394-1417,    1992.
 # M. Mortensen, H. P. Langtangen and G. N. Wells.     A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,    //Advances in Water Resources//,    34(9),    [[http://dx.doi.org/10.1016/j.advwatres.2011.02.013|doi: 10.1016/j.advwatres.2011.02.013]],    2011.
 # S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt.     Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,    //International Journal of Fluid Mechanics Research//,    33(1),    pp. 15-43,    2006.
 # S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen.     Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,    //Physical Review B: Condensed Matter and Materials Physics//,    74,    2006.
# J. B. Haga, H. Osnes and H. P. Langtangen.     On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,    //International Journal of Analytical and Numerical Methods in Geomechanics//,    [[http://dx.doi.org/10.1002/nag.1062|doi: 10.1002/nag.1062]],    2011,    [[http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract]].
# H. P. Langtangen.     //Computational Partial Differential Equations - Numerical Methods and Diffpack Programming//,    Springer,    2003.
# H. P. Langtangen.     //Python Scripting for Computational Science//,    Springer,    2008.
# H. P. Langtangen and G. Pedersen.     Finite Elements for the Boussinesq Wave Equations,    Waves and Non-linear Processes in Hydrodynamics,    edited by J. Grue, B. Gjevik and J. E. Weber,    Kluwer Academic Publishers,    pp. pp. 117-126,    1995,    [[http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310]].
# H. P. Langtangen.     //A Primer on Scientific Programming With Python//,    Springer,    2012.
# P. V. Jeberg, H. P. Langtangen and C. B. Terp.     Optimization With Diffpack: Practical Example From Welding,    //Simula Research Laboratory//,    2004.
# H. P. Langtangen.     Computational Methods for Two-Phase Flow in Oil Reservoirs,    Ph.D. Thesis,    Mechanics Division, Department of Mathematics, University of Oslo,    1989.
# H. P. Langtangen.     Computational Modeling of Huge Tsunamis From Asteroid Impacts,    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,    2007.
# H. P. Langtangen.     Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,    M.Sc. Thesis,    Mechanics Division, Department of Mathematics, University of Oslo,    1985.
# H. P. Langtangen and A. Tveito.     Numerical Methods in Continuum Mechanics,    //Center for Industrial Research//,    1991.
# H. P. Langtangen.     Diffpack: Software for Partial Differential Equations,    //Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA//,    edited by A. Vermeulen,    1994.

= Appendix: Just for testing; part I =

This is the first appendix.

== A subsection within an appendix ==

Some text.

= Appendix: Just for testing; part II =

This is more stuff for an appendix.

== Appendix: Testing identical titles ==

Without label.


== Appendix: Testing identical titles ==


With label.

== Appendix: Testing identical titles ==


With label.

== Appendix: Testing identical titles ==

Without label.

//Tip.// 
Here is a tip or hint box, typeset as a notice box.

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent [[http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/|Script for Introduction to Version Control]] provides a more detailed motivation why you will benefit greatly
from using version control systems.

//Summary.// 
**Bold remark:** Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are [[http://dropbox.com|Dropbox]] and [[http://drive.google.com|Google Drive]].
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


== Appendix: Testing inline comments ==

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp 2: Simply go to [[http://dropbox.com]] and watch the video. It explains
how files, like {{{myfile.py}}}, perhaps containing much math, like
{{{\partial u/\partial t}}}, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl 3: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

== Appendix: Testing headings ending with {{{verbatim inline}}} ==

The point here is to test 1) {{{verbatim}}} code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.


************** File: testdoc.st *****************
TITLE: A Document for Testing Doconce
BY: Hans Petter Langtangen (Center for Biomedical Computing, Simula Research Laboratory, and Department of Informatics, University of Oslo); Kaare Dump (Segfault Inc, Cyberspace); A. Dummy Author; I. S. Overworked (Inst1, and Inst2, Somewhere, and Third Inst, Elsewhere, and Fourth Inst); J. Doe
DATE: Jan 32, 2100
# !split




The format of this document is
st
*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.



Section 1

Here is a nested list:

  - item1
  - item2
  - item3 which continues
    on the next line to test that feature
  - and a sublist
    - with indented subitem1
    - and a subitem2

  - and perhaps an ordered sublist
   1. first item
   2. second item,
      continuing on a new line




# !split and check if these extra words are included properly in the comment

Subsection 1

More text, with a reference back to the section "Section 1" and further
to the section "URLs". 

Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end


HTML::


        <table>
        <tr><td>Column 1</td><td>Column 2</td></tr>
        <tr><td>0.67526 </td><td>0.92871 </td></tr>
        <!-- comment -->
        </table>


System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test 'verbatim inline font' especially with 'a newline
inside the text' and an exclamation mark at the end: 'BEGIN'! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the 'verb' typesetting... Also test backslashes
like '\begin' and '\end' in inline verbatim text.

Here is some red color and an attempt to write with
green color containing a linebreak.
And one more. Some formats will only display this correctly when
HTML is the output format.


Subsection 2: Testing figures and movies


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. {fig:impact}

Figures without captions are allowed and will be inlined.

FIGURE:[../doc/manual/figs/streamtubes, width=200]


Test of movies

Movie ref{mov:tsunami} shows a tsunami.

 Mjolnir tsunami (by Sylfest Glimsdal) . (Movie ../doc/manual/figs/mjolnir.mpeg: play "mjolnir.html":mjolnir.html)

Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play "wavepacket.html":wavepacket.html)



 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files '../doc/manual/figs/wavepacket_*.png' in "wavepacket_0001.html":wavepacket_0001.html)



 Movies can be uploaded to YouTube and embedded as HTML or as a link. "http://www.youtube.com/watch?v=_O7iUiftbKU":http://www.youtube.com/watch?v=_O7iUiftbKU

 Computational fluid dynamics movie. "http://vimeo.com/55562330":http://vimeo.com/55562330



Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like 'my_file_v1' and 'my_file_v2' as well as math with subscript as in t_{i+1}. {myfig} 



FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]



The \theta parameter (not \nabla?)

Functions do not always need to be advanced, here is one
involving \theta::


        def f(theta):
            return theta**2


*More on \theta.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
\frac{1}{2}, {1/2}, \pmb{x}, \frac{Du}{dt},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the '.tex' by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!




*Theorem 5.* Let a=1 and b=2. Then c=3.

*Proof.* Since c=a+b, the result follows from straightforward addition.
END

As we see, the proof of Theorem 5 is a modest
achievement.


Tables



Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

========  ========  ========  ========  
   i        h_i     \bar T_i   'L_i'    
========  ========  ========  ========  
0                0       288   -0.0065  
1           11,000       216       0.0  
2           20,000       216     0.001  
3           32,000       228    0.0028  
4           47,000       270       0.0  
5           51,000       270   -0.0028  
6           71,000       214     'NaN'  
========  ========  ========  ========  

And add one with verbatim headings (with underscores),
and rows starting with '|-' because of a negative number,
and '|' right after verbatim word (with no space):

===========  ===========  ===========  ===========  
   exact        'v_1'     a_i + 'v_2'   'verb_3_'   
===========  ===========  ===========  ===========  
          9         9.62         5.57         8.98  
        -20       -23.39        -7.65       -19.93  
         10        17.74        -4.50         9.96  
          0        -9.19         4.13        -0.26  
===========  ===========  ===========  ===========  


A test of verbatim words in heading with subscript a_i: 'my_file_v1' and 'my_file_v2'

*Files 'my_file_v1.py' and 'my_file_v2.py' define some math a_{i-1}.* Here is
some text.

Bibliography test

Here is an example: [1] discussed propagation of
large destructive water waves, [2] gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [3].
The book chapter [4] contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [5] about a big FORTRAN package.
Multiple references are also possible, e.g., see
[1] [4].

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[6] [3] [7] [1]
and
[2] [8] [9] [10] [11] [12] [13]
and all the work of
[14] [4] [15] as well as
old work [5] and [16], and the
talk [17].
Langtangen also had two thesis [18] [16].
More retro citations are
the old ME-IN323 book [19] and the
[20] OONSKI '94 paper.





Example 1: Examples can be typeset as exercises

Examples can start with a subsection heading starting with 'Example:'
and then, with the command-line option '--examples_as_exercises' be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.



URLs

Testing of URLs: hpl's home page "http://folk.uio.no/hpl":hpl, or
the entire URL if desired, "http://folk.uio.no/hpl":http://folk.uio.no/hpl.  Here is a
plain file link "testdoc.do.txt":testdoc.do.txt, or "testdoc.do.txt":testdoc.do.txt, or
"testdoc.do.txt":testdoc.do.txt or "testdoc.do.txt":testdoc.do.txt or "testdoc.do.txt":a link with
newline. Can test spaces with the link with word
too: "http://folk.uio.no/hpl":hpl or "http://folk.uio.no/hpl":hpl. Also 'file:///' works: "file:///home/hpl/vc/doconce/doc/demos/manual/manual.html":link to a
file is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in "http://folk.uio.no/hpl":http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: mailto:hpl@simula.no:'hpl@simula.no', or just a "mailto:hpl@simula.no":mail link, or a raw "mailto:hpl@simula.no":mailto:hpl@simula.no.

Here are some tough tests of URLs, especially for the 'latex' format:
"http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas":Newton-Cotes formulas
and a "http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1":good book. Need to test
Newton-Cotes with percentage in URL too:
"http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas":http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and "http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae":http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.

For the '--device=paper' option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py:'decay_mod'.



More tough tests: repeated URLs whose footnotes when using the
'--device=paper' option must be correct. We have
"http://google.com":google, "http://google.com":google, and
"http://google.com":google, which should result in exactly three
footnotes.



LaTeX Mathematics

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::

        \begin{equation}
        {\partial u\over\partial t} = \nabla^2 u label{my:eq1}
        \end{equation}

We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::

        \begin{align*}
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        \end{align*}




More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  "Problem 1: Flip a Coin" and  "Project 1: Compute a Probability",
as well as  "Project 2: Explore Distributions of Random Circles" and "Project 3: References to Project ref{demo:ex:2} in a heading works for st", and in
between there we have  "Exercise 3: Make references to projects and problems".

Exercises




Problem 1: Flip a Coin



Make a program that simulates flipping a coin N times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.






Remarks

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.
2. Mark 2.

*Hint 1.* Use 'r = random.random()' and define head as 'r <= 0.5'.


*Hint 2.* Draw an integer among \{1,2\} with
'r = random.randint(1,2)' and define head when 'r' is 1.


*Answer.* If the 'random.random()' function returns a number <1/2, let it be
head, otherwise tail. Repeat this N number of times.


*Solution.* Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

Filenames: 'flip_coin.py', 'flip_coin.pdf'.



Not an exercise

Should be possible to stick a normal section in the middle of many
exercises.




Project 1: Compute a Probability



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval [0,1)?


*Hint.* To answer this question empirically, let a program
draw N such random numbers using Python's standard 'random' module,
count how many of them, M, that fall in the interval (0.5,0.6), and
compute the probability as M/N.






Project 2: Explore Distributions of Random Circles

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where R is the radius of the circle, (x_0,y_0) is the
center point, and t is a parameter in the unit interval [0,1].
For any t, (x,y) is a point on the circle.
The formula can be used to generate 'n' points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)



The goal of this project is to draw N circles with random
center and radius. Plot each circle using the 'circle' function
above.


*a)* Let R be normally distributed and (x_0,y_0) uniformly distributed.


*Hint.* Use the 'numpy.random' module to draw the
x_0, y_0, and R quantities.


*Answer.* Here goes the short answer to part a).


*Solution.* Here goes a full solution to part a).

*b)* Let R be uniformly distributed and (x_0,y_0) normally distributed.
Filename: 'norm.py'.

*c)* Let R and (x_0,y_0) be normally distributed.

Filename: 'circles.pdf'.


Remarks

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.







Exercise 1: Determine some Distance

Intro to this exercise. Questions are in subexercises below.





The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


*Solution.* Here goes a full solution of the whole exercise.
With some math a=b in this solution::

        \[ \hbox{math in solution: } a = b \]

And code 'a=b' in this solution::


        a = b  # code in solution

End of solution is here.


*a)* Subexercises are numbered a), b), etc.


*Hint 1.* First hint to subexercise a).
With math a=b in hint::

        \[ a=b. \]

And with code (in plain verbatim) returning x+1 in hint::


        def func(x):
            return x + 1  # with code in hint



*Hint 2.* Second hint to subexercise a).
Filename: 'subexer_a.pdf'.


*Answer.* Short answer to subexercise a).
With math in answer: a=b.

*b)* Here goes the text for subexercise b).


Some math \cos^2 x + \sin^2 x = 1 written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]



*Hint.* A hint for this subexercise.
Filename: 'subexer_b.pdf'.


*Solution.* Here goes the solution of this subexercise.


Remarks

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.







Some exercise without the "Exercise:" prefix


Just some text. And some math saying that e^0=1 on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code 'lambda x: x+2' is correctly placed here::


        lambda x: x+2







Example 2: Just an example



*a)* What is the capital of Norway?

*Answer.* Oslo.



Here goes another section

With some text, before we continue with exercises.

More Exercises




Exercise 3: Make references to projects and problems

Pick a statement from  "Project 2: Explore Distributions of Random Circles" or  "Problem 1: Flip a Coin"
and verify it.
Filename: 'verify_formula.py'.






Project 3: References to  "Project 1: Compute a Probability" in a heading works for st

Refer to the previous exercise as  "Exercise 3: Make references to projects and problems",
the two before that as  "Project 1: Compute a Probability" and "Project 2: Explore Distributions of Random Circles",
and this one as  "Project 3: References to Project ref{demo:ex:2} in a heading works for st".
Filename: 'selc_composed.pdf'.



References


Bibliography

 1. H. P. Langtangen and G. Pedersen. 
    Propagation of Large Destructive Waves,
    *International Journal of Applied Mechanics and Engineering*,
    7(1),
    pp. 187-204,
    2002.
 2. H. P. Langtangen, K.-A. Mardal and R. Winther. 
    Numerical Methods for Incompressible Viscous Flow,
    *Advances in Water Resources*,
    25,
    pp. 1125-1146,
    2002.
 3. H. P. Langtangen. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    *SIAM Journal of Scientific and Statistical Computing*,
    15,
    pp. 997-996,
    1994.
 4. K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen. 
    Software Tools for Multigrid Methods,
    *Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming*,
    edited by H. P. Langtangen and A. Tveito,
    Springer,
    2003.
 5. H. P. Langtangen. 
    The FEMDEQS Program System,
    *Department of Mathematics, University of Oslo*,
    1989.
 6. H. P. Langtangen. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    *SIAM Journal on Scientific Computing*,
    13,
    pp. 1394-1417,
    1992.
 7. M. Mortensen, H. P. Langtangen and G. N. Wells. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    *Advances in Water Resources*,
    34(9),
    "http://dx.doi.org/10.1016/j.advwatres.2011.02.013":doi: 10.1016/j.advwatres.2011.02.013,
    2011.
 8. S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    *International Journal of Fluid Mechanics Research*,
    33(1),
    pp. 15-43,
    2006.
 9. S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    *Physical Review B: Condensed Matter and Materials Physics*,
    74,
    2006.
10. J. B. Haga, H. Osnes and H. P. Langtangen. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    *International Journal of Analytical and Numerical Methods in Geomechanics*,
    "http://dx.doi.org/10.1002/nag.1062":doi: 10.1002/nag.1062,
    2011,
    "http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract":http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract.
11. H. P. Langtangen. 
    *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,
    Springer,
    2003.
12. H. P. Langtangen. 
    *Python Scripting for Computational Science*,
    Springer,
    2008.
13. H. P. Langtangen and G. Pedersen. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by J. Grue, B. Gjevik and J. E. Weber,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    "http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310":http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310.
14. H. P. Langtangen. 
    *A Primer on Scientific Programming With Python*,
    Springer,
    2012.
15. P. V. Jeberg, H. P. Langtangen and C. B. Terp. 
    Optimization With Diffpack: Practical Example From Welding,
    *Simula Research Laboratory*,
    2004.
16. H. P. Langtangen. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.
17. H. P. Langtangen. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.
18. H. P. Langtangen. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.
19. H. P. Langtangen and A. Tveito. 
    Numerical Methods in Continuum Mechanics,
    *Center for Industrial Research*,
    1991.
20. H. P. Langtangen. 
    Diffpack: Software for Partial Differential Equations,
    *Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA*,
    edited by A. Vermeulen,
    1994.

Appendix: Just for testing; part I

This is the first appendix.

A subsection within an appendix

Some text.

Appendix: Just for testing; part II

This is more stuff for an appendix.

Appendix: Testing identical titles

Without label.


Appendix: Testing identical titles

With label.

Appendix: Testing identical titles

With label.

Appendix: Testing identical titles

Without label.

*Tip.* 
Here is a tip or hint box, typeset as a notice box.

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent "http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/":Script for Introduction to Version Control provides a more detailed motivation why you will benefit greatly
from using version control systems.

*Summary.* 
**Bold remark:** Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are "http://dropbox.com":Dropbox and "http://drive.google.com":Google Drive.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


Appendix: Testing inline comments

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp 2: Simply go to "http://dropbox.com":http://dropbox.com and watch the video. It explains
how files, like 'myfile.py', perhaps containing much math, like
\partial u/\partial t, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl 3: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

Appendix: Testing headings ending with 'verbatim inline'

The point here is to test 1) 'verbatim' code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

************** File: testdoc.epytext *****************
TITLE: A Document for Testing Doconce
BY: Hans Petter Langtangen (Center for Biomedical Computing, Simula Research Laboratory, and Department of Informatics, University of Oslo); Kaare Dump (Segfault Inc, Cyberspace); A. Dummy Author; I. S. Overworked (Inst1, and Inst2, Somewhere, and Third Inst, Elsewhere, and Fourth Inst); J. Doe
DATE: Jan 32, 2100
# !split




The format of this document is
epytext

I{Abstract.} This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.



Section 1
=========

Here is a nested list:

  - item1
  - item2
  - item3 which continues
    on the next line to test that feature
  - and a sublist
    - with indented subitem1
    - and a subitem2

  - and perhaps an ordered sublist
   1. first item
   2. second item,
      continuing on a new line




# !split and check if these extra words are included properly in the comment

Subsection 1
------------

More text, with a reference back to the section "Section 1" and further
to the section "URLs". 

Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end


HTML::


        <table>
        <tr><td>Column 1</td><td>Column 2</td></tr>
        <tr><td>0.67526 </td><td>0.92871 </td></tr>
        <!-- comment -->
        </table>


System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test C{verbatim inline font} especially with C{a newline
inside the text} and an exclamation mark at the end: C{BEGIN}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the C{verb} typesetting... Also test backslashes
like C{\begin} and C{\end} in inline verbatim text.

Here is some red color and an attempt to write with
green color containing a linebreak.
And one more. Some formats will only display this correctly when
HTML is the output format.


Subsection 2: Testing figures and movies
----------------------------------------


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. {fig:impact}

Figures without captions are allowed and will be inlined.

FIGURE:[../doc/manual/figs/streamtubes, width=200]


Test of movies
~~~~~~~~~~~~~~

Movie ref{mov:tsunami} shows a tsunami.

 Mjolnir tsunami (by Sylfest Glimsdal) . (Movie ../doc/manual/figs/mjolnir.mpeg: play U{mjolnir.html<mjolnir.html>})

Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play U{wavepacket.html<wavepacket.html>})



 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files C{../doc/manual/figs/wavepacket_*.png} in U{wavepacket_0001.html<wavepacket_0001.html>})



 Movies can be uploaded to YouTube and embedded as HTML or as a link. U{http://www.youtube.com/watch?v=_O7iUiftbKU<http://www.youtube.com/watch?v=_O7iUiftbKU>}

 Computational fluid dynamics movie. U{http://vimeo.com/55562330<http://vimeo.com/55562330>}



Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like C{my_file_v1} and C{my_file_v2} as well as math with subscript as in M{t_{i+1}}. {myfig} 



FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]



The M{\theta} parameter (not M{\nabla}?)
----------------------------------------

Functions do not always need to be advanced, here is one
involving M{\theta}::


        def f(theta):
            return theta**2


I{More on M{\theta}.} Here is more text following headline with math.

Newcommands must also be tested in this test report:
M{\frac{1}{2}}, M{{1/2}}, M{\pmb{x}}, M{\frac{Du}{dt}},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the C{.tex} by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!




I{Theorem 5.} Let M{a=1} and M{b=2}. Then M{c=3}.

I{Proof.} Since M{c=a+b}, the result follows from straightforward addition.
M{END}

As we see, the proof of Theorem 5 is a modest
achievement.


Tables
------



Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

===========  ===========  ===========  ===========  
    M{i}        M{h_i}    M{\bar T_i}     C{L_i}    
===========  ===========  ===========  ===========  
0                      0          288      -0.0065  
1                 11,000          216          0.0  
2                 20,000          216        0.001  
3                 32,000          228       0.0028  
4                 47,000          270          0.0  
5                 51,000          270      -0.0028  
6                 71,000          214       C{NaN}  
===========  ===========  ===========  ===========  

And add one with verbatim headings (with underscores),
and rows starting with C{|-} because of a negative number,
and C{|} right after verbatim word (with no space):

===============  ===============  ===============  ===============  
     exact            C{v_1}      M{a_i} + C{v_2}     C{verb_3_}    
===============  ===============  ===============  ===============  
              9             9.62             5.57             8.98  
            -20           -23.39            -7.65           -19.93  
             10            17.74            -4.50             9.96  
              0            -9.19             4.13            -0.26  
===============  ===============  ===============  ===============  


A test of verbatim words in heading with subscript M{a_i}: C{my_file_v1} and C{my_file_v2}
------------------------------------------------------------------------------------------

I{Files C{my_file_v1.py} and C{my_file_v2.py} define some math M{a_{i-1}}.} Here is
some text.

Bibliography test
-----------------

Here is an example: [1] discussed propagation of
large destructive water waves, [2] gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [3].
The book chapter [4] contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [5] about a big FORTRAN package.
Multiple references are also possible, e.g., see
[1] [4].

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[6] [3] [7] [1]
and
[2] [8] [9] [10] [11] [12] [13]
and all the work of
[14] [4] [15] as well as
old work [5] and [16], and the
talk [17].
Langtangen also had two thesis [18] [16].
More retro citations are
the old ME-IN323 book [19] and the
[20] OONSKI '94 paper.





Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with C{Example:}
and then, with the command-line option C{--examples_as_exercises} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


I{a)} State some problem.

I{Solution.} The answer to this subproblem can be written here.

I{b)} State some other problem.

I{Hint 1.} A hint can be given.

I{Hint 2.} Maybe even another hint?

I{Solution.} The answer to this other subproblem goes here,
maybe over multiple doconce input lines.



URLs
----

Testing of URLs: hpl's home page U{hpl<http://folk.uio.no/hpl>}, or
the entire URL if desired, U{http://folk.uio.no/hpl<http://folk.uio.no/hpl>}.  Here is a
plain file link U{testdoc.do.txt<testdoc.do.txt>}, or U{testdoc.do.txt<testdoc.do.txt>}, or
U{testdoc.do.txt<testdoc.do.txt>} or U{testdoc.do.txt<testdoc.do.txt>} or U{a link with
newline<testdoc.do.txt>}. Can test spaces with the link with word
too: U{hpl<http://folk.uio.no/hpl>} or U{hpl<http://folk.uio.no/hpl>}. Also C{file:///} works: U{link to a
file<file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in U{http://folk.uio.no/hpl<http://folk.uio.no/hpl>}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: U{C{hpl@simula.no}<mailto:hpl@simula.no>}, or just a U{mail link<mailto:hpl@simula.no>}, or a raw U{mailto:hpl@simula.no<mailto:hpl@simula.no>}.

Here are some tough tests of URLs, especially for the C{latex} format:
U{Newton-Cotes<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>} formulas
and a U{good book<http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>}. Need to test
Newton-Cotes with percentage in URL too:
U{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>}
and U{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>} which has a shebang.

For the C{--device=paper} option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
U{C{decay_mod}<https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py>}.



More tough tests: repeated URLs whose footnotes when using the
C{--device=paper} option must be correct. We have
U{google<http://google.com>}, U{google<http://google.com>}, and
U{google<http://google.com>}, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.





More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  "Problem 1: Flip a Coin" and  "Project 1: Compute a Probability",
as well as  "Project 2: Explore Distributions of Random Circles" and "Project 3: References to Project ref{demo:ex:2} in a heading works for epytext", and in
between there we have  "Exercise 3: Make references to projects and problems".

Exercises
=========




Problem 1: Flip a Coin
----------------------



Make a program that simulates flipping a coin M{N} times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.






Remarks
~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.
2. Mark 2.

I{Hint 1.} Use C{r = random.random()} and define head as C{r <= 0.5}.


I{Hint 2.} Draw an integer among M{\{1,2\}} with
C{r = random.randint(1,2)} and define head when C{r} is 1.


I{Answer.} If the C{random.random()} function returns a number M{<1/2}, let it be
head, otherwise tail. Repeat this M{N} number of times.


I{Solution.} Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

Filenames: C{flip_coin.py}, C{flip_coin.pdf}.



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.




Project 1: Compute a Probability
--------------------------------



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval M{[0,1)}?


I{Hint.} To answer this question empirically, let a program
draw M{N} such random numbers using Python's standard C{random} module,
count how many of them, M{M}, that fall in the interval M{(0.5,0.6)}, and
compute the probability as M{M/N}.






Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where M{R} is the radius of the circle, M{(x_0,y_0)} is the
center point, and M{t} is a parameter in the unit interval M{[0,1]}.
For any M{t}, M{(x,y)} is a point on the circle.
The formula can be used to generate C{n} points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)



The goal of this project is to draw M{N} circles with random
center and radius. Plot each circle using the C{circle} function
above.


I{a)} Let M{R} be normally distributed and M{(x_0,y_0)} uniformly distributed.


I{Hint.} Use the C{numpy.random} module to draw the
M{x_0}, M{y_0}, and M{R} quantities.


I{Answer.} Here goes the short answer to part a).


I{Solution.} Here goes a full solution to part a).

I{b)} Let M{R} be uniformly distributed and M{(x_0,y_0)} normally distributed.
Filename: C{norm.py}.

I{c)} Let M{R} and M{(x_0,y_0)} be normally distributed.

Filename: C{circles.pdf}.


Remarks
~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.







Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


I{Solution.} Here goes a full solution of the whole exercise.
With some math M{a=b} in this solution::

        \[ \hbox{math in solution: } a = b \]

And code C{a=b} in this solution::


        a = b  # code in solution

End of solution is here.


I{a)} Subexercises are numbered a), b), etc.


I{Hint 1.} First hint to subexercise a).
With math M{a=b} in hint::

        \[ a=b. \]

And with code (in plain verbatim) returning M{x+1} in hint::


        def func(x):
            return x + 1  # with code in hint



I{Hint 2.} Second hint to subexercise a).
Filename: C{subexer_a.pdf}.


I{Answer.} Short answer to subexercise a).
With math in answer: M{a=b}.

I{b)} Here goes the text for subexercise b).


Some math M{\cos^2 x + \sin^2 x = 1} written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]



I{Hint.} A hint for this subexercise.
Filename: C{subexer_b.pdf}.


I{Solution.} Here goes the solution of this subexercise.


Remarks
~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.







Some exercise without the "Exercise:" prefix
--------------------------------------------


Just some text. And some math saying that M{e^0=1} on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code C{lambda x: x+2} is correctly placed here::


        lambda x: x+2







Example 2: Just an example
--------------------------



I{a)} What is the capital of Norway?

I{Answer.} Oslo.



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============




Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from  "Project 2: Explore Distributions of Random Circles" or  "Problem 1: Flip a Coin"
and verify it.
Filename: C{verify_formula.py}.






Project 3: References to  "Project 1: Compute a Probability" in a heading works for epytext
-------------------------------------------------------------------------------------------

Refer to the previous exercise as  "Exercise 3: Make references to projects and problems",
the two before that as  "Project 1: Compute a Probability" and "Project 2: Explore Distributions of Random Circles",
and this one as  "Project 3: References to Project ref{demo:ex:2} in a heading works for epytext".
Filename: C{selc_composed.pdf}.



References
==========


Bibliography
============

 1. H. P. Langtangen and G. Pedersen. 
    Propagation of Large Destructive Waves,
    I{International Journal of Applied Mechanics and Engineering},
    7(1),
    pp. 187-204,
    2002.
 2. H. P. Langtangen, K.-A. Mardal and R. Winther. 
    Numerical Methods for Incompressible Viscous Flow,
    I{Advances in Water Resources},
    25,
    pp. 1125-1146,
    2002.
 3. H. P. Langtangen. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    I{SIAM Journal of Scientific and Statistical Computing},
    15,
    pp. 997-996,
    1994.
 4. K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen. 
    Software Tools for Multigrid Methods,
    I{Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming},
    edited by H. P. Langtangen and A. Tveito,
    Springer,
    2003.
 5. H. P. Langtangen. 
    The FEMDEQS Program System,
    I{Department of Mathematics, University of Oslo},
    1989.
 6. H. P. Langtangen. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    I{SIAM Journal on Scientific Computing},
    13,
    pp. 1394-1417,
    1992.
 7. M. Mortensen, H. P. Langtangen and G. N. Wells. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    I{Advances in Water Resources},
    34(9),
    U{doi: 10.1016/j.advwatres.2011.02.013<http://dx.doi.org/10.1016/j.advwatres.2011.02.013>},
    2011.
 8. S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    I{International Journal of Fluid Mechanics Research},
    33(1),
    pp. 15-43,
    2006.
 9. S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    I{Physical Review B: Condensed Matter and Materials Physics},
    74,
    2006.
10. J. B. Haga, H. Osnes and H. P. Langtangen. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    I{International Journal of Analytical and Numerical Methods in Geomechanics},
    U{doi: 10.1002/nag.1062<http://dx.doi.org/10.1002/nag.1062>},
    2011,
    U{http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract<http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract>}.
11. H. P. Langtangen. 
    I{Computational Partial Differential Equations - Numerical Methods and Diffpack Programming},
    Springer,
    2003.
12. H. P. Langtangen. 
    I{Python Scripting for Computational Science},
    Springer,
    2008.
13. H. P. Langtangen and G. Pedersen. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by J. Grue, B. Gjevik and J. E. Weber,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    U{http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310<http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310>}.
14. H. P. Langtangen. 
    I{A Primer on Scientific Programming With Python},
    Springer,
    2012.
15. P. V. Jeberg, H. P. Langtangen and C. B. Terp. 
    Optimization With Diffpack: Practical Example From Welding,
    I{Simula Research Laboratory},
    2004.
16. H. P. Langtangen. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.
17. H. P. Langtangen. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.
18. H. P. Langtangen. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.
19. H. P. Langtangen and A. Tveito. 
    Numerical Methods in Continuum Mechanics,
    I{Center for Industrial Research},
    1991.
20. H. P. Langtangen. 
    Diffpack: Software for Partial Differential Equations,
    I{Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA},
    edited by A. Vermeulen,
    1994.

Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles
----------------------------------

Without label.


Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

Without label.

I{Tip.} 
Here is a tip or hint box, typeset as a notice box.

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent U{Script for Introduction to Version Control<http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/>} provides a more detailed motivation why you will benefit greatly
from using version control systems.

I{Summary.} 
B{Bold remark:} Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are U{Dropbox<http://dropbox.com>} and U{Google Drive<http://drive.google.com>}.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


Appendix: Testing inline comments
---------------------------------

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp 2: Simply go to U{http://dropbox.com<http://dropbox.com>} and watch the video. It explains
how files, like C{myfile.py}, perhaps containing much math, like
M{\partial u/\partial t}, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl 3: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

Appendix: Testing headings ending with C{verbatim inline}
---------------------------------------------------------

The point here is to test 1) C{verbatim} code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

************** File: testdoc.txt *****************
A Document for Testing Doconce
==============================

Hans Petter Langtangen [1, 2] (hpl@simula.no)
Kaare Dump [3] 
A. Dummy Author  
I. S. Overworked [4, 5, 6, 7] 
J. Doe  (j_doe@cyberspace.com)

[1] Center for Biomedical Computing, Simula Research Laboratory
[2] Department of Informatics, University of Oslo
[3] Segfault Inc, Cyberspace
[4] Inst1
[5] Inst2, Somewhere
[6] Third Inst, Elsewhere
[7] Fourth Inst

Date: Jan 32, 2100

Table of contents:

 Section 1 
   Subsection 1 
   Subsection 2: Testing figures and movies 
     Test of movies 
   The \theta parameter (not \nabla?) 
   Custom Environments 
   Tables 
   A test of verbatim words in heading with subscript a_i: my_file_v1 and my_file_v2 
   Bibliography test 
   Example 1: Examples can be typeset as exercises 
   URLs 
   LaTeX Mathematics 
 Exercises 
   Problem 1: Flip a Coin 
     Remarks 
   Not an exercise 
   Project 1: Compute a Probability 
   Project 2: Explore Distributions of Random Circles 
     Remarks 
   Exercise 1: Determine some Distance 
     Remarks 
   Some exercise without the "Exercise:" prefix 
   Example 2: Just an example 
 Here goes another section 
 More Exercises 
   Exercise 3: Make references to projects and problems 
   Project 3: References to  "Project 1: Compute a Probability" in a heading works for plain 
 References 
 Appendix: Just for testing; part I 
   A subsection within an appendix 
 Appendix: Just for testing; part II 
   Appendix: Testing identical titles 
   Appendix: Testing identical titles 
   Appendix: Testing identical titles 
   Appendix: Testing identical titles 
   Appendix: Testing inline comments 
   Appendix: Testing headings ending with verbatim inline 




# !split




The format of this document is
plain

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line




# !split and check if these extra words are included properly in the comment

Subsection 1
------------

More text, with a reference back to the section "Section 1" and further
to the section "URLs". 

Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end


HTML::


        <table>
        <tr><td>Column 1</td><td>Column 2</td></tr>
        <tr><td>0.67526 </td><td>0.92871 </td></tr>
        <!-- comment -->
        </table>


System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test verbatim inline font especially with a newline
inside the text and an exclamation mark at the end: BEGIN! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the verb typesetting... Also test backslashes
like \begin and \end in inline verbatim text.

Here is some red color and an attempt to write with
green color containing a linebreak.
And one more. Some formats will only display this correctly when
HTML is the output format.


Subsection 2: Testing figures and movies
----------------------------------------


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. {fig:impact}

Figures without captions are allowed and will be inlined.

FIGURE:[../doc/manual/figs/streamtubes, width=200]


Test of movies
~~~~~~~~~~~~~~

Movie ref{mov:tsunami} shows a tsunami.

 Mjolnir tsunami (by Sylfest Glimsdal) . (Movie ../doc/manual/figs/mjolnir.mpeg: play mjolnir.html)

Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play wavepacket.html)



 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files ../doc/manual/figs/wavepacket_*.png in wavepacket_0001.html)



 Movies can be uploaded to YouTube and embedded as HTML or as a link. http://www.youtube.com/watch?v=_O7iUiftbKU

 Computational fluid dynamics movie. http://vimeo.com/55562330



Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like my_file_v1 and my_file_v2 as well as math with subscript as in t_{i+1}. {myfig} 



FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]



The \theta parameter (not \nabla?)
----------------------------------

Functions do not always need to be advanced, here is one
involving \theta::


        def f(theta):
            return theta**2


*More on \theta.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
\frac{1}{2}, {1/2}, \pmb{x}, \frac{Du}{dt},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the .tex by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!




*Theorem 5.* Let a=1 and b=2. Then c=3.

*Proof.* Since c=a+b, the result follows from straightforward addition.
END

As we see, the proof of Theorem 5 is a modest
achievement.


Tables
------



Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

========  ========  ========  ========  
   i        h_i     \bar T_i    L_i     
========  ========  ========  ========  
0                0       288   -0.0065  
1           11,000       216       0.0  
2           20,000       216     0.001  
3           32,000       228    0.0028  
4           47,000       270       0.0  
5           51,000       270   -0.0028  
6           71,000       214       NaN  
========  ========  ========  ========  

And add one with verbatim headings (with underscores),
and rows starting with |- because of a negative number,
and | right after verbatim word (with no space):

=========  =========  =========  =========  
  exact       v_1     a_i + v_2   verb_3_   
=========  =========  =========  =========  
        9       9.62       5.57       8.98  
      -20     -23.39      -7.65     -19.93  
       10      17.74      -4.50       9.96  
        0      -9.19       4.13      -0.26  
=========  =========  =========  =========  


A test of verbatim words in heading with subscript a_i: my_file_v1 and my_file_v2
---------------------------------------------------------------------------------

*Files my_file_v1.py and my_file_v2.py define some math a_{i-1}.* Here is
some text.

Bibliography test
-----------------

Here is an example: [1] discussed propagation of
large destructive water waves, [2] gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [3].
The book chapter [4] contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [5] about a big FORTRAN package.
Multiple references are also possible, e.g., see
[1] [4].

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[6] [3] [7] [1]
and
[2] [8] [9] [10] [11] [12] [13]
and all the work of
[14] [4] [15] as well as
old work [5] and [16], and the
talk [17].
Langtangen also had two thesis [18] [16].
More retro citations are
the old ME-IN323 book [19] and the
[20] OONSKI '94 paper.





Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with Example:
and then, with the command-line option --examples_as_exercises be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.



URLs
----

Testing of URLs: hpl's home page hpl (http://folk.uio.no/hpl), or
the entire URL if desired, http://folk.uio.no/hpl.  Here is a
plain file link testdoc.do.txt, or testdoc.do.txt, or
testdoc.do.txt or testdoc.do.txt or a link with
newline (testdoc.do.txt). Can test spaces with the link with word
too: hpl (http://folk.uio.no/hpl) or hpl (http://folk.uio.no/hpl). Also file:/// works: link to a
file (file:///home/hpl/vc/doconce/doc/demos/manual/manual.html) is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: hpl@simula.no (mailto:hpl@simula.no), or just a mail link (mailto:hpl@simula.no), or a raw mailto:hpl@simula.no.

Here are some tough tests of URLs, especially for the latex format:
Newton-Cotes (http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas) formulas
and a good book (http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1). Need to test
Newton-Cotes with percentage in URL too:
http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.

For the --device=paper option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
decay_mod (https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py).



More tough tests: repeated URLs whose footnotes when using the
--device=paper option must be correct. We have
google (http://google.com), google (http://google.com), and
google (http://google.com), which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::

        \begin{equation}
        {\partial u\over\partial t} = \nabla^2 u label{my:eq1}
        \end{equation}

We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::

        \begin{align*}
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        \end{align*}




More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  "Problem 1: Flip a Coin" and  "Project 1: Compute a Probability",
as well as  "Project 2: Explore Distributions of Random Circles" and "Project 3: References to Project ref{demo:ex:2} in a heading works for plain", and in
between there we have  "Exercise 3: Make references to projects and problems".

Exercises
=========




Problem 1: Flip a Coin
----------------------



Make a program that simulates flipping a coin N times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.






Remarks
~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.

*Hint 1.* Use r = random.random() and define head as r <= 0.5.


*Hint 2.* Draw an integer among \{1,2\} with
r = random.randint(1,2) and define head when r is 1.


*Answer.* If the random.random() function returns a number <1/2, let it be
head, otherwise tail. Repeat this N number of times.


*Solution.* Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

Filenames: flip_coin.py, flip_coin.pdf.



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.




Project 1: Compute a Probability
--------------------------------



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval [0,1)?


*Hint.* To answer this question empirically, let a program
draw N such random numbers using Python's standard random module,
count how many of them, M, that fall in the interval (0.5,0.6), and
compute the probability as M/N.






Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where R is the radius of the circle, (x_0,y_0) is the
center point, and t is a parameter in the unit interval [0,1].
For any t, (x,y) is a point on the circle.
The formula can be used to generate n points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)



The goal of this project is to draw N circles with random
center and radius. Plot each circle using the circle function
above.


*a)* Let R be normally distributed and (x_0,y_0) uniformly distributed.


*Hint.* Use the numpy.random module to draw the
x_0, y_0, and R quantities.


*Answer.* Here goes the short answer to part a).


*Solution.* Here goes a full solution to part a).

*b)* Let R be uniformly distributed and (x_0,y_0) normally distributed.
Filename: norm.py.

*c)* Let R and (x_0,y_0) be normally distributed.

Filename: circles.pdf.


Remarks
~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.







Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


*Solution.* Here goes a full solution of the whole exercise.
With some math a=b in this solution::

        \[ \hbox{math in solution: } a = b \]

And code a=b in this solution::


        a = b  # code in solution

End of solution is here.


*a)* Subexercises are numbered a), b), etc.


*Hint 1.* First hint to subexercise a).
With math a=b in hint::

        \[ a=b. \]

And with code (in plain verbatim) returning x+1 in hint::


        def func(x):
            return x + 1  # with code in hint



*Hint 2.* Second hint to subexercise a).
Filename: subexer_a.pdf.


*Answer.* Short answer to subexercise a).
With math in answer: a=b.

*b)* Here goes the text for subexercise b).


Some math \cos^2 x + \sin^2 x = 1 written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]



*Hint.* A hint for this subexercise.
Filename: subexer_b.pdf.


*Solution.* Here goes the solution of this subexercise.


Remarks
~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.







Some exercise without the "Exercise:" prefix
--------------------------------------------


Just some text. And some math saying that e^0=1 on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code lambda x: x+2 is correctly placed here::


        lambda x: x+2







Example 2: Just an example
--------------------------



*a)* What is the capital of Norway?

*Answer.* Oslo.



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============




Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from  "Project 2: Explore Distributions of Random Circles" or  "Problem 1: Flip a Coin"
and verify it.
Filename: verify_formula.py.






Project 3: References to  "Project 1: Compute a Probability" in a heading works for plain
-----------------------------------------------------------------------------------------

Refer to the previous exercise as  "Exercise 3: Make references to projects and problems",
the two before that as  "Project 1: Compute a Probability" and "Project 2: Explore Distributions of Random Circles",
and this one as  "Project 3: References to Project ref{demo:ex:2} in a heading works for plain".
Filename: selc_composed.pdf.



References
==========


Bibliography
============

 1. H. P. Langtangen and G. Pedersen. 
    Propagation of Large Destructive Waves,
    *International Journal of Applied Mechanics and Engineering*,
    7(1),
    pp. 187-204,
    2002.

 2. H. P. Langtangen, K.-A. Mardal and R. Winther. 
    Numerical Methods for Incompressible Viscous Flow,
    *Advances in Water Resources*,
    25,
    pp. 1125-1146,
    2002.

 3. H. P. Langtangen. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    *SIAM Journal of Scientific and Statistical Computing*,
    15,
    pp. 997-996,
    1994.

 4. K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen. 
    Software Tools for Multigrid Methods,
    *Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming*,
    edited by H. P. Langtangen and A. Tveito,
    Springer,
    2003.

 5. H. P. Langtangen. 
    The FEMDEQS Program System,
    *Department of Mathematics, University of Oslo*,
    1989.

 6. H. P. Langtangen. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    *SIAM Journal on Scientific Computing*,
    13,
    pp. 1394-1417,
    1992.

 7. M. Mortensen, H. P. Langtangen and G. N. Wells. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    *Advances in Water Resources*,
    34(9),
    doi: 10.1016/j.advwatres.2011.02.013 (http://dx.doi.org/10.1016/j.advwatres.2011.02.013),
    2011.

 8. S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    *International Journal of Fluid Mechanics Research*,
    33(1),
    pp. 15-43,
    2006.

 9. S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    *Physical Review B: Condensed Matter and Materials Physics*,
    74,
    2006.

10. J. B. Haga, H. Osnes and H. P. Langtangen. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    *International Journal of Analytical and Numerical Methods in Geomechanics*,
    doi: 10.1002/nag.1062 (http://dx.doi.org/10.1002/nag.1062),
    2011,
    http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract.

11. H. P. Langtangen. 
    *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,
    Springer,
    2003.

12. H. P. Langtangen. 
    *Python Scripting for Computational Science*,
    Springer,
    2008.

13. H. P. Langtangen and G. Pedersen. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by J. Grue, B. Gjevik and J. E. Weber,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310.

14. H. P. Langtangen. 
    *A Primer on Scientific Programming With Python*,
    Springer,
    2012.

15. P. V. Jeberg, H. P. Langtangen and C. B. Terp. 
    Optimization With Diffpack: Practical Example From Welding,
    *Simula Research Laboratory*,
    2004.

16. H. P. Langtangen. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.

17. H. P. Langtangen. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.

18. H. P. Langtangen. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.

19. H. P. Langtangen and A. Tveito. 
    Numerical Methods in Continuum Mechanics,
    *Center for Industrial Research*,
    1991.

20. H. P. Langtangen. 
    Diffpack: Software for Partial Differential Equations,
    *Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA*,
    edited by A. Vermeulen,
    1994.

Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles
----------------------------------

Without label.


Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

Without label.

*Tip.* 
Here is a tip or hint box, typeset as a notice box.

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent Script for Introduction to Version Control (http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/) provides a more detailed motivation why you will benefit greatly
from using version control systems.

*Summary.* 
_Bold remark:_ Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are Dropbox (http://dropbox.com) and Google Drive (http://drive.google.com).
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


Appendix: Testing inline comments
---------------------------------

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp 2: Simply go to http://dropbox.com and watch the video. It explains
how files, like myfile.py, perhaps containing much math, like
\partial u/\partial t, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl 3: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

Appendix: Testing headings ending with verbatim inline
------------------------------------------------------

The point here is to test 1) verbatim code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

************** File: testdoc.md *****************
% A Document for Testing Doconce
% Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo;  Kaare Dump at Segfault Inc, Cyberspace;  A. Dummy Author;  I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst;  J. Doe
% Jan 32, 2100

<!-- Table of contents: Run pandoc with --toc option -->



<!-- !split -->




The format of this document is
pandoc
*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->



## Section 1

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line


> Here are two lines that make up
> a block quote.

<!-- !split and check if these extra words are included properly in the comment -->

### Subsection 1

More text, with a reference back to the section [Section 1](#n-1) and further
to the section [URLs](#s). 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

Let's do some copying from files too. First from subroutine up to the very end,


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and then just the subroutine,

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and finally the complete file:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Fortran}
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Testing other code environments. First Python:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bc pycod
def f(x):
    return x+1
!ec
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

which gets rendered as


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
def f(x):
    return x+1
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Now a complete program to be shown via Python Online Tutorial:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Then Cython:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cpdef f(double x):
    return x + 1
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- This one tests a + sign before a code environment -->
C++:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Cpp}
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

which then is typeset as


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

HTML:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

System call:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is time to test `verbatim inline font` especially with `a newline
inside the text` and an exclamation mark at the end: `BEGIN`! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the `verb` typesetting... Also test backslashes
like `\begin` and `\end` in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


### Subsection 2: Testing figures and movies


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

![Visualization of flow by streamtubes. ](../doc/manual/figs/streamtubes.png)

Figures without captions are allowed and will be inlined.

![](../doc/manual/figs/streamtubes.png)


#### Test of movies

Movie ref{mov:tsunami} shows a tsunami.


<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em>Mjolnir tsunami (by Sylfest Glimsdal) .</em></p>


Test empty caption (for inline movie):


<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em></em></p>


<!-- Test wrong syntax and multi-line caption -->


<p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>

<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->


<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>




<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Computational fluid dynamics movie.</em>




<!-- Test multi-line caption in figure -->

Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

![A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. ](../doc/manual/figs/wavepacket_0001.png)

<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<!-- Test URL as figure name -->

![](https://doconce.googlecode.com/hg/doc/blog/f_plot.png)

<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

### The $\theta$ parameter (not $\nabla$?)

Functions do not always need to be advanced, here is one
involving $\theta$:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
def f(theta):
    return theta**2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

*More on $\theta$.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
$\frac{1}{2}$, ${1/2}$, $\pmb{x}$, $\frac{Du}{dt}$,
both inline and in block:

$$

\frac{Du}{dt} = 0


$$

$$
  
\frac{1}{2} = {1/2}

$$

$$
  
\frac{1}{2}\pmb{x} = \pmb{n}

$$

Or with align with label and numbers:

$$
\begin{equation}
\frac{Du}{dt} = 0
\label{aligneq1}
\end{equation}
$$

$$
\begin{equation}  
\frac{1}{2} = {1/2}
\end{equation}
$$

$$
\begin{equation}  
\frac{1}{2}\pmb{x} = \pmb{n}
\label{aligneq2}
\end{equation}
$$


### Custom Environments

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the `.tex` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<!-- begin theorem -->

*Theorem 5.* Let $a=1$ and $b=2$. Then $c=3$.
<!-- end theorem -->

<!-- begin proof -->
*Proof.* Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
<!-- end proof -->

As we see, the proof of Theorem 5 is a modest
achievement.


### Tables


<!-- index with comma could fool sphinx -->

Let us take this table from the manual:



    time        velocity    acceleration  
------------  ------------  ------------  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  



The Doconce source code reads

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Here is yet another table to test that we can handle more than
one table:


    time        velocity    acceleration  
------------  ------------  ------------  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     


And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


   $i$        $h_i$     $\bar T_i$    `L_i`     
----------  ----------  ----------  ----------  
0                    0         288     -0.0065  
1               11,000         216         0.0  
2               20,000         216       0.001  
3               32,000         228      0.0028  
4               47,000         270         0.0  
5               51,000         270     -0.0028  
6               71,000         214       `NaN`  


And add one with verbatim headings (with underscores),
and rows starting with `|-` because of a negative number,
and `|` right after verbatim word (with no space):


    exact          `v_1`      $a_i$ + `v_2`    `verb_3_`    
-------------  -------------  -------------  -------------  
            9           9.62           5.57           8.98  
          -20         -23.39          -7.65         -19.93  
           10          17.74          -4.50           9.96  
            0          -9.19           4.13          -0.26  



### A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2`

*Files `my_file_v1.py` and `my_file_v2.py` define some math $a_{i-1}$.* Here is
some text.

### Bibliography test

Here is an example: @Langtangen_Pedersen_2002 discussed propagation of
large destructive water waves, @Langtangen_et_al_2002 gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in @Langtangen_1994a.
The book chapter @Mardal_et_al_2003a contains information on
C++ software tools for programming multigrid methods. A real retro
reference is @Langtangen_1988d about a big FORTRAN package.
Multiple references are also possible, e.g., see
@Langtangen_Pedersen_2002;@Mardal_et_al_2003a.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
@Langtangen_1992c;@Langtangen_1994a;@Mortensen_et_al_2011;@Langtangen_Pedersen_2002
and
@Langtangen_et_al_2002;@Glimsdal_et_al_20006;@Rahman_et_al_2006b;@Haga_et_al_2011a;@Langtangen_2003a;@Langtangen_2008a;@Langtangen:95
and all the work of
@Langtangen_2012;@Mardal_et_al_2003a;@Jeberg_et_al_2004 as well as
old work @Langtangen_1988d and @Langtangen_1989e, and the
talk @Langtangen_talk_2007a.
Langtangen also had two thesis @Langtangen:85;@Langtangen_1989e.
More retro citations are
the old ME-IN323 book @Langtangen:91 and the
@Langtangen:94b OONSKI '94 paper.




<!-- --- begin exercise --- -->

### Example 1: Examples can be typeset as exercises

Examples can start with a subsection heading starting with `Example:`
and then, with the command-line option `--examples_as_exercises` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<!-- --- end exercise --- -->


### URLs

Testing of URLs: hpl's home page [hpl](http://folk.uio.no/hpl), or
the entire URL if desired, <http://folk.uio.no/hpl>.  Here is a
plain file link <testdoc.do.txt>, or <testdoc.do.txt>, or
<testdoc.do.txt> or <testdoc.do.txt> or [a link with
newline](testdoc.do.txt). Can test spaces with the link with word
too: [hpl](http://folk.uio.no/hpl) or [hpl](http://folk.uio.no/hpl). Also `file:///` works: [link to a
file](file:///home/hpl/vc/doconce/doc/demos/manual/manual.html) is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <http://folk.uio.no/hpl>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: [`hpl@simula.no`](mailto:hpl@simula.no), or just a [mail link](mailto:hpl@simula.no), or a raw <mailto:hpl@simula.no>.

Here are some tough tests of URLs, especially for the `latex` format:
[Newton-Cotes](http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas) formulas
and a [good book](http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1). Need to test
Newton-Cotes with percentage in URL too:
<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>
and <http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae> which has a shebang.

For the `--device=paper` option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
[`decay_mod`](https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py).

<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a `_static*` folder. -->

More tough tests: repeated URLs whose footnotes when using the
`--device=paper` option must be correct. We have
[google](http://google.com), [google](http://google.com), and
[google](http://google.com), which should result in exactly three
footnotes.



### LaTeX Mathematics

Here is an equation without label using backslash-bracket environment:
$$
 a = b + c 
$$
or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$
We can refer to this equation by \eqref{my:eq1}.

Here is a system without equation numbers, using the align-astrisk environment:
$$

\pmb{a} = \pmb{q}\times\pmb{n} 

$$

$$
  
b = \nabla^2 u + \nabla^4 v

$$


And here is a system of equations with labels in an align environment:
$$
\begin{equation}
a = q + 4 + 5+ 6 \label{eq1} 
\end{equation}
$$

$$
\begin{equation}  
b = \nabla^2 u + \nabla^4 x \label{eq2}
\end{equation}
$$
We can refer to \eqref{eq1}-\eqref{eq2}. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in `CG-2`.
Also test $a_{i-j}$ as well as $kx-wt$.

Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$
Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$
We can refer to the last equation by \eqref{split:envir:eq}.

Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$

Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$
Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  [Problem 1: Flip a Coin](#n) and  [Project 1: Compute a Probability](#y),
as well as  [Project 2: Explore Distributions of Random Circles](#s) and [Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc](#c), and in
between there we have  [Exercise 3: Make references to projects and problems](#s).

## Exercises



<!-- --- begin exercise --- -->

### Problem 1: Flip a Coin

<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- Torture tests -->

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<!-- Test syntax error -->




#### Remarks

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.
<!-- --- begin hint in exercise --- -->

*Hint 1.* Use `r = random.random()` and define head as `r <= 0.5`.
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

*Hint 2.* Draw an integer among $\{1,2\}$ with
`r = random.randint(1,2)` and define head when `r` is 1.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
*Answer.* If the `random.random()` function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
*Solution.* Code:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- --- end solution of exercise --- -->
Filenames: `flip_coin.py`, `flip_coin.pdf`.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<!-- --- end exercise --- -->


### Not an exercise

Should be possible to stick a normal section in the middle of many
exercises.



<!-- --- begin exercise --- -->

### Project 1: Compute a Probability

<!-- Minimalistic exercise -->


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

<!-- --- begin hint in exercise --- -->

*Hint.* To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard `random` module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
<!-- --- end hint in exercise --- -->

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

### Project 2: Explore Distributions of Random Circles

The formula for a circle is given by

$$
\begin{equation}
x = x_0 + R\cos 2\pi t,
\end{equation}
$$

$$
\begin{equation}  
y = y_0 + R\sin 2\pi t,
\end{equation}
$$
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate `n` points on a circle:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the `circle` function
above.


*a)* Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

<!-- --- begin hint in exercise --- -->

*Hint.* Use the `numpy.random` module to draw the
$x_0$, $y_0$, and $R$ quantities.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
*Answer.* Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
*Solution.* Here goes a full solution to part a).
<!-- --- end solution of exercise --- -->

*b)* Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: `norm.py`.

*c)* Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: `circles.pdf`.

<!-- Closing remarks for this Project -->

#### Remarks

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

### Exercise 1: Determine some Distance

Intro to this exercise. Questions are in subexercises below.





<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<!-- --- begin solution of exercise --- -->
*Solution.* Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
$$
 \hbox{math in solution: } a = b 
$$
And code `a=b` in this solution:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
a = b  # code in solution
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

End of solution is here.
<!-- --- end solution of exercise --- -->


*a)* Subexercises are numbered a), b), etc.

<!-- --- begin hint in exercise --- -->

*Hint 1.* First hint to subexercise a).
With math $a=b$ in hint:

$$
 a=b. 
$$
And with code (in plain verbatim) returning $x+1$ in hint:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
def func(x):
    return x + 1  # with code in hint
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

*Hint 2.* Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: `subexer_a.pdf`.


<!-- --- begin answer of exercise --- -->
*Answer.* Short answer to subexercise a).
With math in answer: $a=b$.
<!-- --- end answer of exercise --- -->

*b)* Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

$$
 \cos^2 x + \sin^2 x = 1 \thinspace .
$$

<!-- --- begin hint in exercise --- -->

*Hint.* A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: `subexer_b.pdf`.


<!-- --- begin solution of exercise --- -->
*Solution.* Here goes the solution of this subexercise.
<!-- --- end solution of exercise --- -->

<!-- Closing remarks for this Exercise -->

#### Remarks

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

### Some exercise without the "Exercise:" prefix

<!-- Another minimalistic exercise -->

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

$$
 \exp{(0)} = 1 
$$

And a test that the code `lambda x: x+2` is correctly placed here:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
lambda x: x+2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

### Example 2: Just an example

<!-- This example needs the --examples_as_exercises option, otherwise -->
<!-- it is just typeset as it is written. -->


*a)* What is the capital of Norway?

*Answer.* Oslo.

<!-- --- end exercise --- -->


## Here goes another section

With some text, before we continue with exercises.

## More Exercises



<!-- --- begin exercise --- -->

### Exercise 3: Make references to projects and problems

Pick a statement from  [Project 2: Explore Distributions of Random Circles](#s) or  [Problem 1: Flip a Coin](#n)
and verify it.
Filename: `verify_formula.py`.

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

### Project 3: References to  [Project 1: Compute a Probability](#y) in a heading works for pandoc

Refer to the previous exercise as  [Exercise 3: Make references to projects and problems](#s),
the two before that as  [Project 1: Compute a Probability](#y) and [Project 2: Explore Distributions of Random Circles](#s),
and this one as  [Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc](#c).
Filename: `selc_composed.pdf`.

<!-- --- end exercise --- -->


## References


## Bibliography

 1. \label{Langtangen_Pedersen_2002} _H. P. Langtangen and G. Pedersen_. 
    Propagation of Large Destructive Waves,
    *International Journal of Applied Mechanics and Engineering*,
    7(1),
    pp. 187-204,
    2002.

 2. \label{Langtangen_et_al_2002} _H. P. Langtangen, K.-A. Mardal and R. Winther_. 
    Numerical Methods for Incompressible Viscous Flow,
    *Advances in Water Resources*,
    25,
    pp. 1125-1146,
    2002.

 3. \label{Langtangen_1994a} _H. P. Langtangen_. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    *SIAM Journal of Scientific and Statistical Computing*,
    15,
    pp. 997-996,
    1994.

 4. \label{Mardal_et_al_2003a} _K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen_. 
    Software Tools for Multigrid Methods,
    *Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming*,
    edited by _H. P. Langtangen and A. Tveito_,
    Springer,
    2003.

 5. \label{Langtangen_1988d} _H. P. Langtangen_. 
    The FEMDEQS Program System,
    *Department of Mathematics, University of Oslo*,
    1989.

 6. \label{Langtangen_1992c} _H. P. Langtangen_. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    *SIAM Journal on Scientific Computing*,
    13,
    pp. 1394-1417,
    1992.

 7. \label{Mortensen_et_al_2011} _M. Mortensen, H. P. Langtangen and G. N. Wells_. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    *Advances in Water Resources*,
    34(9),
    [doi: 10.1016/j.advwatres.2011.02.013](http://dx.doi.org/10.1016/j.advwatres.2011.02.013),
    2011.

 8. \label{Glimsdal_et_al_20006} _S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt_. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    *International Journal of Fluid Mechanics Research*,
    33(1),
    pp. 15-43,
    2006.

 9. \label{Rahman_et_al_2006b} _S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen_. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    *Physical Review B: Condensed Matter and Materials Physics*,
    74,
    2006.

10. \label{Haga_et_al_2011a} _J. B. Haga, H. Osnes and H. P. Langtangen_. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    *International Journal of Analytical and Numerical Methods in Geomechanics*,
    [doi: 10.1002/nag.1062](http://dx.doi.org/10.1002/nag.1062),
    2011,
    <http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract>.

11. \label{Langtangen_2003a} _H. P. Langtangen_. 
    *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,
    Springer,
    2003.

12. \label{Langtangen_2008a} _H. P. Langtangen_. 
    *Python Scripting for Computational Science*,
    Springer,
    2008.

13. \label{Langtangen:95} _H. P. Langtangen and G. Pedersen_. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by _J. Grue, B. Gjevik and J. E. Weber_,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    <http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310>.

14. \label{Langtangen_2012} _H. P. Langtangen_. 
    *A Primer on Scientific Programming With Python*,
    Springer,
    2012.

15. \label{Jeberg_et_al_2004} _P. V. Jeberg, H. P. Langtangen and C. B. Terp_. 
    Optimization With Diffpack: Practical Example From Welding,
    *Simula Research Laboratory*,
    2004.

16. \label{Langtangen_1989e} _H. P. Langtangen_. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.

17. \label{Langtangen_talk_2007a} _H. P. Langtangen_. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.

18. \label{Langtangen:85} _H. P. Langtangen_. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.

19. \label{Langtangen:91} _H. P. Langtangen and A. Tveito_. 
    Numerical Methods in Continuum Mechanics,
    *Center for Industrial Research*,
    1991.

20. \label{Langtangen:94b} _H. P. Langtangen_. 
    Diffpack: Software for Partial Differential Equations,
    *Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA*,
    edited by _A. Vermeulen_,
    1994.

## Appendix: Just for testing; part I

This is the first appendix.

### A subsection within an appendix

Some text.

## Appendix: Just for testing; part II

This is more stuff for an appendix.

### Appendix: Testing identical titles

Without label.


### Appendix: Testing identical titles

With label.

### Appendix: Testing identical titles

With label.

### Appendix: Testing identical titles

Without label.

*Tip.* 
Here is a tip or hint box, typeset as a notice box.

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent [Script for Introduction to Version Control](http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/) provides a more detailed motivation why you will benefit greatly
from using version control systems.

*Summary.* 
_Bold remark:_ Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are [Dropbox](http://dropbox.com) and [Google Drive](http://drive.google.com).
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


### Appendix: Testing inline comments

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. [mp 2: Simply go to <http://dropbox.com> and watch the video. It explains
how files, like `myfile.py`, perhaps containing much math, like
$\partial u/\partial t$, are easily communicated between machines.] It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  [hpl 3: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.]

### Appendix: Testing headings ending with `verbatim inline`

The point here is to test 1) `verbatim` code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.


************** File: testdoc.ipynb *****************
{
 "metadata": {},
 "nbformat": 3,
 "nbformat_minor": 0,
 "worksheets": [
  {
   "cells": [
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "# A Document for Testing Doconce\n",
      "_Jan 32, 2100_\n",
      "\n",
      "<!-- !split -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "The format of this document is\n",
      "ipynb\n",
      "\n",
      "*Abstract.* This is a document with many test constructions for doconce syntax.\n",
      "It was used heavily for the development and kept for testing\n",
      "numerous constructions, also special and less common cases.\n",
      "\n",
      "And exactly for test purposes we have an extra line here, which\n",
      "is part of the abstract.\n",
      "\n",
      "<!-- Cannot demonstrate chapter headings since abstract and chapter -->\n",
      "<!-- is mutually exclusive in LaTeX -->\n",
      "\n",
      "\n",
      "\n",
      "## Section 1\n",
      "\n",
      "Here is a nested list:\n",
      "\n",
      "  * item1\n",
      "\n",
      "  * item2\n",
      "\n",
      "  * item3 which continues\n",
      "    on the next line to test that feature\n",
      "\n",
      "  * and a sublist\n",
      "\n",
      "    * with indented subitem1\n",
      "\n",
      "    * and a subitem2\n",
      "\n",
      "\n",
      "  * and perhaps an ordered sublist\n",
      "\n",
      "   1. first item\n",
      "\n",
      "   2. second item,\n",
      "      continuing on a new line\n",
      "\n",
      "\n",
      "!bquote\n",
      "Here are two lines that make up\n",
      "a block quote.\n",
      "!equote\n",
      "\n",
      "<!-- !split and check if these extra words are included properly in the comment -->\n",
      "\n",
      "### Subsection 1\n",
      "\n",
      "More text, with a reference back to the section [Section 1](#n-1) and further\n",
      "to the section [URLs](#s). \n",
      "<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->\n",
      "\n",
      "Let's do some copying from files too. First from subroutine up to the very end,"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "      subroutine test()\n",
      "      integer i\n",
      "      real*8 r\n",
      "      r = 0\n",
      "      do i = 1, i\n",
      "         r = r + i\n",
      "      end do\n",
      "      return\n",
      "C     END1\n",
      "\n",
      "      program testme\n",
      "      call test()\n",
      "      return\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "and then just the subroutine,"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "\n",
      "      subroutine test()\n",
      "      integer i\n",
      "      real*8 r\n",
      "      r = 0\n",
      "      do i = 1, i\n",
      "         r = r + i\n",
      "      end do\n",
      "      return\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "and finally the complete file:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "C     a comment\n",
      "\n",
      "      subroutine test()\n",
      "      integer i\n",
      "      real*8 r\n",
      "      r = 0\n",
      "      do i = 1, i\n",
      "         r = r + i\n",
      "      end do\n",
      "      return\n",
      "C     END1\n",
      "\n",
      "      program testme\n",
      "      call test()\n",
      "      return\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Testing other code environments. First Python:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "!bc pycod\n",
      "def f(x):\n",
      "    return x+1\n",
      "!ec\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "which gets rendered as"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "def f(x):\n",
      "    return x+1\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Now a complete program to be shown via Python Online Tutorial:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "def f(x):\n",
      "    return x + 1\n",
      "\n",
      "a = 2\n",
      "x = a\n",
      "a = 1\n",
      "v = f(x)\n",
      "print v\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Then Cython:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "cpdef f(double x):\n",
      "    return x + 1\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- This one tests a + sign before a code environment -->\n",
      "C++:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "#include <iostream>\n",
      "\n",
      "int main()\n",
      "{\n",
      "   std::cout << \"Sample output\" << std::endl;\n",
      "   return 0\n",
      "}\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- The next should get correctly typset in sphinx (cod is fcod) -->\n",
      "And a little bit of Fortran:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "!bc cod\n",
      "      subroutine midpt(x, length, a, b)\n",
      "      real*8 a, b, x\n",
      "      x = (a + b)/2\n",
      "      length = b - a\n",
      "      return\n",
      "      end\n",
      "!ec\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "which then is typeset as"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "      subroutine midpt(x, length, a, b)\n",
      "      real*8 a, b, x\n",
      "      x = (a + b)/2\n",
      "      length = b - a\n",
      "      return\n",
      "      end\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "HTML:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "<table>\n",
      "<tr><td>Column 1</td><td>Column 2</td></tr>\n",
      "<tr><td>0.67526 </td><td>0.92871 </td></tr>\n",
      "<!-- comment -->\n",
      "</table>\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "System call:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "Terminal> mkdir test\n",
      "Terminal> cd test\n",
      "Terminal> myprog -f\n",
      "output1\n",
      "output2\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "It is time to test `verbatim inline font` especially with `a newline\n",
      "inside the text` and an exclamation mark at the end: `BEGIN`! The\n",
      "exclamation mark inside the verbatim text is not smart for latex as\n",
      "we use ! in the `verb` typesetting... Also test backslashes\n",
      "like `\\begin` and `\\end` in inline verbatim text.\n",
      "\n",
      "Here is some <font color=\"red\">red</font> color and an attempt to write <font color=\"green\">with\n",
      "green color containing a linebreak.\n",
      "And one more.</font> Some formats will only display this correctly when\n",
      "HTML is the output format.\n",
      "\n",
      "\n",
      "### Subsection 2: Testing figures and movies\n",
      "\n",
      "\n",
      "Test of figures. In particular we refer to Figure ref{fig:impact} in which\n",
      "there is a flow.\n",
      "\n",
      "![Visualization of flow by streamtubes. ](files/../doc/manual/figs/streamtubes.png)\n",
      "\n",
      "Figures without captions are allowed and will be inlined.\n",
      "\n",
      "![](files/../doc/manual/figs/streamtubes.png)\n",
      "\n",
      "\n",
      "#### Test of movies\n",
      "\n",
      "Movie ref{mov:tsunami} shows a tsunami.\n",
      "\n",
      "\n",
      "<embed src=\"../doc/manual/figs/mjolnir.mpeg\" width=700 height=400 autoplay=\"false\" loop=\"true\"></embed>\n",
      "<p><em>Mjolnir tsunami (by Sylfest Glimsdal) .</em></p>\n",
      "\n",
      "\n",
      "Test empty caption (for inline movie):\n",
      "\n",
      "\n",
      "<embed src=\"../doc/manual/figs/wavepacket.mpeg\" width=700 height=400 autoplay=\"false\" loop=\"true\"></embed>\n",
      "<p><em></em></p>\n",
      "\n",
      "\n",
      "<!-- Test wrong syntax and multi-line caption -->\n",
      "\n",
      "\n",
      "<p><a href=\"wavepacket_0001.html\">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>\n",
      "<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>\n",
      "\n",
      "<!-- Check out the correct with and height of YouTube movies from the -->\n",
      "<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->\n",
      "\n",
      "\n",
      "<iframe width=\"420\" height=\"315\" src=\"http://www.youtube.com/embed/_O7iUiftbKU\" frameborder=\"0\" allowfullscreen></iframe>\n",
      "\n",
      "<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<iframe width=\"500\" height=\"278\" src=\"http://player.vimeo.com/video/55562330\" frameborder=\"0\" allowfullscreen></iframe>\n",
      "\n",
      "<em>Computational fluid dynamics movie.</em>\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- Test multi-line caption in figure -->\n",
      "\n",
      "Here is figure ref{myfig} with a long multi-line caption\n",
      "and an extra space before the FIGURE keyword.\n",
      "\n",
      "![A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. ](files/../doc/manual/figs/wavepacket_0001.png)\n",
      "\n",
      "<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->\n",
      "\n",
      "<!-- Test URL as figure name -->\n",
      "\n",
      "![](https://doconce.googlecode.com/hg/doc/blog/f_plot.png)\n",
      "\n",
      "<!-- Test wikimedia type of files that otherwise reside in subdirs -->\n",
      "\n",
      "<!-- Somewhat challenging heading with latex math, \\t, \\n, ? and parenthesis -->\n",
      "\n",
      "### The $\\theta$ parameter (not $\\nabla$?)\n",
      "\n",
      "Functions do not always need to be advanced, here is one\n",
      "involving $\\theta$:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "def f(theta):\n",
      "    return theta**2\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "*More on $\\theta$.* Here is more text following headline with math.\n",
      "\n",
      "Newcommands must also be tested in this test report:\n",
      "$\\frac{1}{2}$, ${1/2}$, $\\pmb{x}$, $\\frac{Du}{dt}$,\n",
      "both inline and in block:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\frac{Du}{dt} = 0\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\frac{1}{2} = {1/2}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\frac{1}{2}\\pmb{x} = \\pmb{n}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Or with align with label and numbers:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\begin{equation}\n",
      "\\frac{Du}{dt} = 0\n",
      "\\label{aligneq1}\n",
      "\\end{equation}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\begin{equation}  \n",
      "\\frac{1}{2} = {1/2}\n",
      "\\end{equation}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\begin{equation}  \n",
      "\\frac{1}{2}\\pmb{x} = \\pmb{n}\n",
      "\\label{aligneq2}\n",
      "\\end{equation}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### Custom Environments\n",
      "\n",
      "Here is an attempt to create a theorem environment via Mako\n",
      "(for counting theorems) and comment lines to help replacing lines in\n",
      "the `.tex` by proper begin-end LaTeX environments for theorems.\n",
      "Should look nice in most formats!\n",
      "\n",
      "\n",
      "\n",
      "<!-- begin theorem -->\n",
      "\n",
      "*Theorem 5.* Let $a=1$ and $b=2$. Then $c=3$.\n",
      "<!-- end theorem -->\n",
      "\n",
      "<!-- begin proof -->\n",
      "*Proof.* Since $c=a+b$, the result follows from straightforward addition.\n",
      "$\\Diamond$\n",
      "<!-- end proof -->\n",
      "\n",
      "As we see, the proof of Theorem 5 is a modest\n",
      "achievement.\n",
      "\n",
      "\n",
      "### Tables\n",
      "\n",
      "\n",
      "<!-- index with comma could fool sphinx -->\n",
      "\n",
      "Let us take this table from the manual:\n",
      "\n",
      "\n",
      "\n",
      "    time        velocity    acceleration  \n",
      "------------  ------------  ------------  \n",
      "0.0                 1.4186         -5.01  \n",
      "2.0               1.376512        11.919  \n",
      "4.0                 1.1E+1     14.717624  \n",
      "\n",
      "\n",
      "\n",
      "The Doconce source code reads"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "  |--------------------------------|\n",
      "  |time  | velocity | acceleration |\n",
      "  |--l--------r-----------r--------|\n",
      "  | 0.0  | 1.4186   | -5.01        |\n",
      "  | 2.0  | 1.376512 | 11.919       |\n",
      "  | 4.0  | 1.1E+1   | 14.717624    |\n",
      "  |--------------------------------|\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Here is yet another table to test that we can handle more than\n",
      "one table:\n",
      "\n",
      "\n",
      "    time        velocity    acceleration  \n",
      "------------  ------------  ------------  \n",
      "0.0           1.4186        -5.01         \n",
      "1.0           1.376512      11.919        \n",
      "3.0           1.1E+1        14.717624     \n",
      "\n",
      "\n",
      "And one with math headings (that are expanded and must be treated\n",
      "accordingly) and verbatim heading and entry:\n",
      "\n",
      "\n",
      "   $i$        $h_i$     $\\bar T_i$    `L_i`     \n",
      "----------  ----------  ----------  ----------  \n",
      "0                    0         288     -0.0065  \n",
      "1               11,000         216         0.0  \n",
      "2               20,000         216       0.001  \n",
      "3               32,000         228      0.0028  \n",
      "4               47,000         270         0.0  \n",
      "5               51,000         270     -0.0028  \n",
      "6               71,000         214       `NaN`  \n",
      "\n",
      "\n",
      "And add one with verbatim headings (with underscores),\n",
      "and rows starting with `|-` because of a negative number,\n",
      "and `|` right after verbatim word (with no space):\n",
      "\n",
      "\n",
      "    exact          `v_1`      $a_i$ + `v_2`    `verb_3_`    \n",
      "-------------  -------------  -------------  -------------  \n",
      "            9           9.62           5.57           8.98  \n",
      "          -20         -23.39          -7.65         -19.93  \n",
      "           10          17.74          -4.50           9.96  \n",
      "            0          -9.19           4.13          -0.26  \n",
      "\n",
      "\n",
      "\n",
      "### A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2`\n",
      "\n",
      "*Files `my_file_v1.py` and `my_file_v2.py` define some math $a_{i-1}$.* Here is\n",
      "some text.\n",
      "\n",
      "### Bibliography test\n",
      "\n",
      "Here is an example: [Langtangen_Pedersen_2002] discussed propagation of\n",
      "large destructive water waves, [Langtangen_et_al_2002] gave\n",
      "an overview of numerical methods for solving the Navier-Stokes equations,\n",
      "while the use of Backward Kolmogorov equations for analyzing\n",
      "random vibrations was investigated in [Langtangen_1994a].\n",
      "The book chapter [Mardal_et_al_2003a] contains information on\n",
      "C++ software tools for programming multigrid methods. A real retro\n",
      "reference is [Langtangen_1988d] about a big FORTRAN package.\n",
      "Multiple references are also possible, e.g., see\n",
      "[Langtangen_Pedersen_2002] [Mardal_et_al_2003a].\n",
      "\n",
      "We need to cite more than 10 papers to reproduce an old formatting\n",
      "problem with blanks in the keys in reST format:\n",
      "[Langtangen_1992c] [Langtangen_1994a] [Mortensen_et_al_2011] [Langtangen_Pedersen_2002]\n",
      "and\n",
      "[Langtangen_et_al_2002] [Glimsdal_et_al_20006] [Rahman_et_al_2006b] [Haga_et_al_2011a] [Langtangen_2003a] [Langtangen_2008a] [Langtangen:95]\n",
      "and all the work of\n",
      "[Langtangen_2012] [Mardal_et_al_2003a] [Jeberg_et_al_2004] as well as\n",
      "old work [Langtangen_1988d] and [Langtangen_1989e], and the\n",
      "talk [Langtangen_talk_2007a].\n",
      "Langtangen also had two thesis [Langtangen:85] [Langtangen_1989e].\n",
      "More retro citations are\n",
      "the old ME-IN323 book [Langtangen:91] and the\n",
      "[Langtangen:94b] OONSKI '94 paper.\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Example 1: Examples can be typeset as exercises\n",
      "\n",
      "Examples can start with a subsection heading starting with `Example:`\n",
      "and then, with the command-line option `--examples_as_exercises` be\n",
      "typeset as exercises. This is useful if one has solution\n",
      "environments as part of the example.\n",
      "\n",
      "\n",
      "*a)* State some problem.\n",
      "\n",
      "*Solution.* The answer to this subproblem can be written here.\n",
      "\n",
      "*b)* State some other problem.\n",
      "\n",
      "*Hint 1.* A hint can be given.\n",
      "\n",
      "*Hint 2.* Maybe even another hint?\n",
      "\n",
      "*Solution.* The answer to this other subproblem goes here,\n",
      "maybe over multiple doconce input lines.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "### URLs\n",
      "\n",
      "Testing of URLs: hpl's home page [hpl](http://folk.uio.no/hpl), or\n",
      "the entire URL if desired, <http://folk.uio.no/hpl>.  Here is a\n",
      "plain file link <testdoc.do.txt>, or <testdoc.do.txt>, or\n",
      "<testdoc.do.txt> or <testdoc.do.txt> or [a link with\n",
      "newline](testdoc.do.txt). Can test spaces with the link with word\n",
      "too: [hpl](http://folk.uio.no/hpl) or [hpl](http://folk.uio.no/hpl). Also `file:///` works: [link to a\n",
      "file](file:///home/hpl/vc/doconce/doc/demos/manual/manual.html) is\n",
      "fine to have. Moreover, \"loose\" URLs work, i.e., no quotes, just\n",
      "the plain URL as in <http://folk.uio.no/hpl>, if followed by space, comma,\n",
      "colon, semi-colon, question mark, exclamation mark, but not a period\n",
      "(which gets confused with the periods inside the URL).\n",
      "\n",
      "Mail addresses can also be used: [`hpl@simula.no`](mailto:hpl@simula.no), or just a [mail link](mailto:hpl@simula.no), or a raw <mailto:hpl@simula.no>.\n",
      "\n",
      "Here are some tough tests of URLs, especially for the `latex` format:\n",
      "[Newton-Cotes](http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas) formulas\n",
      "and a [good book](http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1). Need to test\n",
      "Newton-Cotes with percentage in URL too:\n",
      "<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>\n",
      "and <http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae> which has a shebang.\n",
      "\n",
      "For the `--device=paper` option it is important to test that URLs with\n",
      "monofont link text get a footnote, as in this reference to\n",
      "[`decay_mod`](https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py).\n",
      "\n",
      "<!-- Comments should be inserted outside paragraphs (because in the rst -->\n",
      "<!-- format extra blanks make a paragraph break). -->\n",
      "\n",
      "<!-- Note that when there is no http: or file:, it can be a file link -->\n",
      "<!-- if the link name is URL, url, \"URL\", or \"url\". Such files should, -->\n",
      "<!-- if rst output is desired, but placed in a `_static*` folder. -->\n",
      "\n",
      "More tough tests: repeated URLs whose footnotes when using the\n",
      "`--device=paper` option must be correct. We have\n",
      "[google](http://google.com), [google](http://google.com), and\n",
      "[google](http://google.com), which should result in exactly three\n",
      "footnotes.\n",
      "\n",
      "\n",
      "\n",
      "### LaTeX Mathematics\n",
      "\n",
      "Here is an equation without label using backslash-bracket environment:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "a = b + c\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "or with number and label, as in Eq (my:eq1), using the equation environment:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\begin{equation}\n",
      "{\\partial u\\over\\partial t} = \\nabla^2 u \\label{my:eq1}\n",
      "\\end{equation}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "We can refer to this equation by Eq (my:eq1).\n",
      "\n",
      "Here is a system without equation numbers, using the align-astrisk environment:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\pmb{a} = \\pmb{q}\\times\\pmb{n}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "b = \\nabla^2 u + \\nabla^4 v\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "More mathematical typesetting is demonstrated in the coming exercises.\n",
      "\n",
      "Below, we have  [Problem 1: Flip a Coin](#n) and  [Project 1: Compute a Probability](#y),\n",
      "as well as  [Project 2: Explore Distributions of Random Circles](#s) and [Project 3: References to Project ref{demo:ex:2} in a heading works for ipynb](#b), and in\n",
      "between there we have  [Exercise 3: Make references to projects and problems](#s).\n",
      "\n",
      "## Exercises\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Problem 1: Flip a Coin\n",
      "\n",
      "<!-- keywords = random numbers; Monte Carlo simulation -->\n",
      "\n",
      "<!-- Torture tests -->\n",
      "\n",
      "Make a program that simulates flipping a coin $N$ times.\n",
      "Print out \"tail\" or \"head\" for each flip and\n",
      "let the program count the number of heads.\n",
      "\n",
      "\n",
      "<!-- Test syntax error -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "#### Remarks\n",
      "\n",
      "Remarks with such a subsubsection heading would previously mark\n",
      "the beginning of a new exercise and cause trouble. Maybe a list\n",
      "\n",
      "1. Mark 1.\n",
      "\n",
      "2. Mark 2.\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 1.* Use `r = random.random()` and define head as `r <= 0.5`.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 2.* Draw an integer among $\\{1,2\\}$ with\n",
      "`r = random.randint(1,2)` and define head when `r` is 1.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin answer of exercise --- -->\n",
      "*Answer.* If the `random.random()` function returns a number $<1/2$, let it be\n",
      "head, otherwise tail. Repeat this $N$ number of times.\n",
      "<!-- --- end answer of exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Code:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "import sys, random\n",
      "N = int(sys.argv[1])\n",
      "heads = 0\n",
      "for i in range(N):\n",
      "    r = random.random()\n",
      "    if r <= 0.5:\n",
      "        heads += 1\n",
      "print 'Flipping a coin %d times gave %d heads' % (N, heads)\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- end solution of exercise --- -->\n",
      "Filenames: `flip_coin.py`, `flip_coin.pdf`.\n",
      "<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "### Not an exercise\n",
      "\n",
      "Should be possible to stick a normal section in the middle of many\n",
      "exercises.\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Project 1: Compute a Probability\n",
      "\n",
      "<!-- Minimalistic exercise -->\n",
      "\n",
      "\n",
      "What is the probability of getting a number between 0.5 and 0.6 when\n",
      "drawing uniformly distributed random numbers from the interval $[0,1)$?\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint.* To answer this question empirically, let a program\n",
      "draw $N$ such random numbers using Python's standard `random` module,\n",
      "count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and\n",
      "compute the probability as $M/N$.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Project 2: Explore Distributions of Random Circles\n",
      "\n",
      "The formula for a circle is given by"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\begin{equation}\n",
      "x = x_0 + R\\cos 2\\pi t,\n",
      "\\end{equation}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\begin{equation}  \n",
      "y = y_0 + R\\sin 2\\pi t,\n",
      "\\end{equation}\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "where $R$ is the radius of the circle, $(x_0,y_0)$ is the\n",
      "center point, and $t$ is a parameter in the unit interval $[0,1]$.\n",
      "For any $t$, $(x,y)$ is a point on the circle.\n",
      "The formula can be used to generate `n` points on a circle:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "import numpy as np\n",
      "\n",
      "def circle(R, x0, y0, n=501):\n",
      "    t = np.linspace(0, 1, n)\n",
      "    x = x0 + R*np.cos(2*np.pi*t)\n",
      "    y = y0 + R*np.sin(2*np.pi*t)\n",
      "    return x, y\n",
      "\n",
      "x, y = circle(2.0, 0, 0)\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- Often in an exercise we have some comments about the solution -->\n",
      "<!-- which we normally want to keep where they are. -->\n",
      "\n",
      "The goal of this project is to draw $N$ circles with random\n",
      "center and radius. Plot each circle using the `circle` function\n",
      "above.\n",
      "\n",
      "\n",
      "*a)* Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint.* Use the `numpy.random` module to draw the\n",
      "$x_0$, $y_0$, and $R$ quantities.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin answer of exercise --- -->\n",
      "*Answer.* Here goes the short answer to part a).\n",
      "<!-- --- end answer of exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Here goes a full solution to part a).\n",
      "<!-- --- end solution of exercise --- -->\n",
      "\n",
      "*b)* Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.\n",
      "Filename: `norm.py`.\n",
      "\n",
      "*c)* Let $R$ and $(x_0,y_0)$ be normally distributed.\n",
      "\n",
      "Filename: `circles.pdf`.\n",
      "\n",
      "<!-- Closing remarks for this Project -->\n",
      "\n",
      "#### Remarks\n",
      "\n",
      "At the very end of the exercise it may be appropriate to summarize\n",
      "and give some perspectives.\n",
      "\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Exercise 1: Determine some Distance\n",
      "\n",
      "Intro to this exercise. Questions are in subexercises below.\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- No meaning in this weired test example: -->\n",
      "The text here belongs to the main (intro) part of the exercise. Need\n",
      "closing remarks to have text after subexercises.\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Here goes a full solution of the whole exercise.\n",
      "With some math $a=b$ in this solution:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\hbox{math in solution: } a = b\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "And code `a=b` in this solution:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "a = b  # code in solution\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "End of solution is here.\n",
      "<!-- --- end solution of exercise --- -->\n",
      "\n",
      "\n",
      "*a)* Subexercises are numbered a), b), etc.\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 1.* First hint to subexercise a).\n",
      "With math $a=b$ in hint:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "a=b.\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "And with code (in plain verbatim) returning $x+1$ in hint:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "def func(x):\n",
      "    return x + 1  # with code in hint\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 2.* Second hint to subexercise a).\n",
      "<!-- --- end hint in exercise --- -->\n",
      "Filename: `subexer_a.pdf`.\n",
      "\n",
      "\n",
      "<!-- --- begin answer of exercise --- -->\n",
      "*Answer.* Short answer to subexercise a).\n",
      "With math in answer: $a=b$.\n",
      "<!-- --- end answer of exercise --- -->\n",
      "\n",
      "*b)* Here goes the text for subexercise b).\n",
      "\n",
      "\n",
      "Some math $\\cos^2 x + \\sin^2 x = 1$ written one a single line:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\cos^2 x + \\sin^2 x = 1 \\thinspace .\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint.* A hint for this subexercise.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "Filename: `subexer_b.pdf`.\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Here goes the solution of this subexercise.\n",
      "<!-- --- end solution of exercise --- -->\n",
      "\n",
      "<!-- Closing remarks for this Exercise -->\n",
      "\n",
      "#### Remarks\n",
      "\n",
      "Some final closing remarks, e.g., summarizing the main findings\n",
      "and their implications in other problems can be made. These\n",
      "remarks will appear at the end of the typeset exercise.\n",
      "\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Some exercise without the \"Exercise:\" prefix\n",
      "\n",
      "<!-- Another minimalistic exercise -->\n",
      "\n",
      "Just some text. And some math saying that $e^0=1$ on a single line,\n",
      "to test that math block insertion is correct:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "$$\n",
      "\\exp{(0)} = 1\n",
      "$$"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "And a test that the code `lambda x: x+2` is correctly placed here:"
     ]
    },
    {
     "cell_type": "code",
     "collapsed": false,
     "input": [
      "lambda x: x+2\n"
     ],
     "language": "python",
     "metadata": {},
     "outputs": [],
     "prompt_number": 1
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Example 2: Just an example\n",
      "\n",
      "<!-- This example needs the --examples_as_exercises option, otherwise -->\n",
      "<!-- it is just typeset as it is written. -->\n",
      "\n",
      "\n",
      "*a)* What is the capital of Norway?\n",
      "\n",
      "*Answer.* Oslo.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "## Here goes another section\n",
      "\n",
      "With some text, before we continue with exercises.\n",
      "\n",
      "## More Exercises\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Exercise 3: Make references to projects and problems\n",
      "\n",
      "Pick a statement from  [Project 2: Explore Distributions of Random Circles](#s) or  [Problem 1: Flip a Coin](#n)\n",
      "and verify it.\n",
      "Filename: `verify_formula.py`.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Project 3: References to  [Project 1: Compute a Probability](#y) in a heading works for ipynb\n",
      "\n",
      "Refer to the previous exercise as  [Exercise 3: Make references to projects and problems](#s),\n",
      "the two before that as  [Project 1: Compute a Probability](#y) and [Project 2: Explore Distributions of Random Circles](#s),\n",
      "and this one as  [Project 3: References to Project ref{demo:ex:2} in a heading works for ipynb](#b).\n",
      "Filename: `selc_composed.pdf`.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "## References\n",
      "\n",
      "\n",
      "## Bibliography\n",
      "\n",
      " 1. \\label{Langtangen_Pedersen_2002} _H. P. Langtangen and G. Pedersen_. \n",
      "    Propagation of Large Destructive Waves,\n",
      "    *International Journal of Applied Mechanics and Engineering*,\n",
      "    7(1),\n",
      "    pp. 187-204,\n",
      "    2002.\n",
      "\n",
      " 2. \\label{Langtangen_et_al_2002} _H. P. Langtangen, K.-A. Mardal and R. Winther_. \n",
      "    Numerical Methods for Incompressible Viscous Flow,\n",
      "    *Advances in Water Resources*,\n",
      "    25,\n",
      "    pp. 1125-1146,\n",
      "    2002.\n",
      "\n",
      " 3. \\label{Langtangen_1994a} _H. P. Langtangen_. \n",
      "    Numerical Solution of First Passage Problems in Random Vibrations,\n",
      "    *SIAM Journal of Scientific and Statistical Computing*,\n",
      "    15,\n",
      "    pp. 997-996,\n",
      "    1994.\n",
      "\n",
      " 4. \\label{Mardal_et_al_2003a} _K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen_. \n",
      "    Software Tools for Multigrid Methods,\n",
      "    *Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming*,\n",
      "    edited by _H. P. Langtangen and A. Tveito_,\n",
      "    Springer,\n",
      "    2003.\n",
      "\n",
      " 5. \\label{Langtangen_1988d} _H. P. Langtangen_. \n",
      "    The FEMDEQS Program System,\n",
      "    *Department of Mathematics, University of Oslo*,\n",
      "    1989.\n",
      "\n",
      " 6. \\label{Langtangen_1992c} _H. P. Langtangen_. \n",
      "    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,\n",
      "    *SIAM Journal on Scientific Computing*,\n",
      "    13,\n",
      "    pp. 1394-1417,\n",
      "    1992.\n",
      "\n",
      " 7. \\label{Mortensen_et_al_2011} _M. Mortensen, H. P. Langtangen and G. N. Wells_. \n",
      "    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,\n",
      "    *Advances in Water Resources*,\n",
      "    34(9),\n",
      "    [doi: 10.1016/j.advwatres.2011.02.013](http://dx.doi.org/10.1016/j.advwatres.2011.02.013),\n",
      "    2011.\n",
      "\n",
      " 8. \\label{Glimsdal_et_al_20006} _S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\\ovholt_. \n",
      "    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,\n",
      "    *International Journal of Fluid Mechanics Research*,\n",
      "    33(1),\n",
      "    pp. 15-43,\n",
      "    2006.\n",
      "\n",
      " 9. \\label{Rahman_et_al_2006b} _S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen_. \n",
      "    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,\n",
      "    *Physical Review B: Condensed Matter and Materials Physics*,\n",
      "    74,\n",
      "    2006.\n",
      "\n",
      "10. \\label{Haga_et_al_2011a} _J. B. Haga, H. Osnes and H. P. Langtangen_. \n",
      "    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,\n",
      "    *International Journal of Analytical and Numerical Methods in Geomechanics*,\n",
      "    [doi: 10.1002/nag.1062](http://dx.doi.org/10.1002/nag.1062),\n",
      "    2011,\n",
      "    <http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract>.\n",
      "\n",
      "11. \\label{Langtangen_2003a} _H. P. Langtangen_. \n",
      "    *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,\n",
      "    Springer,\n",
      "    2003.\n",
      "\n",
      "12. \\label{Langtangen_2008a} _H. P. Langtangen_. \n",
      "    *Python Scripting for Computational Science*,\n",
      "    Springer,\n",
      "    2008.\n",
      "\n",
      "13. \\label{Langtangen:95} _H. P. Langtangen and G. Pedersen_. \n",
      "    Finite Elements for the Boussinesq Wave Equations,\n",
      "    Waves and Non-linear Processes in Hydrodynamics,\n",
      "    edited by _J. Grue, B. Gjevik and J. E. Weber_,\n",
      "    Kluwer Academic Publishers,\n",
      "    pp. pp. 117-126,\n",
      "    1995,\n",
      "    <http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310>.\n",
      "\n",
      "14. \\label{Langtangen_2012} _H. P. Langtangen_. \n",
      "    *A Primer on Scientific Programming With Python*,\n",
      "    Springer,\n",
      "    2012.\n",
      "\n",
      "15. \\label{Jeberg_et_al_2004} _P. V. Jeberg, H. P. Langtangen and C. B. Terp_. \n",
      "    Optimization With Diffpack: Practical Example From Welding,\n",
      "    *Simula Research Laboratory*,\n",
      "    2004.\n",
      "\n",
      "16. \\label{Langtangen_1989e} _H. P. Langtangen_. \n",
      "    Computational Methods for Two-Phase Flow in Oil Reservoirs,\n",
      "    Ph.D. Thesis,\n",
      "    Mechanics Division, Department of Mathematics, University of Oslo,\n",
      "    1989.\n",
      "\n",
      "17. \\label{Langtangen_talk_2007a} _H. P. Langtangen_. \n",
      "    Computational Modeling of Huge Tsunamis From Asteroid Impacts,\n",
      "    Invited keynote lecture at the \\emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,\n",
      "    2007.\n",
      "\n",
      "18. \\label{Langtangen:85} _H. P. Langtangen_. \n",
      "    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,\n",
      "    M.Sc. Thesis,\n",
      "    Mechanics Division, Department of Mathematics, University of Oslo,\n",
      "    1985.\n",
      "\n",
      "19. \\label{Langtangen:91} _H. P. Langtangen and A. Tveito_. \n",
      "    Numerical Methods in Continuum Mechanics,\n",
      "    *Center for Industrial Research*,\n",
      "    1991.\n",
      "\n",
      "20. \\label{Langtangen:94b} _H. P. Langtangen_. \n",
      "    Diffpack: Software for Partial Differential Equations,\n",
      "    *Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA*,\n",
      "    edited by _A. Vermeulen_,\n",
      "    1994.\n",
      "\n",
      "## Appendix: Just for testing; part I\n",
      "\n",
      "This is the first appendix.\n",
      "\n",
      "### A subsection within an appendix\n",
      "\n",
      "Some text.\n",
      "\n",
      "## Appendix: Just for testing; part II\n",
      "\n",
      "This is more stuff for an appendix.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "Without label.\n",
      "\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "With label.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "With label.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "Without label.\n",
      "\n",
      "!bnotice Tip\n",
      "Here is a tip or hint box, typeset as a notice box.\n",
      "!enotice\n",
      "\n",
      "\n",
      "\n",
      "Need a lot of text to surround the summary box.\n",
      "Version control systems allow you to record the history of files\n",
      "and share files among several computers and collaborators in a\n",
      "professional way. File changes on one computer are updated or\n",
      "merged with changes on another computer. Especially when working\n",
      "with programs or technical reports it is essential\n",
      "to have changes documented and to\n",
      "ensure that every computer and person involved in the project\n",
      "have the latest updates of the files.\n",
      "Greg Wilson' excellent [Script for Introduction to Version Control](http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/) provides a more detailed motivation why you will benefit greatly\n",
      "from using version control systems.\n",
      "\n",
      "!bsummary\n",
      "_Bold remark:_ Make some text with this summary.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "Much testing in this document, otherwise stupid content.\n",
      "!esummary\n",
      "\n",
      "Projects that you want to share among several computers or project\n",
      "workers are today most conveniently stored at some web site \"in the\n",
      "cloud\" and updated through communication with that site. I strongly\n",
      "recommend you to use such sites for all serious programming and\n",
      "scientific writing work - and all other important files.\n",
      "\n",
      "The simplest services for hosting project files are [Dropbox](http://dropbox.com) and [Google Drive](http://drive.google.com).\n",
      "It is very easy to get started with these systems, and they allow you\n",
      "to share files among laptops and mobile units with as many users as\n",
      "you want. The systems offer a kind of version control in that the\n",
      "files are stored frequently (several times per minute), and you can go\n",
      "back to previous versions for the last 30 days. However, it is\n",
      "challenging  to find the right version from the past when there are\n",
      "so many of them.\n",
      "\n",
      "More seriously, when several people may edit files simultaneously, it\n",
      "can be difficult detect who did what when, roll back to previous\n",
      "versions, and to manually merge the edits when these are\n",
      "incompatible. Then one needs more sophisticated tools than Dropbox or\n",
      "Google Drive: project hosting services with true version control\n",
      "systems.  The following text aims at providing you with the minimum\n",
      "information to started with such systems. Numerous other tutorials\n",
      "contain more comprehensive material and in-depth explanations of the\n",
      "concepts and tools.\n",
      "\n",
      "The idea with project hosting services is that you have the files\n",
      "associated with a project in the cloud. Many people may share these\n",
      "files.  Every time you want to work on the project you explicitly\n",
      "update your version of the files, edit the files as you like, and\n",
      "synchronize the files with the \"master version\" at the site where the\n",
      "project is hosted.  If you at some point need to go back to a\n",
      "version of the files at some particular point in the past,\n",
      "this is an easy operation. You can also use tools to see\n",
      "what various people have done with the files in the various versions.\n",
      "\n",
      "All these services are very similar. Below we describe how you get\n",
      "started with Bitbucket, GitHub, and Googlecode. Launchpad works very\n",
      "similarly to the latter three. All the project hosting services have\n",
      "excellent introductions available at their web sites, but the recipes\n",
      "below are much shorter and aim at getting you started as quickly as\n",
      "possible by concentrating on the most important need-to-know steps.\n",
      "The Git tutorials we refer to later in this document contain more\n",
      "detailed information and constitute of course very valuable readings\n",
      "when you use version control systems every day. The point now is\n",
      "to get started.\n",
      "\n",
      "\n",
      "### Appendix: Testing inline comments\n",
      "\n",
      "Projects that you want to share among several computers or project\n",
      "workers are today most conveniently stored at some web site \"in the\n",
      "cloud\" and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly\n",
      "recommend you to use such sites for all serious programming and\n",
      "scientific writing work - and all other important files.\n",
      "\n",
      "The simplest services for hosting project files is Dropbox. [mp 2: Simply go to <http://dropbox.com> and watch the video. It explains\n",
      "how files, like `myfile.py`, perhaps containing much math, like\n",
      "$\\partial u/\\partial t$, are easily communicated between machines.] It\n",
      "is very easy to get started with Dropbox, and it allows you to share\n",
      "files among laptops and mobile units.\n",
      "\n",
      "When several people may edit files simultaneously, it can be difficult\n",
      "detect who did what when, roll back to previous versions, and to\n",
      "manually merge the edits when these are incompatible. Then one needs\n",
      "more sophisticated tools than Dropbox: project hosting services with\n",
      "true version control systems.  [hpl 3: The following text aims at providing\n",
      "you with the minimum information to started with such\n",
      "systems. Numerous other tutorials contain more comprehensive material\n",
      "and in-depth explanations of the concepts and tools.]\n",
      "\n",
      "### Appendix: Testing headings ending with `verbatim inline`\n",
      "\n",
      "The point here is to test 1) `verbatim` code in headings, and 2)\n",
      "ending a heading with verbatim code as this triggers a special\n",
      "case in LaTeX."
     ]
    }
   ],
   "metadata": {}
  }
 ]
}

************** File: testdoc.tmp *****************

More text, with a reference back to Section ref{sec1} and further
to Section ref{subsubsec:ex}. idx{`somefunc` function}

# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

@@@CODE ../doc/manual/__testcode.f fromto: subroutine@
===== Project: Compute a Probability =====

# Minimalistic exercise

label{demo:ex:2}

What is the probability of getting a number between 0.5 and 0.6 when
Could not find match for from regex "\*\s+\$.+normally"

************** File: .testdoc.exerinfo *****************

# Information about all exercises in the file testdoc.do.txt.
# The information can be loaded into a Python list of dicts by
#
# f = open('.testdoc.exerinfo', 'r')
# exer = eval(f.read())
#
[{'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'Example',
  'no': 1,
  'solution': '',
  'solution_file': None,
  'subex': [{'answer': '',
             'file': None,
             'hints': [],
             'solution': 'The answer to this subproblem can be written here.',
             'text': 'State some problem.'},
            {'answer': '',
             'file': None,
             'hints': ['A hint can be given.', 'Maybe even another hint?'],
             'solution': 'The answer to this other subproblem goes here,\nmaybe over multiple doconce input lines.',
             'text': 'State some other problem.'}],
  'text': 'Examples can start with a subsection heading starting with `Example:`\nand then, with the command-line option `--examples_as_exercises` be\ntypeset as exercises. This is useful if one has solution\nenvironments as part of the example.',
  'title': 'Examples can be typeset as exercises',
  'type': 'Example',
  'type_visible': True},
 {'answer': 'If the `random.random()` function returns a number $<1/2$, let it be\nhead, otherwise tail. Repeat this $N$ number of times.',
  'closing_remarks': '',
  'file': ['flip_coin.py', 'flip_coin.pdf'],
  'heading': '=====',
  'hints': ['Use `r = random.random()` and define head as `r <= 0.5`.',
            'Draw an integer among $\\{1,2\\}$ with\n`r = random.randint(1,2)` and define head when `r` is 1.'],
  'keywords': ['random numbers', 'Monte Carlo simulation'],
  'label': 'demo:ex:1',
  'no': 1,
  'solution': "!bc pycod\nimport sys, random\nN = int(sys.argv[1])\nheads = 0\nfor i in range(N):\n    r = random.random()\n    if r <= 0.5:\n        heads += 1\nprint 'Flipping a coin %d times gave %d heads' % (N, heads)\n\n!ec",
  'solution_file': ['mysol.txt', 'mysol_flip_coin.py', 'yet_another.file'],
  'subex': [],
  'text': '# Torture tests\n\nMake a program that simulates flipping a coin $N$ times.\nPrint out "tail" or "head" for each flip and\nlet the program count the number of heads.\n\n\n# Test syntax error\n\n\n\n\n=== Remarks ===\n\nRemarks with such a subsubsection heading would previously mark\nthe beginning of a new exercise and cause trouble. Maybe a list\n\n o Mark 1.\n o Mark 2.',
  'title': 'Flip a Coin',
  'type': 'Problem',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': ["To answer this question empirically, let a program\ndraw $N$ such random numbers using Python's standard `random` module,\ncount how many of them, $M$, that fall in the interval $(0.5,0.6)$, and\ncompute the probability as $M/N$."],
  'keywords': None,
  'label': 'demo:ex:2',
  'no': 1,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': '# Minimalistic exercise\n\n\nWhat is the probability of getting a number between 0.5 and 0.6 when\ndrawing uniformly distributed random numbers from the interval $[0,1)$?',
  'title': 'Compute a Probability',
  'type': 'Project',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': 'At the very end of the exercise it may be appropriate to summarize\nand give some perspectives.',
  'file': ['circles.pdf'],
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'proj:circle1',
  'no': 2,
  'solution': '',
  'solution_file': None,
  'subex': [{'answer': 'Here goes the short answer to part a).',
             'file': None,
             'hints': ['Use the `numpy.random` module to draw the\n$x_0$, $y_0$, and $R$ quantities.'],
             'solution': 'Here goes a full solution to part a).',
             'text': 'Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.'},
            {'answer': '',
             'file': ['norm.py'],
             'hints': [],
             'solution': '',
             'text': 'Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.'},
            {'answer': '',
             'file': None,
             'hints': [],
             'solution': '',
             'text': 'Let $R$ and $(x_0,y_0)$ be normally distributed.'}],
  'text': 'The formula for a circle is given by\n\n!bt\n\\begin{equation}\nx = x_0 + R\\cos 2\\pi t,\n\\end{equation}\n\n!et\n\n!bt\n\\begin{equation}  \ny = y_0 + R\\sin 2\\pi t,\n\\end{equation}\n\n!et\nwhere $R$ is the radius of the circle, $(x_0,y_0)$ is the\ncenter point, and $t$ is a parameter in the unit interval $[0,1]$.\nFor any $t$, $(x,y)$ is a point on the circle.\nThe formula can be used to generate `n` points on a circle:\n\n!bc pypro\nimport numpy as np\n\ndef circle(R, x0, y0, n=501):\n    t = np.linspace(0, 1, n)\n    x = x0 + R*np.cos(2*np.pi*t)\n    y = y0 + R*np.sin(2*np.pi*t)\n    return x, y\n\nx, y = circle(2.0, 0, 0)\n\n!ec\n\n# Often in an exercise we have some comments about the solution\n# which we normally want to keep where they are.\n\nThe goal of this project is to draw $N$ circles with random\ncenter and radius. Plot each circle using the `circle` function\nabove.',
  'title': 'Explore Distributions of Random Circles',
  'type': 'Project',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': 'Some final closing remarks, e.g., summarizing the main findings\nand their implications in other problems can be made. These\nremarks will appear at the end of the typeset exercise.',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'exer:dist',
  'no': 1,
  'solution': 'Here goes a full solution of the whole exercise.\nWith some math $a=b$ in this solution:\n!bt\n\\[ \\hbox{math in solution: } a = b \\]\n\n!et\nAnd code `a=b` in this solution:\n!bc\na = b  # code in solution\n\n!ec \nEnd of solution is here.',
  'solution_file': None,
  'subex': [{'answer': 'Short answer to subexercise a).\nWith math in answer: $a=b$.',
             'file': ['subexer_a.pdf'],
             'hints': ['First hint to subexercise a).\nWith math $a=b$ in hint:\n\n19 <<<!!MATH_BLOCK\nAnd with code (in plain verbatim) returning $x+1$ in hint:\n\n16 <<<!!CODE_BLOCK',
                       'Second hint to subexercise a).'],
             'solution': '',
             'text': 'Subexercises are numbered a), b), etc.'},
            {'answer': '',
             'file': ['subexer_b.pdf'],
             'hints': ['A hint for this subexercise.'],
             'solution': 'Here goes the solution of this subexercise.',
             'text': 'Here goes the text for subexercise b).\n\n\nSome math $\\cos^2 x + \\sin^2 x = 1$ written one a single line:\n\n!bt\n\\[ \\cos^2 x + \\sin^2 x = 1 \\thinspace .\\]\n\n!et'}],
  'text': 'Intro to this exercise. Questions are in subexercises below.\n\n\n\n\n\n#  No meaning in this weired test example:\nThe text here belongs to the main (intro) part of the exercise. Need\nclosing remarks to have text after subexercises.',
  'title': 'Determine some Distance',
  'type': 'Exercise',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': None,
  'no': 2,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': '# Another minimalistic exercise\n\nJust some text. And some math saying that $e^0=1$ on a single line,\nto test that math block insertion is correct:\n\n!bt\n\\[ \\exp{(0)} = 1 \\]\n\n!et\n\nAnd a test that the code `lambda x: x+2` is correctly placed here:\n\n!bc\nlambda x: x+2\n\n!ec',
  'title': 'Some exercise without the "Exercise:" prefix',
  'type': 'Exercise',
  'type_visible': False},
 {'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': None,
  'no': 2,
  'solution': '',
  'solution_file': None,
  'subex': [{'answer': 'Oslo.',
             'file': None,
             'hints': [],
             'solution': '',
             'text': 'What is the capital of Norway?'}],
  'text': '# This example needs the --examples_as_exercises option, otherwise\n# it is just typeset as it is written.',
  'title': 'Just an example',
  'type': 'Example',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': ['verify_formula.py'],
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'exer:some:formula',
  'no': 3,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': 'Pick a statement from Project ref{proj:circle1} or Problem ref{demo:ex:1}\nand verify it.',
  'title': 'Make references to projects and problems',
  'type': 'Exercise',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': ['selc_composed.pdf'],
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'exer:you',
  'no': 3,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': 'Refer to the previous exercise as Exercise ref{exer:some:formula},\nthe two before that as Projects ref{demo:ex:2} and ref{proj:circle1},\nand this one as Project ref{exer:you}.',
  'title': 'References to Project ref{demo:ex:2} in a heading works for pandoc',
  'type': 'Project',
  'type_visible': True}]
************** File: tmp_encodings.txt *****************
iso-8859-1
iso-8859-1
iso-8859-1
iso-8859-1
iso-8859-1

************** File: testdoc_pnd_l2h.html *****************
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<p>The format of this document is plain, homemade LaTeX (from Doconce).</p>
<p>This is a document with many test constructions for doconce syntax. It was used heavily for the development and kept for testing numerous constructions, also special and less common cases.</p>
<p>And exactly for test purposes we have an extra line here, which is part of the abstract.</p>
<h1 id="section-1">Section 1</h1>
<p>[sec1]</p>
<p>Here is a nested list:</p>
<ul>
<li><p>item1</p></li>
<li><p>item2</p></li>
<li><p>item3 which continues on the next line to test that feature</p></li>
<li><p>and a sublist</p>
<ul>
<li><p>with indented subitem1</p></li>
<li><p>and a subitem2</p></li>
</ul></li>
<li><p>and perhaps an ordered sublist</p>
<ol style="list-style-type: decimal">
<li><p>first item</p></li>
<li><p>second item, continuing on a new line</p></li>
</ol></li>
</ul>
<blockquote>
<p>Here are two lines that make up a block quote.</p>
</blockquote>
<h2 id="subsection-1">Subsection 1</h2>
<p>More text, with a reference back to Section [sec1] and further to Section [subsubsec:ex].</p>
<p>Let’s do some copying from files too. First from subroutine up to the very end,</p>
<pre><code>subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return</code></pre>
<p>and then just the subroutine,</p>
<pre><code>      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return</code></pre>
<p>and finally the complete file:</p>
<pre><code>C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return</code></pre>
<p>Testing other code environments. First Python:</p>
<pre><code>!bc pycod
def f(x):
    return x+1
!ec</code></pre>
<p>which gets rendered as</p>
<pre><code>def f(x):
    return x+1</code></pre>
<p>Now a complete program to be shown via Python Online Tutorial:</p>
<pre><code>def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v</code></pre>
<p>(<a href="{http://pythontutor.com/visualize.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&amp;mode=display&amp;cumulative=false&amp;heapPrimitives=false&amp;drawParentPointers=false&amp;textReferences=false&amp;py=2&amp;curInstr=0}">Visualize execution</a>)</p>
<p>Then Cython:</p>
<pre><code>cpdef f(double x):
    return x + 1</code></pre>
<p>C++:</p>
<pre><code>#include &lt;iostream&gt;

int main()
{
   std::cout &lt;&lt; &quot;Sample output&quot; &lt;&lt; std::endl;
   return 0
}</code></pre>
<p>And a little bit of Fortran:</p>
<pre><code>!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec</code></pre>
<p>which then is typeset as</p>
<pre><code>subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end</code></pre>
<p>HTML:</p>
<pre><code>&lt;table&gt;
&lt;tr&gt;&lt;td&gt;Column 1&lt;/td&gt;&lt;td&gt;Column 2&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;0.67526 &lt;/td&gt;&lt;td&gt;0.92871 &lt;/td&gt;&lt;/tr&gt;
&lt;!-- comment --&gt;
&lt;/table&gt;</code></pre>
<p>System call:</p>
<pre><code>Terminal&gt; mkdir test
Terminal&gt; cd test
Terminal&gt; myprog -f
output1
output2</code></pre>
<p>It is time to test <code>verbatim inline font</code> especially with <code>a newline inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The exclamation mark inside the verbatim text is not smart for latex as we use ! in the <code>verb</code> typesetting... Also test backslashes like <code>\begin</code> and <code>\end</code> in inline verbatim text.</p>
<p>Here is some color and an attempt to write Some formats will only display this correctly when HTML is the output format.</p>
<h2 id="subsection-2-testing-figures-and-movies">Subsection 2: Testing figures and movies</h2>
<p>[subsec:ex]</p>
<p>Test of figures. In particular we refer to Figure [fig:impact] in which there is a flow.</p>
<p>[ht]</p>
<div class="figure">
<embed src="../doc/manual/figs/streamtubes.eps" /><p class="caption">image</p>
</div>
<p>Figures without captions are allowed and will be inlined.</p>
<div class="figure">
<embed src="../doc/manual/figs/streamtubes.eps" /><p class="caption">image</p>
</div>
<h4 id="test-of-movies.">Test of movies.</h4>
<p>Movie [mov:tsunami] shows a tsunami.</p>
<p>[ht]</p>
<p>Test empty caption (for inline movie):</p>
<p>(Movie ../doc/manual/figs/wavepacket.mpeg: play <a href="{wavepacket.html}"></a>)</p>
<p>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). [mymov] (Movie of files <code>../doc/manual/figs/wavepacket_*.png</code> in <a href="{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}"></a>)</p>
<p>Movies can be uploaded to YouTube and embedded as HTML or as a link. <a href="{http://www.youtube.com/watch?v=_O7iUiftbKU}"></a></p>
<p>Computational fluid dynamics movie. <a href="{http://vimeo.com/55562330}"></a></p>
<p>Here is figure [myfig] with a long multi-line caption and an extra space before the FIGURE keyword.</p>
<p>[ht]</p>
<div class="figure">
<embed src="../doc/manual/figs/wavepacket_0001.eps" /><p class="caption">image</p>
</div>
<div class="figure">
<img src="downloaded_figures/f_plot.png" alt="image" /><p class="caption">image</p>
</div>
<h2 id="the-theta-parameter-not-nabla">The <span class="math">\(\theta\)</span> parameter (not <span class="math">\(\nabla\)</span>?)</h2>
<p>[decay:sec:theta]</p>
<p>Functions do not always need to be advanced, here is one involving <span class="math">\(\theta\)</span>:</p>
<pre><code>def f(theta):
    return theta**2</code></pre>
<h4 id="more-on-theta.">More on <span class="math">\(\theta\)</span>.</h4>
<p>Here is more text following headline with math.</p>
<p>Newcommands must also be tested in this : <span class="math">\(\half\)</span>, <span class="math">\(\halfi\)</span>, <span class="math">\(\x\)</span>, <span class="math">\(\Ddt{u}\)</span>, both inline and in block:</p>
<p><span class="math">\[\begin{aligned}
\Ddt{u} &amp;= 0
\\ 
\half &amp;= \halfi\\ 
\half\x &amp;= \normalvec\end{aligned}\]</span></p>
<p>Or with align with label and numbers:</p>
<p><span class="math">\[\begin{aligned}
\Ddt{u} &amp;= 0
\label{aligneq1}\\ 
\half &amp;= \halfi\\ 
\half\x &amp;= \normalvec
\label{aligneq2}\end{aligned}\]</span></p>
<h2 id="custom-environments">Custom Environments</h2>
<p>Here is an attempt to create a theorem environment via Mako (for counting theorems) and comment lines to help replacing lines in the <code>.tex</code> by proper begin-end LaTeX environments for theorems. Should look nice in most formats!</p>
<p>[theorem:fundamental1]</p>
<h4 id="theorem-5.">Theorem 5.</h4>
<p>Let <span class="math">\(a=1\)</span> and <span class="math">\(b=2\)</span>. Then <span class="math">\(c=3\)</span>.</p>
<h4 id="proof.">Proof.</h4>
<p>Since <span class="math">\(c=a+b\)</span>, the result follows from straightforward addition. <span class="math">\(\Diamond\)</span></p>
<p>As we see, the proof of Theorem 5 is a modest achievement.</p>
<h2 id="tables">Tables</h2>
<p>[subsec:table]</p>
<p>Let us take this table from the manual:</p>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">0.0</td>
<td align="left">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="left">2.0</td>
<td align="left">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="left">4.0</td>
<td align="left">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>The Doconce source code reads</p>
</blockquote>
<pre><code>|--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|</code></pre>
<p>Here is yet another table to test that we can handle more than one table:</p>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">0.0</td>
<td align="left">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="left">1.0</td>
<td align="left">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="left">3.0</td>
<td align="left">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>And one with math headings (that are expanded and must be treated accordingly) and verbatim heading and entry:</p>
</blockquote>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="left">0</td>
<td align="left">288</td>
<td align="left">-0.0065</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">11,000</td>
<td align="left">216</td>
<td align="left">0.0</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">20,000</td>
<td align="left">216</td>
<td align="left">0.001</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">32,000</td>
<td align="left">228</td>
<td align="left">0.0028</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="left">47,000</td>
<td align="left">270</td>
<td align="left">0.0</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="left">51,000</td>
<td align="left">270</td>
<td align="left">-0.0028</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="left">71,000</td>
<td align="left">214</td>
<td align="left"><code>NaN</code></td>
</tr>
</tbody>
</table>
<p>And add one with verbatim headings (with underscores), and rows starting with <code>|-</code> because of a negative number, and <code>|</code> right after verbatim word (with no space):</p>
</blockquote>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">9</td>
<td align="left">9.62</td>
<td align="left">5.57</td>
<td align="left">8.98</td>
</tr>
<tr class="even">
<td align="left">-20</td>
<td align="left">-23.39</td>
<td align="left">-7.65</td>
<td align="left">-19.93</td>
</tr>
<tr class="odd">
<td align="left">10</td>
<td align="left">17.74</td>
<td align="left">-4.50</td>
<td align="left">9.96</td>
</tr>
<tr class="even">
<td align="left">0</td>
<td align="left">-9.19</td>
<td align="left">4.13</td>
<td align="left">-0.26</td>
</tr>
</tbody>
</table>
<h2>A test of verbatim words in heading with subscript <span class="math">\(a_i\)</span>: <code>my\_file\_v1</code> and <code>my\_file\_v2</code></h2>
</blockquote>
<h4 id="files-my_file_v1.py-and-my_file_v2.py-define-some-math-a_i-1.">Files <code>my\_file\_v1.py</code> and <code>my\_file\_v2.py</code> define some math <span class="math">\(a_{i-1}\)</span>.</h4>
<p>Here is some text.</p>
<h2 id="bibliography-test">Bibliography test</h2>
<p>Here is an example:  discussed propagation of large destructive water waves,  gave an overview of numerical methods for solving the Navier-Stokes equations, while the use of Backward Kolmogorov equations for analyzing random vibrations was investigated in . The book chapter  contains information on C++ software tools for programming multigrid methods. A real retro reference is  about a big FORTRAN package. Multiple references are also possible, e.g., see .</p>
<p>We need to cite more than 10 papers to reproduce an old formatting problem with blanks in the keys in reST format:  and  and all the work of  as well as old work  and , and the talk . Langtangen also had two thesis . More retro citations are the old ME-IN323 book  and the  OONSKI ’94 paper.</p>
<h2 id="example-1-examples-can-be-typeset-as-exercises">Example 1: Examples can be typeset as exercises</h2>
<p>[Example]</p>
<p>Examples can start with a subsection heading starting with <code>Example:</code> and then, with the command-line option <code>--examples_as_exercises</code> be typeset as exercises. This is useful if one has solution environments as part of the example.</p>
<h4 id="a">a)</h4>
<p>State some problem.</p>
<h4 id="solution.">Solution.</h4>
<p>The answer to this subproblem can be written here.</p>
<h4 id="b">b)</h4>
<p>State some other problem.</p>
<h4 id="hint-1.">Hint 1.</h4>
<p>A hint can be given.</p>
<h4 id="hint-2.">Hint 2.</h4>
<p>Maybe even another hint?</p>
<h4 id="solution.-1">Solution.</h4>
<p>The answer to this other subproblem goes here, maybe over multiple doconce input lines.</p>
<h2 id="urls">URLs</h2>
<p>[subsubsec:ex]</p>
<p>Testing of URLs: hpl’s home page <a href="{http://folk.uio.no/hpl}">hpl</a>, or the entire URL if desired, <a href="{http://folk.uio.no/hpl}"></a>. Here is a plain file link <a href="{testdoc.do.txt}"></a>, or <a href="{testdoc.do.txt}"></a>, or <a href="{testdoc.do.txt}"></a> or <a href="{testdoc.do.txt}"></a> or <a href="{testdoc.do.txt}">a link with newline</a>. Can test spaces with the link with word too: <a href="{http://folk.uio.no/hpl}">hpl</a> or <a href="{http://folk.uio.no/hpl}">hpl</a>. Also <code>file:///</code> works: <a href="{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html}">link to a file</a> is fine to have. Moreover, &quot;loose&quot; URLs work, i.e., no quotes, just the plain URL as in <a href="{http://folk.uio.no/hpl}"></a>, if followed by space, comma, colon, semi-colon, question mark, exclamation mark, but not a period (which gets confused with the periods inside the URL).</p>
<p>Mail addresses can also be used: <a href="{mailto:hpl@simula.no}"></a>, or just a <a href="{mailto:hpl@simula.no}">mail link</a>, or a raw <a href="{mailto:hpl@simula.no}"></a>.</p>
<p>Here are some tough tests of URLs, especially for the <code>latex</code> format: <a href="{http://en.wikipedia.org/wiki/NewtonCotes_formulas}">Newton-Cotes</a> formulas and a <a href="{http://www.springer.com/mathematics/computational+scienceengineering/book/978-3-642-23098-1}">good book</a>. Need to test Newton-Cotes with percentage in URL too: <a href="{http://en.wikipedia.org/wiki/NewtonCotes_formulas}"></a> and <a href="{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}"></a> which has a shebang.</p>
<p>For the <code>--device=paper</code> option it is important to test that URLs with monofont link text get a footnote, as in this reference to <a href="{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py}"></a>.</p>
<p>More tough tests: repeated URLs whose footnotes when using the <code>--device=paper</code> option must be correct. We have <a href="{http://google.com}">google</a>, <a href="{http://google.com}">google</a>, and <a href="{http://google.com}">google</a>, which should result in exactly three footnotes.</p>
<h2 id="test-of-some-latex-fixes">Test of Some LaTeX Fixes</h2>
<p>Let’s check abbr. of some common kind, e.g. the well-known i.e. expression as an example. Moreover, Dr. Tang and Prof. Monsen, or maybe also prof. Ting, will go to the Dept. of Science to test how Mr. Hansen is doing together with Ms. Larsen. A reference like Sec. [subsubsec:ex] or Ch. [subsubsec:ex], or even App. [subsubsec:ex], must also be handled. Likewise, this is test no. <span class="math">\(i\)</span> of Doconce features. A sentence containing &quot;refines lines&quot; could easily fool a regex substitution with only i.e. since the dot matches anything. Also, look at Fig. 4 to see how the data compares with Tab. [mytab].</p>
<h2 id="latex-mathematics">LaTeX Mathematics</h2>
<p>Here is an equation without label using backslash-bracket environment: <span class="math">\[a = b + c\]</span> or with number and label, as in ([my:eq1]), using the equation environment:</p>
<p><span class="math">\[{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}\]</span></p>
<p>We can refer to this equation by ([my:eq1]).</p>
<p>Here is a system without equation numbers, using the align-astrisk environment:</p>
<p><span class="math">\[\begin{aligned}
\pmb{a} &amp;= \pmb{q}\times\pmb{n} \\ 
b &amp;= \nabla^2 u + \nabla^4 v\end{aligned}\]</span></p>
<p>And here is a system of equations with labels in an align environment:</p>
<p><span class="math">\[\begin{aligned}
a &amp;= q + 4 + 5+ 6 \label{eq1} \\ 
b &amp;= \nabla^2 u + \nabla^4 x \label{eq2}\end{aligned}\]</span></p>
<p>We can refer to ([eq1])-([eq2]). They are a bit simpler than the Navier-Stokes equations. And test LaTeX hyphen in <code>CG-2</code>. Also test <span class="math">\(a_{i-j}\)</span> as well as <span class="math">\(kx-wt\)</span>.</p>
<p>Many of the next environments will fail in non-latex formats. Testing multiline:</p>
<p><span class="math">\[\begin{gathered}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}\end{gathered}\]</span></p>
<p>Testing split:</p>
<p><span class="math">\[\label{split:envir:eq}
\begin{split}
a = b = q &amp;+ \\ 
  &amp; f + \nabla\cdot\nabla u
\end{split}\]</span></p>
<p>We can refer to the last equation by ([split:envir:eq]).</p>
<p>Testing gather:</p>
<p><span class="math">\[\begin{gathered}
a = b \\ 
c = d + 7 + 9\end{gathered}\]</span></p>
<p>Testing alignat:</p>
<p><span class="math">\[\begin{aligned}
{2}
a &amp;= q + 4 + 5+ 6\qquad &amp; \mbox{for } q\geq 0 \label{eq1a} \\ 
b &amp;= \nabla^2 u + \nabla^4 x &amp; x\in\Omega \label{eq2a}\end{aligned}\]</span></p>
<p>Let us refer to ([eq1])-([eq2]) again, and to the alignat variant ([eq1a])-([eq2a]), and to ([my:eq1]).</p>
<p>Testing eqnarray:</p>
<p><span class="math">\[\begin{aligned}
{\partial u\over\partial t} &amp;=&amp; \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &amp;=&amp; \nabla\cdot(q(u)\nabla v) + g \label{myeq2}\end{aligned}\]</span></p>
<p>More mathematical typesetting is demonstrated in the coming exercises.</p>
<p>Below, we have Problem [demo:ex:1] and Project [demo:ex:2], as well as Projects [proj:circle1] and [exer:you], and in between there we have Exercise [exer:some:formula].</p>
<h1 id="exercises">Exercises</h1>
<h2 id="problem-1-flip-a-coin">Problem 1: Flip a Coin</h2>
<p>[demo:ex:1]</p>
<p>Make a program that simulates flipping a coin <span class="math">\(N\)</span> times. Print out &quot;tail&quot; or &quot;head&quot; for each flip and let the program count the number of heads.</p>
<h4 id="remarks.">Remarks.</h4>
<p>Remarks with such a subsubsection heading would previously mark the beginning of a new exercise and cause trouble. Maybe a list</p>
<ol style="list-style-type: decimal">
<li><p>Mark 1.</p></li>
<li><p>Mark 2.</p></li>
</ol>
<h4 id="hint-1.-1">Hint 1.</h4>
<p>Use <code>r = random.random()</code> and define head as <code>r &lt;= 0.5</code>.</p>
<h4 id="hint-2.-1">Hint 2.</h4>
<p>Draw an integer among <span class="math">\(\{1,2\}\)</span> with <code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.</p>
<h4 id="answer.">Answer.</h4>
<p>If the <code>random.random()</code> function returns a number <span class="math">\(&lt;1/2\)</span>, let it be head, otherwise tail. Repeat this <span class="math">\(N\)</span> number of times.</p>
<h4 id="solution.-2">Solution.</h4>
<p>Code:</p>
<pre><code>import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r &lt;= 0.5:
        heads += 1
print &#39;Flipping a coin %d times gave %d heads&#39; % (N, heads)</code></pre>
<p>Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.</p>
<h2 id="not-an-exercise">Not an exercise</h2>
<p>Should be possible to stick a normal section in the middle of many exercises.</p>
<h2 id="project-1-compute-a-probability">Project 1: Compute a Probability</h2>
<p>[demo:ex:2]</p>
<p>What is the probability of getting a number between 0.5 and 0.6 when drawing uniformly distributed random numbers from the interval <span class="math">\([0,1)\)</span>?</p>
<h4 id="hint.">Hint.</h4>
<p>To answer this question empirically, let a program draw <span class="math">\(N\)</span> such random numbers using Python’s standard <code>random</code> module, count how many of them, <span class="math">\(M\)</span>, that fall in the interval <span class="math">\((0.5,0.6)\)</span>, and compute the probability as <span class="math">\(M/N\)</span>.</p>
<h2 id="project-2-explore-distributions-of-random-circles">Project 2: Explore Distributions of Random Circles</h2>
<p>[proj:circle1]</p>
<p>The formula for a circle is given by</p>
<p><span class="math">\[\begin{aligned}
x &amp;= x_0 + R\cos 2\pi t,\\ 
y &amp;= y_0 + R\sin 2\pi t,\end{aligned}\]</span></p>
<p>where <span class="math">\(R\)</span> is the radius of the circle, <span class="math">\((x_0,y_0)\)</span> is the center point, and <span class="math">\(t\)</span> is a parameter in the unit interval <span class="math">\([0,1]\)</span>. For any <span class="math">\(t\)</span>, <span class="math">\((x,y)\)</span> is a point on the circle. The formula can be used to generate <code>n</code> points on a circle:</p>
<pre><code>import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)</code></pre>
<p>The goal of this project is to draw <span class="math">\(N\)</span> circles with random center and radius. Plot each circle using the <code>circle</code> function above.</p>
<h4 id="a-1">a)</h4>
<p>Let <span class="math">\(R\)</span> be normally distributed and <span class="math">\((x_0,y_0)\)</span> uniformly distributed.</p>
<h4 id="hint.-1">Hint.</h4>
<p>Use the <code>numpy.random</code> module to draw the <span class="math">\(x_0\)</span>, <span class="math">\(y_0\)</span>, and <span class="math">\(R\)</span> quantities.</p>
<h4 id="answer.-1">Answer.</h4>
<p>Here goes the short answer to part a).</p>
<h4 id="solution.-3">Solution.</h4>
<p>Here goes a full solution to part a).</p>
<h4 id="b-1">b)</h4>
<p>Let <span class="math">\(R\)</span> be uniformly distributed and <span class="math">\((x_0,y_0)\)</span> normally distributed. Filename: <code>norm.py</code>.</p>
<h4 id="c">c)</h4>
<p>Let <span class="math">\(R\)</span> and <span class="math">\((x_0,y_0)\)</span> be normally distributed.</p>
<p>Filename: <code>circles.pdf</code>.</p>
<h4 id="remarks.-1">Remarks.</h4>
<p>At the very end of the exercise it may be appropriate to summarize and give some perspectives.</p>
<h2 id="exercise-1-determine-some-distance">Exercise 1: Determine some Distance</h2>
<p>[exer:dist]</p>
<p>Intro to this exercise. Questions are in subexercises below.</p>
<p>The text here belongs to the main (intro) part of the exercise. Need closing remarks to have text after subexercises.</p>
<h4 id="solution.-4">Solution.</h4>
<p>Here goes a full solution of the whole exercise. With some math <span class="math">\(a=b\)</span> in this solution: <span class="math">\[\hbox{math in solution: } a = b\]</span> And code <code>a=b</code> in this solution:</p>
<pre><code>a = b  # code in solution</code></pre>
<p>End of solution is here.</p>
<h4 id="a-2">a)</h4>
<p>Subexercises are numbered a), b), etc.</p>
<h4 id="hint-1.-2">Hint 1.</h4>
<p>First hint to subexercise a). With math <span class="math">\(a=b\)</span> in hint:</p>
<p><span class="math">\[a=b.\]</span> And with code (in plain verbatim) returning <span class="math">\(x+1\)</span> in hint:</p>
<pre><code>def func(x):
    return x + 1  # with code in hint</code></pre>
<h4 id="hint-2.-2">Hint 2.</h4>
<p>Second hint to subexercise a). Filename: <code>subexer_a.pdf</code>.</p>
<h4 id="answer.-2">Answer.</h4>
<p>Short answer to subexercise a). With math in answer: <span class="math">\(a=b\)</span>.</p>
<h4 id="b-2">b)</h4>
<p>Here goes the text for subexercise b).</p>
<p>Some math <span class="math">\(\cos^2 x + \sin^2 x = 1\)</span> written one a single line:</p>
<p><span class="math">\[\cos^2 x + \sin^2 x = 1 \thinspace .\]</span></p>
<h4 id="hint.-2">Hint.</h4>
<p>A hint for this subexercise. Filename: <code>subexer_b.pdf</code>.</p>
<h4 id="solution.-5">Solution.</h4>
<p>Here goes the solution of this subexercise.</p>
<h4 id="remarks.-2">Remarks.</h4>
<p>Some final closing remarks, e.g., summarizing the main findings and their implications in other problems can be made. These remarks will appear at the end of the typeset exercise.</p>
<h2 id="some-exercise-without-the-exercise-prefix">Some exercise without the &quot;Exercise:&quot; prefix</h2>
<p>Just some text. And some math saying that <span class="math">\(e^0=1\)</span> on a single line, to test that math block insertion is correct:</p>
<p><span class="math">\[\exp{(0)} = 1\]</span></p>
<p>And a test that the code <code>lambda x: x+2</code> is correctly placed here:</p>
<pre><code>lambda x: x+2</code></pre>
<h2 id="example-2-just-an-example">Example 2: Just an example</h2>
<h4 id="a-3">a)</h4>
<p>What is the capital of Norway?</p>
<h4 id="answer.-3">Answer.</h4>
<p>Oslo.</p>
<h1 id="here-goes-another-section">Here goes another section</h1>
<p>With some text, before we continue with exercises.</p>
<h1 id="more-exercises">More Exercises</h1>
<h2 id="exercise-3-make-references-to-projects-and-problems">Exercise 3: Make references to projects and problems</h2>
<p>[exer:some:formula]</p>
<p>Pick a statement from Project [proj:circle1] or Problem [demo:ex:1] and verify it. Filename: <code>verify_formula.py</code>.</p>
<h2 id="project-3-references-to-projectdemoex2-in-a-heading-works-for-latex">Project 3: References to Project [demo:ex:2] in a heading works for latex</h2>
<p>[exer:you]</p>
<p>Refer to the previous exercise as Exercise [exer:some:formula], the two before that as Projects [demo:ex:2] and [proj:circle1], and this one as Project [exer:you]. Filename: <code>selc_composed.pdf</code>.</p>
<h1 id="just-for-testing-part-i">Just for testing; part I</h1>
<p>This is the first appendix.</p>
<h2 id="a-subsection-within-an-appendix">A subsection within an appendix</h2>
<p>Some text.</p>
<h1 id="just-for-testing-part-ii">Just for testing; part II</h1>
<p>This is more stuff for an appendix.</p>
<h2 id="appendix-testing-identical-titles">Appendix: Testing identical titles</h2>
<p>Without label.</p>
<h2 id="appendix-testing-identical-titles-1">Appendix: Testing identical titles</h2>
<p>[test:title:id1]</p>
<p>With label.</p>
<h2 id="appendix-testing-identical-titles-2">Appendix: Testing identical titles</h2>
<p>[test:title:id2]</p>
<p>With label.</p>
<h2 id="appendix-testing-identical-titles-3">Appendix: Testing identical titles</h2>
<p>Without label.</p>
<p>[Tip.] Here is a tip or hint box, typeset as a notice box.</p>
<p>Need a lot of text to surround the summary box. Version control systems allow you to record the history of files and share files among several computers and collaborators in a professional way. File changes on one computer are updated or merged with changes on another computer. Especially when working with programs or technical reports it is essential to have changes documented and to ensure that every computer and person involved in the project have the latest updates of the files. Greg Wilson’ excellent <a href="{http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/}">Script for Introduction to Version Control</a> provides a more detailed motivation why you will benefit greatly from using version control systems.</p>
<p>[Summary.] <strong>Bold remark:</strong> Make some text with this summary. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content.</p>
<p>Projects that you want to share among several computers or project workers are today most conveniently stored at some web site &quot;in the cloud&quot; and updated through communication with that site. I strongly recommend you to use such sites for all serious programming and scientific writing work - and all other important files.</p>
<p>The simplest services for hosting project files are <a href="{http://dropbox.com}">Dropbox</a> and <a href="{http://drive.google.com}">Google Drive</a>. It is very easy to get started with these systems, and they allow you to share files among laptops and mobile units with as many users as you want. The systems offer a kind of version control in that the files are stored frequently (several times per minute), and you can go back to previous versions for the last 30 days. However, it is challenging to find the right version from the past when there are so many of them.</p>
<p>More seriously, when several people may edit files simultaneously, it can be difficult detect who did what when, roll back to previous versions, and to manually merge the edits when these are incompatible. Then one needs more sophisticated tools than Dropbox or Google Drive: project hosting services with true version control systems. The following text aims at providing you with the minimum information to started with such systems. Numerous other tutorials contain more comprehensive material and in-depth explanations of the concepts and tools.</p>
<p>The idea with project hosting services is that you have the files associated with a project in the cloud. Many people may share these files. Every time you want to work on the project you explicitly update your version of the files, edit the files as you like, and synchronize the files with the &quot;master version&quot; at the site where the project is hosted. If you at some point need to go back to a version of the files at some particular point in the past, this is an easy operation. You can also use tools to see what various people have done with the files in the various versions.</p>
<p>All these services are very similar. Below we describe how you get started with Bitbucket, GitHub, and Googlecode. Launchpad works very similarly to the latter three. All the project hosting services have excellent introductions available at their web sites, but the recipes below are much shorter and aim at getting you started as quickly as possible by concentrating on the most important need-to-know steps. The Git tutorials we refer to later in this document contain more detailed information and constitute of course very valuable readings when you use version control systems every day. The point now is to get started.</p>
<h2 id="appendix-testing-inline-comments">Appendix: Testing inline comments</h2>
<p>Projects that you want to share among several computers or project workers are today most conveniently stored at some web site &quot;in the cloud&quot; and updated through communication with that site. <strong>hpl 1</strong>: * not sure if in the cloud is understood by all. * I strongly recommend you to use such sites for all serious programming and scientific writing work - and all other important files.</p>
<p>The simplest services for hosting project files is Dropbox. <strong>mp 2</strong>: * Simply go to <a href="{http://dropbox.com}"></a> and watch the video. It explains how files, like <code>myfile.py</code>, perhaps containing much math, like <span class="math">\(\partial u/\partial t\)</span>, are easily communicated between machines. * It is very easy to get started with Dropbox, and it allows you to share files among laptops and mobile units.</p>
<p>When several people may edit files simultaneously, it can be difficult detect who did what when, roll back to previous versions, and to manually merge the edits when these are incompatible. Then one needs more sophisticated tools than Dropbox: project hosting services with true version control systems. <strong>hpl 3</strong>: * The following text aims at providing you with the minimum information to started with such systems. Numerous other tutorials contain more comprehensive material and in-depth explanations of the concepts and tools. *</p>
<h2 id="appendix-testing-headings-ending-with-verbatim-inline">Appendix: Testing headings ending with <code>verbatim inline</code></h2>
<p>The point here is to test 1) <code>verbatim</code> code in headings, and 2) ending a heading with verbatim code as this triggers a special case in LaTeX.</p>
</body>
</html>
pandoc 1.10.1
Compiled with citeproc-hs 0.3.6, texmath 0.6.0.6, highlighting-kate 0.5.1.
Syntax highlighting is supported for the following languages:
    Actionscript, Ada, Alert, Alert_indent, Apache, Asn1, Asp, Awk, Bash,
    Bibtex, Boo, C, Changelog, Clojure, Cmake, Coffeescript, Coldfusion,
    Commonlisp, Cpp, Cs, Css, D, Diff, Djangotemplate, Doxygen, Dtd, Eiffel,
    Email, Erlang, Fortran, Fsharp, Gnuassembler, Go, Haskell, Haxe, Html, Ini,
    Java, Javadoc, Javascript, Json, Jsp, Latex, Lex, LiterateHaskell, Lua,
    Makefile, Mandoc, Matlab, Maxima, Metafont, Mips, Modula2, Modula3,
    Monobasic, Nasm, Noweb, Objectivec, Objectivecpp, Ocaml, Octave, Pascal,
    Perl, Php, Pike, Postscript, Prolog, Python, R, Relaxngcompact, Rhtml, Ruby,
    Scala, Scheme, Sci, Sed, Sgml, Sql, SqlMysql, SqlPostgresql, Tcl, Texinfo,
    Verilog, Vhdl, Xml, Xorg, Xslt, Xul, Yacc, Yaml
Copyright (C) 2006-2013 John MacFarlane
Web:  http://johnmacfarlane.net/pandoc
This is free software; see the source for copying conditions.  There is no
warranty, not even for merchantability or fitness for a particular purpose.

************** File: testdoc_pnd_d2h.html *****************
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo" />
  <meta name="author" content="Kaare Dump at Segfault Inc, Cyberspace" />
  <meta name="author" content="A. Dummy Author" />
  <meta name="author" content="I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst" />
  <meta name="author" content="J. Doe" />
  <title>A Document for Testing Doconce</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<div id="header">
<h1 class="title">A Document for Testing Doconce</h1>
<h2 class="author">Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo</h2>
<h2 class="author">Kaare Dump at Segfault Inc, Cyberspace</h2>
<h2 class="author">A. Dummy Author</h2>
<h2 class="author">I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst</h2>
<h2 class="author">J. Doe</h2>
<h3 class="date">Jan 32, 2100</h3>
</div>
<!-- Table of contents: Run pandoc with --toc option -->



<!-- !split -->




<p>The format of this document is pandoc <em>Abstract.</em> This is a document with many test constructions for doconce syntax. It was used heavily for the development and kept for testing numerous constructions, also special and less common cases.</p>
<p>And exactly for test purposes we have an extra line here, which is part of the abstract.</p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->



<h2 id="section-1">Section 1</h2>
<p>Here is a nested list:</p>
<ul>
<li><p>item1</p></li>
<li><p>item2</p></li>
<li><p>item3 which continues on the next line to test that feature</p></li>
<li><p>and a sublist</p>
<ul>
<li><p>with indented subitem1</p></li>
<li><p>and a subitem2</p></li>
</ul></li>
<li><p>and perhaps an ordered sublist</p></li>
</ul>
<ol style="list-style-type: decimal">
<li><p>first item</p></li>
<li><p>second item, continuing on a new line</p></li>
</ol>
<blockquote>
<p>Here are two lines that make up a block quote.</p>
</blockquote>
<!-- !split and check if these extra words are included properly in the comment -->

<h3 id="subsection-1">Subsection 1</h3>
<p>More text, with a reference back to the section <a href="#n-1">Section 1</a> and further to the section <a href="#s">URLs</a>. <!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console --></p>
<p>Let's do some copying from files too. First from subroutine up to the very end,</p>
<pre class="sourceCode Fortran"><code class="sourceCode fortran">      <span class="kw">subroutine</span> test()
      <span class="dt">integer</span> i
      <span class="dt">real*8</span> r
      r <span class="kw">=</span> <span class="dv">0</span>
      <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, i
         r <span class="kw">=</span> r <span class="kw">+</span> i
      <span class="kw">end do</span>
      <span class="kw">return</span>
<span class="co">C     END1</span>

      <span class="kw">program</span> testme
      <span class="kw">call</span> test()
      <span class="kw">return</span></code></pre>
<p>and then just the subroutine,</p>
<pre class="sourceCode Fortran"><code class="sourceCode fortran">      <span class="kw">subroutine</span> test()
      <span class="dt">integer</span> i
      <span class="dt">real*8</span> r
      r <span class="kw">=</span> <span class="dv">0</span>
      <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, i
         r <span class="kw">=</span> r <span class="kw">+</span> i
      <span class="kw">end do</span>
      <span class="kw">return</span></code></pre>
<p>and finally the complete file:</p>
<pre class="sourceCode Fortran"><code class="sourceCode fortran"><span class="co">C     a comment</span>

      <span class="kw">subroutine</span> test()
      <span class="dt">integer</span> i
      <span class="dt">real*8</span> r
      r <span class="kw">=</span> <span class="dv">0</span>
      <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, i
         r <span class="kw">=</span> r <span class="kw">+</span> i
      <span class="kw">end do</span>
      <span class="kw">return</span>
<span class="co">C     END1</span>

      <span class="kw">program</span> testme
      <span class="kw">call</span> test()
      <span class="kw">return</span></code></pre>
<p>Testing other code environments. First Python:</p>
<pre><code>!bc pycod
def f(x):
    return x+1
!ec</code></pre>
<p>which gets rendered as</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="kw">def</span> f(x):
    <span class="kw">return</span> x<span class="dv">+1</span></code></pre>
<p>Now a complete program to be shown via Python Online Tutorial:</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="kw">def</span> f(x):
    <span class="kw">return</span> x + <span class="dv">1</span>

a = <span class="dv">2</span>
x = a
a = <span class="dv">1</span>
v = f(x)
<span class="kw">print</span> v</code></pre>
<p>Then Cython:</p>
<pre><code>cpdef f(double x):
    return x + 1</code></pre>
<!-- This one tests a + sign before a code environment -->
<p>C++:</p>
<pre class="sourceCode Cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="dt">int</span> main()
{
   std::cout &lt;&lt; <span class="st">&quot;Sample output&quot;</span> &lt;&lt; std::endl;
   <span class="kw">return</span> <span class="dv">0</span>
}</code></pre>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
<p>And a little bit of Fortran:</p>
<pre><code>!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec</code></pre>
<p>which then is typeset as</p>
<pre class="sourceCode Python"><code class="sourceCode python">      subroutine midpt(x, length, a, b)
      real*<span class="dv">8</span> a, b, x
      x = (a + b)/<span class="dv">2</span>
      length = b - a
      <span class="kw">return</span>
      end</code></pre>
<p>HTML:</p>
<pre><code>&lt;table&gt;
&lt;tr&gt;&lt;td&gt;Column 1&lt;/td&gt;&lt;td&gt;Column 2&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;0.67526 &lt;/td&gt;&lt;td&gt;0.92871 &lt;/td&gt;&lt;/tr&gt;
&lt;!-- comment --&gt;
&lt;/table&gt;</code></pre>
<p>System call:</p>
<pre class="sourceCode Bash"><code class="sourceCode bash">Terminal<span class="kw">&gt;</span> <span class="kw">mkdir</span> <span class="kw">test</span>
Terminal<span class="kw">&gt;</span> <span class="kw">cd</span> <span class="kw">test</span>
Terminal<span class="kw">&gt;</span> myprog -f
output1
output2</code></pre>
<p>It is time to test <code>verbatim inline font</code> especially with <code>a newline inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The exclamation mark inside the verbatim text is not smart for latex as we use ! in the <code>verb</code> typesetting... Also test backslashes like <code>\begin</code> and <code>\end</code> in inline verbatim text.</p>
<p>Here is some <font color="red">red</font> color and an attempt to write <font color="green">with green color containing a linebreak. And one more.</font> Some formats will only display this correctly when HTML is the output format.</p>
<h3 id="subsection-2-testing-figures-and-movies">Subsection 2: Testing figures and movies</h3>
<p>Test of figures. In particular we refer to Figure ref{fig:impact} in which there is a flow.</p>
<div class="figure">
<img src="../doc/manual/figs/streamtubes.png" alt="Visualization of flow by streamtubes." /><p class="caption">Visualization of flow by streamtubes.</p>
</div>
<p>Figures without captions are allowed and will be inlined.</p>
<div class="figure">
<img src="../doc/manual/figs/streamtubes.png" />
</div>
<h4 id="test-of-movies">Test of movies</h4>
<p>Movie ref{mov:tsunami} shows a tsunami.</p>
<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em>Mjolnir tsunami (by Sylfest Glimsdal) .</em>
</p>


<p>Test empty caption (for inline movie):</p>
<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em></em>
</p>


<!-- Test wrong syntax and multi-line caption -->


<p>
<a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a> <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em>
</p>

<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->


<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<p><em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em></p>
<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<p><em>Computational fluid dynamics movie.</em></p>
<!-- Test multi-line caption in figure -->

<p>Here is figure ref{myfig} with a long multi-line caption and an extra space before the FIGURE keyword.</p>
<div class="figure">
<img src="../doc/manual/figs/wavepacket_0001.png" alt="A long caption spanning several lines and containing verbatim words like my_file_v1 and my_file_v2 as well as math with subscript as in t_{i+1}." /><p class="caption">A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in <span class="math">\(t_{i+1}\)</span>.</p>
</div>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<!-- Test URL as figure name -->

<div class="figure">
<img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" />
</div>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<h3 id="the-theta-parameter-not-nabla">The <span class="math">\(\theta\)</span> parameter (not <span class="math">\(\nabla\)</span>?)</h3>
<p>Functions do not always need to be advanced, here is one involving <span class="math">\(\theta\)</span>:</p>
<pre><code>def f(theta):
    return theta**2</code></pre>
<p><em>More on <span class="math">\(\theta\)</span>.</em> Here is more text following headline with math.</p>
<p>Newcommands must also be tested in this test report: <span class="math">\(\frac{1}{2}\)</span>, <span class="math">\({1/2}\)</span>, <span class="math">\(\pmb{x}\)</span>, <span class="math">\(\frac{Du}{dt}\)</span>, both inline and in block:</p>
<p>$$</p>
<p> = 0</p>
<p>$$</p>
<p>$$</p>
<p> = {1/2}</p>
<p>$$</p>
<p>$$</p>
<p> = </p>
<p>$$</p>
<p>Or with align with label and numbers:</p>
<p><span class="math">\[
\begin{equation}
\frac{Du}{dt} = 0
\label{aligneq1}
\end{equation}
\]</span></p>
<p><span class="math">\[
\begin{equation}  
\frac{1}{2} = {1/2}
\end{equation}
\]</span></p>
<p><span class="math">\[
\begin{equation}  
\frac{1}{2}\pmb{x} = \pmb{n}
\label{aligneq2}
\end{equation}
\]</span></p>
<h3 id="custom-environments">Custom Environments</h3>
<p>Here is an attempt to create a theorem environment via Mako (for counting theorems) and comment lines to help replacing lines in the <code>.tex</code> by proper begin-end LaTeX environments for theorems. Should look nice in most formats!</p>
<!-- begin theorem -->

<p><em>Theorem 5.</em> Let <span class="math">\(a=1\)</span> and <span class="math">\(b=2\)</span>. Then <span class="math">\(c=3\)</span>. <!-- end theorem --></p>
<!-- begin proof -->
<p><em>Proof.</em> Since <span class="math">\(c=a+b\)</span>, the result follows from straightforward addition. <span class="math">\(\Diamond\)</span> <!-- end proof --></p>
<p>As we see, the proof of Theorem 5 is a modest achievement.</p>
<h3 id="tables">Tables</h3>
<!-- index with comma could fool sphinx -->

<p>Let us take this table from the manual:</p>
<table>
<thead>
<tr class="header">
<th align="center">time</th>
<th align="center">velocity</th>
<th align="left">acceleration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.0</td>
<td align="center">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="center">2.0</td>
<td align="center">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="center">4.0</td>
<td align="center">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>The Doconce source code reads</p>
<pre><code>  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|</code></pre>
<p>Here is yet another table to test that we can handle more than one table:</p>
<table>
<thead>
<tr class="header">
<th align="center">time</th>
<th align="center">velocity</th>
<th align="left">acceleration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.0</td>
<td align="center">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="center">1.0</td>
<td align="center">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="center">3.0</td>
<td align="center">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>And one with math headings (that are expanded and must be treated accordingly) and verbatim heading and entry:</p>
<table>
<thead>
<tr class="header">
<th align="center"><span class="math">\(i\)</span></th>
<th align="center"><span class="math">\(h_i\)</span></th>
<th align="left"><span class="math">\(\bar T_i\)</span></th>
<th align="center"><code>L_i</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="left">288</td>
<td align="center">-0.0065</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">11,000</td>
<td align="left">216</td>
<td align="center">0.0</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">20,000</td>
<td align="left">216</td>
<td align="center">0.001</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">32,000</td>
<td align="left">228</td>
<td align="center">0.0028</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">47,000</td>
<td align="left">270</td>
<td align="center">0.0</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">51,000</td>
<td align="left">270</td>
<td align="center">-0.0028</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">71,000</td>
<td align="left">214</td>
<td align="center"><code>NaN</code></td>
</tr>
</tbody>
</table>
<p>And add one with verbatim headings (with underscores), and rows starting with <code>|-</code> because of a negative number, and <code>|</code> right after verbatim word (with no space):</p>
<table>
<thead>
<tr class="header">
<th align="center">exact</th>
<th align="center"><code>v_1</code></th>
<th align="left"><span class="math">\(a_i\)</span> + <code>v_2</code></th>
<th align="center"><code>verb_3_</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">9</td>
<td align="center">9.62</td>
<td align="left">5.57</td>
<td align="center">8.98</td>
</tr>
<tr class="even">
<td align="center">-20</td>
<td align="center">-23.39</td>
<td align="left">-7.65</td>
<td align="center">-19.93</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">17.74</td>
<td align="left">-4.50</td>
<td align="center">9.96</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">-9.19</td>
<td align="left">4.13</td>
<td align="center">-0.26</td>
</tr>
</tbody>
</table>
<h3 id="a-test-of-verbatim-words-in-heading-with-subscript-a_i-my_file_v1-and-my_file_v2">A test of verbatim words in heading with subscript <span class="math">\(a_i\)</span>: <code>my_file_v1</code> and <code>my_file_v2</code></h3>
<p><em>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math <span class="math">\(a_{i-1}\)</span>.</em> Here is some text.</p>
<h3 id="bibliography-test">Bibliography test</h3>
<p>Here is an example: @Langtangen_Pedersen_2002 discussed propagation of large destructive water waves, @Langtangen_et_al_2002 gave an overview of numerical methods for solving the Navier-Stokes equations, while the use of Backward Kolmogorov equations for analyzing random vibrations was investigated in @Langtangen_1994a. The book chapter @Mardal_et_al_2003a contains information on C++ software tools for programming multigrid methods. A real retro reference is @Langtangen_1988d about a big FORTRAN package. Multiple references are also possible, e.g., see @Langtangen_Pedersen_2002;@Mardal_et_al_2003a.</p>
<p>We need to cite more than 10 papers to reproduce an old formatting problem with blanks in the keys in reST format: @Langtangen_1992c;@Langtangen_1994a;@Mortensen_et_al_2011;@Langtangen_Pedersen_2002 and @Langtangen_et_al_2002;@Glimsdal_et_al_20006;@Rahman_et_al_2006b;@Haga_et_al_2011a;@Langtangen_2003a;@Langtangen_2008a;@Langtangen:95 and all the work of @Langtangen_2012;@Mardal_et_al_2003a;@Jeberg_et_al_2004 as well as old work @Langtangen_1988d and @Langtangen_1989e, and the talk @Langtangen_talk_2007a. Langtangen also had two thesis @Langtangen:85;@Langtangen_1989e. More retro citations are the old ME-IN323 book @Langtangen:91 and the @Langtangen:94b OONSKI '94 paper.</p>
<!-- --- begin exercise --- -->

<h3 id="example-1-examples-can-be-typeset-as-exercises">Example 1: Examples can be typeset as exercises</h3>
<p>Examples can start with a subsection heading starting with <code>Example:</code> and then, with the command-line option <code>--examples_as_exercises</code> be typeset as exercises. This is useful if one has solution environments as part of the example.</p>
<p><em>a)</em> State some problem.</p>
<p><em>Solution.</em> The answer to this subproblem can be written here.</p>
<p><em>b)</em> State some other problem.</p>
<p><em>Hint 1.</em> A hint can be given.</p>
<p><em>Hint 2.</em> Maybe even another hint?</p>
<p><em>Solution.</em> The answer to this other subproblem goes here, maybe over multiple doconce input lines.</p>
<!-- --- end exercise --- -->


<h3 id="urls">URLs</h3>
<p>Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or the entire URL if desired, <a href="http://folk.uio.no/hpl">http://folk.uio.no/hpl</a>. Here is a plain file link <testdoc.do.txt>, or <testdoc.do.txt>, or <testdoc.do.txt> or <testdoc.do.txt> or <a href="testdoc.do.txt">a link with newline</a>. Can test spaces with the link with word too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a file</a> is fine to have. Moreover, &quot;loose&quot; URLs work, i.e., no quotes, just the plain URL as in <a href="http://folk.uio.no/hpl">http://folk.uio.no/hpl</a>, if followed by space, comma, colon, semi-colon, question mark, exclamation mark, but not a period (which gets confused with the periods inside the URL).</p>
<p>Mail addresses can also be used: <script type="text/javascript">
<!--
h='&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#46;&#110;&#x6f;';a='&#64;';n='&#104;&#112;&#108;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+'<code>hpl@simula.no</code>'+'<\/'+'a'+'>');
// -->
</script><noscript>&#60;&#x63;&#x6f;&#100;&#x65;&#62;&#104;&#112;&#108;&#64;&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#46;&#110;&#x6f;&#60;&#x2f;&#x63;&#x6f;&#100;&#x65;&#62;&#32;&#40;&#104;&#112;&#108;&#32;&#x61;&#116;&#32;&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#32;&#100;&#x6f;&#116;&#32;&#110;&#x6f;&#x29;</noscript>, or just a <script type="text/javascript">
<!--
h='&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#46;&#110;&#x6f;';a='&#64;';n='&#104;&#112;&#108;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+'mail link'+'<\/'+'a'+'>');
// -->
</script><noscript>&#x6d;&#x61;&#x69;&#108;&#32;&#108;&#x69;&#110;&#x6b;&#32;&#40;&#104;&#112;&#108;&#32;&#x61;&#116;&#32;&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#32;&#100;&#x6f;&#116;&#32;&#110;&#x6f;&#x29;</noscript>, or a raw <script type="text/javascript">
<!--
h='&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#46;&#110;&#x6f;';a='&#64;';n='&#104;&#112;&#108;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+'mailto:hpl@simula.no'+'<\/'+'a'+'>');
// -->
</script><noscript>&#x6d;&#x61;&#x69;&#108;&#116;&#x6f;&#58;&#104;&#112;&#108;&#64;&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#46;&#110;&#x6f;&#32;&#40;&#104;&#112;&#108;&#32;&#x61;&#116;&#32;&#x73;&#x69;&#x6d;&#x75;&#108;&#x61;&#32;&#100;&#x6f;&#116;&#32;&#110;&#x6f;&#x29;</noscript>.</p>
<p>Here are some tough tests of URLs, especially for the <code>latex</code> format: <a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test Newton-Cotes with percentage in URL too: <a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</a> and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae">http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</a> which has a shebang.</p>
<p>For the <code>--device=paper</code> option it is important to test that URLs with monofont link text get a footnote, as in this reference to <a href="https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py"><code>decay_mod</code></a>.</p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a `_static*` folder. -->

<p>More tough tests: repeated URLs whose footnotes when using the <code>--device=paper</code> option must be correct. We have <a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and <a href="http://google.com">google</a>, which should result in exactly three footnotes.</p>
<h3 id="latex-mathematics">LaTeX Mathematics</h3>
<p>Here is an equation without label using backslash-bracket environment: <span class="math">\[
 a = b + c 
\]</span> or with number and label, as in , using the equation environment: <span class="math">\[
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
\]</span> We can refer to this equation by .</p>
<p>Here is a system without equation numbers, using the align-astrisk environment: $$</p>
<p> = </p>
<p>$$</p>
<p>$$</p>
<p>b = ^2 u + ^4 v</p>
<p>$$</p>
<p>And here is a system of equations with labels in an align environment: <span class="math">\[
\begin{equation}
a = q + 4 + 5+ 6 \label{eq1} 
\end{equation}
\]</span></p>
<p><span class="math">\[
\begin{equation}  
b = \nabla^2 u + \nabla^4 x \label{eq2}
\end{equation}
\]</span> We can refer to -. They are a bit simpler than the Navier-Stokes equations. And test LaTeX hyphen in <code>CG-2</code>. Also test <span class="math">\(a_{i-j}\)</span> as well as <span class="math">\(kx-wt\)</span>.</p>
<p>Many of the next environments will fail in non-latex formats. Testing multiline: <span class="math">\[
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
\]</span> Testing split: <span class="math">\[
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &amp;+ \\ 
  &amp; f + \nabla\cdot\nabla u
\end{split}
\end{equation}
\]</span> We can refer to the last equation by .</p>
<p>Testing gather: <span class="math">\[
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
\]</span></p>
<p>Testing alignat: <span class="math">\[
\begin{alignat}{2}
a &amp;= q + 4 + 5+ 6\qquad &amp; \mbox{for } q\geq 0 \label{eq1a} \\ 
b &amp;= \nabla^2 u + \nabla^4 x &amp; x\in\Omega \label{eq2a}
\end{alignat}
\]</span> Let us refer to - again, and to the alignat variant -, and to .</p>
<p>Testing eqnarray: <span class="math">\[
\begin{eqnarray}
{\partial u\over\partial t} &amp;=&amp; \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &amp;=&amp; \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
\]</span></p>
<p>More mathematical typesetting is demonstrated in the coming exercises.</p>
<p>Below, we have <a href="#n">Problem 1: Flip a Coin</a> and <a href="#y">Project 1: Compute a Probability</a>, as well as <a href="#s">Project 2: Explore Distributions of Random Circles</a> and <a href="#c">Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc</a>, and in between there we have <a href="#s">Exercise 3: Make references to projects and problems</a>.</p>
<h2 id="exercises">Exercises</h2>
<!-- --- begin exercise --- -->

<h3 id="problem-1-flip-a-coin">Problem 1: Flip a Coin</h3>
<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- Torture tests -->

<p>Make a program that simulates flipping a coin <span class="math">\(N\)</span> times. Print out &quot;tail&quot; or &quot;head&quot; for each flip and let the program count the number of heads.</p>
<!-- Test syntax error -->




<h4 id="remarks">Remarks</h4>
<p>Remarks with such a subsubsection heading would previously mark the beginning of a new exercise and cause trouble. Maybe a list</p>
<ol style="list-style-type: decimal">
<li><p>Mark 1.</p></li>
<li><p>Mark 2. <!-- --- begin hint in exercise --- --></p></li>
</ol>
<p><em>Hint 1.</em> Use <code>r = random.random()</code> and define head as <code>r &lt;= 0.5</code>. <!-- --- end hint in exercise --- --></p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint 2.</em> Draw an integer among <span class="math">\(\{1,2\}\)</span> with <code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1. <!-- --- end hint in exercise --- --></p>
<!-- --- begin answer of exercise --- -->
<p><em>Answer.</em> If the <code>random.random()</code> function returns a number <span class="math">\(&lt;1/2\)</span>, let it be head, otherwise tail. Repeat this <span class="math">\(N\)</span> number of times. <!-- --- end answer of exercise --- --></p>
<!-- --- begin solution of exercise --- -->
<p><em>Solution.</em> Code:</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="ch">import</span> sys, random
N = <span class="dt">int</span>(sys.argv[<span class="dv">1</span>])
heads = <span class="dv">0</span>
<span class="kw">for</span> i in <span class="dt">range</span>(N):
    r = random.random()
    <span class="kw">if</span> r &lt;= <span class="fl">0.5</span>:
        heads += <span class="dv">1</span>
<span class="kw">print</span> <span class="st">&#39;Flipping a coin </span><span class="ot">%d</span><span class="st"> times gave </span><span class="ot">%d</span><span class="st"> heads&#39;</span> % (N, heads)</code></pre>
<!-- --- end solution of exercise --- -->
<p>Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>. <!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file --></p>
<!-- --- end exercise --- -->


<h3 id="not-an-exercise">Not an exercise</h3>
<p>Should be possible to stick a normal section in the middle of many exercises.</p>
<!-- --- begin exercise --- -->

<h3 id="project-1-compute-a-probability">Project 1: Compute a Probability</h3>
<!-- Minimalistic exercise -->


<p>What is the probability of getting a number between 0.5 and 0.6 when drawing uniformly distributed random numbers from the interval <span class="math">\([0,1)\)</span>?</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint.</em> To answer this question empirically, let a program draw <span class="math">\(N\)</span> such random numbers using Python's standard <code>random</code> module, count how many of them, <span class="math">\(M\)</span>, that fall in the interval <span class="math">\((0.5,0.6)\)</span>, and compute the probability as <span class="math">\(M/N\)</span>. <!-- --- end hint in exercise --- --></p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h3 id="project-2-explore-distributions-of-random-circles">Project 2: Explore Distributions of Random Circles</h3>
<p>The formula for a circle is given by</p>
<p><span class="math">\[
\begin{equation}
x = x_0 + R\cos 2\pi t,
\end{equation}
\]</span></p>
<p><span class="math">\[
\begin{equation}  
y = y_0 + R\sin 2\pi t,
\end{equation}
\]</span> where <span class="math">\(R\)</span> is the radius of the circle, <span class="math">\((x_0,y_0)\)</span> is the center point, and <span class="math">\(t\)</span> is a parameter in the unit interval <span class="math">\([0,1]\)</span>. For any <span class="math">\(t\)</span>, <span class="math">\((x,y)\)</span> is a point on the circle. The formula can be used to generate <code>n</code> points on a circle:</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="ch">import</span> numpy <span class="ch">as</span> np

<span class="kw">def</span> circle(R, x0, y0, n=<span class="dv">501</span>):
    t = np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, n)
    x = x0 + R*np.cos(<span class="dv">2</span>*np.pi*t)
    y = y0 + R*np.sin(<span class="dv">2</span>*np.pi*t)
    <span class="kw">return</span> x, y

x, y = circle(<span class="fl">2.0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</code></pre>
<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>The goal of this project is to draw <span class="math">\(N\)</span> circles with random center and radius. Plot each circle using the <code>circle</code> function above.</p>
<p><em>a)</em> Let <span class="math">\(R\)</span> be normally distributed and <span class="math">\((x_0,y_0)\)</span> uniformly distributed.</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint.</em> Use the <code>numpy.random</code> module to draw the <span class="math">\(x_0\)</span>, <span class="math">\(y_0\)</span>, and <span class="math">\(R\)</span> quantities. <!-- --- end hint in exercise --- --></p>
<!-- --- begin answer of exercise --- -->
<p><em>Answer.</em> Here goes the short answer to part a). <!-- --- end answer of exercise --- --></p>
<!-- --- begin solution of exercise --- -->
<p><em>Solution.</em> Here goes a full solution to part a). <!-- --- end solution of exercise --- --></p>
<p><em>b)</em> Let <span class="math">\(R\)</span> be uniformly distributed and <span class="math">\((x_0,y_0)\)</span> normally distributed. Filename: <code>norm.py</code>.</p>
<p><em>c)</em> Let <span class="math">\(R\)</span> and <span class="math">\((x_0,y_0)\)</span> be normally distributed.</p>
<p>Filename: <code>circles.pdf</code>.</p>
<!-- Closing remarks for this Project -->

<h4 id="remarks-1">Remarks</h4>
<p>At the very end of the exercise it may be appropriate to summarize and give some perspectives.</p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h3 id="exercise-1-determine-some-distance">Exercise 1: Determine some Distance</h3>
<p>Intro to this exercise. Questions are in subexercises below.</p>
<!-- No meaning in this weired test example: -->
<p>The text here belongs to the main (intro) part of the exercise. Need closing remarks to have text after subexercises.</p>
<!-- --- begin solution of exercise --- -->
<p><em>Solution.</em> Here goes a full solution of the whole exercise. With some math <span class="math">\(a=b\)</span> in this solution: <span class="math">\[
 \hbox{math in solution: } a = b 
\]</span> And code <code>a=b</code> in this solution:</p>
<pre><code>a = b  # code in solution</code></pre>
<p>End of solution is here. <!-- --- end solution of exercise --- --></p>
<p><em>a)</em> Subexercises are numbered a), b), etc.</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint 1.</em> First hint to subexercise a). With math <span class="math">\(a=b\)</span> in hint:</p>
<p><span class="math">\[
 a=b. 
\]</span> And with code (in plain verbatim) returning <span class="math">\(x+1\)</span> in hint:</p>
<pre><code>def func(x):
    return x + 1  # with code in hint</code></pre>
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

<p><em>Hint 2.</em> Second hint to subexercise a). <!-- --- end hint in exercise --- --> Filename: <code>subexer_a.pdf</code>.</p>
<!-- --- begin answer of exercise --- -->
<p><em>Answer.</em> Short answer to subexercise a). With math in answer: <span class="math">\(a=b\)</span>. <!-- --- end answer of exercise --- --></p>
<p><em>b)</em> Here goes the text for subexercise b).</p>
<p>Some math <span class="math">\(\cos^2 x + \sin^2 x = 1\)</span> written one a single line:</p>
<p><span class="math">\[
 \cos^2 x + \sin^2 x = 1 \thinspace .
\]</span></p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint.</em> A hint for this subexercise. <!-- --- end hint in exercise --- --> Filename: <code>subexer_b.pdf</code>.</p>
<!-- --- begin solution of exercise --- -->
<p><em>Solution.</em> Here goes the solution of this subexercise. <!-- --- end solution of exercise --- --></p>
<!-- Closing remarks for this Exercise -->

<h4 id="remarks-2">Remarks</h4>
<p>Some final closing remarks, e.g., summarizing the main findings and their implications in other problems can be made. These remarks will appear at the end of the typeset exercise.</p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h3 id="some-exercise-without-the-exercise-prefix">Some exercise without the &quot;Exercise:&quot; prefix</h3>
<!-- Another minimalistic exercise -->

<p>Just some text. And some math saying that <span class="math">\(e^0=1\)</span> on a single line, to test that math block insertion is correct:</p>
<p><span class="math">\[
 \exp{(0)} = 1 
\]</span></p>
<p>And a test that the code <code>lambda x: x+2</code> is correctly placed here:</p>
<pre><code>lambda x: x+2</code></pre>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h3 id="example-2-just-an-example">Example 2: Just an example</h3>
<!-- This example needs the --examples_as_exercises option, otherwise -->
<!-- it is just typeset as it is written. -->


<p><em>a)</em> What is the capital of Norway?</p>
<p><em>Answer.</em> Oslo.</p>
<!-- --- end exercise --- -->


<h2 id="here-goes-another-section">Here goes another section</h2>
<p>With some text, before we continue with exercises.</p>
<h2 id="more-exercises">More Exercises</h2>
<!-- --- begin exercise --- -->

<h3 id="exercise-3-make-references-to-projects-and-problems">Exercise 3: Make references to projects and problems</h3>
<p>Pick a statement from <a href="#s">Project 2: Explore Distributions of Random Circles</a> or <a href="#n">Problem 1: Flip a Coin</a> and verify it. Filename: <code>verify_formula.py</code>.</p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h3 id="project-3-references-to-project-1-compute-a-probability-in-a-heading-works-for-pandoc">Project 3: References to <a href="#y">Project 1: Compute a Probability</a> in a heading works for pandoc</h3>
<p>Refer to the previous exercise as <a href="#s">Exercise 3: Make references to projects and problems</a>, the two before that as <a href="#y">Project 1: Compute a Probability</a> and <a href="#s">Project 2: Explore Distributions of Random Circles</a>, and this one as <a href="#c">Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc</a>. Filename: <code>selc_composed.pdf</code>.</p>
<!-- --- end exercise --- -->


<h2 id="references">References</h2>
<h2 id="bibliography">Bibliography</h2>
<ol style="list-style-type: decimal">
<li><p> <em>H. P. Langtangen and G. Pedersen</em>. Propagation of Large Destructive Waves, <em>International Journal of Applied Mechanics and Engineering</em>, 7(1), pp. 187-204, 2002.</p></li>
<li><p> <em>H. P. Langtangen, K.-A. Mardal and R. Winther</em>. Numerical Methods for Incompressible Viscous Flow, <em>Advances in Water Resources</em>, 25, pp. 1125-1146, 2002.</p></li>
<li><p> <em>H. P. Langtangen</em>. Numerical Solution of First Passage Problems in Random Vibrations, <em>SIAM Journal of Scientific and Statistical Computing</em>, 15, pp. 997-996, 1994.</p></li>
<li><p> <em>K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen</em>. Software Tools for Multigrid Methods, <em>Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming</em>, edited by <em>H. P. Langtangen and A. Tveito</em>, Springer, 2003.</p></li>
<li><p> <em>H. P. Langtangen</em>. The FEMDEQS Program System, <em>Department of Mathematics, University of Oslo</em>, 1989.</p></li>
<li><p> <em>H. P. Langtangen</em>. Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process, <em>SIAM Journal on Scientific Computing</em>, 13, pp. 1394-1417, 1992.</p></li>
<li><p> <em>M. Mortensen, H. P. Langtangen and G. N. Wells</em>. A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations, <em>Advances in Water Resources</em>, 34(9), <a href="http://dx.doi.org/10.1016/j.advwatres.2011.02.013">doi: 10.1016/j.advwatres.2011.02.013</a>, 2011.</p></li>
<li><p> <em>S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L</em>. Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics, <em>International Journal of Fluid Mechanics Research</em>, 33(1), pp. 15-43, 2006.</p></li>
<li><p> <em>S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen</em>. Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel, <em>Physical Review B: Condensed Matter and Materials Physics</em>, 74, 2006.</p></li>
<li><p> <em>J. B. Haga, H. Osnes and H. P. Langtangen</em>. On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media, <em>International Journal of Analytical and Numerical Methods in Geomechanics</em>, <a href="http://dx.doi.org/10.1002/nag.1062">doi: 10.1002/nag.1062</a>, 2011, <a href="http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract">http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract</a>.</p></li>
<li><p> <em>H. P. Langtangen</em>. <em>Computational Partial Differential Equations - Numerical Methods and Diffpack Programming</em>, Springer, 2003.</p></li>
<li><p> <em>H. P. Langtangen</em>. <em>Python Scripting for Computational Science</em>, Springer, 2008.</p></li>
<li><p> <em>H. P. Langtangen and G. Pedersen</em>. Finite Elements for the Boussinesq Wave Equations, Waves and Non-linear Processes in Hydrodynamics, edited by <em>J. Grue, B. Gjevik and J. E. Weber</em>, Kluwer Academic Publishers, pp. pp. 117-126, 1995, <a href="http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310">http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310</a>.</p></li>
<li><p> <em>H. P. Langtangen</em>. <em>A Primer on Scientific Programming With Python</em>, Springer, 2012.</p></li>
<li><p> <em>P. V. Jeberg, H. P. Langtangen and C. B. Terp</em>. Optimization With Diffpack: Practical Example From Welding, <em>Simula Research Laboratory</em>, 2004.</p></li>
<li><p> <em>H. P. Langtangen</em>. Computational Methods for Two-Phase Flow in Oil Reservoirs, Ph.D. Thesis, Mechanics Division, Department of Mathematics, University of Oslo, 1989.</p></li>
<li><p> <em>H. P. Langtangen</em>. Computational Modeling of Huge Tsunamis From Asteroid Impacts, Invited keynote lecture at the conference on Computational Science 2007 (ICCS'07), Beijing, China, 2007.</p></li>
<li><p> <em>H. P. Langtangen</em>. Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions, M.Sc. Thesis, Mechanics Division, Department of Mathematics, University of Oslo, 1985.</p></li>
<li><p> <em>H. P. Langtangen and A. Tveito</em>. Numerical Methods in Continuum Mechanics, <em>Center for Industrial Research</em>, 1991.</p></li>
<li><p> <em>H. P. Langtangen</em>. Diffpack: Software for Partial Differential Equations, <em>Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA</em>, edited by <em>A. Vermeulen</em>, 1994.</p></li>
</ol>
<h2 id="appendix-just-for-testing-part-i">Appendix: Just for testing; part I</h2>
<p>This is the first appendix.</p>
<h3 id="a-subsection-within-an-appendix">A subsection within an appendix</h3>
<p>Some text.</p>
<h2 id="appendix-just-for-testing-part-ii">Appendix: Just for testing; part II</h2>
<p>This is more stuff for an appendix.</p>
<h3 id="appendix-testing-identical-titles">Appendix: Testing identical titles</h3>
<p>Without label.</p>
<h3 id="appendix-testing-identical-titles-1">Appendix: Testing identical titles</h3>
<p>With label.</p>
<h3 id="appendix-testing-identical-titles-2">Appendix: Testing identical titles</h3>
<p>With label.</p>
<h3 id="appendix-testing-identical-titles-3">Appendix: Testing identical titles</h3>
<p>Without label.</p>
<p><em>Tip.</em> Here is a tip or hint box, typeset as a notice box.</p>
<p>Need a lot of text to surround the summary box. Version control systems allow you to record the history of files and share files among several computers and collaborators in a professional way. File changes on one computer are updated or merged with changes on another computer. Especially when working with programs or technical reports it is essential to have changes documented and to ensure that every computer and person involved in the project have the latest updates of the files. Greg Wilson' excellent <a href="http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/">Script for Introduction to Version Control</a> provides a more detailed motivation why you will benefit greatly from using version control systems.</p>
<p><em>Summary.</em> <em>Bold remark:</em> Make some text with this summary. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content. Much testing in this document, otherwise stupid content.</p>
<p>Projects that you want to share among several computers or project workers are today most conveniently stored at some web site &quot;in the cloud&quot; and updated through communication with that site. I strongly recommend you to use such sites for all serious programming and scientific writing work - and all other important files.</p>
<p>The simplest services for hosting project files are <a href="http://dropbox.com">Dropbox</a> and <a href="http://drive.google.com">Google Drive</a>. It is very easy to get started with these systems, and they allow you to share files among laptops and mobile units with as many users as you want. The systems offer a kind of version control in that the files are stored frequently (several times per minute), and you can go back to previous versions for the last 30 days. However, it is challenging to find the right version from the past when there are so many of them.</p>
<p>More seriously, when several people may edit files simultaneously, it can be difficult detect who did what when, roll back to previous versions, and to manually merge the edits when these are incompatible. Then one needs more sophisticated tools than Dropbox or Google Drive: project hosting services with true version control systems. The following text aims at providing you with the minimum information to started with such systems. Numerous other tutorials contain more comprehensive material and in-depth explanations of the concepts and tools.</p>
<p>The idea with project hosting services is that you have the files associated with a project in the cloud. Many people may share these files. Every time you want to work on the project you explicitly update your version of the files, edit the files as you like, and synchronize the files with the &quot;master version&quot; at the site where the project is hosted. If you at some point need to go back to a version of the files at some particular point in the past, this is an easy operation. You can also use tools to see what various people have done with the files in the various versions.</p>
<p>All these services are very similar. Below we describe how you get started with Bitbucket, GitHub, and Googlecode. Launchpad works very similarly to the latter three. All the project hosting services have excellent introductions available at their web sites, but the recipes below are much shorter and aim at getting you started as quickly as possible by concentrating on the most important need-to-know steps. The Git tutorials we refer to later in this document contain more detailed information and constitute of course very valuable readings when you use version control systems every day. The point now is to get started.</p>
<h3 id="appendix-testing-inline-comments">Appendix: Testing inline comments</h3>
<p>Projects that you want to share among several computers or project workers are today most conveniently stored at some web site &quot;in the cloud&quot; and updated through communication with that site. [hpl 1: not sure if in the cloud is understood by all.] I strongly recommend you to use such sites for all serious programming and scientific writing work - and all other important files.</p>
<p>The simplest services for hosting project files is Dropbox. [mp 2: Simply go to <a href="http://dropbox.com">http://dropbox.com</a> and watch the video. It explains how files, like <code>myfile.py</code>, perhaps containing much math, like <span class="math">\(\partial u/\partial t\)</span>, are easily communicated between machines.] It is very easy to get started with Dropbox, and it allows you to share files among laptops and mobile units.</p>
<p>When several people may edit files simultaneously, it can be difficult detect who did what when, roll back to previous versions, and to manually merge the edits when these are incompatible. Then one needs more sophisticated tools than Dropbox: project hosting services with true version control systems. [hpl 3: The following text aims at providing you with the minimum information to started with such systems. Numerous other tutorials contain more comprehensive material and in-depth explanations of the concepts and tools.]</p>
<h3 id="appendix-testing-headings-ending-with-verbatim-inline">Appendix: Testing headings ending with <code>verbatim inline</code></h3>
<p>The point here is to test 1) <code>verbatim</code> code in headings, and 2) ending a heading with verbatim code as this triggers a special case in LaTeX.</p>
</body>
</html>
pandoc 1.10.1
Compiled with citeproc-hs 0.3.6, texmath 0.6.0.6, highlighting-kate 0.5.1.
Syntax highlighting is supported for the following languages:
    Actionscript, Ada, Alert, Alert_indent, Apache, Asn1, Asp, Awk, Bash,
    Bibtex, Boo, C, Changelog, Clojure, Cmake, Coffeescript, Coldfusion,
    Commonlisp, Cpp, Cs, Css, D, Diff, Djangotemplate, Doxygen, Dtd, Eiffel,
    Email, Erlang, Fortran, Fsharp, Gnuassembler, Go, Haskell, Haxe, Html, Ini,
    Java, Javadoc, Javascript, Json, Jsp, Latex, Lex, LiterateHaskell, Lua,
    Makefile, Mandoc, Matlab, Maxima, Metafont, Mips, Modula2, Modula3,
    Monobasic, Nasm, Noweb, Objectivec, Objectivecpp, Ocaml, Octave, Pascal,
    Perl, Php, Pike, Postscript, Prolog, Python, R, Relaxngcompact, Rhtml, Ruby,
    Scala, Scheme, Sci, Sed, Sgml, Sql, SqlMysql, SqlPostgresql, Tcl, Texinfo,
    Verilog, Vhdl, Xml, Xorg, Xslt, Xul, Yacc, Yaml
Copyright (C) 2006-2013 John MacFarlane
Web:  http://johnmacfarlane.net/pandoc
This is free software; see the source for copying conditions.  There is no
warranty, not even for merchantability or fitness for a particular purpose.

************** File: html_template.do.txt *****************
DATE: today

===== This is a test of HTML templates =====

Note: When using HTML templates, the Doconce file cannot have a title
(to avoid generating a header). It should neither have an author.

======= This is a 7 heading =======

Here is some code:
!bc pycod
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h
!ec

===== This is a 5 heading =====

The template can be any HTML file with header and footer and
three possible slots: *title*, *date* and *main*,
where *main* will become the Doconce file (the main body of text),
*title* is the first heading in the Doconce file, and
*date* is extracted from the Doconce file (if present).



************** File: html_template1.html *****************
<! -- test template -->

<?xml version="1.0" encoding="utf-8" ?>
<html>
<head>

<style type="text/css">
    body {
      margin-top: 1.0em;
      <!-- background-color: #e1c931; -->
      background-color: #000000;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 1.8em; color: #1e36ce; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { text-align: left; color: #1e36ce; }
    h4 { text-align: left; color: #1e36ce; }
    a { color: #1e36ce; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    <!-- white on black: pre { background: #000; color: #fff; padding: 15px;} -->
    <!-- black on white: pre { background: #fff; color: #000; padding: 15px;} -->
    pre { background: #EDEDED; color: #000; padding: 15px;}
    <!-- http://www.december.com/html/spec/color0.html -->
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
</style>

<!-- Use MathJax to render mathematics -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>

<body bgcolor="white">

<title>This is a test of HTML templates</title>

<h1>Date: Jan 32, 2100</h1>

<!-- main body -->


<!-- tocinfo
{'highest level': 1,
 'sections': [(' This is a test of HTML templates ', 2, None, '___sec0'),
              (' This is a 7 heading ', 1, None, '___sec1'),
              (' This is a 5 heading ', 2, None, '___sec2')]}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<h3>This is a test of HTML templates  <a name="___sec0"></a></h3>

<p>
Note: When using HTML templates, the Doconce file cannot have a title
(to avoid generating a header). It should neither have an author.

<h2>This is a 7 heading  <a name="___sec1"></a></h2>

<p>
Here is some code:
<!-- begin verbatim block  pycod-->
<pre><code>class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h
</code></pre>
<!-- end verbatim block -->

<h3>This is a 5 heading  <a name="___sec2"></a></h3>

<p>
The template can be any HTML file with header and footer and
three possible slots: <em>title</em>, <em>date</em> and <em>main</em>,
where <em>main</em> will become the Doconce file (the main body of text),
<em>title</em> is the first heading in the Doconce file, and
<em>date</em> is extracted from the Doconce file (if present).

<!-- ------------------- end of main content --------------- -->



<!-- end of main body -->
</body>
</html>



************** File: html_template.html *****************
<!-- Template for INF1100 web pages with University of Oslo web design -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="no" xml:lang="no" xmlns="http://www.w3.org/1999/xhtml">
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <!-- iPhone viewport -->
   <meta name="viewport" content="width=1020, user-scalable=yes" />


     <title>This is a test of HTML templates</title>

    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="http://www.uio.no/vrtx/decorating/resources/dist/images/favicon.ico" />
    <link type="text/css" rel="stylesheet" media="all" href="http://www.uio.no/vrtx/decorating/resources/dist/style/style.css" />

    <link type="text/css" rel="stylesheet" media="all" href="http://www.uio.no/vrtx/decorating/resources/dist/www.uio.no/logos/logos.css" />

    <link type="text/css" rel="stylesheet" media="print" href="http://www.uio.no/vrtx/decorating/resources/dist/style/print.css" />
    <link type="text/css" rel="stylesheet" media="handheld" href="http://www.uio.no/vrtx/decorating/resources/dist/style/handheld.css"/>

   <script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/jquery/jquery-1.4.2.min.js"></script>

   <meta name="MSSmartTagsPreventParsing" content="true" />
   <meta http-equiv="imagetoolbar" content="no" />




          <script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/js/share.js"></script>




  </head>


    <body class='faculty'  id="vrtx-structured-article">


    <!--stopindex-->
    <!-- Navigation start -->
    <ul id="hidnav">
      <li><a href="#globalnav">Hopp til global navigasjon</a></li>
      <li><a href="#main">Hopp til hovedinnholdet</a></li>

      <li><a href="#bottomnav">Hopp til bunnavigasjon</a></li>
      <li><a href="#footer">Hopp til kontaktinformasjon</a></li>
    </ul>
    <!-- Navigation end -->

    <!-- Page header starts -->
    <div id="head-globalnav">


     <!-- normal head -->


       <div id="head">

 	  <div id="logos">
	      <div id="uiologo" title="G&#229; til Universitetet i Oslo"><a href="http://www.uio.no"><span></span>Universitetet i Oslo</a></div>

              <!-- toppniv&#229; -->

	      <div id="facultylogo" title='G&#229; til Universitetet i Oslo'>
                <a href="/"><span></span>Universitetet i Oslo</a>
              </div>


	  </div>

	  <form class="searchform" method="get" action='/'>

	    <fieldset>
	      <label for="searchstring" class="searchstringlabel">S&#248;k i Universitetet i Oslo</label>
              <input type="hidden" name="vrtx" value="searchuio"/>
	      <input type="text" id="searchstring" name="query" value="" />
	      <button type="submit" class="searchsubmit"><span>S&oslash;k</span></button>
	    </fieldset>
	  </form>

	  <!-- head-menu -->
          <div id="head-menu">

              <ul class="ref-menu">

                 <!-- toppniv&#229; -->
                  <li><a href='/english'>English</a></li>


             </ul>

               <ul class="vrtx-uri-menu">

    <li class="for-ansatte">
  <a href="http://www.uio.no/for-ansatte/">For ansatte</a>
    </li>
  </ul>


          </div>
          <!-- head-menu -->
	</div>

        <!-- Global navigation start -->
	<div id="globalnav">

                <ul class="vrtx-tab-menu">

    <li class="root-folder parent-folder">
  <a href="http://www.uio.no/">Forsiden</a>
    </li>

    <li class="forskning">

  <a href="http://www.uio.no/forskning/">Forskning</a>
    </li>

    <li class="vrtx-active-item studier vrtx-current-item">
  <a href="http://www.uio.no/studier/">Studier</a>
    </li>

    <li class="livet-rundt-studiene">
  <a href="http://www.uio.no/livet-rundt-studiene/">Livet rundt studiene</a>

    </li>

    <li class="tjenester">
  <a href="http://www.uio.no/tjenester/">Tjenester og verkt&#248;y</a>
    </li>

    <li class="om">
  <a href="http://www.uio.no/om/">Om UiO</a>
    </li>

    <li class="personer">
  <a href="http://www.uio.no/personer/">Personer</a>
    </li>
  </ul>




        </div>
	<!-- Global navigation end -->

    </div>

    <!-- Page header end -->


    <div id="uiodoc">
        <!-- img-tag for print -->

           <!-- topp-/fakniv&#229; -->
            <img id="head-print" alt="print logo" src="http://www.uio.no/vrtx/decorating/resources/dist/www.uio.no/logos/faculty-small.png"/>



	<!-- Page content start -->
	<div id="main">
          <!--startindex-->

                     <!-- leftmenu (default) -->
            <!--stopindex-->
            <div id="left-main">
              <ul class="vrtx-breadcrumb-menu">
				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/"><span>Studier</span></a> </li>
				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/emner/"><span>Emner</span></a> </li>

				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/emner/matnat/"><span>Matematikk og naturvitenskap</span></a> </li>
				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/emner/matnat/ifi/"><span>Informatikk</span></a> </li>
				<li class="vrtx-parent" ><a href="http://www.uio.no/studier/emner/matnat/ifi/INF1100/"><span>INF1100</span></a>
    	<ul>
			<li class="vrtx-child"><a class="vrtx-marked" href="http://www.uio.no/studier/emner/matnat/ifi/INF1100/h12/"><span>H&#248;st 2012</span></a></li>

     	</ul>
   	 </li>
</ul>

            </div>
            <div id="right-main">
              <!--startindex-->


        <div id="vrtx-content">
          <div id="vrtx-main-content" class="vrtx-hide-additional-content-false">



<!-- tocinfo
{'highest level': 1,
 'sections': [(' This is a test of HTML templates ', 2, None, '___sec0'),
              (' This is a 7 heading ', 1, None, '___sec1'),
              (' This is a 5 heading ', 2, None, '___sec2')]}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<h3>This is a test of HTML templates  <a name="___sec0"></a></h3>

<p>
Note: When using HTML templates, the Doconce file cannot have a title
(to avoid generating a header). It should neither have an author.

<h2>This is a 7 heading  <a name="___sec1"></a></h2>

<p>
Here is some code:
<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Diff</span>:
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__init__</span>(<span style="color: #AA22FF">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #AA22FF">float</span>(h)

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Forward1</span>(Diff):
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__call__</span>(<span style="color: #AA22FF">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>f, <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>h
        <span style="color: #AA22FF; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h
</pre></div>

<h3>This is a 5 heading  <a name="___sec2"></a></h3>

<p>
The template can be any HTML file with header and footer and
three possible slots: <em>title</em>, <em>date</em> and <em>main</em>,
where <em>main</em> will become the Doconce file (the main body of text),
<em>title</em> is the first heading in the Doconce file, and
<em>date</em> is extracted from the Doconce file (if present).

<!-- ------------------- end of main content --------------- -->


	    	<div class="vrtx-date-info">
	    	<span class="published-date-label">Publisert</span> <span class="published-date">Jan 32, 2100</span>

	    	</div>

            <div class="vrtx-social-components">

<!-- begin email a friend js -->
<script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/js/email-a-friend.js"></script>
<!-- end email a friend js -->

<a class="vrtx-email-friend" href="http://www.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?vrtx=email-a-friend" onclick="javascript:popup('http://www.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?vrtx=email-a-friend'); return false">Tips en venn</a>

<div id="vrtx-share-component">
  <a href="#vrtx-share-link" id="vrtx-share-link" class="vrtx-share-link" name="vrtx-share-link">
  Del p&#229;...</a>
    <div id="vrtx-send-share">

      <div class="vrtx-send-inner">
        <div class="vrtx-share-top">
          <div class="vrtx-share-title">Del p&#229;...</div>
          <span><a href="#vrtx-share-link" class="vrtx-close-toolbox-send-share">
          Lukk</a></span>
        </div>
        <ul>
          <li><a href="http://www.facebook.com/share.php?u=http%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FINF1100%2Fh10%2Ftemplate.html&amp;t=Template" target="_blank" class="facebook">

          Facebook</a></li>
          <li><a href="http://twitter.com/home?status=http%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FINF1100%2Fh10%2Ftemplate.html" target="_blank" class="twitter">
          Twitter</a></li>
          <li><a href="http://del.icio.us/post?url=http%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FINF1100%2Fh10%2Ftemplate.html&amp;title=Template" target="_blank" class="delicious">
          del.icio.us</a></li>
        </ul>
     </div>

    </div>
</div>
          	</div>
          </div>
        </div>

              <!--stopindex-->
            </div>

          <!--stopindex-->
         </div>
	<!-- Page content end -->

      <!-- Bottom navigation start -->
	<div id="bottomnav">
           <div id="breadcrumb-container">
	     <div id="vrtx-breadcrumb-start" class="breadcrumb">
	       <span class="vrtx-uio"><a href="http://www.uio.no">UiO</a> <span class="vrtx-breadcrumb-delimiter">&gt;</span></span>

                 <span class="vrtx-faculty"><a href="/">Universitetet i Oslo</a> <span class="vrtx-breadcrumb-delimiter">&gt;</span></span>


             </div>

<div id="vrtx-breadcrumb" class="breadcrumb">
      <span class="vrtx-breadcrumb-level-2"><a href="http://www.uio.no/studier/">Studier</a>
      	<span class="vrtx-breadcrumb-delimiter">&gt;</span>
      </span>
</div>



           </div>
           <div id="bottom-menu">



        <div class="vrtx-subfolder-menu">

          <div class="vrtx-group-1">
    <ul class="resultset-1">
      <li>
    <a href="http://www.uio.no/studier/program/">Studieprogrammer</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/program/litteratur-aarsenhet/">Allmenn litteraturvitenskap (&#229;rsenhet)</a>
          	</li>

	          <li>
    <a href="http://www.uio.no/studier/program/akks/">Antikk kultur og klassiske spr&#229;k (bachelor)</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/program/antikk/">Antikk kultur og klassisk tradisjon (bachelor)</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/program/antikk-master/">Antikk kultur og klassisk tradisjon (master - to &#229;r)</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/program/anvma-master/">Anvendt matematikk og mekanikk</a>
          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/program">Mer...</a>
		</li>
  </ul>

      </li>
  </ul>

    <ul class="resultset-2">
      <li>
    <a href="http://www.uio.no/studier/opptak/">Opptak</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/opptak/so/">S&#248;ke opptak</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/opptak/gsk/">Generell studiekompetanse (GSK)</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/opptak/realkompetanse/">Realkompetanse</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/opptak/spesielle-krav/">Spesielle opptakskrav</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/opptak/enkeltemner/">Enkeltemner</a>
          	</li>
  </ul>
      </li>
  </ul>


    <ul class="resultset-3">
      <li>
    <a href="http://www.uio.no/studier/admin/">Administrer dine studier</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/admin/semesterregistrering/">Registreringer hvert semester</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/admin/melding/">Frister for meldinger til undervisning og eksamen</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/admin/semesteravgift/">Betale semesteravgift</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/admin/kort/">Semesterkort og studiekort</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/admin/karakterutskrift/">Bestille karakterutskrift</a>
          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/admin">Mer...</a>
		</li>
  </ul>

      </li>
  </ul>

    <ul class="resultset-4">
      <li>
    <a href="http://www.uio.no/studier/emner/">Emner</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/emner/hf/">Humanistiske fag</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emner/jus/">Jus</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emner/matnat/">Matematikk og naturvitenskap</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/emner/medisin/">Medisin</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emner/odont/">Odontologi</a>
          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/emner">Mer...</a>
		</li>

  </ul>
      </li>
  </ul>

    <ul class="resultset-5">
      <li>
    <a href="http://www.uio.no/studier/evu/">Etter- og videreutdanning</a>
  <ul>
	          <li>

    <a href="http://www.uio.no/studier/evu/kurs/">Studietilbud</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/evu/oppdrag/">Oppdragsundervisning</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/evu/erfaringsbasert-master/">Erfaringsbasert master</a>

          	</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-6">
      <li>
    <a href="http://www.uio.no/studier/studiestart/">Studiestart for nye studenter</a>
  <ul>

	          <li>
    <a href="http://www.uio.no/studier/studiestart/arrangementer/">Arrangementer</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/studiestart/fadderordning-for-nye-studenter/">Fadderordning for nye studenter</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/studiestart/fadderordningen/">Informasjon til fadderne</a>

          	</li>
  </ul>
      </li>
  </ul>

          </div>
          <div class="vrtx-group-2">
    <ul class="resultset-7">
      <li>
    <a href="http://www.uio.no/studier/tilrettelegging/">Har du spesielle behov?</a>

  <ul>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/adhd/">ADHD</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/asperger/">Asperger</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/tilrettelegging/bevegelseshemming/">Bevegelseshemming</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/dysleksi/">Dysleksi</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/kronisk-sydom/">Kronisk sykdom</a>

          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/tilrettelegging">Mer...</a>
		</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-8">
      <li>

    <a href="http://www.uio.no/studier/om/">Om studier</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/om/studier-og-grader/">Studiestruktur og grader</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/om/kvalitet/">Studiekvalitet</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/om/regelverk/">Lover og regler</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/om/godkjenning/">Godkjenning av utenlandsk utdanning</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/om/utvalg/">Komiteer og utvalg</a>
          	</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-9">
      <li>
    <a href="http://www.uio.no/studier/emnegrupper/">Emnegrupper</a>

  <ul>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/hf/">Humanistiske fag</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/jus/">Jus</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/emnegrupper/matnat/">Matematikk og naturvitenskap</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/sv/">Samfunnsvitenskap</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/teologi/">Teologi</a>

          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/emnegrupper">Mer...</a>
		</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-10">
      <li>

    <a href="http://www.uio.no/studier/ressurser/">L&#230;ringsressurser</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/bibliotek-lesesaler/">Bibliotek, lesesaler og PC-stuer</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/mifa/">Mangfold i fokus i akademia</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/skrivehjelp/">Skrivehjelp</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/spraak-tandem/">Spr&#229;k-tandem</a>
          	</li>
  </ul>

      </li>
  </ul>

    <ul class="resultset-11">
      <li>
    <a href="http://www.uio.no/studier/kontakt/">Kontakt oss</a>
      </li>
  </ul>

     </div>

        </div>



           </div>
        </div>
      <!-- Bottom navigation end -->
    </div>
    <!-- Page wrapper end -->
    <div id="footer-wrapper">

    <!-- Page footer start -->
      <div id="footer">
        <div id="footer-main" class="vcard">
	  <div class="institutelogo fn org"><span></span>Universitetet i Oslo : Universitetet i Oslo</div>


             <div class="adr visitor-adress">
  <span class="vrtx-label">N&#248;dnummer</span>
  <span>Ved brann, ulykker og alvorlige hendelser ring <br/>22 85 66 66</span>

</div>
<div class="adr mail-adress">
  <span class="vrtx-label">Adresse</span>
  <span class="post-office-box">Universitetet i Oslo</span>
  <span class="post-office-box">Boks 1072 Blindern</span>
  <span class="postal-code">0316</span>
  <span class="locality"> Oslo</span>

</div>
<div class="phone-fax-email">
  <span class="vrtx-label">Telefon og kontaktpunkter</span>
  <span class="tel">Sentralbord: 22 85 50 50</span>
  <a href="/om/kontaktinformasjon/">Kontaktpunkter UiO</a>
</div>




        </div>

        <div id="footer-admin">

          <ul class="unit-admin-links">
              <li>Ansvarlig for denne siden:</li>
              <li><a href="mailto:studieredaktor@admin.uio.no">Studieredakt&#248;r UiO</a></li>
          </ul>
          <ul class="vrtx-admin-links">
            <li><div class="vrtx-logout" id="vrtx-logout">
  <span class="vrtx-user">Lars Jahr R&#248;ine</span>
  <form id="logoutForm" action="https://www.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?action=logout" method="post" style="display:inline;">

  <input type="hidden"
         name="csrf-prevention-token"
         value="c3ed5c2f65171c0952ab9b76819ef85843a0e40f" />
    <button type="submit" id="logoutAction" name="logoutAction">Logg ut</button>
  </form>
  <!-- Hide submit button, display a link instead: -->
  <script type="text/javascript" language="Javascript"><!--
	   	document.getElementById("logoutAction").style.display = "none";
		var logoutLink = document.createElement("a");
		logoutLink.setAttribute("href","javascript:document.getElementById('logoutForm').submit();");
		logoutLink.innerHTML = "Logg ut"

		var lp = document.createElement("span");
		lp.innerHTML = "( ";
		var rp = document.createElement("span");
		rp.innerHTML = " )";
		document.getElementById("vrtx-logout").appendChild(lp);
		document.getElementById("vrtx-logout").appendChild(logoutLink);
		document.getElementById("vrtx-logout").appendChild(rp);
		// -->
  </script>
</div>
</li>
            <li>

  <a id="vrtx-manage-url" class="vrtx-manage-url" href="http://www-adm.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?vrtx=admin">Administrer dette dokumentet</a>
</li>
          </ul>
          <div id="cms">Drevet av <a href="http://www.uio.no/tjenester/it/web/vortex/">Vortex</a></div>
        </div>
      </div>
    <!-- Page footer end -->
   </div>

   <script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/jquery/autocomplete/jquery.autocomplete.js"></script>
   <script type="text/javascript" src="http://www.uio.no/vrtx/decorating/resources/dist/script/jquery-syntax/jquery.syntax.min.js"></script>
   <script type="text/javascript" src="http://www.uio.no/vrtx/decorating/resources/dist/script/uio.js"></script>
   <script type="text/javascript">
      $(document).ready(function() {
        var emnerParams = {selectFirst:false, width:226, max:50, delay:75};
        emnerAutocomplete('course-search', 'emner', emnerParams);
        gotoEmnerAutocompleteSuggestion('course-search');

        var personerParams = {minChars:3, selectFirst:false, width:233, max:50, delay:200, cacheLength:0};
        personerAutocomplete('person-search', 'person', personerParams, '/');
        gotoPersonerAutocompleteSuggestion('person-search');

      });
   </script>

   <!-- Greybox for Email a friend / Tips en venn -->
   <script type="text/javascript">
     var GB_ROOT_DIR = "http://www.uio.no/vrtx/decorating/resources/dist/script/greybox/";
   </script>

   <script type="text/javascript" src="http://www.uio.no/vrtx/decorating/resources/dist/script/greybox/AJS-combined-min.js"></script>

   </body>
</html>



************** File: template1.html *****************
<! -- test template -->

<?xml version="1.0" encoding="utf-8" ?>
<html>
<head>

<style type="text/css">
    body {
      margin-top: 1.0em;
      <!-- background-color: #e1c931; -->
      background-color: #000000;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 1.8em; color: #1e36ce; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { text-align: left; color: #1e36ce; }
    h4 { text-align: left; color: #1e36ce; }
    a { color: #1e36ce; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    <!-- white on black: pre { background: #000; color: #fff; padding: 15px;} -->
    <!-- black on white: pre { background: #fff; color: #000; padding: 15px;} -->
    pre { background: #EDEDED; color: #000; padding: 15px;}
    <!-- http://www.december.com/html/spec/color0.html -->
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
</style>

<!-- Use MathJax to render mathematics -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>

<body bgcolor="white">

<title>%(title)s</title>


<h1>Date: %(date)s</h1>

<!-- main body -->

%(main)s


<!-- end of main body -->
</body>
</html>


************** File: author1.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Test of one author at one institution">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}

</style>

</head>

<!-- tocinfo
{'highest level': 0,
 'sections': [(' Generalized References ', 0, 'genrefs', 'genrefs'),
              (' Test of math ', 0, None, '___sec1')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Test of one author at one institution</title>

<center><h1>Test of one author at one institution</h1></center>  <!-- document title -->

<p>
<!-- author(s): John Doe -->

<center>
<b>John Doe</b>  (<tt>doe at cyberspace.net</tt>)
</center>


<p>
<!-- institution -->

<center><b>Cyberspace Inc.</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
<!-- Externaldocument: testdoc -->

<h1>Generalized References <a name="genrefs"></a></h1>

<p>
Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers <em>generalized references</em> which allows
a reference to have two different formulations, one for internal
references and one for external references. Since LaTeX supports
references to labels in external documents via the <code>xr</code> package,
the generalized references in Doconce has a syntax that may utilize
the <code>xr</code> feature in LaTeX.

<p>
The syntax of generalized references reads
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">ref[internal][cite][external]
</pre></div>
<p>
If all <code>ref{label}</code> references in the text <code>internal</code> are references
to labels in the present document, the above <code>ref</code> command is replaced
by the text <code>internal</code>. Otherwise, if cite is non-empty and the format
is <code>latex</code> or <code>pdflatex</code> one assumes that the references in <code>internal</code>
are to external documents declared by a comment line <code>#
Externaldocuments: testdoc, mydoc</code> (usually after the title, authors,
and date). In this case the output text is <code>internal cite</code> and the
LaTeX package <code>xr</code> is used to handle the labels in the external documents.
If none of the two situations above applies, the <code>external</code>
text will be the output.

<p>
Here is a specific example on a generalized reference:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
ref[Section ref{subsec:ex}][in &quot;Langtangen, 2013&quot;:
&quot;http://doconce.googlecode.com/hg/test/demo_testdoc.html&quot;
cite{testdoc:12}][a &quot;section&quot;: &quot;demo_testdoc.html#___sec2&quot; in
the document &quot;A Document for Testing Doconce&quot;: &quot;demo_testdoc.html&quot;
cite{testdoc:12}], Doconce documents may include movies.
</pre></div>
<p>
This is rendered to the following text:
As explained in
a <a href="demo_testdoc.html#___sec2">section</a> in
the document <a href="demo_testdoc.html">A Document for Testing Doconce</a>
<a href="#testdoc:12">[1]</a>, Doconce documents may include movies.

<p>
And here is another example with internal references only:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Generalized references are described in ref[Section ref{genrefs}][][
the document *author1*].
</pre></div>
<p>
The text is rendered to "Generalized references are described in
the section <a href="#genrefs">Generalized References</a>."

<p>
<!-- We are testing chapter too to see if latex output then has -->
<!-- book style rather than article style. -->

<h1>Test of math  <a name="___sec1"></a></h1>

<p>
Inline math, \( a=b \), is the only math in this document.

<p>
<!-- Need BIBFILE because of cite{} examples -->

<h2>Bibliography</h2>

<p>

<ol>
 <li> <a name="testdoc:12"></a> <b>H. P. Langtangen</b>. 
    A Document for Testing Doconce,
    <em>Simula Research Laboratory</em>,
    2013,
    <a href="http://doconce.googlecode.com/hg/test/demo_testdoc.html"><tt>http://doconce.googlecode.com/hg/test/demo_testdoc.html</tt></a>.</li>
</ol>


<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: author1.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---




% References to labels in external documents:
\usepackage{xr}
\externaldocument{testdoc}

% insert custom LaTeX commands...


\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{Test of one author at one institution}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
Test of one author at one institution
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{Test of one author at one institution}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{Test of one author at one institution}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Test of one author at one institution
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{John Doe\footnote{Email: \texttt{doe@cyberspace.net}. Cyberspace Inc.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

{\Large\textsf{John Doe (\texttt{doe@cyberspace.net})}}\\ [3mm]

\ \\ [2mm]

{\large\textsf{Cyberspace Inc.} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{John Doe}
% Short version of authors:
%\authorrunning{...}
\institute{John Doe\at Cyberspace Inc.\email{doe@cyberspace.net}}

% #elif LATEX_HEADING == "beamer"
\author{John Doe\inst{1}}
\institute{Cyberspace Inc.\inst{1}}
% #else

\begin{center}
{\bf John Doe (\texttt{doe@cyberspace.net})}
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small Cyberspace Inc.}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


% Externaldocument: testdoc

\chapter{Generalized References}
\label{genrefs}

Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers \emph{generalized references} which allows
a reference to have two different formulations, one for internal
references and one for external references. Since {\LaTeX} supports
references to labels in external documents via the \code{xr} package,
the generalized references in Doconce has a syntax that may utilize
the \code{xr} feature in {\LaTeX}.

The syntax of generalized references reads
\bccq
ref[internal][cite][external]
\eccq
If all \code{ref{label}} references in the text \code{internal} are references
to labels in the present document, the above \code{ref} command is replaced
by the text \code{internal}. Otherwise, if cite is non-empty and the format
is \code{latex} or \code{pdflatex} one assumes that the references in \code{internal}
are to external documents declared by a comment line \code{#
Externaldocuments: testdoc, mydoc} (usually after the title, authors,
and date). In this case the output text is \code{internal cite} and the
{\LaTeX} package \code{xr} is used to handle the labels in the external documents.
If none of the two situations above applies, the \code{external}
text will be the output.

Here is a specific example on a generalized reference:
\bccq
As explained in
ref[Section ref{subsec:ex}][in "Langtangen, 2013":
"http://doconce.googlecode.com/hg/test/demo_testdoc.html"
cite{testdoc:12}][a "section": "demo_testdoc.html#___sec2" in
the document "A Document for Testing Doconce": "demo_testdoc.html"
cite{testdoc:12}], Doconce documents may include movies.
\eccq
This is rendered to the following text:
As explained in
Section~\ref{subsec:ex} in \href{{http://doconce.googlecode.com/hg/test/demo_testdoc.html}}{Langtangen, 2013}
\cite{testdoc:12}, Doconce documents may include movies.

And here is another example with internal references only:
\bccq
Generalized references are described in ref[Section ref{genrefs}][][
the document *author1*].
\eccq
The text is rendered to "Generalized references are described in
Section~\ref{genrefs}."

% We are testing chapter too to see if latex output then has
% book style rather than article style.

\chapter{Test of math}

Inline math, $a=b$, is the only math in this document.

% Need BIBFILE because of \cite{} examples


\bibliographystyle{plain}
\bibliography{papers.bib}

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: author1.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

Test of one author at one institution
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

:Author: John Doe (doe at cyberspace.net)
:Date: Jan 32, 2100

.. Externaldocument: testdoc


.. _genrefs:

Generalized References
%%%%%%%%%%%%%%%%%%%%%%

Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers *generalized references* which allows
a reference to have two different formulations, one for internal
references and one for external references. Since LaTeX supports
references to labels in external documents via the ``xr`` package,
the generalized references in Doconce has a syntax that may utilize
the ``xr`` feature in LaTeX.

The syntax of generalized references reads

.. code-block:: text


        ref[internal][cite][external]

If all `:ref:`label`` references in the text ``internal`` are references
to labels in the present document, the above ``ref`` command is replaced
by the text ``internal``. Otherwise, if cite is non-empty and the format
is ``latex`` or ``pdflatex`` one assumes that the references in ``internal``
are to external documents declared by a comment line ``#
Externaldocuments: testdoc, mydoc`` (usually after the title, authors,
and date). In this case the output text is ``internal cite`` and the
LaTeX package ``xr`` is used to handle the labels in the external documents.
If none of the two situations above applies, the ``external``
text will be the output.

Here is a specific example on a generalized reference:

.. code-block:: text


        As explained in
        ref[Section ref{subsec:ex}][in "Langtangen, 2013":
        "http://doconce.googlecode.com/hg/test/demo_testdoc.html"
        cite{testdoc:12}][a "section": "demo_testdoc.html#___sec2" in
        the document "A Document for Testing Doconce": "demo_testdoc.html"
        cite{testdoc:12}], Doconce documents may include movies.

This is rendered to the following text:
As explained in
a `section <demo_testdoc.html#___sec2>`_ in
the document `A Document for Testing Doconce <demo_testdoc.html>`_
[Ref1]_, Doconce documents may include movies.

And here is another example with internal references only:

.. code-block:: text


        Generalized references are described in ref[Section ref{genrefs}][][
        the document *author1*].

The text is rendered to "Generalized references are described in
the section :ref:`genrefs`."

.. We are testing chapter too to see if latex output then has

.. book style rather than article style.


Test of math
%%%%%%%%%%%%

Inline math, :math:`a=b`, is the only math in this document.

.. Need BIBFILE because of cite{} examples


Bibliography
============

.. [Ref1]
   **H. P. Langtangen**. A Document for Testing Doconce,
   *Simula Research Laboratory*,
   2013,
   `http://doconce.googlecode.com/hg/test/demo_testdoc.html <http://doconce.googlecode.com/hg/test/demo_testdoc.html>`_.



************** File: author1.txt *****************
Test of one author at one institution
=====================================

John Doe [1] (doe@cyberspace.net)

[1] Cyberspace Inc.

Date: Jan 32, 2100

Generalized References
%%%%%%%%%%%%%%%%%%%%%%

Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers *generalized references* which allows
a reference to have two different formulations, one for internal
references and one for external references. Since LaTeX supports
references to labels in external documents via the xr package,
the generalized references in Doconce has a syntax that may utilize
the xr feature in LaTeX.

The syntax of generalized references reads::


        ref[internal][cite][external]

If all ref{label} references in the text internal are references
to labels in the present document, the above ref command is replaced
by the text internal. Otherwise, if cite is non-empty and the format
is latex or pdflatex one assumes that the references in internal
are to external documents declared by a comment line #
Externaldocuments: testdoc, mydoc (usually after the title, authors,
and date). In this case the output text is internal cite and the
LaTeX package xr is used to handle the labels in the external documents.
If none of the two situations above applies, the external
text will be the output.

Here is a specific example on a generalized reference::


        As explained in
        ref[Section ref{subsec:ex}][in "Langtangen, 2013":
        "http://doconce.googlecode.com/hg/test/demo_testdoc.html"
        cite{testdoc:12}][a "section": "demo_testdoc.html#___sec2" in
        the document "A Document for Testing Doconce": "demo_testdoc.html"
        cite{testdoc:12}], Doconce documents may include movies.

This is rendered to the following text:
As explained in
a section (demo_testdoc.html#___sec2) in
the document A Document for Testing Doconce (demo_testdoc.html)
[1], Doconce documents may include movies.

And here is another example with internal references only::


        Generalized references are described in ref[Section ref{genrefs}][][
        the document *author1*].

The text is rendered to "Generalized references are described in
the section "Generalized References"."


Test of math
%%%%%%%%%%%%

Inline math, a=b, is the only math in this document.


Bibliography
============

 1. H. P. Langtangen. 
    A Document for Testing Doconce,
    *Simula Research Laboratory*,
    2013,
    http://doconce.googlecode.com/hg/test/demotestdoc.html.


************** File: ._part0000_testdoc.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="A Document for Testing Doconce">
<meta name="keywords" content="figures,movies,index with subindex,index, with comma, and one more">



<style type="text/css">
    /* solarized style */
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #FFBF00;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #fbeed5;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0000"></a>
<!-- begin top navigation -->
<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- end top navigation -->

<p>
<!-- ------------------- main content ---------------------- -->


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen, Kaare Dump, A. Dummy Author, I. S. Overworked, and J. Doe -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Table of contents</h2>

<p>
<a href="._part0001_testdoc.html#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:ex"> Subsection 2: Testing figures and movies </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec3"> Test of movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec5"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec8"> Bibliography test </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec11"> LaTeX Mathematics </a><br>
<a href="._part0002_testdoc.html#___sec12"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec14"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec15"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec20"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec21"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec22"> Example 2: Just an example </a><br>
<a href="._part0002_testdoc.html#___sec23"> Here goes another section </a><br>
<a href="._part0002_testdoc.html#___sec24"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="._part0002_testdoc.html#___sec27"> References </a><br>
<a href="._part0002_testdoc.html#___sec28"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec29"> A subsection within an appendix </a><br>
<a href="._part0002_testdoc.html#___sec30"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec31"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec34"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec35"> Appendix: Testing inline comments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a><br>

<p>
<p>
<!-- begin bottom navigation -->
<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- end bottom navigation -->

<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: ._part0001_testdoc.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="A Document for Testing Doconce">
<meta name="keywords" content="figures,movies,index with subindex,index, with comma, and one more">



<style type="text/css">
    /* solarized style */
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #FFBF00;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #fbeed5;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0001"></a>
<!-- begin top navigation -->
<a href="._part0000_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>

<a href="._part0002_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- end top navigation -->

<p>
<!-- !split -->

<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>
<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->

<h2>Section 1 <a name="sec1"></a></h2>

<p>
Here is a nested list:

<p>

<table border="0">

  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> item1</li>
  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> item2</li>
  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> item3 which continues
    on the next line to test that feature</li>
  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> and a sublist</li>

<table border="0">

    </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_green2.png"></td><td> with indented subitem1</li>
    </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_green2.png"></td><td> and a subitem2</li>
</td></tr></table>


  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> and perhaps an ordered sublist</li>

<ol>
   </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> first item</li>
   </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> second item,
      continuing on a new line</li>
</ol>

</td></tr></table>


<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<p>
<p>
<!-- begin bottom navigation -->
<a href="._part0000_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>

<a href="._part0002_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- end bottom navigation -->

<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: ._part0002_testdoc.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="A Document for Testing Doconce">
<meta name="keywords" content="figures,movies,index with subindex,index, with comma, and one more">



<style type="text/css">
    /* solarized style */
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #FFBF00;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #fbeed5;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0002"></a>
<!-- begin top navigation -->
<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>
<!-- end top navigation -->

<p>
<!-- !split and check if these extra words are included properly in the comment -->

<h3>Subsection 1  <a name="___sec1"></a></h3>

<p>
More text, with a reference back to the section <a href="._part0001_testdoc.html#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>

<!-- code=fortran (from !bc fcod) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #AA22FF; font-weight: bold">subroutine </span><span style="color: #B8860B">test</span>()
      <span style="color: #00BB00; font-weight: bold">integer </span><span style="color: #B8860B">i</span>
      <span style="color: #00BB00; font-weight: bold">real</span><span style="color: #666666">*8</span> <span style="color: #B8860B">r</span>
      <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #AA22FF; font-weight: bold">do </span><span style="color: #B8860B">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #B8860B">i</span>
         <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #B8860B">r</span> <span style="color: #666666">+</span> <span style="color: #B8860B">i</span>
      <span style="color: #AA22FF; font-weight: bold">end do</span>
<span style="color: #AA22FF; font-weight: bold">      return</span>
<span style="color: #B8860B">C</span>     <span style="color: #B8860B">END1</span>

      <span style="color: #AA22FF; font-weight: bold">program </span><span style="color: #B8860B">testme</span>
      <span style="color: #AA22FF; font-weight: bold">call </span><span style="color: #B8860B">test</span>()
      <span style="color: #AA22FF; font-weight: bold">return</span>
</pre></div>
</td></tr></table><p>
and then just the subroutine,
<p>

<!-- code=fortran (from !bc fcod) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #AA22FF; font-weight: bold">subroutine </span><span style="color: #B8860B">test</span>()
      <span style="color: #00BB00; font-weight: bold">integer </span><span style="color: #B8860B">i</span>
      <span style="color: #00BB00; font-weight: bold">real</span><span style="color: #666666">*8</span> <span style="color: #B8860B">r</span>
      <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #AA22FF; font-weight: bold">do </span><span style="color: #B8860B">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #B8860B">i</span>
         <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #B8860B">r</span> <span style="color: #666666">+</span> <span style="color: #B8860B">i</span>
      <span style="color: #AA22FF; font-weight: bold">end do</span>
<span style="color: #AA22FF; font-weight: bold">      return</span>
</pre></div>
</td></tr></table><p>
and finally the complete file:
<p>

<!-- code=fortran (from !bc fpro) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B8860B">C</span>     <span style="color: #B8860B">a</span> <span style="color: #B8860B">comment</span>

      <span style="color: #AA22FF; font-weight: bold">subroutine </span><span style="color: #B8860B">test</span>()
      <span style="color: #00BB00; font-weight: bold">integer </span><span style="color: #B8860B">i</span>
      <span style="color: #00BB00; font-weight: bold">real</span><span style="color: #666666">*8</span> <span style="color: #B8860B">r</span>
      <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #AA22FF; font-weight: bold">do </span><span style="color: #B8860B">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #B8860B">i</span>
         <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #B8860B">r</span> <span style="color: #666666">+</span> <span style="color: #B8860B">i</span>
      <span style="color: #AA22FF; font-weight: bold">end do</span>
<span style="color: #AA22FF; font-weight: bold">      return</span>
<span style="color: #B8860B">C</span>     <span style="color: #B8860B">END1</span>

      <span style="color: #AA22FF; font-weight: bold">program </span><span style="color: #B8860B">testme</span>
      <span style="color: #AA22FF; font-weight: bold">call </span><span style="color: #B8860B">test</span>()
      <span style="color: #AA22FF; font-weight: bold">return</span>
</pre></div>
</td></tr></table><p>
Testing other code environments. First Python:
<p>

<!-- code=text typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
</td></tr></table><p>
which gets rendered as

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">f</span>(x):
    <span style="color: #AA22FF; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
</td></tr></table><p>
Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>
Then Cython:
<p>

<!-- code=cython (from !bc cycod) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">cpdef</span> <span style="color: #00A000">f</span>(double x):
    <span style="color: #AA22FF; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
</td></tr></table><p>
<!-- This one tests a + sign before a code environment -->
C++:
<p>

<!-- code=c++ (from !bc cpppro) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008800">#include &lt;iostream&gt;</span>

<span style="color: #00BB00; font-weight: bold">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BB4444">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #AA22FF; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
</td></tr></table><p>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
</td></tr></table><p>
which then is typeset as

<p>

<!-- code=text (from !bc cod) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
</td></tr></table><p>
HTML:

<p>

<!-- code=html (from !bc htmlcod) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;table&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>Column 1<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>Column 2<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>0.67526 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>0.92871 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #008800; font-style: italic">&lt;!-- comment --&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/table&gt;</span>
</pre></div>
</td></tr></table><p>
System call:
<p>

<!-- code=bash (from !bc sys) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #AA22FF">test</span>
Terminal&gt; <span style="color: #AA22FF">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
</td></tr></table><p>
It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>
Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.

<h3>Subsection 2: Testing figures and movies <a name="subsec:ex"></a></h3>

<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>
<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>
Figures without captions are allowed and will be inlined.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<h4>Test of movies  <a name="___sec3"></a></h4>

<p>
Movie <a href="#mov:tsunami">mov:tsunami</a> shows a tsunami.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em>Mjolnir tsunami (by Sylfest Glimsdal) <a name="mov:tsunami"></a>.</em></p>


<p>
Test empty caption (for inline movie):

<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em></em></p>


<p>
<!-- Test wrong syntax and multi-line caption -->

<p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>
<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>

<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Computational fluid dynamics movie.</em>



<p>
<!-- Test multi-line caption in figure -->

<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>
<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in \( t_{i+1} \). <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<p>
<!-- Test URL as figure name -->

<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<p>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<p>
<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<h3>The \( \theta \) parameter (not \( \nabla \)?) <a name="decay:sec:theta"></a></h3>

<p>
Functions do not always need to be advanced, here is one
involving \( \theta \):
<p>

<!-- code=text typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
</td></tr></table><p>
<b>More on \( \theta \).</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
\( \frac{1}{2} \), \( {1/2} \), \( \pmb{x} \), \( \frac{Du}{dt} \),
both inline and in block:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
Or with align with label and numbers:

<p>
$$
\begin{align}
\frac{Du}{dt} &= 0
\label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\label{aligneq2}
\end{align}
$$

<h3>Custom Environments  <a name="___sec5"></a></h3>

<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>
<!-- begin theorem -->
<a name="theorem:fundamental1"></a>

<p>
<b>Theorem 5.</b>
Let \( a=1 \) and \( b=2 \). Then \( c=3 \).
<!-- end theorem -->

<p>
<!-- begin proof -->
<b>Proof.</b>
Since \( c=a+b \), the result follows from straightforward addition.
\( \Diamond \)
<!-- end proof -->

<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<h3>Tables <a name="subsec:table"></a></h3>

<p>
<!-- index with comma could fool sphinx -->

<p>
Let us take this table from the manual:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>
The Doconce source code reads
<p>

<!-- code=text (from !bc ccq) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
</td></tr></table><p>
Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>     \( i \)      </b></td> <td align="center"><b>    \( h_i \)     </b></td> <td align="center"><b>  \( \bar T_i \)  </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>            exact             </b></td> <td align="center"><b>       <code>v_1</code>       </b></td> <td align="center"><b> \( a_i \) + <code>v_2</code> </b></td> <td align="center"><b>     <code>verb_3_</code>     </b></td> </tr>
<tr><td align="right">   9                               </td> <td align="right">   9.62                            </td> <td align="right">   5.57                            </td> <td align="right">   8.98                            </td> </tr>
<tr><td align="right">   -20                             </td> <td align="right">   -23.39                          </td> <td align="right">   -7.65                           </td> <td align="right">   -19.93                          </td> </tr>
<tr><td align="right">   10                              </td> <td align="right">   17.74                           </td> <td align="right">   -4.50                           </td> <td align="right">   9.96                            </td> </tr>
<tr><td align="right">   0                               </td> <td align="right">   -9.19                           </td> <td align="right">   4.13                            </td> <td align="right">   -0.26                           </td> </tr>
</table>

<h3>A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec7"></a></h3>

<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math \( a_{i-1} \).</b>
Here is
some text.

<h3>Bibliography test  <a name="___sec8"></a></h3>

<p>
Here is an example: <a href="#Langtangen_Pedersen_2002">[1]</a> discussed propagation of
large destructive water waves, <a href="#Langtangen_et_al_2002">[2]</a> gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in <a href="#Langtangen_1994a">[3]</a>.
The book chapter <a href="#Mardal_et_al_2003a">[4]</a> contains information on
C++ software tools for programming multigrid methods. A real retro
reference is <a href="#Langtangen_1988d">[5]</a> about a big FORTRAN package.
Multiple references are also possible, e.g., see
<a href="#Langtangen_Pedersen_2002">[1]</a> <a href="#Mardal_et_al_2003a">[4]</a>.

<p>
We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
<a href="#Langtangen_1992c">[6]</a> <a href="#Langtangen_1994a">[3]</a> <a href="#Mortensen_et_al_2011">[7]</a> <a href="#Langtangen_Pedersen_2002">[1]</a>
and
<a href="#Langtangen_et_al_2002">[2]</a> <a href="#Glimsdal_et_al_20006">[8]</a> <a href="#Rahman_et_al_2006b">[9]</a> <a href="#Haga_et_al_2011a">[10]</a> <a href="#Langtangen_2003a">[11]</a> <a href="#Langtangen_2008a">[12]</a> <a href="#Langtangen:95">[13]</a>
and all the work of
<a href="#Langtangen_2012">[14]</a> <a href="#Mardal_et_al_2003a">[4]</a> <a href="#Jeberg_et_al_2004">[15]</a> as well as
old work <a href="#Langtangen_1988d">[5]</a> and <a href="#Langtangen_1989e">[16]</a>, and the
talk <a href="#Langtangen_talk_2007a">[17]</a>.
Langtangen also had two thesis <a href="#Langtangen:85">[18]</a> <a href="#Langtangen_1989e">[16]</a>.
More retro citations are
the old ME-IN323 book <a href="#Langtangen:91">[19]</a> and the
<a href="#Langtangen:94b">[20]</a> OONSKI '94 paper.

<p>
<!-- --- begin exercise --- -->

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>

<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples_as_exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>
<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<p>
<!-- --- end exercise --- -->

<h3>URLs <a name="subsubsec:ex"></a></h3>

<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Mail addresses can also be used: <a href="mailto:hpl@simula.no"><tt>hpl@simula.no</tt></a>, or just a <a href="mailto:hpl@simula.no">mail link</a>, or a raw <a href="mailto:hpl@simula.no"><tt>mailto:hpl@simula.no</tt></a>.

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>
For the <code>--device=paper</code> option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
<a href="https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py"><tt>decay_mod</tt></a>.

<p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<p>
<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--device=paper</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<h3>LaTeX Mathematics  <a name="___sec11"></a></h3>

<p>
Here is an equation without label using backslash-bracket environment:
$$ a = b + c $$

or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$

We can refer to this equation by \eqref{my:eq1}.

<p>
Here is a system without equation numbers, using the align-astrisk environment:
$$
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
$$


<p>
And here is a system of equations with labels in an align environment:
$$
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
$$

We can refer to \eqref{eq1}-\eqref{eq2}. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in <code>CG-2</code>.
Also test \( a_{i-j} \) as well as \( kx-wt \).

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$

Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$

We can refer to the last equation by \eqref{split:envir:eq}.

<p>
Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$


<p>
Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$

Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

<p>
Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<h2>Exercises  <a name="___sec12"></a></h2>

<p>
<!-- --- begin exercise --- -->

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/exercise1.svg" width=100 align="right">

<!-- keywords = random numbers; Monte Carlo simulation -->

<p>
<!-- Torture tests -->

<p>
Make a program that simulates flipping a coin \( N \) times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<p>
<!-- Test syntax error -->

<h4>Remarks  <a name="___sec14"></a></h4>

<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> Mark 1.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> Mark 2.
<!-- --- begin hint in exercise --- --></li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Draw an integer among \( \{1,2\} \) with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
If the <code>random.random()</code> function returns a number \( <1/2 \), let it be
head, otherwise tail. Repeat this \( N \) number of times.
<!-- --- end answer of exercise --- -->

<p>
Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<p>
<!-- --- end exercise --- -->

<h3>Not an exercise  <a name="___sec15"></a></h3>

<p>
Should be possible to stick a normal section in the middle of many
exercises.

<p>
<!-- --- begin exercise --- -->

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/exercise1.svg" width=100 align="right">


<p>
<!-- Minimalistic exercise -->

<p>
What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval \( [0,1) \)?

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw \( N \) such random numbers using Python's standard <code>random</code> module,
count how many of them, \( M \), that fall in the interval \( (0.5,0.6) \), and
compute the probability as \( M/N \).
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/exercise1.svg" width=100 align="right">


<p>
The formula for a circle is given by

<p>
$$
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
$$

where \( R \) is the radius of the circle, \( (x_0,y_0) \) is the
center point, and \( t \) is a parameter in the unit interval \( [0,1] \).
For any \( t \), \( (x,y) \) is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>

<!-- code=python (from !bc pypro) typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #AA22FF; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #AA22FF; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
</td></tr></table><p>
<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>
The goal of this project is to draw \( N \) circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>
<b>a)</b>
Let \( R \) be normally distributed and \( (x_0,y_0) \) uniformly distributed.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
\( x_0 \), \( y_0 \), and \( R \) quantities.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->

<p>

<p>
<b>b)</b>
Let \( R \) be uniformly distributed and \( (x_0,y_0) \) normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let \( R \) and \( (x_0,y_0) \) be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<p>
<!-- Closing remarks for this Project -->

<h4>Remarks  <a name="___sec18"></a></h4>

<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/exercise1.svg" width=100 align="right">


<p>
Intro to this exercise. Questions are in subexercises below.

<p>
<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>

<p>
<b>a)</b>
Subexercises are numbered a), b), etc.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math \( a=b \) in hint:

<p>
$$ a=b. $$

And with code (in plain verbatim) returning \( x+1 \) in hint:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
</td></tr></table><p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
Short answer to subexercise a).
With math in answer: \( a=b \).
<!-- --- end answer of exercise --- -->

<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>
Some math \( \cos^2 x + \sin^2 x = 1 \) written one a single line:

<p>
$$ \cos^2 x + \sin^2 x = 1 \thinspace .$$


<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.

<p>

<p>
<!-- Closing remarks for this Exercise -->

<h4>Remarks  <a name="___sec20"></a></h4>

<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec21"></a></h3>

<p>
<!-- Another minimalistic exercise -->

<p>
Just some text. And some math saying that \( e^0=1 \) on a single line,
to test that math block insertion is correct:

<p>
$$ \exp{(0)} = 1 $$


<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>
</td></tr></table><p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Example 2: Just an example  <a name="___sec22"></a></h3>

<p>
<!-- This example needs the --examples_as_exercises option, otherwise -->
<!-- it is just typeset as it is written. -->

<p>
<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<p>
<!-- --- end exercise --- -->

<h2>Here goes another section  <a name="___sec23"></a></h2>

<p>
With some text, before we continue with exercises.

<h2>More Exercises  <a name="___sec24"></a></h2>

<p>
<!-- --- begin exercise --- -->

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/exercise1.svg" width=100 align="right">


<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/exercise1.svg" width=100 align="right">


<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<p>
<!-- --- end exercise --- -->

<h2>References  <a name="___sec27"></a></h2>

<h2>Bibliography</h2>

<p>

<ol>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_Pedersen_2002"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Propagation of Large Destructive Waves,
    <em>International Journal of Applied Mechanics and Engineering</em>,
    7(1),
    pp. 187-204,
    2002.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_et_al_2002"></a> <b>H. P. Langtangen, K.-A. Mardal and R. Winther</b>. 
    Numerical Methods for Incompressible Viscous Flow,
    <em>Advances in Water Resources</em>,
    25,
    pp. 1125-1146,
    2002.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_1994a"></a> <b>H. P. Langtangen</b>. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    <em>SIAM Journal of Scientific and Statistical Computing</em>,
    15,
    pp. 997-996,
    1994.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Mardal_et_al_2003a"></a> <b>K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen</b>. 
    Software Tools for Multigrid Methods,
    <em>Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming</em>,
    edited by <b>H. P. Langtangen and A. Tveito</b>,
    Springer,
    2003.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_1988d"></a> <b>H. P. Langtangen</b>. 
    The FEMDEQS Program System,
    <em>Department of Mathematics, University of Oslo</em>,
    1989.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_1992c"></a> <b>H. P. Langtangen</b>. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    <em>SIAM Journal on Scientific Computing</em>,
    13,
    pp. 1394-1417,
    1992.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Mortensen_et_al_2011"></a> <b>M. Mortensen, H. P. Langtangen and G. N. Wells</b>. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    <em>Advances in Water Resources</em>,
    34(9),
    <a href="http://dx.doi.org/10.1016/j.advwatres.2011.02.013">doi: 10.1016/j.advwatres.2011.02.013</a>,
    2011.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Glimsdal_et_al_20006"></a> <b>S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt</b>. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    <em>International Journal of Fluid Mechanics Research</em>,
    33(1),
    pp. 15-43,
    2006.</li>
 </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Rahman_et_al_2006b"></a> <b>S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen</b>. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    <em>Physical Review B: Condensed Matter and Materials Physics</em>,
    74,
    2006.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Haga_et_al_2011a"></a> <b>J. B. Haga, H. Osnes and H. P. Langtangen</b>. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    <em>International Journal of Analytical and Numerical Methods in Geomechanics</em>,
    <a href="http://dx.doi.org/10.1002/nag.1062">doi: 10.1002/nag.1062</a>,
    2011,
    <a href="http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract"><tt>http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract</tt></a>.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_2003a"></a> <b>H. P. Langtangen</b>. 
    <em>Computational Partial Differential Equations - Numerical Methods and Diffpack Programming</em>,
    Springer,
    2003.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_2008a"></a> <b>H. P. Langtangen</b>. 
    <em>Python Scripting for Computational Science</em>,
    Springer,
    2008.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen:95"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by <b>J. Grue, B. Gjevik and J. E. Weber</b>,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    <a href="http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310"><tt>http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310</tt></a>.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_2012"></a> <b>H. P. Langtangen</b>. 
    <em>A Primer on Scientific Programming With Python</em>,
    Springer,
    2012.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Jeberg_et_al_2004"></a> <b>P. V. Jeberg, H. P. Langtangen and C. B. Terp</b>. 
    Optimization With Diffpack: Practical Example From Welding,
    <em>Simula Research Laboratory</em>,
    2004.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_1989e"></a> <b>H. P. Langtangen</b>. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen_talk_2007a"></a> <b>H. P. Langtangen</b>. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen:85"></a> <b>H. P. Langtangen</b>. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen:91"></a> <b>H. P. Langtangen and A. Tveito</b>. 
    Numerical Methods in Continuum Mechanics,
    <em>Center for Industrial Research</em>,
    1991.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/bullet_red2.png"></td><td> <a name="Langtangen:94b"></a> <b>H. P. Langtangen</b>. 
    Diffpack: Software for Partial Differential Equations,
    <em>Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA</em>,
    edited by <b>A. Vermeulen</b>,
    1994.</li>
</ol>

<h2>Appendix: Just for testing; part I  <a name="___sec28"></a></h2>

<p>
This is the first appendix.

<h3>A subsection within an appendix  <a name="___sec29"></a></h3>

<p>
Some text.

<h2>Appendix: Just for testing; part II  <a name="___sec30"></a></h2>

<p>
This is more stuff for an appendix.

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>

<p>
Without label.

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles  <a name="___sec34"></a></h3>

<p>
Without label.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Tip.</b>
Here is a tip or hint box, typeset as a notice box.
</div>
<p>
Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent <a href="http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/">Script for Introduction to Version Control</a> provides a more detailed motivation why you will benefit greatly
from using version control systems.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Summary.</b>
<b>Bold remark:</b> Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
</div>
<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files are <a href="http://dropbox.com">Dropbox</a> and <a href="http://drive.google.com">Google Drive</a>.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

<p>
More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

<p>
The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

<p>
All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.

<h3>Appendix: Testing inline comments  <a name="___sec35"></a></h3>

<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. 
<!-- begin inline comment -->
<font color="red">[<b>hpl 1</b>: <em>not sure if in the cloud is understood by all.</em>]</font>
<!-- end inline comment -->
 I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files is Dropbox. 
<!-- begin inline comment -->
<font color="red">[<b>mp 2</b>: <em>Simply go to <a href="http://dropbox.com"><tt>http://dropbox.com</tt></a> and watch the video. It explains
how files, like <code>myfile.py</code>, perhaps containing much math, like
\( \partial u/\partial t \), are easily communicated between machines.</em>]</font>
<!-- end inline comment -->
 It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

<p>
When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  
<!-- begin inline comment -->
<font color="red">[<b>hpl 3</b>: <em>The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.</em>]</font>
<!-- end inline comment -->

<h3>Appendix: Testing headings ending with <code>verbatim inline</code>  <a name="___sec36"></a></h3>

<p>
The point here is to test 1) <code>verbatim</code> code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

<p>
<!-- begin bottom navigation -->
<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>
<!-- end bottom navigation -->

<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: testdoc_wordpress.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="A Document for Testing Doconce">
<meta name="keywords" content="figures,movies,index with subindex,index, with comma, and one more">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #bababa;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #f8f8f8;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); }

</style>

</head>



<body>

    



<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  

<p>


<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>


<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center>

<h2>Table of contents</h2>

<p>
<a href="#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:ex"> Subsection 2: Testing figures and movies </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec3"> Test of movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="#decay:sec:theta"> The $latex \theta$ parameter (not $latex \nabla$?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec5"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec7"> A test of verbatim words in heading with subscript $latex a_i$: <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec8"> Bibliography test </a><br>
&nbsp; &nbsp; &nbsp; <a href="#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec11"> LaTeX Mathematics </a><br>
<a href="#___sec12"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec14"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec15"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec20"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec21"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec22"> Example 2: Just an example </a><br>
<a href="#___sec23"> Here goes another section </a><br>
<a href="#___sec24"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="#___sec27"> References </a><br>
<a href="#___sec28"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec29"> A subsection within an appendix </a><br>
<a href="#___sec30"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec31"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec34"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec35"> Appendix: Testing inline comments </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a><br>

<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>
<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<h2>Section 1 <a name="sec1"></a></h2>

<p>
Here is a nested list:

<p>

<ul>
  <li> item1</li>
  <li> item2</li>
  <li> item3 which continues
    on the next line to test that feature</li>
  <li> and a sublist</li>

<ul>
    <li> with indented subitem1</li>
    <li> and a subitem2</li>
</ul>

  <li> and perhaps an ordered sublist</li>

<ol>
   <li> first item</li>
   <li> second item,
      continuing on a new line</li>
</ol>

</ul>

<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<h3>Subsection 1  <a name="___sec1"></a></h3>

<p>
More text, with a reference back to the section <a href="#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 


<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
and then just the subroutine,
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
</pre></div>
<p>
and finally the complete file:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #19177C">C</span>     <span style="color: #19177C">a</span> <span style="color: #19177C">comment</span>

      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
Testing other code environments. First Python:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
<p>
which gets rendered as

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
<p>
Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>
Then Cython:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">cpdef</span> <span style="color: #0000FF">f</span>(double x):
    <span style="color: #008000; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
<p>

C++:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">#include &lt;iostream&gt;</span>

<span style="color: #B00040">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
<p>

And a little bit of Fortran:

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
<p>
which then is typeset as

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
<p>
HTML:

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;table&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>Column 1<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>Column 2<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>0.67526 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>0.92871 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!-- comment --&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/table&gt;</span>
</pre></div>
<p>
System call:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #008000">test</span>
Terminal&gt; <span style="color: #008000">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
<p>
It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>
Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.

<h3>Subsection 2: Testing figures and movies <a name="subsec:ex"></a></h3>

<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>
<center> 
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>
Figures without captions are allowed and will be inlined.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<h4>Test of movies  <a name="___sec3"></a></h4>

<p>
Movie <a href="#mov:tsunami">mov:tsunami</a> shows a tsunami.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em>Mjolnir tsunami (by Sylfest Glimsdal) <a name="mov:tsunami"></a>.</em></p>


<p>
Test empty caption (for inline movie):

<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em></em></p>


<p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>

<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Computational fluid dynamics movie.</em>



<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>
<center> 
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in $latex t_{i+1}$. <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<h3>The $latex \theta$ parameter (not $latex \nabla$?) <a name="decay:sec:theta"></a></h3>

<p>
Functions do not always need to be advanced, here is one
involving $latex \theta$:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
<p>
<b>More on $latex \theta$.</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
$latex \frac{1}{2}$, $latex {1/2}$, $latex \pmb{x}$, $latex \frac{Du}{dt}$,
both inline and in block:

<p>

$latex 
\frac{Du}{dt} = 0
 $

$latex  
\frac{1}{2} = {1/2} $

$latex  
\frac{1}{2}\pmb{x} = \pmb{n}
 $



<p>
Or with align with label and numbers:

<p>

$latex 
\frac{Du}{dt} = 0
 $

$latex  
\frac{1}{2} = {1/2} $

$latex  
\frac{1}{2}\pmb{x} = \pmb{n}

 $

<h3>Custom Environments  <a name="___sec5"></a></h3>

<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>

<a name="theorem:fundamental1"></a>

<p>
<b>Theorem 5.</b>
Let $latex a=1$ and $latex b=2$. Then $latex c=3$.


<p>

<b>Proof.</b>
Since $latex c=a+b$, the result follows from straightforward addition.
$latex latex \Diamond$


<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<h3>Tables <a name="subsec:table"></a></h3>

<p>
Let us take this table from the manual:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>
The Doconce source code reads
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
<p>
Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>    $latex latex i$     </b></td> <td align="center"><b>   $latex latex h_i$    </b></td> <td align="center"><b> $latex latex \bar T_i$ </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>             exact              </b></td> <td align="center"><b>        <code>v_1</code>        </b></td> <td align="center"><b> $latex latex a_i$ + <code>v_2</code> </b></td> <td align="center"><b>      <code>verb_3_</code>      </b></td> </tr>
<tr><td align="right">   9                                 </td> <td align="right">   9.62                              </td> <td align="right">   5.57                              </td> <td align="right">   8.98                              </td> </tr>
<tr><td align="right">   -20                               </td> <td align="right">   -23.39                            </td> <td align="right">   -7.65                             </td> <td align="right">   -19.93                            </td> </tr>
<tr><td align="right">   10                                </td> <td align="right">   17.74                             </td> <td align="right">   -4.50                             </td> <td align="right">   9.96                              </td> </tr>
<tr><td align="right">   0                                 </td> <td align="right">   -9.19                             </td> <td align="right">   4.13                              </td> <td align="right">   -0.26                             </td> </tr>
</table>

<h3>A test of verbatim words in heading with subscript $latex a_i$: <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec7"></a></h3>

<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math $latex a_{i-1}$.</b>
Here is
some text.

<h3>Bibliography test  <a name="___sec8"></a></h3>

<p>
Here is an example: <a href="#Langtangen_Pedersen_2002">[1]</a> discussed propagation of
large destructive water waves, <a href="#Langtangen_et_al_2002">[2]</a> gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in <a href="#Langtangen_1994a">[3]</a>.
The book chapter <a href="#Mardal_et_al_2003a">[4]</a> contains information on
C++ software tools for programming multigrid methods. A real retro
reference is <a href="#Langtangen_1988d">[5]</a> about a big FORTRAN package.
Multiple references are also possible, e.g., see
<a href="#Langtangen_Pedersen_2002">[1]</a> <a href="#Mardal_et_al_2003a">[4]</a>.

<p>
We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
<a href="#Langtangen_1992c">[6]</a> <a href="#Langtangen_1994a">[3]</a> <a href="#Mortensen_et_al_2011">[7]</a> <a href="#Langtangen_Pedersen_2002">[1]</a>
and
<a href="#Langtangen_et_al_2002">[2]</a> <a href="#Glimsdal_et_al_20006">[8]</a> <a href="#Rahman_et_al_2006b">[9]</a> <a href="#Haga_et_al_2011a">[10]</a> <a href="#Langtangen_2003a">[11]</a> <a href="#Langtangen_2008a">[12]</a> <a href="#Langtangen:95">[13]</a>
and all the work of
<a href="#Langtangen_2012">[14]</a> <a href="#Mardal_et_al_2003a">[4]</a> <a href="#Jeberg_et_al_2004">[15]</a> as well as
old work <a href="#Langtangen_1988d">[5]</a> and <a href="#Langtangen_1989e">[16]</a>, and the
talk <a href="#Langtangen_talk_2007a">[17]</a>.
Langtangen also had two thesis <a href="#Langtangen:85">[18]</a> <a href="#Langtangen_1989e">[16]</a>.
More retro citations are
the old ME-IN323 book <a href="#Langtangen:91">[19]</a> and the
<a href="#Langtangen:94b">[20]</a> OONSKI '94 paper.

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>

<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples_as_exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>
<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<h3>URLs <a name="subsubsec:ex"></a></h3>

<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Mail addresses can also be used: <a href="mailto:hpl@simula.no"><tt>hpl@simula.no</tt></a>, or just a <a href="mailto:hpl@simula.no">mail link</a>, or a raw <a href="mailto:hpl@simula.no"><tt>mailto:hpl@simula.no</tt></a>.

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>
For the <code>--device=paper</code> option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
<a href="https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py"><tt>decay_mod</tt></a>.

<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--device=paper</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<h3>LaTeX Mathematics  <a name="___sec11"></a></h3>

<p>
Here is an equation without label using backslash-bracket environment:

$latex  a = b + c  $


or with number and label, as in <b>(REF to equation my:eq1 not supported)</b>, using the equation environment:

$latex 
{\partial u\over\partial t} = \nabla^2 u 
 $


We can refer to this equation by <b>(REF to equation my:eq1 not supported)</b>.

<p>
Here is a system without equation numbers, using the align-astrisk environment:

$latex 
\pmb{a} = \pmb{q}\times\pmb{n}  $

$latex  
b = \nabla^2 u + \nabla^4 v
 $



<p>
And here is a system of equations with labels in an align environment:

$latex 
a = q + 4 + 5+ 6   $

$latex  
b = \nabla^2 u + \nabla^4 x 
 $


We can refer to <b>(REF to equation eq1 not supported)</b>-<b>(REF to equation eq2 not supported)</b>. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in <code>CG-2</code>.
Also test $latex a_{i-j}$ as well as $latex kx-wt$.

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:

\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u

\end{multline}

Testing split:

$latex 

\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
 $


We can refer to the last equation by <b>(REF to equation split:envir:eq not supported)</b>.

<p>
Testing gather:

\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}


<p>
Testing alignat:

\begin{alignat}{2}
a = q + 4 + 5+ 6\qquad  \mbox{for } q\geq 0   $

$latex  
b = \nabla^2 u + \nabla^4 x  x\in\Omega 
\end{alignat}

Let us refer to <b>(REF to equation eq1 not supported)</b>-<b>(REF to equation eq2 not supported)</b> again, and to the
alignat variant <b>(REF to equation eq1a not supported)</b>-<b>(REF to equation eq2a not supported)</b>, and to <b>(REF to equation my:eq1 not supported)</b>.

<p>
Testing eqnarray:

\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g 
\end{eqnarray}


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<h2>Exercises  <a name="___sec12"></a></h2>

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white1.png" width=80 align="right">



<p>
Make a program that simulates flipping a coin $latex N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<h4>Remarks  <a name="___sec14"></a></h4>

<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
<li> Mark 1.</li>
<li> Mark 2.
</li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.


<p>
<b>Hint 2.</b>
Draw an integer among $latex \{1,2\}$ with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.


<p>

<b>Answer.</b>
If the <code>random.random()</code> function returns a number $latex <1/2$, let it be
head, otherwise tail. Repeat this $latex N$ number of times.


<p>

<b>Solution.</b>
Code:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">sys</span><span style="color: #666666">,</span> <span style="color: #0000FF; font-weight: bold">random</span>
N <span style="color: #666666">=</span> <span style="color: #008000">int</span>(sys<span style="color: #666666">.</span>argv[<span style="color: #666666">1</span>])
heads <span style="color: #666666">=</span> <span style="color: #666666">0</span>
<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(N):
    r <span style="color: #666666">=</span> random<span style="color: #666666">.</span>random()
    <span style="color: #008000; font-weight: bold">if</span> r <span style="color: #666666">&lt;=</span> <span style="color: #666666">0.5</span>:
        heads <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
<span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Flipping a coin </span><span style="color: #BB6688; font-weight: bold">%d</span><span style="color: #BA2121"> times gave </span><span style="color: #BB6688; font-weight: bold">%d</span><span style="color: #BA2121"> heads&#39;</span> <span style="color: #666666">%</span> (N, heads)
</pre></div>
<p>

Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.

<h3>Not an exercise  <a name="___sec15"></a></h3>

<p>
Should be possible to stick a normal section in the middle of many
exercises.

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white1.png" width=80 align="right">


<p>
What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $latex [0,1)$?

<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw $latex N$ such random numbers using Python's standard <code>random</code> module,
count how many of them, $latex M$, that fall in the interval $latex (0.5,0.6)$, and
compute the probability as $latex M/N$.

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white1.png" width=80 align="right">


<p>
The formula for a circle is given by

<p>

$latex 
x = x_0 + R\cos 2\pi t, $

$latex  
y = y_0 + R\sin 2\pi t,
 $


where $latex R$ is the radius of the circle, $latex (x_0,y_0)$ is the
center point, and $latex t$ is a parameter in the unit interval $latex [0,1]$.
For any $latex t$, $latex (x,y)$ is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #008000; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
<p>
The goal of this project is to draw $latex N$ circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>
<b>a)</b>
Let $latex R$ be normally distributed and $latex (x_0,y_0)$ uniformly distributed.

<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
$latex x_0$, $latex y_0$, and $latex R$ quantities.


<p>

<b>Answer.</b>
Here goes the short answer to part a).


<p>

<b>Solution.</b>
Here goes a full solution to part a).


<p>
<b>b)</b>
Let $latex R$ be uniformly distributed and $latex (x_0,y_0)$ normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let $latex R$ and $latex (x_0,y_0)$ be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<h4>Remarks  <a name="___sec18"></a></h4>

<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white1.png" width=80 align="right">


<p>
Intro to this exercise. Questions are in subexercises below.

<p>

The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>

<b>Solution.</b>
Here goes a full solution of the whole exercise.
With some math $latex a=b$ in this solution:

$latex  \hbox{math in solution: } a = b  $


And code <code>a=b</code> in this solution:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">a = b  # code in solution
</pre></div>
<p>
End of solution is here.


<p>
<b>a)</b>
Subexercises are numbered a), b), etc.

<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math $latex a=b$ in hint:

<p>

$latex  a=b.  $


And with code (in plain verbatim) returning $latex x+1$ in hint:

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
<p>
<b>Hint 2.</b>
Second hint to subexercise a).

Filename: <code>subexer_a.pdf</code>.

<p>

<b>Answer.</b>
Short answer to subexercise a).
With math in answer: $latex a=b$.


<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>
Some math $latex \cos^2 x + \sin^2 x = 1$ written one a single line:

<p>

$latex  \cos^2 x + \sin^2 x = 1 \thinspace . $



<p>
<b>Hint.</b>
A hint for this subexercise.

Filename: <code>subexer_b.pdf</code>.

<p>

<b>Solution.</b>
Here goes the solution of this subexercise.

<h4>Remarks  <a name="___sec20"></a></h4>

<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec21"></a></h3>

<p>
Just some text. And some math saying that $latex e^0=1$ on a single line,
to test that math block insertion is correct:

<p>

$latex  \exp{(0)} = 1  $



<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>

<h3>Example 2: Just an example  <a name="___sec22"></a></h3>

<p>
<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<h2>Here goes another section  <a name="___sec23"></a></h2>

<p>
With some text, before we continue with exercises.

<h2>More Exercises  <a name="___sec24"></a></h2>

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white1.png" width=80 align="right">


<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white1.png" width=80 align="right">


<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<h2>References  <a name="___sec27"></a></h2>

<h2>Bibliography</h2>

<p>

<ol>
 <li> <a name="Langtangen_Pedersen_2002"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Propagation of Large Destructive Waves,
    <em>International Journal of Applied Mechanics and Engineering</em>,
    7(1),
    pp. 187-204,
    2002.</li>
 <li> <a name="Langtangen_et_al_2002"></a> <b>H. P. Langtangen, K.-A. Mardal and R. Winther</b>. 
    Numerical Methods for Incompressible Viscous Flow,
    <em>Advances in Water Resources</em>,
    25,
    pp. 1125-1146,
    2002.</li>
 <li> <a name="Langtangen_1994a"></a> <b>H. P. Langtangen</b>. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    <em>SIAM Journal of Scientific and Statistical Computing</em>,
    15,
    pp. 997-996,
    1994.</li>
 <li> <a name="Mardal_et_al_2003a"></a> <b>K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen</b>. 
    Software Tools for Multigrid Methods,
    <em>Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming</em>,
    edited by <b>H. P. Langtangen and A. Tveito</b>,
    Springer,
    2003.</li>
 <li> <a name="Langtangen_1988d"></a> <b>H. P. Langtangen</b>. 
    The FEMDEQS Program System,
    <em>Department of Mathematics, University of Oslo</em>,
    1989.</li>
 <li> <a name="Langtangen_1992c"></a> <b>H. P. Langtangen</b>. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    <em>SIAM Journal on Scientific Computing</em>,
    13,
    pp. 1394-1417,
    1992.</li>
 <li> <a name="Mortensen_et_al_2011"></a> <b>M. Mortensen, H. P. Langtangen and G. N. Wells</b>. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    <em>Advances in Water Resources</em>,
    34(9),
    <a href="http://dx.doi.org/10.1016/j.advwatres.2011.02.013">doi: 10.1016/j.advwatres.2011.02.013</a>,
    2011.</li>
 <li> <a name="Glimsdal_et_al_20006"></a> <b>S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt</b>. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    <em>International Journal of Fluid Mechanics Research</em>,
    33(1),
    pp. 15-43,
    2006.</li>
 <li> <a name="Rahman_et_al_2006b"></a> <b>S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen</b>. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    <em>Physical Review B: Condensed Matter and Materials Physics</em>,
    74,
    2006.</li>
<li> <a name="Haga_et_al_2011a"></a> <b>J. B. Haga, H. Osnes and H. P. Langtangen</b>. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    <em>International Journal of Analytical and Numerical Methods in Geomechanics</em>,
    <a href="http://dx.doi.org/10.1002/nag.1062">doi: 10.1002/nag.1062</a>,
    2011,
    <a href="http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract"><tt>http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract</tt></a>.</li>
<li> <a name="Langtangen_2003a"></a> <b>H. P. Langtangen</b>. 
    <em>Computational Partial Differential Equations - Numerical Methods and Diffpack Programming</em>,
    Springer,
    2003.</li>
<li> <a name="Langtangen_2008a"></a> <b>H. P. Langtangen</b>. 
    <em>Python Scripting for Computational Science</em>,
    Springer,
    2008.</li>
<li> <a name="Langtangen:95"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by <b>J. Grue, B. Gjevik and J. E. Weber</b>,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    <a href="http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310"><tt>http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310</tt></a>.</li>
<li> <a name="Langtangen_2012"></a> <b>H. P. Langtangen</b>. 
    <em>A Primer on Scientific Programming With Python</em>,
    Springer,
    2012.</li>
<li> <a name="Jeberg_et_al_2004"></a> <b>P. V. Jeberg, H. P. Langtangen and C. B. Terp</b>. 
    Optimization With Diffpack: Practical Example From Welding,
    <em>Simula Research Laboratory</em>,
    2004.</li>
<li> <a name="Langtangen_1989e"></a> <b>H. P. Langtangen</b>. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.</li>
<li> <a name="Langtangen_talk_2007a"></a> <b>H. P. Langtangen</b>. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.</li>
<li> <a name="Langtangen:85"></a> <b>H. P. Langtangen</b>. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.</li>
<li> <a name="Langtangen:91"></a> <b>H. P. Langtangen and A. Tveito</b>. 
    Numerical Methods in Continuum Mechanics,
    <em>Center for Industrial Research</em>,
    1991.</li>
<li> <a name="Langtangen:94b"></a> <b>H. P. Langtangen</b>. 
    Diffpack: Software for Partial Differential Equations,
    <em>Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA</em>,
    edited by <b>A. Vermeulen</b>,
    1994.</li>
</ol>

<h2>Appendix: Just for testing; part I  <a name="___sec28"></a></h2>

<p>
This is the first appendix.

<h3>A subsection within an appendix  <a name="___sec29"></a></h3>

<p>
Some text.

<h2>Appendix: Just for testing; part II  <a name="___sec30"></a></h2>

<p>
This is more stuff for an appendix.

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>

<p>
Without label.

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles  <a name="___sec34"></a></h3>

<p>
Without label.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Tip.</b>
Here is a tip or hint box, typeset as a notice box.
</div>
<p>
Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent <a href="http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/">Script for Introduction to Version Control</a> provides a more detailed motivation why you will benefit greatly
from using version control systems.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Summary.</b>
<b>Bold remark:</b> Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
</div>
<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files are <a href="http://dropbox.com">Dropbox</a> and <a href="http://drive.google.com">Google Drive</a>.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

<p>
More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

<p>
The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

<p>
All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.

<h3>Appendix: Testing inline comments  <a name="___sec35"></a></h3>

<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. 

<font color="red">[<b>hpl 1</b>: <em>not sure if in the cloud is understood by all.</em>]</font>

 I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files is Dropbox. 

<font color="red">[<b>mp 2</b>: <em>Simply go to <a href="http://dropbox.com"><tt>http://dropbox.com</tt></a> and watch the video. It explains
how files, like <code>myfile.py</code>, perhaps containing much math, like
$latex \partial u/\partial t$, are easily communicated between machines.</em>]</font>

 It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

<p>
When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  

<font color="red">[<b>hpl 3</b>: <em>The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.</em>]</font>

<h3>Appendix: Testing headings ending with <code>verbatim inline</code>  <a name="___sec36"></a></h3>

<p>
The point here is to test 1) <code>verbatim</code> code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.




</body>
</html>
    


************** File: testdoc_no_solutions.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="A Document for Testing Doconce">
<meta name="keywords" content="figures,movies,index with subindex,index, with comma, and one more">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #bababa;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #f8f8f8;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen, Kaare Dump, A. Dummy Author, I. S. Overworked, and J. Doe -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Table of contents</h2>

<p>
<a href="#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:ex"> Subsection 2: Testing figures and movies </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec3"> Test of movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec5"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec8"> Bibliography test </a><br>
&nbsp; &nbsp; &nbsp; <a href="#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec11"> LaTeX Mathematics </a><br>
<a href="#___sec12"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec14"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec15"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec20"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec21"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec22"> Example 2: Just an example </a><br>
<a href="#___sec23"> Here goes another section </a><br>
<a href="#___sec24"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="#___sec27"> References </a><br>
<a href="#___sec28"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec29"> A subsection within an appendix </a><br>
<a href="#___sec30"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec31"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec34"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec35"> Appendix: Testing inline comments </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a><br>

<p>
<!-- !split -->

<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>
<!-- Just a comment -->

<p>
<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->

<h2>Section 1 <a name="sec1"></a></h2>

<p>
Here is a nested list:

<p>

<ul>
  <li> item1</li>
  <li> item2</li>
  <li> item3 which continues
    on the next line to test that feature</li>
  <li> and a sublist</li>

<ul>
    <li> with indented subitem1</li>
    <li> and a subitem2</li>
</ul>

  <li> and perhaps an ordered sublist</li>

<ol>
   <li> first item</li>
   <li> second item,
      continuing on a new line</li>
</ol>

</ul>

<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<p>
<!-- !split and check if these extra words are included properly in the comment -->

<h3>Subsection 1  <a name="___sec1"></a></h3>

<p>
More text, with a reference back to the section <a href="#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>

<!-- code=fortran (from !bc fcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
and then just the subroutine,
<p>

<!-- code=fortran (from !bc fcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
</pre></div>
<p>
and finally the complete file:
<p>

<!-- code=fortran (from !bc fpro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #19177C">C</span>     <span style="color: #19177C">a</span> <span style="color: #19177C">comment</span>

      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
Testing other code environments. First Python:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
<p>
which gets rendered as

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
<p>
Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>
Then Cython:
<p>

<!-- code=cython (from !bc cycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">cpdef</span> <span style="color: #0000FF">f</span>(double x):
    <span style="color: #008000; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
<p>
<!-- This one tests a + sign before a code environment -->
C++:
<p>

<!-- code=c++ (from !bc cpppro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">#include &lt;iostream&gt;</span>

<span style="color: #B00040">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
<p>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
<p>
which then is typeset as

<p>

<!-- code=text (from !bc cod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
<p>
HTML:

<p>

<!-- code=html (from !bc htmlcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;table&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>Column 1<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>Column 2<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>0.67526 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>0.92871 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!-- comment --&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/table&gt;</span>
</pre></div>
<p>
System call:
<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #008000">test</span>
Terminal&gt; <span style="color: #008000">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
<p>
It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>
Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.

<h3>Subsection 2: Testing figures and movies <a name="subsec:ex"></a></h3>

<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>
<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>
Figures without captions are allowed and will be inlined.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<h4>Test of movies  <a name="___sec3"></a></h4>

<p>
Movie <a href="#mov:tsunami">mov:tsunami</a> shows a tsunami.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em>Mjolnir tsunami (by Sylfest Glimsdal) <a name="mov:tsunami"></a>.</em></p>


<p>
Test empty caption (for inline movie):

<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em></em></p>


<p>
<!-- Test wrong syntax and multi-line caption -->

<p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>
<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>

<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Computational fluid dynamics movie.</em>



<p>
<!-- Test multi-line caption in figure -->

<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>
<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in \( t_{i+1} \). <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<p>
<!-- Test URL as figure name -->

<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<p>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<p>
<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<h3>The \( \theta \) parameter (not \( \nabla \)?) <a name="decay:sec:theta"></a></h3>

<p>
Functions do not always need to be advanced, here is one
involving \( \theta \):
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
<p>
<b>More on \( \theta \).</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
\( \frac{1}{2} \), \( {1/2} \), \( \pmb{x} \), \( \frac{Du}{dt} \),
both inline and in block:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
Or with align with label and numbers:

<p>
$$
\begin{align}
\frac{Du}{dt} &= 0
\label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\label{aligneq2}
\end{align}
$$

<h3>Custom Environments  <a name="___sec5"></a></h3>

<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>
<!-- begin theorem -->
<a name="theorem:fundamental1"></a>

<p>
<b>Theorem 5.</b>
Let \( a=1 \) and \( b=2 \). Then \( c=3 \).
<!-- end theorem -->

<p>
<!-- begin proof -->
<b>Proof.</b>
Since \( c=a+b \), the result follows from straightforward addition.
\( \Diamond \)
<!-- end proof -->

<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<h3>Tables <a name="subsec:table"></a></h3>

<p>
<!-- index with comma could fool sphinx -->

<p>
Let us take this table from the manual:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>
The Doconce source code reads
<p>

<!-- code=text (from !bc ccq) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
<p>
Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>     \( i \)      </b></td> <td align="center"><b>    \( h_i \)     </b></td> <td align="center"><b>  \( \bar T_i \)  </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>            exact             </b></td> <td align="center"><b>       <code>v_1</code>       </b></td> <td align="center"><b> \( a_i \) + <code>v_2</code> </b></td> <td align="center"><b>     <code>verb_3_</code>     </b></td> </tr>
<tr><td align="right">   9                               </td> <td align="right">   9.62                            </td> <td align="right">   5.57                            </td> <td align="right">   8.98                            </td> </tr>
<tr><td align="right">   -20                             </td> <td align="right">   -23.39                          </td> <td align="right">   -7.65                           </td> <td align="right">   -19.93                          </td> </tr>
<tr><td align="right">   10                              </td> <td align="right">   17.74                           </td> <td align="right">   -4.50                           </td> <td align="right">   9.96                            </td> </tr>
<tr><td align="right">   0                               </td> <td align="right">   -9.19                           </td> <td align="right">   4.13                            </td> <td align="right">   -0.26                           </td> </tr>
</table>

<h3>A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec7"></a></h3>

<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math \( a_{i-1} \).</b>
Here is
some text.

<h3>Bibliography test  <a name="___sec8"></a></h3>

<p>
Here is an example: <a href="#Langtangen_Pedersen_2002">[1]</a> discussed propagation of
large destructive water waves, <a href="#Langtangen_et_al_2002">[2]</a> gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in <a href="#Langtangen_1994a">[3]</a>.
The book chapter <a href="#Mardal_et_al_2003a">[4]</a> contains information on
C++ software tools for programming multigrid methods. A real retro
reference is <a href="#Langtangen_1988d">[5]</a> about a big FORTRAN package.
Multiple references are also possible, e.g., see
<a href="#Langtangen_Pedersen_2002">[1]</a> <a href="#Mardal_et_al_2003a">[4]</a>.

<p>
We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
<a href="#Langtangen_1992c">[6]</a> <a href="#Langtangen_1994a">[3]</a> <a href="#Mortensen_et_al_2011">[7]</a> <a href="#Langtangen_Pedersen_2002">[1]</a>
and
<a href="#Langtangen_et_al_2002">[2]</a> <a href="#Glimsdal_et_al_20006">[8]</a> <a href="#Rahman_et_al_2006b">[9]</a> <a href="#Haga_et_al_2011a">[10]</a> <a href="#Langtangen_2003a">[11]</a> <a href="#Langtangen_2008a">[12]</a> <a href="#Langtangen:95">[13]</a>
and all the work of
<a href="#Langtangen_2012">[14]</a> <a href="#Mardal_et_al_2003a">[4]</a> <a href="#Jeberg_et_al_2004">[15]</a> as well as
old work <a href="#Langtangen_1988d">[5]</a> and <a href="#Langtangen_1989e">[16]</a>, and the
talk <a href="#Langtangen_talk_2007a">[17]</a>.
Langtangen also had two thesis <a href="#Langtangen:85">[18]</a> <a href="#Langtangen_1989e">[16]</a>.
More retro citations are
the old ME-IN323 book <a href="#Langtangen:91">[19]</a> and the
<a href="#Langtangen:94b">[20]</a> OONSKI '94 paper.

<p>
<!-- --- begin exercise --- -->

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>

<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples_as_exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>
<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<p>
<!-- --- end exercise --- -->

<h3>URLs <a name="subsubsec:ex"></a></h3>

<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Mail addresses can also be used: <a href="mailto:hpl@simula.no"><tt>hpl@simula.no</tt></a>, or just a <a href="mailto:hpl@simula.no">mail link</a>, or a raw <a href="mailto:hpl@simula.no"><tt>mailto:hpl@simula.no</tt></a>.

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>
For the <code>--device=paper</code> option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
<a href="https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py"><tt>decay_mod</tt></a>.

<p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<p>
<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--device=paper</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<h3>LaTeX Mathematics  <a name="___sec11"></a></h3>

<p>
Here is an equation without label using backslash-bracket environment:
$$ a = b + c $$

or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$

We can refer to this equation by \eqref{my:eq1}.

<p>
Here is a system without equation numbers, using the align-astrisk environment:
$$
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
$$


<p>
And here is a system of equations with labels in an align environment:
$$
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
$$

We can refer to \eqref{eq1}-\eqref{eq2}. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in <code>CG-2</code>.
Also test \( a_{i-j} \) as well as \( kx-wt \).

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$

Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$

We can refer to the last equation by \eqref{split:envir:eq}.

<p>
Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$


<p>
Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$

Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

<p>
Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<h2>Exercises  <a name="___sec12"></a></h2>

<p>
<!-- --- begin exercise --- -->

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white2.png" width=100 align="right">

<!-- keywords = random numbers; Monte Carlo simulation -->

<p>
<!-- Torture tests -->

<p>
Make a program that simulates flipping a coin \( N \) times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<p>
<!-- Test syntax error -->

<h4>Remarks  <a name="___sec14"></a></h4>

<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
<li> Mark 1.</li>
<li> Mark 2.
<!-- --- begin hint in exercise --- --></li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Draw an integer among \( \{1,2\} \) with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->

<p>
<!-- removed !bans ... !eans environment
 --><!-- (because of the command-line option --without_answers)
 -->
<p>
<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without_solutions)
 -->Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<p>
<!-- --- end exercise --- -->

<h3>Not an exercise  <a name="___sec15"></a></h3>

<p>
Should be possible to stick a normal section in the middle of many
exercises.

<p>
<!-- --- begin exercise --- -->

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white2.png" width=100 align="right">


<p>
<!-- Minimalistic exercise -->

<p>
What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval \( [0,1) \)?

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw \( N \) such random numbers using Python's standard <code>random</code> module,
count how many of them, \( M \), that fall in the interval \( (0.5,0.6) \), and
compute the probability as \( M/N \).
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white2.png" width=100 align="right">


<p>
The formula for a circle is given by

<p>
$$
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
$$

where \( R \) is the radius of the circle, \( (x_0,y_0) \) is the
center point, and \( t \) is a parameter in the unit interval \( [0,1] \).
For any \( t \), \( (x,y) \) is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>

<!-- code=python (from !bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #008000; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
<p>
<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>
The goal of this project is to draw \( N \) circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>
<b>a)</b>
Let \( R \) be normally distributed and \( (x_0,y_0) \) uniformly distributed.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
\( x_0 \), \( y_0 \), and \( R \) quantities.
<!-- --- end hint in exercise --- -->

<p>
<!-- removed !bans ... !eans environment
 --><!-- (because of the command-line option --without_answers)
 -->
<p>
<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without_solutions)
 -->
<p>
<b>b)</b>
Let \( R \) be uniformly distributed and \( (x_0,y_0) \) normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let \( R \) and \( (x_0,y_0) \) be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<p>
<!-- Closing remarks for this Project -->

<h4>Remarks  <a name="___sec18"></a></h4>

<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white2.png" width=100 align="right">


<p>
Intro to this exercise. Questions are in subexercises below.

<p>
<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>
<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without_solutions)
 -->
<p>
<b>a)</b>
Subexercises are numbered a), b), etc.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math \( a=b \) in hint:

<p>
$$ a=b. $$

And with code (in plain verbatim) returning \( x+1 \) in hint:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
<p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.

<p>
<!-- removed !bans ... !eans environment
 --><!-- (because of the command-line option --without_answers)
 -->
<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>
Some math \( \cos^2 x + \sin^2 x = 1 \) written one a single line:

<p>
$$ \cos^2 x + \sin^2 x = 1 \thinspace .$$


<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.

<p>
<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without_solutions)
 -->
<p>
<!-- Closing remarks for this Exercise -->

<h4>Remarks  <a name="___sec20"></a></h4>

<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec21"></a></h3>

<p>
<!-- Another minimalistic exercise -->

<p>
Just some text. And some math saying that \( e^0=1 \) on a single line,
to test that math block insertion is correct:

<p>
$$ \exp{(0)} = 1 $$


<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>
<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Example 2: Just an example  <a name="___sec22"></a></h3>

<p>
<!-- This example needs the --examples_as_exercises option, otherwise -->
<!-- it is just typeset as it is written. -->

<p>
<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<p>
<!-- --- end exercise --- -->

<h2>Here goes another section  <a name="___sec23"></a></h2>

<p>
With some text, before we continue with exercises.

<h2>More Exercises  <a name="___sec24"></a></h2>

<p>
<!-- --- begin exercise --- -->

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white2.png" width=100 align="right">


<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>

<img src="https://doconce.googlecode.com/hg/bundled/html_images/question_blue_on_white2.png" width=100 align="right">


<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<p>
<!-- --- end exercise --- -->

<h2>References  <a name="___sec27"></a></h2>

<h2>Bibliography</h2>

<p>

<ol>
 <li> <a name="Langtangen_Pedersen_2002"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Propagation of Large Destructive Waves,
    <em>International Journal of Applied Mechanics and Engineering</em>,
    7(1),
    pp. 187-204,
    2002.</li>
 <li> <a name="Langtangen_et_al_2002"></a> <b>H. P. Langtangen, K.-A. Mardal and R. Winther</b>. 
    Numerical Methods for Incompressible Viscous Flow,
    <em>Advances in Water Resources</em>,
    25,
    pp. 1125-1146,
    2002.</li>
 <li> <a name="Langtangen_1994a"></a> <b>H. P. Langtangen</b>. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    <em>SIAM Journal of Scientific and Statistical Computing</em>,
    15,
    pp. 997-996,
    1994.</li>
 <li> <a name="Mardal_et_al_2003a"></a> <b>K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen</b>. 
    Software Tools for Multigrid Methods,
    <em>Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming</em>,
    edited by <b>H. P. Langtangen and A. Tveito</b>,
    Springer,
    2003.</li>
 <li> <a name="Langtangen_1988d"></a> <b>H. P. Langtangen</b>. 
    The FEMDEQS Program System,
    <em>Department of Mathematics, University of Oslo</em>,
    1989.</li>
 <li> <a name="Langtangen_1992c"></a> <b>H. P. Langtangen</b>. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    <em>SIAM Journal on Scientific Computing</em>,
    13,
    pp. 1394-1417,
    1992.</li>
 <li> <a name="Mortensen_et_al_2011"></a> <b>M. Mortensen, H. P. Langtangen and G. N. Wells</b>. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    <em>Advances in Water Resources</em>,
    34(9),
    <a href="http://dx.doi.org/10.1016/j.advwatres.2011.02.013">doi: 10.1016/j.advwatres.2011.02.013</a>,
    2011.</li>
 <li> <a name="Glimsdal_et_al_20006"></a> <b>S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt</b>. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    <em>International Journal of Fluid Mechanics Research</em>,
    33(1),
    pp. 15-43,
    2006.</li>
 <li> <a name="Rahman_et_al_2006b"></a> <b>S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen</b>. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    <em>Physical Review B: Condensed Matter and Materials Physics</em>,
    74,
    2006.</li>
<li> <a name="Haga_et_al_2011a"></a> <b>J. B. Haga, H. Osnes and H. P. Langtangen</b>. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    <em>International Journal of Analytical and Numerical Methods in Geomechanics</em>,
    <a href="http://dx.doi.org/10.1002/nag.1062">doi: 10.1002/nag.1062</a>,
    2011,
    <a href="http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract"><tt>http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract</tt></a>.</li>
<li> <a name="Langtangen_2003a"></a> <b>H. P. Langtangen</b>. 
    <em>Computational Partial Differential Equations - Numerical Methods and Diffpack Programming</em>,
    Springer,
    2003.</li>
<li> <a name="Langtangen_2008a"></a> <b>H. P. Langtangen</b>. 
    <em>Python Scripting for Computational Science</em>,
    Springer,
    2008.</li>
<li> <a name="Langtangen:95"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by <b>J. Grue, B. Gjevik and J. E. Weber</b>,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    <a href="http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310"><tt>http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310</tt></a>.</li>
<li> <a name="Langtangen_2012"></a> <b>H. P. Langtangen</b>. 
    <em>A Primer on Scientific Programming With Python</em>,
    Springer,
    2012.</li>
<li> <a name="Jeberg_et_al_2004"></a> <b>P. V. Jeberg, H. P. Langtangen and C. B. Terp</b>. 
    Optimization With Diffpack: Practical Example From Welding,
    <em>Simula Research Laboratory</em>,
    2004.</li>
<li> <a name="Langtangen_1989e"></a> <b>H. P. Langtangen</b>. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.</li>
<li> <a name="Langtangen_talk_2007a"></a> <b>H. P. Langtangen</b>. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.</li>
<li> <a name="Langtangen:85"></a> <b>H. P. Langtangen</b>. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.</li>
<li> <a name="Langtangen:91"></a> <b>H. P. Langtangen and A. Tveito</b>. 
    Numerical Methods in Continuum Mechanics,
    <em>Center for Industrial Research</em>,
    1991.</li>
<li> <a name="Langtangen:94b"></a> <b>H. P. Langtangen</b>. 
    Diffpack: Software for Partial Differential Equations,
    <em>Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA</em>,
    edited by <b>A. Vermeulen</b>,
    1994.</li>
</ol>

<h2>Appendix: Just for testing; part I  <a name="___sec28"></a></h2>

<p>
This is the first appendix.

<h3>A subsection within an appendix  <a name="___sec29"></a></h3>

<p>
Some text.

<h2>Appendix: Just for testing; part II  <a name="___sec30"></a></h2>

<p>
This is more stuff for an appendix.

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>

<p>
Without label.

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles  <a name="___sec34"></a></h3>

<p>
Without label.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Tip.</b>
Here is a tip or hint box, typeset as a notice box.
</div>
<p>
Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent <a href="http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/">Script for Introduction to Version Control</a> provides a more detailed motivation why you will benefit greatly
from using version control systems.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Summary.</b>
<b>Bold remark:</b> Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
</div>
<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files are <a href="http://dropbox.com">Dropbox</a> and <a href="http://drive.google.com">Google Drive</a>.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

<p>
More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

<p>
The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

<p>
All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.

<h3>Appendix: Testing inline comments  <a name="___sec35"></a></h3>

<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. 
<!-- begin inline comment -->
<font color="red">[<b>hpl 1</b>: <em>not sure if in the cloud is understood by all.</em>]</font>
<!-- end inline comment -->
 I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files is Dropbox. 
<!-- begin inline comment -->
<font color="red">[<b>mp 2</b>: <em>Simply go to <a href="http://dropbox.com"><tt>http://dropbox.com</tt></a> and watch the video. It explains
how files, like <code>myfile.py</code>, perhaps containing much math, like
\( \partial u/\partial t \), are easily communicated between machines.</em>]</font>
<!-- end inline comment -->
 It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

<p>
When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  
<!-- begin inline comment -->
<font color="red">[<b>hpl 3</b>: <em>The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.</em>]</font>
<!-- end inline comment -->

<h3>Appendix: Testing headings ending with <code>verbatim inline</code>  <a name="___sec36"></a></h3>

<p>
The point here is to test 1) <code>verbatim</code> code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: testdoc_no_solutions.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}
% #ifdef MOVIE15
\usepackage{movie15}
% #endif


% #ifndef MOVIE
% #define MOVIE "media9"
% #endif

% #if MOVIE == "media9"
\usepackage{media9}
% #elif MOVIE == "movie15"
\usepackage{movie15}
% #elif MOVIE == "multimedia"
\usepackage{multimedia}
% #elif MOVIE == "href-run"
% #endif

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}


% #ifdef TODONOTES
\usepackage{ifthen,xkeyval,tikz,calc,graphicx}
\usepackage[shadow]{todonotes}
\newcommand{\shortinlinecomment}[3]{%
\todo[size=\normalsize,fancyline,color=orange!40,caption={#3}]{%
 \begin{spacing}{0.75}{\bf #1}: #2\end{spacing}}}
\newcommand{\longinlinecomment}[3]{%
\todo[inline,color=orange!40,caption={#3}]{{\bf #1}: #2}}
% #else
\newcommand{\shortinlinecomment}[3]{{\bf #1}: \emph{#2}}
\newcommand{\longinlinecomment}[3]{{\bf #1}: \emph{#2}}
% #endif

% #ifdef LINENUMBERS
\usepackage[mathlines]{lineno}  % show line numbers
\linenumbers
% #endif

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---

\newenvironment{exercise}{}{}
\newcounter{exerno}


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{A Document for Testing Doconce}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
A Document for Testing Doconce
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{A Document for Testing Doconce}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{A Document for Testing Doconce}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
A Document for Testing Doconce
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Email: \texttt{hpl@simula.no}. Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo.}
\and Kaare Dump\footnote{Segfault Inc, Cyberspace.}
\and A. Dummy Author
\and I. S. Overworked\footnote{Inst1; Inst2, Somewhere; Third Inst, Elsewhere; and Fourth Inst.}
\and J. Doe\footnote{Email: \texttt{j\_doe@cyberspace.com}.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})}}\\ [3mm]
    
    {\Large\textsf{Kaare Dump${}^{3}$}}\\ [3mm]
    
    {\Large\textsf{A. Dummy Author${}^{}$}}\\ [3mm]
    
    {\Large\textsf{I. S. Overworked${}^{4, 5, 6, 7}$}}\\ [3mm]
    
    {\Large\textsf{J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
{\large\textsf{${}^3$Segfault Inc, Cyberspace} \\ [1.5mm]}
{\large\textsf{${}^4$Inst1} \\ [1.5mm]}
{\large\textsf{${}^5$Inst2, Somewhere} \\ [1.5mm]}
{\large\textsf{${}^6$Third Inst, Elsewhere} \\ [1.5mm]}
{\large\textsf{${}^7$Fourth Inst} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{Hans Petter Langtangen and Kaare Dump and A. Dummy Author and I. S. Overworked and J. Doe}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo\email{hpl@simula.no} \and Kaare Dump\at Segfault Inc, Cyberspace \and A. Dummy Author \and I. S. Overworked\at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and and Fourth Inst \and J. Doe\email{j_doe@cyberspace.com}}

% #elif LATEX_HEADING == "beamer"
\author{Hans Petter Langtangen\inst{1,2}
\and
Kaare Dump\inst{3}
\and
A. Dummy Author\inst{}
\and
I. S. Overworked\inst{4,5,6,7}
\and
J. Doe\inst{}}
\institute{Center for Biomedical Computing, Simula Research Laboratory\inst{1}
\and
Department of Informatics, University of Oslo\inst{2}
\and
Segfault Inc, Cyberspace\inst{3}
\and
Inst1\inst{4}
\and
Inst2, Somewhere\inst{5}
\and
Third Inst, Elsewhere\inst{6}
\and
Fourth Inst\inst{7}}
% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})} \\ [0mm]
\end{center}


\begin{center}
{\bf Kaare Dump${}^{3}$} \\ [0mm]
\end{center}


\begin{center}
{\bf A. Dummy Author${}^{}$} \\ [0mm]
\end{center}


\begin{center}
{\bf I. S. Overworked${}^{4, 5, 6, 7}$} \\ [0mm]
\end{center}


\begin{center}
{\bf J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\centerline{{\small ${}^3$Segfault Inc, Cyberspace}}
\centerline{{\small ${}^4$Inst1}}
\centerline{{\small ${}^5$Inst2, Somewhere}}
\centerline{{\small ${}^6$Third Inst, Elsewhere}}
\centerline{{\small ${}^7$Fourth Inst}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\tableofcontents
% #ifdef TODONOTES
\listoftodos[List of inline comments]
% #endif

\vspace{1cm} % after toc





% !split




The format of this document is
plain, homemade {\LaTeX} (from Doconce).

% Just a comment


% #if LATEX_HEADING == "Springer_collection"
\abstract{
% #else
\begin{abstract}
% #endif
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
% #if LATEX_HEADING == "Springer_collection"
}
% #else
\end{abstract}
% #endif



\subsection{Section 1}
\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\paragraph{Subsection 1.}
More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\bfcod
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efcod
and then just the subroutine,
\bfcod

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\efcod
and finally the complete file:
\bfpro
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efpro

Testing other code environments. First Python:
\bccq
!bc pycod
def f(x):
    return x+1
!ec
\eccq
which gets rendered as

\bpycod
def f(x):
    return x+1
\epycod

Now a complete program to be shown via Python Online Tutorial:
\bpypro
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\epypro
\noindent
(\href{{http://pythontutor.com/visualize.html\#code=def+f\%28x\%29\%3A\%0A++++return+x+\%2B+1\%0A\%0Aa+\%3D+2\%0Ax+\%3D+a\%0Aa+\%3D+1\%0Av+\%3D+f\%28x\%29\%0Aprint+v&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0}}{Visualize execution}) 


Then Cython:
\bcycod
cpdef f(double x):
    return x + 1
\ecycod

% This one tests a + sign before a code environment
C++:
\bcpppro
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\ecpppro
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\bccq
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\eccq
which then is typeset as

\bcod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\ecod

HTML:

\bhtmlcod
<table>
<tr><td>Column 1</td><td>Column 2</td></tr>
<tr><td>0.67526 </td><td>0.92871 </td></tr>
<!-- comment -->
</table>
\ehtmlcod

System call:
\bsys
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
\esys

It is time to test \code{verbatim inline font} especially with \code{a newline
inside the text} and an exclamation mark at the end: \code{BEGIN}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the \code{verb} typesetting... Also test backslashes
like \code{\begin} and \code{\end} in inline verbatim text.

Here is some \textcolor{red}{red} color and an attempt to write \textcolor{green}{with
green color containing a linebreak.
And one more.} Some formats will only display this correctly when
HTML is the output format.


\paragraph{Subsection 2: Testing figures and movies.}
\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed and will be inlined.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
\end{center}


\index{movies}

\paragraph{Test of movies.}
Movie~\ref{mov:tsunami} shows a tsunami.


\begin{figure}[ht]
\begin{center}

% #if MOVIE == "media9"
\includemedia[
width=0.8\linewidth,
label=../doc/manual/figs/mjolnir.mpeg,
activate=pageopen,         % or onclick or pagevisible
addresource=../doc/manual/figs/mjolnir.mpeg,  % embed the video in the PDF
flashvars={
source=../doc/manual/figs/mjolnir.mpeg
&autoPlay=true
&loop=true
&scaleMode=letterbox   % preserve aspect ration while scaling this video
}]{}{VPlayer.swf}

% #ifdef MOVIE_CONTROLS
\mediabutton[
  mediacommand=../doc/manual/figs/mjolnir.mpeg:playPause,
  overface=\\textcolor{blue}{\fbox{\strut Play/Pause}},
  downface=\\textcolor{red}{\fbox{\strut Play/Pause}}
  ]{\fhox{\strut Play/Pause}}
% #endif

% #elif MOVIE == "movie15"
\includemovie[poster,
label=../doc/manual/figs/mjolnir.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/mjolnir.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/mjolnir.mpeg}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/mjolnir.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/mjolnir.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/mjolnir.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/mjolnir.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/mjolnir.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif

% #elif MOVIE == "multimedia"
% Beamer-style \movie command
\movie[
label=../doc/manual/figs/mjolnir.mpeg,
width=0.9\linewidth,
autostart]{../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif

\end{center}
\caption{Mjolnir tsunami (by Sylfest Glimsdal) \label{mov:tsunami}.}
\end{figure}


Test empty caption (for inline movie):

 (Movie ../doc/manual/figs/wavepacket.mpeg: play \href{{wavepacket.html}}{\nolinkurl{wavepacket.html}})
% #if MOVIE == "media9"
\includemedia[
width=0.8\linewidth,
label=../doc/manual/figs/wavepacket.mpeg,
activate=pageopen,         % or onclick or pagevisible
addresource=../doc/manual/figs/wavepacket.mpeg,  % embed the video in the PDF
flashvars={
source=../doc/manual/figs/wavepacket.mpeg
&autoPlay=true
&loop=true
&scaleMode=letterbox   % preserve aspect ration while scaling this video
}]{}{VPlayer.swf}

% #ifdef MOVIE_CONTROLS
\mediabutton[
  mediacommand=../doc/manual/figs/wavepacket.mpeg:playPause,
  overface=\\textcolor{blue}{\fbox{\strut Play/Pause}},
  downface=\\textcolor{red}{\fbox{\strut Play/Pause}}
  ]{\fhox{\strut Play/Pause}}
% #endif

% #elif MOVIE == "movie15"
\includemovie[poster,
label=../doc/manual/figs/wavepacket.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/wavepacket.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/wavepacket.mpeg}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/wavepacket.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/wavepacket.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/wavepacket.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/wavepacket.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/wavepacket.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif

% #elif MOVIE == "multimedia"
% Beamer-style \movie command
\movie[
label=../doc/manual/figs/wavepacket.mpeg,
width=0.9\linewidth,
autostart]{../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif


% Test wrong syntax and multi-line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files \code{../doc/manual/figs/wavepacket_*.png} in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}}{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}})


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate. Similar for Vimeo.

 Movies can be uploaded to YouTube and embedded as HTML or as a link. \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

 Computational fluid dynamics movie. \href{{http://vimeo.com/55562330}}{\nolinkurl{http://vimeo.com/55562330}}


% Test multi-line caption in figure

Here is figure~\ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.eps}}
  \caption{
  A long caption spanning several lines and containing verbatim words like \protect \code{my\_file\_v1} and \protect \code{my\_file\_v2} as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\paragraph{The $\theta$ parameter (not $\nabla$?).}
\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\bccq
def f(theta):
    return theta**2
\eccq

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}


\paragraph{Custom Environments.}
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the \code{.tex} by proper begin-end {\LaTeX} environments for theorems.
Should look nice in most formats!



% begin theorem
\label{theorem:fundamental1}


\paragraph{Theorem 5.}
Let $a=1$ and $b=2$. Then $c=3$.
% end theorem

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.


\paragraph{Tables.}
\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\bccq
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\eccq

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ \code{L\_i} } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & \code{NaN} \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with \code{|-} because of a negative number,
and \code{|} right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ \code{v\_1} } & \multicolumn{1}{c}{ $a_i$ + \code{v\_2} } & \multicolumn{1}{c}{ \code{verb\_3\_} } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\paragraph{A test of verbatim words in heading with subscript $a_i$: \protect\code{my\_file\_v1} and \protect\code{my\_file\_v2}.}
\paragraph{Files \protect\code{my\_file\_v1.py} and \protect\code{my\_file\_v2.py} define some math $a_{i-1}$.}
Here is
some text.

\paragraph{Bibliography test.}
Here is an example: \cite{Langtangen_Pedersen_2002} discussed propagation of
large destructive water waves, \cite{Langtangen_et_al_2002} gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in \cite{Langtangen_1994a}.
The book chapter \cite{Mardal_et_al_2003a} contains information on
C++ software tools for programming multigrid methods. A real retro
reference is \cite{Langtangen_1988d} about a big FORTRAN package.
Multiple references are also possible, e.g., see
\cite{Langtangen_Pedersen_2002,Mardal_et_al_2003a}.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
\cite{Langtangen_1992c,Langtangen_1994a,Mortensen_et_al_2011,Langtangen_Pedersen_2002}
and
\cite{Langtangen_et_al_2002,Glimsdal_et_al_20006,Rahman_et_al_2006b,Haga_et_al_2011a,Langtangen_2003a,Langtangen_2008a,Langtangen:95}
and all the work of
\cite{Langtangen_2012,Mardal_et_al_2003a,Jeberg_et_al_2004} as well as
old work \cite{Langtangen_1988d} and \cite{Langtangen_1989e}, and the
talk \cite{Langtangen_talk_2007a}.
Langtangen also had two thesis \cite{Langtangen:85,Langtangen_1989e}.
More retro citations are
the old ME-IN323 book \cite{Langtangen:91} and the
\cite{Langtangen:94b} OONSKI '94 paper.


% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}
\label{Example}

Examples can start with a subsection heading starting with \code{Example:}
and then, with the command-line option \code{--examples_as_exercises} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---


\paragraph{URLs.}
\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl} or \href{{http://folk.uio.no/hpl}}{hpl}. Also \code{file:///} works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html}}{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: \href{{mailto:hpl@simula.no}}{\nolinkurl{hpl@simula.no}}, or just a \href{{mailto:hpl@simula.no}}{mail link}, or a raw \href{{mailto:hpl@simula.no}}{\nolinkurl{mailto:hpl@simula.no}}.

Here are some tough tests of URLs, especially for the \code{latex} format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

For the \code{--device=paper} option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
\href{{https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py}}{\nolinkurl{decay_mod}}.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a \code{_static*} folder.

More tough tests: repeated URLs whose footnotes when using the
\code{--device=paper} option must be correct. We have
\href{{http://google.com}}{google}, \href{{http://google.com}}{google}, and
\href{{http://google.com}}{google}, which should result in exactly three
footnotes.



\paragraph{Test of Some {\LaTeX} Fixes.}
Let's check abbr.~of some common kind, e.g.~the well-known i.e.
expression as an example. Moreover, Dr.~Tang and Prof.~Monsen,
or maybe also prof.~Ting,
will go to the Dept.~of Science to test how Mr.~Hansen is doing together
with Ms.~Larsen. A reference like Sec.~\ref{subsubsec:ex} or
Ch.~\ref{subsubsec:ex}, or even App.~\ref{subsubsec:ex}, must also be
handled. Likewise, this is test no.~$i$ of Doconce features.
A sentence containing "refines lines" could easily
fool a regex substitution with only i.e.~since the dot matches anything.
Also, look at Fig.~4 to see how the data compares with Tab.~\ref{mytab}.

\paragraph{{\LaTeX} Mathematics.}
Here is an equation without label using backslash-bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}). They are a bit simpler than
the Navier-Stokes equations. And test {\LaTeX} hyphen in \code{CG-2}.
Also test $a_{i-j}$ as well as $kx-wt$.

Many of the next environments will fail in non-latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.

\subsection{Exercises}


% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}
\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error

% --- begin hint in exercise ---

\paragraph{Hint 1.}
Use \code{r = random.random()} and define head as \code{r <= 0.5}.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
\code{r = random.randint(1,2)} and define head when \code{r} is 1.
% --- end hint in exercise ---


% removed !bans ... !eans environment
% (because of the command-line option --without_answers)


% removed !bsol ... !esol environment
% (because of the command-line option --without_solutions)
Filenames: \code{flip_coin.py}, \code{flip_coin.pdf}.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---


\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
\end{enumerate}

\noindent
\paragraph{Not an exercise.}
Should be possible to stick a normal section in the middle of many
exercises.


% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}
\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard \code{random} module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}
\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate \code{n} points on a circle:

\bpypro
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\epypro

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the \code{circle} function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the \code{numpy.random} module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% removed !bans ... !eans environment
% (because of the command-line option --without_answers)


% removed !bsol ... !esol environment
% (because of the command-line option --without_solutions)

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: \code{norm.py}.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: \code{circles.pdf}.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}
\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% removed !bsol ... !esol environment
% (because of the command-line option --without_solutions)


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code (in plain verbatim) returning $x+1$ in hint:

\bccq
def func(x):
    return x + 1  # with code in hint
\eccq
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: \code{subexer_a.pdf}.


% removed !bans ... !eans environment
% (because of the command-line option --without_answers)

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: \code{subexer_b.pdf}.


% removed !bsol ... !esol environment
% (because of the command-line option --without_solutions)

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code \code{lambda x: x+2} is correctly placed here:

\bccq
lambda x: x+2
\eccq

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples_as_exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\subsection{Here goes another section}

With some text, before we continue with exercises.

\subsection{More Exercises}


% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}
\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: \code{verify_formula.py}.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for latex}
\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: \code{selc_composed.pdf}.

\end{exercise}
% --- end exercise ---




\bibliographystyle{plain}
\bibliography{papers.bib}



\subsection{Appendix: Just for testing; part I}

This is the first appendix.

\paragraph{A subsection within an appendix.}
Some text.

\subsection{Appendix: Just for testing; part II}

This is more stuff for an appendix.

\paragraph{Appendix: Testing identical titles.}
Without label.


\paragraph{Appendix: Testing identical titles.}
\label{test:title:id1}

With label.

\paragraph{Appendix: Testing identical titles.}
\label{test:title:id2}

With label.

\paragraph{Appendix: Testing identical titles.}
Without label.


\begin{graybox1admon}[Tip.]
Here is a tip or hint box, typeset as a notice box.
\end{graybox1admon}

\clearpage

Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent \href{{http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/}}{Script for Introduction to Version Control} provides a more detailed motivation why you will benefit greatly
from using version control systems.


\begin{graybox1admon}[Summary.]
\textbf{Bold remark:} Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
\end{graybox1admon}

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are \href{{http://dropbox.com}}{Dropbox} and \href{{http://drive.google.com}}{Google Drive}.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


\paragraph{Appendix: Testing inline comments.}
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. \shortinlinecomment{hpl 1}{ not sure if in the cloud is understood by all. }{ not sure if in } I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. \longinlinecomment{mp 2}{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} and watch the video. It explains
how files, like \code{myfile.py}, perhaps containing much math, like
$\partial u/\partial t$, are easily communicated between machines. }{ Simply go to \href{{http://dropbox.com}}{\nolinkurl{http://dropbox.com}} } It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  \longinlinecomment{hpl 3}{ The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools. }{ The following text aims }

\paragraph{Appendix: Testing headings ending with \protect\code{verbatim inline}.}
The point here is to test 1) \code{verbatim} code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in {\LaTeX}.

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: mako_test1.html *****************

<!-- tocinfo
{'highest level': 4, 'sections': []}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects that mako must be used -->

<p>
This document is translated to the format html.

<!-- ------------------- end of main content --------------- -->


************** File: mako_test2.html *****************

<!-- tocinfo
{'highest level': 4, 'sections': []}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects dangerous lines for mako, -->
<!-- starting with a %, but here it is not crucial since the -->
<!-- running text does not need mako :-) -->

<p>
<!-- begin verbatim block -->
<pre><code>/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</code></pre>
<!-- end verbatim block -->

<p>
And more code:
<!-- begin verbatim block -->
<pre><code>% Matlab comment only
...
</code></pre>
<!-- end verbatim block -->

<!-- ------------------- end of main content --------------- -->


************** File: mako_test3.html *****************

<!-- tocinfo
{'highest level': 4, 'sections': []}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects dangerous lines for mako, -->
<!-- starting with a %, and here it is crucial since the -->
<!-- running text does need mako -->

<p>
<!-- begin verbatim block -->
<pre><code>/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</code></pre>
<!-- end verbatim block -->

<p>
And more code:
<!-- begin verbatim block -->
<pre><code>% Matlab comment only
...
</code></pre>
<!-- end verbatim block -->

<!-- ------------------- end of main content --------------- -->


************** File: mako_test3b.html *****************

<!-- tocinfo
{'highest level': 4, 'sections': []}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects dangerous lines for mako, -->
<!-- starting with a %, and here it is crucial since the -->
<!-- running text does need mako -->

<p>
<!-- begin verbatim block -->
<pre><code>/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</code></pre>
<!-- end verbatim block -->

<p>
And more code:
<!-- begin verbatim block -->
<pre><code>% Matlab comment only
...
</code></pre>
<!-- end verbatim block -->

<!-- ------------------- end of main content --------------- -->


************** File: mako_test4.html *****************

<!-- tocinfo
{'highest level': 4, 'sections': []}
end of tocinfo -->


<!-- ------------------- main content ---------------------- -->

<!-- Purpose: correct mako_test3.do.txt such that we -->
<!-- can use mako and have lines starting with % -->
<!-- (i.e., the lines must manually be edited to -->
<!-- start with %%) -->

<p>
<!-- begin verbatim block -->
<pre><code>/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</code></pre>
<!-- end verbatim block -->

<p>
And more code:
<!-- begin verbatim block -->
<pre><code>% Matlab comment only
...
</code></pre>
<!-- end verbatim block -->

<!-- ------------------- end of main content --------------- -->


************** File: automake_sphinx_testdoc.py *****************
#!/usr/bin/env python
# Autogenerated file (by doconce sphinx_dir)
# Purpose: create HTML Sphinx version of testdoc

# Command-line arguments are transferred to the doconce format sphinx file
# compilation command

import glob, sys, os, commands, shutil

command_line_options = ' '.join(['"%s"' % arg for arg in sys.argv[1:]])

sphinx_rootdir = 'sphinx-rootdir'

def system(cmd, capture_output=False, echo=True):
    if echo:
        print 'running', cmd
    if capture_output:
        failure, outtext = commands.getstatusoutput(cmd) # Unix/Linux only
    else:
        failure = os.system(cmd)
    if failure:
        print 'Could not run', cmd
        sys.exit(1)
    if capture_output:
        return outtext

# Copy generated sphinx files to sphinx root directory
filename = 'testdoc'
shutil.copy('%s.rst' % filename, sphinx_rootdir)
for part in ['._part0000_testdoc', '._part0001_testdoc', '._part0002_testdoc']:
    shutil.copy('%s.rst' % part, sphinx_rootdir)

# Copy figures and movies directories
figdirs = glob.glob('fig*') + glob.glob('mov*')
for figdir in figdirs:
    destdir = os.path.join(sphinx_rootdir, figdir)
    if os.path.isdir(figdir) and not os.path.isdir(destdir):
        print 'copying', figdir, 'to', sphinx_rootdir
        shutil.copytree(figdir, destdir)

# Copy needed media files in current dir (not in fig* and mov*)
for rstfile in [os.path.join(sphinx_rootdir, filename + '.rst')]:
    f = open(rstfile, 'r')
    text = text_orig = f.read()
    f.close()
    import re
    media_files = [name.strip() for name in
                   re.findall('.. figure:: (.+)', text)]
    local_media_files = [name for name in media_files if not os.sep in name]

    for name in media_files:
        basename = os.path.basename(name)
        if name.startswith('http') or name.startswith('ftp'):
            pass
        else:
            if not os.path.isfile(os.path.join(sphinx_rootdir, basename)):
                print 'copying', name, 'to', sphinx_rootdir
                shutil.copy(name, sphinx_rootdir)
            if name not in local_media_files:
                # name lies in another directory, make local reference to it
                # since it is copied to sphinx_rootdir
                text = text.replace('.. figure:: %s' % name,
                                    '.. figure:: %s' % basename)
    if text != text_orig:
        f = open(rstfile, 'w')
        f.write(text)
        f.close()

# Copy linked local files, placed in _static*, to sphinx-rootdir/_static
staticdirs = glob.glob('_static*')
for staticdir in staticdirs:
    system('cp -r %s/* sphinx-rootdir/_static/' % staticdir)
    # (Note: must do cp -r since shutil.copy/copytree cannot copy a la cp -r)

# Compile web version of the sphinx document
os.chdir(sphinx_rootdir)
print os.getcwd()
system('make clean')
system('make html')

print 'Fix generated files:'
os.chdir('_build/html')
for filename in glob.glob('*.html'):
    # Fix double title in <title> tags
    system('doconce subst "<title>(.+?) &mdash;.+?</title>" "<title>\g<1></title>" %s' % filename, echo=False)
    # Fix admonition style
    system("""doconce replace "</head>" "
   <style type="text/css">
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
" %s""" % filename, echo=False)
    os.remove(filename + '.old~')
print """
google-chrome sphinx-rootdir/_build/html/index.html
"""

************** File: automake_sphinx_math_test.py *****************
#!/usr/bin/env python
# Autogenerated file (by doconce sphinx_dir)
# Purpose: create HTML Sphinx version of math_test

# Command-line arguments are transferred to the doconce format sphinx file
# compilation command

import glob, sys, os, commands, shutil

command_line_options = ' '.join(['"%s"' % arg for arg in sys.argv[1:]])

sphinx_rootdir = 'sphinx-rootdir-math'

def system(cmd, capture_output=False, echo=True):
    if echo:
        print 'running', cmd
    if capture_output:
        failure, outtext = commands.getstatusoutput(cmd) # Unix/Linux only
    else:
        failure = os.system(cmd)
    if failure:
        print 'Could not run', cmd
        sys.exit(1)
    if capture_output:
        return outtext

filename = 'math_test'
if not os.path.isfile(filename + '.rst'):
    # Filter doconce format to sphinx format and copy to sphinx directory
    cmd = 'doconce format sphinx %s %s' % (filename, command_line_options)
    print cmd
    system(cmd)

    # Fix: utf-8 encoding for non-English chars
    cmd = 'doconce guess_encoding %s.rst' % filename
    enc = system(cmd, capture_output=True)
    if enc == "iso-8859-1":
        # sphinx does not like non-English characters in iso-8859-1
        system('doconce change_encoding iso-8859-1 utf-8 %s.rst' % filename)

# Copy generated sphinx file to sphinx root directory
shutil.copy('%s.rst' % filename, sphinx_rootdir)

# Copy figures and movies directories
figdirs = glob.glob('fig*') + glob.glob('mov*')
for figdir in figdirs:
    destdir = os.path.join(sphinx_rootdir, figdir)
    if os.path.isdir(figdir) and not os.path.isdir(destdir):
        print 'copying', figdir, 'to', sphinx_rootdir
        shutil.copytree(figdir, destdir)

# Copy needed media files in current dir (not in fig* and mov*)
for rstfile in [os.path.join(sphinx_rootdir, filename + '.rst')]:
    f = open(rstfile, 'r')
    text = text_orig = f.read()
    f.close()
    import re
    media_files = [name.strip() for name in
                   re.findall('.. figure:: (.+)', text)]
    local_media_files = [name for name in media_files if not os.sep in name]

    for name in media_files:
        basename = os.path.basename(name)
        if name.startswith('http') or name.startswith('ftp'):
            pass
        else:
            if not os.path.isfile(os.path.join(sphinx_rootdir, basename)):
                print 'copying', name, 'to', sphinx_rootdir
                shutil.copy(name, sphinx_rootdir)
            if name not in local_media_files:
                # name lies in another directory, make local reference to it
                # since it is copied to sphinx_rootdir
                text = text.replace('.. figure:: %s' % name,
                                    '.. figure:: %s' % basename)
    if text != text_orig:
        f = open(rstfile, 'w')
        f.write(text)
        f.close()

# Copy linked local files, placed in _static*, to sphinx-rootdir-math/_static
staticdirs = glob.glob('_static*')
for staticdir in staticdirs:
    system('cp -r %s/* sphinx-rootdir-math/_static/' % staticdir)
    # (Note: must do cp -r since shutil.copy/copytree cannot copy a la cp -r)

# Compile web version of the sphinx document
os.chdir(sphinx_rootdir)
print os.getcwd()
system('make clean')
system('make html')

print 'Fix generated files:'
os.chdir('_build/html')
for filename in glob.glob('*.html'):
    # Fix double title in <title> tags
    system('doconce subst "<title>(.+?) &mdash;.+?</title>" "<title>\g<1></title>" %s' % filename, echo=False)
    # Fix admonition style
    system("""doconce replace "</head>" "
   <style type="text/css">
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
" %s""" % filename, echo=False)
    os.remove(filename + '.old~')
print """
google-chrome sphinx-rootdir-math/_build/html/index.html
"""

************** File: .testdoc_html_file_collection *****************
testdoc.html
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
../doc/manual/figs/mjolnir.mpeg
../doc/manual/figs/wavepacket.mpeg
../doc/manual/figs/wavepacket_*.png
wavepacket_0001.html
testdoc.do.txt
._part0000_testdoc.html
._part0001_testdoc.html
._part0002_testdoc.html

************** File: make.sh *****************
#!/bin/bash -x

function system {
  "$@"
  if [ $? -ne 0 ]; then
    echo "make.sh: unsuccessful command $@"
    echo "abort!"
    exit 1
  fi
}

rm -rf html_images reveal.js downloaded_figures latex_styles

# Note:  --examples_as_exercises is required to avoid abortion

# Make publish database
rm -rf papers.pub  venues.list # clean

publish import refs1.bib <<EOF
1
2
EOF
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

publish import refs2.bib <<EOF
2
2
EOF
# Simulate that we get new data, which is best put
# in a new file
publish import refs3.bib <<EOF
1
2
y
1
EOF

ex="--examples_as_exercises"
#ex=

system doconce format html testdoc --wordpress  $ex --html_exercise_icon=question_blue_on_white1.png --html_exercise_icon_width=80
cp testdoc.html testdoc_wordpress.html

system doconce format html testdoc --without_answers --without_solutions $ex -DSOMEVAR --html_exercise_icon=default
cp testdoc.html testdoc_no_solutions.html

system doconce format latex testdoc --without_answers --without_solutions $ex -DSOMEVAR --sections_down
cp testdoc.p.tex testdoc_no_solutions.p.tex

cp -r ../bundled/html_styles/style_vagrant .
doconce replace 'css/' 'style_vagrant/css/' style_vagrant/template_vagrant.html
system doconce format html testdoc.do.txt $ex --html_style=vagrant --html_template=style_vagrant/template_vagrant.html
cp testdoc.html testdoc_vagrant.html
# Test that a split of testdoc_vagrant.html becomes correct
doconce split_html testdoc_vagrant.html

system doconce format html testdoc.do.txt --pygments_html_linenos --html_style=solarized --pygments_html_style=emacs $ex --html_exercise_icon=exercise1.svg

system doconce remove_exercise_answers testdoc.html
system doconce html_colorbullets testdoc.html
system doconce split_html testdoc.html

system doconce format html testdoc.do.txt --pygments_html_linenos --html_style=solarized --pygments_html_style=emacs $ex --html_output=demo_testdoc

system doconce format latex testdoc.do.txt $ex SOMEVAR=True --skip_inline_comments
system doconce format pdflatex testdoc.do.txt --device=paper $ex --latex_double_hyphen
system doconce latex_exercise_toc testdoc

# doconce replace does not work well with system without quotes
doconce replace 'vspace{1cm} % after toc' 'clearpage % after toc' testdoc.p.tex
thpack='\\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section]'
doconce subst '% insert custom LaTeX commands\.\.\.' $thpack testdoc.p.tex

doconce subst '\\paragraph\{Theorem \d+\.\}' '' testdoc.p.tex
doconce replace '% begin theorem' '\begin{theorem}' testdoc.p.tex
doconce replace '% end theorem' '\end{theorem}' testdoc.p.tex
# because of --latex-double-hyphen:
doconce replace Newton--Cotes Newton-Cotes testdoc.p.tex
doconce replace --examples_as__exercises $ex testdoc.p.tex

# A4PAPER trigger summary environment to be smaller paragraph
# within the text (fine for proposals or articles).
system ptex2tex -DMINTED -DMOVIE=movie15 -DLATEX_HEADING=titlepage -DA4PAPER -DTODONOTES -DLINENUMBERS -DCOLORED_TABLE_ROWS=blue -DBLUE_SECTION_HEADINGS testdoc

# test that pdflatex works
system pdflatex -shell-escape testdoc
pdflatex -shell-escape testdoc
makeindex testdoc
bibtex testdoc
pdflatex -shell-escape testdoc
pdflatex -shell-escape testdoc

cp testdoc.tex testdoc.tex_ptex2tex
# testdoc.tex_ptex2tex corresponds to testdoc.pdf

# -DBOOK will not work for latex/pdflatex since we have an abstract,
# but here we just use the translated text for testing, not latex compiling
system doconce ptex2tex testdoc -DBOOK -DPALATINO sys=\begin{quote}\begin{Verbatim}@\end{Verbatim}\end{quote} pypro=ans:nt envir=minted > testdoc.tex_doconce_ptex2tex
echo "----------- end of doconce ptex2tex output ----------------" >> testdoc.tex_doconce_ptex2tex
cat testdoc.tex >> testdoc.tex_doconce_ptex2tex

system doconce format plain testdoc.do.txt $ex -DSOMEVAR=1 --tables2csv
system doconce format st testdoc.do.txt $ex
system doconce format sphinx testdoc.do.txt $ex
mv -f testdoc.rst testdoc.sphinx.rst

doconce format sphinx testdoc $ex
doconce split_rst testdoc
system doconce sphinx_dir author=HPL title='Just a test' version=0.1 theme=agni testdoc
cp automake_sphinx.py automake_sphinx_testdoc.py

system doconce format rst testdoc.do.txt $ex

system doconce format epytext testdoc.do.txt $ex
system doconce format pandoc testdoc.do.txt $ex
system doconce format mwiki testdoc.do.txt $ex
system doconce format cwiki testdoc.do.txt $ex
system doconce format ipynb testdoc.do.txt $ex

# Test mako variables too
system doconce format gwiki testdoc.do.txt --skip_inline_comments MYVAR1=3 MYVAR2='a string' $ex

# Test pandoc: from latex to markdown, from markdown to html
system doconce format latex testdoc.do.txt $ex
system doconce ptex2tex testdoc -DBOOK -DLATEX_HEADING=traditional

#doconce subst -s 'And here is a system of equations with labels.+?\\section' '\\section' testdoc.tex
# pandoc cannot work well with \Verb, needs \verb
system doconce replace '\Verb!' '\verb!' testdoc.tex
# pandoc v 10 does not handle a couple of the URLs
doconce replace '%E2%80%93' '' testdoc.tex
doconce replace '+%26+' '' testdoc.tex

system pandoc -f latex -t markdown -o testdoc.md testdoc.tex
system pandoc -f markdown -t html -o testdoc_pnd_l2h.html --mathjax -s testdoc.md
pandoc -v >> testdoc_pnd_l2h.html

system doconce format pandoc testdoc.do.txt $ex
system pandoc -t html -o testdoc_pnd_d2h.html --mathjax -s testdoc.md
pandoc -v >> testdoc_pnd_d2h.html

# Test slides
# slides1: rough small test
# slides2: much of scientific_writing.do.txt
# slides3: equal to slides/demo.do.txt
system doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg
cp slides1.html slides1_1st.html  # before running slides_html

system doconce slides_html slides1 reveal --html_slide_type=beigesmall

cp slides1.html slides1_reveal.html
/bin/ls -R reveal.js >> slides1_reveal.html

system doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg
system doconce slides_html slides1 deck --html_slide_type=sandstone.firefox

cp slides1.html slides1_deck.html
/bin/ls -R deck.js >> slides1_deck.html

system doconce format pdflatex slides1
system doconce ptex2tex slides1 -DLATEX_HEADING=beamer
system doconce slides_beamer slides1

system doconce format html slides2 --pygments_html_style=emacs
system doconce slides_html slides2 reveal --html_slide_type=beigesmall
cp slides2.html slides2_reveal.html

system doconce format pdflatex slides2
system doconce ptex2tex slides2 -DLATEX_HEADING=beamer envir=minted
system doconce slides_beamer slides2

system doconce format html slides3 --pygments_html_style=emacs SLIDE_TYPE=reveal SLIDE_THEME=beigesmall
system doconce slides_html slides3 reveal --html_slide_type=beigesmall
cp slides3.html slides3_reveal.html

theme=red3
system doconce format pdflatex slides3 SLIDE_TYPE=beamer SLIDE_THEME=$theme
system doconce ptex2tex slides3 -DLATEX_HEADING=beamer envir=minted
system doconce slides_beamer slides3 --beamer_slide_theme=$theme

system doconce format html slides1 --pygments_html_style=emacs
system doconce slides_html slides1 all

# Test grab
system doconce grab --from- '={5} Subsection 1' --to 'subroutine@' _testdoc.do.txt > testdoc.tmp
doconce grab --from 'Compute a Probability' --to- 'drawing uniformly' _testdoc.do.txt >> testdoc.tmp
doconce grab --from- '\*\s+\$.+normally' _testdoc.do.txt >> testdoc.tmp

# Test html templates
system doconce format html html_template --html_template=template1.html --no_pygments_html
cp html_template.html html_template1.html

system doconce format html html_template --html_template=template_inf1100.html  --pygments_html_style=emacs

# Test author special case and generalized references
system doconce format html author1
system doconce format latex author1
system doconce format sphinx author1
system doconce format plain author1

# Test math
name=math_test
doconce format pdflatex $name
doconce ptex2tex $name
pdflatex $name
system doconce format html $name
cp $name.html ${name}_html.html
doconce format sphinx $name
doconce sphinx_dir dirname=sphinx-rootdir-math $name
cp automake_sphinx.py automake_sphinx_math_test.py
python automake_sphinx.py
doconce format pandoc $name
# Do not use pandoc directly because it does not support MathJax sufficiently well
doconce md2html $name.md
cp $name.html ${name}_pandoc.html
doconce format pandoc $name
doconce md2latex $name

# Test admonitions
admon_tps="colors1 graybox1 paragraph graybox2 yellowbox graybox3 colors2"
for admon_tp in $admon_tps; do
system doconce format pdflatex admon --latex_admon=$admon_tp
doconce ptex2tex admon envir=minted
cp admon.tex admon_${admon_tp}.tex
pdflatex -shell-escape admon_${admon_tp}
done

system doconce format html admon --html_admon=lyx --html_style=blueish2
cp admon.html admon_lyx.html

system doconce format html admon --html_admon=paragraph --html_style=blueish2
cp admon.html admon_paragraph.html

system doconce format html admon --html_admon=colors
cp admon.html admon_colors.html

system doconce format html admon --html_admon=gray --html_style=blueish2
cp admon.html admon_gray.html

system doconce format html admon --html_admon=yellow
cp admon.html admon_yellow.html

system doconce format html admon --html_admon=apricot --html_style=solarized
cp admon.html admon_apricot.html

system doconce format html admon --html_style=vagrant --pygments_html_style=default --html_template=style_vagrant/template_vagrant.html
cp admon.html admon_vagrant.html

system doconce sphinx_dir dirname=tmp_admon admon
system python automake_sphinx.py
cp tmp_admon/_build/html/admon.html admon_sphinx.html

system doconce format mwiki admon
cp admon.mwiki admon_mwiki.mwiki

system doconce format pandoc github_md.do.txt --github_md

#google-chrome admon_*.html
#for pdf in admon_*.pdf; do evince $pdf; done

# Test encoding
system doconce guess_encoding encoding1.do.txt > tmp_encodings.txt
cp encoding1.do.txt tmp1.do.txt
system doconce change_encoding utf-8 latin1 tmp1.do.txt
system doconce guess_encoding tmp1.do.txt >> tmp_encodings.txt
system doconce change_encoding latin1 utf-8 tmp1.do.txt
system doconce guess_encoding tmp1.do.txt >> tmp_encodings.txt
system doconce guess_encoding encoding2.do.txt >> tmp_encodings.txt
cp encoding1.do.txt tmp2.do.txt
system doconce change_encoding utf-8 latin1 tmp2.do.txt
doconce guess_encoding tmp2.do.txt >> tmp_encodings.txt

# Test mako problems
system doconce format html mako_test1 --no_pygments_html  # mako variable only, no % lines
system doconce format html mako_test2 --no_pygments_html  # % lines inside code, but need for mako
system doconce format html mako_test3 --no_pygments_html  # % lines inside code
cp mako_test3.html mako_test3b.html
system doconce format html mako_test3 --no_pygments_html # no problem message
system doconce format html mako_test4 --no_pygments_html  # works fine, lines start with %%

system doconce csv2table testtable.csv > testtable.do.txt

# Test error detection
doconce format plain failures
cp failures.do.txt tmp2.do.txt
doconce subst 'failure\}\n\n!bc' 'failure}\n\nHello\n!bc' tmp2.do.txt
doconce format rst tmp2
doconce replace '\label' 'label' tmp2.do.txt
doconce replace '\idx' 'idx' tmp2.do.txt
doconce replace '\cite' 'cite' tmp2.do.txt
doconce format rst tmp2
doconce subst -s '__Paragraph before.+!bc' '!bc' tmp2.do.txt
doconce format rst tmp2
doconce replace 'streamtubes width' 'streamtubes,  width' tmp2.do.txt
doconce format rst tmp2
doconce replace '# Comment before math' '' tmp2.do.txt
doconce format rst tmp2
doconce replace '# Comment before list' '' tmp2.do.txt
doconce format rst tmp2
doconce replace '`Google`' '`Google` site' tmp2.do.txt
doconce format rst tmp2
echo
echo "When we reach this point in the script,"
echo "it is clearly a successful run of all tests!"


************** File: math_test.do.txt *****************
TITLE: How various formats can deal with LaTeX math
AUTHOR: HPL
DATE: today


This document is translated to the format _${FORMAT}_. The purpose is to
test math and doconce and various output formats.

__Test 1: Inline math.__ Here is a sentence contains the equation $u(t)=e^{-at}$.

__Test 2: A single equation without label.__ Here it is

!bt
\[ u(t)=e^{-at} \]
!et

__Test 3: A single equation with label.__ Here it is as a one-line
latex code,

!bc
|bt
\begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
|et
!ec
looking like

!bt
\begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
!et
and as a three-line latex code:

!bc
|bt
\begin{equation}
u(t)=e^{-at} label{eq1b}
\end{equation}
|et
!ec
looking like

!bt
\begin{equation}
u(t)=e^{-at} label{eq1b}
\end{equation}
!et
This equation has label (ref{eq1b}).


__Test 4: Multiple, aligned equations without label.__ Only the align
environment is supported by other formats than LaTeX for typesetting
multiple, aligned equations. The code reads

!bc
|bt
\begin{align*}
u(t)&=e^{-at}\\
v(t) - 1 &= \frac{du}{dt}
\end{align*}
|et
!ec
and results in

!bt
\begin{align*}
u(t)&=e^{-at}\\
v(t) - 1 &= \frac{du}{dt}
\end{align*}
!et

__Test 5: Multiple, aligned equations with label.__ We use align with
labels:

!bc
|bt
\begin{align}
u(t)&=e^{-at}
label{eq2b}\\
v(t) - 1 &= \frac{du}{dt}
label{eq3b}
\end{align}
|et
!ec
and results in

!bt
\begin{align}
u(t)&=e^{-at} label{eq2b}\\
v(t) - 1 &= \frac{du}{dt} label{eq3b}
\end{align}
!et
We can refer to the last equations as the system (ref{eq2b})-(ref{eq3b}).

# #if FORMAT == "sphinx"
Actually, *Sphinx does not support the align environment with labels*,
such as we write above,
but Doconce splits in this case the equations into separate, single equations
with labels. Hence the user can write one code with align and labels
and have to work in LaTeX, HTML, and Sphinx. The generated Sphinx code
in the present case is

!bc rst
.. math::
   :label: eq2b

        u(t)=e^{-at}


.. math::
   :label: eq3b

        v(t) - 1 = \frac{du}{dt}

!ec
# #endif

# #if FORMAT == "pandoc"
Original Pandoc-extended Markdown transformed to HTML via Pandoc
does not work with labels and multiple equations. `doconce md2html`
fixes the trouble by adding full support for MathJax and avoiding
that eqref references become empty.

One can write with align and labels in the Doconce document and get excellent
output in LaTeX, HTML, Sphinx, and Markdown-based HTML. Without
`doconce md2html` one must accept that labeles have very limited support
compared to more advanced MathJax.
# #endif


__Test 6: Multiple, aligned eqnarray equations without label.__ Let us
try the old eqnarray environment.

!bc
|bt
\begin{eqnarray*}
u(t)&=& e^{-at}\\
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}
|et
!ec
and results in

!bt
\begin{eqnarray*}
u(t)&=& e^{-at}\\
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}
!et

__Test 7: Multiple, eqnarrayed equations with label.__ We use eqnarray with
labels:

!bc
|bt
\begin{eqnarray}
u(t)&=& e^{-at}
label{eq2c}\\
v(t) - 1 &=& \frac{du}{dt}
label{eq3c}
\end{eqnarray}
|et
!ec
and results in

!bt
\begin{eqnarray}
u(t)&=& e^{-at} label{eq2c}\\
v(t) - 1 &=& \frac{du}{dt} label{eq3c}
\end{eqnarray}
!et
Can we refer to the last equations as the system (ref{eq2c})-(ref{eq3c})?
# #if FORMAT == "sphinx"
No, unfortunately not.
Note: Doconce takes the eqnarray with labels and replaces it automatically
by the Sphinx code

!bc rst
.. math::

        u(t) &=  e^{-at} \\
        v(t)  &=  \frac{du}{dt}
!ec
That is why the equation numbers are gone and that eqnarray seemingly
works. MathJax does not support eqnarray with labels so Sphinx would
probably fail to show them (unless one tries PNG images or other
math engines?). The rule of thumb is to avoid equarray.
# #endif

__Test 8: newcommands and boldface bm vs pmb.__
We have

!bt
\[ \color{blue}{\frac{\partial\u}{\partial t}} +
\nabla\cdot\nabla\u = \nu\nabla^2\u -
\frac{1}{\varrho}\nabla p,\]
!et
and $\nabla\u (\x)\cdot\normalvec$
with plain old pmb. Here are the same formulas using `\bm`:

!bt
\[ \color{blue}{\frac{\partial\ubm}{\partial t}} +
\nabla\cdot\nabla\ubm = \nu\nabla^2\ubm -
\frac{1}{\varrho}\nabla p,\]
!et
and $\nabla\ubm (\xbm)\cdot\normalvecbm$.

# #if FORMAT in ("html", "sphinx", "pandoc", "ipynb")
Note: for the ${FORMAT} format, `\bm` was substituted by Doconce
to `\boldsymbol`.
# #endif



************** File: math_test.md *****************
% How various formats can deal with LaTeX math
% HPL
% Jan 32, 2100

This document is translated to the format _pandoc_. The purpose is to
test math and doconce and various output formats.

*Test 1: Inline math.* Here is a sentence contains the equation $u(t)=e^{-at}$.

*Test 2: A single equation without label.* Here it is

$$
 u(t)=e^{-at} 
$$

*Test 3: A single equation with label.* Here it is as a one-line
latex code,


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{equation} u(t)=e^{-at} \label{eq1}\end{equation}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

looking like

$$
\begin{equation} u(t)=e^{-at} \label{eq1}\end{equation}
$$
and as a three-line latex code:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{equation}
u(t)=e^{-at} \label{eq1b}
\end{equation}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

looking like

$$
\begin{equation}
u(t)=e^{-at} \label{eq1b}
\end{equation}
$$
This equation has label \eqref{eq1b}.


*Test 4: Multiple, aligned equations without label.* Only the align
environment is supported by other formats than LaTeX for typesetting
multiple, aligned equations. The code reads


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{align*}
u(t)&=e^{-at}\\ 
v(t) - 1 &= \frac{du}{dt}
\end{align*}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and results in

$$

u(t)=e^{-at}

$$

$$
  
v(t) - 1 = \frac{du}{dt}

$$

*Test 5: Multiple, aligned equations with label.* We use align with
labels:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{align}
u(t)&=e^{-at}
\label{eq2b}\\ 
v(t) - 1 &= \frac{du}{dt}
\label{eq3b}
\end{align}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and results in

$$
\begin{equation}
u(t)=e^{-at} \label{eq2b}
\end{equation}
$$

$$
\begin{equation}  
v(t) - 1 = \frac{du}{dt} \label{eq3b}
\end{equation}
$$
We can refer to the last equations as the system \eqref{eq2b}-\eqref{eq3b}.


Original Pandoc-extended Markdown transformed to HTML via Pandoc
does not work with labels and multiple equations. `doconce md2html`
fixes the trouble by adding full support for MathJax and avoiding
that eqref references become empty.

One can write with align and labels in the Doconce document and get excellent
output in LaTeX, HTML, Sphinx, and Markdown-based HTML. Without
`doconce md2html` one must accept that labeles have very limited support
compared to more advanced MathJax.


*Test 6: Multiple, aligned eqnarray equations without label.* Let us
try the old eqnarray environment.


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{eqnarray*}
u(t)&=& e^{-at}\\ 
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and results in

$$
\begin{eqnarray*}
u(t)&=& e^{-at}\\ 
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}
$$

*Test 7: Multiple, eqnarrayed equations with label.* We use eqnarray with
labels:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{eqnarray}
u(t)&=& e^{-at}
\label{eq2c}\\ 
v(t) - 1 &=& \frac{du}{dt}
\label{eq3c}
\end{eqnarray}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and results in

$$
\begin{eqnarray}
u(t)&=& e^{-at} \label{eq2c}\\ 
v(t) - 1 &=& \frac{du}{dt} \label{eq3c}
\end{eqnarray}
$$
Can we refer to the last equations as the system \eqref{eq2c}-\eqref{eq3c}?

*Test 8: newcommands and boldface bm vs pmb.* We have

$$
 \color{blue}{\frac{\partial\u}{\partial t}} +
\nabla\cdot\nabla\u = \nu\nabla^2\u -
\frac{1}{\varrho}\nabla p,
$$
and $\nabla\u (\pmb{x})\cdot\pmb{n}$
with plain old pmb. Here are the same formulas using `\bm`:

$$
 \color{blue}{\frac{\partial\ubm}{\partial t}} +
\nabla\cdot\nabla\ubm = \nu\nabla^2\ubm -
\frac{1}{\varrho}\nabla p,
$$
and $\nabla\ubm (\xbm)\cdot\normalvecbm$.

Note: for the pandoc format, `\bm` was substituted by Doconce
to `\boldsymbol`.


************** File: math_test_html.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="How various formats can deal with LaTeX math">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}

</style>

</head>

<!-- tocinfo
{'highest level': 4, 'sections': []}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>How various formats can deal with LaTeX math</title>

<center><h1>How various formats can deal with LaTeX math</h1></center>  <!-- document title -->

<p>
<!-- author(s): HPL -->

<center>
<b>HPL</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
This document is translated to the format <b>html</b>. The purpose is to
test math and doconce and various output formats.

<p>
<b>Test 1: Inline math.</b>
Here is a sentence contains the equation \( u(t)=e^{-at} \).

<p>
<b>Test 2: A single equation without label.</b>
Here it is

<p>
$$ u(t)=e^{-at} $$


<p>
<b>Test 3: A single equation with label.</b>
Here it is as a one-line
latex code,

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
!et
</pre></div>
<p>
looking like

<p>
$$
\begin{equation} u(t)=e^{-at} \label{eq1}\end{equation}
$$

and as a three-line latex code:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{equation}
u(t)=e^{-at} label{eq1b}
\end{equation}
!et
</pre></div>
<p>
looking like

<p>
$$
\begin{equation}
u(t)=e^{-at} \label{eq1b}
\end{equation}
$$

This equation has label \eqref{eq1b}.

<p>
<b>Test 4: Multiple, aligned equations without label.</b>
Only the align
environment is supported by other formats than LaTeX for typesetting
multiple, aligned equations. The code reads

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{align*}
u(t)&amp;=e^{-at}\\ 
v(t) - 1 &amp;= \frac{du}{dt}
\end{align*}
!et
</pre></div>
<p>
and results in

<p>
$$
\begin{align*}
u(t)&=e^{-at}\\ 
v(t) - 1 &= \frac{du}{dt}
\end{align*}
$$


<p>
<b>Test 5: Multiple, aligned equations with label.</b>
We use align with
labels:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{align}
u(t)&amp;=e^{-at}
label{eq2b}\\ 
v(t) - 1 &amp;= \frac{du}{dt}
label{eq3b}
\end{align}
!et
</pre></div>
<p>
and results in

<p>
$$
\begin{align}
u(t)&=e^{-at} \label{eq2b}\\ 
v(t) - 1 &= \frac{du}{dt} \label{eq3b}
\end{align}
$$

We can refer to the last equations as the system \eqref{eq2b}-\eqref{eq3b}.

<p>
<b>Test 6: Multiple, aligned eqnarray equations without label.</b>
Let us
try the old eqnarray environment.

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{eqnarray*}
u(t)&amp;=&amp; e^{-at}\\ 
v(t) - 1 &amp;=&amp; \frac{du}{dt}
\end{eqnarray*}
!et
</pre></div>
<p>
and results in

<p>
$$
\begin{eqnarray*}
u(t)&=& e^{-at}\\ 
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}
$$


<p>
<b>Test 7: Multiple, eqnarrayed equations with label.</b>
We use eqnarray with
labels:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{eqnarray}
u(t)&amp;=&amp; e^{-at}
label{eq2c}\\ 
v(t) - 1 &amp;=&amp; \frac{du}{dt}
label{eq3c}
\end{eqnarray}
!et
</pre></div>
<p>
and results in

<p>
$$
\begin{eqnarray}
u(t)&=& e^{-at} \label{eq2c}\\ 
v(t) - 1 &=& \frac{du}{dt} \label{eq3c}
\end{eqnarray}
$$

Can we refer to the last equations as the system \eqref{eq2c}-\eqref{eq3c}?

<p>
<b>Test 8: newcommands and boldface bm vs pmb.</b>
We have

<p>
$$ \color{blue}{\frac{\partial\u}{\partial t}} +
\nabla\cdot\nabla\u = \nu\nabla^2\u -
\frac{1}{\varrho}\nabla p,$$

and \( \nabla\u (\pmb{x})\cdot\pmb{n} \)
with plain old pmb. Here are the same formulas using <code>\bm</code>:

<p>
$$ \color{blue}{\frac{\partial\ubm}{\partial t}} +
\nabla\cdot\nabla\ubm = \nu\nabla^2\ubm -
\frac{1}{\varrho}\nabla p,$$

and \( \nabla\ubm (\xbm)\cdot\normalvecbm \).

<p>
Note: for the html format, <code>\bm</code> was substituted by Doconce
to <code>\boldsymbol</code>.

<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: math_test_pandoc.html *****************
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="HPL" />
  <title>How various formats can deal with LaTeX math</title>
  <style type="text/css">code{white-space: pre;}</style>
  
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<div id="header">
<h1 class="title">How various formats can deal with LaTeX math</h1>
<h2 class="author">HPL</h2>
<h3 class="date">Jan 32, 2100</h3>
</div>
<p>This document is translated to the format <em>pandoc</em>. The purpose is to test math and doconce and various output formats.</p>
<p><em>Test 1: Inline math.</em> Here is a sentence contains the equation <span class="math">\(u(t)=e^{-at}\)</span>.</p>
<p><em>Test 2: A single equation without label.</em> Here it is</p>
<p><span class="math">\[
 u(t)=e^{-at} 
\]</span></p>
<p><em>Test 3: A single equation with label.</em> Here it is as a one-line latex code,</p>
<pre><code>!bt
\begin{equation} u(t)=e^{-at} \label{eq1}\end{equation}
!et</code></pre>
<p>looking like</p>
<p><span class="math">\[
\begin{equation} u(t)=e^{-at} \label{eq1}\end{equation}
\]</span> and as a three-line latex code:</p>
<pre><code>!bt
\begin{equation}
u(t)=e^{-at} \label{eq1b}
\end{equation}
!et</code></pre>
<p>looking like</p>
<p><span class="math">\[
\begin{equation}
u(t)=e^{-at} \label{eq1b}
\end{equation}
\]</span> This equation has label \eqref{eq1b}.</p>
<p><em>Test 4: Multiple, aligned equations without label.</em> Only the align environment is supported by other formats than LaTeX for typesetting multiple, aligned equations. The code reads</p>
<pre><code>!bt
\begin{align*}
u(t)&amp;=e^{-at}\\ 
v(t) - 1 &amp;= \frac{du}{dt}
\end{align*}
!et</code></pre>
<p>and results in</p>
<p>$$</p>
<p>u(t)=e^{-at}</p>
<p>$$</p>
<p>$$</p>
<p>v(t) - 1 = </p>
<p>$$</p>
<p><em>Test 5: Multiple, aligned equations with label.</em> We use align with labels:</p>
<pre><code>!bt
\begin{align}
u(t)&amp;=e^{-at}
\label{eq2b}\\ 
v(t) - 1 &amp;= \frac{du}{dt}
\label{eq3b}
\end{align}
!et</code></pre>
<p>and results in</p>
<p><span class="math">\[
\begin{equation}
u(t)=e^{-at} \label{eq2b}
\end{equation}
\]</span></p>
<p><span class="math">\[
\begin{equation}  
v(t) - 1 = \frac{du}{dt} \label{eq3b}
\end{equation}
\]</span> We can refer to the last equations as the system \eqref{eq2b}-\eqref{eq3b}.</p>
<p>Original Pandoc-extended Markdown transformed to HTML via Pandoc does not work with labels and multiple equations. <code>doconce md2html</code> fixes the trouble by adding full support for MathJax and avoiding that eqref references become empty.</p>
<p>One can write with align and labels in the Doconce document and get excellent output in LaTeX, HTML, Sphinx, and Markdown-based HTML. Without <code>doconce md2html</code> one must accept that labeles have very limited support compared to more advanced MathJax.</p>
<p><em>Test 6: Multiple, aligned eqnarray equations without label.</em> Let us try the old eqnarray environment.</p>
<pre><code>!bt
\begin{eqnarray*}
u(t)&amp;=&amp; e^{-at}\\ 
v(t) - 1 &amp;=&amp; \frac{du}{dt}
\end{eqnarray*}
!et</code></pre>
<p>and results in</p>
<p><span class="math">\[
\begin{eqnarray*}
u(t)&amp;=&amp; e^{-at}\\ 
v(t) - 1 &amp;=&amp; \frac{du}{dt}
\end{eqnarray*}
\]</span></p>
<p><em>Test 7: Multiple, eqnarrayed equations with label.</em> We use eqnarray with labels:</p>
<pre><code>!bt
\begin{eqnarray}
u(t)&amp;=&amp; e^{-at}
\label{eq2c}\\ 
v(t) - 1 &amp;=&amp; \frac{du}{dt}
\label{eq3c}
\end{eqnarray}
!et</code></pre>
<p>and results in</p>
<p><span class="math">\[
\begin{eqnarray}
u(t)&amp;=&amp; e^{-at} \label{eq2c}\\ 
v(t) - 1 &amp;=&amp; \frac{du}{dt} \label{eq3c}
\end{eqnarray}
\]</span> Can we refer to the last equations as the system \eqref{eq2c}-\eqref{eq3c}?</p>
<p><em>Test 8: newcommands and boldface bm vs pmb.</em> We have</p>
<p><span class="math">\[
 \color{blue}{\frac{\partial\u}{\partial t}} +
\nabla\cdot\nabla\u = \nu\nabla^2\u -
\frac{1}{\varrho}\nabla p,
\]</span> and <span class="math">\(\nabla\u (\pmb{x})\cdot\pmb{n}\)</span> with plain old pmb. Here are the same formulas using <code>\bm</code>:</p>
<p><span class="math">\[
 \color{blue}{\frac{\partial\ubm}{\partial t}} +
\nabla\cdot\nabla\ubm = \nu\nabla^2\ubm -
\frac{1}{\varrho}\nabla p,
\]</span> and <span class="math">\(\nabla\ubm (\xbm)\cdot\normalvecbm\)</span>.</p>
<p>Note: for the pandoc format, <code>\bm</code> was substituted by Doconce to <code>\boldsymbol</code>.</p>
</body>
</html>

************** File: math_test.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{How various formats can deal with {\LaTeX} math}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
How various formats can deal with {\LaTeX} math
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{How various formats can deal with {\LaTeX} math}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{How various formats can deal with {\LaTeX} math}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
How various formats can deal with {\LaTeX} math
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{HPL}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{HPL${}^{}$}}\\ [3mm]
    
\ \\ [2mm]

% #elif LATEX_HEADING == "Springer_collection"

\author{HPL}
% Short version of authors:
%\authorrunning{...}
\institute{HPL}

% #elif LATEX_HEADING == "beamer"
\author{HPL\inst{}}
\institute{}
% #else

\begin{center}
{\bf HPL${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


This document is translated to the format \textbf{pdflatex}. The purpose is to
test math and doconce and various output formats.

\paragraph{Test 1: Inline math.}
Here is a sentence contains the equation $u(t)=e^{-at}$.

\paragraph{Test 2: A single equation without label.}
Here it is

\[ u(t)=e^{-at} \]

\paragraph{Test 3: A single equation with label.}
Here it is as a one-line
latex code,

\bccq
!bt
\begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
!et
\eccq
looking like

\begin{equation} u(t)=e^{-at} \label{eq1}\end{equation}
and as a three-line latex code:

\bccq
!bt
\begin{equation}
u(t)=e^{-at} label{eq1b}
\end{equation}
!et
\eccq
looking like

\begin{equation}
u(t)=e^{-at} \label{eq1b}
\end{equation}
This equation has label (\ref{eq1b}).


\paragraph{Test 4: Multiple, aligned equations without label.}
Only the align
environment is supported by other formats than {\LaTeX} for typesetting
multiple, aligned equations. The code reads

\bccq
!bt
\begin{align*}
u(t)&=e^{-at}\\ 
v(t) - 1 &= \frac{du}{dt}
\end{align*}
!et
\eccq
and results in

\begin{align*}
u(t)&=e^{-at}\\ 
v(t) - 1 &= \frac{du}{dt}
\end{align*}

\paragraph{Test 5: Multiple, aligned equations with label.}
We use align with
labels:

\bccq
!bt
\begin{align}
u(t)&=e^{-at}
label{eq2b}\\ 
v(t) - 1 &= \frac{du}{dt}
label{eq3b}
\end{align}
!et
\eccq
and results in

\begin{align}
u(t)&=e^{-at} \label{eq2b}\\ 
v(t) - 1 &= \frac{du}{dt} \label{eq3b}
\end{align}
We can refer to the last equations as the system (\ref{eq2b})-(\ref{eq3b}).




\paragraph{Test 6: Multiple, aligned eqnarray equations without label.}
Let us
try the old eqnarray environment.

\bccq
!bt
\begin{eqnarray*}
u(t)&=& e^{-at}\\ 
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}
!et
\eccq
and results in

\begin{eqnarray*}
u(t)&=& e^{-at}\\ 
v(t) - 1 &=& \frac{du}{dt}
\end{eqnarray*}

\paragraph{Test 7: Multiple, eqnarrayed equations with label.}
We use eqnarray with
labels:

\bccq
!bt
\begin{eqnarray}
u(t)&=& e^{-at}
label{eq2c}\\ 
v(t) - 1 &=& \frac{du}{dt}
label{eq3c}
\end{eqnarray}
!et
\eccq
and results in

\begin{eqnarray}
u(t)&=& e^{-at} \label{eq2c}\\ 
v(t) - 1 &=& \frac{du}{dt} \label{eq3c}
\end{eqnarray}
Can we refer to the last equations as the system (\ref{eq2c})-(\ref{eq3c})?

\paragraph{Test 8: newcommands and boldface bm vs pmb.}
We have

\[ \color{blue}{\frac{\partial\u}{\partial t}} +
\nabla\cdot\nabla\u = \nu\nabla^2\u -
\frac{1}{\varrho}\nabla p,\]
and $\nabla\u (\x)\cdot\normalvec$
with plain old pmb. Here are the same formulas using \code{\bm}:

\[ \color{blue}{\frac{\partial\ubm}{\partial t}} +
\nabla\cdot\nabla\ubm = \nu\nabla^2\ubm -
\frac{1}{\varrho}\nabla p,\]
and $\nabla\ubm (\xbm)\cdot\normalvecbm$.


% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: math_test.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

How various formats can deal with LaTeX math
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

:Author: HPL
:Date: Jan 32, 2100

This document is translated to the format **sphinx**. The purpose is to
test math and doconce and various output formats.

*Test 1: Inline math.* Here is a sentence contains the equation :math:`u(t)=e^{-at}`.

*Test 2: A single equation without label.* Here it is


.. math::
         u(t)=e^{-at} 


*Test 3: A single equation with label.* Here it is as a one-line
latex code,


.. code-block:: text


        !bt
        \begin{equation} u(t)=e^{-at} label{eq1}\end{equation}
        !et

looking like


.. math::
   :label: eq1
         u(t)=e^{-at} 

and as a three-line latex code:


.. code-block:: text


        !bt
        \begin{equation}
        u(t)=e^{-at} label{eq1b}
        \end{equation}
        !et

looking like


.. math::
   :label: eq1b
        
        u(t)=e^{-at} 
        

This equation has label :eq:`eq1b`.


*Test 4: Multiple, aligned equations without label.* Only the align
environment is supported by other formats than LaTeX for typesetting
multiple, aligned equations. The code reads


.. code-block:: text


        !bt
        \begin{align*}
        u(t)&=e^{-at}\\ 
        v(t) - 1 &= \frac{du}{dt}
        \end{align*}
        !et

and results in


.. math::
        
        u(t)&=e^{-at}\\ 
        v(t) - 1 &= \frac{du}{dt}
        


*Test 5: Multiple, aligned equations with label.* We use align with
labels:


.. code-block:: text


        !bt
        \begin{align}
        u(t)&=e^{-at}
        label{eq2b}\\ 
        v(t) - 1 &= \frac{du}{dt}
        label{eq3b}
        \end{align}
        !et

and results in


.. math::
   :label: eq2b
        
        u(t)=e^{-at} 
        



.. math::
   :label: eq3b
          
        v(t) - 1 = \frac{du}{dt} 
        

We can refer to the last equations as the system :eq:`eq2b`-:eq:`eq3b`.

Actually, *Sphinx does not support the align environment with labels*,
such as we write above,
but Doconce splits in this case the equations into separate, single equations
with labels. Hence the user can write one code with align and labels
and have to work in LaTeX, HTML, and Sphinx. The generated Sphinx code
in the present case is


.. code-block:: rst

        .. math::
           :label: eq2b
        
                u(t)=e^{-at}
        
        
        .. math::
           :label: eq3b
        
                v(t) - 1 = \frac{du}{dt}
        




*Test 6: Multiple, aligned eqnarray equations without label.* Let us
try the old eqnarray environment.


.. code-block:: text


        !bt
        \begin{eqnarray*}
        u(t)&=& e^{-at}\\ 
        v(t) - 1 &=& \frac{du}{dt}
        \end{eqnarray*}
        !et

and results in


.. math::
        
        u(t) &=  e^{-at}\\ 
        v(t) - 1  &=  \frac{du}{dt}
        


*Test 7: Multiple, eqnarrayed equations with label.* We use eqnarray with
labels:


.. code-block:: text


        !bt
        \begin{eqnarray}
        u(t)&=& e^{-at}
        label{eq2c}\\ 
        v(t) - 1 &=& \frac{du}{dt}
        label{eq3c}
        \end{eqnarray}
        !et

and results in


.. math::
        
        u(t) &=  e^{-at} \\ 
        v(t) - 1  &=  \frac{du}{dt} 
        

Can we refer to the last equations as the system :eq:`eq2c`-:eq:`eq3c`?
No, unfortunately not.
Note: Doconce takes the eqnarray with labels and replaces it automatically
by the Sphinx code


.. code-block:: rst

        .. math::
        
                u(t) &=  e^{-at} \\ 
                v(t)  &=  \frac{du}{dt}

That is why the equation numbers are gone and that eqnarray seemingly
works. MathJax does not support eqnarray with labels so Sphinx would
probably fail to show them (unless one tries PNG images or other
math engines?). The rule of thumb is to avoid equarray.

*Test 8: newcommands and boldface bm vs pmb.* We have


.. math::
         \color{blue}{\frac{\partial\pmb{u}}{\partial t}} +
        \nabla\cdot\nabla\pmb{u} = \nu\nabla^2\pmb{u} -
        \frac{1}{\varrho}\nabla p,

and :math:`\nabla\pmb{u} (\pmb{x})\cdot\pmb{n}`
with plain old pmb. Here are the same formulas using ``\bm``:


.. math::
         \color{blue}{\frac{\partial\boldsymbol{u}}{\partial t}} +
        \nabla\cdot\nabla\boldsymbol{u} = \nu\nabla^2\boldsymbol{u} -
        \frac{1}{\varrho}\nabla p,

and :math:`\nabla\boldsymbol{u} (\boldsymbol{x})\cdot\boldsymbol{n}`.

Note: for the sphinx format, ``\bm`` was substituted by Doconce
to ``\boldsymbol``.

************** File: testdoc_vagrant.html *****************
<html>
<head>
<!--
This style is adopted from the (now old) vagrant 1.0 web
pages. The style builds on the Twitter Bootstrap style.
Modifications by Hans Petter Langtangen, hpl@simula.no.

This style file should be copied and the following
elements edited:

Logo heading:

 LogoWord
 withSubWord

Navigation links at the top:

 GO TO 1
 GO TO 2

Footer at the end:

 Here goes a footer, if desired, maybe with a Copyright &copy;

-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />

<link rel="stylesheet" href="style_vagrant/css/twitter_bootstrap.css">
<link rel="stylesheet" href="style_vagrant/css/vagrant.css">
<!-- Define color of headings here (last definition counts) -->
<style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */
</style>
</head>
<body>

<title> Appendix: Testing headings ending with `verbatim inline` </title>

<div class="container">
 <div class="row Header with-border">
  <div class="span3 Module logo">
   <h1><a href="/">LogoWord<span class="subtitle">withSubWord</span></a></h1>
  </div>
  <div class="span9">
   <div class="Module navigation">
   <!-- Navigation at the top of the page -->
    <ul>
     <li> <a href="">GO TO 1</a></li>
     <li> <a href="">GO TO 2</a></li>
    </ul>
   </div>
  </div>
 </div>
</div>


<!-- Here goes the table of contents in the sidebar
     <li class="active"> means dark blue background for current section
-->
<div class="row">
 <div class="span3 Module sidebar">
  <div class="well" style="padding: 8px 0px;">
   <ul class="nav nav-list">
     <!-- Syntax:
     <li> <a href="...">Section 1</a></li>
     <li class="active"> <a href="...">Section 2</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2a</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2b</a></li>
     -->
     <!-- Doconce automatically fills in the table of contents -->
          <!-- vagrant nav toc: " Section 1 " --> <li>  <a href="._part0001_testdoc_vagrant.html#sec1"> Section 1 </a>
     <!-- vagrant nav toc: " Subsection 1 " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec1"> Subsection 1 </a>
     <!-- vagrant nav toc: " Subsection 2: Testing figures and movies " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:ex"> Subsection 2: Testing figures and movies </a>
     <!-- vagrant nav toc: " Test of movies " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec3"> Test of movies </a>
     <!-- vagrant nav toc: " The \( \theta \) parameter (not \( \nabla \)?) " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a>
     <!-- vagrant nav toc: " Custom Environments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec5"> Custom Environments </a>
     <!-- vagrant nav toc: " Tables " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:table"> Tables </a>
     <!-- vagrant nav toc: " A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a>
     <!-- vagrant nav toc: " Bibliography test " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec8"> Bibliography test </a>
     <!-- vagrant nav toc: " Example 1: Examples can be typeset as exercises " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#Example"> Example 1: Examples can be typeset as exercises </a>
     <!-- vagrant nav toc: " URLs " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsubsec:ex"> URLs </a>
     <!-- vagrant nav toc: " LaTeX Mathematics " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec11"> LaTeX Mathematics </a>
     <!-- vagrant nav toc: " Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec12"> Exercises </a>
     <!-- vagrant nav toc: " Problem 1: Flip a Coin " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:1"> Problem 1: Flip a Coin </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec14"> Remarks </a>
     <!-- vagrant nav toc: " Not an exercise " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec15"> Not an exercise </a>
     <!-- vagrant nav toc: " Project 1: Compute a Probability " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:2"> Project 1: Compute a Probability </a>
     <!-- vagrant nav toc: " Project 2: Explore Distributions of Random Circles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec18"> Remarks </a>
     <!-- vagrant nav toc: " Exercise 1: Determine some Distance " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:dist"> Exercise 1: Determine some Distance </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec20"> Remarks </a>
     <!-- vagrant nav toc: " Some exercise without the "Exercise:" prefix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec21"> Some exercise without the "Exercise:" prefix </a>
     <!-- vagrant nav toc: " Example 2: Just an example " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec22"> Example 2: Just an example </a>
     <!-- vagrant nav toc: " Here goes another section " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec23"> Here goes another section </a>
     <!-- vagrant nav toc: " More Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec24"> More Exercises </a>
     <!-- vagrant nav toc: " Exercise 3: Make references to projects and problems " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a>
     <!-- vagrant nav toc: " Project 3: References in a headings do not work well in html " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:you"> Project 3: References in a headings do not work well in html </a>
     <!-- vagrant nav toc: " References " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec27"> References </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part I " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec28"> Appendix: Just for testing; part I </a>
     <!-- vagrant nav toc: " A subsection within an appendix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec29"> A subsection within an appendix </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part II " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec30"> Appendix: Just for testing; part II </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec31"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id1"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id2"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec34"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing inline comments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec35"> Appendix: Testing inline comments </a>
     <!-- vagrant nav toc: " Appendix: Testing headings ending with <code>verbatim inline</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a>

    </ul>
   </div>
  </div>

  <div class="span9">


<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




<a name="part0000"></a>
<!-- ------------------- main content ---------------------- -->

<h1>A Document for Testing Doconce</h1>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen, Kaare Dump, A. Dummy Author, I. S. Overworked, and J. Doe -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>

<h2>Table of contents</h2>

<p>
<a href="._part0001_testdoc_vagrant.html#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#subsec:ex"> Subsection 2: Testing figures and movies </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec3"> Test of movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec5"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec8"> Bibliography test </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec11"> LaTeX Mathematics </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec12"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec14"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec15"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec20"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec21"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec22"> Example 2: Just an example </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec23"> Here goes another section </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec24"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec27"> References </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec28"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec29"> A subsection within an appendix </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec30"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec31"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec34"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec35"> Appendix: Testing inline comments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a><br>

<p>
<p>
<!-- ------------------- end of main content --------------- -->


<!--
Preliminary examples/discussion on vagrant style syntax

<div class='alert alert-block alert-notice'>
  <h3>What about PHP? Python? Java?</h3>
<p>
bla-bla.
</div>

<p>
While the <div class="deep-blue">rest of the</div> getting started
-->

<ul class="pager">

  <li class="next">
    <a href="._part0001_testdoc_vagrant.html">Next &rarr;</a>
  </li>

</ul>

 </div>

 <div class="row Footer">
  <div class="span12">
  Here goes a footer, if desired, maybe with a Copyright &copy;
  </div>
 </div>
</div>
</body>
</html>




************** File: ._part0000_testdoc_vagrant.html *****************
<html>
<head>
<!--
This style is adopted from the (now old) vagrant 1.0 web
pages. The style builds on the Twitter Bootstrap style.
Modifications by Hans Petter Langtangen, hpl@simula.no.

This style file should be copied and the following
elements edited:

Logo heading:

 LogoWord
 withSubWord

Navigation links at the top:

 GO TO 1
 GO TO 2

Footer at the end:

 Here goes a footer, if desired, maybe with a Copyright &copy;

-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />

<link rel="stylesheet" href="style_vagrant/css/twitter_bootstrap.css">
<link rel="stylesheet" href="style_vagrant/css/vagrant.css">
<!-- Define color of headings here (last definition counts) -->
<style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */
</style>
</head>
<body>

<title> Appendix: Testing headings ending with `verbatim inline` </title>

<div class="container">
 <div class="row Header with-border">
  <div class="span3 Module logo">
   <h1><a href="/">LogoWord<span class="subtitle">withSubWord</span></a></h1>
  </div>
  <div class="span9">
   <div class="Module navigation">
   <!-- Navigation at the top of the page -->
    <ul>
     <li> <a href="">GO TO 1</a></li>
     <li> <a href="">GO TO 2</a></li>
    </ul>
   </div>
  </div>
 </div>
</div>


<!-- Here goes the table of contents in the sidebar
     <li class="active"> means dark blue background for current section
-->
<div class="row">
 <div class="span3 Module sidebar">
  <div class="well" style="padding: 8px 0px;">
   <ul class="nav nav-list">
     <!-- Syntax:
     <li> <a href="...">Section 1</a></li>
     <li class="active"> <a href="...">Section 2</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2a</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2b</a></li>
     -->
     <!-- Doconce automatically fills in the table of contents -->
          <!-- vagrant nav toc: " Section 1 " --> <li>  <a href="._part0001_testdoc_vagrant.html#sec1"> Section 1 </a>
     <!-- vagrant nav toc: " Subsection 1 " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec1"> Subsection 1 </a>
     <!-- vagrant nav toc: " Subsection 2: Testing figures and movies " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:ex"> Subsection 2: Testing figures and movies </a>
     <!-- vagrant nav toc: " Test of movies " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec3"> Test of movies </a>
     <!-- vagrant nav toc: " The \( \theta \) parameter (not \( \nabla \)?) " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a>
     <!-- vagrant nav toc: " Custom Environments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec5"> Custom Environments </a>
     <!-- vagrant nav toc: " Tables " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:table"> Tables </a>
     <!-- vagrant nav toc: " A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a>
     <!-- vagrant nav toc: " Bibliography test " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec8"> Bibliography test </a>
     <!-- vagrant nav toc: " Example 1: Examples can be typeset as exercises " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#Example"> Example 1: Examples can be typeset as exercises </a>
     <!-- vagrant nav toc: " URLs " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsubsec:ex"> URLs </a>
     <!-- vagrant nav toc: " LaTeX Mathematics " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec11"> LaTeX Mathematics </a>
     <!-- vagrant nav toc: " Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec12"> Exercises </a>
     <!-- vagrant nav toc: " Problem 1: Flip a Coin " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:1"> Problem 1: Flip a Coin </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec14"> Remarks </a>
     <!-- vagrant nav toc: " Not an exercise " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec15"> Not an exercise </a>
     <!-- vagrant nav toc: " Project 1: Compute a Probability " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:2"> Project 1: Compute a Probability </a>
     <!-- vagrant nav toc: " Project 2: Explore Distributions of Random Circles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec18"> Remarks </a>
     <!-- vagrant nav toc: " Exercise 1: Determine some Distance " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:dist"> Exercise 1: Determine some Distance </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec20"> Remarks </a>
     <!-- vagrant nav toc: " Some exercise without the "Exercise:" prefix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec21"> Some exercise without the "Exercise:" prefix </a>
     <!-- vagrant nav toc: " Example 2: Just an example " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec22"> Example 2: Just an example </a>
     <!-- vagrant nav toc: " Here goes another section " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec23"> Here goes another section </a>
     <!-- vagrant nav toc: " More Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec24"> More Exercises </a>
     <!-- vagrant nav toc: " Exercise 3: Make references to projects and problems " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a>
     <!-- vagrant nav toc: " Project 3: References in a headings do not work well in html " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:you"> Project 3: References in a headings do not work well in html </a>
     <!-- vagrant nav toc: " References " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec27"> References </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part I " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec28"> Appendix: Just for testing; part I </a>
     <!-- vagrant nav toc: " A subsection within an appendix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec29"> A subsection within an appendix </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part II " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec30"> Appendix: Just for testing; part II </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec31"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id1"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id2"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec34"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing inline comments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec35"> Appendix: Testing inline comments </a>
     <!-- vagrant nav toc: " Appendix: Testing headings ending with <code>verbatim inline</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a>

    </ul>
   </div>
  </div>

  <div class="span9">


<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




<a name="part0000"></a>
<!-- ------------------- main content ---------------------- -->

<h1>A Document for Testing Doconce</h1>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen, Kaare Dump, A. Dummy Author, I. S. Overworked, and J. Doe -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>

<h2>Table of contents</h2>

<p>
<a href="._part0001_testdoc_vagrant.html#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#subsec:ex"> Subsection 2: Testing figures and movies </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec3"> Test of movies </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec5"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec8"> Bibliography test </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec11"> LaTeX Mathematics </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec12"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec14"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec15"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec20"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec21"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec22"> Example 2: Just an example </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec23"> Here goes another section </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec24"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec27"> References </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec28"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec29"> A subsection within an appendix </a><br>
<a href="._part0002_testdoc_vagrant.html#___sec30"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec31"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec34"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec35"> Appendix: Testing inline comments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc_vagrant.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a><br>

<p>
<p>
<!-- ------------------- end of main content --------------- -->


<!--
Preliminary examples/discussion on vagrant style syntax

<div class='alert alert-block alert-notice'>
  <h3>What about PHP? Python? Java?</h3>
<p>
bla-bla.
</div>

<p>
While the <div class="deep-blue">rest of the</div> getting started
-->

<ul class="pager">

  <li class="next">
    <a href="._part0001_testdoc_vagrant.html">Next &rarr;</a>
  </li>

</ul>

 </div>

 <div class="row Footer">
  <div class="span12">
  Here goes a footer, if desired, maybe with a Copyright &copy;
  </div>
 </div>
</div>
</body>
</html>




************** File: ._part0001_testdoc_vagrant.html *****************
<html>
<head>
<!--
This style is adopted from the (now old) vagrant 1.0 web
pages. The style builds on the Twitter Bootstrap style.
Modifications by Hans Petter Langtangen, hpl@simula.no.

This style file should be copied and the following
elements edited:

Logo heading:

 LogoWord
 withSubWord

Navigation links at the top:

 GO TO 1
 GO TO 2

Footer at the end:

 Here goes a footer, if desired, maybe with a Copyright &copy;

-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />

<link rel="stylesheet" href="style_vagrant/css/twitter_bootstrap.css">
<link rel="stylesheet" href="style_vagrant/css/vagrant.css">
<!-- Define color of headings here (last definition counts) -->
<style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */
</style>
</head>
<body>

<title> Appendix: Testing headings ending with `verbatim inline` </title>

<div class="container">
 <div class="row Header with-border">
  <div class="span3 Module logo">
   <h1><a href="/">LogoWord<span class="subtitle">withSubWord</span></a></h1>
  </div>
  <div class="span9">
   <div class="Module navigation">
   <!-- Navigation at the top of the page -->
    <ul>
     <li> <a href="">GO TO 1</a></li>
     <li> <a href="">GO TO 2</a></li>
    </ul>
   </div>
  </div>
 </div>
</div>


<!-- Here goes the table of contents in the sidebar
     <li class="active"> means dark blue background for current section
-->
<div class="row">
 <div class="span3 Module sidebar">
  <div class="well" style="padding: 8px 0px;">
   <ul class="nav nav-list">
     <!-- Syntax:
     <li> <a href="...">Section 1</a></li>
     <li class="active"> <a href="...">Section 2</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2a</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2b</a></li>
     -->
     <!-- Doconce automatically fills in the table of contents -->
          <!-- vagrant nav toc: " Section 1 " --> <li class="active">  <a href="._part0001_testdoc_vagrant.html#sec1"> Section 1 </a>
     <!-- vagrant nav toc: " Subsection 1 " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec1"> Subsection 1 </a>
     <!-- vagrant nav toc: " Subsection 2: Testing figures and movies " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:ex"> Subsection 2: Testing figures and movies </a>
     <!-- vagrant nav toc: " Test of movies " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec3"> Test of movies </a>
     <!-- vagrant nav toc: " The \( \theta \) parameter (not \( \nabla \)?) " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a>
     <!-- vagrant nav toc: " Custom Environments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec5"> Custom Environments </a>
     <!-- vagrant nav toc: " Tables " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:table"> Tables </a>
     <!-- vagrant nav toc: " A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a>
     <!-- vagrant nav toc: " Bibliography test " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec8"> Bibliography test </a>
     <!-- vagrant nav toc: " Example 1: Examples can be typeset as exercises " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#Example"> Example 1: Examples can be typeset as exercises </a>
     <!-- vagrant nav toc: " URLs " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsubsec:ex"> URLs </a>
     <!-- vagrant nav toc: " LaTeX Mathematics " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec11"> LaTeX Mathematics </a>
     <!-- vagrant nav toc: " Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec12"> Exercises </a>
     <!-- vagrant nav toc: " Problem 1: Flip a Coin " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:1"> Problem 1: Flip a Coin </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec14"> Remarks </a>
     <!-- vagrant nav toc: " Not an exercise " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec15"> Not an exercise </a>
     <!-- vagrant nav toc: " Project 1: Compute a Probability " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:2"> Project 1: Compute a Probability </a>
     <!-- vagrant nav toc: " Project 2: Explore Distributions of Random Circles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec18"> Remarks </a>
     <!-- vagrant nav toc: " Exercise 1: Determine some Distance " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:dist"> Exercise 1: Determine some Distance </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec20"> Remarks </a>
     <!-- vagrant nav toc: " Some exercise without the "Exercise:" prefix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec21"> Some exercise without the "Exercise:" prefix </a>
     <!-- vagrant nav toc: " Example 2: Just an example " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec22"> Example 2: Just an example </a>
     <!-- vagrant nav toc: " Here goes another section " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec23"> Here goes another section </a>
     <!-- vagrant nav toc: " More Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec24"> More Exercises </a>
     <!-- vagrant nav toc: " Exercise 3: Make references to projects and problems " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a>
     <!-- vagrant nav toc: " Project 3: References in a headings do not work well in html " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:you"> Project 3: References in a headings do not work well in html </a>
     <!-- vagrant nav toc: " References " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec27"> References </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part I " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec28"> Appendix: Just for testing; part I </a>
     <!-- vagrant nav toc: " A subsection within an appendix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec29"> A subsection within an appendix </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part II " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec30"> Appendix: Just for testing; part II </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec31"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id1"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id2"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec34"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing inline comments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec35"> Appendix: Testing inline comments </a>
     <!-- vagrant nav toc: " Appendix: Testing headings ending with <code>verbatim inline</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a>

    </ul>
   </div>
  </div>

  <div class="span9">


<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




<a name="part0001"></a>
<!-- !split -->

<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>
<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->

<h2>Section 1 <a name="sec1"></a></h2>

<p>
Here is a nested list:

<p>

<ul>
  <li> item1</li>
  <li> item2</li>
  <li> item3 which continues
    on the next line to test that feature</li>
  <li> and a sublist</li>

<ul>
    <li> with indented subitem1</li>
    <li> and a subitem2</li>
</ul>

  <li> and perhaps an ordered sublist</li>

<ol>
   <li> first item</li>
   <li> second item,
      continuing on a new line</li>
</ol>

</ul>

<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<p>
<p>
<!-- ------------------- end of main content --------------- -->


<!--
Preliminary examples/discussion on vagrant style syntax

<div class='alert alert-block alert-notice'>
  <h3>What about PHP? Python? Java?</h3>
<p>
bla-bla.
</div>

<p>
While the <div class="deep-blue">rest of the</div> getting started
-->

<ul class="pager">
  <li class="previous">
    <a href="._part0000_testdoc_vagrant.html">&larr; Prev</a>
  </li>

  <li class="next">
    <a href="._part0002_testdoc_vagrant.html">Next &rarr;</a>
  </li>

</ul>

 </div>

 <div class="row Footer">
  <div class="span12">
  Here goes a footer, if desired, maybe with a Copyright &copy;
  </div>
 </div>
</div>
</body>
</html>




************** File: ._part0002_testdoc_vagrant.html *****************
<html>
<head>
<!--
This style is adopted from the (now old) vagrant 1.0 web
pages. The style builds on the Twitter Bootstrap style.
Modifications by Hans Petter Langtangen, hpl@simula.no.

This style file should be copied and the following
elements edited:

Logo heading:

 LogoWord
 withSubWord

Navigation links at the top:

 GO TO 1
 GO TO 2

Footer at the end:

 Here goes a footer, if desired, maybe with a Copyright &copy;

-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />

<link rel="stylesheet" href="style_vagrant/css/twitter_bootstrap.css">
<link rel="stylesheet" href="style_vagrant/css/vagrant.css">
<!-- Define color of headings here (last definition counts) -->
<style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */
</style>
</head>
<body>

<title> Appendix: Testing headings ending with `verbatim inline` </title>

<div class="container">
 <div class="row Header with-border">
  <div class="span3 Module logo">
   <h1><a href="/">LogoWord<span class="subtitle">withSubWord</span></a></h1>
  </div>
  <div class="span9">
   <div class="Module navigation">
   <!-- Navigation at the top of the page -->
    <ul>
     <li> <a href="">GO TO 1</a></li>
     <li> <a href="">GO TO 2</a></li>
    </ul>
   </div>
  </div>
 </div>
</div>


<!-- Here goes the table of contents in the sidebar
     <li class="active"> means dark blue background for current section
-->
<div class="row">
 <div class="span3 Module sidebar">
  <div class="well" style="padding: 8px 0px;">
   <ul class="nav nav-list">
     <!-- Syntax:
     <li> <a href="...">Section 1</a></li>
     <li class="active"> <a href="...">Section 2</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2a</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2b</a></li>
     -->
     <!-- Doconce automatically fills in the table of contents -->
          <!-- vagrant nav toc: " Section 1 " --> <li>  <a href="._part0001_testdoc_vagrant.html#sec1"> Section 1 </a>
     <!-- vagrant nav toc: " Subsection 1 " --> <li class="active"> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec1"> Subsection 1 </a>
     <!-- vagrant nav toc: " Subsection 2: Testing figures and movies " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:ex"> Subsection 2: Testing figures and movies </a>
     <!-- vagrant nav toc: " Test of movies " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec3"> Test of movies </a>
     <!-- vagrant nav toc: " The \( \theta \) parameter (not \( \nabla \)?) " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a>
     <!-- vagrant nav toc: " Custom Environments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec5"> Custom Environments </a>
     <!-- vagrant nav toc: " Tables " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsec:table"> Tables </a>
     <!-- vagrant nav toc: " A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec7"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a>
     <!-- vagrant nav toc: " Bibliography test " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec8"> Bibliography test </a>
     <!-- vagrant nav toc: " Example 1: Examples can be typeset as exercises " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#Example"> Example 1: Examples can be typeset as exercises </a>
     <!-- vagrant nav toc: " URLs " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#subsubsec:ex"> URLs </a>
     <!-- vagrant nav toc: " LaTeX Mathematics " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec11"> LaTeX Mathematics </a>
     <!-- vagrant nav toc: " Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec12"> Exercises </a>
     <!-- vagrant nav toc: " Problem 1: Flip a Coin " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:1"> Problem 1: Flip a Coin </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec14"> Remarks </a>
     <!-- vagrant nav toc: " Not an exercise " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec15"> Not an exercise </a>
     <!-- vagrant nav toc: " Project 1: Compute a Probability " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#demo:ex:2"> Project 1: Compute a Probability </a>
     <!-- vagrant nav toc: " Project 2: Explore Distributions of Random Circles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec18"> Remarks </a>
     <!-- vagrant nav toc: " Exercise 1: Determine some Distance " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:dist"> Exercise 1: Determine some Distance </a>
     <!-- vagrant nav toc: " Remarks " --> <li> &nbsp; &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec20"> Remarks </a>
     <!-- vagrant nav toc: " Some exercise without the "Exercise:" prefix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec21"> Some exercise without the "Exercise:" prefix </a>
     <!-- vagrant nav toc: " Example 2: Just an example " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec22"> Example 2: Just an example </a>
     <!-- vagrant nav toc: " Here goes another section " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec23"> Here goes another section </a>
     <!-- vagrant nav toc: " More Exercises " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec24"> More Exercises </a>
     <!-- vagrant nav toc: " Exercise 3: Make references to projects and problems " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a>
     <!-- vagrant nav toc: " Project 3: References in a headings do not work well in html " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#exer:you"> Project 3: References in a headings do not work well in html </a>
     <!-- vagrant nav toc: " References " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec27"> References </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part I " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec28"> Appendix: Just for testing; part I </a>
     <!-- vagrant nav toc: " A subsection within an appendix " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec29"> A subsection within an appendix </a>
     <!-- vagrant nav toc: " Appendix: Just for testing; part II " --> <li>  <a href="._part0002_testdoc_vagrant.html#___sec30"> Appendix: Just for testing; part II </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec31"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id1"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#test:title:id2"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing identical titles " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec34"> Appendix: Testing identical titles </a>
     <!-- vagrant nav toc: " Appendix: Testing inline comments " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec35"> Appendix: Testing inline comments </a>
     <!-- vagrant nav toc: " Appendix: Testing headings ending with <code>verbatim inline</code> " --> <li> &nbsp;  <a href="._part0002_testdoc_vagrant.html#___sec36"> Appendix: Testing headings ending with <code>verbatim inline</code> </a>

    </ul>
   </div>
  </div>

  <div class="span9">


<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1', 'sec1'),
              (' Subsection 1 ', 2, None, '___sec1'),
              (' Subsection 2: Testing figures and movies ',
               2,
               'subsec:ex',
               'subsec:ex'),
              (' Test of movies ', 3, None, '___sec3'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta',
               'decay:sec:theta'),
              (' Custom Environments ', 2, None, '___sec5'),
              (' Tables ', 2, 'subsec:table', 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None,
               '___sec7'),
              (' Bibliography test ', 2, None, '___sec8'),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example',
               'Example'),
              (' URLs ', 2, 'subsubsec:ex', 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None, '___sec11'),
              (' Exercises ', 1, None, '___sec12'),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1', 'demo:ex:1'),
              (' Remarks ', 3, None, '___sec14'),
              (' Not an exercise ', 2, None, '___sec15'),
              (' Project 1: Compute a Probability ',
               2,
               'demo:ex:2',
               'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1',
               'proj:circle1'),
              (' Remarks ', 3, None, '___sec18'),
              (' Exercise 1: Determine some Distance ',
               2,
               'exer:dist',
               'exer:dist'),
              (' Remarks ', 3, None, '___sec20'),
              (' Some exercise without the "Exercise:" prefix ',
               2,
               None,
               '___sec21'),
              (' Example 2: Just an example ', 2, None, '___sec22'),
              (' Here goes another section ', 1, None, '___sec23'),
              (' More Exercises ', 1, None, '___sec24'),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula',
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you',
               'exer:you'),
              (' References ', 1, None, '___sec27'),
              (' Appendix: Just for testing; part I ', 1, None, '___sec28'),
              (' A subsection within an appendix ', 2, None, '___sec29'),
              (' Appendix: Just for testing; part II ', 1, None, '___sec30'),
              (' Appendix: Testing identical titles ', 2, None, '___sec31'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id1',
               'test:title:id1'),
              (' Appendix: Testing identical titles ',
               2,
               'test:title:id2',
               'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None, '___sec34'),
              (' Appendix: Testing inline comments ', 2, None, '___sec35'),
              (' Appendix: Testing headings ending with `verbatim inline` ',
               2,
               None,
               '___sec36')]}
end of tocinfo -->





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




<a name="part0002"></a>
<!-- !split and check if these extra words are included properly in the comment -->

<h3>Subsection 1  <a name="___sec1"></a></h3>

<p>
More text, with a reference back to the section <a href="._part0001_testdoc_vagrant.html#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>

<!-- code=fortran (from !bc fcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
and then just the subroutine,
<p>

<!-- code=fortran (from !bc fcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
</pre></div>
<p>
and finally the complete file:
<p>

<!-- code=fortran (from !bc fpro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #19177C">C</span>     <span style="color: #19177C">a</span> <span style="color: #19177C">comment</span>

      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
Testing other code environments. First Python:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
<p>
which gets rendered as

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
<p>
Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>
Then Cython:
<p>

<!-- code=cython (from !bc cycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">cpdef</span> <span style="color: #0000FF">f</span>(double x):
    <span style="color: #008000; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
<p>
<!-- This one tests a + sign before a code environment -->
C++:
<p>

<!-- code=c++ (from !bc cpppro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">#include &lt;iostream&gt;</span>

<span style="color: #B00040">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
<p>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
<p>
which then is typeset as

<p>

<!-- code=text (from !bc cod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
<p>
HTML:

<p>

<!-- code=html (from !bc htmlcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;table&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>Column 1<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>Column 2<span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;tr&gt;&lt;td&gt;</span>0.67526 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>0.92871 <span style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;/tr&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!-- comment --&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/table&gt;</span>
</pre></div>
<p>
System call:
<p>

<!-- code=bash (from !bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #008000">test</span>
Terminal&gt; <span style="color: #008000">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
<p>
It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>
Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.

<h3>Subsection 2: Testing figures and movies <a name="subsec:ex"></a></h3>

<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>
<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>
Figures without captions are allowed and will be inlined.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<h4>Test of movies  <a name="___sec3"></a></h4>

<p>
Movie <a href="#mov:tsunami">mov:tsunami</a> shows a tsunami.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em>Mjolnir tsunami (by Sylfest Glimsdal) <a name="mov:tsunami"></a>.</em></p>


<p>
Test empty caption (for inline movie):

<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p><em></em></p>


<p>
<!-- Test wrong syntax and multi-line caption -->

<p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>
<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate. Similar for Vimeo. -->

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>

<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Computational fluid dynamics movie.</em>



<p>
<!-- Test multi-line caption in figure -->

<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>
<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in \( t_{i+1} \). <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<p>
<!-- Test URL as figure name -->

<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<p>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<p>
<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<h3>The \( \theta \) parameter (not \( \nabla \)?) <a name="decay:sec:theta"></a></h3>

<p>
Functions do not always need to be advanced, here is one
involving \( \theta \):
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
<p>
<b>More on \( \theta \).</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
\( \frac{1}{2} \), \( {1/2} \), \( \pmb{x} \), \( \frac{Du}{dt} \),
both inline and in block:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
Or with align with label and numbers:

<p>
$$
\begin{align}
\frac{Du}{dt} &= 0
\label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\label{aligneq2}
\end{align}
$$

<h3>Custom Environments  <a name="___sec5"></a></h3>

<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>
<!-- begin theorem -->
<a name="theorem:fundamental1"></a>

<p>
<b>Theorem 5.</b>
Let \( a=1 \) and \( b=2 \). Then \( c=3 \).
<!-- end theorem -->

<p>
<!-- begin proof -->
<b>Proof.</b>
Since \( c=a+b \), the result follows from straightforward addition.
\( \Diamond \)
<!-- end proof -->

<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<h3>Tables <a name="subsec:table"></a></h3>

<p>
<!-- index with comma could fool sphinx -->

<p>
Let us take this table from the manual:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>
The Doconce source code reads
<p>

<!-- code=text (from !bc ccq) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
<p>
Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>     \( i \)      </b></td> <td align="center"><b>    \( h_i \)     </b></td> <td align="center"><b>  \( \bar T_i \)  </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>            exact             </b></td> <td align="center"><b>       <code>v_1</code>       </b></td> <td align="center"><b> \( a_i \) + <code>v_2</code> </b></td> <td align="center"><b>     <code>verb_3_</code>     </b></td> </tr>
<tr><td align="right">   9                               </td> <td align="right">   9.62                            </td> <td align="right">   5.57                            </td> <td align="right">   8.98                            </td> </tr>
<tr><td align="right">   -20                             </td> <td align="right">   -23.39                          </td> <td align="right">   -7.65                           </td> <td align="right">   -19.93                          </td> </tr>
<tr><td align="right">   10                              </td> <td align="right">   17.74                           </td> <td align="right">   -4.50                           </td> <td align="right">   9.96                            </td> </tr>
<tr><td align="right">   0                               </td> <td align="right">   -9.19                           </td> <td align="right">   4.13                            </td> <td align="right">   -0.26                           </td> </tr>
</table>

<h3>A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec7"></a></h3>

<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math \( a_{i-1} \).</b>
Here is
some text.

<h3>Bibliography test  <a name="___sec8"></a></h3>

<p>
Here is an example: <a href="#Langtangen_Pedersen_2002">[1]</a> discussed propagation of
large destructive water waves, <a href="#Langtangen_et_al_2002">[2]</a> gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in <a href="#Langtangen_1994a">[3]</a>.
The book chapter <a href="#Mardal_et_al_2003a">[4]</a> contains information on
C++ software tools for programming multigrid methods. A real retro
reference is <a href="#Langtangen_1988d">[5]</a> about a big FORTRAN package.
Multiple references are also possible, e.g., see
<a href="#Langtangen_Pedersen_2002">[1]</a> <a href="#Mardal_et_al_2003a">[4]</a>.

<p>
We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
<a href="#Langtangen_1992c">[6]</a> <a href="#Langtangen_1994a">[3]</a> <a href="#Mortensen_et_al_2011">[7]</a> <a href="#Langtangen_Pedersen_2002">[1]</a>
and
<a href="#Langtangen_et_al_2002">[2]</a> <a href="#Glimsdal_et_al_20006">[8]</a> <a href="#Rahman_et_al_2006b">[9]</a> <a href="#Haga_et_al_2011a">[10]</a> <a href="#Langtangen_2003a">[11]</a> <a href="#Langtangen_2008a">[12]</a> <a href="#Langtangen:95">[13]</a>
and all the work of
<a href="#Langtangen_2012">[14]</a> <a href="#Mardal_et_al_2003a">[4]</a> <a href="#Jeberg_et_al_2004">[15]</a> as well as
old work <a href="#Langtangen_1988d">[5]</a> and <a href="#Langtangen_1989e">[16]</a>, and the
talk <a href="#Langtangen_talk_2007a">[17]</a>.
Langtangen also had two thesis <a href="#Langtangen:85">[18]</a> <a href="#Langtangen_1989e">[16]</a>.
More retro citations are
the old ME-IN323 book <a href="#Langtangen:91">[19]</a> and the
<a href="#Langtangen:94b">[20]</a> OONSKI '94 paper.

<p>
<!-- --- begin exercise --- -->

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>

<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples_as_exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>
<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<p>
<!-- --- end exercise --- -->

<h3>URLs <a name="subsubsec:ex"></a></h3>

<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Mail addresses can also be used: <a href="mailto:hpl@simula.no"><tt>hpl@simula.no</tt></a>, or just a <a href="mailto:hpl@simula.no">mail link</a>, or a raw <a href="mailto:hpl@simula.no"><tt>mailto:hpl@simula.no</tt></a>.

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>
For the <code>--device=paper</code> option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
<a href="https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py"><tt>decay_mod</tt></a>.

<p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<p>
<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--device=paper</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<h3>LaTeX Mathematics  <a name="___sec11"></a></h3>

<p>
Here is an equation without label using backslash-bracket environment:
$$ a = b + c $$

or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$

We can refer to this equation by \eqref{my:eq1}.

<p>
Here is a system without equation numbers, using the align-astrisk environment:
$$
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
$$


<p>
And here is a system of equations with labels in an align environment:
$$
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
$$

We can refer to \eqref{eq1}-\eqref{eq2}. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in <code>CG-2</code>.
Also test \( a_{i-j} \) as well as \( kx-wt \).

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$

Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$

We can refer to the last equation by \eqref{split:envir:eq}.

<p>
Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$


<p>
Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$

Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

<p>
Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<h2>Exercises  <a name="___sec12"></a></h2>

<p>
<!-- --- begin exercise --- -->

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>
<!-- keywords = random numbers; Monte Carlo simulation -->

<p>
<!-- Torture tests -->

<p>
Make a program that simulates flipping a coin \( N \) times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<p>
<!-- Test syntax error -->

<h4>Remarks  <a name="___sec14"></a></h4>

<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
<li> Mark 1.</li>
<li> Mark 2.
<!-- --- begin hint in exercise --- --></li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Draw an integer among \( \{1,2\} \) with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
If the <code>random.random()</code> function returns a number \( <1/2 \), let it be
head, otherwise tail. Repeat this \( N \) number of times.
<!-- --- end answer of exercise --- -->

<p>
<!-- --- begin solution of exercise --- -->
<b>Solution.</b>
Code:
<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">sys</span><span style="color: #666666">,</span> <span style="color: #0000FF; font-weight: bold">random</span>
N <span style="color: #666666">=</span> <span style="color: #008000">int</span>(sys<span style="color: #666666">.</span>argv[<span style="color: #666666">1</span>])
heads <span style="color: #666666">=</span> <span style="color: #666666">0</span>
<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(N):
    r <span style="color: #666666">=</span> random<span style="color: #666666">.</span>random()
    <span style="color: #008000; font-weight: bold">if</span> r <span style="color: #666666">&lt;=</span> <span style="color: #666666">0.5</span>:
        heads <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
<span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Flipping a coin </span><span style="color: #BB6688; font-weight: bold">%d</span><span style="color: #BA2121"> times gave </span><span style="color: #BB6688; font-weight: bold">%d</span><span style="color: #BA2121"> heads&#39;</span> <span style="color: #666666">%</span> (N, heads)
</pre></div>
<p>
<!-- --- end solution of exercise --- -->
Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<p>
<!-- --- end exercise --- -->

<h3>Not an exercise  <a name="___sec15"></a></h3>

<p>
Should be possible to stick a normal section in the middle of many
exercises.

<p>
<!-- --- begin exercise --- -->

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>

<p>
<!-- Minimalistic exercise -->

<p>
What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval \( [0,1) \)?

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw \( N \) such random numbers using Python's standard <code>random</code> module,
count how many of them, \( M \), that fall in the interval \( (0.5,0.6) \), and
compute the probability as \( M/N \).
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>

<p>
The formula for a circle is given by

<p>
$$
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
$$

where \( R \) is the radius of the circle, \( (x_0,y_0) \) is the
center point, and \( t \) is a parameter in the unit interval \( [0,1] \).
For any \( t \), \( (x,y) \) is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>

<!-- code=python (from !bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #008000; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
<p>
<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>
The goal of this project is to draw \( N \) circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>
<b>a)</b>
Let \( R \) be normally distributed and \( (x_0,y_0) \) uniformly distributed.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
\( x_0 \), \( y_0 \), and \( R \) quantities.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->

<p>
<!-- --- begin solution of exercise --- -->
<b>Solution.</b>
Here goes a full solution to part a).
<!-- --- end solution of exercise --- -->

<p>
<b>b)</b>
Let \( R \) be uniformly distributed and \( (x_0,y_0) \) normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let \( R \) and \( (x_0,y_0) \) be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<p>
<!-- Closing remarks for this Project -->

<h4>Remarks  <a name="___sec18"></a></h4>

<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>

<p>
Intro to this exercise. Questions are in subexercises below.

<p>
<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>
<!-- --- begin solution of exercise --- -->
<b>Solution.</b>
Here goes a full solution of the whole exercise.
With some math \( a=b \) in this solution:
$$ \hbox{math in solution: } a = b $$

And code <code>a=b</code> in this solution:
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">a = b  # code in solution
</pre></div>
<p>
End of solution is here.
<!-- --- end solution of exercise --- -->

<p>
<b>a)</b>
Subexercises are numbered a), b), etc.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math \( a=b \) in hint:

<p>
$$ a=b. $$

And with code (in plain verbatim) returning \( x+1 \) in hint:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
<p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
Short answer to subexercise a).
With math in answer: \( a=b \).
<!-- --- end answer of exercise --- -->

<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>
Some math \( \cos^2 x + \sin^2 x = 1 \) written one a single line:

<p>
$$ \cos^2 x + \sin^2 x = 1 \thinspace .$$


<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.

<p>
<!-- --- begin solution of exercise --- -->
<b>Solution.</b>
Here goes the solution of this subexercise.
<!-- --- end solution of exercise --- -->

<p>
<!-- Closing remarks for this Exercise -->

<h4>Remarks  <a name="___sec20"></a></h4>

<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec21"></a></h3>

<p>
<!-- Another minimalistic exercise -->

<p>
Just some text. And some math saying that \( e^0=1 \) on a single line,
to test that math block insertion is correct:

<p>
$$ \exp{(0)} = 1 $$


<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>
<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Example 2: Just an example  <a name="___sec22"></a></h3>

<p>
<!-- This example needs the --examples_as_exercises option, otherwise -->
<!-- it is just typeset as it is written. -->

<p>
<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<p>
<!-- --- end exercise --- -->

<h2>Here goes another section  <a name="___sec23"></a></h2>

<p>
With some text, before we continue with exercises.

<h2>More Exercises  <a name="___sec24"></a></h2>

<p>
<!-- --- begin exercise --- -->

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>

<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>

<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<p>
<!-- --- end exercise --- -->

<h2>References  <a name="___sec27"></a></h2>

<h2>Bibliography</h2>

<p>

<ol>
 <li> <a name="Langtangen_Pedersen_2002"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Propagation of Large Destructive Waves,
    <em>International Journal of Applied Mechanics and Engineering</em>,
    7(1),
    pp. 187-204,
    2002.</li>
 <li> <a name="Langtangen_et_al_2002"></a> <b>H. P. Langtangen, K.-A. Mardal and R. Winther</b>. 
    Numerical Methods for Incompressible Viscous Flow,
    <em>Advances in Water Resources</em>,
    25,
    pp. 1125-1146,
    2002.</li>
 <li> <a name="Langtangen_1994a"></a> <b>H. P. Langtangen</b>. 
    Numerical Solution of First Passage Problems in Random Vibrations,
    <em>SIAM Journal of Scientific and Statistical Computing</em>,
    15,
    pp. 997-996,
    1994.</li>
 <li> <a name="Mardal_et_al_2003a"></a> <b>K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen</b>. 
    Software Tools for Multigrid Methods,
    <em>Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming</em>,
    edited by <b>H. P. Langtangen and A. Tveito</b>,
    Springer,
    2003.</li>
 <li> <a name="Langtangen_1988d"></a> <b>H. P. Langtangen</b>. 
    The FEMDEQS Program System,
    <em>Department of Mathematics, University of Oslo</em>,
    1989.</li>
 <li> <a name="Langtangen_1992c"></a> <b>H. P. Langtangen</b>. 
    Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
    <em>SIAM Journal on Scientific Computing</em>,
    13,
    pp. 1394-1417,
    1992.</li>
 <li> <a name="Mortensen_et_al_2011"></a> <b>M. Mortensen, H. P. Langtangen and G. N. Wells</b>. 
    A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
    <em>Advances in Water Resources</em>,
    34(9),
    <a href="http://dx.doi.org/10.1016/j.advwatres.2011.02.013">doi: 10.1016/j.advwatres.2011.02.013</a>,
    2011.</li>
 <li> <a name="Glimsdal_et_al_20006"></a> <b>S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt</b>. 
    Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
    <em>International Journal of Fluid Mechanics Research</em>,
    33(1),
    pp. 15-43,
    2006.</li>
 <li> <a name="Rahman_et_al_2006b"></a> <b>S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen</b>. 
    Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
    <em>Physical Review B: Condensed Matter and Materials Physics</em>,
    74,
    2006.</li>
<li> <a name="Haga_et_al_2011a"></a> <b>J. B. Haga, H. Osnes and H. P. Langtangen</b>. 
    On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
    <em>International Journal of Analytical and Numerical Methods in Geomechanics</em>,
    <a href="http://dx.doi.org/10.1002/nag.1062">doi: 10.1002/nag.1062</a>,
    2011,
    <a href="http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract"><tt>http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract</tt></a>.</li>
<li> <a name="Langtangen_2003a"></a> <b>H. P. Langtangen</b>. 
    <em>Computational Partial Differential Equations - Numerical Methods and Diffpack Programming</em>,
    Springer,
    2003.</li>
<li> <a name="Langtangen_2008a"></a> <b>H. P. Langtangen</b>. 
    <em>Python Scripting for Computational Science</em>,
    Springer,
    2008.</li>
<li> <a name="Langtangen:95"></a> <b>H. P. Langtangen and G. Pedersen</b>. 
    Finite Elements for the Boussinesq Wave Equations,
    Waves and Non-linear Processes in Hydrodynamics,
    edited by <b>J. Grue, B. Gjevik and J. E. Weber</b>,
    Kluwer Academic Publishers,
    pp. pp. 117-126,
    1995,
    <a href="http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310"><tt>http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310</tt></a>.</li>
<li> <a name="Langtangen_2012"></a> <b>H. P. Langtangen</b>. 
    <em>A Primer on Scientific Programming With Python</em>,
    Springer,
    2012.</li>
<li> <a name="Jeberg_et_al_2004"></a> <b>P. V. Jeberg, H. P. Langtangen and C. B. Terp</b>. 
    Optimization With Diffpack: Practical Example From Welding,
    <em>Simula Research Laboratory</em>,
    2004.</li>
<li> <a name="Langtangen_1989e"></a> <b>H. P. Langtangen</b>. 
    Computational Methods for Two-Phase Flow in Oil Reservoirs,
    Ph.D. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1989.</li>
<li> <a name="Langtangen_talk_2007a"></a> <b>H. P. Langtangen</b>. 
    Computational Modeling of Huge Tsunamis From Asteroid Impacts,
    Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
    2007.</li>
<li> <a name="Langtangen:85"></a> <b>H. P. Langtangen</b>. 
    Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
    M.Sc. Thesis,
    Mechanics Division, Department of Mathematics, University of Oslo,
    1985.</li>
<li> <a name="Langtangen:91"></a> <b>H. P. Langtangen and A. Tveito</b>. 
    Numerical Methods in Continuum Mechanics,
    <em>Center for Industrial Research</em>,
    1991.</li>
<li> <a name="Langtangen:94b"></a> <b>H. P. Langtangen</b>. 
    Diffpack: Software for Partial Differential Equations,
    <em>Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA</em>,
    edited by <b>A. Vermeulen</b>,
    1994.</li>
</ol>

<h2>Appendix: Just for testing; part I  <a name="___sec28"></a></h2>

<p>
This is the first appendix.

<h3>A subsection within an appendix  <a name="___sec29"></a></h3>

<p>
Some text.

<h2>Appendix: Just for testing; part II  <a name="___sec30"></a></h2>

<p>
This is more stuff for an appendix.

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>

<p>
Without label.

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>

<p>
With label.

<h3>Appendix: Testing identical titles  <a name="___sec34"></a></h3>

<p>
Without label.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Tip.</b>
Here is a tip or hint box, typeset as a notice box.
</div>
<p>
Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent <a href="http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/">Script for Introduction to Version Control</a> provides a more detailed motivation why you will benefit greatly
from using version control systems.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Summary.</b>
<b>Bold remark:</b> Make some text with this summary.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
Much testing in this document, otherwise stupid content.
</div>
<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files are <a href="http://dropbox.com">Dropbox</a> and <a href="http://drive.google.com">Google Drive</a>.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

<p>
More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

<p>
The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

<p>
All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.

<h3>Appendix: Testing inline comments  <a name="___sec35"></a></h3>

<p>
Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. 
<!-- begin inline comment -->
<font color="red">[<b>hpl 1</b>: <em>not sure if in the cloud is understood by all.</em>]</font>
<!-- end inline comment -->
 I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

<p>
The simplest services for hosting project files is Dropbox. 
<!-- begin inline comment -->
<font color="red">[<b>mp 2</b>: <em>Simply go to <a href="http://dropbox.com"><tt>http://dropbox.com</tt></a> and watch the video. It explains
how files, like <code>myfile.py</code>, perhaps containing much math, like
\( \partial u/\partial t \), are easily communicated between machines.</em>]</font>
<!-- end inline comment -->
 It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

<p>
When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  
<!-- begin inline comment -->
<font color="red">[<b>hpl 3</b>: <em>The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.</em>]</font>
<!-- end inline comment -->

<h3>Appendix: Testing headings ending with <code>verbatim inline</code>  <a name="___sec36"></a></h3>

<p>
The point here is to test 1) <code>verbatim</code> code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

<p>
<!-- ------------------- end of main content --------------- -->


<!--
Preliminary examples/discussion on vagrant style syntax

<div class='alert alert-block alert-notice'>
  <h3>What about PHP? Python? Java?</h3>
<p>
bla-bla.
</div>

<p>
While the <div class="deep-blue">rest of the</div> getting started
-->

<ul class="pager">
  <li class="previous">
    <a href="._part0001_testdoc_vagrant.html">&larr; Prev</a>
  </li>


</ul>

 </div>

 <div class="row Footer">
  <div class="span12">
  Here goes a footer, if desired, maybe with a Copyright &copy;
  </div>
 </div>
</div>
</body>
</html>




************** File: ._part0000_testdoc.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

A Document for Testing Doconce
==============================

:Author: Hans Petter Langtangen (hpl at simula.no), Kaare Dump, A. Dummy Author, I. S. Overworked, J. Doe (j_doe at cyberspace.com)
:Date: Jan 32, 2100


************** File: ._part0001_testdoc.rst *****************
.. !split





The format of this document is
sphinx

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

.. Cannot demonstrate chapter headings since abstract and chapter

.. is mutually exclusive in LaTeX


.. _sec1:


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line



..

    Here are two lines that make up
    a block quote.


************** File: ._part0002_testdoc.rst *****************
.. !split and check if these extra words are included properly in the comment


Subsection 1
------------

More text, with a reference back to the section :ref:`sec1` and further
to the section :ref:`subsubsec:ex`. 
.. index:: somefunc function


.. sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console


Let's do some copying from files too. First from subroutine up to the very end,


.. code-block:: fortran

              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine,

.. code-block:: fortran

              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file:

.. code-block:: fortran

        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python:

.. code-block:: text


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as


.. code-block:: python

        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial:

.. raw:: html

        <iframe width="950" height="500" frameborder="0"
                src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
        </iframe>


Then Cython:

.. code-block:: cython

        cpdef f(double x):
            return x + 1


.. This one tests a + sign before a code environment

C++:

.. code-block:: c++

        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

.. The next should get correctly typset in sphinx (cod is fcod)

And a little bit of Fortran:


.. code-block:: text


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as


.. code-block:: fortran

              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end


HTML:


.. code-block:: html

        <table>
        <tr><td>Column 1</td><td>Column 2</td></tr>
        <tr><td>0.67526 </td><td>0.92871 </td></tr>
        <!-- comment -->
        </table>


System call:

.. code-block:: console

        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test ``verbatim inline font`` especially with ``a newline
inside the text`` and an exclamation mark at the end: ``BEGIN``! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the ``verb`` typesetting... Also test backslashes
like ``\begin`` and ``\end`` in inline verbatim text.

Here is some <font color="red">red</font> color and an attempt to write <font color="green">with
green color containing a linebreak.
And one more.</font> Some formats will only display this correctly when
HTML is the output format.


.. _subsec:ex:

Subsection 2: Testing figures and movies
----------------------------------------

.. index:: figures


Test of figures. In particular we refer to Figure :ref:`fig:impact` in which
there is a flow.


.. _fig:impact:

.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200

   *Visualization of flow by streamtubes*


Figures without captions are allowed and will be inlined.


.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200




.. index:: movies


Test of movies
~~~~~~~~~~~~~~

Movie :ref:`mov:tsunami` shows a tsunami.

.. raw:: html
        
        <embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p><em>Mjolnir tsunami (by Sylfest Glimsdal) .</em></p>



Test empty caption (for inline movie):

.. raw:: html
        
        <embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p><em></em></p>



.. Test wrong syntax and multi-line caption


.. raw:: html
        
        <p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
        <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>



.. Check out the correct with and height of YouTube movies from the

.. embed command that the YouTube page can generate. Similar for Vimeo.


.. raw:: html
        
        <iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>
        
        <em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>
        



.. raw:: html
        
        <iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>
        
        <em>Computational fluid dynamics movie.</em>
        




.. Test multi-line caption in figure


Here is figure :ref:`myfig` with a long multi-line caption
and an extra space before the FIGURE keyword.


.. _myfig:

.. figure:: ../doc/manual/figs/wavepacket_0001.png
   :width: 500

   A long caption spanning several lines and containing verbatim words like ``my_file_v1`` and ``my_file_v2`` as well as math with subscript as in :math:`t_{i+1}`


.. Must be a blank line after MOVIE or FIGURE to detect this problem


.. Test URL as figure name



.. figure:: https://doconce.googlecode.com/hg/doc/blog/f_plot.png
   :width: 500



.. Test wikimedia type of files that otherwise reside in subdirs


.. Somewhat challenging heading with latex math, \t, \n, ? and parenthesis


.. _decay:sec:theta:

The :math:`\theta` parameter (not :math:`\nabla`?)
--------------------------------------------------

Functions do not always need to be advanced, here is one
involving :math:`\theta`:

.. code-block:: text


        def f(theta):
            return theta**2


*More on :math:`\theta`.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
:math:`\frac{1}{2}`, :math:`{1/2}`, :math:`\pmb{x}`, :math:`\frac{Du}{dt}`,
both inline and in block:


.. math::
        
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        


Or with align with label and numbers:


.. math::
   :label: aligneq1
        
        \frac{Du}{dt} = 0
        
        



.. math::
          
        \frac{1}{2} = {1/2}
        



.. math::
   :label: aligneq2
          
        \frac{1}{2}\pmb{x} = \pmb{n}
        
        


Sphinx makes a fix here and splits align into multiple equation
environments.

Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the ``.tex`` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



.. begin theorem


*Theorem 5.* Let :math:`a=1` and :math:`b=2`. Then :math:`c=3`.

.. end theorem


.. begin proof

*Proof.* Since :math:`c=a+b`, the result follows from straightforward addition.
:math:`\Diamond`
.. end proof


As we see, the proof of Theorem 5 is a modest
achievement.


.. _subsec:table:

Tables
------


.. index:: test index with verbatim text which is possible


.. index:: test two (separate) verbatim expressions which is also possible


.. index::
   single: index with; subindex


.. index with comma could fool sphinx


.. index::
   single: index, with comma, and one more


Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads

.. code-block:: text


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

================  ================  ================  ================  
   :math:`i`        :math:`h_i`     :math:`\bar T_i`      ``L_i``       
================  ================  ================  ================  
0                                0               288           -0.0065  
1                           11,000               216               0.0  
2                           20,000               216             0.001  
3                           32,000               228            0.0028  
4                           47,000               270               0.0  
5                           51,000               270           -0.0028  
6                           71,000               214           ``NaN``  
================  ================  ================  ================  

And add one with verbatim headings (with underscores),
and rows starting with ``|-`` because of a negative number,
and ``|`` right after verbatim word (with no space):

=====================  =====================  =====================  =====================  
        exact                 ``v_1``         :math:`a_i` + ``v_2``       ``verb_3_``       
=====================  =====================  =====================  =====================  
                    9                   9.62                   5.57                   8.98  
                  -20                 -23.39                  -7.65                 -19.93  
                   10                  17.74                  -4.50                   9.96  
                    0                  -9.19                   4.13                  -0.26  
=====================  =====================  =====================  =====================  


A test of verbatim words in heading with subscript :math:`a_i`: ``my_file_v1`` and ``my_file_v2``
-------------------------------------------------------------------------------------------------

*Files ``my_file_v1.py`` and ``my_file_v2.py`` define some math :math:`a_{i-1}`.* Here is
some text.

Bibliography test
-----------------

Here is an example: [Ref01]_ discussed propagation of
large destructive water waves, [Ref02]_ gave
an overview of numerical methods for solving the Navier-Stokes equations,
while the use of Backward Kolmogorov equations for analyzing
random vibrations was investigated in [Ref03]_.
The book chapter [Ref04]_ contains information on
C++ software tools for programming multigrid methods. A real retro
reference is [Ref05]_ about a big FORTRAN package.
Multiple references are also possible, e.g., see
[Ref01]_ [Ref04]_.

We need to cite more than 10 papers to reproduce an old formatting
problem with blanks in the keys in reST format:
[Ref06]_ [Ref03]_ [Ref07]_ [Ref01]_
and
[Ref02]_ [Ref08]_ [Ref09]_ [Ref10]_ [Ref11]_ [Ref12]_ [Ref13]_
and all the work of
[Ref14]_ [Ref04]_ [Ref15]_ as well as
old work [Ref05]_ and [Ref16]_, and the
talk [Ref17]_.
Langtangen also had two thesis [Ref18]_ [Ref16]_.
More retro citations are
the old ME-IN323 book [Ref19]_ and the
[Ref20]_ OONSKI '94 paper.




.. --- begin exercise ---


.. _Example:

Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with ``Example:``
and then, with the command-line option ``--examples_as_exercises`` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

.. --- end exercise ---



.. _subsubsec:ex:

URLs
----

Testing of URLs: hpl's home page `hpl <http://folk.uio.no/hpl>`_, or
the entire URL if desired, `<http://folk.uio.no/hpl>`_.  Here is a
plain file link `<testdoc.do.txt>`_, or `<testdoc.do.txt>`_, or
`<testdoc.do.txt>`_ or `<testdoc.do.txt>`_ or `a link with
newline <testdoc.do.txt>`_. Can test spaces with the link with word
too: `hpl <http://folk.uio.no/hpl>`_ or `hpl <http://folk.uio.no/hpl>`_. Also ``file:///`` works: `link to a
file <file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>`_ is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in `<http://folk.uio.no/hpl>`_, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Mail addresses can also be used: `hpl@simula.no <mailto:hpl@simula.no>`_, or just a `mail link <mailto:hpl@simula.no>`_, or a raw `<mailto:hpl@simula.no>`_.

Here are some tough tests of URLs, especially for the ``latex`` format:
`Newton-Cotes <http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_ formulas
and a `good book <http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>`_. Need to test
Newton-Cotes with percentage in URL too:
`<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_
and `<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>`_ which has a shebang.

For the ``--device=paper`` option it is important to test that URLs with
monofont link text get a footnote, as in this reference to
`decay_mod <https://github.com/hplgit/INF5620/tree/gh-pages/src/decay/experiments/decay_mod.py>`_.

.. Comments should be inserted outside paragraphs (because in the rst

.. format extra blanks make a paragraph break).


.. Note that when there is no http: or file:, it can be a file link

.. if the link name is URL, url, "URL", or "url". Such files should,

.. if rst output is desired, but placed in a ``_static*`` folder.


More tough tests: repeated URLs whose footnotes when using the
``--device=paper`` option must be correct. We have
`google <http://google.com>`_, `google <http://google.com>`_, and
`google <http://google.com>`_, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment:

.. math::
         a = b + c 

or with number and label, as in :eq:`my:eq1`, using the equation environment:

.. math::
   :label: my:eq1
        
        {\partial u\over\partial t} = \nabla^2 u 
        

We can refer to this equation by :eq:`my:eq1`.

Here is a system without equation numbers, using the align-astrisk environment:

.. math::
        
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        



And here is a system of equations with labels in an align environment:

.. math::
   :label: eq1
        
        a = q + 4 + 5+ 6  
        



.. math::
   :label: eq2
          
        b = \nabla^2 u + \nabla^4 x 
        

We can refer to :eq:`eq1`-:eq:`eq2`. They are a bit simpler than
the Navier-Stokes equations. And test LaTeX hyphen in ``CG-2``.
Also test :math:`a_{i-j}` as well as :math:`kx-wt`.

Many of the next environments will fail in non-latex formats.
Testing multiline:

.. math::
   :label: multiline:eq1
        
        a = b = q + \\ 
          f + \nabla\cdot\nabla u
        
        

Testing split:

.. math::
   :label: split:envir:eq
        
        
        
        a = b = q &+ \\ 
          & f + \nabla\cdot\nabla u
        
        

We can refer to the last equation by :eq:`split:envir:eq`.

Testing gather:

.. math::
        
        a = b \\ 
        c = d + 7 + 9
        


Testing alignat:

.. math::
        \begin{alignat}{2}
        a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0  \\ 
        b &= \nabla^2 u + \nabla^4 x & x\in\Omega 
        \end{alignat}

Let us refer to :eq:`eq1`-:eq:`eq2` again, and to the
alignat variant :eq:`eq1a`-:eq:`eq2a`, and to :eq:`my:eq1`.

Testing eqnarray:

.. math::
        
        {\partial u\over\partial t}  &=  \nabla^2 u + f, \\ 
        {\partial v\over\partial t}  &=  \nabla\cdot(q(u)\nabla v) + g 
        


More mathematical typesetting is demonstrated in the coming exercises.

Below, we have :ref:`demo:ex:1` and :ref:`demo:ex:2`,
as well as :ref:`proj:circle1` and :ref:`exer:you`, and in
between there we have :ref:`exer:some:formula`.

Exercises
=========



.. --- begin exercise ---


.. _demo:ex:1:

Problem 1: Flip a Coin
----------------------
.. keywords = random numbers; Monte Carlo simulation


.. Torture tests


Make a program that simulates flipping a coin :math:`N` times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


.. Test syntax error





Remarks  (1)
~~~~~~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.

.. --- begin hint in exercise ---


*Hint 1.* Use ``r = random.random()`` and define head as ``r <= 0.5``.

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Draw an integer among :math:`\{1,2\}` with
``r = random.randint(1,2)`` and define head when ``r`` is 1.

.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* If the ``random.random()`` function returns a number :math:`<1/2`, let it be
head, otherwise tail. Repeat this :math:`N` number of times.

.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Code:

.. code-block:: python

        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

.. --- end solution of exercise ---

Filenames: ``flip_coin.py``, ``flip_coin.pdf``.

.. solution files: mysol.txt, mysol_flip_coin.py, yet_another.file


.. --- end exercise ---



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.



.. --- begin exercise ---


.. _demo:ex:2:

Project 1: Compute a Probability
--------------------------------

.. Minimalistic exercise



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval :math:`[0,1)`?

.. --- begin hint in exercise ---


*Hint.* To answer this question empirically, let a program
draw :math:`N` such random numbers using Python's standard ``random`` module,
count how many of them, :math:`M`, that fall in the interval :math:`(0.5,0.6)`, and
compute the probability as :math:`M/N`.

.. --- end hint in exercise ---


.. --- end exercise ---





.. --- begin exercise ---


.. _proj:circle1:

Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by


.. math::
        
        x = x_0 + R\cos 2\pi t,
        



.. math::
          
        y = y_0 + R\sin 2\pi t,
        

where :math:`R` is the radius of the circle, :math:`(x_0,y_0)` is the
center point, and :math:`t` is a parameter in the unit interval :math:`[0,1]`.
For any :math:`t`, :math:`(x,y)` is a point on the circle.
The formula can be used to generate ``n`` points on a circle:


.. code-block:: python

        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)


.. Often in an exercise we have some comments about the solution

.. which we normally want to keep where they are.


The goal of this project is to draw :math:`N` circles with random
center and radius. Plot each circle using the ``circle`` function
above.


*a)* Let :math:`R` be normally distributed and :math:`(x_0,y_0)` uniformly distributed.

.. --- begin hint in exercise ---


*Hint.* Use the ``numpy.random`` module to draw the
:math:`x_0`, :math:`y_0`, and :math:`R` quantities.

.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* Here goes the short answer to part a).

.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Here goes a full solution to part a).

.. --- end solution of exercise ---


*b)* Let :math:`R` be uniformly distributed and :math:`(x_0,y_0)` normally distributed.
Filename: ``norm.py``.

*c)* Let :math:`R` and :math:`(x_0,y_0)` be normally distributed.

Filename: ``circles.pdf``.

.. Closing remarks for this Project


Remarks  (2)
~~~~~~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


.. --- end exercise ---





.. --- begin exercise ---


.. _exer:dist:

Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





.. No meaning in this weired test example:

The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


.. --- begin solution of exercise ---

*Solution.* Here goes a full solution of the whole exercise.
With some math :math:`a=b` in this solution:

.. math::
         \hbox{math in solution: } a = b 

And code ``a=b`` in this solution:

.. code-block:: text


        a = b  # code in solution

End of solution is here.

.. --- end solution of exercise ---



*a)* Subexercises are numbered a), b), etc.

.. --- begin hint in exercise ---


*Hint 1.* First hint to subexercise a).
With math :math:`a=b` in hint:


.. math::
         a=b. 

And with code (in plain verbatim) returning :math:`x+1` in hint:


.. code-block:: text


        def func(x):
            return x + 1  # with code in hint

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Second hint to subexercise a).

.. --- end hint in exercise ---

Filename: ``subexer_a.pdf``.


.. --- begin answer of exercise ---

*Answer.* Short answer to subexercise a).
With math in answer: :math:`a=b`.

.. --- end answer of exercise ---


*b)* Here goes the text for subexercise b).


Some math :math:`\cos^2 x + \sin^2 x = 1` written one a single line:


.. math::
         \cos^2 x + \sin^2 x = 1 \thinspace .


.. --- begin hint in exercise ---


*Hint.* A hint for this subexercise.

.. --- end hint in exercise ---

Filename: ``subexer_b.pdf``.


.. --- begin solution of exercise ---

*Solution.* Here goes the solution of this subexercise.

.. --- end solution of exercise ---


.. Closing remarks for this Exercise


Remarks  (3)
~~~~~~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


.. --- end exercise ---





.. --- begin exercise ---


Some exercise without the "Exercise:" prefix
--------------------------------------------

.. Another minimalistic exercise


Just some text. And some math saying that :math:`e^0=1` on a single line,
to test that math block insertion is correct:


.. math::
         \exp{(0)} = 1 


And a test that the code ``lambda x: x+2`` is correctly placed here:


.. code-block:: text


        lambda x: x+2


.. --- end exercise ---





.. --- begin exercise ---


Example 2: Just an example
--------------------------

.. This example needs the --examples_as_exercises option, otherwise

.. it is just typeset as it is written.



*a)* What is the capital of Norway?

*Answer.* Oslo.

.. --- end exercise ---



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============



.. --- begin exercise ---


.. _exer:some:formula:

Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from :ref:`proj:circle1` or :ref:`demo:ex:1`
and verify it.
Filename: ``verify_formula.py``.

.. --- end exercise ---





.. --- begin exercise ---


.. _exer:you:

Project 3: References in a headings do not work well in sphinx
--------------------------------------------------------------

Refer to the previous exercise as :ref:`exer:some:formula`,
the two before that as :ref:`demo:ex:2` and :ref:`proj:circle1`,
and this one as :ref:`exer:you`.
Filename: ``selc_composed.pdf``.

.. --- end exercise ---



References
==========


Bibliography
============

.. [Ref01]
   **H. P. Langtangen and G. Pedersen**. Propagation of Large Destructive Waves,
   *International Journal of Applied Mechanics and Engineering*,
   7(1),
   pp. 187-204,
   2002.

.. [Ref02]
   **H. P. Langtangen, K.-A. Mardal and R. Winther**. Numerical Methods for Incompressible Viscous Flow,
   *Advances in Water Resources*,
   25,
   pp. 1125-1146,
   2002.

.. [Ref03]
   **H. P. Langtangen**. Numerical Solution of First Passage Problems in Random Vibrations,
   *SIAM Journal of Scientific and Statistical Computing*,
   15,
   pp. 997-996,
   1994.

.. [Ref04]
   **K.-A. Mardal, G. W. Zumbusch and H. P. Langtangen**. Software Tools for Multigrid Methods,
   Advanced Topics in Computational Partial Differential Equations -- Numerical Methods and Diffpack Programming,
   edited by **H. P. Langtangen and A. Tveito**,
   Springer,
   2003.

.. [Ref05]
   **H. P. Langtangen**. The FEMDEQS Program System,
   *Department of Mathematics, University of Oslo*,
   1989.

.. [Ref06]
   **H. P. Langtangen**. Stochastic Breakthrough Time Analysis of an Enhanced Oil Recovery Process,
   *SIAM Journal on Scientific Computing*,
   13,
   pp. 1394-1417,
   1992.

.. [Ref07]
   **M. Mortensen, H. P. Langtangen and G. N. Wells**. A FEniCS-Based Programming Framework for Modeling Turbulent Flow by the Reynolds-Averaged Navier-Stokes Equations,
   *Advances in Water Resources*,
   34(9),
   `doi: 10.1016/j.advwatres.2011.02.013 <http://dx.doi.org/10.1016/j.advwatres.2011.02.013>`_,
   2011.

.. [Ref08]
   **S. Glimsdal, G. Pedersen, K. Atakan, C. B. Harbitz, H. P. Langtangen and F. L\ovholt**. Propagation of the Dec.~26, 2004 Indian Ocean Tsunami: Effects of Dispersion and Source Characteristics,
   *International Journal of Fluid Mechanics Research*,
   33(1),
   pp. 15-43,
   2006.

.. [Ref09]
   **S. Rahman, J. Gorman, C. H. W. Barnes, D. A. Williams and H. P. Langtangen**. Numerical Investigation of a Piezoelectric Surface Acoustic Wave Interaction With a One-Dimensional Channel,
   *Physical Review B: Condensed Matter and Materials Physics*,
   74,
   2006.

.. [Ref10]
   **J. B. Haga, H. Osnes and H. P. Langtangen**. On the Causes of Pressure Oscillations in Low-Permeable and Low-Compressible Porous Media,
   *International Journal of Analytical and Numerical Methods in Geomechanics*,
   `doi: 10.1002/nag.1062 <http://dx.doi.org/10.1002/nag.1062>`_,
   2011,
   `http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract <http://onlinelibrary.wiley.com/doi/10.1002/nag.1062/abstract>`_.

.. [Ref11]
   **H. P. Langtangen**. *Computational Partial Differential Equations - Numerical Methods and Diffpack Programming*,
   Springer,
   2003.

.. [Ref12]
   **H. P. Langtangen**. *Python Scripting for Computational Science*,
   Springer,
   2008.

.. [Ref13]
   **H. P. Langtangen and G. Pedersen**. Finite Elements for the Boussinesq Wave Equations,
   Waves and Non-linear Processes in Hydrodynamics,
   edited by **J. Grue, B. Gjevik and J. E. Weber**,
   Kluwer Academic Publishers,
   pp. pp. 117-126,
   1995,
   `http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310 <http://www.amazon.ca/Waves-Nonlinear-Processes-Hydrodynamics-John/dp/0792340310>`_.

.. [Ref14]
   **H. P. Langtangen**. *A Primer on Scientific Programming With Python*,
   Springer,
   2012.

.. [Ref15]
   **P. V. Jeberg, H. P. Langtangen and C. B. Terp**. Optimization With Diffpack: Practical Example From Welding,
   *Simula Research Laboratory*,
   2004.

.. [Ref16]
   **H. P. Langtangen**. Computational Methods for Two-Phase Flow in Oil Reservoirs,
   Ph.D. Thesis,
   Mechanics Division, Department of Mathematics, University of Oslo,
   1989.

.. [Ref17]
   [Ref17]. **H. P. Langtangen**,
   Computational Modeling of Huge Tsunamis From Asteroid Impacts,
   Invited keynote lecture at the \emphInternational conference on Computational Science 2007 (ICCS'07), Beijing, China,
   2007.

.. [Ref18]
   **H. P. Langtangen**. Solution of the Navier-Stokes Equations With the Finite Element Method in Two and Three Dimensions,
   M.Sc. Thesis,
   Mechanics Division, Department of Mathematics, University of Oslo,
   1985.

.. [Ref19]
   **H. P. Langtangen and A. Tveito**. Numerical Methods in Continuum Mechanics,
   *Center for Industrial Research*,
   1991.

.. [Ref20]
   **H. P. Langtangen**. Diffpack: Software for Partial Differential Equations,
   Proceedings of the Second Annual Object-Oriented Numerics Conference (OON-SKI'94), Sunriver, Oregon, USA,
   edited by **A. Vermeulen**,
   1994.





Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles  (1)
---------------------------------------

Without label.


.. _test:title:id1:

Appendix: Testing identical titles  (2)
---------------------------------------

With label.

.. _test:title:id2:

Appendix: Testing identical titles  (3)
---------------------------------------

With label.

Appendix: Testing identical titles  (4)
---------------------------------------

Without label.


.. admonition:: Tip

   Here is a tip or hint box, typeset as a notice box.


Need a lot of text to surround the summary box.
Version control systems allow you to record the history of files
and share files among several computers and collaborators in a
professional way. File changes on one computer are updated or
merged with changes on another computer. Especially when working
with programs or technical reports it is essential
to have changes documented and to
ensure that every computer and person involved in the project
have the latest updates of the files.
Greg Wilson' excellent `Script for Introduction to Version Control <http://software-carpentry.org/2010/07/script-for-introduction-to-version-control/>`_ provides a more detailed motivation why you will benefit greatly
from using version control systems.


.. admonition:: Summary

   **Bold remark:** Make some text with this summary.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.
   Much testing in this document, otherwise stupid content.


Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files are `Dropbox <http://dropbox.com>`_ and `Google Drive <http://drive.google.com>`_.
It is very easy to get started with these systems, and they allow you
to share files among laptops and mobile units with as many users as
you want. The systems offer a kind of version control in that the
files are stored frequently (several times per minute), and you can go
back to previous versions for the last 30 days. However, it is
challenging  to find the right version from the past when there are
so many of them.

More seriously, when several people may edit files simultaneously, it
can be difficult detect who did what when, roll back to previous
versions, and to manually merge the edits when these are
incompatible. Then one needs more sophisticated tools than Dropbox or
Google Drive: project hosting services with true version control
systems.  The following text aims at providing you with the minimum
information to started with such systems. Numerous other tutorials
contain more comprehensive material and in-depth explanations of the
concepts and tools.

The idea with project hosting services is that you have the files
associated with a project in the cloud. Many people may share these
files.  Every time you want to work on the project you explicitly
update your version of the files, edit the files as you like, and
synchronize the files with the "master version" at the site where the
project is hosted.  If you at some point need to go back to a
version of the files at some particular point in the past,
this is an easy operation. You can also use tools to see
what various people have done with the files in the various versions.

All these services are very similar. Below we describe how you get
started with Bitbucket, GitHub, and Googlecode. Launchpad works very
similarly to the latter three. All the project hosting services have
excellent introductions available at their web sites, but the recipes
below are much shorter and aim at getting you started as quickly as
possible by concentrating on the most important need-to-know steps.
The Git tutorials we refer to later in this document contain more
detailed information and constitute of course very valuable readings
when you use version control systems every day. The point now is
to get started.


Appendix: Testing inline comments
---------------------------------

Projects that you want to share among several computers or project
workers are today most conveniently stored at some web site "in the
cloud" and updated through communication with that site. (**hpl 1**: not sure if in the cloud is understood by all.) I strongly
recommend you to use such sites for all serious programming and
scientific writing work - and all other important files.

The simplest services for hosting project files is Dropbox. (**mp 2**: Simply go to `<http://dropbox.com>`_ and watch the video. It explains
how files, like ``myfile.py``, perhaps containing much math, like
:math:`\partial u/\partial t`, are easily communicated between machines.) It
is very easy to get started with Dropbox, and it allows you to share
files among laptops and mobile units.

When several people may edit files simultaneously, it can be difficult
detect who did what when, roll back to previous versions, and to
manually merge the edits when these are incompatible. Then one needs
more sophisticated tools than Dropbox: project hosting services with
true version control systems.  (**hpl 3**: The following text aims at providing
you with the minimum information to started with such
systems. Numerous other tutorials contain more comprehensive material
and in-depth explanations of the concepts and tools.)

Appendix: Testing headings ending with ``verbatim inline``
----------------------------------------------------------

The point here is to test 1) ``verbatim`` code in headings, and 2)
ending a heading with verbatim code as this triggers a special
case in LaTeX.

************** File: admon.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage{framed,wrapfig}

% Admonition environment for "notice"
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{noticeshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{noticebackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{notice_colors2admon}[1][Notice]{
\begin{noticeshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/notice}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{noticeshaded}
}

% Admonition environment for "summary"
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{summaryshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{summarybackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{summary_colors2admon}[1][Summary]{
\begin{summaryshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/summary}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{summaryshaded}
}

% Admonition environment for "warning"
\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
% \fboxsep sets the space between the text and the box
\newenvironment{warningshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{warningbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{warning_colors2admon}[1][Warning]{
\begin{warningshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/warning}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{warningshaded}
}

% Admonition environment for "question"
\definecolor{questionbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{questionshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{questionbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{question_colors2admon}[1][Question]{
\begin{questionshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/question}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{questionshaded}
}

% Admonition environment for "block"
\definecolor{blockbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{blockshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{blockbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{block_colors2admon}[1][Block]{
\begin{blockshaded}
\noindent
 \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{blockshaded}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{Testing admons}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{Testing admons}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{Testing admons}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{hpl}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{hpl${}^{}$}}\\ [3mm]
    
\ \\ [2mm]

% #elif LATEX_HEADING == "Springer_collection"

\author{hpl}
% Short version of authors:
%\authorrunning{...}
\institute{hpl}

% #elif LATEX_HEADING == "beamer"
\author{hpl\inst{}}
\institute{}
% #else

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\bpycod
def some_code(x):
    return sin(x)*exp(1-x)
\epycod

And some plain text verbatim:

\bccq
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\eccq

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{warning_colors2admon}[Warning]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{warning_colors2admon}

Test warning with title:


\begin{warning_colors2admon}[{\large Watch Out }]
{\large And here comes some text with bad news in larger font. \par}
\end{warning_colors2admon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{block_colors2admon}[Block with title]
\vspace{-2.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{block_colors2admon}


\begin{block_colors2admon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{block_colors2admon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{notice_colors2admon}[Note, eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{notice_colors2admon}

% Test one word with a number


\begin{notice_colors2admon}[Point1]
Ah, we are soon close to the end.
\end{notice_colors2admon}


\begin{question_colors2admon}[Question]
So, how many admonition environments does Doconce support?
\end{question_colors2admon}


\begin{question_colors2admon}[Question]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{question_colors2admon}

\begin{warning_colors2admon}[Tip]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\bpycod
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\epycod
\end{warning_colors2admon}

Next is a warning without a title ("none" implies no title).


\begin{warning_colors2admon}[]
And here comes some text with bad news.
\end{warning_colors2admon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{notice_colors2admon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\bpycod
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\epycod
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\bpycod
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\epycod
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{notice_colors2admon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{summary_colors2admon}[Concluding remarks, for the novice]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{summary_colors2admon}

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: admon_colors1.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage{framed}

% Admonition environment for "notice"
% Style from NumPy User Guide
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{noticeshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{noticebackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{notice_colors1admon}[1][Notice]{
\begin{noticeshaded}
\noindent
\includegraphics[height=0.3in]{latex_figs/notice}\ \ \   \textbf{#1}\\ \par
\vspace{-3mm}\nobreak\noindent\ignorespaces
}
{
\end{noticeshaded}
}

% Admonition environment for "summary"
% Style from NumPy User Guide
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{summaryshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{summarybackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{summary_colors1admon}[1][Summary]{
\begin{summaryshaded}
\noindent
\includegraphics[height=0.3in]{latex_figs/summary}\ \ \   \textbf{#1}\\ \par
\vspace{-3mm}\nobreak\noindent\ignorespaces
}
{
\end{summaryshaded}
}

% Admonition environment for "warning"
% Style from NumPy User Guide
\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
% \fboxsep sets the space between the text and the box
\newenvironment{warningshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{warningbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{warning_colors1admon}[1][Warning]{
\begin{warningshaded}
\noindent
\includegraphics[height=0.3in]{latex_figs/warning}\ \ \   \textbf{#1}\\ \par
\vspace{-3mm}\nobreak\noindent\ignorespaces
}
{
\end{warningshaded}
}

% Admonition environment for "question"
% Style from NumPy User Guide
\definecolor{questionbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{questionshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{questionbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{question_colors1admon}[1][Question]{
\begin{questionshaded}
\noindent
\includegraphics[height=0.3in]{latex_figs/question}\ \ \   \textbf{#1}\\ \par
\vspace{-3mm}\nobreak\noindent\ignorespaces
}
{
\end{questionshaded}
}

% Admonition environment for "block"
% Style from NumPy User Guide
\definecolor{blockbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{blockshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{blockbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{block_colors1admon}[1][Block]{
\begin{blockshaded}
\noindent
  \textbf{#1}\\ \par
\vspace{-3mm}\nobreak\noindent\ignorespaces
}
{
\end{blockshaded}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{warning_colors1admon}[Warning]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{warning_colors1admon}

Test warning with title:


\begin{warning_colors1admon}[{\large Watch Out }]
{\large And here comes some text with bad news in larger font. \par}
\end{warning_colors1admon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{block_colors1admon}[Block with title]
\vspace{-3.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{block_colors1admon}


\begin{block_colors1admon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{block_colors1admon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{notice_colors1admon}[Note, eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{notice_colors1admon}

% Test one word with a number


\begin{notice_colors1admon}[Point1]
Ah, we are soon close to the end.
\end{notice_colors1admon}


\begin{question_colors1admon}[Question]
So, how many admonition environments does Doconce support?
\end{question_colors1admon}


\begin{question_colors1admon}[Question]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{question_colors1admon}

\begin{warning_colors1admon}[Tip]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{warning_colors1admon}

Next is a warning without a title ("none" implies no title).


\begin{warning_colors1admon}[]
And here comes some text with bad news.
\end{warning_colors1admon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{notice_colors1admon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{notice_colors1admon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{summary_colors1admon}[Concluding remarks, for the novice]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{summary_colors1admon}

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_colors2.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage{framed,wrapfig}

% Admonition environment for "notice"
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{noticeshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{noticebackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{notice_colors2admon}[1][Notice]{
\begin{noticeshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/notice}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{noticeshaded}
}

% Admonition environment for "summary"
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{summaryshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{summarybackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{summary_colors2admon}[1][Summary]{
\begin{summaryshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/summary}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{summaryshaded}
}

% Admonition environment for "warning"
\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
% \fboxsep sets the space between the text and the box
\newenvironment{warningshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{warningbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{warning_colors2admon}[1][Warning]{
\begin{warningshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/warning}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{warningshaded}
}

% Admonition environment for "question"
\definecolor{questionbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{questionshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{questionbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{question_colors2admon}[1][Question]{
\begin{questionshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/question}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{questionshaded}
}

% Admonition environment for "block"
\definecolor{blockbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{blockshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{blockbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{block_colors2admon}[1][Block]{
\begin{blockshaded}
\noindent
 \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{blockshaded}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{warning_colors2admon}[Warning]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{warning_colors2admon}

Test warning with title:


\begin{warning_colors2admon}[{\large Watch Out }]
{\large And here comes some text with bad news in larger font. \par}
\end{warning_colors2admon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{block_colors2admon}[Block with title]
\vspace{-2.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{block_colors2admon}


\begin{block_colors2admon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{block_colors2admon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{notice_colors2admon}[Note, eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{notice_colors2admon}

% Test one word with a number


\begin{notice_colors2admon}[Point1]
Ah, we are soon close to the end.
\end{notice_colors2admon}


\begin{question_colors2admon}[Question]
So, how many admonition environments does Doconce support?
\end{question_colors2admon}


\begin{question_colors2admon}[Question]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{question_colors2admon}

\begin{warning_colors2admon}[Tip]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{warning_colors2admon}

Next is a warning without a title ("none" implies no title).


\begin{warning_colors2admon}[]
And here comes some text with bad news.
\end{warning_colors2admon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{notice_colors2admon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{notice_colors2admon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{summary_colors2admon}[Concluding remarks, for the novice]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{summary_colors2admon}

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_graybox1.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{graybox1admon}[Warning.]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{graybox1admon}

Test warning with title:


\begin{graybox1admon}[{\large Watch Out }.]
{\large And here comes some text with bad news in larger font. \par}
\end{graybox1admon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{graybox1admon}[Block with title.]
\vspace{0.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{graybox1admon}


\begin{graybox1admon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{graybox1admon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{graybox1admon}[Note eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{graybox1admon}

% Test one word with a number


\begin{graybox1admon}[Point1.]
Ah, we are soon close to the end.
\end{graybox1admon}


\begin{graybox1admon}[Question.]
So, how many admonition environments does Doconce support?
\end{graybox1admon}


\begin{graybox1admon}[Question.]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{graybox1admon}

\begin{graybox1admon}[Tip.]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{graybox1admon}

Next is a warning without a title ("none" implies no title).


\begin{graybox1admon}[]
And here comes some text with bad news.
\end{graybox1admon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{graybox1admon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{graybox1admon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{graybox1admon}[Concluding remarks for the novice.]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{graybox1admon}

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_graybox2.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage{wrapfig,calc}
\usepackage[framemethod=TikZ]{mdframed}

% gray box with horizontal rules (cannot handle verbatim text)
\definecolor{lightgray}{rgb}{0.94,0.94,0.94}
% gray box of 80% width
\newcommand{\grayboxhrules}[1]{\begin{center}
\colorbox{lightgray}{\rule{6pt}{0pt}
\begin{minipage}{0.8\linewidth}
\parbox[t]{0mm}{\rule[0pt]{0mm}{0.5\baselineskip}}\hrule
\vspace*{0.5\baselineskip}\noindent #1
\parbox[t]{0mm}{\rule[-0.5\baselineskip]{0mm}%
{\baselineskip}}\hrule\vspace*{0.5\baselineskip}\end{minipage}
\rule{6pt}{0pt}}\end{center}}

% Fallback for verbatim content in \grayboxhrules
\newmdenv[
  backgroundcolor=lightgray,
  skipabove=\topsep,
  skipbelow=\topsep,
  leftmargin=23,
  rightmargin=23,
]{graybox2mdframed}

\newenvironment{graybox2admon}[1][]{
\begin{graybox2mdframed}[frametitle=#1]
}
{
\end{graybox2mdframed}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.



\begin{graybox2admon}[Warning.]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{graybox2admon}


Test warning with title:



\begin{graybox2admon}[{\large Watch Out }.]
{\large And here comes some text with bad news in larger font. \par}
\end{graybox2admon}


Then we test a block, which is guaranteed to never have any admon icon.



\begin{graybox2admon}[Block with title.]
\vspace{0.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{graybox2admon}




\begin{graybox2admon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{graybox2admon}


The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.



\begin{graybox2admon}[Note eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{graybox2admon}


% Test one word with a number



\begin{graybox2admon}[Point1.]
Ah, we are soon close to the end.
\end{graybox2admon}




\begin{graybox2admon}[Question.]
So, how many admonition environments does Doconce support?
\end{graybox2admon}




\begin{graybox2admon}[Question.]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{graybox2admon}


\begin{graybox2admon}[Tip.]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{graybox2admon}


Next is a warning without a title ("none" implies no title).



\begin{graybox2admon}[]
And here comes some text with bad news.
\end{graybox2admon}


\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.



\begin{graybox2admon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{graybox2admon}


\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\grayboxhrules{
\textbf{Concluding remarks, for the novice:} We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
}
% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_graybox3.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage{framed,wrapfig}

% Admonition environment for "notice"
\definecolor{noticebackground}{rgb}{0.91, 0.91, 0.91}
% \fboxsep sets the space between the text and the box
\newenvironment{noticeshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{noticebackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{notice_graybox3admon}[1][Notice]{
\begin{noticeshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_gray_notice.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{noticeshaded}
}

% Admonition environment for "summary"
\definecolor{summarybackground}{rgb}{0.91, 0.91, 0.91}
% \fboxsep sets the space between the text and the box
\newenvironment{summaryshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{summarybackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{summary_graybox3admon}[1][Summary]{
\begin{summaryshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_gray_summary.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{summaryshaded}
}

% Admonition environment for "warning"
\definecolor{warningbackground}{rgb}{0.91, 0.91, 0.91}
% \fboxsep sets the space between the text and the box
\newenvironment{warningshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{warningbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{warning_graybox3admon}[1][Warning]{
\begin{warningshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_gray_warning.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{warningshaded}
}

% Admonition environment for "question"
\definecolor{questionbackground}{rgb}{0.91, 0.91, 0.91}
% \fboxsep sets the space between the text and the box
\newenvironment{questionshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{questionbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{question_graybox3admon}[1][Question]{
\begin{questionshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_gray_question2.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{questionshaded}
}

% Admonition environment for "block"
\definecolor{blockbackground}{rgb}{0.91, 0.91, 0.91}
% \fboxsep sets the space between the text and the box
\newenvironment{blockshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{blockbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{block_graybox3admon}[1][Block]{
\begin{blockshaded}
\noindent
 \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{blockshaded}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{warning_graybox3admon}[Warning]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{warning_graybox3admon}

Test warning with title:


\begin{warning_graybox3admon}[{\large Watch Out }]
{\large And here comes some text with bad news in larger font. \par}
\end{warning_graybox3admon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{block_graybox3admon}[Block with title]
\vspace{-2.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{block_graybox3admon}


\begin{block_graybox3admon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{block_graybox3admon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{notice_graybox3admon}[Note, eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{notice_graybox3admon}

% Test one word with a number


\begin{notice_graybox3admon}[Point1]
Ah, we are soon close to the end.
\end{notice_graybox3admon}


\begin{question_graybox3admon}[Question]
So, how many admonition environments does Doconce support?
\end{question_graybox3admon}


\begin{question_graybox3admon}[Question]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{question_graybox3admon}

\begin{warning_graybox3admon}[Tip]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{warning_graybox3admon}

Next is a warning without a title ("none" implies no title).


\begin{warning_graybox3admon}[]
And here comes some text with bad news.
\end{warning_graybox3admon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{notice_graybox3admon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{notice_graybox3admon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{summary_graybox3admon}[Concluding remarks, for the novice]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{summary_graybox3admon}

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_paragraph.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is just a paragraph
\newenvironment{paragraphadmon}[1][]{\paragraph{#1}}{}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{paragraphadmon}[Warning.]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{paragraphadmon}

Test warning with title:


\begin{paragraphadmon}[{\large Watch Out }.]
{\large And here comes some text with bad news in larger font. \par}
\end{paragraphadmon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{paragraphadmon}[Block with title.]
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{paragraphadmon}


\begin{paragraphadmon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{paragraphadmon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{paragraphadmon}[Note, eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{paragraphadmon}

% Test one word with a number


\begin{paragraphadmon}[Point1.]
Ah, we are soon close to the end.
\end{paragraphadmon}


\begin{paragraphadmon}[Question.]
So, how many admonition environments does Doconce support?
\end{paragraphadmon}


\begin{paragraphadmon}[Question.]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{paragraphadmon}

\begin{paragraphadmon}[Tip.]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{paragraphadmon}

Next is a warning without a title ("none" implies no title).


\begin{paragraphadmon}[]
And here comes some text with bad news.
\end{paragraphadmon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{paragraphadmon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{paragraphadmon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{paragraphadmon}[Concluding remarks, for the novice.]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{paragraphadmon}

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_yellowbox.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document


\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{fancyvrb} % packages needed for verbatim environments

\usepackage{minted}
\usemintedstyle{default}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage{framed,wrapfig}

% Admonition environment for "notice"
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{noticeshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{noticebackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{notice_yellowboxadmon}[1][Notice]{
\begin{noticeshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_yellow_notice.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{noticeshaded}
}

% Admonition environment for "summary"
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{summaryshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{summarybackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{summary_yellowboxadmon}[1][Summary]{
\begin{summaryshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_yellow_summary.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{summaryshaded}
}

% Admonition environment for "warning"
\definecolor{warningbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{warningshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{warningbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{warning_yellowboxadmon}[1][Warning]{
\begin{warningshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_yellow_warning.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{warningshaded}
}

% Admonition environment for "question"
\definecolor{questionbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{questionshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{questionbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{question_yellowboxadmon}[1][Question]{
\begin{questionshaded}
\noindent
\begin{wrapfigure}{l}{0.07\textwidth}
\vspace{-13pt}
\includegraphics[width=0.07\textwidth]{latex_figs/small_yellow_question.pdf}
\end{wrapfigure} \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{questionshaded}
}

% Admonition environment for "block"
\definecolor{blockbackground}{rgb}{0.988235, 0.964706, 0.862745}
% \fboxsep sets the space between the text and the box
\newenvironment{blockshaded}
{\def\FrameCommand{\fboxsep=3mm\colorbox{blockbackground}}
 \MakeFramed {\advance\hsize-\width \FrameRestore}}{\endMakeFramed}

\newenvironment{block_yellowboxadmon}[1][Block]{
\begin{blockshaded}
\noindent
 \textbf{#1}\par
\nobreak\noindent\ignorespaces
}
{
\end{blockshaded}
}


% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Testing admons
\end{spacing}
}
\end{center}

% ----------------- author(s) -------------------------

\begin{center}
{\bf hpl${}^{}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\end{center}
% ----------------- end author(s) -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\section{Introduction}
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


\subsection{Code}

Need some code outside admons for color and font comparisons:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def some_code(x):
    return sin(x)*exp(1-x)
\end{minted}

And some plain text verbatim:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
\end{Verbatim}

\subsection{Admonitions}

Let us start with a plain warning environment.


\begin{warning_yellowboxadmon}[Warning]
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

\begin{itemize}
  \item and a list

  \item with items
\end{itemize}

\noindent
We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
\end{warning_yellowboxadmon}

Test warning with title:


\begin{warning_yellowboxadmon}[{\large Watch Out }]
{\large And here comes some text with bad news in larger font. \par}
\end{warning_yellowboxadmon}

Then we test a block, which is guaranteed to never have any admon icon.


\begin{block_yellowboxadmon}[Block with title]
\vspace{-2.5mm}\par\noindent
{\footnotesize Here is a block of text with title. It is typeset
\emph{without any icon} and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding. \par}
\end{block_yellowboxadmon}


\begin{block_yellowboxadmon}[]
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
\end{block_yellowboxadmon}

The next admonition features a title "Note, eventually!".

% Note that the final ! does not appear in Sphinx and reST since
% those formats automatically add : to the admonition title.


\begin{notice_yellowboxadmon}[Note, eventually!]
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define $\theta$ and $\bm{r}$:

\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
\end{notice_yellowboxadmon}

% Test one word with a number


\begin{notice_yellowboxadmon}[Point1]
Ah, we are soon close to the end.
\end{notice_yellowboxadmon}


\begin{question_yellowboxadmon}[Question]
So, how many admonition environments does Doconce support?
\end{question_yellowboxadmon}


\begin{question_yellowboxadmon}[Question]
\begin{enumerate}
 \item Once more, how many admonition environments does Doconce support?
\end{enumerate}

\noindent
\end{question_yellowboxadmon}

\begin{warning_yellowboxadmon}[Tip]
It is of outmost important to

\begin{enumerate}
\item stay cool

\item read hints and tips carefully
\end{enumerate}

\noindent
Because here the thing is to do

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
\end{minted}
\end{warning_yellowboxadmon}

Next is a warning without a title ("none" implies no title).


\begin{warning_yellowboxadmon}[]
And here comes some text with bad news.
\end{warning_yellowboxadmon}

\subsection{Going deeper environments}

Here is a long notice environment with a custom title and much
text, math and code.


\begin{notice_yellowboxadmon}[Going deeper.]
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the {\LaTeX} environment should handle with ease.

Let us start with some equations:

\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
\end{minted}
And some more text that can help going into the next page.
Longer computer code requires vertical space:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
\end{minted}
And then we add a figure too.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}
\end{notice_yellowboxadmon}

\subsection{The end}

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


\begin{summary_yellowboxadmon}[Concluding remarks, for the novice]
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
\end{summary_yellowboxadmon}

% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: admon_colors.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Testing admons">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .notice, .summary, .warning, .question, .block {
       border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
       background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png); }
    .block    { color: #00529B; background-color: #BDE5F8; }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Testing admons</title>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">some_code</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> sin(x)<span style="color: #666666">*</span>exp(<span style="color: #666666">1-</span>x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>
<div class="warning alert-text-normal"><b>Warning.</b>
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
</div>
<p>
Test warning with title:

<p>
<div class="warning alert-text-large"><b>Watch Out.</b>
And here comes some text with bad news in larger font.
</div>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>
<div class="block alert-text-small"><b>Block with title.</b>
Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.
</div>
<p>
<div class="block alert-text-normal"><b></b>
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
</div>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>
<div class="notice alert-text-illegal-size"><b>Note, eventually!</b>
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$
</div>
<p>
<!-- Test one word with a number -->

<p>
<div class="notice alert-text-normal"><b>Point1.</b>
Ah, we are soon close to the end.
</div>
<p>
<div class="question alert-text-normal"><b>Question.</b>
So, how many admonition environments does Doconce support?
</div>
<p>
<div class="question alert-text-normal"><b>Question.</b>

<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<p>
<div class="warning alert-text-normal"><b>Tip.</b>
It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #FEEFB3"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">grab</span>(url, filename):
    urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span>filename)
</pre></div>
<p>
</div>
<p>
Next is a warning without a title ("none" implies no title).

<p>
<div class="warning alert-text-normal"><b></b>
And here comes some text with bad news.
</div>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>
<div class="notice alert-text-normal"><b>Going deeper.</b>
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #BDE5F8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">Dudt</span>(u):
    r <span style="color: #666666">=</span> diff(u, t) <span style="color: #666666">+</span> u<span style="color: #666666">*</span>grad(u)
    <span style="color: #008000; font-weight: bold">return</span> r

half <span style="color: #666666">=</span> <span style="color: #666666">0.5</span>
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #BDE5F8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Diff</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #008000">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #008000">float</span>(h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central2</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central4</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">4./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central6</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">3./2</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">3./5</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h) <span style="color: #666666">+</span> \
               (<span style="color: #666666">1./10</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+3*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-3*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">6*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">-</span>(<span style="color: #666666">1./6</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">+</span> f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> <span style="color: #666666">0.5*</span>f(x) <span style="color: #666666">-</span> \
                (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
</div>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>
<div class="summary alert-text-normal"><b>Concluding remarks, for the novice.</b>
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
</div>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: admon_gray.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Testing admons">



<style type="text/css">
    /* blueish2 style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    pre, code { font-size: 90%; line-height: 1.6em; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #bababa;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #f8f8f8;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Testing admons</title>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">some_code</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> sin(x)<span style="color: #666666">*</span>exp(<span style="color: #666666">1-</span>x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Warning.</b>
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
</div>
<p>
Test warning with title:

<p>
<div class="alert alert-block alert-warning alert-text-large"><b>Watch Out.</b>
And here comes some text with bad news in larger font.
</div>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>
<div class="alert alert-block alert-block alert-text-small"><b>Block with title.</b>
Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.
</div>
<p>
<div class="alert alert-block alert-block alert-text-normal"><b></b>
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
</div>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>
<div class="alert alert-block alert-notice alert-text-illegal-size"><b>Note, eventually!</b>
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$
</div>
<p>
<!-- Test one word with a number -->

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Point1.</b>
Ah, we are soon close to the end.
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>
So, how many admonition environments does Doconce support?
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>

<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Tip.</b>
It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">grab</span>(url, filename):
    urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span>filename)
</pre></div>
<p>
</div>
<p>
Next is a warning without a title ("none" implies no title).

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b></b>
And here comes some text with bad news.
</div>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Going deeper.</b>
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">Dudt</span>(u):
    r <span style="color: #666666">=</span> diff(u, t) <span style="color: #666666">+</span> u<span style="color: #666666">*</span>grad(u)
    <span style="color: #008000; font-weight: bold">return</span> r

half <span style="color: #666666">=</span> <span style="color: #666666">0.5</span>
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Diff</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #008000">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #008000">float</span>(h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central2</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central4</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">4./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central6</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">3./2</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">3./5</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h) <span style="color: #666666">+</span> \
               (<span style="color: #666666">1./10</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+3*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-3*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">6*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">-</span>(<span style="color: #666666">1./6</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">+</span> f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> <span style="color: #666666">0.5*</span>f(x) <span style="color: #666666">-</span> \
                (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
</div>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Concluding remarks, for the novice.</b>
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
</div>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: admon_yellow.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Testing admons">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #fbeed5;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #fcf8e3;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Testing admons</title>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">some_code</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> sin(x)<span style="color: #666666">*</span>exp(<span style="color: #666666">1-</span>x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Warning.</b>
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
</div>
<p>
Test warning with title:

<p>
<div class="alert alert-block alert-warning alert-text-large"><b>Watch Out.</b>
And here comes some text with bad news in larger font.
</div>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>
<div class="alert alert-block alert-block alert-text-small"><b>Block with title.</b>
Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.
</div>
<p>
<div class="alert alert-block alert-block alert-text-normal"><b></b>
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
</div>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>
<div class="alert alert-block alert-notice alert-text-illegal-size"><b>Note, eventually!</b>
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$
</div>
<p>
<!-- Test one word with a number -->

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Point1.</b>
Ah, we are soon close to the end.
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>
So, how many admonition environments does Doconce support?
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>

<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Tip.</b>
It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #fcf8e3"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">grab</span>(url, filename):
    urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span>filename)
</pre></div>
<p>
</div>
<p>
Next is a warning without a title ("none" implies no title).

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b></b>
And here comes some text with bad news.
</div>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Going deeper.</b>
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #fcf8e3"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">Dudt</span>(u):
    r <span style="color: #666666">=</span> diff(u, t) <span style="color: #666666">+</span> u<span style="color: #666666">*</span>grad(u)
    <span style="color: #008000; font-weight: bold">return</span> r

half <span style="color: #666666">=</span> <span style="color: #666666">0.5</span>
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #fcf8e3"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Diff</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #008000">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #008000">float</span>(h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central2</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central4</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">4./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central6</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">3./2</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">3./5</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h) <span style="color: #666666">+</span> \
               (<span style="color: #666666">1./10</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+3*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-3*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">6*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">-</span>(<span style="color: #666666">1./6</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">+</span> f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> <span style="color: #666666">0.5*</span>f(x) <span style="color: #666666">-</span> \
                (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
</div>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Concluding remarks, for the novice.</b>
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
</div>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: admon_sphinx.html *****************


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Testing admons</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Testing admons" href="index.html" />
    <link rel="prev" title="Testing admons" href="index.html" /> 
  
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>

  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Testing admons"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Testing admons</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="testing-admons">
<h1>Testing admons<a class="headerlink" href="#testing-admons" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">hpl</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">Jan 32, 2100</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>First some ordinary text to compare font sizes in admonitions
and the surrounding text.</p>
<p>Note that <tt class="docutils literal"><span class="pre">automake_sphinx.py</span></tt> fixes the HTML file generated by Sphinx
so that all styles for admonitions have a colored background.</p>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>Need some code outside admons for color and font comparisons:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">some_code</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>And some plain text verbatim:</p>
<div class="highlight-text"><div class="highlight"><pre>x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>
</div>
</div>
<div class="section" id="admonitions">
<h2>Admonitions<a class="headerlink" href="#admonitions" title="Permalink to this headline">¶</a></h2>
<p>Let us start with a plain warning environment.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.</p>
<blockquote>
<div><ul class="simple">
<li>and a list</li>
<li>with items</li>
</ul>
</div></blockquote>
<p class="last">We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.</p>
</div>
<p>Test warning with title:</p>
<div class="admonition-watch-out admonition">
<p class="first admonition-title">Watch Out</p>
<p class="last">And here comes some text with bad news in larger font.</p>
</div>
<p>Then we test a block, which is guaranteed to never have any admon icon.</p>
<div class="admonition-block-with-title admonition">
<p class="first admonition-title">Block with title</p>
<p class="last">Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.</p>
</div>
<p>Admonitions must have a title in Sphinx, otherwise they are not
shown. Here, we have not specified any title, and Doconce then
applies the generic title &#8220;Notice:&#8221;</p>
<div class="admonition-notice admonition">
<p class="first admonition-title">Notice</p>
<p class="last">Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.</p>
</div>
<p>The next admonition features a title &#8220;Note, eventually!&#8221;.</p>
<div class="admonition-note-eventually admonition">
<p class="first admonition-title">Note, eventually</p>
<p>Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define <span class="math">\(\theta\)</span> and <span class="math">\(\boldsymbol{r}\)</span>:</p>
<div class="last math">
\[\begin{split}\theta &amp;= q^2,\\
\boldsymbol{r} &amp;= \varrho\boldsymbol{i}\end{split}\]</div>
</div>
<div class="admonition-point1 admonition">
<p class="first admonition-title">Point1</p>
<p class="last">Ah, we are soon close to the end.</p>
</div>
<div class="admonition-question admonition">
<p class="first admonition-title">Question</p>
<p class="last">So, how many admonition environments does Doconce support?</p>
</div>
<div class="admonition-question admonition">
<p class="first admonition-title">Question</p>
<ol class="last arabic simple">
<li>Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<div class="admonition-tip admonition">
<p class="first admonition-title">Tip</p>
<p>It is of outmost important to</p>
<ol class="arabic simple">
<li>stay cool</li>
<li>read hints and tips carefully</li>
</ol>
<p>Because here the thing is to do</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">urllib</span>

<span class="k">def</span> <span class="nf">grab</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="n">urllib</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next is a warning without a title (&#8220;none&#8221; implies no title).
Admonitions must have a title in Sphinx, otherwise they are not
shown. Here, we have not specified any title, and Doconce then
applies the generic title &#8220;Notice:&#8221;</p>
<div class="admonition-notice admonition">
<p class="first admonition-title">Notice</p>
<p class="last">And here comes some text with bad news.</p>
</div>
</div>
<div class="section" id="going-deeper-environments">
<h2>Going deeper environments<a class="headerlink" href="#going-deeper-environments" title="Permalink to this headline">¶</a></h2>
<p>Here is a long notice environment with a custom title and much
text, math and code.</p>
<div class="admonition-going-deeper admonition">
<p class="first admonition-title">Going deeper</p>
<p>We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.</p>
<p>Let us start with some equations:</p>
<div class="math">
\[\begin{split}\frac{Du}{dt} &amp;= 0
\\
\frac{1}{2} &amp;= {1/2}\\
\frac{1}{2}\pmb{x} &amp;= \pmb{n}\end{split}\]</div>
<p>The implementation of such complicated equations in computer
code is task that this &#8220;Going deeper&#8221; environment targets.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">Dudt</span><span class="p">(</span><span class="n">u</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">diff</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">u</span><span class="o">*</span><span class="n">grad</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>

<span class="n">half</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span>
</pre></div>
</div>
<p>And some more text that can help going into the next page.
Longer computer code requires vertical space:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Diff</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mf">1E-5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Forward1</span><span class="p">(</span><span class="n">Diff</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">/</span><span class="n">h</span>

<span class="k">class</span> <span class="nc">Backward1</span><span class="p">(</span><span class="n">Diff</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="n">h</span>

<span class="k">class</span> <span class="nc">Central2</span><span class="p">(</span><span class="n">Diff</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Central4</span><span class="p">(</span><span class="n">Diff</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">return</span> <span class="p">(</span><span class="mf">4.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">h</span><span class="p">)</span>   <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">h</span><span class="p">))</span>  <span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> \
               <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">h</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Central6</span><span class="p">(</span><span class="n">Diff</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">return</span> <span class="p">(</span><span class="mf">3.</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">h</span><span class="p">)</span>   <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">h</span><span class="p">))</span>  <span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> \
               <span class="p">(</span><span class="mf">3.</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">+</span> \
               <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">3</span><span class="o">*</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">h</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Forward3</span><span class="p">(</span><span class="n">Diff</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span><span class="o">*</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">h</span><span class="p">)</span> <span class="o">+</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> \
                <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="n">h</span>
</pre></div>
</div>
<p>And then we add a figure too.</p>
<div class="last figure">
<img alt="_images/wavepacket_0001.png" src="_images/wavepacket_0001.png" />
</div>
</div>
</div>
<div class="section" id="the-end">
<h2>The end<a class="headerlink" href="#the-end" title="Permalink to this headline">¶</a></h2>
<p>A bit of text before the summary, which we now call &#8220;Concluding remarks,
for the novice&#8221;,
just because we can.</p>
<div class="admonition-concluding-remarks-for-the-novice admonition">
<p class="first admonition-title">Concluding remarks, for the novice</p>
<p class="last">We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Testing admons</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#code">Code</a></li>
<li><a class="reference internal" href="#admonitions">Admonitions</a></li>
<li><a class="reference internal" href="#going-deeper-environments">Going deeper environments</a></li>
<li><a class="reference internal" href="#the-end">The end</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Testing admons</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/admon.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Testing admons"
             >previous</a> |</li>
        <li><a href="index.html">Testing admons</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, hpl.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2pre.
    </div>
  </body>
</html>
************** File: admon_lyx.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Testing admons">



<style type="text/css">
    /* blueish2 style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    pre, code { font-size: 90%; line-height: 1.6em; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%%;  }
    .alert-text-large   { font-size: 130%%; }
    .alert-text-normal  { font-size: 90%%;  }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Testing admons</title>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">some_code</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> sin(x)<span style="color: #666666">*</span>exp(<span style="color: #666666">1-</span>x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="warning"></td>
<th align="left" valign="middle"><b>Warning.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.</div>
</p></td></tr>
</table>
<p>
Test warning with title:

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="warning"></td>
<th align="left" valign="middle"><b>Watch Out.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-large">And here comes some text with bad news in larger font.</div>
</p></td></tr>
</table>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>

<table width="95%" border="0">
<tr><th align="left" valign="middle"><b>Block with title.</b></th>
</tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-small">Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.</div>
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr><th align="left" valign="middle"><b></b></th>
</tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.</div>
</p></td></tr>
</table>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="notice"></td>
<th align="left" valign="middle"><b>Note, eventually!</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-illegal-size">Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$</div>
</p></td></tr>
</table>
<p>
<!-- Test one word with a number -->

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="notice"></td>
<th align="left" valign="middle"><b>Point1.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">Ah, we are soon close to the end.</div>
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_question.png" hspace="5" alt="question"></td>
<th align="left" valign="middle"><b>Question.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">So, how many admonition environments does Doconce support?</div>
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_question.png" hspace="5" alt="question"></td>
<th align="left" valign="middle"><b>Question.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">
<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol></div>
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="warning"></td>
<th align="left" valign="middle"><b>Tip.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">grab</span>(url, filename):
    urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span>filename)
</pre></div>
<p></div>
</p></td></tr>
</table>
<p>
Next is a warning without a title ("none" implies no title).

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="warning"></td>
<th align="left" valign="middle"><b></b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">And here comes some text with bad news.</div>
</p></td></tr>
</table>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="notice"></td>
<th align="left" valign="middle"><b>Going deeper.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">Dudt</span>(u):
    r <span style="color: #666666">=</span> diff(u, t) <span style="color: #666666">+</span> u<span style="color: #666666">*</span>grad(u)
    <span style="color: #008000; font-weight: bold">return</span> r

half <span style="color: #666666">=</span> <span style="color: #666666">0.5</span>
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Diff</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #008000">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #008000">float</span>(h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central2</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central4</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">4./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central6</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">3./2</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">3./5</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h) <span style="color: #666666">+</span> \
               (<span style="color: #666666">1./10</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+3*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-3*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">6*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">-</span>(<span style="color: #666666">1./6</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">+</span> f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> <span style="color: #666666">0.5*</span>f(x) <span style="color: #666666">-</span> \
                (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center></div>
</p></td></tr>
</table>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_summary.png" hspace="5" alt="summary"></td>
<th align="left" valign="middle"><b>Concluding remarks, for the novice.</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
<div class="alert-text-normal">We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.</div>
</p></td></tr>
</table>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: admon_paragraph.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Testing admons">



<style type="text/css">
    /* blueish2 style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    pre, code { font-size: 90%; line-height: 1.6em; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%%;  }
    .alert-text-large   { font-size: 130%%; }
    .alert-text-normal  { font-size: 90%%;  }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Testing admons</title>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">some_code</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> sin(x)<span style="color: #666666">*</span>exp(<span style="color: #666666">1-</span>x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>


<!-- admonition: warning, typeset as paragraph -->
<div class="alert-text-normal"><b>Warning.</b>
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
</div>
<p>
Test warning with title:

<p>


<!-- admonition: warning, typeset as paragraph -->
<div class="alert-text-large"><b>Watch Out.</b>
And here comes some text with bad news in larger font.
</div>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>


<!-- admonition: block, typeset as paragraph -->
<div class="alert-text-small"><b>Block with title.</b>
Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.
</div>
<p>


<!-- admonition: block, typeset as paragraph -->
<div class="alert-text-normal"><b></b>
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
</div>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>


<!-- admonition: notice, typeset as paragraph -->
<div class="alert-text-illegal-size"><b>Note, eventually!</b>
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$
</div>
<p>
<!-- Test one word with a number -->

<p>


<!-- admonition: notice, typeset as paragraph -->
<div class="alert-text-normal"><b>Point1.</b>
Ah, we are soon close to the end.
</div>
<p>


<!-- admonition: question, typeset as paragraph -->
<div class="alert-text-normal"><b>Question.</b>
So, how many admonition environments does Doconce support?
</div>
<p>


<!-- admonition: question, typeset as paragraph -->
<div class="alert-text-normal"><b>Question.</b>

<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<p>


<!-- admonition: warning, typeset as paragraph -->
<div class="alert-text-normal"><b>Tip.</b>
It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">grab</span>(url, filename):
    urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span>filename)
</pre></div>
<p>
</div>
<p>
Next is a warning without a title ("none" implies no title).

<p>


<!-- admonition: warning, typeset as paragraph -->
<div class="alert-text-normal"><b></b>
And here comes some text with bad news.
</div>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>


<!-- admonition: notice, typeset as paragraph -->
<div class="alert-text-normal"><b>Going deeper.</b>
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">Dudt</span>(u):
    r <span style="color: #666666">=</span> diff(u, t) <span style="color: #666666">+</span> u<span style="color: #666666">*</span>grad(u)
    <span style="color: #008000; font-weight: bold">return</span> r

half <span style="color: #666666">=</span> <span style="color: #666666">0.5</span>
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Diff</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #008000">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #008000">float</span>(h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central2</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central4</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">4./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central6</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">3./2</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">3./5</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h) <span style="color: #666666">+</span> \
               (<span style="color: #666666">1./10</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+3*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-3*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">6*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">-</span>(<span style="color: #666666">1./6</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">+</span> f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> <span style="color: #666666">0.5*</span>f(x) <span style="color: #666666">-</span> \
                (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
</div>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>


<!-- admonition: summary, typeset as paragraph -->
<div class="alert-text-normal"><b>Concluding remarks, for the novice.</b>
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
</div>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: admon_apricot.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Testing admons">



<style type="text/css">
    /* solarized style */
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #FFBF00;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #fbeed5;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_yellow_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>Testing admons</title>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">some_code</span>(x):
    <span style="color: #8B008B; font-weight: bold">return</span> sin(x)*exp(<span style="color: #B452CD">1</span>-x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #eeeedd"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Warning.</b>
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
</div>
<p>
Test warning with title:

<p>
<div class="alert alert-block alert-warning alert-text-large"><b>Watch Out.</b>
And here comes some text with bad news in larger font.
</div>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>
<div class="alert alert-block alert-block alert-text-small"><b>Block with title.</b>
Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.
</div>
<p>
<div class="alert alert-block alert-block alert-text-normal"><b></b>
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
</div>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>
<div class="alert alert-block alert-notice alert-text-illegal-size"><b>Note, eventually!</b>
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$
</div>
<p>
<!-- Test one word with a number -->

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Point1.</b>
Ah, we are soon close to the end.
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>
So, how many admonition environments does Doconce support?
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>

<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Tip.</b>
It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #fbeed5"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">import</span> <span style="color: #008b45; text-decoration: underline">urllib</span>

<span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">grab</span>(url, filename):
    urllib.urlretrieve(url, filename=filename)
</pre></div>
<p>
</div>
<p>
Next is a warning without a title ("none" implies no title).

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b></b>
And here comes some text with bad news.
</div>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Going deeper.</b>
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #fbeed5"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">Dudt</span>(u):
    r = diff(u, t) + u*grad(u)
    <span style="color: #8B008B; font-weight: bold">return</span> r

half = <span style="color: #B452CD">0.5</span>
x = <span style="color: #B452CD">2</span>*n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "perldoc" -->
<div class="highlight" style="background: #fbeed5"><pre style="line-height: 125%"><span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Diff</span>:
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__init__</span>(<span style="color: #658b00">self</span>, f, h=<span style="color: #B452CD">1E-5</span>):
        <span style="color: #658b00">self</span>.f = f
        <span style="color: #658b00">self</span>.h = <span style="color: #658b00">float</span>(h)

<span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__call__</span>(<span style="color: #658b00">self</span>, x):
        f, h = <span style="color: #658b00">self</span>.f, <span style="color: #658b00">self</span>.h
        <span style="color: #8B008B; font-weight: bold">return</span> (f(x+h) - f(x))/h

<span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__call__</span>(<span style="color: #658b00">self</span>, x):
        f, h = <span style="color: #658b00">self</span>.f, <span style="color: #658b00">self</span>.h
        <span style="color: #8B008B; font-weight: bold">return</span> (f(x) - f(x-h))/h

<span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Central2</span>(Diff):
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__call__</span>(<span style="color: #658b00">self</span>, x):
        f, h = <span style="color: #658b00">self</span>.f, <span style="color: #658b00">self</span>.h
        <span style="color: #8B008B; font-weight: bold">return</span> (f(x+h) - f(x-h))/(<span style="color: #B452CD">2</span>*h)

<span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Central4</span>(Diff):
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__call__</span>(<span style="color: #658b00">self</span>, x):
        f, h = <span style="color: #658b00">self</span>.f, <span style="color: #658b00">self</span>.h
        <span style="color: #8B008B; font-weight: bold">return</span> (<span style="color: #B452CD">4.</span>/<span style="color: #B452CD">3</span>)*(f(x+h)   - f(x-h))  /(<span style="color: #B452CD">2</span>*h) - \
               (<span style="color: #B452CD">1.</span>/<span style="color: #B452CD">3</span>)*(f(x+<span style="color: #B452CD">2</span>*h) - f(x-<span style="color: #B452CD">2</span>*h))/(<span style="color: #B452CD">4</span>*h)

<span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Central6</span>(Diff):
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__call__</span>(<span style="color: #658b00">self</span>, x):
        f, h = <span style="color: #658b00">self</span>.f, <span style="color: #658b00">self</span>.h
        <span style="color: #8B008B; font-weight: bold">return</span> (<span style="color: #B452CD">3.</span>/<span style="color: #B452CD">2</span>) *(f(x+h)   - f(x-h))  /(<span style="color: #B452CD">2</span>*h) - \
               (<span style="color: #B452CD">3.</span>/<span style="color: #B452CD">5</span>) *(f(x+<span style="color: #B452CD">2</span>*h) - f(x-<span style="color: #B452CD">2</span>*h))/(<span style="color: #B452CD">4</span>*h) + \
               (<span style="color: #B452CD">1.</span>/<span style="color: #B452CD">10</span>)*(f(x+<span style="color: #B452CD">3</span>*h) - f(x-<span style="color: #B452CD">3</span>*h))/(<span style="color: #B452CD">6</span>*h)

<span style="color: #8B008B; font-weight: bold">class</span> <span style="color: #008b45; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #8B008B; font-weight: bold">def</span> <span style="color: #008b45">__call__</span>(<span style="color: #658b00">self</span>, x):
        f, h = <span style="color: #658b00">self</span>.f, <span style="color: #658b00">self</span>.h
        <span style="color: #8B008B; font-weight: bold">return</span> (-(<span style="color: #B452CD">1.</span>/<span style="color: #B452CD">6</span>)*f(x+<span style="color: #B452CD">2</span>*h) + f(x+h) - <span style="color: #B452CD">0.5</span>*f(x) - \
                (<span style="color: #B452CD">1.</span>/<span style="color: #B452CD">3</span>)*f(x-h))/h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
</div>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Concluding remarks, for the novice.</b>
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
</div>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: admon_vagrant.html *****************
<html>
<head>
<!--
This style is adopted from the (now old) vagrant 1.0 web
pages. The style builds on the Twitter Bootstrap style.
Modifications by Hans Petter Langtangen, hpl@simula.no.

This style file should be copied and the following
elements edited:

Logo heading:

 LogoWord
 withSubWord

Navigation links at the top:

 GO TO 1
 GO TO 2

Footer at the end:

 Here goes a footer, if desired, maybe with a Copyright &copy;

-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />

<link rel="stylesheet" href="style_vagrant/css/twitter_bootstrap.css">
<link rel="stylesheet" href="style_vagrant/css/vagrant.css">
<!-- Define color of headings here (last definition counts) -->
<style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */
</style>
</head>
<body>

<title> The end </title>

<div class="container">
 <div class="row Header with-border">
  <div class="span3 Module logo">
   <h1><a href="/">LogoWord<span class="subtitle">withSubWord</span></a></h1>
  </div>
  <div class="span9">
   <div class="Module navigation">
   <!-- Navigation at the top of the page -->
    <ul>
     <li> <a href="">GO TO 1</a></li>
     <li> <a href="">GO TO 2</a></li>
    </ul>
   </div>
  </div>
 </div>
</div>


<!-- Here goes the table of contents in the sidebar
     <li class="active"> means dark blue background for current section
-->
<div class="row">
 <div class="span3 Module sidebar">
  <div class="well" style="padding: 8px 0px;">
   <ul class="nav nav-list">
     <!-- Syntax:
     <li> <a href="...">Section 1</a></li>
     <li class="active"> <a href="...">Section 2</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2a</a></li>
     <li> &nbsp;&nbsp;&nbsp; <a href="...">Section 2b</a></li>
     -->
     <!-- Doconce automatically fills in the table of contents -->
          <!-- vagrant nav toc: " Introduction " --> <li>  <a href="#___sec0"> Introduction </a>
     <!-- vagrant nav toc: " Code " --> <li> &nbsp;  <a href="#___sec1"> Code </a>
     <!-- vagrant nav toc: " Admonitions " --> <li> &nbsp;  <a href="#___sec2"> Admonitions </a>
     <!-- vagrant nav toc: " Going deeper environments " --> <li> &nbsp;  <a href="#___sec3"> Going deeper environments </a>
     <!-- vagrant nav toc: " The end " --> <li> &nbsp;  <a href="#___sec4"> The end </a>

    </ul>
   </div>
  </div>

  <div class="span9">


<!-- tocinfo
{'highest level': 1,
 'sections': [(' Introduction ', 1, None, '___sec0'),
              (' Code ', 2, None, '___sec1'),
              (' Admonitions ', 2, None, '___sec2'),
              (' Going deeper environments ', 2, None, '___sec3'),
              (' The end ', 2, None, '___sec4')]}
end of tocinfo -->





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




<!-- ------------------- main content ---------------------- -->

<h1>Testing admons</h1>

<center><h1>Testing admons</h1></center>  <!-- document title -->

<p>
<!-- author(s): hpl -->

<center>
<b>hpl</b> 
</center>


<p>
<!-- institution(s) -->

<h2>Introduction  <a name="___sec0"></a></h2>
First some ordinary text to compare font sizes in admonitions
and the surrounding text.

<h3>Code  <a name="___sec1"></a></h3>

<p>
Need some code outside admons for color and font comparisons:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">some_code</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> sin(x)<span style="color: #666666">*</span>exp(<span style="color: #666666">1-</span>x)
</pre></div>
<p>
And some plain text verbatim:

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</pre></div>

<h3>Admonitions  <a name="___sec2"></a></h3>

<p>
Let us start with a plain warning environment.

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Warning.</b>
And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.

<p>

<ul>
  <li> and a list</li>
  <li> with items</li>
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
</div>
<p>
Test warning with title:

<p>
<div class="alert alert-block alert-warning alert-text-large"><b>Watch Out.</b>
And here comes some text with bad news in larger font.
</div>
<p>
Then we test a block, which is guaranteed to never have any admon icon.

<p>
<div class="alert alert-block alert-block alert-text-small"><b>Block with title.</b>
Here is a block of text with title. It is typeset
<em>without any icon</em> and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.
</div>
<p>
<div class="alert alert-block alert-block alert-text-normal"><b></b>
Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.
</div>
<p>
The next admonition features a title "Note, eventually!".

<p>
<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->

<p>
<div class="alert alert-block alert-notice alert-text-illegal-size"><b>Note, eventually!</b>
Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define \( \theta \) and \( \boldsymbol{r} \):

<p>
$$
\begin{align*}
\theta &= q^2,\\
\boldsymbol{r} &= \varrho\boldsymbol{i}
\end{align*}
$$
</div>
<p>
<!-- Test one word with a number -->

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Point1.</b>
Ah, we are soon close to the end.
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>
So, how many admonition environments does Doconce support?
</div>
<p>
<div class="alert alert-block alert-question alert-text-normal"><b>Question.</b>

<ol>
 <li> Once more, how many admonition environments does Doconce support?</li>
</ol>
</div>
<p>
<div class="alert alert-block alert-warning alert-text-normal"><b>Tip.</b>
It is of outmost important to

<p>

<ol>
<li> stay cool</li>
<li> read hints and tips carefully</li>
</ol>

Because here the thing is to do

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">grab</span>(url, filename):
    urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span>filename)
</pre></div>
<p>
</div>
<p>
Next is a warning without a title ("none" implies no title).

<p>
<div class="alert alert-block alert-warning alert-text-normal"><b></b>
And here comes some text with bad news.
</div>
<h3>Going deeper environments  <a name="___sec3"></a></h3>

<p>
Here is a long notice environment with a custom title and much
text, math and code.

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Going deeper.</b>
We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

<p>
Let us start with some equations:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">Dudt</span>(u):
    r <span style="color: #666666">=</span> diff(u, t) <span style="color: #666666">+</span> u<span style="color: #666666">*</span>grad(u)
    <span style="color: #008000; font-weight: bold">return</span> r

half <span style="color: #666666">=</span> <span style="color: #666666">0.5</span>
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>n
</pre></div>
<p>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Diff</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #008000">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #008000">float</span>(h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Backward1</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central2</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central4</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">4./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Central6</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">3./2</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+</span>h)   <span style="color: #666666">-</span> f(x<span style="color: #666666">-</span>h))  <span style="color: #666666">/</span>(<span style="color: #666666">2*</span>h) <span style="color: #666666">-</span> \
               (<span style="color: #666666">3./5</span>) <span style="color: #666666">*</span>(f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-2*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">4*</span>h) <span style="color: #666666">+</span> \
               (<span style="color: #666666">1./10</span>)<span style="color: #666666">*</span>(f(x<span style="color: #666666">+3*</span>h) <span style="color: #666666">-</span> f(x<span style="color: #666666">-3*</span>h))<span style="color: #666666">/</span>(<span style="color: #666666">6*</span>h)

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Forward3</span>(Diff):
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__call__</span>(<span style="color: #008000">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>f, <span style="color: #008000">self</span><span style="color: #666666">.</span>h
        <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #666666">-</span>(<span style="color: #666666">1./6</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">+2*</span>h) <span style="color: #666666">+</span> f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> <span style="color: #666666">0.5*</span>f(x) <span style="color: #666666">-</span> \
                (<span style="color: #666666">1./3</span>)<span style="color: #666666">*</span>f(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>h
</pre></div>
<p>
And then we add a figure too.

<p>
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
</div>
<h3>The end  <a name="___sec4"></a></h3>

<p>
A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.

<p>
<div class="alert alert-block alert-summary alert-text-normal"><b>Concluding remarks, for the novice.</b>
We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
</div>
<!-- ------------------- end of main content --------------- -->


<!--
Preliminary examples/discussion on vagrant style syntax

<div class='alert alert-block alert-notice'>
  <h3>What about PHP? Python? Java?</h3>
<p>
bla-bla.
</div>

<p>
While the <div class="deep-blue">rest of the</div> getting started
-->

<!-- Navigation buttons at the bottom:
     Doconce will automatically fill in the right URL in these
     buttons when doconce html_split is run. Otherwise they are empty.
<ul class="pager">
  <li class="previous">
    <a href="">&larr; </a>
  </li>
  <li class="next">
    <a href=""> &rarr;</a>
 </li>
</ul>
-->

 </div>

 <div class="row Footer">
  <div class="span12">
  Here goes a footer, if desired, maybe with a Copyright &copy;
  </div>
 </div>
</div>
</body>
</html>




************** File: admon_mwiki.mwiki *****************
#TITLE (actually governed by the filename): Testing admons

By '''hpl'''
==== Jan 32, 2100 ====

== Introduction ==
First some ordinary text to compare font sizes in admonitions
and the surrounding text.


==== Code ====

Need some code outside admons for color and font comparisons:

<syntaxhighlight lang="python">
def some_code(x):
    return sin(x)*exp(1-x)
</syntaxhighlight>

And some plain text verbatim:

<syntaxhighlight lang="text">
x=1.0 y=0.9 z=0.4
x=1.1 y=0.3 z=0.1
</syntaxhighlight>

==== Admonitions ====

Let us start with a plain warning environment.


{{mbox
| type = warning
| textstyle = font-size: 90%;
| text = '''Warning.''' And here is a warning about something to pay attention to. We
test how the heading behave and add quite some extra texts
in comparison with the other admons.


<ul>
  <li> and a list
  <li> with items
</ul>

We continue with more text to see how that affects the layout.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
And more and more text.
}}

Test warning with title:


{{mbox
| type = warning
| textstyle = font-size: 130%;
| text = '''Watch Out.''' And here comes some text with bad news in larger font.
}}

Then we test a block, which is guaranteed to never have any admon icon.

''Block with title''\n
Here is a block of text with title. It is typeset
''without any icon'' and is useful when you want some admons with icon
and some without. With the small font size, as used here, one can have
more comment-style text or text that really goes deeper or talks
about fun facts that are not strictly necessary for the main flow
of understanding.

Here is a block of text with no title. As above, it is typeset without any icon
and is useful when you want some admons with icon and some without.

The next admonition features a title "Note, eventually!".

<!-- Note that the final ! does not appear in Sphinx and reST since -->
<!-- those formats automatically add : to the admonition title. -->


{{mbox
| type = notice
| textstyle = font-size: illegal-size;
| text = '''Note, eventually!''' Ah, we are soon close to the end (with illegal font size specification!).
But first a bit of math where we define <math>\theta</math> and <math>\bm{r}</math>:

:<math>
\begin{align*}
\theta &= q^2,\\
\bm{r} &= \varrho\bm{i}
\end{align*}
</math>
}}

<!-- Test one word with a number -->


{{mbox
| type = notice
| textstyle = font-size: 90%;
| text = '''Point1.''' Ah, we are soon close to the end.
}}


{{mbox
| type = Question.
| textstyle = font-size: 90%;
| text = '''Question.''' So, how many admonition environments does Doconce support?
}}


{{mbox
| type = Question.
| textstyle = font-size: 90%;
| text = '''Question.''' 
<ol>
 <li> Once more, how many admonition environments does Doconce support?
</ol>
}}

{{mbox
| type = warning
| textstyle = font-size: 90%;
| text = '''Tip.''' It is of outmost important to


<ol>
<li> stay cool
<li> read hints and tips carefully
</ol>

Because here the thing is to do

<syntaxhighlight lang="python">
import urllib

def grab(url, filename):
    urllib.urlretrieve(url, filename=filename)
</syntaxhighlight>
}}

Next is a warning without a title ("none" implies no title).


{{mbox
| type = warning
| textstyle = font-size: 90%;
| text = '''''' And here comes some text with bad news.
}}

==== Going deeper environments ====

Here is a long notice environment with a custom title and much
text, math and code.


{{mbox
| type = notice
| textstyle = font-size: 90%;
| text = '''Going deeper.''' We have some equations that should be preceded by much text, so the
task is to write and write. The number of words, and not the
meaning, is what counts here. We need desperately to fill up the
page in the hope that some admonitions will experience a page break,
which the LaTeX environment should handle with ease.

Let us start with some equations:

:<math>
\begin{align*}
\frac{Du}{dt} &= 0
\\
\frac{1}{2} &= {1/2}\\
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
</math>

The implementation of such complicated equations in computer
code is task that this "Going deeper" environment targets.

<syntaxhighlight lang="python">
def Dudt(u):
    r = diff(u, t) + u*grad(u)
    return r

half = 0.5
x = 2*n
</syntaxhighlight>
And some more text that can help going into the next page.
Longer computer code requires vertical space:

<syntaxhighlight lang="python">
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h

class Backward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x) - f(x-h))/h

class Central2(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x-h))/(2*h)

class Central4(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (4./3)*(f(x+h)   - f(x-h))  /(2*h) - \
               (1./3)*(f(x+2*h) - f(x-2*h))/(4*h)

class Central6(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (3./2) *(f(x+h)   - f(x-h))  /(2*h) - \
               (3./5) *(f(x+2*h) - f(x-2*h))/(4*h) + \
               (1./10)*(f(x+3*h) - f(x-3*h))/(6*h)

class Forward3(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (-(1./6)*f(x+2*h) + f(x+h) - 0.5*f(x) - \
                (1./3)*f(x-h))/h
</syntaxhighlight>
And then we add a figure too.


[[File:Wavepacket 0001.png|frame|alt=Wavepacket 0001.png|<span title=""></span>]] <!-- not yet uploaded to common.wikimedia.org -->
}}

==== The end ====

A bit of text before the summary, which we now call "Concluding remarks,
for the novice",
just because we can.


{{mbox
| type = Concluding remarks, for the novice.
| textstyle = font-size: 90%;
| text = '''Concluding remarks, for the novice.''' We can summarize the most important things with admons: they have
a different typesetting, and they may have a symbol.
Titles should be optional.
}}


************** File: slides1.do.txt *****************
TITLE: On the Technicalities of Scientific Writing Anno 2012: The Doconce Way
AUTHOR: Hans Petter Langtangen at Simula Research Laboratory and University of Oslo
DATE: Today

!split

===== Figure and bullet list =====

!bslidecell 00  0.35
!bpop

  * Here is a *wave packet*
  * It can move
  * But here it is just a figure

!epop
!eslidecell

# Test that it is okay to leave out width if there are only two columns

!bslidecell 01
FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=300]
!eslidecell

!bpop highlight-red
Here we have a paragraph to pop up in red.
And a line more
!epop

[hpl: Here are some notes that can go to notes typesetting
in the slide environment.]

!bnotes
One can also have ordinary notes.
Over multiple lines.
!enotes

!split
===== Scientific writing needs to address many new media =====

!bpop

 * Old days (1985-2005): mostly black-and-white documents aimed at printing
 * Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...
 * LaTeX writing may be very different from writing in other formats
 * Main problem:
    * LaTeX provide all sorts of fancy packages, but
    * PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats
 * Conclusion: We need more than LaTeX

!epop

!split
===== Some math and computer code =====

!bt
\[ f(x,y,t) = e^{-xt}\sin\pi y \]
!et
Python implementation:

!bc pycod
import numpy as np

def f(x, y, t):
    return np.exp(-x*t)*np.sin(np.pi*y)

class Fancy:
    def __init__(self):
        pass

    def __call__(self, x, y, t):
        return f(x, y, t)

f2 = Fancy()
!ec

!split
===== Admon blocks =====

Can use admons to simulate blocks:

!bnotice Key PDE:
This box has title and math in normal 90 percent font:
!bt
\[ \frac{\partial u}{\partial t} = \nabla^2 u \]
!et
!enotice

!bpop
!bnotice None
Just some block with text and a conclusion that something is important.
This one pops up after the rest of the slide.
!enotice
!epop

!bwarning (small)
Can use, e.g., a warning admon to have my own notes, preferably
inside preprocess/mako if statements to turn notes on and off.
This one is typeset in a small font and with the default
title (Warning) since no title is specified.
!ewarning




************** File: slides1_reveal.html *****************
<!DOCTYPE html>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="On the Technicalities of Scientific Writing Anno 2012: The Doconce Way">







<!-- reveal.js: http://lab.hakim.se/reveal-js/ -->

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<!--
<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/reveal.min.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/beigesmall.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/sky.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/darkgray.css" id="theme">
-->

<script>
document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
</script>

<style type="text/css">
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-size: 60%; font-style: italic; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .reveal .alert-text-small   { font-size: 80%;  }
    .reveal .alert-text-large   { font-size: 130%; }
    .reveal .alert-text-normal  { font-size: 90%;  }
    .reveal .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:5px solid #bababa;
             -webkit-border-radius: 14px; -moz-border-radius: 14px;
             border-radius:14px
             background-position: 10px 10px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 30px; /* 55px; if icon */
     }
     .reveal .alert-block {padding-top:14px; padding-bottom:14px}
     .reveal .alert-block > p, .alert-block > ul {margin-bottom:0}
     /*.reveal .alert li {margin-top: 1em}*/
     .reveal .alert-block p+p {margin-top:5px}
     /*.reveal .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .reveal .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .reveal .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .reveal .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); } */

</style>



<!-- Styles for table layout of slides -->
<style type="text/css">
td.padding {
  padding-top:20px;
  padding-bottom:20px;
  padding-right:50px;
  padding-left:50px;
}
</style>

</head>

<body>
<div class="reveal">

<!-- Any section element inside the <div class="slides"> container
     is displayed as a slide -->

<div class="slides">





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    



<section>
<!-- ------------------- main content ---------------------- -->


<title>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</title>

<center><h1>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>&nbsp;<br>
<!-- institution(s) -->

<center>[1] <b>Simula Research Laboratory</b></center>
<center>[2] <b>University of Oslo</b></center>
<p>&nbsp;<br>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>

</section>


<section>

<h3>Figure and bullet list  <a name="___sec0"></a></h3>

<p>

<table border="0">
<tr>
<td class="padding">


<p>

<ul>
  <p><li class="fragment"> Here is a <em>wave packet</em></li>
  <p><li class="fragment"> It can move</li>
  <p><li class="fragment"> But here it is just a figure</li>
</ul>
<p>


</td>
<td class="padding">
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=300></p></center>
</td>
</tr>
</table>


<p>
<!-- Test that it is okay to leave out width if there are only two columns -->

<p>


<p>

<p class="fragment">

<span class="fragment highlight-red">

Here we have a paragraph to pop up in red.
And a line more

</span>

</p>


<p>

<!-- begin inline comment -->
<font color="red">[<b>hpl 1</b>: <em>Here are some notes that can go to notes typesetting
in the slide environment.</em>]</font>
<!-- end inline comment -->


<p>
<aside class="notes">
<!-- click "s" to activate -->

One can also have ordinary notes.
Over multiple lines.

</aside>


<p>

</section>


<section>

<h3>Scientific writing needs to address many new media  <a name="___sec1"></a></h3>

<p>


<p>

<ul>
 <p><li class="fragment"> Old days (1985-2005): mostly black-and-white documents aimed at printing</li>
 <p><li class="fragment"> Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...</li>
 <p><li class="fragment"> LaTeX writing may be very different from writing in other formats</li>
 <p><li class="fragment"> Main problem:</li>

<ul>
    <p><li class="fragment"> LaTeX provide all sorts of fancy packages, but</li>
    <p><li class="fragment"> PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats</li>
</ul>
<p>

 <p><li class="fragment"> Conclusion: We need more than LaTeX</li>
</ul>
<p>



<p>

</section>


<section>

<h3>Some math and computer code  <a name="___sec2"></a></h3>

<p>
<p>&nbsp;<br>
$$ f(x,y,t) = e^{-xt}\sin\pi y $$
<p>&nbsp;<br>

Python implementation:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #AA22FF; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">f</span>(x, y, t):
    <span style="color: #AA22FF; font-weight: bold">return</span> np<span style="color: #666666">.</span>exp(<span style="color: #666666">-</span>x<span style="color: #666666">*</span>t)<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>y)

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Fancy</span>:
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__init__</span>(<span style="color: #AA22FF">self</span>):
        <span style="color: #AA22FF; font-weight: bold">pass</span>

    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__call__</span>(<span style="color: #AA22FF">self</span>, x, y, t):
        <span style="color: #AA22FF; font-weight: bold">return</span> f(x, y, t)

f2 <span style="color: #666666">=</span> Fancy()
</pre></div>
<p>

</section>


<section>

<h3>Admon blocks  <a name="___sec3"></a></h3>

<p>
Can use admons to simulate blocks:

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Key PDE:</b>
This box has title and math in normal 90 percent font:
<p>&nbsp;<br>
$$ \frac{\partial u}{\partial t} = \nabla^2 u $$
<p>&nbsp;<br>
</div>
<p>

<p class="fragment">

<div class="fragment alert alert-block alert-notice alert-text-normal"><b></b>
Just some block with text and a conclusion that something is important.
This one pops up after the rest of the slide.
</div>

</p>


<p>
<div class="alert alert-block alert-warning alert-text-small"><b>Warning.</b>
Can use, e.g., a warning admon to have my own notes, preferably
inside preprocess/mako if statements to turn notes on and off.
This one is typeset in a small font and with the default
title (Warning) since no title is specified.
</div>

</section>



</div> <!-- class="slides" -->
</div> <!-- class="reveal" -->

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.min.js"></script>

<script>

// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
controls: true,
progress: true,
history: true,
center: true,
heme: Reveal.getQueryHash().theme, // available themes are in reveal.js/css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

// Optional libraries used to extend on reveal.js
dependencies: [
{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
{ src: 'reveal.js/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
{ src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
// { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]
});
</script>


</body>
</html>
reveal.js:
css
Gruntfile.js
index.html
js
lib
LICENSE
package.json
plugin
README.md

reveal.js/css:
print
reveal.css
reveal.min.css
theme

reveal.js/css/print:
paper.css
pdf.css

reveal.js/css/theme:
beige.css
beigesmall.css
darkgray.css
default.css
moon.css
night.css
README.md
serif.css
simple.css
sky.css
solarized.css
source
template

reveal.js/css/theme/source:
beige.scss
default.scss
moon.scss
night.scss
serif.scss
simple.scss
sky.scss
solarized.scss

reveal.js/css/theme/template:
mixins.scss
settings.scss
theme.scss

reveal.js/js:
reveal.js
reveal.min.js

reveal.js/lib:
css
font
js

reveal.js/lib/css:
zenburn.css

reveal.js/lib/font:
league_gothic_license
league_gothic-webfont.eot
league_gothic-webfont.svg
league_gothic-webfont.ttf
league_gothic-webfont.woff

reveal.js/lib/js:
classList.js
head.min.js
html5shiv.js

reveal.js/plugin:
highlight
markdown
multiplex
notes
notes-server
postmessage
print-pdf
remotes
search
zoom-js

reveal.js/plugin/highlight:
highlight.js

reveal.js/plugin/markdown:
example.html
example.md
markdown.js
marked.js

reveal.js/plugin/multiplex:
client.js
index.js
master.js

reveal.js/plugin/notes:
notes.html
notes.js

reveal.js/plugin/notes-server:
client.js
index.js
notes.html

reveal.js/plugin/postmessage:
example.html
postmessage.js

reveal.js/plugin/print-pdf:
print-pdf.js

reveal.js/plugin/remotes:
remotes.js

reveal.js/plugin/search:
search.js

reveal.js/plugin/zoom-js:
zoom.js

************** File: tmp_slides_html_all.sh *****************
#!/bin/sh

doconce format html slides1 SLIDE_TYPE=dummy SLIDE_THEME=dummy
doconce slides_html slides1 doconce

doconce format html slides1 --pygments_html_style=monokai --keep_pygments_html_bg SLIDE_TYPE=csss SLIDE_THEME=csss_default
doconce slides_html slides1 csss --html_slide_theme=csss_default
cp slides1.html slides1_csss_csss_default.html

doconce format html slides1 --pygments_html_style=perldoc --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=beigesmall
doconce slides_html slides1 reveal --html_slide_theme=beigesmall
cp slides1.html slides1_reveal_beigesmall.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=simple
doconce slides_html slides1 reveal --html_slide_theme=simple
cp slides1.html slides1_reveal_simple.html

doconce format html slides1 --pygments_html_style=native --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=darkgray
doconce slides_html slides1 reveal --html_slide_theme=darkgray
cp slides1.html slides1_reveal_darkgray.html

doconce format html slides1 --pygments_html_style=default --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=sky
doconce slides_html slides1 reveal --html_slide_theme=sky
cp slides1.html slides1_reveal_sky.html

doconce format html slides1 --pygments_html_style=perldoc --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=serif
doconce slides_html slides1 reveal --html_slide_theme=serif
cp slides1.html slides1_reveal_serif.html

doconce format html slides1 --pygments_html_style=perldoc --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=beige
doconce slides_html slides1 reveal --html_slide_theme=beige
cp slides1.html slides1_reveal_beige.html

doconce format html slides1 --pygments_html_style=fruity --keep_pygments_html_bg SLIDE_TYPE=reveal SLIDE_THEME=night
doconce slides_html slides1 reveal --html_slide_theme=night
cp slides1.html slides1_reveal_night.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=dzslides SLIDE_THEME=dzslides_default
doconce slides_html slides1 dzslides --html_slide_theme=dzslides_default
cp slides1.html slides1_dzslides_dzslides_default.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=html5slides SLIDE_THEME=template-io2011
doconce slides_html slides1 html5slides --html_slide_theme=template-io2011
cp slides1.html slides1_html5slides_template-io2011.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=html5slides SLIDE_THEME=template-default
doconce slides_html slides1 html5slides --html_slide_theme=template-default
cp slides1.html slides1_html5slides_template-default.html

doconce format html slides1 --pygments_html_style=fruity --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.mightly
doconce slides_html slides1 deck --html_slide_theme=sandstone.mightly
cp slides1.html slides1_deck_sandstone_mightly.html

doconce format html slides1 --pygments_html_style=fruity --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=neon
doconce slides_html slides1 deck --html_slide_theme=neon
cp slides1.html slides1_deck_neon.html

doconce format html slides1 --pygments_html_style=perldoc --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.default
doconce slides_html slides1 deck --html_slide_theme=sandstone.default
cp slides1.html slides1_deck_sandstone_default.html

doconce format html slides1 --pygments_html_style=native --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.dark
doconce slides_html slides1 deck --html_slide_theme=sandstone.dark
cp slides1.html slides1_deck_sandstone_dark.html

doconce format html slides1 --pygments_html_style=default --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.firefox
doconce slides_html slides1 deck --html_slide_theme=sandstone.firefox
cp slides1.html slides1_deck_sandstone_firefox.html

doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.light
doconce slides_html slides1 deck --html_slide_theme=sandstone.light
cp slides1.html slides1_deck_sandstone_light.html

doconce format html slides1 --pygments_html_style=fruity --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.mdn
doconce slides_html slides1 deck --html_slide_theme=sandstone.mdn
cp slides1.html slides1_deck_sandstone_mdn.html

doconce format html slides1 --pygments_html_style=default --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=mnml
doconce slides_html slides1 deck --html_slide_theme=mnml
cp slides1.html slides1_deck_mnml.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=web-2.0
doconce slides_html slides1 deck --html_slide_theme=web-2.0
cp slides1.html slides1_deck_web-2_0.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=swiss
doconce slides_html slides1 deck --html_slide_theme=swiss
cp slides1.html slides1_deck_swiss.html

doconce format html slides1 --pygments_html_style=fruity --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=sandstone.aurora
doconce slides_html slides1 deck --html_slide_theme=sandstone.aurora
cp slides1.html slides1_deck_sandstone_aurora.html

doconce format html slides1 --pygments_html_style=autumn --keep_pygments_html_bg SLIDE_TYPE=deck SLIDE_THEME=beamer
doconce slides_html slides1 deck --html_slide_theme=beamer
cp slides1.html slides1_deck_beamer.html

echo "Here are the slide shows:"
/bin/ls slides1_*_*.html

************** File: slides1_1st.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="On the Technicalities of Scientific Writing Anno 2012: The Doconce Way">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #bababa;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #f8f8f8;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [(' Figure and bullet list ', 2, None, '___sec0'),
              (' Scientific writing needs to address many new media ',
               2,
               None,
               '___sec1'),
              (' Some math and computer code ', 2, None, '___sec2'),
              (' Admon blocks ', 2, None, '___sec3')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<title>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</title>

<center><h1>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Simula Research Laboratory</b></center>
<center>[2] <b>University of Oslo</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
<!-- !split -->

<h3>Figure and bullet list  <a name="___sec0"></a></h3>

<p>
<!-- !bslidecell 00  0.35 -->
<!-- !bpop -->

<p>

<ul>
  <li> Here is a <em>wave packet</em></li>
  <li> It can move</li>
  <li> But here it is just a figure</li>
</ul>

<!-- !epop -->
<!-- !eslidecell -->

<p>
<!-- Test that it is okay to leave out width if there are only two columns -->

<p>
<!-- !bslidecell 01 -->
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=300></p></center>
<!-- !eslidecell -->

<p>
<!-- !bpop highlight-red -->
Here we have a paragraph to pop up in red.
And a line more
<!-- !epop -->

<p>

<!-- begin inline comment -->
<font color="red">[<b>hpl 1</b>: <em>Here are some notes that can go to notes typesetting
in the slide environment.</em>]</font>
<!-- end inline comment -->


<p>
<!-- !bnotes -->
One can also have ordinary notes.
Over multiple lines.
<!-- !enotes -->

<p>
<!-- !split -->

<h3>Scientific writing needs to address many new media  <a name="___sec1"></a></h3>

<p>
<!-- !bpop -->

<p>

<ul>
 <li> Old days (1985-2005): mostly black-and-white documents aimed at printing</li>
 <li> Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...</li>
 <li> LaTeX writing may be very different from writing in other formats</li>
 <li> Main problem:</li>

<ul>
    <li> LaTeX provide all sorts of fancy packages, but</li>
    <li> PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats</li>
</ul>

 <li> Conclusion: We need more than LaTeX</li>
</ul>

<!-- !epop -->

<p>
<!-- !split -->

<h3>Some math and computer code  <a name="___sec2"></a></h3>

<p>
$$ f(x,y,t) = e^{-xt}\sin\pi y $$

Python implementation:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #AA22FF; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">f</span>(x, y, t):
    <span style="color: #AA22FF; font-weight: bold">return</span> np<span style="color: #666666">.</span>exp(<span style="color: #666666">-</span>x<span style="color: #666666">*</span>t)<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>y)

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Fancy</span>:
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__init__</span>(<span style="color: #AA22FF">self</span>):
        <span style="color: #AA22FF; font-weight: bold">pass</span>

    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__call__</span>(<span style="color: #AA22FF">self</span>, x, y, t):
        <span style="color: #AA22FF; font-weight: bold">return</span> f(x, y, t)

f2 <span style="color: #666666">=</span> Fancy()
</pre></div>
<p>
<!-- !split -->

<h3>Admon blocks  <a name="___sec3"></a></h3>

<p>
Can use admons to simulate blocks:

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Key PDE:</b>
This box has title and math in normal 90 percent font:
$$ \frac{\partial u}{\partial t} = \nabla^2 u $$
</div>
<p>
<!-- !bpop -->
<div class="alert alert-block alert-notice alert-text-normal"><b></b>
Just some block with text and a conclusion that something is important.
This one pops up after the rest of the slide.
</div>
<!-- !epop -->

<p>
<div class="alert alert-block alert-warning alert-text-small"><b>Warning.</b>
Can use, e.g., a warning admon to have my own notes, preferably
inside preprocess/mako if statements to turn notes on and off.
This one is typeset in a small font and with the default
title (Warning) since no title is specified.
</div>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: slides1_deck.html *****************
<!DOCTYPE html>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="On the Technicalities of Scientific Writing Anno 2012: The Doconce Way">







<!-- deck.js: https://github.com/imakewebthings/deck.js -->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=1024, user-scalable=no">

<title>None</title>

<!-- Required stylesheet -->
<link rel="stylesheet" href="deck.js/core/deck.core.css">

<!-- Extension CSS files go here. Remove or add as needed.
deck.goto: Adds a shortcut key to jump to any slide number.
Hit g, type in the slide number, and hit enter.

deck.hash: Enables internal linking within slides, deep
linking to individual slides, and updates the address bar and
a permalink anchor with each slide change.

deck.menu: Adds a menu view, letting you see all slides in a grid.
Hit m to toggle to menu view, continue navigating your deck,
and hit m to return to normal view. Touch devices can double-tap
the deck to switch between views.

deck.navigation: Adds clickable left and right buttons for the
less keyboard inclined.

deck.status: Adds a page number indicator. (current/total).

deck.scale: Scales each slide to fit within the deck container
using CSS Transforms for those browsers that support them.

deck.pointer: Turn mouse into laser pointer (toggle with p).
(Requires https://github.com/mikeharris100/deck.pointer.js)
-->

<link rel="stylesheet" href="deck.js/extensions/menu/deck.menu.css">
<link rel="stylesheet" href="deck.js/extensions/navigation/deck.navigation.css">
<link rel="stylesheet" href="deck.js/extensions/scale/deck.scale.css">
<link rel="stylesheet" href="deck.js/extensions/pointer/deck.pointer.css">
<link rel="stylesheet" href="deck.js/extensions/notes/deck.notes.css">
<!--
<link rel="stylesheet" href="deck.js/extensions/goto/deck.goto.css">
<link rel="stylesheet" href="deck.js/extensions/hash/deck.hash.css">
<link rel="stylesheet" href="deck.js/extensions/status/deck.status.css">
-->

<!-- Style theme. More available in themes/style/ or create your own. -->
<link rel="stylesheet" href="deck.js/themes/style/web-2.0.css">

<!--
<link rel="stylesheet" href="deck.js/themes/style/neon.css">
<link rel="stylesheet" href="deck.js/themes/style/swiss.css">
<link rel="stylesheet" href="deck.js/themes/style/web-2.0.css">

git clone git://github.com/duijf/mnml.git
<link rel="stylesheet" href="deck.js/themes/style/mnml.css">

git://github.com/groovecoder/deckjs-theme-mozilla.git
<link rel="stylesheet" href="deck.js/themes/style/sandstone.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.aurora.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.dark.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.default.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.firefox.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.light.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.mdn.css">
<link rel="stylesheet" href="deck.js/themes/style/sandstone.nightly.css">

git://github.com/barraq/deck.ext.js.git
<link rel="stylesheet" href="deck.js/themes/style/beamer.css">
-->

<!-- Transition theme. More available in /themes/transition/ or create your own. -->
<link rel="stylesheet" href="deck.js/themes/transition/horizontal-slide.css">
<!--
<link rel="stylesheet" href="deck.js/themes/transition/fade.css">
<link rel="stylesheet" href="deck.js/themes/transition/vertical-slide.css">
<link rel="stylesheet" href="deck.js/themes/transition/horizontal-slide.css">
-->

<!-- Required Modernizr file -->
<script src="deck.js/modernizr.custom.js"></script>

<style type="text/css">
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-size: 60%; font-style: italic; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .slide .alert-text-small   { font-size: 80%;  }
    .slide .alert-text-large   { font-size: 130%; }
    .slide .alert-text-normal  { font-size: 90%;  }
    .slide .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:5px solid #bababa;
               -webkit-border-radius:14px; -moz-border-radius:14px;
             border-radius:14px
             background-position: 10px 10px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 30px; /* 55px; if icon */
     }
     .slide .alert-block {padding-top:14px; padding-bottom:14px}
     .slide .alert-block > p, .alert-block > ul {margin-bottom:0}
     /*.slide .alert li {margin-top: 1em}*/
     .deck .alert-block p+p {margin-top:5px}
     /*.slide .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .slide .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .slide .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .slide .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); } */

</style>



<!-- Styles for table layout of slides -->
<style type="text/css">
td.padding {
  padding-top:20px;
  padding-bottom:20px;
  padding-right:50px;
  padding-left:50px;
}
</style>

</head>

<body class="deck-container">





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    



<section class="slide">
<!-- ------------------- main content ---------------------- -->


<title>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</title>

<center><h1>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b style="font-weight: bold">Hans Petter Langtangen</b> [1, 2]
</center>


<p>
<!-- institution(s) -->

<center>[1] <b style="font-weight: bold">Simula Research Laboratory</b></center>
<center>[2] <b style="font-weight: bold">University of Oslo</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>

</section>


<section class="slide">

<h3>Figure and bullet list  <a name="___sec0"></a></h3>

<p>

<table border="0">
<tr>
<td class="padding">


<p>

<ul>
  <p><li class="slide"> Here is a <em>wave packet</em></li>
  <p><li class="slide"> It can move</li>
  <p><li class="slide"> But here it is just a figure</li>
</ul>
<p>


</td>
<td class="padding">
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=300></p></center>
</td>
</tr>
</table>


<p>
<!-- Test that it is okay to leave out width if there are only two columns -->

<p>


<p>

<p class="slide">

Here we have a paragraph to pop up in red.
And a line more

</p>


<p>

<!-- begin inline comment -->
<font color="red">[<b style="font-weight: bold">hpl 1</b>: <em>Here are some notes that can go to notes typesetting
in the slide environment.</em>]</font>
<!-- end inline comment -->


<p>
<div class="notes">
<!-- press "n" to activate -->

One can also have ordinary notes.
Over multiple lines.

</div>


<p>

</section>


<section class="slide">

<h3>Scientific writing needs to address many new media  <a name="___sec1"></a></h3>

<p>


<p>

<ul>
 <p><li class="slide"> Old days (1985-2005): mostly black-and-white documents aimed at printing</li>
 <p><li class="slide"> Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...</li>
 <p><li class="slide"> LaTeX writing may be very different from writing in other formats</li>
 <p><li class="slide"> Main problem:</li>

<ul>
    <p><li class="slide"> LaTeX provide all sorts of fancy packages, but</li>
    <p><li class="slide"> PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats</li>
</ul>
<p>

 <p><li class="slide"> Conclusion: We need more than LaTeX</li>
</ul>
<p>



<p>

</section>


<section class="slide">

<h3>Some math and computer code  <a name="___sec2"></a></h3>

<p>
<p>&nbsp;<br>
$$ f(x,y,t) = e^{-xt}\sin\pi y $$
<p>&nbsp;<br>

Python implementation:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #AA22FF; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">f</span>(x, y, t):
    <span style="color: #AA22FF; font-weight: bold">return</span> np<span style="color: #666666">.</span>exp(<span style="color: #666666">-</span>x<span style="color: #666666">*</span>t)<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>y)

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Fancy</span>:
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__init__</span>(<span style="color: #AA22FF">self</span>):
        <span style="color: #AA22FF; font-weight: bold">pass</span>

    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__call__</span>(<span style="color: #AA22FF">self</span>, x, y, t):
        <span style="color: #AA22FF; font-weight: bold">return</span> f(x, y, t)

f2 <span style="color: #666666">=</span> Fancy()
</code></pre></div>
<p>

</section>


<section class="slide">

<h3>Admon blocks  <a name="___sec3"></a></h3>

<p>
Can use admons to simulate blocks:

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b style="font-weight: bold">Key PDE:</b>
This box has title and math in normal 90 percent font:
<p>&nbsp;<br>
$$ \frac{\partial u}{\partial t} = \nabla^2 u $$
<p>&nbsp;<br>
</div>
<p>

<p class="slide">

<div class="slide alert alert-block alert-notice alert-text-normal"><b style="font-weight: bold"></b>
Just some block with text and a conclusion that something is important.
This one pops up after the rest of the slide.
</div>

</p>


<p>
<div class="alert alert-block alert-warning alert-text-small"><b style="font-weight: bold">Warning.</b>
Can use, e.g., a warning admon to have my own notes, preferably
inside preprocess/mako if statements to turn notes on and off.
This one is typeset in a small font and with the default
title (Warning) since no title is specified.
</div>

</section>



<!-- Begin extension snippets. Add or remove as needed. -->

<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>
-->

<!-- deck.goto snippet
<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>
-->

<!-- deck.hash snippet
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>
-->

<!-- End extension snippets. -->


<!-- Required JS files. -->
<script src="deck.js/jquery-1.7.2.min.js"></script>
<script src="deck.js/core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="deck.js/core/deck.core.js"></script>
<script src="deck.js/extensions/hash/deck.hash.js"></script>
<script src="deck.js/extensions/menu/deck.menu.js"></script>
<script src="deck.js/extensions/goto/deck.goto.js"></script>
<script src="deck.js/extensions/status/deck.status.js"></script>
<script src="deck.js/extensions/navigation/deck.navigation.js"></script>
<script src="deck.js/extensions/scale/deck.scale.js"></script>
<script src="deck.js/extensions/notes/deck.notes.js"></script>

<!-- From https://github.com/mikeharris100/deck.pointer.js -->
<script src="deck.js/extensions/pointer/deck.pointer.js"></script>

<!-- From https://github.com/stvnwrgs/presenterview -->
<script type="text/javascript" src="deck.js/extensions/presenterview/deck.presenterview.js"></script>

<!-- From https://github.com/nemec/deck.annotate.js
<script type="text/javascript" src="deck.js/extensions/deck.annotate.js/deck.annotate.js"></script>
-->


<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
	$(function() {
		$.deck('.slide');
	});
</script>


</body>
</html>
deck.js:
boilerplate.html
core
extensions
GPL-license.txt
introduction
jquery-1.7.2.min.js
MIT-license.txt
modernizr.custom.js
README.md
test
themes

deck.js/core:
deck.core.css
deck.core.js
deck.core.scss

deck.js/extensions:
codemirror
deck.annotate.js
goto
hash
menu
navigation
notes
pointer
presenterview
scale
status

deck.js/extensions/codemirror:
codemirror.js
CONTRIBUTORS.txt
deck.codemirror.css
deck.codemirror.js
deck.codemirror.scss
introduction
MIT-LICENSE.txt
mode
README.md
themes
VERSION.txt

deck.js/extensions/codemirror/introduction:
index.html
introduction.css
introduction.js
introduction.scss
modernizr.custom.js

deck.js/extensions/codemirror/mode:
clike
clojure
coffeescript
css
diff
haskell
htmlmixed
javascript
lua
php
plsql
python
r
rst
ruby
scheme
smalltalk
sparql
stex
velocity
xml
xmlpure
yaml

deck.js/extensions/codemirror/mode/clike:
clike.js
index.html

deck.js/extensions/codemirror/mode/clojure:
clojure.js
index.html

deck.js/extensions/codemirror/mode/coffeescript:
coffeescript.js
index.html
LICENSE

deck.js/extensions/codemirror/mode/css:
css.js
index.html

deck.js/extensions/codemirror/mode/diff:
diff.css
diff.js
index.html

deck.js/extensions/codemirror/mode/haskell:
haskell.js
index.html

deck.js/extensions/codemirror/mode/htmlmixed:
htmlmixed.js
index.html

deck.js/extensions/codemirror/mode/javascript:
index.html
javascript.js

deck.js/extensions/codemirror/mode/lua:
index.html
lua.js

deck.js/extensions/codemirror/mode/php:
index.html
php.js

deck.js/extensions/codemirror/mode/plsql:
index.html
plsql.js

deck.js/extensions/codemirror/mode/python:
index.html
LICENSE.txt
python.js

deck.js/extensions/codemirror/mode/r:
index.html
LICENSE
r.js

deck.js/extensions/codemirror/mode/rst:
index.html
rst.css
rst.js

deck.js/extensions/codemirror/mode/ruby:
index.html
LICENSE
ruby.js

deck.js/extensions/codemirror/mode/scheme:
index.html
scheme.js

deck.js/extensions/codemirror/mode/smalltalk:
index.html
smalltalk.js

deck.js/extensions/codemirror/mode/sparql:
index.html
sparql.js

deck.js/extensions/codemirror/mode/stex:
index.html
stex.js

deck.js/extensions/codemirror/mode/velocity:
index.html
velocity.js

deck.js/extensions/codemirror/mode/xml:
index.html
xml.js

deck.js/extensions/codemirror/mode/xmlpure:
index.html
xmlpure.js

deck.js/extensions/codemirror/mode/yaml:
index.html
yaml.js

deck.js/extensions/codemirror/themes:
cobalt.css
default.css
elegant.css
lesser-dark.css
neat.css
night.css

deck.js/extensions/deck.annotate.js:
deck.annotate.css
deck.annotate.js
example.png
README.md

deck.js/extensions/goto:
deck.goto.css
deck.goto.html
deck.goto.js
deck.goto.scss

deck.js/extensions/hash:
deck.hash.css
deck.hash.html
deck.hash.js
deck.hash.scss

deck.js/extensions/menu:
deck.menu.css
deck.menu.js
deck.menu.scss

deck.js/extensions/navigation:
deck.navigation.css
deck.navigation.html
deck.navigation.js
deck.navigation.scss

deck.js/extensions/notes:
deck.notes.css
deck.notes.js
README.md

deck.js/extensions/pointer:
deck.pointer.css
deck.pointer.js

deck.js/extensions/presenterview:
deck.presenterview.css
deck.presenterview.html
deck.presenterview.js
iframe.html
presenterwindow.js
README.md
TODO

deck.js/extensions/scale:
deck.scale.css
deck.scale.js
deck.scale.scss

deck.js/extensions/status:
deck.status.css
deck.status.html
deck.status.js
deck.status.scss

deck.js/introduction:
index.html

deck.js/test:
fixtures
index.html
lib
settings.js
spec.core.js
spec.goto.js
spec.hash.js
spec.menu.js
spec.navigation.js
spec.scale.js
spec.status.js

deck.js/test/fixtures:
complex.html
empty.html
iframes.html
iframe_simple.html
nesteds.html
standard.html

deck.js/test/lib:
jasmine.css
jasmine-html.js
jasmine-jquery.js
jasmine.js

deck.js/themes:
style
transition

deck.js/themes/style:
beamer.css
beamer.scss
mnml.css
neon.css
neon.scss
sandstone.aurora.css
sandstone.css
sandstone.dark.css
sandstone.default.css
sandstone.firefox.css
sandstone.light.css
sandstone.mdn.css
sandstone.nightly.css
sandstone.scss
swiss.css
swiss.scss
web-2.0.css
web-2.0.scss

deck.js/themes/transition:
fade.css
fade.scss
horizontal-slide.css
horizontal-slide.scss
vertical-slide.css
vertical-slide.scss

************** File: slides1.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}


% #ifdef TODONOTES
\usepackage{ifthen,xkeyval,tikz,calc,graphicx}
\usepackage[shadow]{todonotes}
\newcommand{\shortinlinecomment}[3]{%
\todo[size=\normalsize,fancyline,color=orange!40,caption={#3}]{%
 \begin{spacing}{0.75}{\bf #1}: #2\end{spacing}}}
\newcommand{\longinlinecomment}[3]{%
\todo[inline,color=orange!40,caption={#3}]{{\bf #1}: #2}}
% #else
\newcommand{\shortinlinecomment}[3]{{\bf #1}: \emph{#2}}
\newcommand{\longinlinecomment}[3]{{\bf #1}: \emph{#2}}
% #endif

% #ifdef LINENUMBERS
\usepackage[mathlines]{lineno}  % show line numbers
\linenumbers
% #endif

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{On the Technicalities of Scientific Writing Anno 2012: The Doconce Way}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
On the Technicalities of Scientific Writing Anno 2012: The Doconce Way
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{On the Technicalities of Scientific Writing Anno 2012: The Doconce Way}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{On the Technicalities of Scientific Writing Anno 2012: The Doconce Way}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
On the Technicalities of Scientific Writing Anno 2012: The Doconce Way
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Simula Research Laboratory and University of Oslo.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$University of Oslo} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{Hans Petter Langtangen}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Simula Research Laboratory and University of Oslo}

% #elif LATEX_HEADING == "beamer"
\author{Hans Petter Langtangen\inst{1,2}}
\institute{Simula Research Laboratory\inst{1}
\and
University of Oslo\inst{2}}
% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Simula Research Laboratory}}
\centerline{{\small ${}^2$University of Oslo}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


% !split

\subsection{Figure and bullet list}

% !bslidecell 00  0.35
% !bpop

\begin{itemize}
  \item Here is a \emph{wave packet}

  \item It can move

  \item But here it is just a figure
\end{itemize}

\noindent
% !epop
% !eslidecell

% Test that it is okay to leave out width if there are only two columns

% !bslidecell 01

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}

% !eslidecell

% !bpop highlight-red
Here we have a paragraph to pop up in red.
And a line more
% !epop

\shortinlinecomment{hpl 1}{ Here are some notes that can go to notes typesetting
in the slide environment. }{ Here are some notes }

% !bnotes
One can also have ordinary notes.
Over multiple lines.
% !enotes

% !split
\subsection{Scientific writing needs to address many new media}

% !bpop

\begin{itemize}
 \item Old days (1985-2005): mostly black-and-white documents aimed at printing

 \item Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...

 \item {\LaTeX} writing may be very different from writing in other formats

 \item Main problem:
\begin{itemize}

    \item {\LaTeX} provide all sorts of fancy packages, but

    \item PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats

\end{itemize}

\noindent
 \item Conclusion: We need more than {\LaTeX}
\end{itemize}

\noindent
% !epop

% !split
\subsection{Some math and computer code}

\[ f(x,y,t) = e^{-xt}\sin\pi y \]
Python implementation:

\bpycod
import numpy as np

def f(x, y, t):
    return np.exp(-x*t)*np.sin(np.pi*y)

class Fancy:
    def __init__(self):
        pass

    def __call__(self, x, y, t):
        return f(x, y, t)

f2 = Fancy()
\epycod

% !split
\subsection{Admon blocks}

Can use admons to simulate blocks:


\begin{graybox1admon}[Key PDE:]
This box has title and math in normal 90 percent font:
\[ \frac{\partial u}{\partial t} = \nabla^2 u \]
\end{graybox1admon}

% !bpop

\begin{graybox1admon}[]
Just some block with text and a conclusion that something is important.
This one pops up after the rest of the slide.
\end{graybox1admon}

% !epop


\begin{graybox1admon}[Warning.]
\vspace{0.5mm}\par\noindent
{\footnotesize Can use, e.g., a warning admon to have my own notes, preferably
inside preprocess/mako if statements to turn notes on and off.
This one is typeset in a small font and with the default
title (Warning) since no title is specified. \par}
\end{graybox1admon}

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: slides1.tex *****************

% LaTeX Beamer file automatically generated from Doconce
% http://code.google.com/p/doconce

%-------------------- begin preamble ----------------------

\documentclass{beamer}

\usetheme{default}
\usecolortheme{default}

% turn off the almost invisible, yet disturbing, navigation symbols:
\setbeamertemplate{navigation symbols}{}

% Examples on customization:
%\usecolortheme[named=RawSienna]{structure}
%\usetheme[height=7mm]{Rochester}
%\setbeamerfont{frametitle}{family=\rmfamily,shape=\itshape}
%\setbeamertemplate{items}[ball]
%\setbeamertemplate{blocks}[rounded][shadow=true]
%\useoutertheme{infolines}
%
%\usefonttheme{}
%\useinntertheme{}
%
%\setbeameroption{show notes}
%\setbeameroption{show notes on second screen=right}

% fine for B/W printing:
%\usecolortheme{seahorse}

\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage{graphicx}
\usepackage{epsfig}
\usepackage{fancyvrb,relsize}
\usepackage{amsmath,amssymb,bm}
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage{colortbl}
\usepackage[english]{babel}
\usepackage{tikz}
\usepackage{framed,anslistings}
% Use some nice templates
\beamertemplatetransparentcovereddynamic

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each section:
\AtBeginSection[]
{
    \begin{frame}<beamer>[plain]
    \frametitle{}
    \tableofcontents[currentsection]
    \end{frame}
}

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each section:
\AtBeginSection[]
{
    \begin{frame}<beamer>[plain]
    \frametitle{}
    \tableofcontents[currentsection]
    \end{frame}
}

% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command:

%\beamerdefaultoverlayspecification{<+->}

\newcommand{\shortinlinecomment}[3]{\note{\textbf{#1}: #2}}
\newcommand{\longinlinecomment}[3]{\shortinlinecomment{#1}{#2}{#3}}

\newenvironment{notice_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{paragraphadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{graybox1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{graybox2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newcommand{\grayboxhrules}[1]{\begin{block}{}#1\end{block}}



% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}


% ------------------- main content ----------------------



% ----------------- title -------------------------
\title{On the Technicalities of Scientific Writing Anno 2012: The Doconce Way}

% ----------------- author(s) -------------------------
\author{Hans Petter Langtangen\inst{1,2}}
\institute{Simula Research Laboratory\inst{1}
\and
University of Oslo\inst{2}}
% ----------------- end author(s) -------------------------


\date{Jan 32, 2100
% <titlepage figure>
}

\begin{frame}[plain,fragile]
\titlepage
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Figure and bullet list}

\begin{columns}
\column{0.35\textwidth}

\pause
\begin{block}{}
\begin{itemize}
  \item Here is a \emph{wave packet}

  \item It can move

  \item But here it is just a figure
\end{itemize}

\noindent
\end{block}


\column{0.65\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
\end{center}


\end{columns}



% Test that it is okay to leave out width if there are only two columns




\pause
\begin{block}{}
Here we have a paragraph to pop up in red.
And a line more
\end{block}


\shortinlinecomment{hpl 1}{ Here are some notes that can go to notes typesetting
in the slide environment. }{ Here are some notes }

\note{
One can also have ordinary notes.
Over multiple lines.
}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Scientific writing needs to address many new media}

\begin{itemize}
 \item<2-> Old days (1985-2005): mostly black-and-white documents aimed at printing

 \item<3-> Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...

 \item<4-> {\LaTeX} writing may be very different from writing in other formats

 \item<5-> Main problem:
\begin{itemize}

    \item<6-> {\LaTeX} provide all sorts of fancy packages, but

    \item<7-> PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats

\end{itemize}

\noindent
 \item<8-> Conclusion: We need more than {\LaTeX}
\end{itemize}

\noindent
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Some math and computer code}

\[ f(x,y,t) = e^{-xt}\sin\pi y \]
Python implementation:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
import numpy as np

def f(x, y, t):
    return np.exp(-x*t)*np.sin(np.pi*y)

class Fancy:
    def __init__(self):
        pass

    def __call__(self, x, y, t):
        return f(x, y, t)

f2 = Fancy()
\end{Verbatim}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Admon blocks}

Can use admons to simulate blocks:


\begin{graybox1admon}[Key PDE:]
This box has title and math in normal 90 percent font:
\[ \frac{\partial u}{\partial t} = \nabla^2 u \]
\end{graybox1admon}


\pause
\begin{graybox1admon}[]
Just some block with text and a conclusion that something is important.
This one pops up after the rest of the slide.
\end{graybox1admon}



\begin{graybox1admon}[Warning.]
\vspace{0.5mm}\par\noindent
{\footnotesize Can use, e.g., a warning admon to have my own notes, preferably
inside preprocess/mako if statements to turn notes on and off.
This one is typeset in a small font and with the default
title (Warning) since no title is specified. \par}
\end{graybox1admon}
\end{frame}

\end{document}

************** File: slides2.do.txt *****************
TITLE: Test slide features
AUTHOR: Core Dump at Cyber Space Ltd
DATE: Today

FIGURE: [../doc/slides/fig/doconce1b, width=400 frac=0.5]

!split
======= Scientific writing for the future needs to address many new media =======

!bslidecell 00 0.4
FIGURE: [../doc/slides/fig/ipad, width=400 frac=0.8]

FIGURE: [../doc/slides/fig/iphones, width=100 frac=0.3]

#FIGURE: [../doc/slides/fig/mbair, width=400]

!eslidecell

!bslidecell 01 0.6
FIGURE: [../doc/slides/fig/imac, width=350 frac=0.7]
!eslidecell

!split
======= The book will probably survive =======

FIGURE: [../doc/slides/fig/oldbooks, width=800]

!split
======= The classical report will survive =======

!bslidecell 00
FIGURE: [../doc/slides/fig/latex_thesis, width=400 frac=1.2]
!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/latex_paper1, width=400 frac=1.2]
!eslidecell

!split
======= Scope =======

#  * Scientific writing = lecture notes, slides, reports, thesis, books,  ...
#  * (Journal papers typeset by journals are out of scope)

!bpop
  * Scope: documents with color{red}{much} *math* and *computer code*
  * Key question: What tools should I use for writing?
  * Default answer: LaTeX
  * Alternative: MS Word w/math
  * Recent popular alternative tools: HTML w/MathJax,
    Sphinx, Markdown, MediaWiki, IPython notebook
!epop

!bslidecell 00 0.25
FIGURE: [../doc/slides/fig/LaTeX_logo.jpg, width=120 frac=0.3]
!eslidecell

!bslidecell 01 0.25
FIGURE: [../doc/slides/fig/MS_Word_logo.jpg, width=80 frac=0.2]
!eslidecell

!bslidecell 02 0.5
FIGURE: [../doc/slides/fig/sphinx_logo.png, width=200 frac=0.4]
!eslidecell

!bslidecell 10 0.25
FIGURE: [../doc/slides/fig/markdown_logo.jpg, width=80 frac=0.2]
!eslidecell

!bslidecell 11 0.25
FIGURE: [../doc/slides/fig/MediaWiki_logo.jpg, width=80 frac=0.2]
!eslidecell

!bslidecell 12 0.5
FIGURE: [../doc/slides/fig/IPython_logo.png, width=300 frac=0.6]
!eslidecell


!split
======= Scientific writing for the future needs to address many new media =======

# Insert links here to reports

!bslidecell 00
Old days (1985-2005): LaTeX for BW paper output, but now

   o BW books
   o Colorful PDF books (printed and screen)
   o Designed web pages
   o Wikis
   o Bloggs
   o Next new fancy format (iBook w/LaTeX?)
!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/jungle_with_mess.jpg, width=500]
!eslidecell

!split

======= Fundamental question =======

When I write some scientific material,

 * a LaTeX document,
 * a blogg (HTML),
 * some web pages (HTML),
 * a Sphinx document,
 * some Markdown files,

and later want to collect the pieces into a larger document, maybe
some book, or one big web document, is that at all feasible?

!bpop highlight-red
Probably not, but I have a solution :-)
!epop

!split

======= LaTeX is very rich; other tools support only some elements =======

 * LaTeX inline math: works with all (LaTeX, MathJax, Sphinx, Markdown, MediaWiki)
 * LaTeX equation math:
    * _LaTeX_: `equation*`, `equation`, `align*`, `align` +
      `eqnarray`, `split`, `alignat`, ... (numerous!)
    * _MathJax_: `equation*`, `equation`, `align*`, `align`
    * _MediaWiki_: `equation*`, `equation`, `align*`, `align`
    * _Sphinx_: `equation*`, `equation`, `align*`
    * _Markdown_: `equation*`, `equation`, `eqnarray*`, `align*` (but no labels)

!split
======= LaTeX is very rich; other tools support only some elements =======

!bpop
 * Figures: all
 * Subfigures: LaTeX (`subfigure`)
 * Movies: LaTeX (can run separately), just raw embedded HTML in others
 * Floating computer code: LaTeX
 * Fixed computer code: all
 * Floating tables: LaTeX; inline tables: all
 * Algorithms: LaTeX
 * Margin notes: LaTeX
 * Page references: LaTeX
 * Footnotes: LaTeX, Sphinx, reStructuredText, MediaWiki
 * Bibliography: LaTeX, Sphinx, reStructuredText, MediaWiki
 * Hyperlinks: all (but not on paper!)
!epop

!bpop
Conclusion: Highly non-trivial to translate a LaTeX document into something
based on HTML and vice versa.
!epop


!split
======= Doconce demo =======

URL: "http://hplgit.github.com/teamods/writing_reports/"

 * LaTeX-based PDF "for screen": "http://hplgit.github.com/teamods/writing_reports/_static/report.pdf", "for printing": "http://hplgit.github.com/teamods/writing_reports/_static/report_4printing.pdf", "for phone": "http://hplgit.github.com/teamods/writing_reports/_static/report_4phone.pdf"
 * "Plain HTML": "http://hplgit.github.com/teamods/writing_reports/_static/report_do.html" or with a "template": "http://hplgit.github.com/teamods/writing_reports/_static/report_vagrant.html" or "another template": "http://hplgit.github.com/teamods/writing_reports/_static/report_github_minimal.html" or "solarized": "http://hplgit.github.com/teamods/writing_reports/_static/report_solarized.html"
 * Sphinx: "agni": "http://hplgit.github.com/teamods/writing_reports/_static/sphinx-agni/index.html", "pyramid": "http://hplgit.github.com/teamods/writing_reports/_static/sphinx-pyramid/report.html", "classy": "http://hplgit.github.com/teamods/writing_reports/_static/sphinx-classy/report.html", "fenics": "http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html", "redcloud": "http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html"
 * HTML for "Google": "http://doconce-report-demo.blogspot.no/" or "Wordpress": "http://doconcereportdemo.wordpress.com/" blogs
 * "MediaWiki": "http://doconcedemo.shoutwiki.com/wiki/Doconce_demo_page" (Wikipedia, Wikibooks, etc)
 * Doconce "source code": "http://hplgit.github.com/teamods/writing_reports/_static/report.do.txt.html" and "tutorial": "http://code.google.com/p/doconce/wiki/Tutorial"


!split

# #if FORMAT in ("latex", "pdflatex")
# latex interprets 9 = as chapter and then needs book style...
======= A tour of Doconce =======
# #else
========= A tour of Doconce =========
# #endif

!split
======= Doconce: title, authors, date, toc =======

!bc
TITLE: Some Title
AUTHOR: name1 at institution1, with more info, and institution2
AUTHOR: name2 email:name2@web.com at institution
DATE: today

# A table of contents is optional:
TOC: on
!ec

!bnotice
Title and authors must have all information *on a single line*!
!enotice

!split
======= Doconce: abstract =======

!bc
__Abstract.__
Here goes the abstract...
!ec

Or:
!bc
__Summary.__
Here goes the summary...
!ec


!split
======= Doconce: section headings =======

Headings are surrounded by `=` signs:
!bc
========= This is an H1/chapter heading =========

======= This is an H2/section heading =======

===== This is an H3/subsection heading =====

=== This is an H4/paragraph heading ===

__This is a paragraph heading.__
!ec

Result:

========= This is an H1/chapter heading =========

======= This is an H2/section heading =======

===== This is an H3/subsection heading =====

=== This is an H4/paragraph heading ===

__This is a paragraph heading.__


!split
======= Doconce: markup and lists =======

!bc
 * Bullet list items start with `*`
   and may span several lines
 * *Emphasized words* are possible
 * _Boldface words_ are also possible
 * color{red}{colored words} too
 * `inline verbatim code` is featured
   o and sublists with enumerated items starting with `o`
   o items are just indented as you would do in email
!ec

This gets rendered as

 * Bullet lists start with `*`
   and may span several lines
 * *Emphasized words* are possible
 * _Boldface words_ are also possible
 * color{red}{colored words} too
 * `inline verbatim code` is featured
   o and sublists with enumerated items starting with `o`
   o items are just indented as you would do in email

!split
======= Doconce: labels, references, index items =======

!bc
# Insert index items in the source
idx{key word1} idx{key word2}

# Label
===== Some section =====
label{this:section}

# Make reference
As we saw in Section ref{this:section}, references, index
items and labels follow a syntax similar to LaTeX
but without backslashes.

# Make reference to equations
See (ref{eq1})-(ref{myeq}).

# Make hyperlink
"some link text": "http://code.google.com/p/doconce/"

# Hyperlink with complete URL as link text
URL: "http://code.google.com/p/doconce/"
!ec

!split
======= Doconce: figures and movies =======

!bnotice
Figure with HTML and LaTeX info, and caption, *all on one line*:
!enotice

!bc
FIGURE: [figdir/myfig, width=300 frac=1.2] My caption. label{fig1}

# This figure will be 300 pixels wide in HTML and span 1.2 times
# the linewidth in LaTeX.
!ec

Movies are also supported:

!bc
MOVIE: [http://www.youtube.com/embed/P8VcZzgdfSc, width=420 height=315]
!ec
and rendered as

MOVIE: [http://www.youtube.com/embed/P8VcZzgdfSc, width=420 height=315]

!split
======= Doconce: math =======

Inline math as in LaTeX:

!bc
...where $a=\int_{\Omega}fdx$ is an integral.
!ec
gets rendered as ...where $a=\int_{\Omega}fdx$ is an integral.


An equation environment is surrounded by `!bt` and `!et` tags,
the rest is plain LaTeX:

!bc
|bt
\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
label{b:eq}
\end{align}
|et
!ec
which is rendered as

!bt
\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
label{b:eq}
\end{align}
!et


!split
======= Doconce: displaying code =======

Code is enclosed in `!bc` and `!ec` tags:

!bc
|bc pycod
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
|ec
!ec
This gets rendered as

!bc pycod
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
!ec

!bnotice Language-dependent typesetting of code:
The `!bc` command can be followed by a specification of the computer
language: `pycod` for Python code snippet, `pypro` for complete Python
program, `fcod` for Fortran snippet, `fpro` for Fortran program, and so
forth (`c` for C, `cpp` for C++, `sh` for Unix shells, `m` for Matlab).
!enotice


!split
======= Doconce: displaying interactive demo code =======
label{slide:pot}

With `!bc pyoptpro` or a file `*.pyopt`, the code applies the
"Online Python Tutor": "http://pythontutor.com" for displaying
program flow and state of variables:

@@@CODE ../doc/slides/src/dc_mod.pyopt




!split
======= Doconce: exercises =======

Doconce offers a special format for *exercises*, *problems*, *projects*,
and *examples*:

!bc
===== Problem: Flip a Coin =====
label{demo:ex:1}

files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$ times.

!bhint
Use `r = random.random()` and define head as `r <= 0.5`.
!ehint
!esubex

!bsubex
Compute the probability of getting heads.

!bans
A short answer: 0.5.
!eans

!bsol
A full solution to this subexercise can go here.
!esol
!esubex

!bsubex
Make another program that computes the probability
of getting at least three heads out of 5 throws.
!esubex
!ec

Solutions/answers can easily be left out of the document.

!split
======= Doconce: exercises =======

Last page gets rendered as follows:

===== Problem: Flip a Coin =====
label{demo:ex:1}
files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$ times.

!bhint
Use `r = random.random()` and define head as `r <= 0.5`.
!ehint
!esubex

!bsubex
Compute the probability of getting heads.

!bans
A short answer: 0.5.
!eans

!bsol
A full solution to this subexercise can go here.
!esol
!esubex

!bsubex
Make another program that computes the probability
of getting at least three heads out of 5 throws.
!esubex


!split
======= Doconce: example on slide code =======

!bc
!split
======= Headline =======

 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes

FIGURE: [../doc/slides/fig/teacher1, width=100]

Key equation:

|bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
|et

And maybe a final comment?

!split
======= Next slide... =======
!ec

!split
======= Doconce: example on slide code =======

Last page gets rendered to

======= Headline =======

 * Key point 1
 * Key point 2

FIGURE: [../doc/slides/fig/teacher1, width=100 frac=0.4]

Key equation:

!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et

And maybe a final comment?

!split
======= Doconce: example on slide code with cells =======

One can introduce a table-like layout with MxN cells and
put slide elements in various cell. A cell with position
MN is surrounded by `!bslidecell MN` and `!eslidecell`
tags. Below is an example with a bullet list to the left and
a figure to the right (two cells, numbered 00 and 01).

!bc
!split
======= Headline =======

!bslidecell 00
!bpop
 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
!epop

!bpop
|bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
|et
!epop

!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/broken_pen_and_paper, width=400, frac=0.8]
!eslidecell

!split
======= Next slide... =======
!ec

!split
======= Doconce: example on slide code =======

Last page gets rendered to

======= Headline =======

!bslidecell 00
!bpop
 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
!epop

!bpop
!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et
!epop

!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/broken_pen_and_paper, width=400]
!eslidecell


************** File: slides2_reveal.html *****************
<!DOCTYPE html>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Test slide features">
<meta name="keywords" content="key word1,key word2">







<!-- reveal.js: http://lab.hakim.se/reveal-js/ -->

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<!--
<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/reveal.min.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/beigesmall.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/sky.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/darkgray.css" id="theme">
-->

<script>
document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
</script>

<style type="text/css">
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-size: 60%; font-style: italic; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .reveal .alert-text-small   { font-size: 80%;  }
    .reveal .alert-text-large   { font-size: 130%; }
    .reveal .alert-text-normal  { font-size: 90%;  }
    .reveal .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:5px solid #bababa;
             -webkit-border-radius: 14px; -moz-border-radius: 14px;
             border-radius:14px
             background-position: 10px 10px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 30px; /* 55px; if icon */
     }
     .reveal .alert-block {padding-top:14px; padding-bottom:14px}
     .reveal .alert-block > p, .alert-block > ul {margin-bottom:0}
     /*.reveal .alert li {margin-top: 1em}*/
     .reveal .alert-block p+p {margin-top:5px}
     /*.reveal .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .reveal .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .reveal .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .reveal .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); } */

</style>



<!-- Styles for table layout of slides -->
<style type="text/css">
td.padding {
  padding-top:20px;
  padding-bottom:20px;
  padding-right:50px;
  padding-left:50px;
}
</style>

</head>

<body>
<div class="reveal">

<!-- Any section element inside the <div class="slides"> container
     is displayed as a slide -->

<div class="slides">





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    



<section>
<!-- ------------------- main content ---------------------- -->


<title>Test slide features</title>

<center><h1>Test slide features</h1></center>  <!-- document title -->

<p>
<!-- author(s): Core Dump -->

<center>
<b>Core Dump</b> 
</center>


<p>
<!-- institution -->

<center><b>Cyber Space Ltd</b></center>
<p>&nbsp;<br>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
<center><p><img src="../doc/slides/fig/doconce1b.png" align="bottom" width=400></p></center>

<p>

</section>


<section>

<h2>Scientific writing for the future needs to address many new media  <a name="___sec0"></a></h2>

<p>

<table border="0">
<tr>
<td class="padding">
<center><p><img src="../doc/slides/fig/ipad.png" align="bottom" width=400></p></center>

<p>
<center><p><img src="../doc/slides/fig/iphones.jpg" align="bottom" width=100></p></center>

<p>
<!-- FIGURE: [../doc/slides/fig/mbair, width=400] -->

<p>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/imac.png" align="bottom" width=350></p></center>
</td>
</tr>
</table>


<p>


<p>

</section>


<section>

<h2>The book will probably survive  <a name="___sec1"></a></h2>

<p>
<center><p><img src="../doc/slides/fig/oldbooks.jpg" align="bottom" width=800></p></center>

<p>

</section>


<section>

<h2>The classical report will survive  <a name="___sec2"></a></h2>

<p>

<table border="0">
<tr>
<td class="padding">
<center><p><img src="../doc/slides/fig/latex_thesis.jpg" align="bottom" width=400></p></center>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/latex_paper1.png" align="bottom" width=400></p></center>
</td>
</tr>
</table>


<p>


<p>

</section>


<section>

<h2>Scope  <a name="___sec3"></a></h2>

<p>
<!-- * Scientific writing = lecture notes, slides, reports, thesis, books,  ... -->
<!-- * (Journal papers typeset by journals are out of scope) -->

<p>


<ul>
  <p><li class="fragment"> Scope: documents with <font color="red">much</font> <em>math</em> and <em>computer code</em></li>
  <p><li class="fragment"> Key question: What tools should I use for writing?</li>
  <p><li class="fragment"> Default answer: LaTeX</li>
  <p><li class="fragment"> Alternative: MS Word w/math</li>
  <p><li class="fragment"> Recent popular alternative tools: HTML w/MathJax,
    Sphinx, Markdown, MediaWiki, IPython notebook</li>
</ul>
<p>



<p>

<table border="0">
<tr>
<td class="padding">
<center><p><img src="../doc/slides/fig/LaTeX_logo.jpg" align="bottom" width=120></p></center>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/MS_Word_logo.jpg" align="bottom" width=80></p></center>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/sphinx_logo.png" align="bottom" width=200></p></center>
</td>
</tr>
<tr>
<td class="padding">
<center><p><img src="../doc/slides/fig/markdown_logo.jpg" align="bottom" width=80></p></center>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/MediaWiki_logo.jpg" align="bottom" width=80></p></center>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/IPython_logo.png" align="bottom" width=300></p></center>
</td>
</tr>
</table>


<p>


<p>


<p>


<p>


<p>


<p>

</section>


<section>

<h2>Scientific writing for the future needs to address many new media  <a name="___sec4"></a></h2>

<p>
<!-- Insert links here to reports -->

<p>

<table border="0">
<tr>
<td class="padding">
Old days (1985-2005): LaTeX for BW paper output, but now

<p>

<ol>
  <p><li> BW books</li>
  <p><li> Colorful PDF books (printed and screen)</li>
  <p><li> Designed web pages</li>
  <p><li> Wikis</li>
  <p><li> Bloggs</li>
  <p><li> Next new fancy format (iBook w/LaTeX?)</li>
</ol>
<p>

</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/jungle_with_mess.jpg" align="bottom" width=500></p></center>
</td>
</tr>
</table>


<p>


<p>

</section>


<section>

<h2>Fundamental question  <a name="___sec5"></a></h2>

<p>
When I write some scientific material,

<p>

<ul>
 <p><li> a LaTeX document,</li>
 <p><li> a blogg (HTML),</li>
 <p><li> some web pages (HTML),</li>
 <p><li> a Sphinx document,</li>
 <p><li> some Markdown files,</li>
</ul>
<p>

and later want to collect the pieces into a larger document, maybe
some book, or one big web document, is that at all feasible?

<p>

<p class="fragment">

<span class="fragment highlight-red">

Probably not, but I have a solution :-)

</span>

</p>


<p>

</section>


<section>

<h2>LaTeX is very rich; other tools support only some elements  <a name="___sec6"></a></h2>

<p>

<ul>
 <p><li> LaTeX inline math: works with all (LaTeX, MathJax, Sphinx, Markdown, MediaWiki)</li>
 <p><li> LaTeX equation math:</li>

<ul>
    <p><li> <b>LaTeX</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code>, <code>align</code> +
      <code>eqnarray</code>, <code>split</code>, <code>alignat</code>, ... (numerous!)</li>
    <p><li> <b>MathJax</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code>, <code>align</code></li>
    <p><li> <b>MediaWiki</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code>, <code>align</code></li>
    <p><li> <b>Sphinx</b>: <code>equation*</code>, <code>equation</code>, <code>align*</code></li>
    <p><li> <b>Markdown</b>: <code>equation*</code>, <code>equation</code>, <code>eqnarray*</code>, <code>align*</code> (but no labels)</li>
</ul>
<p>

</ul>
<p>


</section>


<section>

<h2>LaTeX is very rich; other tools support only some elements  <a name="___sec7"></a></h2>

<p>


<ul>
 <p><li class="fragment"> Figures: all</li>
 <p><li class="fragment"> Subfigures: LaTeX (<code>subfigure</code>)</li>
 <p><li class="fragment"> Movies: LaTeX (can run separately), just raw embedded HTML in others</li>
 <p><li class="fragment"> Floating computer code: LaTeX</li>
 <p><li class="fragment"> Fixed computer code: all</li>
 <p><li class="fragment"> Floating tables: LaTeX; inline tables: all</li>
 <p><li class="fragment"> Algorithms: LaTeX</li>
 <p><li class="fragment"> Margin notes: LaTeX</li>
 <p><li class="fragment"> Page references: LaTeX</li>
 <p><li class="fragment"> Footnotes: LaTeX, Sphinx, reStructuredText, MediaWiki</li>
 <p><li class="fragment"> Bibliography: LaTeX, Sphinx, reStructuredText, MediaWiki</li>
 <p><li class="fragment"> Hyperlinks: all (but not on paper!)</li>
</ul>
<p>



<p>

<p class="fragment">

Conclusion: Highly non-trivial to translate a LaTeX document into something
based on HTML and vice versa.

</p>


<p>

</section>


<section>

<h2>Doconce demo  <a name="___sec8"></a></h2>

<p>
<a href="http://hplgit.github.com/teamods/writing_reports/"><tt>http://hplgit.github.com/teamods/writing_reports/</tt></a>

<p>

<ul>
 <p><li> LaTeX-based PDF <a href="http://hplgit.github.com/teamods/writing_reports/_static/report.pdf">for screen</a>, <a href="http://hplgit.github.com/teamods/writing_reports/_static/report_4printing.pdf">for printing</a>, <a href="http://hplgit.github.com/teamods/writing_reports/_static/report_4phone.pdf">for phone</a></li>
 <p><li> <a href="http://hplgit.github.com/teamods/writing_reports/_static/report_do.html">Plain HTML</a> or with a <a href="http://hplgit.github.com/teamods/writing_reports/_static/report_vagrant.html">template</a> or <a href="http://hplgit.github.com/teamods/writing_reports/_static/report_github_minimal.html">another template</a> or <a href="http://hplgit.github.com/teamods/writing_reports/_static/report_solarized.html">solarized</a></li>
 <p><li> Sphinx: <a href="http://hplgit.github.com/teamods/writing_reports/_static/sphinx-agni/index.html">agni</a>, <a href="http://hplgit.github.com/teamods/writing_reports/_static/sphinx-pyramid/report.html">pyramid</a>, <a href="http://hplgit.github.com/teamods/writing_reports/_static/sphinx-classy/report.html">classy</a>, <a href="http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html">fenics</a>, <a href="http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html">redcloud</a></li>
 <p><li> HTML for <a href="http://doconce-report-demo.blogspot.no/">Google</a> or <a href="http://doconcereportdemo.wordpress.com/">Wordpress</a> blogs</li>
 <p><li> <a href="http://doconcedemo.shoutwiki.com/wiki/Doconce_demo_page">MediaWiki</a> (Wikipedia, Wikibooks, etc)</li>
 <p><li> Doconce <a href="http://hplgit.github.com/teamods/writing_reports/_static/report.do.txt.html">source code</a> and <a href="http://code.google.com/p/doconce/wiki/Tutorial">tutorial</a></li>
</ul>
<p>


</section>


<section>

<h1>A tour of Doconce  <a name="___sec9"></a></h1>

<p>

</section>


<section>

<h2>Doconce: title, authors, date, toc  <a name="___sec10"></a></h2>

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">TITLE: Some Title
AUTHOR: name1 at institution1, with more info, and institution2
AUTHOR: name2 email:name2@web.com at institution
DATE: today

# A table of contents is optional:
TOC: on
</pre></div>
<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Notice.</b>
Title and authors must have all information <em>on a single line</em>!
</div>
<p>

</section>


<section>

<h2>Doconce: abstract  <a name="___sec11"></a></h2>

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">__Abstract.__
Here goes the abstract...
</pre></div>
<p>
Or:
<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">__Summary.__
Here goes the summary...
</pre></div>
<p>

</section>


<section>

<h2>Doconce: section headings  <a name="___sec12"></a></h2>

<p>
Headings are surrounded by <code>=</code> signs:
<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">========= This is an H1/chapter heading =========

======= This is an H2/section heading =======

===== This is an H3/subsection heading =====

=== This is an H4/paragraph heading ===

__This is a paragraph heading.__
</pre></div>
<p>
Result:

<h1>This is an H1/chapter heading  <a name="___sec13"></a></h1>

<h2>This is an H2/section heading  <a name="___sec14"></a></h2>

<h3>This is an H3/subsection heading  <a name="___sec15"></a></h3>

<h4>This is an H4/paragraph heading  <a name="___sec16"></a></h4>

<p>
<b>This is a paragraph heading.</b>
<p>

</section>


<section>

<h2>Doconce: markup and lists  <a name="___sec17"></a></h2>

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"> * Bullet list items start with `*`
   and may span several lines
 * *Emphasized words* are possible
 * _Boldface words_ are also possible
 * color{red}{colored words} too
 * `inline verbatim code` is featured
   o and sublists with enumerated items starting with `o`
   o items are just indented as you would do in email
</pre></div>
<p>
This gets rendered as

<p>

<ul>
 <p><li> Bullet lists start with <code>*</code>
   and may span several lines</li>
 <p><li> <em>Emphasized words</em> are possible</li>
 <p><li> <b>Boldface words</b> are also possible</li>
 <p><li> <font color="red">colored words</font> too</li>
 <p><li> <code>inline verbatim code</code> is featured</li>

<ol>
  <p><li> and sublists with enumerated items starting with <code>o</code></li>
  <p><li> items are just indented as you would do in email</li>
</ol>
<p>

</ul>
<p>


</section>


<section>

<h2>Doconce: labels, references, index items  <a name="___sec18"></a></h2>

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"># Insert index items in the source
idx{key word1} idx{key word2}

# Label
===== Some section =====
label{this:section}

# Make reference
As we saw in Section ref{this:section}, references, index
items and labels follow a syntax similar to LaTeX
but without backslashes.

# Make reference to equations
See \eqref{eq1}-\eqref{myeq}.

# Make hyperlink
&quot;some link text&quot;: &quot;http://code.google.com/p/doconce/&quot;

# Hyperlink with complete URL as link text
URL: &quot;http://code.google.com/p/doconce/&quot;
</pre></div>
<p>

</section>


<section>

<h2>Doconce: figures and movies  <a name="___sec19"></a></h2>

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Notice.</b>
Figure with HTML and LaTeX info, and caption, <em>all on one line</em>:
</div>
<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">FIGURE: [figdir/myfig, width=300 frac=1.2] My caption. label{fig1}

# This figure will be 300 pixels wide in HTML and span 1.2 times
# the linewidth in LaTeX.
</pre></div>
<p>
Movies are also supported:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">MOVIE: [http://www.youtube.com/embed/P8VcZzgdfSc, width=420 height=315]
</pre></div>
<p>
and rendered as

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/P8VcZzgdfSc" frameborder="0" allowfullscreen></iframe>


<p>

</section>


<section>

<h2>Doconce: math  <a name="___sec20"></a></h2>

<p>
Inline math as in LaTeX:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">...where $a=\int_{\Omega}fdx$ is an integral.
</pre></div>
<p>
gets rendered as ...where \( a=\int_{\Omega}fdx \) is an integral.

<p>
An equation environment is surrounded by <code>!bt</code> and <code>!et</code> tags,
the rest is plain LaTeX:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bt
\begin{align}
\frac{\partial u}{\partial t} &amp;= \nabla^2 u,
label{a:eq}\\
\nabla\cdot\pmb{v} &amp; = 0
label{b:eq}
\end{align}
!et
</pre></div>
<p>
which is rendered as

<p>
<p>&nbsp;<br>
$$
\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
\label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
\label{b:eq}
\end{align}
$$
<p>&nbsp;<br>


<p>

</section>


<section>

<h2>Doconce: displaying code  <a name="___sec21"></a></h2>

<p>
Code is enclosed in <code>!bc</code> and <code>!ec</code> tags:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def solver(I, a, T, dt, theta):
    &quot;&quot;&quot;Solve u&#39;=-a*u, u(0)=I, for t in (0,T] with steps of dt.&quot;&quot;&quot;
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
!ec
</pre></div>
<p>
This gets rendered as

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">solver</span>(I, a, T, dt, theta):
    <span style="color: #BB4444; font-style: italic">&quot;&quot;&quot;Solve u&#39;=-a*u, u(0)=I, for t in (0,T] with steps of dt.&quot;&quot;&quot;</span>
    dt <span style="color: #666666">=</span> <span style="color: #AA22FF">float</span>(dt)           <span style="color: #008800; font-style: italic"># avoid integer division</span>
    N <span style="color: #666666">=</span> <span style="color: #AA22FF">int</span>(<span style="color: #AA22FF">round</span>(T<span style="color: #666666">/</span>dt))     <span style="color: #008800; font-style: italic"># no of time intervals</span>
    T <span style="color: #666666">=</span> N<span style="color: #666666">*</span>dt                 <span style="color: #008800; font-style: italic"># adjust T to fit time step dt</span>
    u <span style="color: #666666">=</span> zeros(N<span style="color: #666666">+1</span>)           <span style="color: #008800; font-style: italic"># array of u[n] values</span>
    t <span style="color: #666666">=</span> linspace(<span style="color: #666666">0</span>, T, N<span style="color: #666666">+1</span>)  <span style="color: #008800; font-style: italic"># time mesh</span>

    u[<span style="color: #666666">0</span>] <span style="color: #666666">=</span> I                 <span style="color: #008800; font-style: italic"># assign initial condition</span>
    <span style="color: #AA22FF; font-weight: bold">for</span> n <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #666666">0</span>, N):    <span style="color: #008800; font-style: italic"># n=0,1,...,N-1</span>
        u[n<span style="color: #666666">+1</span>] <span style="color: #666666">=</span> (<span style="color: #666666">1</span> <span style="color: #666666">-</span> (<span style="color: #666666">1-</span>theta)<span style="color: #666666">*</span>a<span style="color: #666666">*</span>dt)<span style="color: #666666">/</span>(<span style="color: #666666">1</span> <span style="color: #666666">+</span> theta<span style="color: #666666">*</span>dt<span style="color: #666666">*</span>a)<span style="color: #666666">*</span>u[n]
    <span style="color: #AA22FF; font-weight: bold">return</span> u, t
</pre></div>
<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Language-dependent typesetting of code:</b>
The <code>!bc</code> command can be followed by a specification of the computer
language: <code>pycod</code> for Python code snippet, <code>pypro</code> for complete Python
program, <code>fcod</code> for Fortran snippet, <code>fpro</code> for Fortran program, and so
forth (<code>c</code> for C, <code>cpp</code> for C++, <code>sh</code> for Unix shells, <code>m</code> for Matlab).
</div>
<p>

</section>


<section>

<h2>Doconce: displaying interactive demo code <a name="slide:pot"></a></h2>

<p>
With <code>!bc pyoptpro</code> or a file <code>*.pyopt</code>, the code applies the
<a href="http://pythontutor.com">Online Python Tutor</a> for displaying
program flow and state of variables:

<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+solver%28I%2C+a%2C+T%2C+dt%2C+theta%29%3A%0A++++dt+%3D+float%28dt%29%0A++++N+%3D+int%28round%28T%2Fdt%29%29%0A++++T+%3D+N%2Adt%0A++++u+%3D+%5B0.0%5D%2A%28N%2B1%29%0A++++t+%3D+%5Bi%2Adt+for+i+in+range%28N%2B1%29%5D%0A%0A++++u%5B0%5D+%3D+I%0A++++for+n+in+range%280%2C+N%29%3A%0A++++++++u%5Bn%2B1%5D+%3D+%281+-+%281-theta%29%2Aa%2Adt%29%2F%281+%2B+theta%2Adt%2Aa%29%2Au%5Bn%5D%0A++++return+u%2C+t%0A%0Au%2C+t+%3D+solver%28I%3D1%2C+a%3D1%2C+T%3D3%2C+dt%3D1.%2C+theta%3D0.5%29%0Aprint+u&curInstr=0&py=2&cumulative=false">
</iframe>
<p>

</section>


<section>

<h2>Doconce: exercises  <a name="___sec23"></a></h2>

<p>
Doconce offers a special format for <em>exercises</em>, <em>problems</em>, <em>projects</em>,
and <em>examples</em>:

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">===== Problem: Flip a Coin =====
label{demo:ex:1}

files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$ times.

<b>Hint.</b>\n
Use `r = random.random()` and define head as `r &lt;= 0.5`.

!esubex

!bsubex
Compute the probability of getting heads.

!bans
A short answer: 0.5.
!eans

!bsol
A full solution to this subexercise can go here.
!esol
!esubex

!bsubex
Make another program that computes the probability
of getting at least three heads out of 5 throws.
!esubex
</pre></div>
<p>
Solutions/answers can easily be left out of the document.

<p>

</section>


<section>

<h2>Doconce: exercises  <a name="___sec24"></a></h2>

<p>
Last page gets rendered as follows:

<p>
<!-- --- begin exercise --- -->

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>
<!-- keywords = random numbers; Monte Carlo simulation -->

<p>
<b>a)</b>
Make a program that simulates flipping a coin \( N \) times.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<p>
<b>b)</b>
Compute the probability of getting heads.

<p>
<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
A short answer: 0.5.
<!-- --- end answer of exercise --- -->

<p>
<!-- --- begin solution of exercise --- -->
<b>Solution.</b>
A full solution to this subexercise can go here.
<!-- --- end solution of exercise --- -->

<p>
<b>c)</b>
Make another program that computes the probability
of getting at least three heads out of 5 throws.

<p>
Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py -->

<p>
<!-- --- end exercise --- -->

<p>

</section>


<section>

<h2>Doconce: example on slide code  <a name="___sec26"></a></h2>

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!split
======= Headline =======

 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes

FIGURE: [../doc/slides/fig/teacher1, width=100]

Key equation:

!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et

And maybe a final comment?

!split
======= Next slide... =======
</pre></div>
<p>

</section>


<section>

<h2>Doconce: example on slide code  <a name="___sec27"></a></h2>

<p>
Last page gets rendered to

<h2>Headline  <a name="___sec28"></a></h2>

<p>

<ul>
 <p><li> Key point 1</li>
 <p><li> Key point 2</li>
</ul>
<p>

<center><p><img src="../doc/slides/fig/teacher1.gif" align="bottom" width=100></p></center>

<p>
Key equation:

<p>
<p>&nbsp;<br>
$$ -\nabla^2 u = f \quad\hbox{in }\Omega $$
<p>&nbsp;<br>


<p>
And maybe a final comment?

<p>

</section>


<section>

<h2>Doconce: example on slide code with cells  <a name="___sec29"></a></h2>

<p>
One can introduce a table-like layout with MxN cells and
put slide elements in various cell. A cell with position
MN is surrounded by <code>!bslidecell MN</code> and <code>!eslidecell</code>
tags. Below is an example with a bullet list to the left and
a figure to the right (two cells, numbered 00 and 01).

<p>

<!-- code=text typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!split
======= Headline =======

!bslidecell 00
!bpop
 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
!epop

!bpop
!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et
!epop

!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/broken_pen_and_paper, width=400, frac=0.8]
!eslidecell

!split
======= Next slide... =======
</pre></div>
<p>

</section>


<section>

<h2>Doconce: example on slide code  <a name="___sec30"></a></h2>

<p>
Last page gets rendered to

<h2>Headline  <a name="___sec31"></a></h2>

<p>

<table border="0">
<tr>
<td class="padding">


<ul>
 <p><li class="fragment"> Key point 1</li>
 <p><li class="fragment"> Key point 2</li>
 <p><li class="fragment"> Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes</li>
</ul>
<p>



<p>

<p class="fragment">

&nbsp;<br>&nbsp;<br>
$$ -\nabla^2 u = f \quad\hbox{in }\Omega $$
&nbsp;<br>&nbsp;<br>


</p>


<p>
</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/broken_pen_and_paper.jpg" align="bottom" width=400></p></center>
</td>
</tr>
</table>


<p>



</section>



</div> <!-- class="slides" -->
</div> <!-- class="reveal" -->

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.min.js"></script>

<script>

// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
controls: true,
progress: true,
history: true,
center: true,
heme: Reveal.getQueryHash().theme, // available themes are in reveal.js/css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

// Optional libraries used to extend on reveal.js
dependencies: [
{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
{ src: 'reveal.js/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
{ src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
// { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]
});
</script>


</body>
</html>

************** File: slides2.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifndef MOVIE
% #define MOVIE "media9"
% #endif

% #if MOVIE == "media9"
\usepackage{media9}
% #elif MOVIE == "movie15"
\usepackage{movie15}
% #elif MOVIE == "multimedia"
\usepackage{multimedia}
% #elif MOVIE == "href-run"
% #endif

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---

\newenvironment{exercise}{}{}
\newcounter{exerno}


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{Test slide features}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
Test slide features
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{Test slide features}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{Test slide features}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Test slide features
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Core Dump\footnote{Cyber Space Ltd.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

{\Large\textsf{Core Dump}}\\ [3mm]

\ \\ [2mm]

{\large\textsf{Cyber Space Ltd} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{Core Dump}
% Short version of authors:
%\authorrunning{...}
\institute{Core Dump\at Cyber Space Ltd}

% #elif LATEX_HEADING == "beamer"
\author{Core Dump\inst{1}}
\institute{Cyber Space Ltd\inst{1}}
% #else

\begin{center}
{\bf Core Dump}
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small Cyber Space Ltd}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.5\linewidth]{../doc/slides/fig/doconce1b.png}}
\end{center}


% !split
\section{Scientific writing for the future needs to address many new media}

% !bslidecell 00 0.4

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{../doc/slides/fig/ipad.png}}
\end{center}



\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.3\linewidth]{../doc/slides/fig/iphones.jpg}}
\end{center}


% FIGURE: [../doc/slides/fig/mbair, width=400]

% !eslidecell

% !bslidecell 01 0.6

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.7\linewidth]{../doc/slides/fig/imac.png}}
\end{center}

% !eslidecell

% !split
\section{The book will probably survive}


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/oldbooks.jpg}}
\end{center}


% !split
\section{The classical report will survive}

% !bslidecell 00

\begin{center}  % inline figure
  \centerline{\includegraphics[width=1.2\linewidth]{../doc/slides/fig/latex_thesis.jpg}}
\end{center}

% !eslidecell

% !bslidecell 01

\begin{center}  % inline figure
  \centerline{\includegraphics[width=1.2\linewidth]{../doc/slides/fig/latex_paper1.png}}
\end{center}

% !eslidecell

% !split
\section{Scope}

% * Scientific writing = lecture notes, slides, reports, thesis, books,  ...
% * (Journal papers typeset by journals are out of scope)

% !bpop
\begin{itemize}
  \item Scope: documents with \textcolor{red}{much} \emph{math} and \emph{computer code}

  \item Key question: What tools should I use for writing?

  \item Default answer: {\LaTeX}

  \item Alternative: MS Word w/math

  \item Recent popular alternative tools: HTML w/MathJax,
    Sphinx, Markdown, MediaWiki, IPython notebook
\end{itemize}

\noindent
% !epop

% !bslidecell 00 0.25

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.3\linewidth]{../doc/slides/fig/LaTeX_logo.jpg}}
\end{center}

% !eslidecell

% !bslidecell 01 0.25

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.2\linewidth]{../doc/slides/fig/MS_Word_logo.jpg}}
\end{center}

% !eslidecell

% !bslidecell 02 0.5

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.4\linewidth]{../doc/slides/fig/sphinx_logo.png}}
\end{center}

% !eslidecell

% !bslidecell 10 0.25

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.2\linewidth]{../doc/slides/fig/markdown_logo.jpg}}
\end{center}

% !eslidecell

% !bslidecell 11 0.25

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.2\linewidth]{../doc/slides/fig/MediaWiki_logo.jpg}}
\end{center}

% !eslidecell

% !bslidecell 12 0.5

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.6\linewidth]{../doc/slides/fig/IPython_logo.png}}
\end{center}

% !eslidecell


% !split
\section{Scientific writing for the future needs to address many new media}

% Insert links here to reports

% !bslidecell 00
Old days (1985-2005): {\LaTeX} for BW paper output, but now

\begin{enumerate}
  \item BW books

  \item Colorful PDF books (printed and screen)

  \item Designed web pages

  \item Wikis

  \item Bloggs

  \item Next new fancy format (iBook w/LaTeX?)
\end{enumerate}

\noindent
% !eslidecell

% !bslidecell 01

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/jungle_with_mess.jpg}}
\end{center}

% !eslidecell

% !split

\section{Fundamental question}

When I write some scientific material,

\begin{itemize}
 \item a {\LaTeX} document,

 \item a blogg (HTML),

 \item some web pages (HTML),

 \item a Sphinx document,

 \item some Markdown files,
\end{itemize}

\noindent
and later want to collect the pieces into a larger document, maybe
some book, or one big web document, is that at all feasible?

% !bpop highlight-red
Probably not, but I have a solution :-)
% !epop

% !split

\section{{\LaTeX} is very rich; other tools support only some elements}

\begin{itemize}
 \item {\LaTeX} inline math: works with all ({\LaTeX}, MathJax, Sphinx, Markdown, MediaWiki)

 \item {\LaTeX} equation math:
\begin{itemize}

    \item \textbf{LaTeX}: \code{equation*}, \code{equation}, \code{align*}, \code{align} +
      \code{eqnarray}, \code{split}, \code{alignat}, ... (numerous!)

    \item \textbf{MathJax}: \code{equation*}, \code{equation}, \code{align*}, \code{align}

    \item \textbf{MediaWiki}: \code{equation*}, \code{equation}, \code{align*}, \code{align}

    \item \textbf{Sphinx}: \code{equation*}, \code{equation}, \code{align*}

    \item \textbf{Markdown}: \code{equation*}, \code{equation}, \code{eqnarray*}, \code{align*} (but no labels)
\end{itemize}

\noindent
\end{itemize}

\noindent
% !split
\section{{\LaTeX} is very rich; other tools support only some elements}

% !bpop
\begin{itemize}
 \item Figures: all

 \item Subfigures: {\LaTeX} (\code{subfigure})

 \item Movies: {\LaTeX} (can run separately), just raw embedded HTML in others

 \item Floating computer code: {\LaTeX}

 \item Fixed computer code: all

 \item Floating tables: {\LaTeX}; inline tables: all

 \item Algorithms: {\LaTeX}

 \item Margin notes: {\LaTeX}

 \item Page references: {\LaTeX}

 \item Footnotes: {\LaTeX}, Sphinx, reStructuredText, MediaWiki

 \item Bibliography: {\LaTeX}, Sphinx, reStructuredText, MediaWiki

 \item Hyperlinks: all (but not on paper!)
\end{itemize}

\noindent
% !epop

% !bpop
Conclusion: Highly non-trivial to translate a {\LaTeX} document into something
based on HTML and vice versa.
% !epop


% !split
\section{Doconce demo}

\href{{http://hplgit.github.com/teamods/writing_reports/}}{\nolinkurl{http://hplgit.github.com/teamods/writing_reports/}}

\begin{itemize}
 \item LaTeX-based PDF \href{{http://hplgit.github.com/teamods/writing_reports/_static/report.pdf}}{for screen}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_4printing.pdf}}{for printing}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_4phone.pdf}}{for phone}

 \item \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_do.html}}{Plain HTML} or with a \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_vagrant.html}}{template} or \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_github_minimal.html}}{another template} or \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_solarized.html}}{solarized}

 \item Sphinx: \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-agni/index.html}}{agni}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-pyramid/report.html}}{pyramid}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-classy/report.html}}{classy}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html}}{fenics}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html}}{redcloud}

 \item HTML for \href{{http://doconce-report-demo.blogspot.no/}}{Google} or \href{{http://doconcereportdemo.wordpress.com/}}{Wordpress} blogs

 \item \href{{http://doconcedemo.shoutwiki.com/wiki/Doconce_demo_page}}{MediaWiki} (Wikipedia, Wikibooks, etc)

 \item Doconce \href{{http://hplgit.github.com/teamods/writing_reports/_static/report.do.txt.html}}{source code} and \href{{http://code.google.com/p/doconce/wiki/Tutorial}}{tutorial}
\end{itemize}

\noindent
% !split

% latex interprets 9 = as chapter and then needs book style...
\section{A tour of Doconce}

% !split
\section{Doconce: title, authors, date, toc}

\bccq
TITLE: Some Title
AUTHOR: name1 at institution1, with more info, and institution2
AUTHOR: name2 email:name2@web.com at institution
DATE: today

# A table of contents is optional:
TOC: on
\eccq


\begin{graybox1admon}[Notice.]
Title and authors must have all information \emph{on a single line}!
\end{graybox1admon}

% !split
\section{Doconce: abstract}

\bccq
__Abstract.__
Here goes the abstract...
\eccq

Or:
\bccq
__Summary.__
Here goes the summary...
\eccq


% !split
\section{Doconce: section headings}

Headings are surrounded by \code{=} signs:
\bccq
========= This is an H1/chapter heading =========

======= This is an H2/section heading =======

===== This is an H3/subsection heading =====

=== This is an H4/paragraph heading ===

__This is a paragraph heading.__
\eccq

Result:

\chapter{This is an H1/chapter heading}

\section{This is an H2/section heading}

\subsection{This is an H3/subsection heading}

\paragraph{This is an H4/paragraph heading.}
\paragraph{This is a paragraph heading.}
% !split
\section{Doconce: markup and lists}

\bccq
 * Bullet list items start with `*`
   and may span several lines
 * *Emphasized words* are possible
 * _Boldface words_ are also possible
 * color{red}{colored words} too
 * `inline verbatim code` is featured
   o and sublists with enumerated items starting with `o`
   o items are just indented as you would do in email
\eccq

This gets rendered as

\begin{itemize}
 \item Bullet lists start with \code{*}
   and may span several lines

 \item \emph{Emphasized words} are possible

 \item \textbf{Boldface words} are also possible

 \item \textcolor{red}{colored words} too

 \item \code{inline verbatim code} is featured
\begin{enumerate}

  \item and sublists with enumerated items starting with \code{o}

  \item items are just indented as you would do in email
\end{enumerate}

\noindent
\end{itemize}

\noindent
% !split
\section{Doconce: labels, references, index items}

\bccq
# Insert index items in the source
idx{key word1} idx{key word2}

# Label
===== Some section =====
label{this:section}

# Make reference
As we saw in Section ref{this:section}, references, index
items and labels follow a syntax similar to LaTeX
but without backslashes.

# Make reference to equations
See (ref{eq1})-(ref{myeq}).

# Make hyperlink
"some link text": "http://code.google.com/p/doconce/"

# Hyperlink with complete URL as link text
URL: "http://code.google.com/p/doconce/"
\eccq

% !split
\section{Doconce: figures and movies}


\begin{graybox1admon}[Notice.]
Figure with HTML and {\LaTeX} info, and caption, \emph{all on one line}:
\end{graybox1admon}

\bccq
FIGURE: [figdir/myfig, width=300 frac=1.2] My caption. label{fig1}

# This figure will be 300 pixels wide in HTML and span 1.2 times
# the linewidth in LaTeX.
\eccq

Movies are also supported:

\bccq
MOVIE: [http://www.youtube.com/embed/P8VcZzgdfSc, width=420 height=315]
\eccq
and rendered as

 \href{{http://www.youtube.com/watch?v=P8VcZzgdfSc}}{\nolinkurl{http://www.youtube.com/watch?v=P8VcZzgdfSc}}

% !split
\section{Doconce: math}

Inline math as in {\LaTeX}:

\bccq
...where $a=\int_{\Omega}fdx$ is an integral.
\eccq
gets rendered as ...where $a=\int_{\Omega}fdx$ is an integral.


An equation environment is surrounded by \code{!bt} and \code{!et} tags,
the rest is plain {\LaTeX}:

\bccq
!bt
\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
label{b:eq}
\end{align}
!et
\eccq
which is rendered as

\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
\label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
\label{b:eq}
\end{align}


% !split
\section{Doconce: displaying code}

Code is enclosed in \code{!bc} and \code{!ec} tags:

\bccq
!bc pycod
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
!ec
\eccq
This gets rendered as

\bpycod
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
\epycod


\begin{graybox1admon}[Language-dependent typesetting of code:]
The \code{!bc} command can be followed by a specification of the computer
language: \code{pycod} for Python code snippet, \code{pypro} for complete Python
program, \code{fcod} for Fortran snippet, \code{fpro} for Fortran program, and so
forth (\code{c} for C, \code{cpp} for C++, \code{sh} for Unix shells, \code{m} for Matlab).
\end{graybox1admon}

% !split
\section{Doconce: displaying interactive demo code}
\label{slide:pot}

With \code{!bc pyoptpro} or a file \code{*.pyopt}, the code applies the
\href{{http://pythontutor.com}}{Online Python Tutor} for displaying
program flow and state of variables:

\bpypro
def solver(I, a, T, dt, theta):
    dt = float(dt)
    N = int(round(T/dt))
    T = N*dt
    u = [0.0]*(N+1)
    t = [i*dt for i in range(N+1)]

    u[0] = I
    for n in range(0, N):
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t

u, t = solver(I=1, a=1, T=3, dt=1., theta=0.5)
print u
\epypro
\noindent
(\href{{http://pythontutor.com/visualize.html\#code=def+solver\%28I\%2C+a\%2C+T\%2C+dt\%2C+theta\%29\%3A\%0A++++dt+\%3D+float\%28dt\%29\%0A++++N+\%3D+int\%28round\%28T\%2Fdt\%29\%29\%0A++++T+\%3D+N\%2Adt\%0A++++u+\%3D+\%5B0.0\%5D\%2A\%28N\%2B1\%29\%0A++++t+\%3D+\%5Bi\%2Adt+for+i+in+range\%28N\%2B1\%29\%5D\%0A\%0A++++u\%5B0\%5D+\%3D+I\%0A++++for+n+in+range\%280\%2C+N\%29\%3A\%0A++++++++u\%5Bn\%2B1\%5D+\%3D+\%281+-+\%281-theta\%29\%2Aa\%2Adt\%29\%2F\%281+\%2B+theta\%2Adt\%2Aa\%29\%2Au\%5Bn\%5D\%0A++++return+u\%2C+t\%0A\%0Au\%2C+t+\%3D+solver\%28I\%3D1\%2C+a\%3D1\%2C+T\%3D3\%2C+dt\%3D1.\%2C+theta\%3D0.5\%29\%0Aprint+u&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0}}{Visualize execution}) 





% !split
\section{Doconce: exercises}

Doconce offers a special format for \emph{exercises}, \emph{problems}, \emph{projects},
and \emph{examples}:

\bccq
===== Problem: Flip a Coin =====
label{demo:ex:1}

files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$ times.

\paragraph{Hint.}\n
Use `r = random.random()` and define head as `r <= 0.5`.

!esubex

!bsubex
Compute the probability of getting heads.

!bans
A short answer: 0.5.
!eans

!bsol
A full solution to this subexercise can go here.
!esol
!esubex

!bsubex
Make another program that computes the probability
of getting at least three heads out of 5 throws.
!esubex
\eccq

Solutions/answers can easily be left out of the document.

% !split
\section{Doconce: exercises}

Last page gets rendered as follows:



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}
\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation


\paragraph{a)}
Make a program that simulates flipping a coin $N$ times.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use \code{r = random.random()} and define head as \code{r <= 0.5}.
% --- end hint in exercise ---

\paragraph{b)}
Compute the probability of getting heads.


% --- begin answer of exercise ---
\paragraph{Answer.}
A short answer: 0.5.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
A full solution to this subexercise can go here.
% --- end solution of exercise ---

\paragraph{c)}
Make another program that computes the probability
of getting at least three heads out of 5 throws.

Filenames: \code{flip_coin.py}, \code{flip_coin.pdf}.
% solution files: mysol.txt, mysol_flip_coin.py

\end{exercise}
% --- end exercise ---


% !split
\section{Doconce: example on slide code}

\bccq
!split
======= Headline =======

 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes

FIGURE: [../doc/slides/fig/teacher1, width=100]

Key equation:

!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et

And maybe a final comment?

!split
======= Next slide... =======
\eccq

% !split
\section{Doconce: example on slide code}

Last page gets rendered to

\section{Headline}

\begin{itemize}
 \item Key point 1

 \item Key point 2
\end{itemize}

\noindent
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.4\linewidth]{../doc/slides/fig/teacher1.pdf}}
\end{center}


Key equation:

\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]

And maybe a final comment?

% !split
\section{Doconce: example on slide code with cells}

One can introduce a table-like layout with MxN cells and
put slide elements in various cell. A cell with position
MN is surrounded by \code{!bslidecell MN} and \code{!eslidecell}
tags. Below is an example with a bullet list to the left and
a figure to the right (two cells, numbered 00 and 01).

\bccq
!split
======= Headline =======

!bslidecell 00
!bpop
 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
!epop

!bpop
!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et
!epop

!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/broken_pen_and_paper, width=400, frac=0.8]
!eslidecell

!split
======= Next slide... =======
\eccq

% !split
\section{Doconce: example on slide code}

Last page gets rendered to

\section{Headline}

% !bslidecell 00
% !bpop
\begin{itemize}
 \item Key point 1

 \item Key point 2

 \item Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
\end{itemize}

\noindent
% !epop

% !bpop
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
% !epop

% !eslidecell

% !bslidecell 01

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/broken_pen_and_paper.jpg}}
\end{center}

% !eslidecell

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: slides2.tex *****************

% LaTeX Beamer file automatically generated from Doconce
% http://code.google.com/p/doconce

%-------------------- begin preamble ----------------------

\documentclass{beamer}

\usetheme{default}
\usecolortheme{default}

% turn off the almost invisible, yet disturbing, navigation symbols:
\setbeamertemplate{navigation symbols}{}

% Examples on customization:
%\usecolortheme[named=RawSienna]{structure}
%\usetheme[height=7mm]{Rochester}
%\setbeamerfont{frametitle}{family=\rmfamily,shape=\itshape}
%\setbeamertemplate{items}[ball]
%\setbeamertemplate{blocks}[rounded][shadow=true]
%\useoutertheme{infolines}
%
%\usefonttheme{}
%\useinntertheme{}
%
%\setbeameroption{show notes}
%\setbeameroption{show notes on second screen=right}

% fine for B/W printing:
%\usecolortheme{seahorse}

\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage{graphicx}
\usepackage{epsfig}
\usepackage{minted} % requires pygments and latex -shell-escape filename
\usepackage{fancyvrb,relsize}
\usepackage{amsmath,amssymb,bm}
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage{colortbl}
\usepackage[english]{babel}
\usepackage{tikz}
\usepackage{framed,anslistings}
% Use some nice templates
\beamertemplatetransparentcovereddynamic

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each section:
\AtBeginSection[]
{
    \begin{frame}<beamer>[plain]
    \frametitle{}
    \tableofcontents[currentsection]
    \end{frame}
}

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each section:
\AtBeginSection[]
{
    \begin{frame}<beamer>[plain]
    \frametitle{}
    \tableofcontents[currentsection]
    \end{frame}
}

% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command:

%\beamerdefaultoverlayspecification{<+->}

\newcommand{\shortinlinecomment}[3]{\note{\textbf{#1}: #2}}
\newcommand{\longinlinecomment}[3]{\shortinlinecomment{#1}{#2}{#3}}

\newenvironment{notice_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{paragraphadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{graybox1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{graybox2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newcommand{\grayboxhrules}[1]{\begin{block}{}#1\end{block}}


\newenvironment{exercise}{}{}
\newcounter{exerno}


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}


% ------------------- main content ----------------------



% ----------------- title -------------------------
\title{Test slide features}

% ----------------- author(s) -------------------------
\author{Core Dump\inst{1}}
\institute{Cyber Space Ltd\inst{1}}
% ----------------- end author(s) -------------------------


\date{Jan 32, 2100
\\ \ \\ 
\centerline{\includegraphics[width=0.5\linewidth]{../doc/slides/fig/doconce1b.png}}
}




\begin{frame}[plain,fragile]
\titlepage
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Scientific writing for the future needs to address many new media}

\begin{columns}
\column{0.4\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{../doc/slides/fig/ipad.png}}
\end{center}



\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.3\linewidth]{../doc/slides/fig/iphones.jpg}}
\end{center}


% FIGURE: [../doc/slides/fig/mbair, width=400]


\column{0.6\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.7\linewidth]{../doc/slides/fig/imac.png}}
\end{center}


\end{columns}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{The book will probably survive}

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/oldbooks.jpg}}
\end{center}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{The classical report will survive}

\begin{columns}
\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=1.2\linewidth]{../doc/slides/fig/latex_thesis.jpg}}
\end{center}


\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=1.2\linewidth]{../doc/slides/fig/latex_paper1.png}}
\end{center}


\end{columns}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Scope}

% * Scientific writing = lecture notes, slides, reports, thesis, books,  ...
% * (Journal papers typeset by journals are out of scope)

\begin{itemize}
  \item<2-> Scope: documents with \textcolor{red}{much} \emph{math} and \emph{computer code}

  \item<3-> Key question: What tools should I use for writing?

  \item<4-> Default answer: {\LaTeX}

  \item<5-> Alternative: MS Word w/math

  \item<6-> Recent popular alternative tools: HTML w/MathJax,
    Sphinx, Markdown, MediaWiki, IPython notebook
\end{itemize}

\noindent

\begin{columns}
\column{0.25\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.3\linewidth]{../doc/slides/fig/LaTeX_logo.jpg}}
\end{center}


\column{0.25\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.2\linewidth]{../doc/slides/fig/MS_Word_logo.jpg}}
\end{center}


\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.4\linewidth]{../doc/slides/fig/sphinx_logo.png}}
\end{center}


\end{columns}
\begin{columns}
\column{0.25\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.2\linewidth]{../doc/slides/fig/markdown_logo.jpg}}
\end{center}


\column{0.25\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.2\linewidth]{../doc/slides/fig/MediaWiki_logo.jpg}}
\end{center}


\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.6\linewidth]{../doc/slides/fig/IPython_logo.png}}
\end{center}


\end{columns}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Scientific writing for the future needs to address many new media}

% Insert links here to reports

\begin{columns}
\column{0.5\textwidth}
Old days (1985-2005): {\LaTeX} for BW paper output, but now

\begin{enumerate}
  \item BW books

  \item Colorful PDF books (printed and screen)

  \item Designed web pages

  \item Wikis

  \item Bloggs

  \item Next new fancy format (iBook w/LaTeX?)
\end{enumerate}

\noindent

\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/jungle_with_mess.jpg}}
\end{center}


\end{columns}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Fundamental question}

When I write some scientific material,

\begin{itemize}
 \item a {\LaTeX} document,

 \item a blogg (HTML),

 \item some web pages (HTML),

 \item a Sphinx document,

 \item some Markdown files,
\end{itemize}

\noindent
and later want to collect the pieces into a larger document, maybe
some book, or one big web document, is that at all feasible?


\pause
\begin{block}{}
Probably not, but I have a solution :-)
\end{block}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{{\LaTeX}

is very rich; other tools support only some elements}

\begin{itemize}
 \item {\LaTeX} inline math: works with all ({\LaTeX}, MathJax, Sphinx, Markdown, MediaWiki)

 \item {\LaTeX} equation math:
\begin{itemize}

    \item \textbf{LaTeX}: \Verb!equation*!, \Verb!equation!, \Verb!align*!, \Verb!align! +
      \Verb!eqnarray!, \Verb!split!, \Verb!alignat!, ... (numerous!)

    \item \textbf{MathJax}: \Verb!equation*!, \Verb!equation!, \Verb!align*!, \Verb!align!

    \item \textbf{MediaWiki}: \Verb!equation*!, \Verb!equation!, \Verb!align*!, \Verb!align!

    \item \textbf{Sphinx}: \Verb!equation*!, \Verb!equation!, \Verb!align*!

    \item \textbf{Markdown}: \Verb!equation*!, \Verb!equation!, \Verb!eqnarray*!, \Verb!align*! (but no labels)
\end{itemize}

\noindent
\end{itemize}

\noindent
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{{\LaTeX}

is very rich; other tools support only some elements}


\pause
\begin{block}{}
\begin{itemize}
 \item Figures: all

 \item Subfigures: {\LaTeX} (\Verb!subfigure!)

 \item Movies: {\LaTeX} (can run separately), just raw embedded HTML in others

 \item Floating computer code: {\LaTeX}

 \item Fixed computer code: all

 \item Floating tables: {\LaTeX}; inline tables: all

 \item Algorithms: {\LaTeX}

 \item Margin notes: {\LaTeX}

 \item Page references: {\LaTeX}

 \item Footnotes: {\LaTeX}, Sphinx, reStructuredText, MediaWiki

 \item Bibliography: {\LaTeX}, Sphinx, reStructuredText, MediaWiki

 \item Hyperlinks: all (but not on paper!)
\end{itemize}

\noindent
\end{block}



\pause
\begin{block}{}
Conclusion: Highly non-trivial to translate a {\LaTeX} document into something
based on HTML and vice versa.
\end{block}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce demo}

\href{{http://hplgit.github.com/teamods/writing_reports/}}{\nolinkurl{http://hplgit.github.com/teamods/writing_reports/}}

\begin{itemize}
 \item LaTeX-based PDF \href{{http://hplgit.github.com/teamods/writing_reports/_static/report.pdf}}{for screen}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_4printing.pdf}}{for printing}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_4phone.pdf}}{for phone}

 \item \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_do.html}}{Plain HTML} or with a \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_vagrant.html}}{template} or \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_github_minimal.html}}{another template} or \href{{http://hplgit.github.com/teamods/writing_reports/_static/report_solarized.html}}{solarized}

 \item Sphinx: \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-agni/index.html}}{agni}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-pyramid/report.html}}{pyramid}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-classy/report.html}}{classy}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html}}{fenics}, \href{{http://hplgit.github.com/teamods/writing_reports/_static/sphinx-fenics_minimal/report.html}}{redcloud}

 \item HTML for \href{{http://doconce-report-demo.blogspot.no/}}{Google} or \href{{http://doconcereportdemo.wordpress.com/}}{Wordpress} blogs

 \item \href{{http://doconcedemo.shoutwiki.com/wiki/Doconce_demo_page}}{MediaWiki} (Wikipedia, Wikibooks, etc)

 \item Doconce \href{{http://hplgit.github.com/teamods/writing_reports/_static/report.do.txt.html}}{source code} and \href{{http://code.google.com/p/doconce/wiki/Tutorial}}{tutorial}
\end{itemize}

\noindent
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{A tour of Doconce}

% latex interprets 9 = as chapter and then needs book style...
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: title, authors, date, toc}

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
TITLE: Some Title
AUTHOR: name1 at institution1, with more info, and institution2
AUTHOR: name2 email:name2@web.com at institution
DATE: today

# A table of contents is optional:
TOC: on
\end{Verbatim}


\begin{graybox1admon}[Notice.]
Title and authors must have all information \emph{on a single line}!
\end{graybox1admon}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: abstract}

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
__Abstract.__
Here goes the abstract...
\end{Verbatim}

Or:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
__Summary.__
Here goes the summary...
\end{Verbatim}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: section headings}

Headings are surrounded by \Verb!=! signs:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
========= This is an H1/chapter heading =========

======= This is an H2/section heading =======

===== This is an H3/subsection heading =====

=== This is an H4/paragraph heading ===

__This is a paragraph heading.__
\end{Verbatim}

Result:

\noindent\textbf{\huge This is an H1/chapter heading}

\noindent\textbf{\Large This is an H2/section heading}

\noindent\textbf{\large This is an H3/subsection heading}

\noindent\textbf{This is an H4/paragraph heading.}
\noindent\textbf{This is a paragraph heading.}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: markup and lists}

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
 * Bullet list items start with `*`
   and may span several lines
 * *Emphasized words* are possible
 * _Boldface words_ are also possible
 * color{red}{colored words} too
 * `inline verbatim code` is featured
   o and sublists with enumerated items starting with `o`
   o items are just indented as you would do in email
\end{Verbatim}

This gets rendered as

\begin{itemize}
 \item Bullet lists start with \Verb!*!
   and may span several lines

 \item \emph{Emphasized words} are possible

 \item \textbf{Boldface words} are also possible

 \item \textcolor{red}{colored words} too

 \item \Verb!inline verbatim code! is featured
\begin{enumerate}

  \item and sublists with enumerated items starting with \Verb!o!

  \item items are just indented as you would do in email
\end{enumerate}

\noindent
\end{itemize}

\noindent
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: labels, references, index items}

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
# Insert index items in the source
idx{key word1} idx{key word2}

# Label
===== Some section =====
label{this:section}

# Make reference
As we saw in Section ref{this:section}, references, index
items and labels follow a syntax similar to LaTeX
but without backslashes.

# Make reference to equations
See (ref{eq1})-(ref{myeq}).

# Make hyperlink
"some link text": "http://code.google.com/p/doconce/"

# Hyperlink with complete URL as link text
URL: "http://code.google.com/p/doconce/"
\end{Verbatim}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: figures and movies}

\begin{graybox1admon}[Notice.]
Figure with HTML and {\LaTeX} info, and caption, \emph{all on one line}:
\end{graybox1admon}

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
FIGURE: [figdir/myfig, width=300 frac=1.2] My caption. label{fig1}

# This figure will be 300 pixels wide in HTML and span 1.2 times
# the linewidth in LaTeX.
\end{Verbatim}

Movies are also supported:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
MOVIE: [http://www.youtube.com/embed/P8VcZzgdfSc, width=420 height=315]
\end{Verbatim}
and rendered as

 \href{{http://www.youtube.com/watch?v=P8VcZzgdfSc}}{\nolinkurl{http://www.youtube.com/watch?v=P8VcZzgdfSc}}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: math}

Inline math as in {\LaTeX}:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
...where $a=\int_{\Omega}fdx$ is an integral.
\end{Verbatim}
gets rendered as ...where $a=\int_{\Omega}fdx$ is an integral.


An equation environment is surrounded by \Verb!!bt! and \Verb!!et! tags,
the rest is plain {\LaTeX}:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
!bt
\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
label{b:eq}
\end{align}
!et
\end{Verbatim}
which is rendered as

\begin{align}
\frac{\partial u}{\partial t} &= \nabla^2 u,
\label{a:eq}\\
\nabla\cdot\pmb{v} & = 0
\label{b:eq}
\end{align}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: displaying code}

Code is enclosed in \Verb!!bc! and \Verb!!ec! tags:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
!bc pycod
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
!ec
\end{Verbatim}
This gets rendered as

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
\end{minted}


\begin{graybox1admon}[Language-dependent typesetting of code:]
The \Verb!!bc! command can be followed by a specification of the computer
language: \Verb!pycod! for Python code snippet, \Verb!pypro! for complete Python
program, \Verb!fcod! for Fortran snippet, \Verb!fpro! for Fortran program, and so
forth (\Verb!c! for C, \Verb!cpp! for C++, \Verb!sh! for Unix shells, \Verb!m! for Matlab).
\end{graybox1admon}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: displaying interactive demo code}

\label{slide:pot}

With \Verb!!bc pyoptpro! or a file \Verb!*.pyopt!, the code applies the
\href{{http://pythontutor.com}}{Online Python Tutor} for displaying
program flow and state of variables:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def solver(I, a, T, dt, theta):
    dt = float(dt)
    N = int(round(T/dt))
    T = N*dt
    u = [0.0]*(N+1)
    t = [i*dt for i in range(N+1)]

    u[0] = I
    for n in range(0, N):
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t

u, t = solver(I=1, a=1, T=3, dt=1., theta=0.5)
print u
\end{minted}
\noindent
(\href{{http://pythontutor.com/visualize.html\#code=def+solver\%28I\%2C+a\%2C+T\%2C+dt\%2C+theta\%29\%3A\%0A++++dt+\%3D+float\%28dt\%29\%0A++++N+\%3D+int\%28round\%28T\%2Fdt\%29\%29\%0A++++T+\%3D+N\%2Adt\%0A++++u+\%3D+\%5B0.0\%5D\%2A\%28N\%2B1\%29\%0A++++t+\%3D+\%5Bi\%2Adt+for+i+in+range\%28N\%2B1\%29\%5D\%0A\%0A++++u\%5B0\%5D+\%3D+I\%0A++++for+n+in+range\%280\%2C+N\%29\%3A\%0A++++++++u\%5Bn\%2B1\%5D+\%3D+\%281+-+\%281-theta\%29\%2Aa\%2Adt\%29\%2F\%281+\%2B+theta\%2Adt\%2Aa\%29\%2Au\%5Bn\%5D\%0A++++return+u\%2C+t\%0A\%0Au\%2C+t+\%3D+solver\%28I\%3D1\%2C+a\%3D1\%2C+T\%3D3\%2C+dt\%3D1.\%2C+theta\%3D0.5\%29\%0Aprint+u&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0}}{Visualize execution})
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: exercises}

Doconce offers a special format for \emph{exercises}, \emph{problems}, \emph{projects},
and \emph{examples}:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
===== Problem: Flip a Coin =====
label{demo:ex:1}

files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$ times.

\noindent\textbf{Hint.}\n
Use `r = random.random()` and define head as `r <= 0.5`.

!esubex

!bsubex
Compute the probability of getting heads.

!bans
A short answer: 0.5.
!eans

!bsol
A full solution to this subexercise can go here.
!esol
!esubex

!bsubex
Make another program that computes the probability
of getting at least three heads out of 5 throws.
!esubex
\end{Verbatim}

Solutions/answers can easily be left out of the document.
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: exercises}

Last page gets rendered as follows:



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}
\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation


\noindent\textbf{a)}
Make a program that simulates flipping a coin $N$ times.

% --- begin hint in exercise ---

\noindent\textbf{Hint.}
Use \Verb!r = random.random()! and define head as \Verb!r <= 0.5!.
% --- end hint in exercise ---

\noindent\textbf{b)}
Compute the probability of getting heads.


% --- begin answer of exercise ---
\noindent\textbf{Answer.}
A short answer: 0.5.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\noindent\textbf{Solution.}
A full solution to this subexercise can go here.
% --- end solution of exercise ---

\noindent\textbf{c)}
Make another program that computes the probability
of getting at least three heads out of 5 throws.

Filenames: \Verb!flip_coin.py!, \Verb!flip_coin.pdf!.
% solution files: mysol.txt, mysol_flip_coin.py

\end{exercise}
% --- end exercise ---
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: example on slide code}

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
!split
======= Headline =======

 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes

FIGURE: [../doc/slides/fig/teacher1, width=100]

Key equation:

!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et

And maybe a final comment?

!split
======= Next slide... =======
\end{Verbatim}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: example on slide code}

Last page gets rendered to

\noindent\textbf{\Large Headline}

\begin{itemize}
 \item Key point 1

 \item Key point 2
\end{itemize}

\noindent
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.4\linewidth]{../doc/slides/fig/teacher1.pdf}}
\end{center}


Key equation:

\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]

And maybe a final comment?
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: example on slide code with cells}

One can introduce a table-like layout with MxN cells and
put slide elements in various cell. A cell with position
MN is surrounded by \Verb!!bslidecell MN! and \Verb!!eslidecell!
tags. Below is an example with a bullet list to the left and
a figure to the right (two cells, numbered 00 and 01).

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
!split
======= Headline =======

!bslidecell 00
!bpop
 * Key point 1
 * Key point 2
 * Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
!epop

!bpop
!bt
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
!et
!epop

!eslidecell

!bslidecell 01
FIGURE: [../doc/slides/fig/broken_pen_and_paper, width=400, frac=0.8]
!eslidecell

!split
======= Next slide... =======
\end{Verbatim}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Doconce: example on slide code}

Last page gets rendered to

\noindent\textbf{\Large Headline}

\begin{columns}
\column{0.5\textwidth}

\pause
\begin{block}{}
\begin{itemize}
 \item Key point 1

 \item Key point 2

 \item Key point 3 takes very much more text to explain because
   this point is really comprehensive, and although long
   bullet points are not recommended in general, we need
   it here for demonstration purposes
\end{itemize}

\noindent
\end{block}



\pause
\begin{block}{}
\[ -\nabla^2 u = f \quad\hbox{in }\Omega \]
\end{block}



\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/broken_pen_and_paper.jpg}}
\end{center}


\end{columns}
\end{frame}

\end{document}

************** File: slides3.do.txt *****************
TITLE: On Schemes for Exponential Decay
AUTHOR: Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo
DATE: today

FIGURE: [../doc/slides/fig/CN_logo, width=300 frac=0.4]

## Comments start with a # and are visible as comments in the
## output. Lines starting with ## are also comments, but not visible
## in the output.

!split

## Headings have 5 = for h3/subsection and 7 = for h1/section
======= Goal =======

The primary goal of this demo talk is to demonstrate how to write
talks with "doconce": "http://code.google.com/p/doconce"
and get them rendered in numerous HTML formats.
# #if FORMAT in ("html", "pdflatex", "latex")
!bnotice Layout
This version
utilizes ${SLIDE_TYPE} slides with the theme ${SLIDE_THEME}.
!enotice
# #endif

## Demonstrate use of Mako variables set on the command line
## (see last sentence too). We use Preprocess (run before Mako)
## to leave out the Mako test on SLIDE_THEME and SLIDE_TYPE.
## In that way, we do not need to specify these variables on
## the command line when compiling for LaTeX or other formats
## (e.g. for handouts).

# #if FORMAT == "html"
!bnotice
Speaker notes show up by
% if SLIDE_TYPE == 'reveal':
pressing "s".
% elif SLIDE_TYPE == 'deck':
pressing "n".
% elif SLIDE_TYPE == 'csss':
pressing "Ctrl-P".
% elif SLIDE_TYPE == 'html5slides':
pressing "p".
% elif SLIDE_TYPE == 'csss':
using the "onstage.html": "https://doconce.googlecode.com/hg/bundled/dzslides/shells/onstage.html" embedding page.
% endif
!enotice
# #endif

## Add speaker notes (can also use preprocess or mako for this)

!bnotes
The talk investigates the accuracy of three finite difference
schemes for the ordinary differential equation $u'=-au$ with the
aid of numerical experiments. Numerical artifacts are in particular
demonstrated.
!enotes

## New slide is indicated by !split at the beginning of a line:

!split
======= Mathematical problem =======

## Use !bslidecell XY and !eslidecell as begin and end for
## defining a cell XY in a table layout of the slide.
## X=0,1,..., Y=0,1,... XY=00 is the upper left cell.
## Here we define cell 00 and 01 (bullet list to the left
## and figure to the right).

!bslidecell 00

## latex blocks are surrounded by !bt and !et

!bt
\begin{align}
u'(t) &= -au(t),
label{ode}\\
u(0)  &= I,
label{initial:value}
\end{align}
!et

 * $t\in (0,T]$
 * $a$, $I$, and $T$ are prescribed parameters
 * $u(t)$ is the unknown function

!eslidecell

## Figures can have a width parameter specifying the pixel
## width in HTML. A caption can be added (after [...]).

!bslidecell 01
FIGURE: [../doc/slides/fig/teacher2, width=250 frac=0.5]
!eslidecell

!split
======= Numerical solution method =======

## !bpop and !epop surround elements that are to pop up
## as we progress in the slide show.
## They will often not work if there is code inside.

!bpop
 * Mesh in time: $0= t_0< t_1 \cdots < t_N=T$
 * Assume constant $\Delta t = t_{n}-t_{n-1}$
 * $u^n$: numerical approx to the exact solution at $t_n$
!epop

!bpop
Numerical scheme:
!bt
   \[
   u^{n+1} = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}u^n,
   \quad n=0,1,\ldots,N-1
   \]
!et
!epop

# #if FORMAT == "html"

!split
## Next: embed YouTube video

===== Forward Euler explained =====

MOVIE: [http://youtu.be/PtJrPEIHNJw, width=640 height=480]

# #endif

!split
## Next: exemplify copying code directly from file (start
## with the line matching "def solver" and ending with
## "def verify_three", but not including this last line).

======= Implementation =======

The numerical method is implemented in a Python function:

@@@CODE ../doc/slides/src/dc_mod.py  fromto: def solver@def verify_three

!split
===== The Crank-Nicolson method =====

## Figure filenames do not need extension - the right version is picked

FIGURE: [../doc/slides/fig/CN, width=600]

!split
===== The artifacts can be explained by some theory =====

!bpop
Exact solution of the scheme:

!bt
\[ u^n = A^n,\quad A = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}\thinspace .\]
!et
!epop

!bpop
 * Stability: $|A| < 1$
 * No oscillations: $A>0$
 * Always for Backward Euler ($\theta=1$)
 * $\Delta t < 1/a$ for Forward Euler ($\theta=0$)
 * $\Delta t < 2/a$ for Crank-Nicolson ($\theta=1/2$)
!epop

## The summary environment appears in a box in most formats
## (warning, notice, hint, question are other environments)
!bpop
!bsummary Concluding remarks:
Only the Backward Euler scheme is guaranteed to always give
qualitatively correct results.
!esummary
!epop


************** File: slides3_reveal.html *****************
<!DOCTYPE html>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="On Schemes for Exponential Decay">







<!-- reveal.js: http://lab.hakim.se/reveal-js/ -->

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<!--
<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/reveal.min.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/beigesmall.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/sky.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/darkgray.css" id="theme">
-->

<script>
document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
</script>

<style type="text/css">
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-size: 60%; font-style: italic; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .reveal .alert-text-small   { font-size: 80%;  }
    .reveal .alert-text-large   { font-size: 130%; }
    .reveal .alert-text-normal  { font-size: 90%;  }
    .reveal .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:5px solid #bababa;
             -webkit-border-radius: 14px; -moz-border-radius: 14px;
             border-radius:14px
             background-position: 10px 10px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 30px; /* 55px; if icon */
     }
     .reveal .alert-block {padding-top:14px; padding-bottom:14px}
     .reveal .alert-block > p, .alert-block > ul {margin-bottom:0}
     /*.reveal .alert li {margin-top: 1em}*/
     .reveal .alert-block p+p {margin-top:5px}
     /*.reveal .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .reveal .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .reveal .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .reveal .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); } */

</style>



<!-- Styles for table layout of slides -->
<style type="text/css">
td.padding {
  padding-top:20px;
  padding-bottom:20px;
  padding-right:50px;
  padding-left:50px;
}
</style>

</head>

<body>
<div class="reveal">

<!-- Any section element inside the <div class="slides"> container
     is displayed as a slide -->

<div class="slides">





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_bfmath.tex -->
$$
\renewcommand{\u}{\pmb{u}}

\newcommand{\xbm}{\boldsymbol{x}}
\newcommand{\normalvecbm}{\boldsymbol{n}}
\newcommand{\ubm}{\boldsymbol{u}}
$$


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    



<section>
<!-- ------------------- main content ---------------------- -->


<title>On Schemes for Exponential Decay</title>

<center><h1>On Schemes for Exponential Decay</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>&nbsp;<br>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<p>&nbsp;<br>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
<center><p><img src="../doc/slides/fig/CN_logo.png" align="bottom" width=300></p></center>

<p>

</section>


<section>

<h2>Goal  <a name="___sec0"></a></h2>

<p>
The primary goal of this demo talk is to demonstrate how to write
talks with <a href="http://code.google.com/p/doconce">doconce</a>
and get them rendered in numerous HTML formats.
<div class="alert alert-block alert-notice alert-text-normal"><b>Layout.</b>
This version
utilizes reveal slides with the theme beigesmall.
</div>
<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Notice.</b>
Speaker notes show up by
pressing "s".
</div>
<p>
<aside class="notes">
<!-- click "s" to activate -->

The talk investigates the accuracy of three finite difference
schemes for the ordinary differential equation \( u'=-au \) with the
aid of numerical experiments. Numerical artifacts are in particular
demonstrated.

</aside>


<p>

</section>


<section>

<h2>Mathematical problem  <a name="___sec1"></a></h2>

<p>

<table border="0">
<tr>
<td class="padding">
<p>
<p>&nbsp;<br>
$$
\begin{align}
u'(t) &= -au(t),
\label{ode}\\ 
u(0)  &= I,
\label{initial:value}
\end{align}
$$
<p>&nbsp;<br>


<p>

<ul>
 <p><li> \( t\in (0,T] \)</li>
 <p><li> \( a \), \( I \), and \( T \) are prescribed parameters</li>
 <p><li> \( u(t) \) is the unknown function</li>
</ul>
<p>

</td>
<td class="padding">
<center><p><img src="../doc/slides/fig/teacher2.jpg" align="bottom" width=250></p></center>
</td>
</tr>
</table>


<p>


<p>

</section>


<section>

<h2>Numerical solution method  <a name="___sec2"></a></h2>

<p>


<ul>
 <p><li class="fragment"> Mesh in time: \( 0= t_0< t_1 \cdots < t_N=T \)</li>
 <p><li class="fragment"> Assume constant \( \Delta t = t_{n}-t_{n-1} \)</li>
 <p><li class="fragment"> \( u^n \): numerical approx to the exact solution at \( t_n \)</li>
</ul>
<p>



<p>

<p class="fragment">

Numerical scheme:
&nbsp;<br>&nbsp;<br>
$$
   u^{n+1} = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}u^n,
   \quad n=0,1,\ldots,N-1
   $$
&nbsp;<br>&nbsp;<br>


</p>


<p>

</section>


<section>

<h3>Forward Euler explained  <a name="___sec3"></a></h3>

<p>

<iframe width="640" height="480" src="http://www.youtube.com/embed/PtJrPEIHNJw" frameborder="0" allowfullscreen></iframe>


<p>

</section>


<section>

<h2>Implementation  <a name="___sec4"></a></h2>

<p>
The numerical method is implemented in a Python function:

<p>

<!-- code=python (from !bc pycod) typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">solver</span>(I, a, T, dt, theta):
    <span style="color: #BB4444; font-style: italic">&quot;&quot;&quot;Solve u&#39;=-a*u, u(0)=I, for t in (0,T] with steps of dt.&quot;&quot;&quot;</span>
    dt <span style="color: #666666">=</span> <span style="color: #AA22FF">float</span>(dt)           <span style="color: #008800; font-style: italic"># avoid integer division</span>
    N <span style="color: #666666">=</span> <span style="color: #AA22FF">int</span>(<span style="color: #AA22FF">round</span>(T<span style="color: #666666">/</span>dt))     <span style="color: #008800; font-style: italic"># no of time intervals</span>
    T <span style="color: #666666">=</span> N<span style="color: #666666">*</span>dt                 <span style="color: #008800; font-style: italic"># adjust T to fit time step dt</span>
    u <span style="color: #666666">=</span> zeros(N<span style="color: #666666">+1</span>)           <span style="color: #008800; font-style: italic"># array of u[n] values</span>
    t <span style="color: #666666">=</span> linspace(<span style="color: #666666">0</span>, T, N<span style="color: #666666">+1</span>)  <span style="color: #008800; font-style: italic"># time mesh</span>

    u[<span style="color: #666666">0</span>] <span style="color: #666666">=</span> I                 <span style="color: #008800; font-style: italic"># assign initial condition</span>
    <span style="color: #AA22FF; font-weight: bold">for</span> n <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #666666">0</span>, N):    <span style="color: #008800; font-style: italic"># n=0,1,...,N-1</span>
        u[n<span style="color: #666666">+1</span>] <span style="color: #666666">=</span> (<span style="color: #666666">1</span> <span style="color: #666666">-</span> (<span style="color: #666666">1-</span>theta)<span style="color: #666666">*</span>a<span style="color: #666666">*</span>dt)<span style="color: #666666">/</span>(<span style="color: #666666">1</span> <span style="color: #666666">+</span> theta<span style="color: #666666">*</span>dt<span style="color: #666666">*</span>a)<span style="color: #666666">*</span>u[n]
    <span style="color: #AA22FF; font-weight: bold">return</span> u, t
</pre></div>
<p>

</section>


<section>

<h3>The Crank-Nicolson method  <a name="___sec5"></a></h3>

<p>
<center><p><img src="../doc/slides/fig/CN.png" align="bottom" width=600></p></center>

<p>

</section>


<section>

<h3>The artifacts can be explained by some theory  <a name="___sec6"></a></h3>

<p>

<p class="fragment">

Exact solution of the scheme:


&nbsp;<br>&nbsp;<br>
$$ u^n = A^n,\quad A = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}\thinspace .$$
&nbsp;<br>&nbsp;<br>


</p>


<p>


<ul>
 <p><li class="fragment"> Stability: \( |A| < 1 \)</li>
 <p><li class="fragment"> No oscillations: \( A>0 \)</li>
 <p><li class="fragment"> Always for Backward Euler (\( \theta=1 \))</li>
 <p><li class="fragment"> \( \Delta t < 1/a \) for Forward Euler (\( \theta=0 \))</li>
 <p><li class="fragment"> \( \Delta t < 2/a \) for Crank-Nicolson (\( \theta=1/2 \))</li>
</ul>
<p>



<p>

<p class="fragment">

<div class="fragment alert alert-block alert-summary alert-text-normal"><b>Concluding remarks:</b>
Only the Backward Euler scheme is guaranteed to always give
qualitatively correct results.
</div>

</p>



</section>



</div> <!-- class="slides" -->
</div> <!-- class="reveal" -->

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.min.js"></script>

<script>

// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
controls: true,
progress: true,
history: true,
center: true,
heme: Reveal.getQueryHash().theme, // available themes are in reveal.js/css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

// Optional libraries used to extend on reveal.js
dependencies: [
{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
{ src: 'reveal.js/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
{ src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
// { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]
});
</script>


</body>
</html>

************** File: slides3.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_bfmath}
\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{On Schemes for Exponential Decay}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
On Schemes for Exponential Decay
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{On Schemes for Exponential Decay}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{On Schemes for Exponential Decay}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
On Schemes for Exponential Decay
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{Hans Petter Langtangen}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo}

% #elif LATEX_HEADING == "beamer"
\author{Hans Petter Langtangen\inst{1,2}}
\institute{Center for Biomedical Computing, Simula Research Laboratory\inst{1}
\and
Department of Informatics, University of Oslo\inst{2}}
% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.4\linewidth]{../doc/slides/fig/CN_logo.pdf}}
\end{center}



% !split

\section{Goal}

The primary goal of this demo talk is to demonstrate how to write
talks with \href{{http://code.google.com/p/doconce}}{doconce}
and get them rendered in numerous HTML formats.

\begin{graybox1admon}[Layout.]
This version
utilizes beamer slides with the theme red3.
\end{graybox1admon}

% !bnotes
The talk investigates the accuracy of three finite difference
schemes for the ordinary differential equation $u'=-au$ with the
aid of numerical experiments. Numerical artifacts are in particular
demonstrated.
% !enotes


% !split
\section{Mathematical problem}


% !bslidecell 00


\begin{align}
u'(t) &= -au(t),
\label{ode}\\ 
u(0)  &= I,
\label{initial:value}
\end{align}

\begin{itemize}
 \item $t\in (0,T]$

 \item $a$, $I$, and $T$ are prescribed parameters

 \item $u(t)$ is the unknown function
\end{itemize}

\noindent
% !eslidecell


% !bslidecell 01

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.5\linewidth]{../doc/slides/fig/teacher2.jpg}}
\end{center}

% !eslidecell

% !split
\section{Numerical solution method}


% !bpop
\begin{itemize}
 \item Mesh in time: $0= t_0< t_1 \cdots < t_N=T$

 \item Assume constant $\Delta t = t_{n}-t_{n-1}$

 \item $u^n$: numerical approx to the exact solution at $t_n$
\end{itemize}

\noindent
% !epop

% !bpop
Numerical scheme:
   \[
   u^{n+1} = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}u^n,
   \quad n=0,1,\ldots,N-1
   \]
% !epop


% !split

\section{Implementation}

The numerical method is implemented in a Python function:

\bpycod
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
\epycod

% !split
\subsection{The Crank-Nicolson method}



\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/CN.pdf}}
\end{center}


% !split
\subsection{The artifacts can be explained by some theory}

% !bpop
Exact solution of the scheme:

\[ u^n = A^n,\quad A = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}\thinspace .\]
% !epop

% !bpop
\begin{itemize}
 \item Stability: $|A| < 1$

 \item No oscillations: $A>0$

 \item Always for Backward Euler ($\theta=1$)

 \item $\Delta t < 1/a$ for Forward Euler ($\theta=0$)

 \item $\Delta t < 2/a$ for Crank-Nicolson ($\theta=1/2$)
\end{itemize}

\noindent
% !epop

% !bpop

\begin{graybox1admon}[Concluding remarks:]
Only the Backward Euler scheme is guaranteed to always give
qualitatively correct results.
\end{graybox1admon}

% !epop

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: slides3.tex *****************

% LaTeX Beamer file automatically generated from Doconce
% http://code.google.com/p/doconce

%-------------------- begin preamble ----------------------

\documentclass{beamer}

\usetheme{red3}
\usecolortheme{default}

% turn off the almost invisible, yet disturbing, navigation symbols:
\setbeamertemplate{navigation symbols}{}

% Examples on customization:
%\usecolortheme[named=RawSienna]{structure}
%\usetheme[height=7mm]{Rochester}
%\setbeamerfont{frametitle}{family=\rmfamily,shape=\itshape}
%\setbeamertemplate{items}[ball]
%\setbeamertemplate{blocks}[rounded][shadow=true]
%\useoutertheme{infolines}
%
%\usefonttheme{}
%\useinntertheme{}
%
%\setbeameroption{show notes}
%\setbeameroption{show notes on second screen=right}

% fine for B/W printing:
%\usecolortheme{seahorse}

\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage{graphicx}
\usepackage{epsfig}
\usepackage{minted} % requires pygments and latex -shell-escape filename
\usepackage{fancyvrb,relsize}
\usepackage{amsmath,amssymb,bm}
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage{colortbl}
\usepackage[english]{babel}
\usepackage{tikz}
\usepackage{framed,anslistings}
% Use some nice templates
\beamertemplatetransparentcovereddynamic

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each section:
\AtBeginSection[]
{
    \begin{frame}<beamer>[plain]
    \frametitle{}
    \tableofcontents[currentsection]
    \end{frame}
}

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each section:
\AtBeginSection[]
{
    \begin{frame}<beamer>[plain]
    \frametitle{}
    \tableofcontents[currentsection]
    \end{frame}
}

% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command:

%\beamerdefaultoverlayspecification{<+->}

\newcommand{\shortinlinecomment}[3]{\note{\textbf{#1}: #2}}
\newcommand{\longinlinecomment}[3]{\shortinlinecomment{#1}{#2}{#3}}

\newenvironment{notice_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{notice_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{summary_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{warning_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{question_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_colors1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_colors2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_graybox3admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{block_yellowboxadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{paragraphadmon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{graybox1admon}[1][]{\begin{block}{#1}}{\end{block}}
\newenvironment{graybox2admon}[1][]{\begin{block}{#1}}{\end{block}}
\newcommand{\grayboxhrules}[1]{\begin{block}{}#1\end{block}}



% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_bfmath}
\input{newcommands_replace}


% ------------------- main content ----------------------



% ----------------- title -------------------------
\title{On Schemes for Exponential Decay}

% ----------------- author(s) -------------------------
\author{Hans Petter Langtangen\inst{1,2}}
\institute{Center for Biomedical Computing, Simula Research Laboratory\inst{1}
\and
Department of Informatics, University of Oslo\inst{2}}
% ----------------- end author(s) -------------------------


\date{Jan 32, 2100
\\ \ \\ 
\centerline{\includegraphics[width=0.4\linewidth]{../doc/slides/fig/CN_logo.pdf}}
}




\begin{frame}[plain,fragile]
\titlepage
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Goal}

The primary goal of this demo talk is to demonstrate how to write
talks with \href{{http://code.google.com/p/doconce}}{doconce}
and get them rendered in numerous HTML formats.

\begin{graybox1admon}[Layout.]
This version
utilizes beamer slides with the theme red3.
\end{graybox1admon}

\note{
The talk investigates the accuracy of three finite difference
schemes for the ordinary differential equation $u'=-au$ with the
aid of numerical experiments. Numerical artifacts are in particular
demonstrated.
}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Mathematical problem}

\begin{columns}
\column{0.5\textwidth}
\begin{align}
u'(t) &= -au(t),
\label{ode}\\ 
u(0)  &= I,
\label{initial:value}
\end{align}

\begin{itemize}
 \item $t\in (0,T]$

 \item $a$, $I$, and $T$ are prescribed parameters

 \item $u(t)$ is the unknown function
\end{itemize}

\noindent

\column{0.5\textwidth}
\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.5\linewidth]{../doc/slides/fig/teacher2.jpg}}
\end{center}


\end{columns}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Numerical solution method}

\pause
\begin{block}{}
\begin{itemize}
 \item Mesh in time: $0= t_0< t_1 \cdots < t_N=T$

 \item Assume constant $\Delta t = t_{n}-t_{n-1}$

 \item $u^n$: numerical approx to the exact solution at $t_n$
\end{itemize}

\noindent
\end{block}



\pause
\begin{block}{}
Numerical scheme:
   \[
   u^{n+1} = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}u^n,
   \quad n=0,1,\ldots,N-1
   \]
\end{block}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{Implementation}

The numerical method is implemented in a Python function:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def solver(I, a, T, dt, theta):
    """Solve u'=-a*u, u(0)=I, for t in (0,T] with steps of dt."""
    dt = float(dt)           # avoid integer division
    N = int(round(T/dt))     # no of time intervals
    T = N*dt                 # adjust T to fit time step dt
    u = zeros(N+1)           # array of u[n] values
    t = linspace(0, T, N+1)  # time mesh

    u[0] = I                 # assign initial condition
    for n in range(0, N):    # n=0,1,...,N-1
        u[n+1] = (1 - (1-theta)*a*dt)/(1 + theta*dt*a)*u[n]
    return u, t
\end{minted}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{The Crank-Nicolson method}

\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/slides/fig/CN.pdf}}
\end{center}
\end{frame}

\begin{frame}[plain,fragile]
\frametitle{The artifacts can be explained by some theory}

\pause
\begin{block}{}
Exact solution of the scheme:

\[ u^n = A^n,\quad A = \frac{1 - (1-\theta) a\Delta t}{1 + \theta a\Delta t}\thinspace .\]
\end{block}



\pause
\begin{block}{}
\begin{itemize}
 \item Stability: $|A| < 1$

 \item No oscillations: $A>0$

 \item Always for Backward Euler ($\theta=1$)

 \item $\Delta t < 1/a$ for Forward Euler ($\theta=0$)

 \item $\Delta t < 2/a$ for Crank-Nicolson ($\theta=1/2$)
\end{itemize}

\noindent
\end{block}



\pause
\begin{graybox1admon}[Concluding remarks:]
Only the Backward Euler scheme is guaranteed to always give
qualitatively correct results.
\end{graybox1admon}
\end{frame}

\end{document}

************** File: table_1.csv *****************
time,velocity,acceleration
0.0,1.4186,-5.01
2.0,1.376512,11.919
4.0,1.1E+1,14.717624

************** File: table_2.csv *****************
time,velocity,acceleration
0.0,1.4186,-5.01
1.0,1.376512,11.919
3.0,1.1E+1,14.717624

************** File: table_3.csv *****************
i,h_i,\bar T_i,L_i
0,0,288,-0.0065
1,"11,000",216,0.0
2,"20,000",216,0.001
3,"32,000",228,0.0028
4,"47,000",270,0.0
5,"51,000",270,-0.0028
6,"71,000",214,NaN

************** File: table_4.csv *****************
exact,v_1,a_i + v_2,verb_3_
9,9.62,5.57,8.98
-20,-23.39,-7.65,-19.93
10,17.74,-4.50,9.96
0,-9.19,4.13,-0.26

************** File: testtable.csv *****************
i,h_i,\bar T_i,L_i
0,0,288,-0.0065
1,"11,000",216,0.0, 1, 2, 3
2,"20,000",216,   0.001
3,"32,000",228, 0.0028
4,"47,000",   270,0.0
5,"51,000",270,-0.0028
6,"71,000",214, NaN

************** File: testtable.do.txt *****************


|----c----------c----------c----------c----------c----------c----------c-----|
| i        | h_i      | \bar T_i | L_i      |          |          |          |
|----c----------c----------c----------c----------c----------c----------c-----|
| 0        | 0        | 288      | -0.0065  |          |          |          |
| 1        | 11,000   | 216      | 0.0      | 1        | 2        | 3        |
| 2        | 20,000   | 216      | 0.001    |          |          |          |
| 3        | 32,000   | 228      | 0.0028   |          |          |          |
| 4        | 47,000   | 270      | 0.0      |          |          |          |
| 5        | 51,000   | 270      | -0.0028  |          |          |          |
| 6        | 71,000   | 214      | NaN      |          |          |          |
|----------------------------------------------------------------------------|



************** File: github_md.md *****************
<!-- Test of GitHub Flavored Markdown -->

<!-- Write in doconce -->
<!-- Translate with doconce format pandoc githu_md --github_md -->

> ### Problems with a function
> 
> There is a problem with the `f(x)` function
> 
> 
> ```Python
> def f(x):
>     return 1 + x
> 
> ```
> 
> This function should be quadratic.

OK, this is fixed:


```Python
def f(x, a=1, b=1, c=1):
    return a*x**2 + b*x + c

```

### Updated task list

   - [x] Offer an `f(x)` function

   - [ ] Extension to cubic functions

   - [x] Allowing general coefficient in the quadratic function

#### Remaining functionality

<table border="1">
<tr><td align="center"><b>            function            </b></td> <td align="center"><b>            purpose             </b></td> <td align="center"><b>             state              </b></td> </tr>
<tr><td align="left">   <code>g(x)</code>                            </td> <td align="left">   Compute the Gaussian function.    </td> <td align="left">   Formula ready.                    </td> </tr>
<tr><td align="left">   <code>h(x)</code>                            </td> <td align="left">   Heaviside function.               </td> <td align="left">   Formula ready.                    </td> </tr>
<tr><td align="left">   <code>I(x)</code>                            </td> <td align="left">   Indicator function.               </td> <td align="left">   Nothing done yet.                 </td> </tr>
</table>


************** File: tmp_Doconce.do.txt *****************

TITLE: My Test of Class Doconce
AUTHOR: Hans Petter Langtangen; Simula Research Laboratory; Dept. of Informatics, Univ. of Oslo
DATE: Jan 32, 2100



======= First Section =======


Here is some
text for section 1.

This is a *first* example of using the _DocWriter
module_ for writing documents from *Python* scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as `fixed width fonts`
in plain text.

===== First Subsection =====

Some text for the subsection.

__Test of a Paragraph.__ 
Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
o item1
o item2

    o subitem1
    o subitem2

o item3

    o subitem3
    o subitem4
...with some trailing text.
=== First Subsubsection with an Itemize List ===


* item1
* item2

    * subitem1
    * subitem2

* item3

    * subitem3
    * subitem4
Here is some Python code:
!bc

class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

!ec

======= Second Section =======

Here is a description list:
- keyword1:  item1
- keyword2:  item2 goes here, with a colon : and some text after

    - key3:  subitem1
    - key4:  subitem2

- key5:  item3

    - key6:  subitem3
    - key7:  subitem4


And here is a table:

   |---------------------------------------|
   | a                 | b                 |
   | c                 | d                 |
   | e                 | and a longer text |
   |---------------------------------------|


************** File: tmp_DocWriter.do.txt *****************

TITLE: My Test of Class DocWriter
AUTHOR: Hans Petter Langtangen; Simula Research Laboratory; Dept. of Informatics, Univ. of Oslo
DATE: Jan 32, 2100



======= First Section =======


Here is some
text for section 1.

This is a *first* example of using the _DocWriter
module_ for writing documents from *Python* scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as `fixed width fonts`
in plain text.

===== First Subsection =====

Some text for the subsection.

__Test of a Paragraph.__ 
Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
o item1
o item2

    o subitem1
    o subitem2

o item3

    o subitem3
    o subitem4
...with some trailing text.
=== First Subsubsection with an Itemize List ===


* item1
* item2

    * subitem1
    * subitem2

* item3

    * subitem3
    * subitem4
Here is some Python code:
!bc

class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

!ec

======= Second Section =======

Here is a description list:
- keyword1:  item1
- keyword2:  item2 goes here, with a colon : and some text after

    - key3:  subitem1
    - key4:  subitem2

- key5:  item3

    - key6:  subitem3
    - key7:  subitem4


And here is a table:

   |---------------------------------------|
   | a                 | b                 |
   | c                 | d                 |
   | e                 | and a longer text |
   |---------------------------------------|


************** File: tmp_DocWriter.html *****************
<!-- HTML document generated by __main__.HTML -->
<html>
<body bgcolor="white">

<title>My Test of Class DocWriter</title>
<center><h1>My Test of Class DocWriter</h1></center>

<center>
<h4>Hans Petter Langtangen</h4>
<h6>Simula Research Laboratory</h6>
<h6>Dept. of Informatics, Univ. of Oslo</h6>
</center>

<center>Sat, 29 Jun 2013 (15:58)</center>



<p>

<h1>First Section</h1>

Here is some
text for section 1.

This is a <em>first</em> example of using the <b>DocWriter
module</b> for writing documents from <em>Python</em> scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as <tt>fixed width fonts</tt>
in plain text.

<h3>First Subsection</h3>
Some text for the subsection.

<p><!-- paragraph with heading -->
<b>Test of a Paragraph.</b>

Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
<ol> <!-- start of "enumerate" list -->
<p><li> item1
<p><li> item2

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ol> <!-- end of "enumerate" list -->
<p><li> item3

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ol> <!-- end of "enumerate" list -->
</ol> <!-- end of "enumerate" list -->
...with some trailing text.
<h4>First Subsubsection with an Itemize List</h4>

<ul> <!-- start of "itemize" list -->
<p><li> item1
<p><li> item2

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ul> <!-- end of "itemize" list -->
<p><li> item3

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ul> <!-- end of "itemize" list -->
</ul> <!-- end of "itemize" list -->
Here is some Python code:
<pre>
class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

</pre>

<h1>Second Section</h1>
Here is a description list:
<dl> <!-- start of "description" list -->
<p><dt>keyword1</dt><dd> item1</dd>
<p><dt>keyword2</dt><dd> item2 goes here, with a colon : and some text after</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key3</dt><dd> subitem1</dd>
    <p><dt>key4</dt><dd> subitem2</dd>
  </dl> <!-- end of "description" list -->
<p><dt>key5</dt><dd> item3</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key6</dt><dd> subitem3</dd>
    <p><dt>key7</dt><dd> subitem4</dd>
  </dl> <!-- end of "description" list -->
</dl> <!-- end of "description" list -->

<p>
And here is a table:
<p>
<table border="2" cellpadding="5" cellspacing="2">
<tr><td>a</td><td>b</td></tr>
<tr><td>c</td><td>d</td></tr>
<tr><td>e</td><td>and a longer text</td></tr>
</table>


</body>
</html>

************** File: tmp_HTML.html *****************
<!-- HTML document generated by __main__.HTML -->
<html>
<body bgcolor="white">

<title>My Test of Class HTML</title>
<center><h1>My Test of Class HTML</h1></center>

<center>
<h4>Hans Petter Langtangen</h4>
<h6>Simula Research Laboratory</h6>
<h6>Dept. of Informatics, Univ. of Oslo</h6>
</center>

<center>Sat, 29 Jun 2013 (15:58)</center>



<p>

<h1>First Section</h1>

Here is some
text for section 1.

This is a <em>first</em> example of using the <b>DocWriter
module</b> for writing documents from <em>Python</em> scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as <tt>fixed width fonts</tt>
in plain text.

<h3>First Subsection</h3>
Some text for the subsection.

<p><!-- paragraph with heading -->
<b>Test of a Paragraph.</b>

Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
<ol> <!-- start of "enumerate" list -->
<p><li> item1
<p><li> item2

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ol> <!-- end of "enumerate" list -->
<p><li> item3

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ol> <!-- end of "enumerate" list -->
</ol> <!-- end of "enumerate" list -->
...with some trailing text.
<h4>First Subsubsection with an Itemize List</h4>

<ul> <!-- start of "itemize" list -->
<p><li> item1
<p><li> item2

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ul> <!-- end of "itemize" list -->
<p><li> item3

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ul> <!-- end of "itemize" list -->
</ul> <!-- end of "itemize" list -->
Here is some Python code:
<pre>
class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

</pre>

<h1>Second Section</h1>
Here is a description list:
<dl> <!-- start of "description" list -->
<p><dt>keyword1</dt><dd> item1</dd>
<p><dt>keyword2</dt><dd> item2 goes here, with a colon : and some text after</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key3</dt><dd> subitem1</dd>
    <p><dt>key4</dt><dd> subitem2</dd>
  </dl> <!-- end of "description" list -->
<p><dt>key5</dt><dd> item3</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key6</dt><dd> subitem3</dd>
    <p><dt>key7</dt><dd> subitem4</dd>
  </dl> <!-- end of "description" list -->
</dl> <!-- end of "description" list -->

<p>
And here is a table:
<p>
<table border="2" cellpadding="5" cellspacing="2">
<tr><td>a</td><td>b</td></tr>
<tr><td>c</td><td>d</td></tr>
<tr><td>e</td><td>and a longer text</td></tr>
</table>


</body>
</html>

************** File: make.sh *****************
#!/bin/sh -x
sh ./clean.sh

# Make latest bin/doconce doc
doconce > doconce_program.sh

doconce format html quickref --no_pygments_html --no_preprocess

# latex (shpro because of @@@CODE copy, need minted style)
doconce format latex quickref --no_preprocess
doconce ptex2tex quickref -DMINTED -DHELVETICA envir=Verbatim
# cannot run ptex2tex since it always runs preprocess
latex -shell-escape quickref.tex
latex -shell-escape quickref.tex
dvipdf quickref.dvi

# Sphinx
doconce format sphinx quickref --no_preprocess
rm -rf sphinx-rootdir
doconce sphinx_dir author='HPL' version=0.7 quickref
doconce replace 'doconce format sphinx %s' 'doconce format sphinx %s --no-preprocess' automake_sphinx.py
python automake_sphinx.py
cp quickref.rst quickref.sphinx.rst  # save

# reStructuredText:
doconce format rst quickref --no_preprocess
rst2xml.py quickref.rst > quickref.xml
rst2odt.py quickref.rst > quickref.odt
rst2html.py quickref.rst > quickref.rst.html
rst2latex.py quickref.rst > quickref.rst.tex
latex quickref.rst.tex
latex quickref.rst.tex
dvipdf quickref.rst.dvi

# Other formats:
doconce format plain quickref --no_preprocess
doconce format gwiki quickref --no_preprocess
doconce format mwiki quickref --no_preprocess
doconce format cwiki quickref --no_preprocess
doconce format st quickref --no_preprocess
doconce format epytext quickref --no_preprocess
doconce format pandoc quickref --no_preprocess

rm -rf demo
mkdir demo
cp -r quickref.do.txt quickref.html quickref.p.tex quickref.tex quickref.pdf quickref.rst quickref.xml quickref.rst.html quickref.rst.tex quickref.rst.pdf quickref.gwiki quickref.mwiki quickref.cwiki quickref.txt quickref.epytext quickref.st quickref.md sphinx-rootdir/_build/html demo

cd demo
cat > index.html <<EOF
<HTML><BODY>
<TITLE>Demo of Doconce formats</TITLE>
<H3>Doconce demo</H3>

Doconce is a minimum tagged markup language. The file
<a href="quickref.do.txt">quickref.do.txt</a> is the source of the
Doconce quickref, written in the Doconce format.
Running
<pre>
doconce format html quickref.do.txt
</pre>
produces the HTML file <a href="quickref.html">quickref.html</a>.
Going from Doconce to LaTeX is done by
<pre>
doconce format latex quickref.do.txt
</pre>
resulting in the file <a href="quickref.tex">quickref.tex</a>, which can
be compiled to a PDF file <a href="quickref.pdf">quickref.pdf</a>
by running <tt>latex</tt> and <tt>dvipdf</tt> the standard way.
<p>
The reStructuredText (reST) format is of particular interest:
<pre>
doconce format rst    quickref.do.txt  # standard reST
doconce format sphinx quickref.do.txt  # Sphinx extension of reST
</pre>
The reST file <a href="quickref.rst">quickref.rst</a> is a starting point
for conversion to many other formats: OpenOffice,
<a href="quickref.xml">XML</a>, <a href="quickref.rst.html">HTML</a>,
<a href="quickref.rst.tex">LaTeX</a>,
and from LaTeX to <a href="quickref.rst.pdf">PDF</a>.
The <a href="quickref.sphinx.rst">Sphinx</a> dialect of reST
can be translated to <a href="quickref.sphinx.pdf">PDF</a>
and <a href="html/index.html">HTML</a>.
<p>
Doconce can also be converted to
<a href="quickref.gwiki">Googlecode wiki</a>,
<a href="quickref.mwiki">MediaWiki</a>,
<a href="quickref.cwiki">Creole wiki</a>,
<a href="quickref.md">a Pandoc</a>,
<a href="quickref.st">Structured Text</a>,
<a href="quickref.epytext">Epytext</a>,
and maybe the most important format of all:
<a href="quickref.txt">plain untagged ASCII text</a>.
</BODY>
</HTML>
EOF

echo
echo "Go to the demo directory and load index.html into a web browser."

# update demo (recall that there is no .hg dir except in the top dir
# so we can just take an rm and cp)
cd ..
rm -rf ../demos/quickref
cp -r demo ../demos/quickref
# update wiki too
cp quickref.gwiki ../../../doconce.wiki/Quickref.wiki

************** File: quickref.do.txt *****************
TITLE: Doconce Quick Reference
AUTHOR: Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Department of Informatics, University of Oslo
DATE: today
TOC: on

_WARNING: This quick reference is very incomplete!_

__Mission.__ Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's `blogger.com`, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

===== Supported Formats =====

Doconce currently translates files to the following formats:

 * LaTeX (format `latex` and `pdflatex`)
 * HTML (format `html`)
 * reStructuredText (format `rst`)
 * plain (untagged) ASCII (format `plain`)
 * Sphinx (format `sphinx`)
 * IPython notebook (format `ipynb`)
 * MediaWiki (format `mwiki`)
 * (Pandoc extended) Markdown (format `pandoc`)
 * Googlecode wiki (format `gwiki`)
 * Creoloe wiki (format `cwiki`)
 * Epydoc (format `epydoc`)
 * StructuredText (format `st`)

For documents with much code and mathematics, the best (and most supported)
formats are `latex`, `pdflatex`, `sphinx`, and `html`; and to a slightly
less extent `mwiki` and `pandoc`. The HTML format supports blogging on
Google and Wordpress.


===== Emacs syntax support =====

The file ".doconce-mode.el": "https://doconce.googlecode.com/hg/misc/.doconce-mode.el" in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add `(load-file "~/.doconce-mode.el")` to the `.emacs`
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

|--------------------------------------------------------|
| Emacs key      | Action                                |
|----l-------------------------l-------------------------|
|  Ctrl+c f      | figure                                |
|  Ctrl+c v      | movie/video                           |
|  Ctrl+c h1     | heading level 1 (section/h1)          |
|  Ctrl+c h2     | heading level 2 (subsection/h2)       |
|  Ctrl+c h3     | heading level 2 (subsection/h3)       |
|  Ctrl+c hp     | heading for paragraph                 |
|  Ctrl+c me     | math environment: !bt equation !et    |
|  Ctrl+c ma     | math environment: !bt align !et       |
|  Ctrl+c ce     | code environment: !bc !ec             |
|  Ctrl+c cf     | code from file: @@@CODE               |
|  Ctrl+c table2 | table with 2 columns                  |
|  Ctrl+c table3 | table with 3 columns                  |
|  Ctrl+c table4 | table with 4 columns                  |
|  Ctrl+c exer   | exercise outline                      |
|  Ctrl+c slide  | slide outline                         |
|  Ctrl+c help   | print this table                      |
|--------------------------------------------------------|

===== Title, Authors, and Date =====

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
!bc
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
!ec
The entire title must appear on a single line.
The author syntax is
!bc
name Email: somename@adr.net at institution1 & institution2
!ec
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the `&` keyword
separates the institutions (the keyword `and` works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from `today` if not the
current date is wanted, e.g., `Feb 22, 2016`.

The table of contents is removed by writing `TOC: off`.


===== Section Types =====
label{quick:sections}

|----------------c--------|------------------c---------------------------|
|      Section type       |        Syntax                                |
|----------------l--------|------------------l---------------------------|
| chapter                 | `========= Heading ========` (9 `=`)         |
| section                 | `======= Heading =======`    (7 `=`)         |
| subsection              | `===== Heading =====`        (5 `=`)         |
| subsubsection           | `=== Heading ===`            (3 `=`)         |
| paragraph               | `__Heading.__`               (2 `_`)         |
| abstract                | `__Abstract.__` Running text...              |
| appendix                | `======= Appendix: heading =======` (7 `=`)  |
| appendix                | `===== Appendix: heading =====` (5 `=`)      |
| exercise                | `======= Exercise: heading =======` (7 `=`)  |
| exercise                | `===== Exercise: heading =====` (5 `=`)      |
|------------------------------------------------------------------------|

Note that abstracts are recognized by starting with `__Abstract.__` or
`__Summary.__` at the beginning of a line and ending with three or
more `=` signs of the next heading.

The `Exercise:` keyword kan be substituted by `Problem:` or `Project:`.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

===== Inline Formatting =====

Words surrounded by `*` are emphasized: `*emphasized words*` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: `_boldface_` becomes _boldface_. Colored words
are also possible: the text
!bc
`color{red}{two red words}`
!ec
becomes color{red}{two red words}.

===== Lists =====

There are three types of lists: *bullet lists*, where each item starts
with `*`, *enumeration lists*, where each item starts with `o` and gets
consqutive numbers,
and *description* lists, where each item starts with `-` followed
by a keyword and a colon.
!bc
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
!ec
The code above follows.

Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are indented.
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line


===== Comment lines =====

Lines starting with `#` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats `rst` and
`sphinx` are desired.

Comment lines starting with `##` are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
`# #ifdef EXTRA` and `# #endif` around the text. The command line
option `-DEXTRA` will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


===== Inline comments =====

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax
!bc
[name: running text]
!ec
where `name` is the name or ID of an author or reader making the comment,
and `running text` is the comment. Here goes an example.
[hpl: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the `-DTOTONOTES` option to `ptex2tex` or `doconce ptex2tex`,
colorful margin or inline boxes (using the `todonotes` package)
make it very easy to spot the comments.

Running
!bc sys
doconce format html mydoc.do.txt --skip_inline_comments
!ec
removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by
!bc sys
doconce remove_inline_comments mydoc.do.txt
!ec

===== Verbatim/Computer Code =====

Inline verbatim code is typeset within back-ticks, as in
!bc
Some sentence with `words in verbatim style`.
!ec
resulting in Some sentence with `words in verbatim style`.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between `!bc xxx` and `!ec` directives, which must appear on the
beginning of the line. A specification `xxx` indicates what verbatim
formatting style that is to be used. Typical values for `xxx` are
nothing, `cod` for a code snippet, `pro` for a complete program,
`sys` for a terminal session, `dat` for a data file (or output from a
program),
`Xpro` or `Xcod` for a program or code snipped, respectively,
in programming `X`, where `X` may be `py` for Python,
`cy` for Cython, `sh` for Bash or other Unix shells,
`f` for Fortran, `c` for C, `cpp` for C++, `m` for MATLAB,
`pl` for Perl. For output in `latex` one can let `xxx` reflect any
defined verbatim environment in the `ptex2tex` configuration file
(`.ptex2tex.cfg`). For `sphinx` output one can insert a comment
!bc
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
!ec
that maps environments (`xxx`) onto valid language types for
Pygments (which is what `sphinx` applies to typeset computer code).

The `xxx` specifier has only effect for `latex` and
`sphinx` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

!bc cod
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
!ec

# When showing copy from file in !bc envir, indent a character - otherwise
# ptex2tex is confused and starts copying...
Computer code can also be copied from a file:
!bc
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
!ec
The `@@@CODE` identifier must appear at the very beginning of the line.
The first specification copies the complete file `doconce_program.sh`.
The second specification copies from the first line matching the *regular
expression* `doconce clean` up to, but not including the line
matching the *regular expression* `^doconce split_rst`.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside `!bc shpro`
and `!ec` directives, if a complete file is copied, while the
directives become `!bc shcod` and `!ec` when a code snippet is copied
from file. In general, for a filename extension `.X`, the environment
becomes `!bc Xpro` or `!bc Xcod` for a complete program or snippet,
respectively. The enivorments (`Xcod` and `Xpro`) are only active
for `latex` and `sphinx` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

===== LaTeX Mathematics =====

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats `html`, `sphinx`, `latex`,
pdflatex`, `pandoc`, and `mwiki` work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
$Ax=b$. To help increase readability in other formats than `sphinx`,
`latex`, and `pdflatex`, inline mathematics may have a more human
readable companion expression. The syntax is like
!bc
$\sin(\norm{\bf u})$|$sin(||u||)$
!ec
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
`!bt`
and
`!et` (begin/end TeX) directives starting on the beginning of a line:

!bc
|bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
|et
!ec
## Note: |bt and |et (and |bc and |ec below) are used to illustrate
## tex and code blocks in inside verbatim blocks and are replaced
## by !bt, !et, !bc, and !ec after all other formatting is finished.

This LaTeX code gets rendered as

!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
Here is a single equation:

!bc
|bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
|et
!ec
which results in

!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et

Any LaTeX syntax is accepted, but if output in the `sphinx`, `pandoc`,
`mwiki`, `html`, or `ipynb` formats
is also important, one should follow these rules:

  * Use only the equation environments `\[`, `\]`,
    `equation`, `equation*`, `align`, and `align*`.
  * MediaWiki (`mwiki`) does not support references to equations.

(Doconce performs extensions to `sphinx` and other formats such that
labels in `align` environments work well.)

!bnotice
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as `sphinx`, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically `if FORMAT in ("latex", "pdflatex")`) to
include special code for `latex` and `pdflatex` output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.
!enotice

__LaTeX Newcommands.__
The author can define `newcommand` statements in files with names
`newcommands*.tex`. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that `newcommands_keep.tex`
contains the newcommands that are kept in the document, while
those in `newcommands_replace.tex` will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For `html`, `sphinx`, `latex`, `pdflatex`,
`mwiki`, `ipynb`, and `pandoc`, the mathematics in newcommands is
rendered nicely anyway.


===== Hyperlinks =====

Links use either a link text or the raw URL:

!bc
Here is some "some link text": "http://some.net/address"
(as in "search google": "http://google.com")
or just the raw address: URL: "http://google.com".

Links to files typeset in verbatim mode applies backtics:
"`myfile.py`": "http://some.net/some/place/myfile.py".

Mail addresses works too: send problems to
"`hpl@simula.no`": "mailto:hpl@simula.no"
or just "send mail": "mailto:hpl@simula.no".
!ec

===== Figures and Movies =====

Figures and movies have almost equal syntax:
!bc
FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

!ec
Note three important syntax details:

  o A mandatory comma after the figure/movie filename,
  o no comments between `width`, `height`, and `frac` and no spaces
    around the `=` characters,
  o all of the command must appear on a single line,
  o there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The `width`
and `height` parameters affect HTML formats (`html`, `rst`, `sphinx`),
while `frac` is the width of the image as a fraction of the total text
width in the `latex` and `pdflatex` formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
!bc sys
doconce combine_images image1 image2 ... output_image
!ec
This command applies `montage` or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in `html` and `sphinx` documents
and otherwise be represented by a link. The syntax is

!bc
MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

!ec
The latter results in

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.


===== Tables =====

The table in Section ref{quick:sections} was written with this
syntax:
!bc
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
!ec

Note that

 * Each line begins and ends with a vertical bar (pipe symbol).
 * Column data are separated by a vertical bar (pipe symbol).
 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 * Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option `--tables2csv` (to `doconce format`)
makes Doconce dump each table to CSV format in a file `table_X.csv`,
where `X` is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

===== Labels and References =====

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
!bc
label{name}
!ec
with no backslash
preceding the label keyword. It is common practice to choose `name`
as some hierarchical name, say `a:b:c`, where `a` and `b` indicate
some abbreviations for a section and/or subsection for the topic and
`c` is some name for the particular unit that has a label.

A reference to the label `name` is written as
!bc
ref{name}
!ec
again with no backslash before `ref`.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


===== Citations and Bibliography =====

Single citations are written as
!bc
cite{name}
!ec
where `name` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have `name` on the form
`Author1_Author2_YYYY`, `Author_YYYY`, or `Author1_etal_YYYY`, where
`YYYY` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
!bc
cite{name1,name2,name3}
!ec

The bibliography is specified by a line `BIBFILE: papers.pub`,
where `papers.pub` is a publication database in the
"Publish": "https://bitbucket.org/logg/publish" format.
BibTeX `.bib` files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

===== Generalized Citations =====

There is a *generalized referencing* feature in Doconce that allows
a reference with `ref` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is
!bc
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
!ec
The output from a generalized reference is the text `internal` if all
`ref{label}` references in `internal` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
`latex` or `pdflatex` one assumes that the references in `internal`
are to external documents declared by a comment line `#
Externaldocuments: testdoc, mydoc` (usually after the title, authors,
and date). In this case the output text is `internal cite` and the
LaTeX package `xr` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
`external` text will be the output.

===== Index of Keywords =====

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
!bc
index{name}
!ec
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the `latex`,
`pdflatex`, `rst`, and `sphinx` formats.

===== Capabilities of The Program `doconce` =====

The `doconce` program can be used for a number of purposes besides
transforming a `.do.txt` file to some format. Here is the
list of capabilities:

@@@CODE doconce_program.sh

===== Exercises =====

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  * a label (optional)
  * a solution file (optional)
  * name of file with a student solution (optional)
  * main exercise text (required)
  * a short answer (optional)
  * a full solution (optional)
  * one or more hints (optional)
  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:
!bc
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

|bhint
Wikipedia has the formula for the curve.
|ehint

|bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
|ehint
!ec
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

!bc
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
!ec
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

!bc
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

|bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

|bans
Short answer to subexercise a).
|eans

|bhint
First hint to subexercise a).
|ehint

|bhint
Second hint to subexercise a).
|ehint
|esubex

|bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

|bhint
A hint for this subexercise.
|ehint

|bsol
Here goes the solution of this subexercise.
|esol
|esubex

|bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
|eremarks

|bsol
Here goes a full solution of the whole exercise.
|esol

!ec
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments `--without_answers` and `--without_solutions`
turn off output of answers and solutions, respectively, except for
examples.


===== Environments =====

Doconce environments start with `!benvirname` and end with `!eenvirname`,
where `envirname` is the name of the environment. Here is a listing of
the environments:

 * `c`: computer code (or verbatim text)
 * `t`: math blocks with LaTeX syntax
 * `subex`: sub-exercise
 * `ans`: short answer to exercise or sub-exercise
 * `sol`: full solution to exercise or sub-exercise
 * `quote`: indented text
 * `notice`, `summary`, `warning`, `question`, `hint`: admonition boxes with
    custom title, special icon, and (frequently) background color
 * `pop`: text to gradually pop up in slide presentations
 * `slidecell`: indication of cells in a grid layout for elements on a
   slide


===== Preprocessing =====

Doconce documents may utilize a preprocessor, either `preprocess` and/or
`mako`. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The `mako` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command `doconce format` first runs `preprocess` and then `mako`.
Here is a typical example on utilizing `preprocess` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

!bc
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
!ec

With the `mako` preprocessor the if-else tests have slightly different syntax.
An "example document": "http://hplgit.github.com/bioinf-py/" contains
some illustrations on how to utilize `mako` (clone the GitHub project and
examine the Doconce source and the `doc/src/make.sh` script).

===== Resources =====

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.html *****************
<!DOCTYPE html>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Doconce Quick Reference">



<style type="text/css">
    /* blueish style */

    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    pre { background: #ededed; color: #000; padding: 15px;}
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .alert-text-small   { font-size: 80%;  }
    .alert-text-large   { font-size: 130%; }
    .alert-text-normal  { font-size: 90%;  }
    .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:1px solid #bababa;
             -webkit-border-radius: 4px; -moz-border-radius: 4px;
             border-radius: 4px
             color: #555;
             background-color: #f8f8f8;
             background-position: 10px 5px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 55px;
             width: 75%;
     }
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert li {margin-top: 1em}
     .alert-block p+p {margin-top:5px}
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_notice.png); }
     .alert-summary  { background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_summary.png); }
     .alert-warning { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_warning.png); }
     .alert-question {background-image:url(https://doconce.googlecode.com/hg/bundled/html_images/small_gray_question.png); }

</style>

</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [(' Supported Formats ', 2, None, '___sec0'),
              (' Emacs syntax support ', 2, None, '___sec1'),
              (' Title, Authors, and Date ', 2, None, '___sec2'),
              (' Section Types ', 2, 'quick:sections', 'quick:sections'),
              (' Inline Formatting ', 2, None, '___sec4'),
              (' Lists ', 2, None, '___sec5'),
              (' Comment lines ', 2, None, '___sec6'),
              (' Inline comments ', 2, None, '___sec7'),
              (' Verbatim/Computer Code ', 2, None, '___sec8'),
              (' LaTeX Mathematics ', 2, None, '___sec9'),
              (' Hyperlinks ', 2, None, '___sec10'),
              (' Figures and Movies ', 2, None, '___sec11'),
              (' Tables ', 2, None, '___sec12'),
              (' Labels and References ', 2, None, '___sec13'),
              (' Citations and Bibliography ', 2, None, '___sec14'),
              (' Generalized Citations ', 2, None, '___sec15'),
              (' Index of Keywords ', 2, None, '___sec16'),
              (' Capabilities of The Program `doconce` ',
               2,
               None,
               '___sec17'),
              (' Exercises ', 2, None, '___sec18'),
              (' Environments ', 2, None, '___sec19'),
              (' Preprocessing ', 2, None, '___sec20'),
              (' Resources ', 2, None, '___sec21')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">




    
<!-- ------------------- main content ---------------------- -->


<title>Doconce Quick Reference</title>

<center><h1>Doconce Quick Reference</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->

<h2>Table of contents</h2>

<p>
<a href="#___sec0"> Supported Formats </a><br>
<a href="#___sec1"> Emacs syntax support </a><br>
<a href="#___sec2"> Title, Authors, and Date </a><br>
<a href="#quick:sections"> Section Types </a><br>
<a href="#___sec4"> Inline Formatting </a><br>
<a href="#___sec5"> Lists </a><br>
<a href="#___sec6"> Comment lines </a><br>
<a href="#___sec7"> Inline comments </a><br>
<a href="#___sec8"> Verbatim/Computer Code </a><br>
<a href="#___sec9"> LaTeX Mathematics </a><br>
<a href="#___sec10"> Hyperlinks </a><br>
<a href="#___sec11"> Figures and Movies </a><br>
<a href="#___sec12"> Tables </a><br>
<a href="#___sec13"> Labels and References </a><br>
<a href="#___sec14"> Citations and Bibliography </a><br>
<a href="#___sec15"> Generalized Citations </a><br>
<a href="#___sec16"> Index of Keywords </a><br>
<a href="#___sec17"> Capabilities of The Program <code>doconce</code> </a><br>
<a href="#___sec18"> Exercises </a><br>
<a href="#___sec19"> Environments </a><br>
<a href="#___sec20"> Preprocessing </a><br>
<a href="#___sec21"> Resources </a><br>

<p>
<b>WARNING: This quick reference is very incomplete!</b>

<p>
<b>Mission.</b>
Enable writing documentation with much mathematics and
computer code <em>once, in one place</em> and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's <code>blogger.com</code>, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

<h3>Supported Formats  <a name="___sec0"></a></h3>

<p>
Doconce currently translates files to the following formats:

<p>

<ul>
 <li> LaTeX (format <code>latex</code> and <code>pdflatex</code>)</li>
 <li> HTML (format <code>html</code>)</li>
 <li> reStructuredText (format <code>rst</code>)</li>
 <li> plain (untagged) ASCII (format <code>plain</code>)</li>
 <li> Sphinx (format <code>sphinx</code>)</li>
 <li> IPython notebook (format <code>ipynb</code>)</li>
 <li> MediaWiki (format <code>mwiki</code>)</li>
 <li> (Pandoc extended) Markdown (format <code>pandoc</code>)</li>
 <li> Googlecode wiki (format <code>gwiki</code>)</li>
 <li> Creoloe wiki (format <code>cwiki</code>)</li>
 <li> Epydoc (format <code>epydoc</code>)</li>
 <li> StructuredText (format <code>st</code>)</li>
</ul>

For documents with much code and mathematics, the best (and most supported)
formats are <code>latex</code>, <code>pdflatex</code>, <code>sphinx</code>, and <code>html</code>; and to a slightly
less extent <code>mwiki</code> and <code>pandoc</code>. The HTML format supports blogging on
Google and Wordpress.

<h3>Emacs syntax support  <a name="___sec1"></a></h3>

<p>
The file <a href="https://doconce.googlecode.com/hg/misc/.doconce-mode.el">.doconce-mode.el</a> in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add <code>(load-file "~/.doconce-mode.el")</code> to the <code>.emacs</code>
file.

<p>
Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

<p>
<table border="1">
<tr><td align="center"><b>             Emacs key              </b></td> <td align="center"><b>               Action               </b></td> </tr>
<tr><td align="left">   Ctrl+c f                              </td> <td align="left">   figure                                </td> </tr>
<tr><td align="left">   Ctrl+c v                              </td> <td align="left">   movie/video                           </td> </tr>
<tr><td align="left">   Ctrl+c h1                             </td> <td align="left">   heading level 1 (section/h1)          </td> </tr>
<tr><td align="left">   Ctrl+c h2                             </td> <td align="left">   heading level 2 (subsection/h2)       </td> </tr>
<tr><td align="left">   Ctrl+c h3                             </td> <td align="left">   heading level 2 (subsection/h3)       </td> </tr>
<tr><td align="left">   Ctrl+c hp                             </td> <td align="left">   heading for paragraph                 </td> </tr>
<tr><td align="left">   Ctrl+c me                             </td> <td align="left">   math environment: !bt equation !et    </td> </tr>
<tr><td align="left">   Ctrl+c ma                             </td> <td align="left">   math environment: !bt align !et       </td> </tr>
<tr><td align="left">   Ctrl+c ce                             </td> <td align="left">   code environment: !bc !ec             </td> </tr>
<tr><td align="left">   Ctrl+c cf                             </td> <td align="left">   code from file: @@@CODE               </td> </tr>
<tr><td align="left">   Ctrl+c table2                         </td> <td align="left">   table with 2 columns                  </td> </tr>
<tr><td align="left">   Ctrl+c table3                         </td> <td align="left">   table with 3 columns                  </td> </tr>
<tr><td align="left">   Ctrl+c table4                         </td> <td align="left">   table with 4 columns                  </td> </tr>
<tr><td align="left">   Ctrl+c exer                           </td> <td align="left">   exercise outline                      </td> </tr>
<tr><td align="left">   Ctrl+c slide                          </td> <td align="left">   slide outline                         </td> </tr>
<tr><td align="left">   Ctrl+c help                           </td> <td align="left">   print this table                      </td> </tr>
</table>

<h3>Title, Authors, and Date  <a name="___sec2"></a></h3>

<p>
A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
<!-- begin verbatim block -->
<pre><code>TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory &amp; Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
</code></pre>
<!-- end verbatim block -->
The entire title must appear on a single line.
The author syntax is
<!-- begin verbatim block -->
<pre><code>name Email: somename@adr.net at institution1 &amp; institution2
</code></pre>
<!-- end verbatim block -->
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the <code>&</code> keyword
separates the institutions (the keyword <code>and</code> works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

<p>
The date can be set as any text different from <code>today</code> if not the
current date is wanted, e.g., <code>Feb 22, 2016</code>.

<p>
The table of contents is removed by writing <code>TOC: off</code>.

<h3>Section Types <a name="quick:sections"></a></h3>

<p>
<table border="1">
<tr><td align="center"><b>                            Section type                           </b></td> <td align="center"><b>                               Syntax                              </b></td> </tr>
<tr><td align="left">   chapter                                                              </td> <td align="left">   <code>========= Heading ========</code> (9 <code>=</code>)           </td> </tr>
<tr><td align="left">   section                                                              </td> <td align="left">   <code>======= Heading =======</code>    (7 <code>=</code>)           </td> </tr>
<tr><td align="left">   subsection                                                           </td> <td align="left">   <code>===== Heading =====</code>        (5 <code>=</code>)           </td> </tr>
<tr><td align="left">   subsubsection                                                        </td> <td align="left">   <code>=== Heading ===</code>            (3 <code>=</code>)           </td> </tr>
<tr><td align="left">   paragraph                                                            </td> <td align="left">   <code>__Heading.__</code>               (2 <code>_</code>)           </td> </tr>
<tr><td align="left">   abstract                                                             </td> <td align="left">   <code>__Abstract.__</code> Running text...                           </td> </tr>
<tr><td align="left">   appendix                                                             </td> <td align="left">   <code>======= Appendix: heading =======</code> (7 <code>=</code>)    </td> </tr>
<tr><td align="left">   appendix                                                             </td> <td align="left">   <code>===== Appendix: heading =====</code> (5 <code>=</code>)        </td> </tr>
<tr><td align="left">   exercise                                                             </td> <td align="left">   <code>======= Exercise: heading =======</code> (7 <code>=</code>)    </td> </tr>
<tr><td align="left">   exercise                                                             </td> <td align="left">   <code>===== Exercise: heading =====</code> (5 <code>=</code>)        </td> </tr>
</table>
<p>
Note that abstracts are recognized by starting with <code>__Abstract.__</code> or
<code>__Summary.__</code> at the beginning of a line and ending with three or
more <code>=</code> signs of the next heading.

<p>
The <code>Exercise:</code> keyword kan be substituted by <code>Problem:</code> or <code>Project:</code>.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

<h3>Inline Formatting  <a name="___sec4"></a></h3>

<p>
Words surrounded by <code>*</code> are emphasized: <code>*emphasized words*</code> becomes
<em>emphasized words</em>. Similarly, an underscore surrounds words that
appear in boldface: <code>_boldface_</code> becomes <b>boldface</b>. Colored words
are also possible: the text
<!-- begin verbatim block -->
<pre><code>`color{red}{two red words}`
</code></pre>
<!-- end verbatim block -->
becomes <font color="red">two red words</font>.

<h3>Lists  <a name="___sec5"></a></h3>

<p>
There are three types of lists: <em>bullet lists</em>, where each item starts
with <code>*</code>, <em>enumeration lists</em>, where each item starts with <code>o</code> and gets
consqutive numbers,
and <em>description</em> lists, where each item starts with <code>-</code> followed
by a keyword and a colon.
<!-- begin verbatim block -->
<pre><code>Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
</code></pre>
<!-- end verbatim block -->
The code above follows.

<p>
Here is a bullet list:

<p>

<ul>
 <li> item1</li>
 <li> item2</li>

<ul>
  <li> subitem1 of item2</li>
  <li> subitem2 of item2</li>
</ul>

 <li> item3</li>
</ul>

Note that sublists are indented.
Here is an enumeration list:

<p>

<ol>
<li> item1</li>
<li> item2
   may appear on
   multiple lines</li>

<ol>
 <li> subitem1 of item2</li>
 <li> subitem2 of item2</li>
</ol>

<li> item3</li>
</ol>

And finally a description list:

<p>

<dl>
 <dt>keyword1:<dd> 
   followed by
   some text
   over multiple
   lines
 <dt>keyword2:<dd> 
   followed by text on the next line
 <dt>keyword3:<dd> 
   and its description may fit on one line
</dl>

<h3>Comment lines  <a name="___sec6"></a></h3>

<p>
Lines starting with <code>#</code> are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats <code>rst</code> and
<code>sphinx</code> are desired.

<p>
Comment lines starting with <code>##</code> are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

<p>
Large portions of text can be left out using Preprocess. Just place
<code># #ifdef EXTRA</code> and <code># #endif</code> around the text. The command line
option <code>-DEXTRA</code> will bring the text alive again.

<p>
When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.

<h3>Inline comments  <a name="___sec7"></a></h3>

<p>
Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax
<!-- begin verbatim block -->
<pre><code>[name: running text]
</code></pre>
<!-- end verbatim block -->
where <code>name</code> is the name or ID of an author or reader making the comment,
and <code>running text</code> is the comment. Here goes an example.

<!-- begin inline comment -->
<font color="red">[<b>hpl 1</b>: <em>There must be a space after the colon,
but the running text can occupy multiple lines.</em>]</font>
<!-- end inline comment -->

The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the <code>-DTOTONOTES</code> option to <code>ptex2tex</code> or <code>doconce ptex2tex</code>,
colorful margin or inline boxes (using the <code>todonotes</code> package)
make it very easy to spot the comments.

<p>
Running
<!-- begin verbatim block  sys-->
<pre><code>doconce format html mydoc.do.txt --skip_inline_comments
</code></pre>
<!-- end verbatim block -->
removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

<p>
All inline comments to readers can also be physically
removed from the Doconce source by
<!-- begin verbatim block  sys-->
<pre><code>doconce remove_inline_comments mydoc.do.txt
</code></pre>
<!-- end verbatim block -->

<h3>Verbatim/Computer Code  <a name="___sec8"></a></h3>

<p>
Inline verbatim code is typeset within back-ticks, as in
<!-- begin verbatim block -->
<pre><code>Some sentence with `words in verbatim style`.
</code></pre>
<!-- end verbatim block -->
resulting in Some sentence with <code>words in verbatim style</code>.

<p>
Multi-line blocks of verbatim text, typically computer code, is typeset
in between <code>!bc xxx</code> and <code>!ec</code> directives, which must appear on the
beginning of the line. A specification <code>xxx</code> indicates what verbatim
formatting style that is to be used. Typical values for <code>xxx</code> are
nothing, <code>cod</code> for a code snippet, <code>pro</code> for a complete program,
<code>sys</code> for a terminal session, <code>dat</code> for a data file (or output from a
program),
<code>Xpro</code> or <code>Xcod</code> for a program or code snipped, respectively,
in programming <code>X</code>, where <code>X</code> may be <code>py</code> for Python,
<code>cy</code> for Cython, <code>sh</code> for Bash or other Unix shells,
<code>f</code> for Fortran, <code>c</code> for C, <code>cpp</code> for C++, <code>m</code> for MATLAB,
<code>pl</code> for Perl. For output in <code>latex</code> one can let <code>xxx</code> reflect any
defined verbatim environment in the <code>ptex2tex</code> configuration file
(<code>.ptex2tex.cfg</code>). For <code>sphinx</code> output one can insert a comment
<!-- begin verbatim block -->
<pre><code># sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
</code></pre>
<!-- end verbatim block -->
that maps environments (<code>xxx</code>) onto valid language types for
Pygments (which is what <code>sphinx</code> applies to typeset computer code).

<p>
The <code>xxx</code> specifier has only effect for <code>latex</code> and
<code>sphinx</code> output. All other formats use a fixed monospace font for all
kinds of verbatim output.

<p>
Here is an example of computer code (see the source of this document
for exact syntax):

<p>
<!-- begin verbatim block  cod-->
<pre><code>from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
</code></pre>
<!-- end verbatim block -->

<p>
<!-- When showing copy from file in !bc envir, indent a character - otherwise -->
<!-- ptex2tex is confused and starts copying... -->
Computer code can also be copied from a file:
<!-- begin verbatim block -->
<pre><code> @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
</code></pre>
<!-- end verbatim block -->
The <code>@@@CODE</code> identifier must appear at the very beginning of the line.
The first specification copies the complete file <code>doconce_program.sh</code>.
The second specification copies from the first line matching the <em>regular
expression</em> <code>doconce clean</code> up to, but not including the line
matching the <em>regular expression</em> <code>^doconce split_rst</code>.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

<p>
The copied line from file are in this example put inside <code>!bc shpro</code>
and <code>!ec</code> directives, if a complete file is copied, while the
directives become <code>!bc shcod</code> and <code>!ec</code> when a code snippet is copied
from file. In general, for a filename extension <code>.X</code>, the environment
becomes <code>!bc Xpro</code> or <code>!bc Xcod</code> for a complete program or snippet,
respectively. The enivorments (<code>Xcod</code> and <code>Xpro</code>) are only active
for <code>latex</code> and <code>sphinx</code> outout.

<p>
Important warnings:

<p>

<ul>
 <li> A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.</li>
 <li> Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.</li>
</ul>

<h3>LaTeX Mathematics  <a name="___sec9"></a></h3>

<p>
Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats <code>html</code>, <code>sphinx</code>, <code>latex</code>,
pdflatex`, <code>pandoc</code>, and <code>mwiki</code> work with this syntax while all other
formats will just display the raw LaTeX code.

<p>
Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
\( Ax=b \). To help increase readability in other formats than <code>sphinx</code>,
<code>latex</code>, and <code>pdflatex</code>, inline mathematics may have a more human
readable companion expression. The syntax is like
<!-- begin verbatim block -->
<pre><code>$\sin(\norm{\bf u})$|$sin(||u||)$
</code></pre>
<!-- end verbatim block -->
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

<p>
Blocks of LaTeX mathematics are written within
<code>!bt</code>
and
<code>!et</code> (begin/end TeX) directives starting on the beginning of a line:

<p>
<!-- begin verbatim block -->
<pre><code>!bt
\begin{align*}
\nabla\cdot \pmb{u} &amp;= 0,\\ 
\nabla\times \pmb{u} &amp;= 0.
\end{align*}
!et
</code></pre>
<!-- end verbatim block -->

<p>
This LaTeX code gets rendered as

<p>
$$
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
$$

Here is a single equation:

<p>
<!-- begin verbatim block -->
<pre><code>!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
</code></pre>
<!-- end verbatim block -->
which results in

<p>
$$ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.$$


<p>
Any LaTeX syntax is accepted, but if output in the <code>sphinx</code>, <code>pandoc</code>,
<code>mwiki</code>, <code>html</code>, or <code>ipynb</code> formats
is also important, one should follow these rules:

<p>

<ul>
  <li> Use only the equation environments <code>\[</code>, <code>\]</code>,
    <code>equation</code>, <code>equation*</code>, <code>align</code>, and <code>align*</code>.</li>
  <li> MediaWiki (<code>mwiki</code>) does not support references to equations.</li>
</ul>

(Doconce performs extensions to <code>sphinx</code> and other formats such that
labels in <code>align</code> environments work well.)

<p>
<div class="alert alert-block alert-notice alert-text-normal"><b>Notice.</b>
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as <code>sphinx</code>, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically <code>if FORMAT in ("latex", "pdflatex")</code>) to
include special code for <code>latex</code> and <code>pdflatex</code> output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.
</div>
<p>
<b>LaTeX Newcommands.</b>
The author can define <code>newcommand</code> statements in files with names
<code>newcommands*.tex</code>. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that <code>newcommands_keep.tex</code>
contains the newcommands that are kept in the document, while
those in <code>newcommands_replace.tex</code> will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For <code>html</code>, <code>sphinx</code>, <code>latex</code>, <code>pdflatex</code>,
<code>mwiki</code>, <code>ipynb</code>, and <code>pandoc</code>, the mathematics in newcommands is
rendered nicely anyway.

<h3>Hyperlinks  <a name="___sec10"></a></h3>

<p>
Links use either a link text or the raw URL:

<p>
<!-- begin verbatim block -->
<pre><code>Here is some &quot;some link text&quot;: &quot;http://some.net/address&quot;
(as in &quot;search google&quot;: &quot;http://google.com&quot;)
or just the raw address: URL: &quot;http://google.com&quot;.

Links to files typeset in verbatim mode applies backtics:
&quot;`myfile.py`&quot;: &quot;http://some.net/some/place/myfile.py&quot;.

Mail addresses works too: send problems to
&quot;`hpl@simula.no`&quot;: &quot;mailto:hpl@simula.no&quot;
or just &quot;send mail&quot;: &quot;mailto:hpl@simula.no&quot;.
</code></pre>
<!-- end verbatim block -->

<h3>Figures and Movies  <a name="___sec11"></a></h3>

<p>
Figures and movies have almost equal syntax:
<!-- begin verbatim block -->
<pre><code>FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

</code></pre>
<!-- end verbatim block -->
Note three important syntax details:

<p>

<ol>
 <li> A mandatory comma after the figure/movie filename,</li>
 <li> no comments between <code>width</code>, <code>height</code>, and <code>frac</code> and no spaces
    around the <code>=</code> characters,</li>
 <li> all of the command must appear on a single line,</li>
 <li> there must be a blank line after the command.</li>
</ol>

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

<p>
The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The <code>width</code>
and <code>height</code> parameters affect HTML formats (<code>html</code>, <code>rst</code>, <code>sphinx</code>),
while <code>frac</code> is the width of the image as a fraction of the total text
width in the <code>latex</code> and <code>pdflatex</code> formats.

<p>
Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

<p>
Combining several image files into one can be done by the
<!-- begin verbatim block  sys-->
<pre><code>doconce combine_images image1 image2 ... output_image
</code></pre>
<!-- end verbatim block -->
This command applies <code>montage</code> or PDF-based tools to combine the images
to get the highest quality.

<p>
YouTube and Vimeo movies will be embedded in <code>html</code> and <code>sphinx</code> documents
and otherwise be represented by a link. The syntax is

<p>
<!-- begin verbatim block -->
<pre><code>MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

</code></pre>
<!-- end verbatim block -->
The latter results in

<p>

<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Vimeo movie.</em>

<h3>Tables  <a name="___sec12"></a></h3>

<p>
The table in the section <a href="#quick:sections">Section Types</a> was written with this
syntax:
<!-- begin verbatim block -->
<pre><code>|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
</code></pre>
<!-- end verbatim block -->

<p>
Note that

<p>

<ul>
 <li> Each line begins and ends with a vertical bar (pipe symbol).</li>
 <li> Column data are separated by a vertical bar (pipe symbol).</li>
 <li> There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).</li>
 <li> If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.</li>
 <li> Many output formats are so primitive that heading and column alignment
   have no effect.</li>
</ul>

The command-line option <code>--tables2csv</code> (to <code>doconce format</code>)
makes Doconce dump each table to CSV format in a file <code>table_X.csv</code>,
where <code>X</code> is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

<h3>Labels and References  <a name="___sec13"></a></h3>

<p>
The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
<!-- begin verbatim block -->
<pre><code>label{name}
</code></pre>
<!-- end verbatim block -->
with no backslash
preceding the label keyword. It is common practice to choose <code>name</code>
as some hierarchical name, say <code>a:b:c</code>, where <code>a</code> and <code>b</code> indicate
some abbreviations for a section and/or subsection for the topic and
<code>c</code> is some name for the particular unit that has a label.

<p>
A reference to the label <code>name</code> is written as
<!-- begin verbatim block -->
<pre><code>ref{name}
</code></pre>
<!-- end verbatim block -->
again with no backslash before <code>ref</code>.

<p>
Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.

<h3>Citations and Bibliography  <a name="___sec14"></a></h3>

<p>
Single citations are written as
<!-- begin verbatim block -->
<pre><code>cite{name}
</code></pre>
<!-- end verbatim block -->
where <code>name</code> is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have <code>name</code> on the form
<code>Author1_Author2_YYYY</code>, <code>Author_YYYY</code>, or <code>Author1_etal_YYYY</code>, where
<code>YYYY</code> is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
<!-- begin verbatim block -->
<pre><code>cite{name1,name2,name3}
</code></pre>
<!-- end verbatim block -->

<p>
The bibliography is specified by a line <code>BIBFILE: papers.pub</code>,
where <code>papers.pub</code> is a publication database in the
<a href="https://bitbucket.org/logg/publish">Publish</a> format.
BibTeX <code>.bib</code> files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

<h3>Generalized Citations  <a name="___sec15"></a></h3>

<p>
There is a <em>generalized referencing</em> feature in Doconce that allows
a reference with <code>ref</code> to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is
<!-- begin verbatim block -->
<pre><code>ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a &quot;section&quot;:
&quot;testdoc.html#___sec2&quot; in the document
&quot;A Document for Testing Doconce&quot;: &quot;testdoc.html&quot; cite{testdoc:12}],
Doconce documents may include movies.
</code></pre>
<!-- end verbatim block -->
The output from a generalized reference is the text <code>internal</code> if all
<code>ref{label}</code> references in <code>internal</code> are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
<code>latex</code> or <code>pdflatex</code> one assumes that the references in <code>internal</code>
are to external documents declared by a comment line <code>#
Externaldocuments: testdoc, mydoc</code> (usually after the title, authors,
and date). In this case the output text is <code>internal cite</code> and the
LaTeX package <code>xr</code> is used to handle the labels in the external
documents.  If none of the two situations above applies, the
<code>external</code> text will be the output.

<h3>Index of Keywords  <a name="___sec16"></a></h3>

<p>
Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
<!-- begin verbatim block -->
<pre><code>index{name}
</code></pre>
<!-- end verbatim block -->
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the <code>latex</code>,
<code>pdflatex</code>, <code>rst</code>, and <code>sphinx</code> formats.

<h3>Capabilities of The Program <code>doconce</code>  <a name="___sec17"></a></h3>

<p>
The <code>doconce</code> program can be used for a number of purposes besides
transforming a <code>.do.txt</code> file to some format. Here is the
list of capabilities:

<p>
<!-- begin verbatim block  shpro-->
<pre><code>Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title=&quot;Short title&quot; version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version &gt;= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce format sphinx complete_file
doconce split_rst complete_file        # !split delimiters
doconce sphinx_dir complete_file
python automake_sphinx.py

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create HTML slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# create LaTeX Beamer slides from a (doconce) latex/pdflatex file
doconce slides_beamer complete_file.tex

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# make HTML file via pandoc from Markdown (.md) file
doconce md2html file

# make LaTeX file via pandoc from Markdown (.md) file
doconce md2latex file

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile

# translate a latex document to doconce (requires usually manual fixing)
doconce latex2doconce latexfile

# check if there are problems with translating latex to doconce
doconce latex_dislikes latexfile

# typeset a doconce document with pygments (for pretty print of doconce itself)
doconce pygmentize myfile [pygments-style]

# generate a make.sh script for translating a doconce file to various formats
doconce makefile docname doconcefile [html sphinx pdflatex ...]

# fix common problems in bibtex files for publish import
doconce fix_bibtex4publish file1.bib file2.bib ...

# find differences between two files
doconce diff file1.do.txt file2.do.txt [diffprog]
(diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)

# find differences between the last two Git versions of several files
doconce gitdiff file1 file2 file3 ...

# convert csv file to doconce table format
doconce csv2table somefile.csv
</code></pre>
<!-- end verbatim block -->

<h3>Exercises  <a name="___sec18"></a></h3>

<p>
Doconce supports <em>Exercise</em>, <em>Problem</em>, <em>Project</em>, and <em>Example</em>.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain <em>elements</em>:

<p>

<ul>
  <li> a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)</li>
  <li> a label (optional)</li>
  <li> a solution file (optional)</li>
  <li> name of file with a student solution (optional)</li>
  <li> main exercise text (required)</li>
  <li> a short answer (optional)</li>
  <li> a full solution (optional)</li>
  <li> one or more hints (optional)</li>
  <li> one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)</li>
</ul>

A typical sketch of a a problem without subexercises goes as follows:
<!-- begin verbatim block -->
<pre><code>===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
&quot;Wolframalpha&quot;: &quot;http://wolframalpha.com&quot; can perhaps
compute the integral.
!ehint
</code></pre>
<!-- end verbatim block -->
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

<p>
<!-- begin verbatim block -->
<pre><code>===== {Problem}: Derive the Formula for the Area of an Ellipse =====
</code></pre>
<!-- end verbatim block -->
the title becomes just "Derive the ...".

<p>
An exercise with subproblems, answers and full solutions has this
setup-up:

<p>
<!-- begin verbatim block -->
<pre><code>===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

</code></pre>
<!-- end verbatim block -->
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments <code>--without_answers</code> and <code>--without_solutions</code>
turn off output of answers and solutions, respectively, except for
examples.

<h3>Environments  <a name="___sec19"></a></h3>

<p>
Doconce environments start with <code>!benvirname</code> and end with <code>!eenvirname</code>,
where <code>envirname</code> is the name of the environment. Here is a listing of
the environments:

<p>

<ul>
 <li> <code>c</code>: computer code (or verbatim text)</li>
 <li> <code>t</code>: math blocks with LaTeX syntax</li>
 <li> <code>subex</code>: sub-exercise</li>
 <li> <code>ans</code>: short answer to exercise or sub-exercise</li>
 <li> <code>sol</code>: full solution to exercise or sub-exercise</li>
 <li> <code>quote</code>: indented text</li>
 <li> <code>notice</code>, <code>summary</code>, <code>warning</code>, <code>question</code>, <code>hint</code>: admonition boxes with
    custom title, special icon, and (frequently) background color</li>
 <li> <code>pop</code>: text to gradually pop up in slide presentations</li>
 <li> <code>slidecell</code>: indication of cells in a grid layout for elements on a
   slide</li>
</ul>

<h3>Preprocessing  <a name="___sec20"></a></h3>

<p>
Doconce documents may utilize a preprocessor, either <code>preprocess</code> and/or
<code>mako</code>. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The <code>mako</code> preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

<p>
The command <code>doconce format</code> first runs <code>preprocess</code> and then <code>mako</code>.
Here is a typical example on utilizing <code>preprocess</code> to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

<p>
<!-- begin verbatim block -->
<pre><code># #include &quot;myotherdoc.do.txt&quot;

# #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} &amp; \multicolumn{1}{c}{velocity} &amp; \multicolumn{1}{c}{acceleration} \\ 
\hline
0.0          &amp; 1.4186       &amp; -5.01        \\ 
2.0          &amp; 1.376512     &amp; 11.919       \\ 
4.0          &amp; 1.1E+1       &amp; 14.717624    \\ 
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
</code></pre>
<!-- end verbatim block -->

<p>
With the <code>mako</code> preprocessor the if-else tests have slightly different syntax.
An <a href="http://hplgit.github.com/bioinf-py/">example document</a> contains
some illustrations on how to utilize <code>mako</code> (clone the GitHub project and
examine the Doconce source and the <code>doc/src/make.sh</code> script).

<h3>Resources  <a name="___sec21"></a></h3>

<p>

<ul>
 <li> Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"</li>
</ul>


<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: quickref.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=titlepage
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to options on the command line (just type doconce ptex2tex to
%% see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING "doconce_heading"
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer_collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------

\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for mobile devices
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},           % inner margin (two sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif

\usepackage{relsize,epsfig,makeidx,color,setspace,amsmath,amsfonts}
\usepackage[table]{xcolor}
\usepackage{bm,microtype}
\usepackage{ptex2tex}

% #ifndef MOVIE
% #define MOVIE "media9"
% #endif

% #if MOVIE == "media9"
\usepackage{media9}
% #elif MOVIE == "movie15"
\usepackage{movie15}
% #elif MOVIE == "multimedia"
\usepackage{multimedia}
% #elif MOVIE == "href-run"
% #endif

% #ifdef MINTED
\usepackage{minted}
\usemintedstyle{default}
% #endif

% #ifdef XELATEX
% xelatex settings
\usepackage{fontspec}
\usepackage{xunicode}
\defaultfontfeatures{Mapping=tex-text} % To support LaTeX quoting style
\defaultfontfeatures{Ligatures=TeX}
\setromanfont{Kinnari}
% Examples of font types (Ubuntu): Gentium Book Basic (Palatino-like),
% Liberation Sans (Helvetica-like), Norasi, Purisa (handwriting), UnDoum
% #else
%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif
% #endif

% Hyperlinks in PDF:
\definecolor{linkcolor}{rgb}{0,0,0.4}
\usepackage[%
    colorlinks=true,
    linkcolor=linkcolor,
    urlcolor=linkcolor,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    pdfmenubar=true,
    pdftoolbar=true,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}  % number chapter, section, subsection

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}


% #ifdef TODONOTES
\usepackage{ifthen,xkeyval,tikz,calc,graphicx}
\usepackage[shadow]{todonotes}
\newcommand{\shortinlinecomment}[3]{%
\todo[size=\normalsize,fancyline,color=orange!40,caption={#3}]{%
 \begin{spacing}{0.75}{\bf #1}: #2\end{spacing}}}
\newcommand{\longinlinecomment}[3]{%
\todo[inline,color=orange!40,caption={#3}]{{\bf #1}: #2}}
% #else
\newcommand{\shortinlinecomment}[3]{{\bf #1}: \emph{#2}}
\newcommand{\longinlinecomment}[3]{{\bf #1}: \emph{#2}}
% #endif

% #ifdef LINENUMBERS
\usepackage[mathlines]{lineno}  % show line numbers
\linenumbers
% #endif

\usepackage[framemethod=TikZ]{mdframed}

% Admonition is an oval gray box
\newmdenv[
  backgroundcolor=gray!5,  %% white with 5%% gray
  skipabove=\topsep,
  skipbelow=\topsep,
  outerlinewidth=0,
  leftmargin=0,
  rightmargin=0,
  roundcorner=5,
]{graybox1mdframed}

\newenvironment{graybox1admon}[1][]{
\begin{graybox1mdframed}[frametitle=#1]
}
{
\end{graybox1mdframed}
}

% #ifdef COLORED_TABLE_ROWS
% color every two table rows
\let\oldtabular\tabular
\let\endoldtabular\endtabular
% #if COLORED_TABLE_ROWS not in ("gray", "blue")
% #define COLORED_TABLE_ROWS gray
% #endif
% #else
% #define COLORED_TABLE_ROWS no
% #endif
% #if COLORED_TABLE_ROWS == "gray"
\definecolor{rowgray}{gray}{0.9}
\renewenvironment{tabular}{\rowcolors{2}{white}{rowgray}%
\oldtabular}{\endoldtabular}
% #elif COLORED_TABLE_ROWS == "blue"
\definecolor{appleblue}{rgb}{0.93,0.95,1.0}  % Apple blue
\renewenvironment{tabular}{\rowcolors{2}{white}{appleblue}%
\oldtabular}{\endoldtabular}
% #endif

% prevent orhpans and widows
\clubpenalty = 10000
\widowpenalty = 10000

% http://www.ctex.org/documents/packages/layout/titlesec.pdf
\usepackage[compact]{titlesec}  % narrower section headings
% #ifdef BLUE_SECTION_HEADINGS
\definecolor{seccolor}{rgb}{0.2,0.2,0.8}
\titleformat{\section}
{\color{seccolor}\normalfont\Large\bfseries}
{\color{seccolor}\thesection}{1em}{}
\titleformat{\subsection}
{\color{seccolor}\normalfont\large\bfseries}
{\color{seccolor}\thesubsection}{1em}{}
% #endif

% --- end of standard preamble for documents ---

\newenvironment{exercise}{}{}
\newcounter{exerno}


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif


% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"
\title{Doconce Quick Reference}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{
\begin{spacing}{1.25}
Doconce Quick Reference
\end{spacing}
}}}

% #elif LATEX_HEADING == "Springer_collection"
\title*{Doconce Quick Reference}
% Short version of title:
%\titlerunning{...}

% #elif LATEX_HEADING == "beamer"
\title{Doconce Quick Reference}
% #else
\begin{center}
{\LARGE\bf
\begin{spacing}{1.25}
Doconce Quick Reference
\end{spacing}
}
\end{center}
% #endif

% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer_collection"

\author{Hans Petter Langtangen}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo}

% #elif LATEX_HEADING == "beamer"
\author{Hans Petter Langtangen\inst{1,2}}
\institute{Center for Biomedical Computing, Simula Research Laboratory\inst{1}
\and
Department of Informatics, University of Oslo\inst{2}}
% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% #if LATEX_HEADING == "traditional"
\date{Jan 32, 2100}
\maketitle
% #elif LATEX_HEADING == "beamer"
\date{Jan 32, 2100
% <titlepage figure>
}
% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else
\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\tableofcontents
% #ifdef TODONOTES
\listoftodos[List of inline comments]
% #endif

\vspace{1cm} % after toc





\textbf{WARNING: This quick reference is very incomplete!}

\paragraph{Mission.}
Enable writing documentation with much mathematics and
computer code \emph{once, in one place} and include it in traditional {\LaTeX}
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's \code{blogger.com}, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

\subsection{Supported Formats}

Doconce currently translates files to the following formats:

\begin{itemize}
 \item {\LaTeX} (format \code{latex} and \code{pdflatex})

 \item HTML (format \code{html})

 \item reStructuredText (format \code{rst})

 \item plain (untagged) ASCII (format \code{plain})

 \item Sphinx (format \code{sphinx})

 \item IPython notebook (format \code{ipynb})

 \item MediaWiki (format \code{mwiki})

 \item (Pandoc extended) Markdown (format \code{pandoc})

 \item Googlecode wiki (format \code{gwiki})

 \item Creoloe wiki (format \code{cwiki})

 \item Epydoc (format \code{epydoc})

 \item StructuredText (format \code{st})
\end{itemize}

\noindent
For documents with much code and mathematics, the best (and most supported)
formats are \code{latex}, \code{pdflatex}, \code{sphinx}, and \code{html}; and to a slightly
less extent \code{mwiki} and \code{pandoc}. The HTML format supports blogging on
Google and Wordpress.


\subsection{Emacs syntax support}

The file \href{{https://doconce.googlecode.com/hg/misc/.doconce-mode.el}}{.doconce-mode.el} in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add \code{(load-file "~/.doconce-mode.el")} to the \code{.emacs}
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:


\begin{quote}\begin{tabular}{ll}
\hline
\multicolumn{1}{c}{ Emacs key } & \multicolumn{1}{c}{ Action } \\
\hline
Ctrl+c f                           & figure                             \\
Ctrl+c v                           & movie/video                        \\
Ctrl+c h1                          & heading level 1 (section/h1)       \\
Ctrl+c h2                          & heading level 2 (subsection/h2)    \\
Ctrl+c h3                          & heading level 2 (subsection/h3)    \\
Ctrl+c hp                          & heading for paragraph              \\
Ctrl+c me                          & math environment: !bt equation !et \\
Ctrl+c ma                          & math environment: !bt align !et    \\
Ctrl+c ce                          & code environment: !bc !ec          \\
Ctrl+c cf                          & code from file: @@@CODE            \\
Ctrl+c table2                      & table with 2 columns               \\
Ctrl+c table3                      & table with 3 columns               \\
Ctrl+c table4                      & table with 4 columns               \\
Ctrl+c exer                        & exercise outline                   \\
Ctrl+c slide                       & slide outline                      \\
Ctrl+c help                        & print this table                   \\
\hline
\end{tabular}\end{quote}

\noindent
\subsection{Title, Authors, and Date}

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
\bccq
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
\eccq
The entire title must appear on a single line.
The author syntax is
\bccq
name Email: somename@adr.net at institution1 & institution2
\eccq
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the \code{&} keyword
separates the institutions (the keyword \code{and} works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from \code{today} if not the
current date is wanted, e.g., \code{Feb 22, 2016}.

The table of contents is removed by writing \code{TOC: off}.


\subsection{Section Types}
\label{quick:sections}


\begin{quote}\begin{tabular}{ll}
\hline
\multicolumn{1}{c}{ Section type } & \multicolumn{1}{c}{ Syntax } \\
\hline
chapter                                               & \code{========= Heading ========} (9 \code{=})        \\
section                                               & \code{======= Heading =======}    (7 \code{=})        \\
subsection                                            & \code{===== Heading =====}        (5 \code{=})        \\
subsubsection                                         & \code{=== Heading ===}            (3 \code{=})        \\
paragraph                                             & \code{__Heading.__}               (2 \code{_})        \\
abstract                                              & \code{__Abstract.__} Running text...                  \\
appendix                                              & \code{======= Appendix: heading =======} (7 \code{=}) \\
appendix                                              & \code{===== Appendix: heading =====} (5 \code{=})     \\
exercise                                              & \code{======= Exercise: heading =======} (7 \code{=}) \\
exercise                                              & \code{===== Exercise: heading =====} (5 \code{=})     \\
\hline
\end{tabular}\end{quote}

\noindent
Note that abstracts are recognized by starting with \code{__Abstract.__} or
\code{__Summary.__} at the beginning of a line and ending with three or
more \code{=} signs of the next heading.

The \code{Exercise:} keyword kan be substituted by \code{Problem:} or \code{Project:}.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

\subsection{Inline Formatting}

Words surrounded by \code{*} are emphasized: \code{*emphasized words*} becomes
\emph{emphasized words}. Similarly, an underscore surrounds words that
appear in boldface: \code{_boldface_} becomes \textbf{boldface}. Colored words
are also possible: the text
\bccq
`color{red}{two red words}`
\eccq
becomes \textcolor{red}{two red words}.

\subsection{Lists}

There are three types of lists: \emph{bullet lists}, where each item starts
with \code{*}, \emph{enumeration lists}, where each item starts with \code{o} and gets
consqutive numbers,
and \emph{description} lists, where each item starts with \code{-} followed
by a keyword and a colon.
\bccq
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
\eccq
The code above follows.

Here is a bullet list:

\begin{itemize}
 \item item1

 \item item2
\begin{itemize}

  \item subitem1 of item2

  \item subitem2 of item2

\end{itemize}

\noindent
 \item item3
\end{itemize}

\noindent
Note that sublists are indented.
Here is an enumeration list:

\begin{enumerate}
\item item1

\item item2
   may appear on
   multiple lines
\begin{enumerate}

 \item subitem1 of item2

 \item subitem2 of item2

\end{enumerate}

\noindent
\item item3
\end{enumerate}

\noindent
And finally a description list:

\begin{description}
 \item[keyword1:] 
   followed by
   some text
   over multiple
   lines

 \item[keyword2:] 
   followed by text on the next line

 \item[keyword3:] 
   and its description may fit on one line
\end{description}

\noindent
\subsection{Comment lines}

Lines starting with \code{#} are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before {\LaTeX} math
blocks, verbatim code blocks, or lists if the formats \code{rst} and
\code{sphinx} are desired.

Comment lines starting with \code{##} are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
\code{# #ifdef EXTRA} and \code{# #endif} around the text. The command line
option \code{-DEXTRA} will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


\subsection{Inline comments}

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax
\bccq
[name: running text]
\eccq
where \code{name} is the name or ID of an author or reader making the comment,
and \code{running text} is the comment. Here goes an example.
\shortinlinecomment{hpl 1}{ There must be a space after the colon,
but the running text can occupy multiple lines. }{ There must be a }
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with {\LaTeX}
output and the \code{-DTOTONOTES} option to \code{ptex2tex} or \code{doconce ptex2tex},
colorful margin or inline boxes (using the \code{todonotes} package)
make it very easy to spot the comments.

Running
\bsys
doconce format html mydoc.do.txt --skip_inline_comments
\esys
removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by
\bsys
doconce remove_inline_comments mydoc.do.txt
\esys

\subsection{Verbatim/Computer Code}

Inline verbatim code is typeset within back-ticks, as in
\bccq
Some sentence with `words in verbatim style`.
\eccq
resulting in Some sentence with \code{words in verbatim style}.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between \code{!bc xxx} and \code{!ec} directives, which must appear on the
beginning of the line. A specification \code{xxx} indicates what verbatim
formatting style that is to be used. Typical values for \code{xxx} are
nothing, \code{cod} for a code snippet, \code{pro} for a complete program,
\code{sys} for a terminal session, \code{dat} for a data file (or output from a
program),
\code{Xpro} or \code{Xcod} for a program or code snipped, respectively,
in programming \code{X}, where \code{X} may be \code{py} for Python,
\code{cy} for Cython, \code{sh} for Bash or other Unix shells,
\code{f} for Fortran, \code{c} for C, \code{cpp} for C++, \code{m} for MATLAB,
\code{pl} for Perl. For output in \code{latex} one can let \code{xxx} reflect any
defined verbatim environment in the \code{ptex2tex} configuration file
(\code{.ptex2tex.cfg}). For \code{sphinx} output one can insert a comment
\bccq
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
\eccq
that maps environments (\code{xxx}) onto valid language types for
Pygments (which is what \code{sphinx} applies to typeset computer code).

The \code{xxx} specifier has only effect for \code{latex} and
\code{sphinx} output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

\bcod
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
\ecod

% When showing copy from file in !bc envir, indent a character - otherwise
% ptex2tex is confused and starts copying...
Computer code can also be copied from a file:
\bccq
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
\eccq
The \code{@@@CODE} identifier must appear at the very beginning of the line.
The first specification copies the complete file \code{doconce_program.sh}.
The second specification copies from the first line matching the \emph{regular
expression} \code{doconce clean} up to, but not including the line
matching the \emph{regular expression} \code{^doconce split_rst}.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside \code{!bc shpro}
and \code{!ec} directives, if a complete file is copied, while the
directives become \code{!bc shcod} and \code{!ec} when a code snippet is copied
from file. In general, for a filename extension \code{.X}, the environment
becomes \code{!bc Xpro} or \code{!bc Xcod} for a complete program or snippet,
respectively. The enivorments (\code{Xcod} and \code{Xpro}) are only active
for \code{latex} and \code{sphinx} outout.

Important warnings:

\begin{itemize}
 \item A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 \item Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.
\end{itemize}

\noindent
\subsection{{\LaTeX} Mathematics}

Doconce supports inline mathematics and blocks of mathematics, using
standard {\LaTeX} syntax. The output formats \code{html}, \code{sphinx}, \code{latex},
pdflatex`, \code{pandoc}, and \code{mwiki} work with this syntax while all other
formats will just display the raw {\LaTeX} code.

Inline expressions are written in the standard
{\LaTeX} way with the mathematics surrounded by dollar signs, as in
$Ax=b$. To help increase readability in other formats than \code{sphinx},
\code{latex}, and \code{pdflatex}, inline mathematics may have a more human
readable companion expression. The syntax is like
\bccq
$\sin(\norm{\bf u})$|$sin(||u||)$
\eccq
That is, the {\LaTeX} expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of {\LaTeX} mathematics are written within
\code{!bt}
and
\code{!et} (begin/end TeX) directives starting on the beginning of a line:

\bccq
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
\eccq

This {\LaTeX} code gets rendered as

\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
Here is a single equation:

\bccq
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
\eccq
which results in

\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]

Any {\LaTeX} syntax is accepted, but if output in the \code{sphinx}, \code{pandoc},
\code{mwiki}, \code{html}, or \code{ipynb} formats
is also important, one should follow these rules:

\begin{itemize}
  \item Use only the equation environments \code{\[}, \code{\]},
    \code{equation}, \code{equation*}, \code{align}, and \code{align*}.

  \item MediaWiki (\code{mwiki}) does not support references to equations.
\end{itemize}

\noindent
(Doconce performs extensions to \code{sphinx} and other formats such that
labels in \code{align} environments work well.)


\begin{graybox1admon}[Notice.]
{\LaTeX} supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as \code{sphinx}, makes it necessary
to only utilze very standard {\LaTeX} and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically \code{if FORMAT in ("latex", "pdflatex")}) to
include special code for \code{latex} and \code{pdflatex} output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced {\LaTeX} features and fine tuning of resulting
PDF document.
\end{graybox1admon}

\paragraph{LaTeX Newcommands.}
The author can define \code{newcommand} statements in files with names
\code{newcommands*.tex}. Such commands should only be used for mathematics
(other {\LaTeX} constructions are only understood by {\LaTeX} itself).
The convention is that \code{newcommands_keep.tex}
contains the newcommands that are kept in the document, while
those in \code{newcommands_replace.tex} will be replaced by their full
{\LaTeX} code. This conventions helps make readable documents in formats
without {\LaTeX} support. For \code{html}, \code{sphinx}, \code{latex}, \code{pdflatex},
\code{mwiki}, \code{ipynb}, and \code{pandoc}, the mathematics in newcommands is
rendered nicely anyway.


\subsection{Hyperlinks}

Links use either a link text or the raw URL:

\bccq
Here is some "some link text": "http://some.net/address"
(as in "search google": "http://google.com")
or just the raw address: URL: "http://google.com".

Links to files typeset in verbatim mode applies backtics:
"`myfile.py`": "http://some.net/some/place/myfile.py".

Mail addresses works too: send problems to
"`hpl@simula.no`": "mailto:hpl@simula.no"
or just "send mail": "mailto:hpl@simula.no".
\eccq

\subsection{Figures and Movies}

Figures and movies have almost equal syntax:
\bccq
FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

\eccq
Note three important syntax details:

\begin{enumerate}
 \item A mandatory comma after the figure/movie filename,

 \item no comments between \code{width}, \code{height}, and \code{frac} and no spaces
    around the \code{=} characters,

 \item all of the command must appear on a single line,

 \item there must be a blank line after the command.
\end{enumerate}

\noindent
The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or {\LaTeX} formats). The \code{width}
and \code{height} parameters affect HTML formats (\code{html}, \code{rst}, \code{sphinx}),
while \code{frac} is the width of the image as a fraction of the total text
width in the \code{latex} and \code{pdflatex} formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
\bsys
doconce combine_images image1 image2 ... output_image
\esys
This command applies \code{montage} or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in \code{html} and \code{sphinx} documents
and otherwise be represented by a link. The syntax is

\bccq
MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

\eccq
The latter results in

 Vimeo movie. \href{{http://vimeo.com/55562330}}{\nolinkurl{http://vimeo.com/55562330}}


\subsection{Tables}

The table in Section~\ref{quick:sections} was written with this
syntax:
\bccq
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
\eccq

Note that

\begin{itemize}
 \item Each line begins and ends with a vertical bar (pipe symbol).

 \item Column data are separated by a vertical bar (pipe symbol).

 \item There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 \item If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in {\LaTeX}.

 \item Many output formats are so primitive that heading and column alignment
   have no effect.
\end{itemize}

\noindent
The command-line option \code{--tables2csv} (to \code{doconce format})
makes Doconce dump each table to CSV format in a file \code{table_X.csv},
where \code{X} is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

\subsection{Labels and References}

The notion of labels and references (as well as bibliography and index)
is adopted
from {\LaTeX} with a very similar syntax. As in {\LaTeX}, a label can be
inserted anywhere, using the syntax
\bccq
label{name}
\eccq
with no backslash
preceding the label keyword. It is common practice to choose \code{name}
as some hierarchical name, say \code{a:b:c}, where \code{a} and \code{b} indicate
some abbreviations for a section and/or subsection for the topic and
\code{c} is some name for the particular unit that has a label.

A reference to the label \code{name} is written as
\bccq
ref{name}
\eccq
again with no backslash before \code{ref}.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


\subsection{Citations and Bibliography}

Single citations are written as
\bccq
cite{name}
\eccq
where \code{name} is a logical name
of the reference (again, {\LaTeX} writers must not insert a backslash).
Bibliography citations often have \code{name} on the form
\code{Author1_Author2_YYYY}, \code{Author_YYYY}, or \code{Author1_etal_YYYY}, where
\code{YYYY} is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
\bccq
cite{name1,name2,name3}
\eccq

The bibliography is specified by a line \code{BIBFILE: papers.pub},
where \code{papers.pub} is a publication database in the
\href{{https://bitbucket.org/logg/publish}}{Publish} format.
\textsc{Bib}\negthinspace{\TeX} \code{.bib} files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than {\LaTeX}).

\subsection{Generalized Citations}

There is a \emph{generalized referencing} feature in Doconce that allows
a reference with \code{ref} to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is
\bccq
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
\eccq
The output from a generalized reference is the text \code{internal} if all
\code{ref{label}} references in \code{internal} are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
\code{latex} or \code{pdflatex} one assumes that the references in \code{internal}
are to external documents declared by a comment line \code{#
Externaldocuments: testdoc, mydoc} (usually after the title, authors,
and date). In this case the output text is \code{internal cite} and the
{\LaTeX} package \code{xr} is used to handle the labels in the external
documents.  If none of the two situations above applies, the
\code{external} text will be the output.

\subsection{Index of Keywords}

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
\bccq
index{name}
\eccq
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the \code{latex},
\code{pdflatex}, \code{rst}, and \code{sphinx} formats.

\subsection{Capabilities of The Program \protect\code{doconce} }

The \code{doconce} program can be used for a number of purposes besides
transforming a \code{.do.txt} file to some format. Here is the
list of capabilities:

\bshpro
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce format sphinx complete_file
doconce split_rst complete_file        # !split delimiters
doconce sphinx_dir complete_file
python automake_sphinx.py

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create HTML slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# create LaTeX Beamer slides from a (doconce) latex/pdflatex file
doconce slides_beamer complete_file.tex

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# make HTML file via pandoc from Markdown (.md) file
doconce md2html file

# make LaTeX file via pandoc from Markdown (.md) file
doconce md2latex file

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile

# translate a latex document to doconce (requires usually manual fixing)
doconce latex2doconce latexfile

# check if there are problems with translating latex to doconce
doconce latex_dislikes latexfile

# typeset a doconce document with pygments (for pretty print of doconce itself)
doconce pygmentize myfile [pygments-style]

# generate a make.sh script for translating a doconce file to various formats
doconce makefile docname doconcefile [html sphinx pdflatex ...]

# fix common problems in bibtex files for publish import
doconce fix_bibtex4publish file1.bib file2.bib ...

# find differences between two files
doconce diff file1.do.txt file2.do.txt [diffprog]
(diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)

# find differences between the last two Git versions of several files
doconce gitdiff file1 file2 file3 ...

# convert csv file to doconce table format
doconce csv2table somefile.csv
\eshpro

\subsection{Exercises}

Doconce supports \emph{Exercise}, \emph{Problem}, \emph{Project}, and \emph{Example}.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain \emph{elements}:

\begin{itemize}
  \item a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  \item a label (optional)

  \item a solution file (optional)

  \item name of file with a student solution (optional)

  \item main exercise text (required)

  \item a short answer (optional)

  \item a full solution (optional)

  \item one or more hints (optional)

  \item one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)
\end{itemize}

\noindent
A typical sketch of a a problem without subexercises goes as follows:
\bccq
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
\eccq
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

\bccq
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
\eccq
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

\bccq
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

\eccq
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments \code{--without_answers} and \code{--without_solutions}
turn off output of answers and solutions, respectively, except for
examples.


\subsection{Environments}

Doconce environments start with \code{!benvirname} and end with \code{!eenvirname},
where \code{envirname} is the name of the environment. Here is a listing of
the environments:

\begin{itemize}
 \item \code{c}: computer code (or verbatim text)

 \item \code{t}: math blocks with {\LaTeX} syntax

 \item \code{subex}: sub-exercise

 \item \code{ans}: short answer to exercise or sub-exercise

 \item \code{sol}: full solution to exercise or sub-exercise

 \item \code{quote}: indented text

 \item \code{notice}, \code{summary}, \code{warning}, \code{question}, \code{hint}: admonition boxes with
    custom title, special icon, and (frequently) background color

 \item \code{pop}: text to gradually pop up in slide presentations

 \item \code{slidecell}: indication of cells in a grid layout for elements on a
   slide
\end{itemize}

\noindent
\subsection{Preprocessing}

Doconce documents may utilize a preprocessor, either \code{preprocess} and/or
\code{mako}. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The \code{mako} preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command \code{doconce format} first runs \code{preprocess} and then \code{mako}.
Here is a typical example on utilizing \code{preprocess} to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

\bccq
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
\hline
0.0          & 1.4186       & -5.01        \\ 
2.0          & 1.376512     & 11.919       \\ 
4.0          & 1.1E+1       & 14.717624    \\ 
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
\eccq

With the \code{mako} preprocessor the if-else tests have slightly different syntax.
An \href{{http://hplgit.github.com/bioinf-py/}}{example document} contains
some illustrations on how to utilize \code{mako} (clone the GitHub project and
examine the Doconce source and the \code{doc/src/make.sh} script).

\subsection{Resources}

\begin{itemize}
 \item Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"
\end{itemize}

\noindent

% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: quickref.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

Doconce Quick Reference
-----------------------

:Author: Hans Petter Langtangen
:Date: Jan 32, 2100

.. contents:: Table of Contents
   :depth: 2



**WARNING: This quick reference is very incomplete!**

*Mission.* Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's ``blogger.com``, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format ``latex`` and ``pdflatex``)

 * HTML (format ``html``)

 * reStructuredText (format ``rst``)

 * plain (untagged) ASCII (format ``plain``)

 * Sphinx (format ``sphinx``)

 * IPython notebook (format ``ipynb``)

 * MediaWiki (format ``mwiki``)

 * (Pandoc extended) Markdown (format ``pandoc``)

 * Googlecode wiki (format ``gwiki``)

 * Creoloe wiki (format ``cwiki``)

 * Epydoc (format ``epydoc``)

 * StructuredText (format ``st``)

For documents with much code and mathematics, the best (and most supported)
formats are ``latex``, ``pdflatex``, ``sphinx``, and ``html``; and to a slightly
less extent ``mwiki`` and ``pandoc``. The HTML format supports blogging on
Google and Wordpress.


Emacs syntax support
--------------------

The file `.doconce-mode.el <https://doconce.googlecode.com/hg/misc/.doconce-mode.el>`_ in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add ``(load-file "~/.doconce-mode.el")`` to the ``.emacs``
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

==================================  ==================================  
            Emacs key                             Action                
==================================  ==================================  
Ctrl+c f                            figure                              
Ctrl+c v                            movie/video                         
Ctrl+c h1                           heading level 1 (section/h1)        
Ctrl+c h2                           heading level 2 (subsection/h2)     
Ctrl+c h3                           heading level 2 (subsection/h3)     
Ctrl+c hp                           heading for paragraph               
Ctrl+c me                           math environment: !bt equation !et  
Ctrl+c ma                           math environment: !bt align !et     
Ctrl+c ce                           code environment: !bc !ec           
Ctrl+c cf                           code from file: @@@CODE             
Ctrl+c table2                       table with 2 columns                
Ctrl+c table3                       table with 3 columns                
Ctrl+c table4                       table with 4 columns                
Ctrl+c exer                         exercise outline                    
Ctrl+c slide                        slide outline                       
Ctrl+c help                         print this table                    
==================================  ==================================  

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 & institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the ``&`` keyword
separates the institutions (the keyword ``and`` works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from ``today`` if not the
current date is wanted, e.g., ``Feb 22, 2016``.

The table of contents is removed by writing ``TOC: off``.


.. _quick:sections:

Section Types
-------------

===============================================  ===============================================  
                  Section type                                        Syntax                      
===============================================  ===============================================  
chapter                                          ``========= Heading ========`` (9 ``=``)         
section                                          ``======= Heading =======``    (7 ``=``)         
subsection                                       ``===== Heading =====``        (5 ``=``)         
subsubsection                                    ``=== Heading ===``            (3 ``=``)         
paragraph                                        ``__Heading.__``               (2 ``_``)         
abstract                                         ``__Abstract.__`` Running text...                
appendix                                         ``======= Appendix: heading =======`` (7 ``=``)  
appendix                                         ``===== Appendix: heading =====`` (5 ``=``)      
exercise                                         ``======= Exercise: heading =======`` (7 ``=``)  
exercise                                         ``===== Exercise: heading =====`` (5 ``=``)      
===============================================  ===============================================  

Note that abstracts are recognized by starting with ``__Abstract.__`` or
``__Summary.__`` at the beginning of a line and ending with three or
more ``=`` signs of the next heading.

The ``Exercise:`` keyword kan be substituted by ``Problem:`` or ``Project:``.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

Inline Formatting
-----------------

Words surrounded by ``*`` are emphasized: ``*emphasized words*`` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: ``_boldface_`` becomes **boldface**. Colored words
are also possible: the text::


        `color{red}{two red words}`

becomes <font color="red">two red words</font>.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with ``*``, *enumeration lists*, where each item starts with ``o`` and gets
consqutive numbers,
and *description* lists, where each item starts with ``-`` followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1: 
   followed by
   some text
   over multiple
   lines

 keyword2: 
   followed by text on the next line

 keyword3: 
   and its description may fit on one line

Comment lines
-------------

Lines starting with ``#`` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats ``rst`` and
``sphinx`` are desired.

Comment lines starting with ``##`` are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
``# #ifdef EXTRA`` and ``# #endif`` around the text. The command line
option ``-DEXTRA`` will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


Inline comments
---------------

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax::


        [name: running text]

where ``name`` is the name or ID of an author or reader making the comment,
and ``running text`` is the comment. Here goes an example.
(**hpl 1**: There must be a space after the colon,
but the running text can occupy multiple lines.)
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the ``-DTOTONOTES`` option to ``ptex2tex`` or ``doconce ptex2tex``,
colorful margin or inline boxes (using the ``todonotes`` package)
make it very easy to spot the comments.

Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by::


        doconce remove_inline_comments mydoc.do.txt


Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with ``words in verbatim style``.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between ``!bc xxx`` and ``!ec`` directives, which must appear on the
beginning of the line. A specification ``xxx`` indicates what verbatim
formatting style that is to be used. Typical values for ``xxx`` are
nothing, ``cod`` for a code snippet, ``pro`` for a complete program,
``sys`` for a terminal session, ``dat`` for a data file (or output from a
program),
``Xpro`` or ``Xcod`` for a program or code snipped, respectively,
in programming ``X``, where ``X`` may be ``py`` for Python,
``cy`` for Cython, ``sh`` for Bash or other Unix shells,
``f`` for Fortran, ``c`` for C, ``cpp`` for C++, ``m`` for MATLAB,
``pl`` for Perl. For output in ``latex`` one can let ``xxx`` reflect any
defined verbatim environment in the ``ptex2tex`` configuration file
(``.ptex2tex.cfg``). For ``sphinx`` output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (``xxx``) onto valid language types for
Pygments (which is what ``sphinx`` applies to typeset computer code).

The ``xxx`` specifier has only effect for ``latex`` and
``sphinx`` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


.. When showing copy from file in !bc envir, indent a character - otherwise

.. ptex2tex is confused and starts copying...

Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The ``@@@CODE`` identifier must appear at the very beginning of the line.
The first specification copies the complete file ``doconce_program.sh``.
The second specification copies from the first line matching the *regular
expression* ``doconce clean`` up to, but not including the line
matching the *regular expression* ``^doconce split_rst``.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside ``!bc shpro``
and ``!ec`` directives, if a complete file is copied, while the
directives become ``!bc shcod`` and ``!ec`` when a code snippet is copied
from file. In general, for a filename extension ``.X``, the environment
becomes ``!bc Xpro`` or ``!bc Xcod`` for a complete program or snippet,
respectively. The enivorments (``Xcod`` and ``Xpro``) are only active
for ``latex`` and ``sphinx`` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats ``html``, ``sphinx``, ``latex``,
pdflatex`, ``pandoc``, and ``mwiki`` work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
Ax=b. To help increase readability in other formats than ``sphinx``,
``latex``, and ``pdflatex``, inline mathematics may have a more human
readable companion expression. The syntax is like::


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
``!bt``
and
``!et`` (begin/end TeX) directives starting on the beginning of a line::


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et


This LaTeX code gets rendered as::

        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}

Here is a single equation::


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in::

        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]


Any LaTeX syntax is accepted, but if output in the ``sphinx``, ``pandoc``,
``mwiki``, ``html``, or ``ipynb`` formats
is also important, one should follow these rules:

  * Use only the equation environments ``\[``, ``\]``,
    ``equation``, ``equation*``, ``align``, and ``align*``.

  * MediaWiki (``mwiki``) does not support references to equations.

(Doconce performs extensions to ``sphinx`` and other formats such that
labels in ``align`` environments work well.)


.. note::
   LaTeX supports lots of fancy formatting, for example, multiple
   plots in the same figure, footnotes, margin notes, etc.
   Allowing other output formats, such as ``sphinx``, makes it necessary
   to only utilze very standard LaTeX and avoid, for instance, more than
   one plot per figure. However, one can use preprocessor if-tests on
   the format (typically ``if FORMAT in ("latex", "pdflatex")``) to
   include special code for ``latex`` and ``pdflatex`` output and more
   straightforward typesetting for other formats. In this way, one can
   also allow advanced LaTeX features and fine tuning of resulting
   PDF document.


*LaTeX Newcommands.* The author can define ``newcommand`` statements in files with names
``newcommands*.tex``. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that ``newcommands_keep.tex``
contains the newcommands that are kept in the document, while
those in ``newcommands_replace.tex`` will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For ``html``, ``sphinx``, ``latex``, ``pdflatex``,
``mwiki``, ``ipynb``, and ``pandoc``, the mathematics in newcommands is
rendered nicely anyway.


Hyperlinks
----------

Links use either a link text or the raw URL::


        Here is some "some link text": "http://some.net/address"
        (as in "search google": "http://google.com")
        or just the raw address: URL: "http://google.com".
        
        Links to files typeset in verbatim mode applies backtics:
        "`myfile.py`": "http://some.net/some/place/myfile.py".
        
        Mail addresses works too: send problems to
        "`hpl@simula.no`": "mailto:hpl@simula.no"
        or just "send mail": "mailto:hpl@simula.no".


Figures and Movies
------------------

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note three important syntax details:

 1. A mandatory comma after the figure/movie filename,

 2. no comments between ``width``, ``height``, and ``frac`` and no spaces
    around the ``=`` characters,

 3. all of the command must appear on a single line,

 4. there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The ``width``
and ``height`` parameters affect HTML formats (``html``, ``rst``, ``sphinx``),
while ``frac`` is the width of the image as a fraction of the total text
width in the ``latex`` and ``pdflatex`` formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the::


        doconce combine_images image1 image2 ... output_image

This command applies ``montage`` or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in ``html`` and ``sphinx`` documents
and otherwise be represented by a link. The syntax is::


        MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.
        
        MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.
        

The latter results in

.. raw:: html
        
        <iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>
        
        <em>Vimeo movie.</em>
        




Tables
------

The table in the section `Section Types`_ was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option ``--tables2csv`` (to ``doconce format``)
makes Doconce dump each table to CSV format in a file ``table_X.csv``,
where ``X`` is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

Labels and References
---------------------

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword. It is common practice to choose ``name``
as some hierarchical name, say ``a:b:c``, where ``a`` and ``b`` indicate
some abbreviations for a section and/or subsection for the topic and
``c`` is some name for the particular unit that has a label.

A reference to the label ``name`` is written as::


        ref{name}

again with no backslash before ``ref``.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


Citations and Bibliography
--------------------------

Single citations are written as::


        cite{name}

where ``name`` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have ``name`` on the form
``Author1_Author2_YYYY``, ``Author_YYYY``, or ``Author1_etal_YYYY``, where
``YYYY`` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line ``BIBFILE: papers.pub``,
where ``papers.pub`` is a publication database in the
`Publish <https://bitbucket.org/logg/publish>`_ format.
BibTeX ``.bib`` files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

Generalized Citations
---------------------

There is a *generalized referencing* feature in Doconce that allows
a reference with ``ref`` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text ``internal`` if all
``label`_` references in ``internal`` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
``latex`` or ``pdflatex`` one assumes that the references in ``internal``
are to external documents declared by a comment line ``#
Externaldocuments: testdoc, mydoc`` (usually after the title, authors,
and date). In this case the output text is ``internal cite`` and the
LaTeX package ``xr`` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
``external`` text will be the output.

Index of Keywords
-----------------

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the ``latex``,
``pdflatex``, ``rst``, and ``sphinx`` formats.

Capabilities of The Program ``doconce``
---------------------------------------

The ``doconce`` program can be used for a number of purposes besides
transforming a ``.do.txt`` file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce format sphinx complete_file
        doconce split_rst complete_file        # !split delimiters
        doconce sphinx_dir complete_file
        python automake_sphinx.py
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create HTML slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # create LaTeX Beamer slides from a (doconce) latex/pdflatex file
        doconce slides_beamer complete_file.tex
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # make HTML file via pandoc from Markdown (.md) file
        doconce md2html file
        
        # make LaTeX file via pandoc from Markdown (.md) file
        doconce md2latex file
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile
        
        # translate a latex document to doconce (requires usually manual fixing)
        doconce latex2doconce latexfile
        
        # check if there are problems with translating latex to doconce
        doconce latex_dislikes latexfile
        
        # typeset a doconce document with pygments (for pretty print of doconce itself)
        doconce pygmentize myfile [pygments-style]
        
        # generate a make.sh script for translating a doconce file to various formats
        doconce makefile docname doconcefile [html sphinx pdflatex ...]
        
        # fix common problems in bibtex files for publish import
        doconce fix_bibtex4publish file1.bib file2.bib ...
        
        # find differences between two files
        doconce diff file1.do.txt file2.do.txt [diffprog]
        (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)
        
        # find differences between the last two Git versions of several files
        doconce gitdiff file1 file2 file3 ...
        
        # convert csv file to doconce table format
        doconce csv2table somefile.csv


Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments ``--without_answers`` and ``--without_solutions``
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with ``!benvirname`` and end with ``!eenvirname``,
where ``envirname`` is the name of the environment. Here is a listing of
the environments:

 * ``c``: computer code (or verbatim text)

 * ``t``: math blocks with LaTeX syntax

 * ``subex``: sub-exercise

 * ``ans``: short answer to exercise or sub-exercise

 * ``sol``: full solution to exercise or sub-exercise

 * ``quote``: indented text

 * ``notice``, ``summary``, ``warning``, ``question``, ``hint``: admonition boxes with
    custom title, special icon, and (frequently) background color

 * ``pop``: text to gradually pop up in slide presentations

 * ``slidecell``: indication of cells in a grid layout for elements on a
   slide

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either ``preprocess`` and/or
``mako``. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The ``mako`` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command ``doconce format`` first runs ``preprocess`` and then ``mako``.
Here is a typical example on utilizing ``preprocess`` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
        \hline
        0.0          & 1.4186       & -5.01        \\ 
        2.0          & 1.376512     & 11.919       \\ 
        4.0          & 1.1E+1       & 14.717624    \\ 
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the ``mako`` preprocessor the if-else tests have slightly different syntax.
An `example document <http://hplgit.github.com/bioinf-py/>`_ contains
some illustrations on how to utilize ``mako`` (clone the GitHub project and
examine the Doconce source and the ``doc/src/make.sh`` script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.sphinx.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

Doconce Quick Reference
-----------------------

:Author: Hans Petter Langtangen
:Date: Jan 32, 2100

**WARNING: This quick reference is very incomplete!**

*Mission.* Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's ``blogger.com``, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format ``latex`` and ``pdflatex``)

 * HTML (format ``html``)

 * reStructuredText (format ``rst``)

 * plain (untagged) ASCII (format ``plain``)

 * Sphinx (format ``sphinx``)

 * IPython notebook (format ``ipynb``)

 * MediaWiki (format ``mwiki``)

 * (Pandoc extended) Markdown (format ``pandoc``)

 * Googlecode wiki (format ``gwiki``)

 * Creoloe wiki (format ``cwiki``)

 * Epydoc (format ``epydoc``)

 * StructuredText (format ``st``)

For documents with much code and mathematics, the best (and most supported)
formats are ``latex``, ``pdflatex``, ``sphinx``, and ``html``; and to a slightly
less extent ``mwiki`` and ``pandoc``. The HTML format supports blogging on
Google and Wordpress.


Emacs syntax support
--------------------

The file `.doconce-mode.el <https://doconce.googlecode.com/hg/misc/.doconce-mode.el>`_ in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add ``(load-file "~/.doconce-mode.el")`` to the ``.emacs``
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

==================================  ==================================  
            Emacs key                             Action                
==================================  ==================================  
Ctrl+c f                            figure                              
Ctrl+c v                            movie/video                         
Ctrl+c h1                           heading level 1 (section/h1)        
Ctrl+c h2                           heading level 2 (subsection/h2)     
Ctrl+c h3                           heading level 2 (subsection/h3)     
Ctrl+c hp                           heading for paragraph               
Ctrl+c me                           math environment: !bt equation !et  
Ctrl+c ma                           math environment: !bt align !et     
Ctrl+c ce                           code environment: !bc !ec           
Ctrl+c cf                           code from file: @@@CODE             
Ctrl+c table2                       table with 2 columns                
Ctrl+c table3                       table with 3 columns                
Ctrl+c table4                       table with 4 columns                
Ctrl+c exer                         exercise outline                    
Ctrl+c slide                        slide outline                       
Ctrl+c help                         print this table                    
==================================  ==================================  

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads

.. code-block:: text


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is

.. code-block:: text


        name Email: somename@adr.net at institution1 & institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the ``&`` keyword
separates the institutions (the keyword ``and`` works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from ``today`` if not the
current date is wanted, e.g., ``Feb 22, 2016``.

The table of contents is removed by writing ``TOC: off``.


.. _quick:sections:

Section Types
-------------

===============================================  ===============================================  
                  Section type                                        Syntax                      
===============================================  ===============================================  
chapter                                          ``========= Heading ========`` (9 ``=``)         
section                                          ``======= Heading =======``    (7 ``=``)         
subsection                                       ``===== Heading =====``        (5 ``=``)         
subsubsection                                    ``=== Heading ===``            (3 ``=``)         
paragraph                                        ``__Heading.__``               (2 ``_``)         
abstract                                         ``__Abstract.__`` Running text...                
appendix                                         ``======= Appendix: heading =======`` (7 ``=``)  
appendix                                         ``===== Appendix: heading =====`` (5 ``=``)      
exercise                                         ``======= Exercise: heading =======`` (7 ``=``)  
exercise                                         ``===== Exercise: heading =====`` (5 ``=``)      
===============================================  ===============================================  

Note that abstracts are recognized by starting with ``__Abstract.__`` or
``__Summary.__`` at the beginning of a line and ending with three or
more ``=`` signs of the next heading.

The ``Exercise:`` keyword kan be substituted by ``Problem:`` or ``Project:``.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

Inline Formatting
-----------------

Words surrounded by ``*`` are emphasized: ``*emphasized words*`` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: ``_boldface_`` becomes **boldface**. Colored words
are also possible: the text

.. code-block:: text


        `color{red}{two red words}`

becomes <font color="red">two red words</font>.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with ``*``, *enumeration lists*, where each item starts with ``o`` and gets
consqutive numbers,
and *description* lists, where each item starts with ``-`` followed
by a keyword and a colon.

.. code-block:: text


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1: 
   followed by
   some text
   over multiple
   lines

 keyword2: 
   followed by text on the next line

 keyword3: 
   and its description may fit on one line

Comment lines
-------------

Lines starting with ``#`` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats ``rst`` and
``sphinx`` are desired.

Comment lines starting with ``##`` are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
``# #ifdef EXTRA`` and ``# #endif`` around the text. The command line
option ``-DEXTRA`` will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


Inline comments
---------------

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax

.. code-block:: text


        [name: running text]

where ``name`` is the name or ID of an author or reader making the comment,
and ``running text`` is the comment. Here goes an example.
(**hpl 1**: There must be a space after the colon,
but the running text can occupy multiple lines.)
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the ``-DTOTONOTES`` option to ``ptex2tex`` or ``doconce ptex2tex``,
colorful margin or inline boxes (using the ``todonotes`` package)
make it very easy to spot the comments.

Running

.. code-block:: console

        doconce format html mydoc.do.txt --skip_inline_comments

removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by

.. code-block:: console

        doconce remove_inline_comments mydoc.do.txt


Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in

.. code-block:: text


        Some sentence with `words in verbatim style`.

resulting in Some sentence with ``words in verbatim style``.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between ``!bc xxx`` and ``!ec`` directives, which must appear on the
beginning of the line. A specification ``xxx`` indicates what verbatim
formatting style that is to be used. Typical values for ``xxx`` are
nothing, ``cod`` for a code snippet, ``pro`` for a complete program,
``sys`` for a terminal session, ``dat`` for a data file (or output from a
program),
``Xpro`` or ``Xcod`` for a program or code snipped, respectively,
in programming ``X``, where ``X`` may be ``py`` for Python,
``cy`` for Cython, ``sh`` for Bash or other Unix shells,
``f`` for Fortran, ``c`` for C, ``cpp`` for C++, ``m`` for MATLAB,
``pl`` for Perl. For output in ``latex`` one can let ``xxx`` reflect any
defined verbatim environment in the ``ptex2tex`` configuration file
(``.ptex2tex.cfg``). For ``sphinx`` output one can insert a comment

.. code-block:: text


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (``xxx``) onto valid language types for
Pygments (which is what ``sphinx`` applies to typeset computer code).

The ``xxx`` specifier has only effect for ``latex`` and
``sphinx`` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):


.. code-block:: python

        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


.. When showing copy from file in !bc envir, indent a character - otherwise

.. ptex2tex is confused and starts copying...

Computer code can also be copied from a file:

.. code-block:: text


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The ``@@@CODE`` identifier must appear at the very beginning of the line.
The first specification copies the complete file ``doconce_program.sh``.
The second specification copies from the first line matching the *regular
expression* ``doconce clean`` up to, but not including the line
matching the *regular expression* ``^doconce split_rst``.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside ``!bc shpro``
and ``!ec`` directives, if a complete file is copied, while the
directives become ``!bc shcod`` and ``!ec`` when a code snippet is copied
from file. In general, for a filename extension ``.X``, the environment
becomes ``!bc Xpro`` or ``!bc Xcod`` for a complete program or snippet,
respectively. The enivorments (``Xcod`` and ``Xpro``) are only active
for ``latex`` and ``sphinx`` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats ``html``, ``sphinx``, ``latex``,
pdflatex`, ``pandoc``, and ``mwiki`` work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
:math:`Ax=b`. To help increase readability in other formats than ``sphinx``,
``latex``, and ``pdflatex``, inline mathematics may have a more human
readable companion expression. The syntax is like

.. code-block:: text


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
``!bt``
and
``!et`` (begin/end TeX) directives starting on the beginning of a line:


.. code-block:: text


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et


This LaTeX code gets rendered as


.. math::
        
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        

Here is a single equation:


.. code-block:: text


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in


.. math::
         \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.


Any LaTeX syntax is accepted, but if output in the ``sphinx``, ``pandoc``,
``mwiki``, ``html``, or ``ipynb`` formats
is also important, one should follow these rules:

  * Use only the equation environments ``\[``, ``\]``,
    ``equation``, ``equation*``, ``align``, and ``align*``.

  * MediaWiki (``mwiki``) does not support references to equations.

(Doconce performs extensions to ``sphinx`` and other formats such that
labels in ``align`` environments work well.)


.. note::
   LaTeX supports lots of fancy formatting, for example, multiple
   plots in the same figure, footnotes, margin notes, etc.
   Allowing other output formats, such as ``sphinx``, makes it necessary
   to only utilze very standard LaTeX and avoid, for instance, more than
   one plot per figure. However, one can use preprocessor if-tests on
   the format (typically ``if FORMAT in ("latex", "pdflatex")``) to
   include special code for ``latex`` and ``pdflatex`` output and more
   straightforward typesetting for other formats. In this way, one can
   also allow advanced LaTeX features and fine tuning of resulting
   PDF document.


*LaTeX Newcommands.* The author can define ``newcommand`` statements in files with names
``newcommands*.tex``. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that ``newcommands_keep.tex``
contains the newcommands that are kept in the document, while
those in ``newcommands_replace.tex`` will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For ``html``, ``sphinx``, ``latex``, ``pdflatex``,
``mwiki``, ``ipynb``, and ``pandoc``, the mathematics in newcommands is
rendered nicely anyway.


Hyperlinks
----------

Links use either a link text or the raw URL:


.. code-block:: text


        Here is some "some link text": "http://some.net/address"
        (as in "search google": "http://google.com")
        or just the raw address: URL: "http://google.com".
        
        Links to files typeset in verbatim mode applies backtics:
        "`myfile.py`": "http://some.net/some/place/myfile.py".
        
        Mail addresses works too: send problems to
        "`hpl@simula.no`": "mailto:hpl@simula.no"
        or just "send mail": "mailto:hpl@simula.no".


Figures and Movies
------------------

Figures and movies have almost equal syntax:

.. code-block:: text


        FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note three important syntax details:

 1. A mandatory comma after the figure/movie filename,

 2. no comments between ``width``, ``height``, and ``frac`` and no spaces
    around the ``=`` characters,

 3. all of the command must appear on a single line,

 4. there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The ``width``
and ``height`` parameters affect HTML formats (``html``, ``rst``, ``sphinx``),
while ``frac`` is the width of the image as a fraction of the total text
width in the ``latex`` and ``pdflatex`` formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the

.. code-block:: console

        doconce combine_images image1 image2 ... output_image

This command applies ``montage`` or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in ``html`` and ``sphinx`` documents
and otherwise be represented by a link. The syntax is


.. code-block:: text


        MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.
        
        MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.
        

The latter results in

.. raw:: html
        
        <iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>
        
        <em>Vimeo movie.</em>
        




Tables
------

The table in the section :ref:`quick:sections` was written with this
syntax:

.. code-block:: text


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option ``--tables2csv`` (to ``doconce format``)
makes Doconce dump each table to CSV format in a file ``table_X.csv``,
where ``X`` is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

Labels and References
---------------------

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax

.. code-block:: text


        label{name}

with no backslash
preceding the label keyword. It is common practice to choose ``name``
as some hierarchical name, say ``a:b:c``, where ``a`` and ``b`` indicate
some abbreviations for a section and/or subsection for the topic and
``c`` is some name for the particular unit that has a label.

A reference to the label ``name`` is written as

.. code-block:: text


        ref{name}

again with no backslash before ``ref``.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


Citations and Bibliography
--------------------------

Single citations are written as

.. code-block:: text


        cite{name}

where ``name`` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have ``name`` on the form
``Author1_Author2_YYYY``, ``Author_YYYY``, or ``Author1_etal_YYYY``, where
``YYYY`` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:

.. code-block:: text


        cite{name1,name2,name3}


The bibliography is specified by a line ``BIBFILE: papers.pub``,
where ``papers.pub`` is a publication database in the
`Publish <https://bitbucket.org/logg/publish>`_ format.
BibTeX ``.bib`` files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

Generalized Citations
---------------------

There is a *generalized referencing* feature in Doconce that allows
a reference with ``ref`` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is

.. code-block:: text


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text ``internal`` if all
`:ref:`label`` references in ``internal`` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
``latex`` or ``pdflatex`` one assumes that the references in ``internal``
are to external documents declared by a comment line ``#
Externaldocuments: testdoc, mydoc`` (usually after the title, authors,
and date). In this case the output text is ``internal cite`` and the
LaTeX package ``xr`` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
``external`` text will be the output.

Index of Keywords
-----------------

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)

.. code-block:: text


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the ``latex``,
``pdflatex``, ``rst``, and ``sphinx`` formats.

Capabilities of The Program ``doconce``
---------------------------------------

The ``doconce`` program can be used for a number of purposes besides
transforming a ``.do.txt`` file to some format. Here is the
list of capabilities:


.. code-block:: bash

        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce format sphinx complete_file
        doconce split_rst complete_file        # !split delimiters
        doconce sphinx_dir complete_file
        python automake_sphinx.py
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create HTML slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # create LaTeX Beamer slides from a (doconce) latex/pdflatex file
        doconce slides_beamer complete_file.tex
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # make HTML file via pandoc from Markdown (.md) file
        doconce md2html file
        
        # make LaTeX file via pandoc from Markdown (.md) file
        doconce md2latex file
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile
        
        # translate a latex document to doconce (requires usually manual fixing)
        doconce latex2doconce latexfile
        
        # check if there are problems with translating latex to doconce
        doconce latex_dislikes latexfile
        
        # typeset a doconce document with pygments (for pretty print of doconce itself)
        doconce pygmentize myfile [pygments-style]
        
        # generate a make.sh script for translating a doconce file to various formats
        doconce makefile docname doconcefile [html sphinx pdflatex ...]
        
        # fix common problems in bibtex files for publish import
        doconce fix_bibtex4publish file1.bib file2.bib ...
        
        # find differences between two files
        doconce diff file1.do.txt file2.do.txt [diffprog]
        (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)
        
        # find differences between the last two Git versions of several files
        doconce gitdiff file1 file2 file3 ...
        
        # convert csv file to doconce table format
        doconce csv2table somefile.csv


Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:

.. code-block:: text


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads


.. code-block:: text


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:


.. code-block:: text


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments ``--without_answers`` and ``--without_solutions``
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with ``!benvirname`` and end with ``!eenvirname``,
where ``envirname`` is the name of the environment. Here is a listing of
the environments:

 * ``c``: computer code (or verbatim text)

 * ``t``: math blocks with LaTeX syntax

 * ``subex``: sub-exercise

 * ``ans``: short answer to exercise or sub-exercise

 * ``sol``: full solution to exercise or sub-exercise

 * ``quote``: indented text

 * ``notice``, ``summary``, ``warning``, ``question``, ``hint``: admonition boxes with
    custom title, special icon, and (frequently) background color

 * ``pop``: text to gradually pop up in slide presentations

 * ``slidecell``: indication of cells in a grid layout for elements on a
   slide

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either ``preprocess`` and/or
``mako``. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The ``mako`` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command ``doconce format`` first runs ``preprocess`` and then ``mako``.
Here is a typical example on utilizing ``preprocess`` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:


.. code-block:: text


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
        \hline
        0.0          & 1.4186       & -5.01        \\ 
        2.0          & 1.376512     & 11.919       \\ 
        4.0          & 1.1E+1       & 14.717624    \\ 
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the ``mako`` preprocessor the if-else tests have slightly different syntax.
An `example document <http://hplgit.github.com/bioinf-py/>`_ contains
some illustrations on how to utilize ``mako`` (clone the GitHub project and
examine the Doconce source and the ``doc/src/make.sh`` script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.gwiki *****************
#summary Doconce Quick Reference

By *Hans Petter Langtangen*
==== Jan 32, 2100 ====

<wiki: toc max_depth="2" />



*WARNING: This quick reference is very incomplete!*

*Mission.* Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's `blogger.com`, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

==== Supported Formats ====

Doconce currently translates files to the following formats:


 * LaTeX (format `latex` and `pdflatex`)
 * HTML (format `html`)
 * reStructuredText (format `rst`)
 * plain (untagged) ASCII (format `plain`)
 * Sphinx (format `sphinx`)
 * IPython notebook (format `ipynb`)
 * MediaWiki (format `mwiki`)
 * (Pandoc extended) Markdown (format `pandoc`)
 * Googlecode wiki (format `gwiki`)
 * Creoloe wiki (format `cwiki`)
 * Epydoc (format `epydoc`)
 * StructuredText (format `st`)

For documents with much code and mathematics, the best (and most supported)
formats are `latex`, `pdflatex`, `sphinx`, and `html`; and to a slightly
less extent `mwiki` and `pandoc`. The HTML format supports blogging on
Google and Wordpress.


==== Emacs syntax support ====

The file [https://doconce.googlecode.com/hg/misc/.doconce-mode.el .doconce-mode.el] in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add `(load-file "~/.doconce-mode.el")` to the `.emacs`
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:


 ||              *Emacs key*                ||                *Action*                 ||
 ||  Ctrl+c f                               ||  figure                                 ||
 ||  Ctrl+c v                               ||  movie/video                            ||
 ||  Ctrl+c h1                              ||  heading level 1 (section/h1)           ||
 ||  Ctrl+c h2                              ||  heading level 2 (subsection/h2)        ||
 ||  Ctrl+c h3                              ||  heading level 2 (subsection/h3)        ||
 ||  Ctrl+c hp                              ||  heading for paragraph                  ||
 ||  Ctrl+c me                              ||  math environment: !bt equation !et     ||
 ||  Ctrl+c ma                              ||  math environment: !bt align !et        ||
 ||  Ctrl+c ce                              ||  code environment: !bc !ec              ||
 ||  Ctrl+c cf                              ||  code from file: @@@CODE                ||
 ||  Ctrl+c table2                          ||  table with 2 columns                   ||
 ||  Ctrl+c table3                          ||  table with 3 columns                   ||
 ||  Ctrl+c table4                          ||  table with 4 columns                   ||
 ||  Ctrl+c exer                            ||  exercise outline                       ||
 ||  Ctrl+c slide                           ||  slide outline                          ||
 ||  Ctrl+c help                            ||  print this table                       ||


==== Title, Authors, and Date ====

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
{{{
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
}}}
The entire title must appear on a single line.
The author syntax is
{{{
name Email: somename@adr.net at institution1 & institution2
}}}
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the `&` keyword
separates the institutions (the keyword `and` works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from `today` if not the
current date is wanted, e.g., `Feb 22, 2016`.

The table of contents is removed by writing `TOC: off`.


==== Section Types ====

 ||                  *Section type*                  ||                     *Syntax*                     ||
 ||  chapter                                         ||  `========= Heading ========` (9 `=`)            ||
 ||  section                                         ||  `======= Heading =======`    (7 `=`)            ||
 ||  subsection                                      ||  `===== Heading =====`        (5 `=`)            ||
 ||  subsubsection                                   ||  `=== Heading ===`            (3 `=`)            ||
 ||  paragraph                                       ||  `__Heading.__`               (2 `_`)            ||
 ||  abstract                                        ||  `__Abstract.__` Running text...                 ||
 ||  appendix                                        ||  `======= Appendix: heading =======` (7 `=`)     ||
 ||  appendix                                        ||  `===== Appendix: heading =====` (5 `=`)         ||
 ||  exercise                                        ||  `======= Exercise: heading =======` (7 `=`)     ||
 ||  exercise                                        ||  `===== Exercise: heading =====` (5 `=`)         ||


Note that abstracts are recognized by starting with `__Abstract.__` or
`__Summary.__` at the beginning of a line and ending with three or
more `=` signs of the next heading.

The `Exercise:` keyword kan be substituted by `Problem:` or `Project:`.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

==== Inline Formatting ====

Words surrounded by `*` are emphasized: `*emphasized words*` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: `_boldface_` becomes *boldface*. Colored words
are also possible: the text
{{{
`color{red}{two red words}`
}}}
becomes <font color="red">two red words</font>.

==== Lists ====

There are three types of lists: *bullet lists*, where each item starts
with `*`, *enumeration lists*, where each item starts with `o` and gets
consqutive numbers,
and *description* lists, where each item starts with `-` followed
by a keyword and a colon.
{{{
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
}}}
The code above follows.

Here is a bullet list:


 * item1
 * item2

  * subitem1 of item2
  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:


# item1
# item2   may appear on   multiple lines

 # subitem1 of item2
 # subitem2 of item2


# item3

And finally a description list:


 * keyword1:  
   followed by   some text   over multiple   lines
 * keyword2:     followed by text on the next line
 * keyword3:  
   and its description may fit on one line

==== Comment lines ====

Lines starting with `#` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats `rst` and
`sphinx` are desired.

Comment lines starting with `##` are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
`# #ifdef EXTRA` and `# #endif` around the text. The command line
option `-DEXTRA` will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


==== Inline comments ====

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax
{{{
[name: running text]
}}}
where `name` is the name or ID of an author or reader making the comment,
and `running text` is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the `-DTOTONOTES` option to `ptex2tex` or `doconce ptex2tex`,
colorful margin or inline boxes (using the `todonotes` package)
make it very easy to spot the comments.

Running
{{{
doconce format html mydoc.do.txt --skip_inline_comments
}}}
removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by
{{{
doconce remove_inline_comments mydoc.do.txt
}}}

==== Verbatim/Computer Code ====

Inline verbatim code is typeset within back-ticks, as in
{{{
Some sentence with `words in verbatim style`.
}}}
resulting in Some sentence with `words in verbatim style`.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between `!bc xxx` and `!ec` directives, which must appear on the
beginning of the line. A specification `xxx` indicates what verbatim
formatting style that is to be used. Typical values for `xxx` are
nothing, `cod` for a code snippet, `pro` for a complete program,
`sys` for a terminal session, `dat` for a data file (or output from a
program),
`Xpro` or `Xcod` for a program or code snipped, respectively,
in programming `X`, where `X` may be `py` for Python,
`cy` for Cython, `sh` for Bash or other Unix shells,
`f` for Fortran, `c` for C, `cpp` for C++, `m` for MATLAB,
`pl` for Perl. For output in `latex` one can let `xxx` reflect any
defined verbatim environment in the `ptex2tex` configuration file
(`.ptex2tex.cfg`). For `sphinx` output one can insert a comment
{{{
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
}}}
that maps environments (`xxx`) onto valid language types for
Pygments (which is what `sphinx` applies to typeset computer code).

The `xxx` specifier has only effect for `latex` and
`sphinx` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

{{{
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
}}}

<wiki:comment> When showing copy from file in !bc envir, indent a character - otherwise </wiki:comment>
<wiki:comment> ptex2tex is confused and starts copying... </wiki:comment>
Computer code can also be copied from a file:
{{{
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
}}}
The `@@@CODE` identifier must appear at the very beginning of the line.
The first specification copies the complete file `doconce_program.sh`.
The second specification copies from the first line matching the *regular
expression* `doconce clean` up to, but not including the line
matching the *regular expression* `^doconce split_rst`.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside `!bc shpro`
and `!ec` directives, if a complete file is copied, while the
directives become `!bc shcod` and `!ec` when a code snippet is copied
from file. In general, for a filename extension `.X`, the environment
becomes `!bc Xpro` or `!bc Xcod` for a complete program or snippet,
respectively. The enivorments (`Xcod` and `Xpro`) are only active
for `latex` and `sphinx` outout.

Important warnings:


 * A code block must come after some plain sentence (at least for successful   output in reStructredText), not directly after a section/paragraph heading,   table, comment, figure, or movie.
 * Verbatim code blocks inside lists can be ugly typeset in some   output formats. A more robust approach is to replace the list by   paragraphs with headings.

==== LaTeX Mathematics ====

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats `html`, `sphinx`, `latex`,
pdflatex`, `pandoc`, and `mwiki` work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
`Ax=b`. To help increase readability in other formats than `sphinx`,
`latex`, and `pdflatex`, inline mathematics may have a more human
readable companion expression. The syntax is like
{{{
$\sin(\norm{\bf u})$|$sin(||u||)$
}}}
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
`!bt`
and
`!et` (begin/end TeX) directives starting on the beginning of a line:

{{{
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
}}}

This LaTeX code gets rendered as

{{{
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
}}}
Here is a single equation:

{{{
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
}}}
which results in

{{{
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
}}}

Any LaTeX syntax is accepted, but if output in the `sphinx`, `pandoc`,
`mwiki`, `html`, or `ipynb` formats
is also important, one should follow these rules:


  * Use only the equation environments `\[`, `\]`,    `equation`, `equation*`, `align`, and `align*`.
  * MediaWiki (`mwiki`) does not support references to equations.

(Doconce performs extensions to `sphinx` and other formats such that
labels in `align` environments work well.)

*Notice.* 
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as `sphinx`, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically `if FORMAT in ("latex", "pdflatex")`) to
include special code for `latex` and `pdflatex` output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* The author can define `newcommand` statements in files with names
`newcommands*.tex`. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that `newcommands_keep.tex`
contains the newcommands that are kept in the document, while
those in `newcommands_replace.tex` will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For `html`, `sphinx`, `latex`, `pdflatex`,
`mwiki`, `ipynb`, and `pandoc`, the mathematics in newcommands is
rendered nicely anyway.


==== Hyperlinks ====

Links use either a link text or the raw URL:

{{{
Here is some "some link text": "http://some.net/address"
(as in "search google": "http://google.com")
or just the raw address: URL: "http://google.com".

Links to files typeset in verbatim mode applies backtics:
"`myfile.py`": "http://some.net/some/place/myfile.py".

Mail addresses works too: send problems to
"`hpl@simula.no`": "mailto:hpl@simula.no"
or just "send mail": "mailto:hpl@simula.no".
}}}

==== Figures and Movies ====

Figures and movies have almost equal syntax:
{{{
FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

}}}
Note three important syntax details:


 # A mandatory comma after the figure/movie filename,
 # no comments between `width`, `height`, and `frac` and no spaces    around the `=` characters,
 # all of the command must appear on a single line,
 # there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The `width`
and `height` parameters affect HTML formats (`html`, `rst`, `sphinx`),
while `frac` is the width of the image as a fraction of the total text
width in the `latex` and `pdflatex` formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
{{{
doconce combine_images image1 image2 ... output_image
}}}
This command applies `montage` or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in `html` and `sphinx` documents
and otherwise be represented by a link. The syntax is

{{{
MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

}}}
The latter results in

 Vimeo movie. http://vimeo.com/55562330


==== Tables ====

The table in the section [#Section_Types] was written with this
syntax:
{{{
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
}}}

Note that


 * Each line begins and ends with a vertical bar (pipe symbol).
 * Column data are separated by a vertical bar (pipe symbol).
 * There may be horizontal rules, i.e., lines with dashes for   indicating the heading and the end of the table, and these may   contain characters 'c', 'l', or 'r' for how to align headings or   columns. The first horizontal rule may indicate how to align   headings (center, left, right), and the horizontal rule after the   heading line may indicate how to align the data in the columns   (center, left, right).
 * If the horizontal rules are without alignment information there should   be no vertical bar (pipe symbol) between the columns. Otherwise, such   a bar indicates a vertical bar between columns in LaTeX.
 * Many output formats are so primitive that heading and column alignment   have no effect.

The command-line option `--tables2csv` (to `doconce format`)
makes Doconce dump each table to CSV format in a file `table_X.csv`,
where `X` is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

==== Labels and References ====

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
{{{
label{name}
}}}
with no backslash
preceding the label keyword. It is common practice to choose `name`
as some hierarchical name, say `a:b:c`, where `a` and `b` indicate
some abbreviations for a section and/or subsection for the topic and
`c` is some name for the particular unit that has a label.

A reference to the label `name` is written as
{{{
ref{name}
}}}
again with no backslash before `ref`.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


==== Citations and Bibliography ====

Single citations are written as
{{{
cite{name}
}}}
where `name` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have `name` on the form
`Author1_Author2_YYYY`, `Author_YYYY`, or `Author1_etal_YYYY`, where
`YYYY` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
{{{
cite{name1,name2,name3}
}}}

The bibliography is specified by a line `BIBFILE: papers.pub`,
where `papers.pub` is a publication database in the
[https://bitbucket.org/logg/publish Publish] format.
BibTeX `.bib` files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

==== Generalized Citations ====

There is a *generalized referencing* feature in Doconce that allows
a reference with `ref` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is
{{{
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
}}}
The output from a generalized reference is the text `internal` if all
`label` references in `internal` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
`latex` or `pdflatex` one assumes that the references in `internal`
are to external documents declared by a comment line `#
Externaldocuments: testdoc, mydoc` (usually after the title, authors,
and date). In this case the output text is `internal cite` and the
LaTeX package `xr` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
`external` text will be the output.

==== Index of Keywords ====

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
{{{
index{name}
}}}
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the `latex`,
`pdflatex`, `rst`, and `sphinx` formats.

==== Capabilities of The Program `doconce` ====

The `doconce` program can be used for a number of purposes besides
transforming a `.do.txt` file to some format. Here is the
list of capabilities:

{{{
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce format sphinx complete_file
doconce split_rst complete_file        # !split delimiters
doconce sphinx_dir complete_file
python automake_sphinx.py

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create HTML slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# create LaTeX Beamer slides from a (doconce) latex/pdflatex file
doconce slides_beamer complete_file.tex

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# make HTML file via pandoc from Markdown (.md) file
doconce md2html file

# make LaTeX file via pandoc from Markdown (.md) file
doconce md2latex file

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile

# translate a latex document to doconce (requires usually manual fixing)
doconce latex2doconce latexfile

# check if there are problems with translating latex to doconce
doconce latex_dislikes latexfile

# typeset a doconce document with pygments (for pretty print of doconce itself)
doconce pygmentize myfile [pygments-style]

# generate a make.sh script for translating a doconce file to various formats
doconce makefile docname doconcefile [html sphinx pdflatex ...]

# fix common problems in bibtex files for publish import
doconce fix_bibtex4publish file1.bib file2.bib ...

# find differences between two files
doconce diff file1.do.txt file2.do.txt [diffprog]
(diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)

# find differences between the last two Git versions of several files
doconce gitdiff file1 file2 file3 ...

# convert csv file to doconce table format
doconce csv2table somefile.csv
}}}

==== Exercises ====

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:


  * a headline at the level of a subsection    containing one of the words "Exercise:", "Problem:",    "Project:", or "Example:", followed by a title (required)
  * a label (optional)
  * a solution file (optional)
  * name of file with a student solution (optional)
  * main exercise text (required)
  * a short answer (optional)
  * a full solution (optional)
  * one or more hints (optional)
  * one or more subexercises (subproblems, subprojects), which can also    contain a text, a short answer, a full solution, name student file    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:
{{{
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
}}}
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

{{{
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
}}}
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

{{{
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

}}}
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments `--without_answers` and `--without_solutions`
turn off output of answers and solutions, respectively, except for
examples.


==== Environments ====

Doconce environments start with `!benvirname` and end with `!eenvirname`,
where `envirname` is the name of the environment. Here is a listing of
the environments:


 * `c`: computer code (or verbatim text)
 * `t`: math blocks with LaTeX syntax
 * `subex`: sub-exercise
 * `ans`: short answer to exercise or sub-exercise
 * `sol`: full solution to exercise or sub-exercise
 * `quote`: indented text
 * `notice`, `summary`, `warning`, `question`, `hint`: admonition boxes with    custom title, special icon, and (frequently) background color
 * `pop`: text to gradually pop up in slide presentations
 * `slidecell`: indication of cells in a grid layout for elements on a   slide

==== Preprocessing ====

Doconce documents may utilize a preprocessor, either `preprocess` and/or
`mako`. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The `mako` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command `doconce format` first runs `preprocess` and then `mako`.
Here is a typical example on utilizing `preprocess` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

{{{
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
\hline
0.0          & 1.4186       & -5.01        \\ 
2.0          & 1.376512     & 11.919       \\ 
4.0          & 1.1E+1       & 14.717624    \\ 
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
}}}

With the `mako` preprocessor the if-else tests have slightly different syntax.
An [http://hplgit.github.com/bioinf-py/ example document] contains
some illustrations on how to utilize `mako` (clone the GitHub project and
examine the Doconce source and the `doc/src/make.sh` script).

==== Resources ====

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"



************** File: quickref.mwiki *****************
#TITLE (actually governed by the filename): Doconce Quick Reference

By '''Hans Petter Langtangen'''
==== Jan 32, 2100 ====

__TOC__



'''WARNING: This quick reference is very incomplete!'''

''Mission.''
Enable writing documentation with much mathematics and
computer code ''once, in one place'' and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's <code>blogger.com</code>, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

==== Supported Formats ====

Doconce currently translates files to the following formats:


<ul>
 <li> LaTeX (format <code>latex</code> and <code>pdflatex</code>)
 <li> HTML (format <code>html</code>)
 <li> reStructuredText (format <code>rst</code>)
 <li> plain (untagged) ASCII (format <code>plain</code>)
 <li> Sphinx (format <code>sphinx</code>)
 <li> IPython notebook (format <code>ipynb</code>)
 <li> MediaWiki (format <code>mwiki</code>)
 <li> (Pandoc extended) Markdown (format <code>pandoc</code>)
 <li> Googlecode wiki (format <code>gwiki</code>)
 <li> Creoloe wiki (format <code>cwiki</code>)
 <li> Epydoc (format <code>epydoc</code>)
 <li> StructuredText (format <code>st</code>)
</ul>

For documents with much code and mathematics, the best (and most supported)
formats are <code>latex</code>, <code>pdflatex</code>, <code>sphinx</code>, and <code>html</code>; and to a slightly
less extent <code>mwiki</code> and <code>pandoc</code>. The HTML format supports blogging on
Google and Wordpress.


==== Emacs syntax support ====

The file [https://doconce.googlecode.com/hg/misc/.doconce-mode.el .doconce-mode.el] in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add <code>(load-file "~/.doconce-mode.el")</code> to the <code>.emacs</code>
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

<table border="1">
<tr><td align="center"><b>             Emacs key              </b></td> <td align="center"><b>               Action               </b></td> </tr>
<tr><td align="left">   Ctrl+c f                              </td> <td align="left">   figure                                </td> </tr>
<tr><td align="left">   Ctrl+c v                              </td> <td align="left">   movie/video                           </td> </tr>
<tr><td align="left">   Ctrl+c h1                             </td> <td align="left">   heading level 1 (section/h1)          </td> </tr>
<tr><td align="left">   Ctrl+c h2                             </td> <td align="left">   heading level 2 (subsection/h2)       </td> </tr>
<tr><td align="left">   Ctrl+c h3                             </td> <td align="left">   heading level 2 (subsection/h3)       </td> </tr>
<tr><td align="left">   Ctrl+c hp                             </td> <td align="left">   heading for paragraph                 </td> </tr>
<tr><td align="left">   Ctrl+c me                             </td> <td align="left">   math environment: !bt equation !et    </td> </tr>
<tr><td align="left">   Ctrl+c ma                             </td> <td align="left">   math environment: !bt align !et       </td> </tr>
<tr><td align="left">   Ctrl+c ce                             </td> <td align="left">   code environment: !bc !ec             </td> </tr>
<tr><td align="left">   Ctrl+c cf                             </td> <td align="left">   code from file: @@@CODE               </td> </tr>
<tr><td align="left">   Ctrl+c table2                         </td> <td align="left">   table with 2 columns                  </td> </tr>
<tr><td align="left">   Ctrl+c table3                         </td> <td align="left">   table with 3 columns                  </td> </tr>
<tr><td align="left">   Ctrl+c table4                         </td> <td align="left">   table with 4 columns                  </td> </tr>
<tr><td align="left">   Ctrl+c exer                           </td> <td align="left">   exercise outline                      </td> </tr>
<tr><td align="left">   Ctrl+c slide                          </td> <td align="left">   slide outline                         </td> </tr>
<tr><td align="left">   Ctrl+c help                           </td> <td align="left">   print this table                      </td> </tr>
</table>
==== Title, Authors, and Date ====

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
<syntaxhighlight lang="text">
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
</syntaxhighlight>
The entire title must appear on a single line.
The author syntax is
<syntaxhighlight lang="text">
name Email: somename@adr.net at institution1 & institution2
</syntaxhighlight>
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the <code>&</code> keyword
separates the institutions (the keyword <code>and</code> works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from <code>today</code> if not the
current date is wanted, e.g., <code>Feb 22, 2016</code>.

The table of contents is removed by writing <code>TOC: off</code>.


==== Section Types ====

<table border="1">
<tr><td align="center"><b>                            Section type                           </b></td> <td align="center"><b>                               Syntax                              </b></td> </tr>
<tr><td align="left">   chapter                                                              </td> <td align="left">   <code>========= Heading ========</code> (9 <code>=</code>)           </td> </tr>
<tr><td align="left">   section                                                              </td> <td align="left">   <code>======= Heading =======</code>    (7 <code>=</code>)           </td> </tr>
<tr><td align="left">   subsection                                                           </td> <td align="left">   <code>===== Heading =====</code>        (5 <code>=</code>)           </td> </tr>
<tr><td align="left">   subsubsection                                                        </td> <td align="left">   <code>=== Heading ===</code>            (3 <code>=</code>)           </td> </tr>
<tr><td align="left">   paragraph                                                            </td> <td align="left">   <code>__Heading.__</code>               (2 <code>_</code>)           </td> </tr>
<tr><td align="left">   abstract                                                             </td> <td align="left">   <code>__Abstract.__</code> Running text...                           </td> </tr>
<tr><td align="left">   appendix                                                             </td> <td align="left">   <code>======= Appendix: heading =======</code> (7 <code>=</code>)    </td> </tr>
<tr><td align="left">   appendix                                                             </td> <td align="left">   <code>===== Appendix: heading =====</code> (5 <code>=</code>)        </td> </tr>
<tr><td align="left">   exercise                                                             </td> <td align="left">   <code>======= Exercise: heading =======</code> (7 <code>=</code>)    </td> </tr>
<tr><td align="left">   exercise                                                             </td> <td align="left">   <code>===== Exercise: heading =====</code> (5 <code>=</code>)        </td> </tr>
</table>
Note that abstracts are recognized by starting with <code>__Abstract.__</code> or
<code>__Summary.__</code> at the beginning of a line and ending with three or
more <code>=</code> signs of the next heading.

The <code>Exercise:</code> keyword kan be substituted by <code>Problem:</code> or <code>Project:</code>.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

==== Inline Formatting ====

Words surrounded by <code>*</code> are emphasized: <code>*emphasized words*</code> becomes
''emphasized words''. Similarly, an underscore surrounds words that
appear in boldface: <code>_boldface_</code> becomes '''boldface'''. Colored words
are also possible: the text
<syntaxhighlight lang="text">
`color{red}{two red words}`
</syntaxhighlight>
becomes <font color="red">two red words</font>.

==== Lists ====

There are three types of lists: ''bullet lists'', where each item starts
with <code>*</code>, ''enumeration lists'', where each item starts with <code>o</code> and gets
consqutive numbers,
and ''description'' lists, where each item starts with <code>-</code> followed
by a keyword and a colon.
<syntaxhighlight lang="text">
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
</syntaxhighlight>
The code above follows.

Here is a bullet list:


<ul>
 <li> item1
 <li> item2

<ul>
  <li><li> subitem1 of item2
  <li><li> subitem2 of item2
</ul>

 <li> item3
</ul>

Note that sublists are indented.
Here is an enumeration list:


<ol>
<li> item1
<li> item2
   may appear on
   multiple lines

<ol>
 <li><li> subitem1 of item2
 <li><li> subitem2 of item2
</ol>

<li> item3
</ol>

And finally a description list:


<dl>
 <dt>keyword1:<dd> 
   followed by
   some text
   over multiple
   lines
 <dt>keyword2:<dd> 
   followed by text on the next line
 <dt>keyword3:<dd> 
   and its description may fit on one line
</dl>

==== Comment lines ====

Lines starting with <code>#</code> are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats <code>rst</code> and
<code>sphinx</code> are desired.

Comment lines starting with <code>##</code> are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
<code># #ifdef EXTRA</code> and <code># #endif</code> around the text. The command line
option <code>-DEXTRA</code> will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


==== Inline comments ====

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax
<syntaxhighlight lang="text">
[name: running text]
</syntaxhighlight>
where <code>name</code> is the name or ID of an author or reader making the comment,
and <code>running text</code> is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the <code>-DTOTONOTES</code> option to <code>ptex2tex</code> or <code>doconce ptex2tex</code>,
colorful margin or inline boxes (using the <code>todonotes</code> package)
make it very easy to spot the comments.

Running
<syntaxhighlight lang="bash">
doconce format html mydoc.do.txt --skip_inline_comments
</syntaxhighlight>
removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by
<syntaxhighlight lang="bash">
doconce remove_inline_comments mydoc.do.txt
</syntaxhighlight>

==== Verbatim/Computer Code ====

Inline verbatim code is typeset within back-ticks, as in
<syntaxhighlight lang="text">
Some sentence with `words in verbatim style`.
</syntaxhighlight>
resulting in Some sentence with <code>words in verbatim style</code>.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between <code>!bc xxx</code> and <code>!ec</code> directives, which must appear on the
beginning of the line. A specification <code>xxx</code> indicates what verbatim
formatting style that is to be used. Typical values for <code>xxx</code> are
nothing, <code>cod</code> for a code snippet, <code>pro</code> for a complete program,
<code>sys</code> for a terminal session, <code>dat</code> for a data file (or output from a
program),
<code>Xpro</code> or <code>Xcod</code> for a program or code snipped, respectively,
in programming <code>X</code>, where <code>X</code> may be <code>py</code> for Python,
<code>cy</code> for Cython, <code>sh</code> for Bash or other Unix shells,
<code>f</code> for Fortran, <code>c</code> for C, <code>cpp</code> for C++, <code>m</code> for MATLAB,
<code>pl</code> for Perl. For output in <code>latex</code> one can let <code>xxx</code> reflect any
defined verbatim environment in the <code>ptex2tex</code> configuration file
(<code>.ptex2tex.cfg</code>). For <code>sphinx</code> output one can insert a comment
<syntaxhighlight lang="text">
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
</syntaxhighlight>
that maps environments (<code>xxx</code>) onto valid language types for
Pygments (which is what <code>sphinx</code> applies to typeset computer code).

The <code>xxx</code> specifier has only effect for <code>latex</code> and
<code>sphinx</code> output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

<syntaxhighlight lang="python">
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
</syntaxhighlight>

<!-- When showing copy from file in !bc envir, indent a character - otherwise -->
<!-- ptex2tex is confused and starts copying... -->
Computer code can also be copied from a file:
<syntaxhighlight lang="text">
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
</syntaxhighlight>
The <code>@@@CODE</code> identifier must appear at the very beginning of the line.
The first specification copies the complete file <code>doconce_program.sh</code>.
The second specification copies from the first line matching the ''regular
expression'' <code>doconce clean</code> up to, but not including the line
matching the ''regular expression'' <code>^doconce split_rst</code>.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside <code>!bc shpro</code>
and <code>!ec</code> directives, if a complete file is copied, while the
directives become <code>!bc shcod</code> and <code>!ec</code> when a code snippet is copied
from file. In general, for a filename extension <code>.X</code>, the environment
becomes <code>!bc Xpro</code> or <code>!bc Xcod</code> for a complete program or snippet,
respectively. The enivorments (<code>Xcod</code> and <code>Xpro</code>) are only active
for <code>latex</code> and <code>sphinx</code> outout.

Important warnings:


<ul>
 <li> A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 <li> Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.
</ul>

==== LaTeX Mathematics ====

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats <code>html</code>, <code>sphinx</code>, <code>latex</code>,
pdflatex`, <code>pandoc</code>, and <code>mwiki</code> work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
<math>Ax=b</math>. To help increase readability in other formats than <code>sphinx</code>,
<code>latex</code>, and <code>pdflatex</code>, inline mathematics may have a more human
readable companion expression. The syntax is like
<syntaxhighlight lang="text">
$\sin(\norm{\bf u})$|$sin(||u||)$
</syntaxhighlight>
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
<code>!bt</code>
and
<code>!et</code> (begin/end TeX) directives starting on the beginning of a line:

<syntaxhighlight lang="text">
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
</syntaxhighlight>

This LaTeX code gets rendered as

:<math>
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
</math>
Here is a single equation:

<syntaxhighlight lang="text">
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
</syntaxhighlight>
which results in

:<math>
 \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.
</math>

Any LaTeX syntax is accepted, but if output in the <code>sphinx</code>, <code>pandoc</code>,
<code>mwiki</code>, <code>html</code>, or <code>ipynb</code> formats
is also important, one should follow these rules:


<ul>
  <li> Use only the equation environments <code>\[</code>, <code>\]</code>,
    <code>equation</code>, <code>equation*</code>, <code>align</code>, and <code>align*</code>.
  <li> MediaWiki (<code>mwiki</code>) does not support references to equations.
</ul>

(Doconce performs extensions to <code>sphinx</code> and other formats such that
labels in <code>align</code> environments work well.)


{{mbox
| type = notice
| textstyle = font-size: 90%;
| text = '''Notice.''' LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as <code>sphinx</code>, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically <code>if FORMAT in ("latex", "pdflatex")</code>) to
include special code for <code>latex</code> and <code>pdflatex</code> output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.
}}

''LaTeX Newcommands.''
The author can define <code>newcommand</code> statements in files with names
<code>newcommands*.tex</code>. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that <code>newcommands_keep.tex</code>
contains the newcommands that are kept in the document, while
those in <code>newcommands_replace.tex</code> will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For <code>html</code>, <code>sphinx</code>, <code>latex</code>, <code>pdflatex</code>,
<code>mwiki</code>, <code>ipynb</code>, and <code>pandoc</code>, the mathematics in newcommands is
rendered nicely anyway.


==== Hyperlinks ====

Links use either a link text or the raw URL:

<syntaxhighlight lang="text">
Here is some "some link text": "http://some.net/address"
(as in "search google": "http://google.com")
or just the raw address: URL: "http://google.com".

Links to files typeset in verbatim mode applies backtics:
"`myfile.py`": "http://some.net/some/place/myfile.py".

Mail addresses works too: send problems to
"`hpl@simula.no`": "mailto:hpl@simula.no"
or just "send mail": "mailto:hpl@simula.no".
</syntaxhighlight>

==== Figures and Movies ====

Figures and movies have almost equal syntax:
<syntaxhighlight lang="text">
FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

</syntaxhighlight>
Note three important syntax details:


<ol>
 <li> A mandatory comma after the figure/movie filename,
 <li> no comments between <code>width</code>, <code>height</code>, and <code>frac</code> and no spaces
    around the <code>=</code> characters,
 <li> all of the command must appear on a single line,
 <li> there must be a blank line after the command.
</ol>

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The <code>width</code>
and <code>height</code> parameters affect HTML formats (<code>html</code>, <code>rst</code>, <code>sphinx</code>),
while <code>frac</code> is the width of the image as a fraction of the total text
width in the <code>latex</code> and <code>pdflatex</code> formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
<syntaxhighlight lang="bash">
doconce combine_images image1 image2 ... output_image
</syntaxhighlight>
This command applies <code>montage</code> or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in <code>html</code> and <code>sphinx</code> documents
and otherwise be represented by a link. The syntax is

<syntaxhighlight lang="text">
MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

</syntaxhighlight>
The latter results in

 Vimeo movie. http://vimeo.com/55562330


==== Tables ====

The table in the section [#Section_Types] was written with this
syntax:
<syntaxhighlight lang="text">
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
</syntaxhighlight>

Note that


<ul>
 <li> Each line begins and ends with a vertical bar (pipe symbol).
 <li> Column data are separated by a vertical bar (pipe symbol).
 <li> There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 <li> If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 <li> Many output formats are so primitive that heading and column alignment
   have no effect.
</ul>

The command-line option <code>--tables2csv</code> (to <code>doconce format</code>)
makes Doconce dump each table to CSV format in a file <code>table_X.csv</code>,
where <code>X</code> is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

==== Labels and References ====

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
<syntaxhighlight lang="text">
label{name}
</syntaxhighlight>
with no backslash
preceding the label keyword. It is common practice to choose <code>name</code>
as some hierarchical name, say <code>a:b:c</code>, where <code>a</code> and <code>b</code> indicate
some abbreviations for a section and/or subsection for the topic and
<code>c</code> is some name for the particular unit that has a label.

A reference to the label <code>name</code> is written as
<syntaxhighlight lang="text">
ref{name}
</syntaxhighlight>
again with no backslash before <code>ref</code>.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


==== Citations and Bibliography ====

Single citations are written as
<syntaxhighlight lang="text">
cite{name}
</syntaxhighlight>
where <code>name</code> is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have <code>name</code> on the form
<code>Author1_Author2_YYYY</code>, <code>Author_YYYY</code>, or <code>Author1_etal_YYYY</code>, where
<code>YYYY</code> is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
<syntaxhighlight lang="text">
cite{name1,name2,name3}
</syntaxhighlight>

The bibliography is specified by a line <code>BIBFILE: papers.pub</code>,
where <code>papers.pub</code> is a publication database in the
[https://bitbucket.org/logg/publish Publish] format.
BibTeX <code>.bib</code> files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

==== Generalized Citations ====

There is a ''generalized referencing'' feature in Doconce that allows
a reference with <code>ref</code> to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is
<syntaxhighlight lang="text">
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
</syntaxhighlight>
The output from a generalized reference is the text <code>internal</code> if all
<code>label</code> references in <code>internal</code> are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
<code>latex</code> or <code>pdflatex</code> one assumes that the references in <code>internal</code>
are to external documents declared by a comment line <code>#
Externaldocuments: testdoc, mydoc</code> (usually after the title, authors,
and date). In this case the output text is <code>internal cite</code> and the
LaTeX package <code>xr</code> is used to handle the labels in the external
documents.  If none of the two situations above applies, the
<code>external</code> text will be the output.

==== Index of Keywords ====

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
<syntaxhighlight lang="text">
index{name}
</syntaxhighlight>
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the <code>latex</code>,
<code>pdflatex</code>, <code>rst</code>, and <code>sphinx</code> formats.

==== Capabilities of The Program <code>doconce</code> ====

The <code>doconce</code> program can be used for a number of purposes besides
transforming a <code>.do.txt</code> file to some format. Here is the
list of capabilities:

<syntaxhighlight lang="bash">
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce format sphinx complete_file
doconce split_rst complete_file        # !split delimiters
doconce sphinx_dir complete_file
python automake_sphinx.py

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create HTML slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# create LaTeX Beamer slides from a (doconce) latex/pdflatex file
doconce slides_beamer complete_file.tex

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# make HTML file via pandoc from Markdown (.md) file
doconce md2html file

# make LaTeX file via pandoc from Markdown (.md) file
doconce md2latex file

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile

# translate a latex document to doconce (requires usually manual fixing)
doconce latex2doconce latexfile

# check if there are problems with translating latex to doconce
doconce latex_dislikes latexfile

# typeset a doconce document with pygments (for pretty print of doconce itself)
doconce pygmentize myfile [pygments-style]

# generate a make.sh script for translating a doconce file to various formats
doconce makefile docname doconcefile [html sphinx pdflatex ...]

# fix common problems in bibtex files for publish import
doconce fix_bibtex4publish file1.bib file2.bib ...

# find differences between two files
doconce diff file1.do.txt file2.do.txt [diffprog]
(diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)

# find differences between the last two Git versions of several files
doconce gitdiff file1 file2 file3 ...

# convert csv file to doconce table format
doconce csv2table somefile.csv
</syntaxhighlight>

==== Exercises ====

Doconce supports ''Exercise'', ''Problem'', ''Project'', and ''Example''.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain ''elements'':


<ul>
  <li> a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  <li> a label (optional)
  <li> a solution file (optional)
  <li> name of file with a student solution (optional)
  <li> main exercise text (required)
  <li> a short answer (optional)
  <li> a full solution (optional)
  <li> one or more hints (optional)
  <li> one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)
</ul>

A typical sketch of a a problem without subexercises goes as follows:
<syntaxhighlight lang="text">
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
</syntaxhighlight>
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

<syntaxhighlight lang="text">
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
</syntaxhighlight>
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

<syntaxhighlight lang="text">
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

</syntaxhighlight>
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments <code>--without_answers</code> and <code>--without_solutions</code>
turn off output of answers and solutions, respectively, except for
examples.


==== Environments ====

Doconce environments start with <code>!benvirname</code> and end with <code>!eenvirname</code>,
where <code>envirname</code> is the name of the environment. Here is a listing of
the environments:


<ul>
 <li> <code>c</code>: computer code (or verbatim text)
 <li> <code>t</code>: math blocks with LaTeX syntax
 <li> <code>subex</code>: sub-exercise
 <li> <code>ans</code>: short answer to exercise or sub-exercise
 <li> <code>sol</code>: full solution to exercise or sub-exercise
 <li> <code>quote</code>: indented text
 <li> <code>notice</code>, <code>summary</code>, <code>warning</code>, <code>question</code>, <code>hint</code>: admonition boxes with
    custom title, special icon, and (frequently) background color
 <li> <code>pop</code>: text to gradually pop up in slide presentations
 <li> <code>slidecell</code>: indication of cells in a grid layout for elements on a
   slide
</ul>

==== Preprocessing ====

Doconce documents may utilize a preprocessor, either <code>preprocess</code> and/or
<code>mako</code>. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The <code>mako</code> preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command <code>doconce format</code> first runs <code>preprocess</code> and then <code>mako</code>.
Here is a typical example on utilizing <code>preprocess</code> to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

<syntaxhighlight lang="text">
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
\hline
0.0          & 1.4186       & -5.01        \\ 
2.0          & 1.376512     & 11.919       \\ 
4.0          & 1.1E+1       & 14.717624    \\ 
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
</syntaxhighlight>

With the <code>mako</code> preprocessor the if-else tests have slightly different syntax.
An [http://hplgit.github.com/bioinf-py/ example document] contains
some illustrations on how to utilize <code>mako</code> (clone the GitHub project and
examine the Doconce source and the <code>doc/src/make.sh</code> script).

==== Resources ====

<ul>
 <li> Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"
</ul>



************** File: quickref.cwiki *****************
#summary Doconce Quick Reference
<wiki:toc max_depth="2" />
By **Hans Petter Langtangen**
=== Jan 32, 2100 ===

<<TableOfContents>>



**WARNING: This quick reference is very incomplete!**

//Mission.// Enable writing documentation with much mathematics and
computer code //once, in one place// and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's {{{blogger.com}}}, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

== Supported Formats ==

Doconce currently translates files to the following formats:


 * LaTeX (format {{{latex}}} and {{{pdflatex}}})
 * HTML (format {{{html}}})
 * reStructuredText (format {{{rst}}})
 * plain (untagged) ASCII (format {{{plain}}})
 * Sphinx (format {{{sphinx}}})
 * IPython notebook (format {{{ipynb}}})
 * MediaWiki (format {{{mwiki}}})
 * (Pandoc extended) Markdown (format {{{pandoc}}})
 * Googlecode wiki (format {{{gwiki}}})
 * Creoloe wiki (format {{{cwiki}}})
 * Epydoc (format {{{epydoc}}})
 * StructuredText (format {{{st}}})

For documents with much code and mathematics, the best (and most supported)
formats are {{{latex}}}, {{{pdflatex}}}, {{{sphinx}}}, and {{{html}}}; and to a slightly
less extent {{{mwiki}}} and {{{pandoc}}}. The HTML format supports blogging on
Google and Wordpress.


== Emacs syntax support ==

The file [[https://doconce.googlecode.com/hg/misc/.doconce-mode.el|.doconce-mode.el]] in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add {{{(load-file "~/.doconce-mode.el")}}} to the {{{.emacs}}}
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:


 | =Emacs key                              | =Action                                 |
 |  Ctrl+c f                               |  figure                                 |
 |  Ctrl+c v                               |  movie/video                            |
 |  Ctrl+c h1                              |  heading level 1 (section/h1)           |
 |  Ctrl+c h2                              |  heading level 2 (subsection/h2)        |
 |  Ctrl+c h3                              |  heading level 2 (subsection/h3)        |
 |  Ctrl+c hp                              |  heading for paragraph                  |
 |  Ctrl+c me                              |  math environment: !bt equation !et     |
 |  Ctrl+c ma                              |  math environment: !bt align !et        |
 |  Ctrl+c ce                              |  code environment: !bc !ec              |
 |  Ctrl+c cf                              |  code from file: @@@CODE                |
 |  Ctrl+c table2                          |  table with 2 columns                   |
 |  Ctrl+c table3                          |  table with 3 columns                   |
 |  Ctrl+c table4                          |  table with 4 columns                   |
 |  Ctrl+c exer                            |  exercise outline                       |
 |  Ctrl+c slide                           |  slide outline                          |
 |  Ctrl+c help                            |  print this table                       |


== Title, Authors, and Date ==

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
{{{
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
}}}
The entire title must appear on a single line.
The author syntax is
{{{
name Email: somename@adr.net at institution1 & institution2
}}}
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the {{{&}}} keyword
separates the institutions (the keyword {{{and}}} works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from {{{today}}} if not the
current date is wanted, e.g., {{{Feb 22, 2016}}}.

The table of contents is removed by writing {{{TOC: off}}}.


== Section Types ==



 | =Section type                                            | =Syntax                                                  |
 |  chapter                                                 |  {{{========= Heading ========}}} (9 {{{=}}})            |
 |  section                                                 |  {{{======= Heading =======}}}    (7 {{{=}}})            |
 |  subsection                                              |  {{{===== Heading =====}}}        (5 {{{=}}})            |
 |  subsubsection                                           |  {{{=== Heading ===}}}            (3 {{{=}}})            |
 |  paragraph                                               |  {{{__Heading.__}}}               (2 {{{_}}})            |
 |  abstract                                                |  {{{__Abstract.__}}} Running text...                     |
 |  appendix                                                |  {{{======= Appendix: heading =======}}} (7 {{{=}}})     |
 |  appendix                                                |  {{{===== Appendix: heading =====}}} (5 {{{=}}})         |
 |  exercise                                                |  {{{======= Exercise: heading =======}}} (7 {{{=}}})     |
 |  exercise                                                |  {{{===== Exercise: heading =====}}} (5 {{{=}}})         |


Note that abstracts are recognized by starting with {{{__Abstract.__}}} or
{{{__Summary.__}}} at the beginning of a line and ending with three or
more {{{=}}} signs of the next heading.

The {{{Exercise:}}} keyword kan be substituted by {{{Problem:}}} or {{{Project:}}}.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

== Inline Formatting ==

Words surrounded by {{{*}}} are emphasized: {{{*emphasized words*}}} becomes
//emphasized words//. Similarly, an underscore surrounds words that
appear in boldface: {{{_boldface_}}} becomes **boldface**. Colored words
are also possible: the text
{{{
`color{red}{two red words}`
}}}
becomes <font color="red">two red words</font>.

== Lists ==

There are three types of lists: //bullet lists//, where each item starts
with {{{*}}}, //enumeration lists//, where each item starts with {{{o}}} and gets
consqutive numbers,
and //description// lists, where each item starts with {{{-}}} followed
by a keyword and a colon.
{{{
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
}}}
The code above follows.

Here is a bullet list:


 * item1
 * item2

  ** subitem1 of item2
  //* subitem2 of item2


 // item3

Note that sublists are indented.
Here is an enumeration list:


# item1
# item2   may appear on   multiple lines

 ## subitem1 of item2
 ## subitem2 of item2


# item3

And finally a description list:


 * keyword1:  
   followed by   some text   over multiple   lines
 * keyword2:     followed by text on the next line
 * keyword3:  
   and its description may fit on one line

== Comment lines ==

Lines starting with {{{#}}} are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats {{{rst}}} and
{{{sphinx}}} are desired.

Comment lines starting with {{{##}}} are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
{{{# #ifdef EXTRA}}} and {{{# #endif}}} around the text. The command line
option {{{-DEXTRA}}} will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


== Inline comments ==

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax
{{{
[name: running text]
}}}
where {{{name}}} is the name or ID of an author or reader making the comment,
and {{{running text}}} is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the {{{-DTOTONOTES}}} option to {{{ptex2tex}}} or {{{doconce ptex2tex}}},
colorful margin or inline boxes (using the {{{todonotes}}} package)
make it very easy to spot the comments.

Running
{{{
doconce format html mydoc.do.txt --skip_inline_comments
}}}
removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by
{{{
doconce remove_inline_comments mydoc.do.txt
}}}

== Verbatim/Computer Code ==

Inline verbatim code is typeset within back-ticks, as in
{{{
Some sentence with `words in verbatim style`.
}}}
resulting in Some sentence with {{{words in verbatim style}}}.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between {{{!bc xxx}}} and {{{!ec}}} directives, which must appear on the
beginning of the line. A specification {{{xxx}}} indicates what verbatim
formatting style that is to be used. Typical values for {{{xxx}}} are
nothing, {{{cod}}} for a code snippet, {{{pro}}} for a complete program,
{{{sys}}} for a terminal session, {{{dat}}} for a data file (or output from a
program),
{{{Xpro}}} or {{{Xcod}}} for a program or code snipped, respectively,
in programming {{{X}}}, where {{{X}}} may be {{{py}}} for Python,
{{{cy}}} for Cython, {{{sh}}} for Bash or other Unix shells,
{{{f}}} for Fortran, {{{c}}} for C, {{{cpp}}} for C++, {{{m}}} for MATLAB,
{{{pl}}} for Perl. For output in {{{latex}}} one can let {{{xxx}}} reflect any
defined verbatim environment in the {{{ptex2tex}}} configuration file
({{{.ptex2tex.cfg}}}). For {{{sphinx}}} output one can insert a comment
{{{
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
}}}
that maps environments ({{{xxx}}}) onto valid language types for
Pygments (which is what {{{sphinx}}} applies to typeset computer code).

The {{{xxx}}} specifier has only effect for {{{latex}}} and
{{{sphinx}}} output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

{{{
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
}}}

<wiki:comment> When showing copy from file in !bc envir, indent a character - otherwise </wiki:comment>
<wiki:comment> ptex2tex is confused and starts copying... </wiki:comment>
Computer code can also be copied from a file:
{{{
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
}}}
The {{{@@@CODE}}} identifier must appear at the very beginning of the line.
The first specification copies the complete file {{{doconce_program.sh}}}.
The second specification copies from the first line matching the //regular
expression// {{{doconce clean}}} up to, but not including the line
matching the //regular expression// {{{^doconce split_rst}}}.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside {{{!bc shpro}}}
and {{{!ec}}} directives, if a complete file is copied, while the
directives become {{{!bc shcod}}} and {{{!ec}}} when a code snippet is copied
from file. In general, for a filename extension {{{.X}}}, the environment
becomes {{{!bc Xpro}}} or {{{!bc Xcod}}} for a complete program or snippet,
respectively. The enivorments ({{{Xcod}}} and {{{Xpro}}}) are only active
for {{{latex}}} and {{{sphinx}}} outout.

Important warnings:


 * A code block must come after some plain sentence (at least for successful   output in reStructredText), not directly after a section/paragraph heading,   table, comment, figure, or movie.
 * Verbatim code blocks inside lists can be ugly typeset in some   output formats. A more robust approach is to replace the list by   paragraphs with headings.

== LaTeX Mathematics ==

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats {{{html}}}, {{{sphinx}}}, {{{latex}}},
pdflatex`, {{{pandoc}}}, and {{{mwiki}}} work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
{{{Ax=b}}}. To help increase readability in other formats than {{{sphinx}}},
{{{latex}}}, and {{{pdflatex}}}, inline mathematics may have a more human
readable companion expression. The syntax is like
{{{
$\sin(\norm{\bf u})$|$sin(||u||)$
}}}
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
{{{!bt}}}
and
{{{!et}}} (begin/end TeX) directives starting on the beginning of a line:

{{{
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
}}}

This LaTeX code gets rendered as

{{{
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
}}}
Here is a single equation:

{{{
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
}}}
which results in

{{{
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
}}}

Any LaTeX syntax is accepted, but if output in the {{{sphinx}}}, {{{pandoc}}},
{{{mwiki}}}, {{{html}}}, or {{{ipynb}}} formats
is also important, one should follow these rules:


  * Use only the equation environments {{{\[}}}, {{{\]}}},    {{{equation}}}, {{{equation*}}}, {{{align}}}, and {{{align*}}}.
  * MediaWiki ({{{mwiki}}}) does not support references to equations.

(Doconce performs extensions to {{{sphinx}}} and other formats such that
labels in {{{align}}} environments work well.)

//Notice.// 
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as {{{sphinx}}}, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically {{{if FORMAT in ("latex", "pdflatex")}}}) to
include special code for {{{latex}}} and {{{pdflatex}}} output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

//LaTeX Newcommands.// The author can define {{{newcommand}}} statements in files with names
{{{newcommands*.tex}}}. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that {{{newcommands_keep.tex}}}
contains the newcommands that are kept in the document, while
those in {{{newcommands_replace.tex}}} will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For {{{html}}}, {{{sphinx}}}, {{{latex}}}, {{{pdflatex}}},
{{{mwiki}}}, {{{ipynb}}}, and {{{pandoc}}}, the mathematics in newcommands is
rendered nicely anyway.


== Hyperlinks ==

Links use either a link text or the raw URL:

{{{
Here is some "some link text": "http://some.net/address"
(as in "search google": "http://google.com")
or just the raw address: URL: "http://google.com".

Links to files typeset in verbatim mode applies backtics:
"`myfile.py`": "http://some.net/some/place/myfile.py".

Mail addresses works too: send problems to
"`hpl@simula.no`": "mailto:hpl@simula.no"
or just "send mail": "mailto:hpl@simula.no".
}}}

== Figures and Movies ==

Figures and movies have almost equal syntax:
{{{
FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

}}}
Note three important syntax details:


 # A mandatory comma after the figure/movie filename,
 # no comments between {{{width}}}, {{{height}}}, and {{{frac}}} and no spaces    around the {{{=}}} characters,
 # all of the command must appear on a single line,
 # there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The {{{width}}}
and {{{height}}} parameters affect HTML formats ({{{html}}}, {{{rst}}}, {{{sphinx}}}),
while {{{frac}}} is the width of the image as a fraction of the total text
width in the {{{latex}}} and {{{pdflatex}}} formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
{{{
doconce combine_images image1 image2 ... output_image
}}}
This command applies {{{montage}}} or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in {{{html}}} and {{{sphinx}}} documents
and otherwise be represented by a link. The syntax is

{{{
MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

}}}
The latter results in

 Vimeo movie. [[http://vimeo.com/55562330]]


== Tables ==

The table in the section [#Section_Types] was written with this
syntax:
{{{
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
}}}

Note that


 * Each line begins and ends with a vertical bar (pipe symbol).
 * Column data are separated by a vertical bar (pipe symbol).
 * There may be horizontal rules, i.e., lines with dashes for   indicating the heading and the end of the table, and these may   contain characters 'c', 'l', or 'r' for how to align headings or   columns. The first horizontal rule may indicate how to align   headings (center, left, right), and the horizontal rule after the   heading line may indicate how to align the data in the columns   (center, left, right).
 * If the horizontal rules are without alignment information there should   be no vertical bar (pipe symbol) between the columns. Otherwise, such   a bar indicates a vertical bar between columns in LaTeX.
 * Many output formats are so primitive that heading and column alignment   have no effect.

The command-line option {{{--tables2csv}}} (to {{{doconce format}}})
makes Doconce dump each table to CSV format in a file {{{table_X.csv}}},
where {{{X}}} is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

== Labels and References ==

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
{{{
label{name}
}}}
with no backslash
preceding the label keyword. It is common practice to choose {{{name}}}
as some hierarchical name, say {{{a:b:c}}}, where {{{a}}} and {{{b}}} indicate
some abbreviations for a section and/or subsection for the topic and
{{{c}}} is some name for the particular unit that has a label.

A reference to the label {{{name}}} is written as
{{{
ref{name}
}}}
again with no backslash before {{{ref}}}.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


== Citations and Bibliography ==

Single citations are written as
{{{
cite{name}
}}}
where {{{name}}} is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have {{{name}}} on the form
{{{Author1_Author2_YYYY}}}, {{{Author_YYYY}}}, or {{{Author1_etal_YYYY}}}, where
{{{YYYY}}} is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
{{{
cite{name1,name2,name3}
}}}

The bibliography is specified by a line {{{BIBFILE: papers.pub}}},
where {{{papers.pub}}} is a publication database in the
[[https://bitbucket.org/logg/publish|Publish]] format.
BibTeX {{{.bib}}} files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

== Generalized Citations ==

There is a //generalized referencing// feature in Doconce that allows
a reference with {{{ref}}} to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is
{{{
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
}}}
The output from a generalized reference is the text {{{internal}}} if all
{{{label}}} references in {{{internal}}} are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
{{{latex}}} or {{{pdflatex}}} one assumes that the references in {{{internal}}}
are to external documents declared by a comment line {{{#
Externaldocuments: testdoc, mydoc}}} (usually after the title, authors,
and date). In this case the output text is {{{internal cite}}} and the
LaTeX package {{{xr}}} is used to handle the labels in the external
documents.  If none of the two situations above applies, the
{{{external}}} text will be the output.

== Index of Keywords ==

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
{{{
index{name}
}}}
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the {{{latex}}},
{{{pdflatex}}}, {{{rst}}}, and {{{sphinx}}} formats.

== Capabilities of The Program {{{doconce}}} ==

The {{{doconce}}} program can be used for a number of purposes besides
transforming a {{{.do.txt}}} file to some format. Here is the
list of capabilities:

{{{
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce format sphinx complete_file
doconce split_rst complete_file        # !split delimiters
doconce sphinx_dir complete_file
python automake_sphinx.py

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create HTML slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# create LaTeX Beamer slides from a (doconce) latex/pdflatex file
doconce slides_beamer complete_file.tex

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# make HTML file via pandoc from Markdown (.md) file
doconce md2html file

# make LaTeX file via pandoc from Markdown (.md) file
doconce md2latex file

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile

# translate a latex document to doconce (requires usually manual fixing)
doconce latex2doconce latexfile

# check if there are problems with translating latex to doconce
doconce latex_dislikes latexfile

# typeset a doconce document with pygments (for pretty print of doconce itself)
doconce pygmentize myfile [pygments-style]

# generate a make.sh script for translating a doconce file to various formats
doconce makefile docname doconcefile [html sphinx pdflatex ...]

# fix common problems in bibtex files for publish import
doconce fix_bibtex4publish file1.bib file2.bib ...

# find differences between two files
doconce diff file1.do.txt file2.do.txt [diffprog]
(diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)

# find differences between the last two Git versions of several files
doconce gitdiff file1 file2 file3 ...

# convert csv file to doconce table format
doconce csv2table somefile.csv
}}}

== Exercises ==

Doconce supports //Exercise//, //Problem//, //Project//, and //Example//.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain //elements//:


  * a headline at the level of a subsection    containing one of the words "Exercise:", "Problem:",    "Project:", or "Example:", followed by a title (required)
  * a label (optional)
  * a solution file (optional)
  * name of file with a student solution (optional)
  * main exercise text (required)
  * a short answer (optional)
  * a full solution (optional)
  * one or more hints (optional)
  * one or more subexercises (subproblems, subprojects), which can also    contain a text, a short answer, a full solution, name student file    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:
{{{
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
}}}
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

{{{
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
}}}
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

{{{
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

}}}
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments {{{--without_answers}}} and {{{--without_solutions}}}
turn off output of answers and solutions, respectively, except for
examples.


== Environments ==

Doconce environments start with {{{!benvirname}}} and end with {{{!eenvirname}}},
where {{{envirname}}} is the name of the environment. Here is a listing of
the environments:


 * {{{c}}}: computer code (or verbatim text)
 * {{{t}}}: math blocks with LaTeX syntax
 * {{{subex}}}: sub-exercise
 * {{{ans}}}: short answer to exercise or sub-exercise
 * {{{sol}}}: full solution to exercise or sub-exercise
 * {{{quote}}}: indented text
 * {{{notice}}}, {{{summary}}}, {{{warning}}}, {{{question}}}, {{{hint}}}: admonition boxes with    custom title, special icon, and (frequently) background color
 * {{{pop}}}: text to gradually pop up in slide presentations
 * {{{slidecell}}}: indication of cells in a grid layout for elements on a   slide

== Preprocessing ==

Doconce documents may utilize a preprocessor, either {{{preprocess}}} and/or
{{{mako}}}. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The {{{mako}}} preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command {{{doconce format}}} first runs {{{preprocess}}} and then {{{mako}}}.
Here is a typical example on utilizing {{{preprocess}}} to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

{{{
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
\hline
0.0          & 1.4186       & -5.01        \\ 
2.0          & 1.376512     & 11.919       \\ 
4.0          & 1.1E+1       & 14.717624    \\ 
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
}}}

With the {{{mako}}} preprocessor the if-else tests have slightly different syntax.
An [[http://hplgit.github.com/bioinf-py/|example document]] contains
some illustrations on how to utilize {{{mako}}} (clone the GitHub project and
examine the Doconce source and the {{{doc/src/make.sh}}} script).

== Resources ==


 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"



************** File: quickref.st *****************
TITLE: Doconce Quick Reference
BY: Hans Petter Langtangen (Center for Biomedical Computing, Simula Research Laboratory, and Department of Informatics, University of Oslo)
DATE: Jan 32, 2100
**WARNING: This quick reference is very incomplete!**

*Mission.* Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's 'blogger.com', Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

Supported Formats

Doconce currently translates files to the following formats:

 - LaTeX (format 'latex' and 'pdflatex')
 - HTML (format 'html')
 - reStructuredText (format 'rst')
 - plain (untagged) ASCII (format 'plain')
 - Sphinx (format 'sphinx')
 - IPython notebook (format 'ipynb')
 - MediaWiki (format 'mwiki')
 - (Pandoc extended) Markdown (format 'pandoc')
 - Googlecode wiki (format 'gwiki')
 - Creoloe wiki (format 'cwiki')
 - Epydoc (format 'epydoc')
 - StructuredText (format 'st')

For documents with much code and mathematics, the best (and most supported)
formats are 'latex', 'pdflatex', 'sphinx', and 'html'; and to a slightly
less extent 'mwiki' and 'pandoc'. The HTML format supports blogging on
Google and Wordpress.


Emacs syntax support

The file "https://doconce.googlecode.com/hg/misc/.doconce-mode.el":.doconce-mode.el in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add '(load-file "~/.doconce-mode.el")' to the '.emacs'
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

==================================  ==================================  
            Emacs key                             Action                
==================================  ==================================  
Ctrl+c f                            figure                              
Ctrl+c v                            movie/video                         
Ctrl+c h1                           heading level 1 (section/h1)        
Ctrl+c h2                           heading level 2 (subsection/h2)     
Ctrl+c h3                           heading level 2 (subsection/h3)     
Ctrl+c hp                           heading for paragraph               
Ctrl+c me                           math environment: !bt equation !et  
Ctrl+c ma                           math environment: !bt align !et     
Ctrl+c ce                           code environment: !bc !ec           
Ctrl+c cf                           code from file: @@@CODE             
Ctrl+c table2                       table with 2 columns                
Ctrl+c table3                       table with 3 columns                
Ctrl+c table4                       table with 4 columns                
Ctrl+c exer                         exercise outline                    
Ctrl+c slide                        slide outline                       
Ctrl+c help                         print this table                    
==================================  ==================================  

Title, Authors, and Date

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 & institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the '&' keyword
separates the institutions (the keyword 'and' works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from 'today' if not the
current date is wanted, e.g., 'Feb 22, 2016'.

The table of contents is removed by writing 'TOC: off'.


Section Types

===========================================  ===========================================  
                Section type                                    Syntax                    
===========================================  ===========================================  
chapter                                      '========= Heading ========' (9 '=')         
section                                      '======= Heading ======='    (7 '=')         
subsection                                   '===== Heading ====='        (5 '=')         
subsubsection                                '=== Heading ==='            (3 '=')         
paragraph                                    '__Heading.__'               (2 '_')         
abstract                                     '__Abstract.__' Running text...              
appendix                                     '======= Appendix: heading =======' (7 '=')  
appendix                                     '===== Appendix: heading =====' (5 '=')      
exercise                                     '======= Exercise: heading =======' (7 '=')  
exercise                                     '===== Exercise: heading =====' (5 '=')      
===========================================  ===========================================  

Note that abstracts are recognized by starting with '__Abstract.__' or
'__Summary.__' at the beginning of a line and ending with three or
more '=' signs of the next heading.

The 'Exercise:' keyword kan be substituted by 'Problem:' or 'Project:'.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

Inline Formatting

Words surrounded by '*' are emphasized: '*emphasized words*' becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: '_boldface_' becomes **boldface**. Colored words
are also possible: the text::


        `color{red}{two red words}`

becomes two red words.

Lists

There are three types of lists: *bullet lists*, where each item starts
with '*', *enumeration lists*, where each item starts with 'o' and gets
consqutive numbers,
and *description* lists, where each item starts with '-' followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 - item1
 - item2
  - subitem1 of item2
  - subitem2 of item2

 - item3

Note that sublists are indented.
Here is an enumeration list:

1. item1
2. item2
   may appear on
   multiple lines
 1. subitem1 of item2
 2. subitem2 of item2

3. item3

And finally a description list:

 keyword1: --  
   followed by
   some text
   over multiple
   lines
 keyword2: --  
   followed by text on the next line
 keyword3: --  
   and its description may fit on one line

Comment lines

Lines starting with '#' are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats 'rst' and
'sphinx' are desired.

Comment lines starting with '##' are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
'# #ifdef EXTRA' and '# #endif' around the text. The command line
option '-DEXTRA' will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


Inline comments

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax::


        [name: running text]

where 'name' is the name or ID of an author or reader making the comment,
and 'running text' is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the '-DTOTONOTES' option to 'ptex2tex' or 'doconce ptex2tex',
colorful margin or inline boxes (using the 'todonotes' package)
make it very easy to spot the comments.

Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by::


        doconce remove_inline_comments mydoc.do.txt


Verbatim/Computer Code

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with 'words in verbatim style'.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between '!bc xxx' and '!ec' directives, which must appear on the
beginning of the line. A specification 'xxx' indicates what verbatim
formatting style that is to be used. Typical values for 'xxx' are
nothing, 'cod' for a code snippet, 'pro' for a complete program,
'sys' for a terminal session, 'dat' for a data file (or output from a
program),
'Xpro' or 'Xcod' for a program or code snipped, respectively,
in programming 'X', where 'X' may be 'py' for Python,
'cy' for Cython, 'sh' for Bash or other Unix shells,
'f' for Fortran, 'c' for C, 'cpp' for C++, 'm' for MATLAB,
'pl' for Perl. For output in 'latex' one can let 'xxx' reflect any
defined verbatim environment in the 'ptex2tex' configuration file
('.ptex2tex.cfg'). For 'sphinx' output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments ('xxx') onto valid language types for
Pygments (which is what 'sphinx' applies to typeset computer code).

The 'xxx' specifier has only effect for 'latex' and
'sphinx' output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The '@@@CODE' identifier must appear at the very beginning of the line.
The first specification copies the complete file 'doconce_program.sh'.
The second specification copies from the first line matching the *regular
expression* 'doconce clean' up to, but not including the line
matching the *regular expression* '^doconce split_rst'.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside '!bc shpro'
and '!ec' directives, if a complete file is copied, while the
directives become '!bc shcod' and '!ec' when a code snippet is copied
from file. In general, for a filename extension '.X', the environment
becomes '!bc Xpro' or '!bc Xcod' for a complete program or snippet,
respectively. The enivorments ('Xcod' and 'Xpro') are only active
for 'latex' and 'sphinx' outout.

Important warnings:

 - A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 - Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats 'html', 'sphinx', 'latex',
pdflatex`, 'pandoc', and 'mwiki' work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
Ax=b. To help increase readability in other formats than 'sphinx',
'latex', and 'pdflatex', inline mathematics may have a more human
readable companion expression. The syntax is like::


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
'!bt'
and
'!et' (begin/end TeX) directives starting on the beginning of a line::


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et


This LaTeX code gets rendered as::

        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}

Here is a single equation::


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in::

        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]


Any LaTeX syntax is accepted, but if output in the 'sphinx', 'pandoc',
'mwiki', 'html', or 'ipynb' formats
is also important, one should follow these rules:

  - Use only the equation environments '\[', '\]',
    'equation', 'equation*', 'align', and 'align*'.
  - MediaWiki ('mwiki') does not support references to equations.

(Doconce performs extensions to 'sphinx' and other formats such that
labels in 'align' environments work well.)

*Notice.* 
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as 'sphinx', makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically 'if FORMAT in ("latex", "pdflatex")') to
include special code for 'latex' and 'pdflatex' output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* The author can define 'newcommand' statements in files with names
'newcommands*.tex'. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that 'newcommands_keep.tex'
contains the newcommands that are kept in the document, while
those in 'newcommands_replace.tex' will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For 'html', 'sphinx', 'latex', 'pdflatex',
'mwiki', 'ipynb', and 'pandoc', the mathematics in newcommands is
rendered nicely anyway.


Hyperlinks

Links use either a link text or the raw URL::


        Here is some "some link text": "http://some.net/address"
        (as in "search google": "http://google.com")
        or just the raw address: URL: "http://google.com".
        
        Links to files typeset in verbatim mode applies backtics:
        "`myfile.py`": "http://some.net/some/place/myfile.py".
        
        Mail addresses works too: send problems to
        "`hpl@simula.no`": "mailto:hpl@simula.no"
        or just "send mail": "mailto:hpl@simula.no".


Figures and Movies

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note three important syntax details:

 1. A mandatory comma after the figure/movie filename,
 2. no comments between 'width', 'height', and 'frac' and no spaces
    around the '=' characters,
 3. all of the command must appear on a single line,
 4. there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The 'width'
and 'height' parameters affect HTML formats ('html', 'rst', 'sphinx'),
while 'frac' is the width of the image as a fraction of the total text
width in the 'latex' and 'pdflatex' formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the::


        doconce combine_images image1 image2 ... output_image

This command applies 'montage' or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in 'html' and 'sphinx' documents
and otherwise be represented by a link. The syntax is::


        MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.
        
        MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.
        

The latter results in

 Vimeo movie. "http://vimeo.com/55562330":http://vimeo.com/55562330


Tables

The table in the section "Section Types" was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 - Each line begins and ends with a vertical bar (pipe symbol).
 - Column data are separated by a vertical bar (pipe symbol).
 - There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 - If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 - Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option '--tables2csv' (to 'doconce format')
makes Doconce dump each table to CSV format in a file 'table_X.csv',
where 'X' is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

Labels and References

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword. It is common practice to choose 'name'
as some hierarchical name, say 'a:b:c', where 'a' and 'b' indicate
some abbreviations for a section and/or subsection for the topic and
'c' is some name for the particular unit that has a label.

A reference to the label 'name' is written as::


        ref{name}

again with no backslash before 'ref'.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


Citations and Bibliography

Single citations are written as::


        cite{name}

where 'name' is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have 'name' on the form
'Author1_Author2_YYYY', 'Author_YYYY', or 'Author1_etal_YYYY', where
'YYYY' is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line 'BIBFILE: papers.pub',
where 'papers.pub' is a publication database in the
"https://bitbucket.org/logg/publish":Publish format.
BibTeX '.bib' files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

Generalized Citations

There is a *generalized referencing* feature in Doconce that allows
a reference with 'ref' to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text 'internal' if all
'ref{label}' references in 'internal' are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
'latex' or 'pdflatex' one assumes that the references in 'internal'
are to external documents declared by a comment line '#
Externaldocuments: testdoc, mydoc' (usually after the title, authors,
and date). In this case the output text is 'internal cite' and the
LaTeX package 'xr' is used to handle the labels in the external
documents.  If none of the two situations above applies, the
'external' text will be the output.

Index of Keywords

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the 'latex',
'pdflatex', 'rst', and 'sphinx' formats.

Capabilities of The Program 'doconce'

The 'doconce' program can be used for a number of purposes besides
transforming a '.do.txt' file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce format sphinx complete_file
        doconce split_rst complete_file        # !split delimiters
        doconce sphinx_dir complete_file
        python automake_sphinx.py
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create HTML slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # create LaTeX Beamer slides from a (doconce) latex/pdflatex file
        doconce slides_beamer complete_file.tex
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # make HTML file via pandoc from Markdown (.md) file
        doconce md2html file
        
        # make LaTeX file via pandoc from Markdown (.md) file
        doconce md2latex file
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile
        
        # translate a latex document to doconce (requires usually manual fixing)
        doconce latex2doconce latexfile
        
        # check if there are problems with translating latex to doconce
        doconce latex_dislikes latexfile
        
        # typeset a doconce document with pygments (for pretty print of doconce itself)
        doconce pygmentize myfile [pygments-style]
        
        # generate a make.sh script for translating a doconce file to various formats
        doconce makefile docname doconcefile [html sphinx pdflatex ...]
        
        # fix common problems in bibtex files for publish import
        doconce fix_bibtex4publish file1.bib file2.bib ...
        
        # find differences between two files
        doconce diff file1.do.txt file2.do.txt [diffprog]
        (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)
        
        # find differences between the last two Git versions of several files
        doconce gitdiff file1 file2 file3 ...
        
        # convert csv file to doconce table format
        doconce csv2table somefile.csv


Exercises

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  - a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  - a label (optional)
  - a solution file (optional)
  - name of file with a student solution (optional)
  - main exercise text (required)
  - a short answer (optional)
  - a full solution (optional)
  - one or more hints (optional)
  - one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments '--without_answers' and '--without_solutions'
turn off output of answers and solutions, respectively, except for
examples.


Environments

Doconce environments start with '!benvirname' and end with '!eenvirname',
where 'envirname' is the name of the environment. Here is a listing of
the environments:

 - 'c': computer code (or verbatim text)
 - 't': math blocks with LaTeX syntax
 - 'subex': sub-exercise
 - 'ans': short answer to exercise or sub-exercise
 - 'sol': full solution to exercise or sub-exercise
 - 'quote': indented text
 - 'notice', 'summary', 'warning', 'question', 'hint': admonition boxes with
    custom title, special icon, and (frequently) background color
 - 'pop': text to gradually pop up in slide presentations
 - 'slidecell': indication of cells in a grid layout for elements on a
   slide

Preprocessing

Doconce documents may utilize a preprocessor, either 'preprocess' and/or
'mako'. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The 'mako' preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command 'doconce format' first runs 'preprocess' and then 'mako'.
Here is a typical example on utilizing 'preprocess' to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
        \hline
        0.0          & 1.4186       & -5.01        \\ 
        2.0          & 1.376512     & 11.919       \\ 
        4.0          & 1.1E+1       & 14.717624    \\ 
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the 'mako' preprocessor the if-else tests have slightly different syntax.
An "http://hplgit.github.com/bioinf-py/":example document contains
some illustrations on how to utilize 'mako' (clone the GitHub project and
examine the Doconce source and the 'doc/src/make.sh' script).

Resources

 - Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.epytext *****************
TITLE: Doconce Quick Reference
BY: Hans Petter Langtangen (Center for Biomedical Computing, Simula Research Laboratory, and Department of Informatics, University of Oslo)
DATE: Jan 32, 2100
B{WARNING: This quick reference is very incomplete!}

I{Mission.} Enable writing documentation with much mathematics and
computer code I{once, in one place} and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's C{blogger.com}, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

Supported Formats
-----------------

Doconce currently translates files to the following formats:

 - LaTeX (format C{latex} and C{pdflatex})
 - HTML (format C{html})
 - reStructuredText (format C{rst})
 - plain (untagged) ASCII (format C{plain})
 - Sphinx (format C{sphinx})
 - IPython notebook (format C{ipynb})
 - MediaWiki (format C{mwiki})
 - (Pandoc extended) Markdown (format C{pandoc})
 - Googlecode wiki (format C{gwiki})
 - Creoloe wiki (format C{cwiki})
 - Epydoc (format C{epydoc})
 - StructuredText (format C{st})

For documents with much code and mathematics, the best (and most supported)
formats are C{latex}, C{pdflatex}, C{sphinx}, and C{html}; and to a slightly
less extent C{mwiki} and C{pandoc}. The HTML format supports blogging on
Google and Wordpress.


Emacs syntax support
--------------------

The file U{.doconce-mode.el<https://doconce.googlecode.com/hg/misc/.doconce-mode.el>} in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add C{(load-file "~/.doconce-mode.el")} to the C{.emacs}
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

==================================  ==================================  
            Emacs key                             Action                
==================================  ==================================  
Ctrl+c f                            figure                              
Ctrl+c v                            movie/video                         
Ctrl+c h1                           heading level 1 (section/h1)        
Ctrl+c h2                           heading level 2 (subsection/h2)     
Ctrl+c h3                           heading level 2 (subsection/h3)     
Ctrl+c hp                           heading for paragraph               
Ctrl+c me                           math environment: !bt equation !et  
Ctrl+c ma                           math environment: !bt align !et     
Ctrl+c ce                           code environment: !bc !ec           
Ctrl+c cf                           code from file: @@@CODE             
Ctrl+c table2                       table with 2 columns                
Ctrl+c table3                       table with 3 columns                
Ctrl+c table4                       table with 4 columns                
Ctrl+c exer                         exercise outline                    
Ctrl+c slide                        slide outline                       
Ctrl+c help                         print this table                    
==================================  ==================================  

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 & institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the C{&} keyword
separates the institutions (the keyword C{and} works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from C{today} if not the
current date is wanted, e.g., C{Feb 22, 2016}.

The table of contents is removed by writing C{TOC: off}.


Section Types
-------------

=============================================  =============================================  
                 Section type                                      Syntax                     
=============================================  =============================================  
chapter                                        C{========= Heading ========} (9 C{=})         
section                                        C{======= Heading =======}    (7 C{=})         
subsection                                     C{===== Heading =====}        (5 C{=})         
subsubsection                                  C{=== Heading ===}            (3 C{=})         
paragraph                                      C{__Heading.__}               (2 C{_})         
abstract                                       C{__Abstract.__} Running text...               
appendix                                       C{======= Appendix: heading =======} (7 C{=})  
appendix                                       C{===== Appendix: heading =====} (5 C{=})      
exercise                                       C{======= Exercise: heading =======} (7 C{=})  
exercise                                       C{===== Exercise: heading =====} (5 C{=})      
=============================================  =============================================  

Note that abstracts are recognized by starting with C{__Abstract.__} or
C{__Summary.__} at the beginning of a line and ending with three or
more C{=} signs of the next heading.

The C{Exercise:} keyword kan be substituted by C{Problem:} or C{Project:}.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

Inline Formatting
-----------------

Words surrounded by C{*} are emphasized: C{*emphasized words*} becomes
I{emphasized words}. Similarly, an underscore surrounds words that
appear in boldface: C{_boldface_} becomes B{boldface}. Colored words
are also possible: the text::


        `color{red}{two red words}`

becomes two red words.

Lists
-----

There are three types of lists: I{bullet lists}, where each item starts
with C{*}, I{enumeration lists}, where each item starts with C{o} and gets
consqutive numbers,
and I{description} lists, where each item starts with C{-} followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 - item1
 - item2
  - subitem1 of item2
  - subitem2 of item2

 - item3

Note that sublists are indented.
Here is an enumeration list:

1. item1
2. item2
   may appear on
   multiple lines
 1. subitem1 of item2
 2. subitem2 of item2

3. item3

And finally a description list:

 - keyword1: 
   followed by
   some text
   over multiple
   lines
 - keyword2: 
   followed by text on the next line
 - keyword3: 
   and its description may fit on one line

Comment lines
-------------

Lines starting with C{#} are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats C{rst} and
C{sphinx} are desired.

Comment lines starting with C{##} are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
C{# #ifdef EXTRA} and C{# #endif} around the text. The command line
option C{-DEXTRA} will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


Inline comments
---------------

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax::


        [name: running text]

where C{name} is the name or ID of an author or reader making the comment,
and C{running text} is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the C{-DTOTONOTES} option to C{ptex2tex} or C{doconce ptex2tex},
colorful margin or inline boxes (using the C{todonotes} package)
make it very easy to spot the comments.

Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by::


        doconce remove_inline_comments mydoc.do.txt


Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with C{words in verbatim style}.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between C{!bc xxx} and C{!ec} directives, which must appear on the
beginning of the line. A specification C{xxx} indicates what verbatim
formatting style that is to be used. Typical values for C{xxx} are
nothing, C{cod} for a code snippet, C{pro} for a complete program,
C{sys} for a terminal session, C{dat} for a data file (or output from a
program),
C{Xpro} or C{Xcod} for a program or code snipped, respectively,
in programming C{X}, where C{X} may be C{py} for Python,
C{cy} for Cython, C{sh} for Bash or other Unix shells,
C{f} for Fortran, C{c} for C, C{cpp} for C++, C{m} for MATLAB,
C{pl} for Perl. For output in C{latex} one can let C{xxx} reflect any
defined verbatim environment in the C{ptex2tex} configuration file
(C{.ptex2tex.cfg}). For C{sphinx} output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (C{xxx}) onto valid language types for
Pygments (which is what C{sphinx} applies to typeset computer code).

The C{xxx} specifier has only effect for C{latex} and
C{sphinx} output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The C{@@@CODE} identifier must appear at the very beginning of the line.
The first specification copies the complete file C{doconce_program.sh}.
The second specification copies from the first line matching the I{regular
expression} C{doconce clean} up to, but not including the line
matching the I{regular expression} C{^doconce split_rst}.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside C{!bc shpro}
and C{!ec} directives, if a complete file is copied, while the
directives become C{!bc shcod} and C{!ec} when a code snippet is copied
from file. In general, for a filename extension C{.X}, the environment
becomes C{!bc Xpro} or C{!bc Xcod} for a complete program or snippet,
respectively. The enivorments (C{Xcod} and C{Xpro}) are only active
for C{latex} and C{sphinx} outout.

Important warnings:

 - A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 - Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats C{html}, C{sphinx}, C{latex},
pdflatex`, C{pandoc}, and C{mwiki} work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
M{Ax=b}. To help increase readability in other formats than C{sphinx},
C{latex}, and C{pdflatex}, inline mathematics may have a more human
readable companion expression. The syntax is like::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
C{!bt}
and
C{!et} (begin/end TeX) directives starting on the beginning of a line::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.



This LaTeX code gets rendered as::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


Here is a single equation::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


which results in::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.



Any LaTeX syntax is accepted, but if output in the C{sphinx}, C{pandoc},
C{mwiki}, C{html}, or C{ipynb} formats
is also important, one should follow these rules:

  - Use only the equation environments C{\[}, C{\]},
    C{equation}, C{equation*}, C{align}, and C{align*}.
  - MediaWiki (C{mwiki}) does not support references to equations.

(Doconce performs extensions to C{sphinx} and other formats such that
labels in C{align} environments work well.)

I{Notice.} 
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as C{sphinx}, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically C{if FORMAT in ("latex", "pdflatex")}) to
include special code for C{latex} and C{pdflatex} output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

I{LaTeX Newcommands.} The author can define C{newcommand} statements in files with names
C{newcommands*.tex}. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that C{newcommands_keep.tex}
contains the newcommands that are kept in the document, while
those in C{newcommands_replace.tex} will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For C{html}, C{sphinx}, C{latex}, C{pdflatex},
C{mwiki}, C{ipynb}, and C{pandoc}, the mathematics in newcommands is
rendered nicely anyway.


Hyperlinks
----------

Links use either a link text or the raw URL::


        Here is some "some link text": "http://some.net/address"
        (as in "search google": "http://google.com")
        or just the raw address: URL: "http://google.com".
        
        Links to files typeset in verbatim mode applies backtics:
        "`myfile.py`": "http://some.net/some/place/myfile.py".
        
        Mail addresses works too: send problems to
        "`hpl@simula.no`": "mailto:hpl@simula.no"
        or just "send mail": "mailto:hpl@simula.no".


Figures and Movies
------------------

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note three important syntax details:

 1. A mandatory comma after the figure/movie filename,
 2. no comments between C{width}, C{height}, and C{frac} and no spaces
    around the C{=} characters,
 3. all of the command must appear on a single line,
 4. there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The C{width}
and C{height} parameters affect HTML formats (C{html}, C{rst}, C{sphinx}),
while C{frac} is the width of the image as a fraction of the total text
width in the C{latex} and C{pdflatex} formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the::


        doconce combine_images image1 image2 ... output_image

This command applies C{montage} or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in C{html} and C{sphinx} documents
and otherwise be represented by a link. The syntax is::


        MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.
        
        MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.
        

The latter results in

 Vimeo movie. U{http://vimeo.com/55562330<http://vimeo.com/55562330>}


Tables
------

The table in the section "Section Types" was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 - Each line begins and ends with a vertical bar (pipe symbol).
 - Column data are separated by a vertical bar (pipe symbol).
 - There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 - If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 - Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option C{--tables2csv} (to C{doconce format})
makes Doconce dump each table to CSV format in a file C{table_X.csv},
where C{X} is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

Labels and References
---------------------

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword. It is common practice to choose C{name}
as some hierarchical name, say C{a:b:c}, where C{a} and C{b} indicate
some abbreviations for a section and/or subsection for the topic and
C{c} is some name for the particular unit that has a label.

A reference to the label C{name} is written as::


        ref{name}

again with no backslash before C{ref}.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


Citations and Bibliography
--------------------------

Single citations are written as::


        cite{name}

where C{name} is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have C{name} on the form
C{Author1_Author2_YYYY}, C{Author_YYYY}, or C{Author1_etal_YYYY}, where
C{YYYY} is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line C{BIBFILE: papers.pub},
where C{papers.pub} is a publication database in the
U{Publish<https://bitbucket.org/logg/publish>} format.
BibTeX C{.bib} files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

Generalized Citations
---------------------

There is a I{generalized referencing} feature in Doconce that allows
a reference with C{ref} to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text C{internal} if all
C{ref{label}} references in C{internal} are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
C{latex} or C{pdflatex} one assumes that the references in C{internal}
are to external documents declared by a comment line C{#
Externaldocuments: testdoc, mydoc} (usually after the title, authors,
and date). In this case the output text is C{internal cite} and the
LaTeX package C{xr} is used to handle the labels in the external
documents.  If none of the two situations above applies, the
C{external} text will be the output.

Index of Keywords
-----------------

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the C{latex},
C{pdflatex}, C{rst}, and C{sphinx} formats.

Capabilities of The Program C{doconce}
--------------------------------------

The C{doconce} program can be used for a number of purposes besides
transforming a C{.do.txt} file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce format sphinx complete_file
        doconce split_rst complete_file        # !split delimiters
        doconce sphinx_dir complete_file
        python automake_sphinx.py
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create HTML slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # create LaTeX Beamer slides from a (doconce) latex/pdflatex file
        doconce slides_beamer complete_file.tex
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # make HTML file via pandoc from Markdown (.md) file
        doconce md2html file
        
        # make LaTeX file via pandoc from Markdown (.md) file
        doconce md2latex file
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile
        
        # translate a latex document to doconce (requires usually manual fixing)
        doconce latex2doconce latexfile
        
        # check if there are problems with translating latex to doconce
        doconce latex_dislikes latexfile
        
        # typeset a doconce document with pygments (for pretty print of doconce itself)
        doconce pygmentize myfile [pygments-style]
        
        # generate a make.sh script for translating a doconce file to various formats
        doconce makefile docname doconcefile [html sphinx pdflatex ...]
        
        # fix common problems in bibtex files for publish import
        doconce fix_bibtex4publish file1.bib file2.bib ...
        
        # find differences between two files
        doconce diff file1.do.txt file2.do.txt [diffprog]
        (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)
        
        # find differences between the last two Git versions of several files
        doconce gitdiff file1 file2 file3 ...
        
        # convert csv file to doconce table format
        doconce csv2table somefile.csv


Exercises
---------

Doconce supports I{Exercise}, I{Problem}, I{Project}, and I{Example}.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain I{elements}:

  - a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  - a label (optional)
  - a solution file (optional)
  - name of file with a student solution (optional)
  - main exercise text (required)
  - a short answer (optional)
  - a full solution (optional)
  - one or more hints (optional)
  - one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments C{--without_answers} and C{--without_solutions}
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with C{!benvirname} and end with C{!eenvirname},
where C{envirname} is the name of the environment. Here is a listing of
the environments:

 - C{c}: computer code (or verbatim text)
 - C{t}: math blocks with LaTeX syntax
 - C{subex}: sub-exercise
 - C{ans}: short answer to exercise or sub-exercise
 - C{sol}: full solution to exercise or sub-exercise
 - C{quote}: indented text
 - C{notice}, C{summary}, C{warning}, C{question}, C{hint}: admonition boxes with
    custom title, special icon, and (frequently) background color
 - C{pop}: text to gradually pop up in slide presentations
 - C{slidecell}: indication of cells in a grid layout for elements on a
   slide

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either C{preprocess} and/or
C{mako}. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The C{mako} preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command C{doconce format} first runs C{preprocess} and then C{mako}.
Here is a typical example on utilizing C{preprocess} to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.



With the C{mako} preprocessor the if-else tests have slightly different syntax.
An U{example document<http://hplgit.github.com/bioinf-py/>} contains
some illustrations on how to utilize C{mako} (clone the GitHub project and
examine the Doconce source and the C{doc/src/make.sh} script).

Resources
---------

 - Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.txt *****************
Doconce Quick Reference
=======================

Hans Petter Langtangen [1, 2] 

[1] Center for Biomedical Computing, Simula Research Laboratory
[2] Department of Informatics, University of Oslo

Date: Jan 32, 2100

Table of contents:

 Supported Formats 
 Emacs syntax support 
 Title, Authors, and Date 
 Section Types 
 Inline Formatting 
 Lists 
 Comment lines 
 Inline comments 
 Verbatim/Computer Code 
 LaTeX Mathematics 
 Hyperlinks 
 Figures and Movies 
 Tables 
 Labels and References 
 Citations and Bibliography 
 Generalized Citations 
 Index of Keywords 
 Capabilities of The Program doconce 
 Exercises 
 Environments 
 Preprocessing 
 Resources 




_WARNING: This quick reference is very incomplete!_

*Mission.* Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's blogger.com, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format latex and pdflatex)

 * HTML (format html)

 * reStructuredText (format rst)

 * plain (untagged) ASCII (format plain)

 * Sphinx (format sphinx)

 * IPython notebook (format ipynb)

 * MediaWiki (format mwiki)

 * (Pandoc extended) Markdown (format pandoc)

 * Googlecode wiki (format gwiki)

 * Creoloe wiki (format cwiki)

 * Epydoc (format epydoc)

 * StructuredText (format st)

For documents with much code and mathematics, the best (and most supported)
formats are latex, pdflatex, sphinx, and html; and to a slightly
less extent mwiki and pandoc. The HTML format supports blogging on
Google and Wordpress.


Emacs syntax support
--------------------

The file .doconce-mode.el (https://doconce.googlecode.com/hg/misc/.doconce-mode.el) in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add (load-file "~/.doconce-mode.el") to the .emacs
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:

==================================  ==================================  
            Emacs key                             Action                
==================================  ==================================  
Ctrl+c f                            figure                              
Ctrl+c v                            movie/video                         
Ctrl+c h1                           heading level 1 (section/h1)        
Ctrl+c h2                           heading level 2 (subsection/h2)     
Ctrl+c h3                           heading level 2 (subsection/h3)     
Ctrl+c hp                           heading for paragraph               
Ctrl+c me                           math environment: !bt equation !et  
Ctrl+c ma                           math environment: !bt align !et     
Ctrl+c ce                           code environment: !bc !ec           
Ctrl+c cf                           code from file: @@@CODE             
Ctrl+c table2                       table with 2 columns                
Ctrl+c table3                       table with 3 columns                
Ctrl+c table4                       table with 4 columns                
Ctrl+c exer                         exercise outline                    
Ctrl+c slide                        slide outline                       
Ctrl+c help                         print this table                    
==================================  ==================================  

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 & institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the & keyword
separates the institutions (the keyword and works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from today if not the
current date is wanted, e.g., Feb 22, 2016.

The table of contents is removed by writing TOC: off.


Section Types
-------------

=======================================  =======================================  
              Section type                                Syntax                  
=======================================  =======================================  
chapter                                  ========= Heading ======== (9 =)         
section                                  ======= Heading =======    (7 =)         
subsection                               ===== Heading =====        (5 =)         
subsubsection                            === Heading ===            (3 =)         
paragraph                                __Heading.__               (2 _)         
abstract                                 __Abstract.__ Running text...            
appendix                                 ======= Appendix: heading ======= (7 =)  
appendix                                 ===== Appendix: heading ===== (5 =)      
exercise                                 ======= Exercise: heading ======= (7 =)  
exercise                                 ===== Exercise: heading ===== (5 =)      
=======================================  =======================================  

Note that abstracts are recognized by starting with __Abstract.__ or
*Summary.* at the beginning of a line and ending with three or
more = signs of the next heading.

The Exercise: keyword kan be substituted by Problem: or Project:.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

Inline Formatting
-----------------

Words surrounded by * are emphasized: *emphasized words* becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: _boldface_ becomes _boldface_. Colored words
are also possible: the text::


        `color{red}{two red words}`

becomes two red words.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with *, *enumeration lists*, where each item starts with o and gets
consqutive numbers,
and *description* lists, where each item starts with - followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1: 
   followed by
   some text
   over multiple
   lines

 keyword2: 
   followed by text on the next line

 keyword3: 
   and its description may fit on one line

Comment lines
-------------

Lines starting with # are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats rst and
sphinx are desired.

Comment lines starting with ## are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
# #ifdef EXTRA and # #endif around the text. The command line
option -DEXTRA will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


Inline comments
---------------

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax::


        [name: running text]

where name is the name or ID of an author or reader making the comment,
and running text is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the -DTOTONOTES option to ptex2tex or doconce ptex2tex,
colorful margin or inline boxes (using the todonotes package)
make it very easy to spot the comments.

Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by::


        doconce remove_inline_comments mydoc.do.txt


Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with words in verbatim style.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between !bc xxx and !ec directives, which must appear on the
beginning of the line. A specification xxx indicates what verbatim
formatting style that is to be used. Typical values for xxx are
nothing, cod for a code snippet, pro for a complete program,
sys for a terminal session, dat for a data file (or output from a
program),
Xpro or Xcod for a program or code snipped, respectively,
in programming X, where X may be py for Python,
cy for Cython, sh for Bash or other Unix shells,
f for Fortran, c for C, cpp for C++, m for MATLAB,
pl for Perl. For output in latex one can let xxx reflect any
defined verbatim environment in the ptex2tex configuration file
(.ptex2tex.cfg). For sphinx output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (xxx) onto valid language types for
Pygments (which is what sphinx applies to typeset computer code).

The xxx specifier has only effect for latex and
sphinx output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The @@@CODE identifier must appear at the very beginning of the line.
The first specification copies the complete file doconce_program.sh.
The second specification copies from the first line matching the *regular
expression* doconce clean up to, but not including the line
matching the *regular expression* ^doconce split_rst.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside !bc shpro
and !ec directives, if a complete file is copied, while the
directives become !bc shcod and !ec when a code snippet is copied
from file. In general, for a filename extension .X, the environment
becomes !bc Xpro or !bc Xcod for a complete program or snippet,
respectively. The enivorments (Xcod and Xpro) are only active
for latex and sphinx outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats html, sphinx, latex,
pdflatex`, pandoc, and mwiki work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
Ax=b. To help increase readability in other formats than sphinx,
latex, and pdflatex, inline mathematics may have a more human
readable companion expression. The syntax is like::


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
  !bt
and
  !et (begin/end TeX) directives starting on the beginning of a line::


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et


This LaTeX code gets rendered as::

        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\ 
        \nabla\times \pmb{u} &= 0.
        \end{align*}

Here is a single equation::


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in::

        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]


Any LaTeX syntax is accepted, but if output in the sphinx, pandoc,
mwiki, html, or ipynb formats
is also important, one should follow these rules:

  * Use only the equation environments \[, \],
    equation, equation*, align, and align*.

  * MediaWiki (mwiki) does not support references to equations.

(Doconce performs extensions to sphinx and other formats such that
labels in align environments work well.)

*Notice.* 
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as sphinx, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically if FORMAT in ("latex", "pdflatex")) to
include special code for latex and pdflatex output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* The author can define newcommand statements in files with names
newcommands*.tex. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that newcommands_keep.tex
contains the newcommands that are kept in the document, while
those in newcommands_replace.tex will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For html, sphinx, latex, pdflatex,
mwiki, ipynb, and pandoc, the mathematics in newcommands is
rendered nicely anyway.


Hyperlinks
----------

Links use either a link text or the raw URL::


        Here is some "some link text": "http://some.net/address"
        (as in "search google": "http://google.com")
        or just the raw address: URL: "http://google.com".
        
        Links to files typeset in verbatim mode applies backtics:
        "`myfile.py`": "http://some.net/some/place/myfile.py".
        
        Mail addresses works too: send problems to
        "`hpl@simula.no`": "mailto:hpl@simula.no"
        or just "send mail": "mailto:hpl@simula.no".


Figures and Movies
------------------

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note three important syntax details:

 1. A mandatory comma after the figure/movie filename,

 2. no comments between width, height, and frac and no spaces
    around the = characters,

 3. all of the command must appear on a single line,

 4. there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The width
and height parameters affect HTML formats (html, rst, sphinx),
while frac is the width of the image as a fraction of the total text
width in the latex and pdflatex formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the::


        doconce combine_images image1 image2 ... output_image

This command applies montage or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in html and sphinx documents
and otherwise be represented by a link. The syntax is::


        MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.
        
        MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.
        

The latter results in

 Vimeo movie. http://vimeo.com/55562330


Tables
------

The table in the section "Section Types" was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option --tables2csv (to doconce format)
makes Doconce dump each table to CSV format in a file table_X.csv,
where X is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

Labels and References
---------------------

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword. It is common practice to choose name
as some hierarchical name, say a:b:c, where a and b indicate
some abbreviations for a section and/or subsection for the topic and
c is some name for the particular unit that has a label.

A reference to the label name is written as::


        ref{name}

again with no backslash before ref.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


Citations and Bibliography
--------------------------

Single citations are written as::


        cite{name}

where name is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have name on the form
Author1_Author2_YYYY, Author_YYYY, or Author1_etal_YYYY, where
YYYY is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line BIBFILE: papers.pub,
where papers.pub is a publication database in the
Publish (https://bitbucket.org/logg/publish) format.
BibTeX .bib files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

Generalized Citations
---------------------

There is a *generalized referencing* feature in Doconce that allows
a reference with ref to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text internal if all
ref{label} references in internal are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
latex or pdflatex one assumes that the references in internal
are to external documents declared by a comment line #
Externaldocuments: testdoc, mydoc (usually after the title, authors,
and date). In this case the output text is internal cite and the
LaTeX package xr is used to handle the labels in the external
documents.  If none of the two situations above applies, the
external text will be the output.

Index of Keywords
-----------------

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the latex,
pdflatex, rst, and sphinx formats.

Capabilities of The Program doconce
-----------------------------------

The doconce program can be used for a number of purposes besides
transforming a .do.txt file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce format sphinx complete_file
        doconce split_rst complete_file        # !split delimiters
        doconce sphinx_dir complete_file
        python automake_sphinx.py
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create HTML slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # create LaTeX Beamer slides from a (doconce) latex/pdflatex file
        doconce slides_beamer complete_file.tex
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # make HTML file via pandoc from Markdown (.md) file
        doconce md2html file
        
        # make LaTeX file via pandoc from Markdown (.md) file
        doconce md2latex file
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile
        
        # translate a latex document to doconce (requires usually manual fixing)
        doconce latex2doconce latexfile
        
        # check if there are problems with translating latex to doconce
        doconce latex_dislikes latexfile
        
        # typeset a doconce document with pygments (for pretty print of doconce itself)
        doconce pygmentize myfile [pygments-style]
        
        # generate a make.sh script for translating a doconce file to various formats
        doconce makefile docname doconcefile [html sphinx pdflatex ...]
        
        # fix common problems in bibtex files for publish import
        doconce fix_bibtex4publish file1.bib file2.bib ...
        
        # find differences between two files
        doconce diff file1.do.txt file2.do.txt [diffprog]
        (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)
        
        # find differences between the last two Git versions of several files
        doconce gitdiff file1 file2 file3 ...
        
        # convert csv file to doconce table format
        doconce csv2table somefile.csv


Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments --without_answers and --without_solutions
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with !benvirname and end with !eenvirname,
where envirname is the name of the environment. Here is a listing of
the environments:

 * c: computer code (or verbatim text)

 * t: math blocks with LaTeX syntax

 * subex: sub-exercise

 * ans: short answer to exercise or sub-exercise

 * sol: full solution to exercise or sub-exercise

 * quote: indented text

 * notice, summary, warning, question, hint: admonition boxes with
    custom title, special icon, and (frequently) background color

 * pop: text to gradually pop up in slide presentations

 * slidecell: indication of cells in a grid layout for elements on a
   slide

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either preprocess and/or
mako. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The mako preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command doconce format first runs preprocess and then mako.
Here is a typical example on utilizing preprocess to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
        \hline
        0.0          & 1.4186       & -5.01        \\ 
        2.0          & 1.376512     & 11.919       \\ 
        4.0          & 1.1E+1       & 14.717624    \\ 
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the mako preprocessor the if-else tests have slightly different syntax.
An example document (http://hplgit.github.com/bioinf-py/) contains
some illustrations on how to utilize mako (clone the GitHub project and
examine the Doconce source and the doc/src/make.sh script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.md *****************
% Doconce Quick Reference
% Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo
% Jan 32, 2100

<!-- Table of contents: Run pandoc with --toc option -->



_WARNING: This quick reference is very incomplete!_

*Mission.* Enable writing documentation with much mathematics and
computer code *once, in one place* and include it in traditional LaTeX
books, thesis, and reports, and without extra efforts also make
professionally looking web versions with Sphinx or HTML. Other outlets
include Google's `blogger.com`, Wikipedia/Wikibooks, IPython
notebooks, plus a wide variety of formats for documents without
mathematics and code.

### Supported Formats

Doconce currently translates files to the following formats:

 * LaTeX (format `latex` and `pdflatex`)

 * HTML (format `html`)

 * reStructuredText (format `rst`)

 * plain (untagged) ASCII (format `plain`)

 * Sphinx (format `sphinx`)

 * IPython notebook (format `ipynb`)

 * MediaWiki (format `mwiki`)

 * (Pandoc extended) Markdown (format `pandoc`)

 * Googlecode wiki (format `gwiki`)

 * Creoloe wiki (format `cwiki`)

 * Epydoc (format `epydoc`)

 * StructuredText (format `st`)

For documents with much code and mathematics, the best (and most supported)
formats are `latex`, `pdflatex`, `sphinx`, and `html`; and to a slightly
less extent `mwiki` and `pandoc`. The HTML format supports blogging on
Google and Wordpress.


### Emacs syntax support

The file [.doconce-mode.el](https://doconce.googlecode.com/hg/misc/.doconce-mode.el) in the Doconce source distribution
gives a "Doconce Editing Mode" in Emacs. Store the file in the home
directory and add `(load-file "~/.doconce-mode.el")` to the `.emacs`
file.

Besides syntax highlighting of Doconce documents, this Emacs mode
provides a lot of shortcuts for setting up many elements in a document:


            Emacs key                             Action                
----------------------------------  ----------------------------------  
Ctrl+c f                            figure                              
Ctrl+c v                            movie/video                         
Ctrl+c h1                           heading level 1 (section/h1)        
Ctrl+c h2                           heading level 2 (subsection/h2)     
Ctrl+c h3                           heading level 2 (subsection/h3)     
Ctrl+c hp                           heading for paragraph               
Ctrl+c me                           math environment: !bt equation !et  
Ctrl+c ma                           math environment: !bt align !et     
Ctrl+c ce                           code environment: !bc !ec           
Ctrl+c cf                           code from file: @@@CODE             
Ctrl+c table2                       table with 2 columns                
Ctrl+c table3                       table with 3 columns                
Ctrl+c table4                       table with 4 columns                
Ctrl+c exer                         exercise outline                    
Ctrl+c slide                        slide outline                       
Ctrl+c help                         print this table                    


### Title, Authors, and Date

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory & Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The entire title must appear on a single line.
The author syntax is

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
name Email: somename@adr.net at institution1 & institution2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the `&` keyword
separates the institutions (the keyword `and` works too).
Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from `today` if not the
current date is wanted, e.g., `Feb 22, 2016`.

The table of contents is removed by writing `TOC: off`.


### Section Types


                Section type                                    Syntax                    
-------------------------------------------  -------------------------------------------  
chapter                                      `========= Heading ========` (9 `=`)         
section                                      `======= Heading =======`    (7 `=`)         
subsection                                   `===== Heading =====`        (5 `=`)         
subsubsection                                `=== Heading ===`            (3 `=`)         
paragraph                                    `__Heading.__`               (2 `_`)         
abstract                                     `__Abstract.__` Running text...              
appendix                                     `======= Appendix: heading =======` (7 `=`)  
appendix                                     `===== Appendix: heading =====` (5 `=`)      
exercise                                     `======= Exercise: heading =======` (7 `=`)  
exercise                                     `===== Exercise: heading =====` (5 `=`)      


Note that abstracts are recognized by starting with `__Abstract.__` or
`__Summary.__` at the beginning of a line and ending with three or
more `=` signs of the next heading.

The `Exercise:` keyword kan be substituted by `Problem:` or `Project:`.
A recommended convention is that an exercise is tied to the text,
a problem can stand on its own, and a project is a comprehensive
problem.

### Inline Formatting

Words surrounded by `*` are emphasized: `*emphasized words*` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: `_boldface_` becomes _boldface_. Colored words
are also possible: the text

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
`color{red}{two red words}`
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

becomes <font color="red">two red words</font>.

### Lists

There are three types of lists: *bullet lists*, where each item starts
with `*`, *enumeration lists*, where each item starts with `o` and gets
consqutive numbers,
and *description* lists, where each item starts with `-` followed
by a keyword and a colon.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1:
  :    
   followed by
   some text
   over multiple
   lines

 keyword2:
  :    
   followed by text on the next line

 keyword3:
  :    
   and its description may fit on one line

### Comment lines

Lines starting with `#` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats `rst` and
`sphinx` are desired.

Comment lines starting with `##` are not propagated to the output
document and can be used for comments that are only interest in
the Doconce file.

Large portions of text can be left out using Preprocess. Just place
`# #ifdef EXTRA` and `# #endif` around the text. The command line
option `-DEXTRA` will bring the text alive again.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file.


### Inline comments

Inline comments meant as messages or notes, to authors during development
in particular,
are enabled by the syntax

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[name: running text]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

where `name` is the name or ID of an author or reader making the comment,
and `running text` is the comment. Here goes an example.
[hpl 1: There must be a space after the colon,
but the running text can occupy multiple lines.]
The inline comments have simple typesetting in most formats, typically boldface
name and everything surrounded by parenthesis, but with LaTeX
output and the `-DTOTONOTES` option to `ptex2tex` or `doconce ptex2tex`,
colorful margin or inline boxes (using the `todonotes` package)
make it very easy to spot the comments.

Running

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
doconce format html mydoc.do.txt --skip_inline_comments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

removes all inline comments from the output. This feature makes it easy
to turn on and off notes to authors during the development of the document.

All inline comments to readers can also be physically
removed from the Doconce source by

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
doconce remove_inline_comments mydoc.do.txt
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

### Verbatim/Computer Code

Inline verbatim code is typeset within back-ticks, as in

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Some sentence with `words in verbatim style`.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

resulting in Some sentence with `words in verbatim style`.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between `!bc xxx` and `!ec` directives, which must appear on the
beginning of the line. A specification `xxx` indicates what verbatim
formatting style that is to be used. Typical values for `xxx` are
nothing, `cod` for a code snippet, `pro` for a complete program,
`sys` for a terminal session, `dat` for a data file (or output from a
program),
`Xpro` or `Xcod` for a program or code snipped, respectively,
in programming `X`, where `X` may be `py` for Python,
`cy` for Cython, `sh` for Bash or other Unix shells,
`f` for Fortran, `c` for C, `cpp` for C++, `m` for MATLAB,
`pl` for Perl. For output in `latex` one can let `xxx` reflect any
defined verbatim environment in the `ptex2tex` configuration file
(`.ptex2tex.cfg`). For `sphinx` output one can insert a comment

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

that maps environments (`xxx`) onto valid language types for
Pygments (which is what `sphinx` applies to typeset computer code).

The `xxx` specifier has only effect for `latex` and
`sphinx` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- When showing copy from file in !bc envir, indent a character - otherwise -->
<!-- ptex2tex is confused and starts copying... -->
Computer code can also be copied from a file:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `@@@CODE` identifier must appear at the very beginning of the line.
The first specification copies the complete file `doconce_program.sh`.
The second specification copies from the first line matching the *regular
expression* `doconce clean` up to, but not including the line
matching the *regular expression* `^doconce split_rst`.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside `!bc shpro`
and `!ec` directives, if a complete file is copied, while the
directives become `!bc shcod` and `!ec` when a code snippet is copied
from file. In general, for a filename extension `.X`, the environment
becomes `!bc Xpro` or `!bc Xcod` for a complete program or snippet,
respectively. The enivorments (`Xcod` and `Xpro`) are only active
for `latex` and `sphinx` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

### LaTeX Mathematics

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats `html`, `sphinx`, `latex`,
pdflatex`, `pandoc`, and `mwiki` work with this syntax while all other
formats will just display the raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
$Ax=b$. To help increase readability in other formats than `sphinx`,
`latex`, and `pdflatex`, inline mathematics may have a more human
readable companion expression. The syntax is like

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
$\sin(\norm{\bf u})$|$sin(||u||)$
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs.

Blocks of LaTeX mathematics are written within
`!bt`
and
`!et` (begin/end TeX) directives starting on the beginning of a line:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This LaTeX code gets rendered as

$$
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\ 
\nabla\times \pmb{u} &= 0.
\end{align*}
$$
Here is a single equation:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

which results in

$$
 \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.
$$

Any LaTeX syntax is accepted, but if output in the `sphinx`, `pandoc`,
`mwiki`, `html`, or `ipynb` formats
is also important, one should follow these rules:

  * Use only the equation environments `\[`, `\]`,
    `equation`, `equation*`, `align`, and `align*`.

  * MediaWiki (`mwiki`) does not support references to equations.

(Doconce performs extensions to `sphinx` and other formats such that
labels in `align` environments work well.)

*Notice.* 
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as `sphinx`, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically `if FORMAT in ("latex", "pdflatex")`) to
include special code for `latex` and `pdflatex` output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* The author can define `newcommand` statements in files with names
`newcommands*.tex`. Such commands should only be used for mathematics
(other LaTeX constructions are only understood by LaTeX itself).
The convention is that `newcommands_keep.tex`
contains the newcommands that are kept in the document, while
those in `newcommands_replace.tex` will be replaced by their full
LaTeX code. This conventions helps make readable documents in formats
without LaTeX support. For `html`, `sphinx`, `latex`, `pdflatex`,
`mwiki`, `ipynb`, and `pandoc`, the mathematics in newcommands is
rendered nicely anyway.


### Hyperlinks

Links use either a link text or the raw URL:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Here is some "some link text": "http://some.net/address"
(as in "search google": "http://google.com")
or just the raw address: URL: "http://google.com".

Links to files typeset in verbatim mode applies backtics:
"`myfile.py`": "http://some.net/some/place/myfile.py".

Mail addresses works too: send problems to
"`hpl@simula.no`": "mailto:hpl@simula.no"
or just "send mail": "mailto:hpl@simula.no".
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

### Figures and Movies

Figures and movies have almost equal syntax:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here goes the caption which must be on a single line. \label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. \label{some:fig:label}

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Note three important syntax details:

 1. A mandatory comma after the figure/movie filename,

 2. no comments between `width`, `height`, and `frac` and no spaces
    around the `=` characters,

 3. all of the command must appear on a single line,

 4. there must be a blank line after the command.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the needed one.

The caption is optional. If omitted, the figure will be inlined (meaning
no use of any figure environment in HTML or LaTeX formats). The `width`
and `height` parameters affect HTML formats (`html`, `rst`, `sphinx`),
while `frac` is the width of the image as a fraction of the total text
width in the `latex` and `pdflatex` formats.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
doconce combine_images image1 image2 ... output_image
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This command applies `montage` or PDF-based tools to combine the images
to get the highest quality.

YouTube and Vimeo movies will be embedded in `html` and `sphinx` documents
and otherwise be represented by a link. The syntax is


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] YouTube movie.

MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo movie.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The latter results in


<iframe width="500" height="278" src="http://player.vimeo.com/video/55562330" frameborder="0" allowfullscreen></iframe>

<em>Vimeo movie.</em>




### Tables

The table in the section [Section Types](#s) was written with this
syntax:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

The command-line option `--tables2csv` (to `doconce format`)
makes Doconce dump each table to CSV format in a file `table_X.csv`,
where `X` is the table number. This feature makes it easy to
load tables into spreadsheet programs for further analysis.

### Labels and References

The notion of labels and references (as well as bibliography and index)
is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\label{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

with no backslash
preceding the label keyword. It is common practice to choose `name`
as some hierarchical name, say `a:b:c`, where `a` and `b` indicate
some abbreviations for a section and/or subsection for the topic and
`c` is some name for the particular unit that has a label.

A reference to the label `name` is written as

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ref{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

again with no backslash before `ref`.

Use labels for sections and equations only, and preceed the reference
by "Section" or "Chapter", or in case of an equation, surround the
reference by parenthesis.


### Citations and Bibliography

Single citations are written as

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cite{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

where `name` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have `name` on the form
`Author1_Author2_YYYY`, `Author_YYYY`, or `Author1_etal_YYYY`, where
`YYYY` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cite{name1,name2,name3}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The bibliography is specified by a line `BIBFILE: papers.pub`,
where `papers.pub` is a publication database in the
[Publish](https://bitbucket.org/logg/publish) format.
BibTeX `.bib` files can easily be combined to a Publish database
(which Doconce needs to create bibliographies in other formats
than LaTeX).

### Generalized Citations

There is a *generalized referencing* feature in Doconce that allows
a reference with `ref` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. This construction makes it easy
to work with many small, independent documents in parallel with
a book assembly of some of the small elements.
The syntax of a generalized reference is

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The output from a generalized reference is the text `internal` if all
`ref{label}` references in `internal` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
`latex` or `pdflatex` one assumes that the references in `internal`
are to external documents declared by a comment line `#
Externaldocuments: testdoc, mydoc` (usually after the title, authors,
and date). In this case the output text is `internal cite` and the
LaTeX package `xr` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
`external` text will be the output.

### Index of Keywords

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
index{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the `latex`,
`pdflatex`, `rst`, and `sphinx` formats.

### Capabilities of The Program `doconce`

The `doconce` program can be used for a number of purposes besides
transforming a `.do.txt` file to some format. Here is the
list of capabilities:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html slides_beamer latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format latex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish csv2table


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce format sphinx complete_file
doconce split_rst complete_file        # !split delimiters
doconce sphinx_dir complete_file
python automake_sphinx.py

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create HTML slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# create LaTeX Beamer slides from a (doconce) latex/pdflatex file
doconce slides_beamer complete_file.tex

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# make HTML file via pandoc from Markdown (.md) file
doconce md2html file

# make LaTeX file via pandoc from Markdown (.md) file
doconce md2latex file

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile

# translate a latex document to doconce (requires usually manual fixing)
doconce latex2doconce latexfile

# check if there are problems with translating latex to doconce
doconce latex_dislikes latexfile

# typeset a doconce document with pygments (for pretty print of doconce itself)
doconce pygmentize myfile [pygments-style]

# generate a make.sh script for translating a doconce file to various formats
doconce makefile docname doconcefile [html sphinx pdflatex ...]

# fix common problems in bibtex files for publish import
doconce fix_bibtex4publish file1.bib file2.bib ...

# find differences between two files
doconce diff file1.do.txt file2.do.txt [diffprog]
(diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diffuse, ...)

# find differences between the last two Git versions of several files
doconce gitdiff file1 file2 file3 ...

# convert csv file to doconce table format
doconce csv2table somefile.csv
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

### Exercises

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
===== Problem: Derive the Formula for the Area of an Ellipse =====
\label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
===== Exercise: Determine the Distance to the Moon =====
\label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments `--without_answers` and `--without_solutions`
turn off output of answers and solutions, respectively, except for
examples.


### Environments

Doconce environments start with `!benvirname` and end with `!eenvirname`,
where `envirname` is the name of the environment. Here is a listing of
the environments:

 * `c`: computer code (or verbatim text)

 * `t`: math blocks with LaTeX syntax

 * `subex`: sub-exercise

 * `ans`: short answer to exercise or sub-exercise

 * `sol`: full solution to exercise or sub-exercise

 * `quote`: indented text

 * `notice`, `summary`, `warning`, `question`, `hint`: admonition boxes with
    custom title, special icon, and (frequently) background color

 * `pop`: text to gradually pop up in slide presentations

 * `slidecell`: indication of cells in a grid layout for elements on a
   slide

### Preprocessing

Doconce documents may utilize a preprocessor, either `preprocess` and/or
`mako`. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The `mako` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command `doconce format` first runs `preprocess` and then `mako`.
Here is a typical example on utilizing `preprocess` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... \label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\ 
\hline
0.0          & 1.4186       & -5.01        \\ 
2.0          & 1.376512     & 11.919       \\ 
4.0          & 1.1E+1       & 14.717624    \\ 
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

With the `mako` preprocessor the if-else tests have slightly different syntax.
An [example document](http://hplgit.github.com/bioinf-py/) contains
some illustrations on how to utilize `mako` (clone the GitHub project and
examine the Doconce source and the `doc/src/make.sh` script).

### Resources

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


+ rm -rf html_images reveal.js downloaded_figures latex_styles
+ rm -rf papers.pub venues.list
+ publish import refs1.bib

Importing papers from BibTeX
----------------------------

Found paper: (Langtangen_2003a) - Computational Partial Differential Equations - Numeric...
Found paper: (Langtangen_2008a) - Python Scripting for Computational Science
Found paper: (Langtangen_2012) - A Primer on Scientific Programming with Python
Found paper: (Langtangen_1992c) - Stochastic breakthrough time analysis of an enhanced o...
Found paper: (Langtangen_1994a) - Numerical solution of first passage problems in random...

Validating papers
-----------------

Validating paper: (Langtangen_2003a) - Computational Partial Differential Equations - Numeric...
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen_2008a) - Python Scripting for Computational Science
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen_2012) - A Primer on Scientific Programming with Python
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen_1992c) - Stochastic breakthrough time analysis of an enhanced o...
  Status is not defined, assuming status is "published".

  Unknown journal: "SIAM Journal of Scientific and Statistical Computing"
  Suggested journal: "SIAM Journal on Scientific Computing"
  Unknown journal, what should I do?
  [1] Replace journal.
  [2] Add journal.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 
Validating paper: (Langtangen_1994a) - Numerical solution of first passage problems in random...
  Status is not defined, assuming status is "published".

  Unknown journal: "SIAM Journal of Scientific and Statistical Computing"
  Suggested journal: "SIAM Journal on Scientific Computing"
  Unknown journal, what should I do?
  [1] Replace journal.
  [2] Add journal.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 

Validated 5 paper(s) ok.
Found 0 invalid paper(s).


Imported 5 paper(s) from "refs1.bib".

Merging papers
--------------

Need to merge 0 + 5 = 5 papers.


Summary of papers
-----------------

Articles in International Journals: 2
Books:                              3
Edited Books:                       0
Chapters in Books:                  0
Refereed Proceedings:               0
Conference Proceedings:             0
Technical Reports:                  0
Manuals:                            0
Theses:                             0
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 0
Total:                              5

Saving database to file "papers.pub"
+ '[' 0 -ne 0 ']'
+ publish import refs2.bib

Validating papers
-----------------

Validating paper: (Langtangen_1992c) - Stochastic Breakthrough Time Analysis of an Enhanced O...
Validating paper: (Langtangen_1994a) - Numerical Solution of First Passage Problems in Random...
Validating paper: (Langtangen_2003a) - Computational Partial Differential Equations - Numeric...
Validating paper: (Langtangen_2008a) - {P}ython Scripting for Computational Science
Validating paper: (Langtangen_2012) - A Primer on Scientific Programming With {P}ython

Validated 5 paper(s) ok.
Found 0 invalid paper(s).


Importing papers from BibTeX
----------------------------

Found paper: (Mortensen_et_al_2011) - A {FEniCS}-Based Programming Framework for Modelin...
Found paper: (Mardal_et_al_2003a) - Software Tools for Multigrid Methods
Found paper: (Jeberg_et_al_2004) - Optimization with {Diffpack}: Practical Example from ...
Found paper: (Langtangen_1988d) - The {FEMDEQS} Program System
Found paper: (Langtangen_1989e) - Computational Methods for Two-Phase Flow in Oil Reserv...
Found paper: (Langtangen_talk_2007a) - Computational Modeling of Huge Tsunamis from Aste...

Validating papers
-----------------

Validating paper: (Mortensen_et_al_2011) - A {FEniCS}-Based Programming Framework for Modelin...
  Status is not defined, assuming status is "published".
Validating paper: (Mardal_et_al_2003a) - Software Tools for Multigrid Methods
  Status is not defined, assuming status is "published".
Validating paper: (Jeberg_et_al_2004) - Optimization with {Diffpack}: Practical Example from ...
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen_1988d) - The {FEMDEQS} Program System
  Status is not defined, assuming status is "published".

  Unknown institution: "Department of Mathematics, University of Oslo"
  Suggested institution: "InterMedia, University of Oslo"
  Unknown institution, what should I do?
  [1] Replace institution.
  [2] Add institution.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 
Validating paper: (Langtangen_1989e) - Computational Methods for Two-Phase Flow in Oil Reserv...
  Status is not defined, assuming status is "published".

  Unknown school: "Mechanics Division, Department of Mathematics, University of Oslo"
  Suggested school: "Department of Informatics, University of Oslo"
  Unknown school, what should I do?
  [1] Replace school.
  [2] Add school.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 
Validating paper: (Langtangen_talk_2007a) - Computational Modeling of Huge Tsunamis from Aste...
  Status is not defined, assuming status is "published".

Validated 6 paper(s) ok.
Found 0 invalid paper(s).


Imported 6 paper(s) from "refs2.bib".

Merging papers
--------------

Need to merge 5 + 6 = 11 papers.


Summary of papers
-----------------

Articles in International Journals: 3
Books:                              3
Edited Books:                       0
Chapters in Books:                  0
Refereed Proceedings:               0
Conference Proceedings:             1
Technical Reports:                  2
Manuals:                            0
Theses:                             1
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              11

Saving backup copy of database to file "papers.pub.bak"
Saving database to file "papers.pub"
+ publish import refs3.bib

Validating papers
-----------------

Validating paper: (Langtangen_1992c) - Stochastic Breakthrough Time Analysis of an Enhanced O...
Validating paper: (Langtangen_1994a) - Numerical Solution of First Passage Problems in Random...
Validating paper: (Mortensen_et_al_2011) - A {FEniCS}-Based Programming Framework for Modelin...
Validating paper: (Langtangen_2003a) - Computational Partial Differential Equations - Numeric...
Validating paper: (Langtangen_2008a) - {P}ython Scripting for Computational Science
Validating paper: (Langtangen_2012) - A Primer on Scientific Programming With {P}ython
Validating paper: (Mardal_et_al_2003a) - Software Tools for Multigrid Methods
Validating paper: (Jeberg_et_al_2004) - Optimization With {Diffpack}: Practical Example From ...
Validating paper: (Langtangen_1988d) - The {FEMDEQS} Program System
Validating paper: (Langtangen_1989e) - Computational Methods for Two-Phase Flow in Oil Reserv...
Validating paper: (Langtangen_talk_2007a) - Computational Modeling of Huge Tsunamis From Aste...

Validated 11 paper(s) ok.
Found 0 invalid paper(s).


Importing papers from BibTeX
----------------------------

Found paper: (Langtangen_Pedersen_2002) - Propagation of Large Destructive Waves
Found paper: (Langtangen_et_al_2002) - Numerical Methods for Incompressible Viscous Flow
Found paper: (Glimsdal_et_al_20006) - Propagation of the {Dec.~26}, 2004 {Indian Ocean T...
Found paper: (Rahman_et_al_2006b) - Numerical Investigation of a Piezoelectric Surface A...
Found paper: (Haga_et_al_2011a) - On the causes of pressure oscillations in low-permeabl...
Found paper: (Langtangen:95) - Finite elements for the {Boussinesq} wave equations
Found paper: (Langtangen:85) - Solution of the {Navier-Stokes} equations with the finite...
Found paper: (Langtangen:91) - Numerical Methods in Continuum Mechanics
Found paper: (Langtangen:94b) - {Diffpack}: Software for partial differential equations
Found paper: (testdoc:12) - A Document for Testing Doconce

Validating papers
-----------------

Validating paper: (Langtangen_Pedersen_2002) - Propagation of Large Destructive Waves
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen_et_al_2002) - Numerical Methods for Incompressible Viscous Flow
  Status is not defined, assuming status is "published".
Validating paper: (Glimsdal_et_al_20006) - Propagation of the {Dec.~26}, 2004 {Indian Ocean T...
  Status is not defined, assuming status is "published".
Validating paper: (Rahman_et_al_2006b) - Numerical Investigation of a Piezoelectric Surface A...
  Status is not defined, assuming status is "published".

  Unknown journal: "Physical Review B"
  Suggested journal: "Physical Review B: Condensed Matter and Materials Physics"
  Unknown journal, what should I do?
  [1] Replace journal.
  [2] Add journal.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 
Validating paper: (Haga_et_al_2011a) - On the causes of pressure oscillations in low-permeabl...
  Status is not defined, assuming status is "published".

  Unknown journal: "International Journal of Analytical and Numerical Methods in Geomechanics"
  Suggested journal: "International Journal for Numerical Methods in Engineering"
  Unknown journal, what should I do?
  [1] Replace journal.
  [2] Add journal.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 
Validating paper: (Langtangen:95) - Finite elements for the {Boussinesq} wave equations
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen:85) - Solution of the {Navier-Stokes} equations with the finite...
  Status is not defined, assuming status is "published".
Validating paper: (Langtangen:91) - Numerical Methods in Continuum Mechanics
  Status is not defined, assuming status is "published".

  Unknown institution: "Center for Industrial Research"
  Would you like to add institution "Center for Industrial Research"? (y/[n]): Validating paper: (Langtangen:94b) - {Diffpack}: Software for partial differential equations
  Status is not defined, assuming status is "published".
Validating paper: (testdoc:12) - A Document for Testing Doconce
  Status is not defined, assuming status is "published".

  Unknown institution: "Simula Research Laboratory and University of Oslo"
  Suggested institution: "Simula Research Laboratory"
  Unknown institution, what should I do?
  [1] Replace institution.
  [2] Add institution.
  [3] Skip paper.
Please enter 1, 2 or 3 (or press return to choose [1]): 

Validated 10 paper(s) ok.
Found 0 invalid paper(s).


Imported 10 paper(s) from "refs3.bib".

Merging papers
--------------

Need to merge 11 + 10 = 21 papers.


Summary of papers
-----------------

Articles in International Journals: 8
Books:                              3
Edited Books:                       0
Chapters in Books:                  1
Refereed Proceedings:               0
Conference Proceedings:             2
Technical Reports:                  4
Manuals:                            0
Theses:                             2
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              21

Saving backup copy of database to file "papers.pub.bak"
Saving database to file "papers.pub"
+ ex=--examples_as_exercises
+ system doconce format html testdoc --wordpress --examples_as_exercises --html_exercise_icon=question_blue_on_white1.png --html_exercise_icon_width=80
+ doconce format html testdoc --wordpress --examples_as_exercises --html_exercise_icon=question_blue_on_white1.png --html_exercise_icon_width=80
running preprocess -DFORMAT=html -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
output in testdoc.html
+ '[' 0 -ne 0 ']'
+ cp testdoc.html testdoc_wordpress.html
+ system doconce format html testdoc --without_answers --without_solutions --examples_as_exercises -DSOMEVAR --html_exercise_icon=default
+ doconce format html testdoc --without_answers --without_solutions --examples_as_exercises -DSOMEVAR --html_exercise_icon=default
running preprocess -DFORMAT=html -DDEVICE=screen -DSOMEVAR testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
mako variables: {'DEVICE': 'screen', 'SOMEVAR': True, 'FORMAT': 'html'}
translating doconce text in tmp_mako__testdoc.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in testdoc.html
+ '[' 0 -ne 0 ']'
+ cp testdoc.html testdoc_no_solutions.html
+ system doconce format latex testdoc --without_answers --without_solutions --examples_as_exercises -DSOMEVAR --sections_down
+ doconce format latex testdoc --without_answers --without_solutions --examples_as_exercises -DSOMEVAR --sections_down

Summary of papers
-----------------

Articles in International Journals: 8
Books:                              3
Edited Books:                       0
Chapters in Books:                  1
Refereed Proceedings:               0
Conference Proceedings:             2
Technical Reports:                  4
Manuals:                            0
Theses:                             2
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              21

Exported 21 paper(s) to papers.bib.
running preprocess -DFORMAT=latex -DDEVICE=screen -DSOMEVAR testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
mako variables: {'DEVICE': 'screen', 'SOMEVAR': True, 'FORMAT': 'latex'}
translating doconce text in tmp_mako__testdoc.do.txt to latex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)
transforming sections: subsection to subsubsection...
transforming sections: section to subsection...
transforming sections: chapter to section...

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.eps for format latex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......

exporting publish database papers.pub to papers.bib:
output in testdoc.p.tex
+ '[' 0 -ne 0 ']'
+ cp testdoc.p.tex testdoc_no_solutions.p.tex
+ cp -r ../bundled/html_styles/style_vagrant .
+ doconce replace css/ style_vagrant/css/ style_vagrant/template_vagrant.html
replacing css/ by style_vagrant/css/ in style_vagrant/template_vagrant.html
+ system doconce format html testdoc.do.txt --examples_as_exercises --html_style=vagrant --html_template=style_vagrant/template_vagrant.html
+ doconce format html testdoc.do.txt --examples_as_exercises --html_style=vagrant --html_template=style_vagrant/template_vagrant.html
running preprocess -DFORMAT=html -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
*** warning: TITLE may look strange with a template -
             it is recommended to comment out the title: #TITLE:
*** warning: AUTHOR may look strange with a template -
             it is recommended to comment out all authors: #AUTHOR.
             Better to hardcode authors in a footer in the template.
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in testdoc.html
+ '[' 0 -ne 0 ']'
+ cp testdoc.html testdoc_vagrant.html
+ doconce split_html testdoc_vagrant.html
testdoc_vagrant.html now links to the generated files
._part0000_testdoc_vagrant.html, ._part0001_testdoc_vagrant.html, ._part0002_testdoc_vagrant.html
+ system doconce format html testdoc.do.txt --pygments_html_linenos --html_style=solarized --pygments_html_style=emacs --examples_as_exercises --html_exercise_icon=exercise1.svg
+ doconce format html testdoc.do.txt --pygments_html_linenos --html_style=solarized --pygments_html_style=emacs --examples_as_exercises --html_exercise_icon=exercise1.svg
running preprocess -DFORMAT=html -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in testdoc.html
+ '[' 0 -ne 0 ']'
+ system doconce remove_exercise_answers testdoc.html
+ doconce remove_exercise_answers testdoc.html
no answers/solutions to exercises found in testdoc.html
+ '[' 0 -ne 0 ']'
+ system doconce html_colorbullets testdoc.html
+ doconce html_colorbullets testdoc.html
+ '[' 0 -ne 0 ']'
+ system doconce split_html testdoc.html
+ doconce split_html testdoc.html
testdoc.html now links to the generated files
._part0000_testdoc.html, ._part0001_testdoc.html, ._part0002_testdoc.html
+ '[' 0 -ne 0 ']'
+ system doconce format html testdoc.do.txt --pygments_html_linenos --html_style=solarized --pygments_html_style=emacs --examples_as_exercises --html_output=demo_testdoc
+ doconce format html testdoc.do.txt --pygments_html_linenos --html_style=solarized --pygments_html_style=emacs --examples_as_exercises --html_output=demo_testdoc
running preprocess -DFORMAT=html -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in demo_testdoc.html
+ '[' 0 -ne 0 ']'
+ system doconce format latex testdoc.do.txt --examples_as_exercises SOMEVAR=True --skip_inline_comments
+ doconce format latex testdoc.do.txt --examples_as_exercises SOMEVAR=True --skip_inline_comments

Summary of papers
-----------------

Articles in International Journals: 8
Books:                              3
Edited Books:                       0
Chapters in Books:                  1
Refereed Proceedings:               0
Conference Proceedings:             2
Technical Reports:                  4
Manuals:                            0
Theses:                             2
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              21

Exported 21 paper(s) to papers.bib.
running preprocess -DFORMAT=latex -DDEVICE=screen -DSOMEVAR="True" testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
mako variables: {'DEVICE': 'screen', 'SOMEVAR': True, 'FORMAT': 'latex'}
translating doconce text in tmp_mako__testdoc.do.txt to latex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.eps for format latex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......

exporting publish database papers.pub to papers.bib:
output in testdoc.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce format pdflatex testdoc.do.txt --device=paper --examples_as_exercises --latex_double_hyphen
+ doconce format pdflatex testdoc.do.txt --device=paper --examples_as_exercises --latex_double_hyphen

Summary of papers
-----------------

Articles in International Journals: 8
Books:                              3
Edited Books:                       0
Chapters in Books:                  1
Refereed Proceedings:               0
Conference Proceedings:             2
Technical Reports:                  4
Manuals:                            0
Theses:                             2
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              21

Exported 21 paper(s) to papers.bib.
running preprocess -DFORMAT=pdflatex -DDEVICE=paper  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to pdflatex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format pdflatex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......

exporting publish database papers.pub to papers.bib:
*** warning: --latex_double_hyphen may lead to unwanted edits.
             search for all -- in the .p.tex file and check.
output in testdoc.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce latex_exercise_toc testdoc
+ doconce latex_exercise_toc testdoc
table of exercises inserted in testdoc.p.tex
+ '[' 0 -ne 0 ']'
+ doconce replace 'vspace{1cm} % after toc' 'clearpage % after toc' testdoc.p.tex
replacing vspace{1cm} % after toc by clearpage % after toc in testdoc.p.tex
+ thpack='\\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section]'
+ doconce subst '% insert custom LaTeX commands\.\.\.' '\\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section]' testdoc.p.tex
% insert custom LaTeX commands\.\.\. replaced by \\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section] in testdoc.p.tex
+ doconce subst '\\paragraph\{Theorem \d+\.\}' '' testdoc.p.tex
\\paragraph\{Theorem \d+\.\} replaced by  in testdoc.p.tex
+ doconce replace '% begin theorem' '\begin{theorem}' testdoc.p.tex
replacing % begin theorem by \begin{theorem} in testdoc.p.tex
+ doconce replace '% end theorem' '\end{theorem}' testdoc.p.tex
replacing % end theorem by \end{theorem} in testdoc.p.tex
+ doconce replace Newton--Cotes Newton-Cotes testdoc.p.tex
replacing Newton--Cotes by Newton-Cotes in testdoc.p.tex
+ doconce replace --examples_as__exercises --examples_as_exercises testdoc.p.tex
+ system ptex2tex -DMINTED -DMOVIE=movie15 -DLATEX_HEADING=titlepage -DA4PAPER -DTODONOTES -DLINENUMBERS -DCOLORED_TABLE_ROWS=blue -DBLUE_SECTION_HEADINGS testdoc
+ ptex2tex -DMINTED -DMOVIE=movie15 -DLATEX_HEADING=titlepage -DA4PAPER -DTODONOTES -DLINENUMBERS -DCOLORED_TABLE_ROWS=blue -DBLUE_SECTION_HEADINGS testdoc
using local config file .ptex2tex.cfg
running preprocessor on testdoc.p.tex...  defines: 'BLUE_SECTION_HEADINGS', 'A4PAPER', 'MINTED', 'LATEX_HEADING', 'MOVIE', 'LINENUMBERS', 'COLORED_TABLE_ROWS', 'TODONOTES'  done
done testdoc.p.tex -> testdoc.tex
+ '[' 0 -ne 0 ']'
+ system pdflatex -shell-escape testdoc
+ pdflatex -shell-escape testdoc
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./testdoc.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/geometry/geometry.sty




(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/home/hpl/texmf/tex/latex/misc/ptex2tex.sty
(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz))
(/usr/share/texlive/texmf-dist/tex/latex/moreverb/moreverb.sty


(/home/hpl/texmf/tex/latex/misc/anslistings.sty
(/usr/share/texlive/texmf-dist/tex/latex/listings/listings.sty


(/home/hpl/texmf/tex/latex/misc/movie15.sty



(/home/hpl/texmf/tex/latex/misc/minted.sty


(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty

(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./testdoc.w18))/usr/local/bin/pygmentize
) (./testdoc.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty






Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/xkeyval/xkeyval.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty



(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/todonotes/todonotes.sty

(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryposit
ioning.code.tex)
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryshado
ws.code.tex
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryfadin
gs.code.tex


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/tools/theorem.sty

Writing index file testdoc.idx
No file testdoc.aux.
*geometry* driver: auto-detecting
*geometry* detected driver: pdftex
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



ABD: EveryShipout initializing macros
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_bfmath.tex) (./newcommands_replace.tex)



 [1{/var/lib/texm
f/fonts/map/pdftex/updmap/pdftex.map}]

LaTeX Warning: Reference `demo:ex:1' on page 2 


LaTeX Warning: Reference `demo:ex:2' on page 2 


LaTeX Warning: Reference `proj:circle1' on page 2 


LaTeX Warning: Reference `exer:dist' on page 2 


LaTeX Warning: Reference `exer:some:formula' on page 2 undefined on input line 
199.


LaTeX Warning: Reference `exer:you' on page 2 


Package hyperref Warning: old tdo file detected, not used; run LaTeX again.

[2] 

LaTeX Warning: Reference `sec1' on page 3 


LaTeX Warning: Reference `subsubsec:ex' on page 3 

(./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg [3])
(./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg)
[4] (./testdoc.out.pyg)

LaTeX Warning: Reference `fig:impact' on page 5 

<../doc/manual/figs/streamtubes.png, id=59, 583.17876pt x 437.635pt>
<use ../doc/manual/figs/streamtubes.png>
<use ../doc/manual/figs/streamtubes.png>
Underfull \vbox (badness 10000) has occurred while \output is active [5]
Overfull \vbox (13.3931pt too high) has occurred while \output is active
[6 <../doc/manual/figs/streamtubes.png>]

LaTeX Warning: Reference `mov:tsunami' on page 7 


Overfull \hbox (280.67903pt too wide) 
[]\OT1/cmr/m/n/10 (-20) (Movie ../doc/-man-u-al/-figs/wavepacket.mpeg: play [][
]$\OT1/cmtt/m/n/10 wavepacket . html$[][][][][][][]\OT1/cmr/m/n/10 (-20) ) [][]
[][][][][][][][][][][][][][][][][][][][]

Underfull \vbox (badness 10000) has occurred while \output is active [7<<../doc
/manual/figs/mjolnir.mpeg>>]
Overfull \hbox (13.9403pt too wide) 
[]\OT1/cmr/m/n/10 (-20) Movie based on col-lec-tion of frames (here just a few 
frames com-pared with the full wavepacket.mpeg

LaTeX Warning: Reference `myfig' on page 8 

<../doc/manual/figs/wavepacket_0001.png, id=117, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png>
<downloaded_figures/f_plot.png, id=118, 578.16pt x 433.62pt>
<use downloaded_figures/f_plot.png>
Underfull \vbox (badness 10000) has occurred while \output is active [8<<../doc
/manual/figs/wavepacket.mpeg>>] [9 <../doc/manual/figs/wavepacket_0001.png> <./
downloaded_figures/f_plot.png>]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\theta' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\nabla' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 

[10]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `subscript' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 


LaTeX Warning: Citation `Langtangen_Pedersen_2002' on page 11 undefined on inpu
t line 748.


LaTeX Warning: Citation `Langtangen_et_al_2002' on page 11 undefined on input l
ine 749.


LaTeX Warning: Citation `Langtangen_1994a' on page 11 undefined on input line 7
52.


LaTeX Warning: Citation `Mardal_et_al_2003a' on page 11 undefined on input line
 753.


LaTeX Warning: Citation `Langtangen_1988d' on page 11 undefined on input line 7
55.


LaTeX Warning: Citation `Langtangen_Pedersen_2002' on page 11 undefined on inpu
t line 757.


LaTeX Warning: Citation `Mardal_et_al_2003a' on page 11 undefined on input line
 757.


LaTeX Warning: Citation `Langtangen_1992c' on page 11 undefined on input line 7
61.


LaTeX Warning: Citation `Langtangen_1994a' on page 11 undefined on input line 7
61.


LaTeX Warning: Citation `Mortensen_et_al_2011' on page 11 undefined on input li
ne 761.


LaTeX Warning: Citation `Langtangen_Pedersen_2002' on page 11 undefined on inpu
t line 761.


LaTeX Warning: Citation `Langtangen_et_al_2002' on page 11 undefined on input l
ine 763.


LaTeX Warning: Citation `Glimsdal_et_al_20006' on page 11 undefined on input li
ne 763.


LaTeX Warning: Citation `Rahman_et_al_2006b' on page 11 undefined on input line
 763.


LaTeX Warning: Citation `Haga_et_al_2011a' on page 11 undefined on input line 7
63.


LaTeX Warning: Citation `Langtangen_2003a' on page 11 undefined on input line 7
63.


LaTeX Warning: Citation `Langtangen_2008a' on page 11 undefined on input line 7
63.


LaTeX Warning: Citation `Langtangen:95' on page 11 



LaTeX Warning: Citation `Langtangen_2012' on page 11 undefined on input line 76
5.


LaTeX Warning: Citation `Mardal_et_al_2003a' on page 11 undefined on input line
 765.


LaTeX Warning: Citation `Jeberg_et_al_2004' on page 11 undefined on input line 
765.


LaTeX Warning: Citation `Langtangen_1988d' on page 11 undefined on input line 7
66.


LaTeX Warning: Citation `Langtangen_1989e' on page 11 undefined on input line 7
66.


LaTeX Warning: Citation `Langtangen_talk_2007a' on page 11 undefined on input l
ine 767.


LaTeX Warning: Citation `Langtangen:85' on page 11 



LaTeX Warning: Citation `Langtangen_1989e' on page 11 undefined on input line 7
68.


LaTeX Warning: Citation `Langtangen:91' on page 11 



LaTeX Warning: Citation `Langtangen:94b' on page 11 undefined on input line 771
.

[11]
Overfull \hbox (5.05241pt too wide) 
[][][]\OT1/cmtt/m/n/8 http://www.springer.com/mathematics/computational+science
+%26+engineering/book/978-3-642-23098-1| 
[12]

LaTeX Warning: Reference `my:eq1' on page 13 


Package amsmath Warning: Foreign command \over;
(amsmath)                \frac or \genfrac should be used instead
(amsmath)                 on 


LaTeX Warning: Reference `my:eq1' on page 13 


LaTeX Warning: Reference `eq1' on page 13 


LaTeX Warning: Reference `eq2' on page 13 


LaTeX Warning: Reference `split:envir:eq' on page 13 undefined on input line 89
6.


LaTeX Warning: Reference `eq1' on page 13 


LaTeX Warning: Reference `eq2' on page 13 


LaTeX Warning: Reference `eq1a' on page 13 


LaTeX Warning: Reference `eq2a' on page 13 


LaTeX Warning: Reference `my:eq1' on page 13 


LaTeX Warning: Reference `demo:ex:1' on page 13 


LaTeX Warning: Reference `demo:ex:2' on page 13 


LaTeX Warning: Reference `proj:circle1' on page 13 



LaTeX Warning: Reference `exer:you' on page 13 


LaTeX Warning: Reference `exer:some:formula' on page 13 undefined on input line
 922.

[13] (./testdoc.out.pyg) (./testdoc.out.pyg [14]) [15]

LaTeX Warning: Reference `proj:circle1' on page 16 undefined on input line 1283
.


LaTeX Warning: Reference `demo:ex:1' on page 16 


LaTeX Warning: Reference `demo:ex:2' on page 16 


LaTeX Warning: Reference `exer:some:formula' on page 16 undefined on input line
 1300.


LaTeX Warning: Reference `demo:ex:2' on page 16 


LaTeX Warning: Reference `proj:circle1' on page 16 undefined on input line 1301
.


LaTeX Warning: Reference `exer:you' on page 16 

(./testdoc.bbl [16]) [17]

LaTeX Warning: Reference `mdf@pagelabel-1' on page 18 undefined on input line 1
354.

[18]

LaTeX Warning: Reference `mdf@pagelabel-2' on page 19 undefined on input line 1
382.

[19]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

(./testdoc.ind [20]
Overfull \hbox (9.21391pt too wide) 
[]\OT1/cmr/m/n/10 (-20) test \OT1/cmtt/m/n/10 two \OT1/cmr/m/n/10 (-20) (sep-a-
rate) \OT1/cmtt/m/n/10 verbatim expressions \OT1/cmr/m/n/10 (-20) which
[21])

Package movie15 Warning: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
(movie15)                @@ Rerun to get object references right! @@
(movie15)                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.

(./testdoc.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
geometry.sty    2010/09/12 v5.6 Page Geometry
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
ptex2tex.sty    
fancyvrb.sty    2008/02/07
moreverb.sty    2008/06/03 v2.3a `more' verbatim facilities
verbatim.sty    2003/08/22 v1.5q LaTeX2e package for verbatim enhancements
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
anslistings.sty    2009/03/28 code highlighting; provided by Olivier Verdier <o
livier@maths.lth.se>
listings.sty    2007/02/22 1.4 (Carsten Heinz)
 lstmisc.sty    2007/02/22 1.4 (Carsten Heinz)
listings.cfg    2007/02/22 1.4 listings configuration
 movie15.sty    2009/07/07
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
 ifdraft.sty    2008/08/11 v1.3 Detect class options draft and final (HO)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
 testdoc.w18
 testdoc.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
 xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
 xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
todonotes.sty    2011/10/22
  lineno.sty    2005/11/02 line numbers on paragraphs v4.41
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
 theorem.sty    1995/11/23 v2.2c Theorem extension package (FMi)
     thp.sty    1995/11/23 v2.2c Theorem extension package (FMi)
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
../doc/manual/figs/streamtubes.png
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
downloaded_figures/f_plot.png
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.bbl
 testdoc.ind
 ***********


Package rerunfilecheck Warning: File `testdoc.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmbx8.pfb></usr/share/texlive/texmf-dist/fonts/type1/pub
lic/amsfonts/cm/cmbx9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/ams
fonts/cm/cmcsc10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts
/cm/cmitt10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/c
mmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi12.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi7.pfb></u
sr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi8.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texli
ve/texmf-dist/fonts/type1/public/amsfonts/cm/cmr6.pfb></usr/share/texlive/texmf
-dist/fonts/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type
1/public/amsfonts/cm/cmr9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public
/amsfonts/cm/cmss12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfo
nts/cm/cmss8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/
cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy7.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti10.pfb></
usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt10.pfb></usr/sh
are/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt12.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt8.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/symbols/msam10.pfb>
Output written on testdoc.pdf (21 pages, ).
Transcript written on testdoc.log.
+ '[' 0 -ne 0 ']'
+ pdflatex -shell-escape testdoc
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./testdoc.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/geometry/geometry.sty




(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/home/hpl/texmf/tex/latex/misc/ptex2tex.sty
(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz))
(/usr/share/texlive/texmf-dist/tex/latex/moreverb/moreverb.sty


(/home/hpl/texmf/tex/latex/misc/anslistings.sty
(/usr/share/texlive/texmf-dist/tex/latex/listings/listings.sty


(/home/hpl/texmf/tex/latex/misc/movie15.sty



(/home/hpl/texmf/tex/latex/misc/minted.sty


(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty

(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./testdoc.w18))/usr/local/bin/pygmentize
) (./testdoc.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty






Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/xkeyval/xkeyval.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty



(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/todonotes/todonotes.sty

(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryposit
ioning.code.tex)
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryshado
ws.code.tex
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryfadin
gs.code.tex


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/tools/theorem.sty

Writing index file testdoc.idx
(./testdoc.aux)
*geometry* driver: auto-detecting
*geometry* detected driver: pdftex
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



ABD: EveryShipout initializing macros
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./testdoc.out) (./testdoc.out) (./newcommands_bfmath.tex)
(./newcommands_replace.tex)



 [1{/var/lib/texm
f/fonts/map/pdftex/updmap/pdftex.map}] (./testdoc.toc) (./testdoc.tdo) [2]

(./testdoc.out.pyg) (./testdoc.out.pyg [3]) (./testdoc.out.pyg)
(./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg) [4]
(./testdoc.out.pyg)
<../doc/manual/figs/streamtubes.png, id=212, 583.17876pt x 437.635pt>
<use ../doc/manual/figs/streamtubes.png>
<use ../doc/manual/figs/streamtubes.png>
Underfull \vbox (badness 10000) has occurred while \output is active [5]
Overfull \vbox (13.3931pt too high) has occurred while \output is active
[6 <../doc/manual/figs/streamtubes.png>]
Overfull \hbox (280.67903pt too wide) 
[]\OT1/cmr/m/n/10 (-20) (Movie ../doc/-man-u-al/-figs/wavepacket.mpeg: play [][
]$\OT1/cmtt/m/n/10 wavepacket . html$[][][][][][][]\OT1/cmr/m/n/10 (-20) ) [][]
[][][][][][][][][][][][][][][][][][][][]

Underfull \vbox (badness 10000) has occurred while \output is active [7<<../doc
/manual/figs/mjolnir.mpeg>>]
Overfull \hbox (13.9403pt too wide) 
[]\OT1/cmr/m/n/10 (-20) Movie based on col-lec-tion of frames (here just a few 
frames com-pared with the full wavepacket.mpeg
<../doc/manual/figs/wavepacket_0001.png, id=271, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png>
<downloaded_figures/f_plot.png, id=272, 578.16pt x 433.62pt>
<use downloaded_figures/f_plot.png>
Underfull \vbox (badness 10000) has occurred while \output is active [8<<../doc
/manual/figs/wavepacket.mpeg>>] [9 <../doc/manual/figs/wavepacket_0001.png> <./
downloaded_figures/f_plot.png>]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\theta' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\nabla' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 

[10]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `subscript' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

[11]
Overfull \hbox (5.05241pt too wide) 
[][][]\OT1/cmtt/m/n/8 http://www.springer.com/mathematics/computational+science
+%26+engineering/book/978-3-642-23098-1| 
[12]

Package amsmath Warning: Foreign command \over;
(amsmath)                \frac or \genfrac should be used instead
(amsmath)                 on 

[13] (./testdoc.out.pyg) (./testdoc.out.pyg [14]) [15] (./testdoc.bbl [16])
[17] [18] [19]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

(./testdoc.ind [20]
Overfull \hbox (9.21391pt too wide) 
[]\OT1/cmr/m/n/10 (-20) test \OT1/cmtt/m/n/10 two \OT1/cmr/m/n/10 (-20) (sep-a-
rate) \OT1/cmtt/m/n/10 verbatim expressions \OT1/cmr/m/n/10 (-20) which
[21])

Package movie15 Warning: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
(movie15)                @@ Rerun to get object references right! @@
(movie15)                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.

(./testdoc.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
geometry.sty    2010/09/12 v5.6 Page Geometry
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
ptex2tex.sty    
fancyvrb.sty    2008/02/07
moreverb.sty    2008/06/03 v2.3a `more' verbatim facilities
verbatim.sty    2003/08/22 v1.5q LaTeX2e package for verbatim enhancements
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
anslistings.sty    2009/03/28 code highlighting; provided by Olivier Verdier <o
livier@maths.lth.se>
listings.sty    2007/02/22 1.4 (Carsten Heinz)
 lstmisc.sty    2007/02/22 1.4 (Carsten Heinz)
listings.cfg    2007/02/22 1.4 listings configuration
 movie15.sty    2009/07/07
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
 ifdraft.sty    2008/08/11 v1.3 Detect class options draft and final (HO)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
 testdoc.w18
 testdoc.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
 xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
 xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
todonotes.sty    2011/10/22
  lineno.sty    2005/11/02 line numbers on paragraphs v4.41
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
 theorem.sty    1995/11/23 v2.2c Theorem extension package (FMi)
     thp.sty    1995/11/23 v2.2c Theorem extension package (FMi)
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
 testdoc.out
 testdoc.out
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
../doc/manual/figs/streamtubes.png
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
downloaded_figures/f_plot.png
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.bbl
 testdoc.ind
 ***********

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmbx8.pfb></usr/share/texlive/texmf-dist/fonts/type1/pub
lic/amsfonts/cm/cmbx9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/ams
fonts/cm/cmcsc10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts
/cm/cmitt10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/c
mmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi12.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi7.pfb></u
sr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi8.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texli
ve/texmf-dist/fonts/type1/public/amsfonts/cm/cmr6.pfb></usr/share/texlive/texmf
-dist/fonts/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type
1/public/amsfonts/cm/cmr9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public
/amsfonts/cm/cmss12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfo
nts/cm/cmss8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/
cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy7.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti10.pfb></
usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt10.pfb></usr/sh
are/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt12.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt8.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/symbols/msam10.pfb>
Output written on testdoc.pdf (21 pages, ).
Transcript written on testdoc.log.
+ makeindex testdoc
This is makeindex, version 2.15 [TeX Live 2012] (kpathsea + Thai support).
Scanning input file testdoc.idx....done (7 entries accepted, 0 rejected).
Sorting entries....done (23 comparisons).
Generating output file testdoc.ind....done (26 lines written, 0 warnings).
Output written in testdoc.ind.
Transcript written in testdoc.ilg.
+ bibtex testdoc
This is BibTeX, Version 0.99d (TeX Live 2012/Debian)
The top-level auxiliary file: testdoc.aux
The style file: plain.bst
Database file #1: papers.bib.bib
Warning--entry type for "Langtangen_1989e" isn't style-file defined
--line 166 of file papers.bib.bib
Warning--entry type for "Langtangen:85" isn't style-file defined
--line 175 of file papers.bib.bib
Warning--can't use both author and editor fields in Langtangen:95
(There were 3 warnings)
+ pdflatex -shell-escape testdoc
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./testdoc.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/geometry/geometry.sty




(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/home/hpl/texmf/tex/latex/misc/ptex2tex.sty
(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz))
(/usr/share/texlive/texmf-dist/tex/latex/moreverb/moreverb.sty


(/home/hpl/texmf/tex/latex/misc/anslistings.sty
(/usr/share/texlive/texmf-dist/tex/latex/listings/listings.sty


(/home/hpl/texmf/tex/latex/misc/movie15.sty



(/home/hpl/texmf/tex/latex/misc/minted.sty


(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty

(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./testdoc.w18))/usr/local/bin/pygmentize
) (./testdoc.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty






Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/xkeyval/xkeyval.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty



(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/todonotes/todonotes.sty

(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryposit
ioning.code.tex)
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryshado
ws.code.tex
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryfadin
gs.code.tex


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/tools/theorem.sty

Writing index file testdoc.idx
(./testdoc.aux)
*geometry* driver: auto-detecting
*geometry* detected driver: pdftex
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



ABD: EveryShipout initializing macros
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./testdoc.out) (./testdoc.out) (./newcommands_bfmath.tex)
(./newcommands_replace.tex)



 [1{/var/lib/texm
f/fonts/map/pdftex/updmap/pdftex.map}] (./testdoc.toc) (./testdoc.tdo) [2]

(./testdoc.out.pyg) (./testdoc.out.pyg [3]) (./testdoc.out.pyg)
(./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg) [4]
(./testdoc.out.pyg)
<../doc/manual/figs/streamtubes.png, id=212, 583.17876pt x 437.635pt>
<use ../doc/manual/figs/streamtubes.png>
<use ../doc/manual/figs/streamtubes.png>
Underfull \vbox (badness 10000) has occurred while \output is active [5]
Overfull \vbox (13.3931pt too high) has occurred while \output is active
[6 <../doc/manual/figs/streamtubes.png>]
Overfull \hbox (280.67903pt too wide) 
[]\OT1/cmr/m/n/10 (-20) (Movie ../doc/-man-u-al/-figs/wavepacket.mpeg: play [][
]$\OT1/cmtt/m/n/10 wavepacket . html$[][][][][][][]\OT1/cmr/m/n/10 (-20) ) [][]
[][][][][][][][][][][][][][][][][][][][]

Underfull \vbox (badness 10000) has occurred while \output is active [7<<../doc
/manual/figs/mjolnir.mpeg>>]
Overfull \hbox (13.9403pt too wide) 
[]\OT1/cmr/m/n/10 (-20) Movie based on col-lec-tion of frames (here just a few 
frames com-pared with the full wavepacket.mpeg
<../doc/manual/figs/wavepacket_0001.png, id=271, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png>
<downloaded_figures/f_plot.png, id=272, 578.16pt x 433.62pt>
<use downloaded_figures/f_plot.png>
Underfull \vbox (badness 10000) has occurred while \output is active [8<<../doc
/manual/figs/wavepacket.mpeg>>] [9 <../doc/manual/figs/wavepacket_0001.png> <./
downloaded_figures/f_plot.png>]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\theta' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\nabla' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 

[10]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `subscript' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

[11]
Overfull \hbox (5.05241pt too wide) 
[][][]\OT1/cmtt/m/n/8 http://www.springer.com/mathematics/computational+science
+%26+engineering/book/978-3-642-23098-1| 
[12]

Package amsmath Warning: Foreign command \over;
(amsmath)                \frac or \genfrac should be used instead
(amsmath)                 on 

[13] (./testdoc.out.pyg) (./testdoc.out.pyg [14]) [15] (./testdoc.bbl [16])
[17] [18] [19]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

(./testdoc.ind [20]
Overfull \hbox (9.21391pt too wide) 
[]\OT1/cmr/m/n/10 (-20) test \OT1/cmtt/m/n/10 two \OT1/cmr/m/n/10 (-20) (sep-a-
rate) \OT1/cmtt/m/n/10 verbatim expressions \OT1/cmr/m/n/10 (-20) which
[21])

Package movie15 Warning: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
(movie15)                @@ Rerun to get object references right! @@
(movie15)                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.

(./testdoc.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
geometry.sty    2010/09/12 v5.6 Page Geometry
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
ptex2tex.sty    
fancyvrb.sty    2008/02/07
moreverb.sty    2008/06/03 v2.3a `more' verbatim facilities
verbatim.sty    2003/08/22 v1.5q LaTeX2e package for verbatim enhancements
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
anslistings.sty    2009/03/28 code highlighting; provided by Olivier Verdier <o
livier@maths.lth.se>
listings.sty    2007/02/22 1.4 (Carsten Heinz)
 lstmisc.sty    2007/02/22 1.4 (Carsten Heinz)
listings.cfg    2007/02/22 1.4 listings configuration
 movie15.sty    2009/07/07
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
 ifdraft.sty    2008/08/11 v1.3 Detect class options draft and final (HO)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
 testdoc.w18
 testdoc.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
 xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
 xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
todonotes.sty    2011/10/22
  lineno.sty    2005/11/02 line numbers on paragraphs v4.41
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
 theorem.sty    1995/11/23 v2.2c Theorem extension package (FMi)
     thp.sty    1995/11/23 v2.2c Theorem extension package (FMi)
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
 testdoc.out
 testdoc.out
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
../doc/manual/figs/streamtubes.png
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
downloaded_figures/f_plot.png
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.bbl
 testdoc.ind
 ***********

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmbx8.pfb></usr/share/texlive/texmf-dist/fonts/type1/pub
lic/amsfonts/cm/cmbx9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/ams
fonts/cm/cmcsc10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts
/cm/cmitt10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/c
mmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi12.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi7.pfb></u
sr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi8.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texli
ve/texmf-dist/fonts/type1/public/amsfonts/cm/cmr6.pfb></usr/share/texlive/texmf
-dist/fonts/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type
1/public/amsfonts/cm/cmr9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public
/amsfonts/cm/cmss12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfo
nts/cm/cmss8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/
cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy7.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti10.pfb></
usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt10.pfb></usr/sh
are/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt12.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt8.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/symbols/msam10.pfb>
Output written on testdoc.pdf (21 pages, ).
Transcript written on testdoc.log.
+ pdflatex -shell-escape testdoc
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./testdoc.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/geometry/geometry.sty




(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/home/hpl/texmf/tex/latex/misc/ptex2tex.sty
(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz))
(/usr/share/texlive/texmf-dist/tex/latex/moreverb/moreverb.sty


(/home/hpl/texmf/tex/latex/misc/anslistings.sty
(/usr/share/texlive/texmf-dist/tex/latex/listings/listings.sty


(/home/hpl/texmf/tex/latex/misc/movie15.sty



(/home/hpl/texmf/tex/latex/misc/minted.sty


(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty

(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./testdoc.w18))/usr/local/bin/pygmentize
) (./testdoc.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty






Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/xkeyval/xkeyval.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty



(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/todonotes/todonotes.sty

(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryposit
ioning.code.tex)
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryshado
ws.code.tex
(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibraryfadin
gs.code.tex


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/tools/theorem.sty

Writing index file testdoc.idx
(./testdoc.aux)
*geometry* driver: auto-detecting
*geometry* detected driver: pdftex
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



ABD: EveryShipout initializing macros
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./testdoc.out) (./testdoc.out) (./newcommands_bfmath.tex)
(./newcommands_replace.tex)



 [1{/var/lib/texm
f/fonts/map/pdftex/updmap/pdftex.map}] (./testdoc.toc) (./testdoc.tdo) [2]

(./testdoc.out.pyg) (./testdoc.out.pyg [3]) (./testdoc.out.pyg)
(./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg) [4]
(./testdoc.out.pyg)
<../doc/manual/figs/streamtubes.png, id=212, 583.17876pt x 437.635pt>
<use ../doc/manual/figs/streamtubes.png>
<use ../doc/manual/figs/streamtubes.png>
Underfull \vbox (badness 10000) has occurred while \output is active [5]
Overfull \vbox (13.3931pt too high) has occurred while \output is active
[6 <../doc/manual/figs/streamtubes.png>]
Overfull \hbox (280.67903pt too wide) 
[]\OT1/cmr/m/n/10 (-20) (Movie ../doc/-man-u-al/-figs/wavepacket.mpeg: play [][
]$\OT1/cmtt/m/n/10 wavepacket . html$[][][][][][][]\OT1/cmr/m/n/10 (-20) ) [][]
[][][][][][][][][][][][][][][][][][][][]

Underfull \vbox (badness 10000) has occurred while \output is active [7<<../doc
/manual/figs/mjolnir.mpeg>>]
Overfull \hbox (13.9403pt too wide) 
[]\OT1/cmr/m/n/10 (-20) Movie based on col-lec-tion of frames (here just a few 
frames com-pared with the full wavepacket.mpeg
<../doc/manual/figs/wavepacket_0001.png, id=271, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png>
<downloaded_figures/f_plot.png, id=272, 578.16pt x 433.62pt>
<use downloaded_figures/f_plot.png>
Underfull \vbox (badness 10000) has occurred while \output is active [8<<../doc
/manual/figs/wavepacket.mpeg>>] [9 <../doc/manual/figs/wavepacket_0001.png> <./
downloaded_figures/f_plot.png>]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\theta' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\nabla' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 

[10]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `subscript' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

[11]
Overfull \hbox (5.05241pt too wide) 
[][][]\OT1/cmtt/m/n/8 http://www.springer.com/mathematics/computational+science
+%26+engineering/book/978-3-642-23098-1| 
[12]

Package amsmath Warning: Foreign command \over;
(amsmath)                \frac or \genfrac should be used instead
(amsmath)                 on 

[13] (./testdoc.out.pyg) (./testdoc.out.pyg [14]) [15] (./testdoc.bbl [16])
[17] [18] [19]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

(./testdoc.ind [20]
Overfull \hbox (9.21391pt too wide) 
[]\OT1/cmr/m/n/10 (-20) test \OT1/cmtt/m/n/10 two \OT1/cmr/m/n/10 (-20) (sep-a-
rate) \OT1/cmtt/m/n/10 verbatim expressions \OT1/cmr/m/n/10 (-20) which
[21]) (./testdoc.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
geometry.sty    2010/09/12 v5.6 Page Geometry
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
ptex2tex.sty    
fancyvrb.sty    2008/02/07
moreverb.sty    2008/06/03 v2.3a `more' verbatim facilities
verbatim.sty    2003/08/22 v1.5q LaTeX2e package for verbatim enhancements
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
anslistings.sty    2009/03/28 code highlighting; provided by Olivier Verdier <o
livier@maths.lth.se>
listings.sty    2007/02/22 1.4 (Carsten Heinz)
 lstmisc.sty    2007/02/22 1.4 (Carsten Heinz)
listings.cfg    2007/02/22 1.4 listings configuration
 movie15.sty    2009/07/07
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
 ifdraft.sty    2008/08/11 v1.3 Detect class options draft and final (HO)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
 testdoc.w18
 testdoc.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
 xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
 xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
todonotes.sty    2011/10/22
  lineno.sty    2005/11/02 line numbers on paragraphs v4.41
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
 theorem.sty    1995/11/23 v2.2c Theorem extension package (FMi)
     thp.sty    1995/11/23 v2.2c Theorem extension package (FMi)
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
 testdoc.out
 testdoc.out
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
../doc/manual/figs/streamtubes.png
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
downloaded_figures/f_plot.png
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.bbl
 testdoc.ind
 ***********

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmbx8.pfb></usr/share/texlive/texmf-dist/fonts/type1/pub
lic/amsfonts/cm/cmbx9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/ams
fonts/cm/cmcsc10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts
/cm/cmitt10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/c
mmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi12.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi7.pfb></u
sr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi8.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texli
ve/texmf-dist/fonts/type1/public/amsfonts/cm/cmr6.pfb></usr/share/texlive/texmf
-dist/fonts/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type
1/public/amsfonts/cm/cmr9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public
/amsfonts/cm/cmss12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfo
nts/cm/cmss8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/
cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy7.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti10.pfb></
usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt10.pfb></usr/sh
are/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt12.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt8.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/symbols/msam10.pfb>
Output written on testdoc.pdf (21 pages, ).
Transcript written on testdoc.log.
+ cp testdoc.tex testdoc.tex_ptex2tex
+ system doconce ptex2tex testdoc -DBOOK -DPALATINO 'sys=begin{quote}begin{Verbatim}@end{Verbatim}end{quote}' pypro=ans:nt envir=minted
+ doconce ptex2tex testdoc -DBOOK -DPALATINO 'sys=begin{quote}begin{Verbatim}@end{Verbatim}end{quote}' pypro=ans:nt envir=minted
+ '[' 0 -ne 0 ']'
+ echo '----------- end of doconce ptex2tex output ----------------'
+ cat testdoc.tex
+ system doconce format plain testdoc.do.txt --examples_as_exercises -DSOMEVAR=1 --tables2csv
+ doconce format plain testdoc.do.txt --examples_as_exercises -DSOMEVAR=1 --tables2csv
running preprocess -DFORMAT=plain -DDEVICE=screen -DSOMEVAR=1 testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
mako variables: {'DEVICE': 'screen', 'SOMEVAR': 1, 'FORMAT': 'plain'}
translating doconce text in tmp_mako__testdoc.do.txt to plain

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
output in testdoc.txt
+ '[' 0 -ne 0 ']'
+ system doconce format st testdoc.do.txt --examples_as_exercises
+ doconce format st testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=st -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to st

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
output in testdoc.st
+ '[' 0 -ne 0 ']'
+ system doconce format sphinx testdoc.do.txt --examples_as_exercises
+ doconce format sphinx testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=sphinx -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to sphinx

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!



*** warning:
Not recommended for sphinx output: math environment {eqnarray}
(use equation, equation*, \[ \], or align/align*)
Not recommended for sphinx output: math environment {multline}
Not recommended for sphinx output: math environment {gather}
*** warning: hyperlink to URL mailto:hpl@simula.no is to a local file,
  - recommended to be _static/mailto:hpl@simula.no for sphinx
*** warning: hyperlink to URL testdoc.do.txt is to a local file,
  - recommended to be _static/testdoc.do.txt for sphinx
*** move linked files to _static and change URLs
    (unless you really know that the links will be correct
    when the sphinx build directory is moved to its final destination)
copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format sphinx

Warning: the "alignat" environment will give errors in Sphinx:

        \begin{alignat}{2}
        a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0  \\ 
        b &= \nabla^2 u + \nabla^4 x & x\in\Omega 
        \end{alignat}



Detected non-align equation systems with multiple labels
(that Sphinx will not handle - labels will be removed
and references to them will be empty):
label{eq1a}
label{eq2a}

output in testdoc.rst
+ '[' 0 -ne 0 ']'
+ mv -f testdoc.rst testdoc.sphinx.rst
+ doconce format sphinx testdoc --examples_as_exercises
running preprocess -DFORMAT=sphinx -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to sphinx

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!



*** warning:
Not recommended for sphinx output: math environment {eqnarray}
(use equation, equation*, \[ \], or align/align*)
Not recommended for sphinx output: math environment {multline}
Not recommended for sphinx output: math environment {gather}
*** warning: hyperlink to URL mailto:hpl@simula.no is to a local file,
  - recommended to be _static/mailto:hpl@simula.no for sphinx
*** warning: hyperlink to URL testdoc.do.txt is to a local file,
  - recommended to be _static/testdoc.do.txt for sphinx
*** move linked files to _static and change URLs
    (unless you really know that the links will be correct
    when the sphinx build directory is moved to its final destination)
copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format sphinx

Warning: the "alignat" environment will give errors in Sphinx:

        \begin{alignat}{2}
        a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0  \\ 
        b &= \nabla^2 u + \nabla^4 x & x\in\Omega 
        \end{alignat}



Detected non-align equation systems with multiple labels
(that Sphinx will not handle - labels will be removed
and references to them will be empty):
label{eq1a}
label{eq2a}

output in testdoc.rst
+ doconce split_rst testdoc
testdoc split into
._part0000_testdoc.rst ._part0001_testdoc.rst ._part0002_testdoc.rst
+ system doconce sphinx_dir author=HPL 'title=Just a test' version=0.1 theme=agni testdoc
+ doconce sphinx_dir author=HPL 'title=Just a test' version=0.1 theme=agni testdoc
Making sphinx-rootdir
Welcome to the Sphinx 1.2pre quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]: 
You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: 
Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]: 
The project name will occur in several places in the built documentation.
> Project name: > Author name(s): 
Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don't need this dual structure,
just set both to the same value.
> Project version: > Project release [0.1]: 
The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]: * Please enter a file suffix, e.g. '.rst' or '.txt'.
> Source file suffix [.rst]: 
One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]: 
Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: 
Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: > doctest: automatically test code snippets in doctest blocks (y/N) [n]: > intersphinx: link between Sphinx documentation of different projects (y/N) [n]: > todo: write "todo" entries that can be shown or hidden on build (y/N) [n]: > coverage: checks for documentation coverage (y/N) [n]: > pngmath: include math, rendered as PNG images (y/N) [n]: > mathjax: include math, rendered in the browser by MathJax (y/N) [n]: > ifconfig: conditional inclusion of content based on config values (y/N) [n]: > viewcode: include links to the source code of documented Python objects (y/N) [n]: 
A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: > Create Windows command file? (Y/n) [y]: 
Creating file sphinx-rootdir/conf.py.
Creating file sphinx-rootdir/index.rst.
Creating file sphinx-rootdir/Makefile.
Creating file sphinx-rootdir/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file sphinx-rootdir/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

title: Just a test
author: HPL
theme: agni
These Sphinx themes were found: ADCtheme, agni, agogo, basic, basicstrap, bootstrap, cbc, classy, cloud, default, epub, fenics, fenics_minimal, flask, haiku, impressjs, jal, nature, pylons, pyramid, redcloud, scipy_lectures, scrolls, slim-agogo, solarized, sphinxdoc, traditional, vlinux-theme, default

'automake_sphinx.py' contains the steps to (re)compile the sphinx
version. You may want to edit this file, or run the steps manually,
or just run it by

  python automake_sphinx.py

+ '[' 0 -ne 0 ']'
+ cp automake_sphinx.py automake_sphinx_testdoc.py
+ system doconce format rst testdoc.do.txt --examples_as_exercises
+ doconce format rst testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=rst -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to rst

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format rst
output in testdoc.rst
+ '[' 0 -ne 0 ']'
+ system doconce format epytext testdoc.do.txt --examples_as_exercises
+ doconce format epytext testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=epytext -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to epytext

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
output in testdoc.epytext
+ '[' 0 -ne 0 ']'
+ system doconce format pandoc testdoc.do.txt --examples_as_exercises
+ doconce format pandoc testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=pandoc -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to pandoc

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format pandoc
*** warning: latex envir \begin{multline} does not work well.

*** warning: latex envir \begin{gather} does not work well.

*** warning: latex envir \begin{alignat} does not work well.

*** warning: latex envir \begin{eqnarray} does not work well.

output in testdoc.md
+ '[' 0 -ne 0 ']'
+ system doconce format mwiki testdoc.do.txt --examples_as_exercises
+ doconce format mwiki testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=mwiki -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to mwiki

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format mwiki
 ...checking if streamtubes.png is stored at en.wikipedia.org/w/api.php...
 ...for wikipedia/wikibooks you must upload image file streamtubes.png to
    common.wikimedia.org
 ...for now we use local file Streamtubes.png
 ...checking if streamtubes.png is stored at en.wikipedia.org/w/api.php...
 ...for wikipedia/wikibooks you must upload image file streamtubes.png to
    common.wikimedia.org
 ...for now we use local file Streamtubes.png
 ...checking if wavepacket_0001.png is stored at en.wikipedia.org/w/api.php...
 ...for wikipedia/wikibooks you must upload image file wavepacket_0001.png to
    common.wikimedia.org
 ...for now we use local file Wavepacket 0001.png
 ...checking if df_plot.png is stored at en.wikipedia.org/w/api.php...
 ...found Df plot.png at wikimedia
 ...checking if df2s8765s_plot.png is stored at en.wikipedia.org/w/api.php...
 ...for wikipedia/wikibooks you must upload image file df2s8765s_plot.png to
    common.wikimedia.org
 ...for now we use local file Df2s8765s plot.png
*** warning: reference to label "my:eq1" in an equation does not work in MediaWiki
output in testdoc.mwiki
+ '[' 0 -ne 0 ']'
+ system doconce format cwiki testdoc.do.txt --examples_as_exercises
+ doconce format cwiki testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=cwiki -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to cwiki

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format cwiki
output in testdoc.cwiki
+ '[' 0 -ne 0 ']'
+ system doconce format ipynb testdoc.do.txt --examples_as_exercises
+ doconce format ipynb testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=ipynb -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to ipynb

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format ipynb
output in testdoc.ipynb
+ '[' 0 -ne 0 ']'
+ system doconce format gwiki testdoc.do.txt --skip_inline_comments MYVAR1=3 'MYVAR2=a string' --examples_as_exercises
+ doconce format gwiki testdoc.do.txt --skip_inline_comments MYVAR1=3 'MYVAR2=a string' --examples_as_exercises
running preprocess -DFORMAT=gwiki -DDEVICE=screen -DMYVAR1="3" -DMYVAR2="a string" testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
mako variables: {'DEVICE': 'screen', 'MYVAR1': 3, 'MYVAR2': 'a string', 'FORMAT': 'gwiki'}
translating doconce text in tmp_mako__testdoc.do.txt to gwiki

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format gwiki

NOTE: Place ../doc/manual/figs/streamtubes.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place ../doc/manual/figs/streamtubes.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place ../doc/manual/figs/wavepacket_0001.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place https://doconce.googlecode.com/hg/doc/blog/f_plot.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL

output in testdoc.gwiki
+ '[' 0 -ne 0 ']'
+ system doconce format latex testdoc.do.txt --examples_as_exercises
+ doconce format latex testdoc.do.txt --examples_as_exercises

Summary of papers
-----------------

Articles in International Journals: 8
Books:                              3
Edited Books:                       0
Chapters in Books:                  1
Refereed Proceedings:               0
Conference Proceedings:             2
Technical Reports:                  4
Manuals:                            0
Theses:                             2
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              21

Exported 21 paper(s) to papers.bib.
running preprocess -DFORMAT=latex -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to latex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.eps for format latex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......

exporting publish database papers.pub to papers.bib:
output in testdoc.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce ptex2tex testdoc -DBOOK -DLATEX_HEADING=traditional
+ doconce ptex2tex testdoc -DBOOK -DLATEX_HEADING=traditional
\bpypro (!bc pypro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bcpppro (!bc cpppro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bfpro (!bc fpro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bcod (!bc cod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bpycod (!bc pycod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bcycod (!bc cycod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bfcod (!bc fcod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bsys (!bc sys) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
\bhtmlcod (!bc htmlcod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in testdoc.tex
+ '[' 0 -ne 0 ']'
+ system doconce replace '\Verb!' '\verb!' testdoc.tex
+ doconce replace '\Verb!' '\verb!' testdoc.tex
replacing \Verb! by \verb! in testdoc.tex
+ '[' 0 -ne 0 ']'
+ doconce replace %E2%80%93 '' testdoc.tex
replacing %E2%80%93 by  in testdoc.tex
+ doconce replace +%26+ '' testdoc.tex
replacing +%26+ by  in testdoc.tex
+ system pandoc -f latex -t markdown -o testdoc.md testdoc.tex
+ pandoc -f latex -t markdown -o testdoc.md testdoc.tex
+ '[' 0 -ne 0 ']'
+ system pandoc -f markdown -t html -o testdoc_pnd_l2h.html --mathjax -s testdoc.md
+ pandoc -f markdown -t html -o testdoc_pnd_l2h.html --mathjax -s testdoc.md
+ '[' 0 -ne 0 ']'
+ pandoc -v
+ system doconce format pandoc testdoc.do.txt --examples_as_exercises
+ doconce format pandoc testdoc.do.txt --examples_as_exercises
running preprocess -DFORMAT=pandoc -DDEVICE=screen  testdoc.do.txt > tmp_preprocess__testdoc.do.txt
running mako on tmp_preprocess__testdoc.do.txt to make tmp_mako__testdoc.do.txt
translating doconce text in tmp_mako__testdoc.do.txt to pandoc

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until end of file
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format pandoc
*** warning: latex envir \begin{multline} does not work well.

*** warning: latex envir \begin{gather} does not work well.

*** warning: latex envir \begin{alignat} does not work well.

*** warning: latex envir \begin{eqnarray} does not work well.

output in testdoc.md
+ '[' 0 -ne 0 ']'
+ system pandoc -t html -o testdoc_pnd_d2h.html --mathjax -s testdoc.md
+ pandoc -t html -o testdoc_pnd_d2h.html --mathjax -s testdoc.md
+ '[' 0 -ne 0 ']'
+ pandoc -v
+ system doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg
+ doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg
translating doconce text in slides1.do.txt to html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in slides1.html
+ '[' 0 -ne 0 ']'
+ cp slides1.html slides1_1st.html
+ system doconce slides_html slides1 reveal --html_slide_type=beigesmall
+ doconce slides_html slides1 reveal --html_slide_type=beigesmall
made subdirectory reveal.js
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
slides written to slides1.html
+ '[' 0 -ne 0 ']'
+ cp slides1.html slides1_reveal.html
+ /bin/ls -R reveal.js
+ system doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg
+ doconce format html slides1 --pygments_html_style=emacs --keep_pygments_html_bg
translating doconce text in slides1.do.txt to html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in slides1.html
+ '[' 0 -ne 0 ']'
+ system doconce slides_html slides1 deck --html_slide_type=sandstone.firefox
+ doconce slides_html slides1 deck --html_slide_type=sandstone.firefox
slides written to slides1.html
+ '[' 0 -ne 0 ']'
+ cp slides1.html slides1_deck.html
+ /bin/ls -R deck.js
+ system doconce format pdflatex slides1
+ doconce format pdflatex slides1
translating doconce text in slides1.do.txt to pdflatex
output in slides1.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce ptex2tex slides1 -DLATEX_HEADING=beamer
+ doconce ptex2tex slides1 -DLATEX_HEADING=beamer
\bpycod (!bc pycod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in slides1.tex
+ '[' 0 -ne 0 ']'
+ system doconce slides_beamer slides1
+ doconce slides_beamer slides1
slides written to slides1.tex
+ '[' 0 -ne 0 ']'
+ system doconce format html slides2 --pygments_html_style=emacs
+ doconce format html slides2 --pygments_html_style=emacs
running preprocess -DFORMAT=html -DDEVICE=screen  slides2.do.txt > tmp_preprocess__slides2.do.txt
translating doconce text in tmp_preprocess__slides2.do.txt to html
copy complete file ../doc/slides/src/dc_mod.pyopt  (format: pyoptpro)
found info about 1 exercises, written to .slides2.exerinfo
figure file ../doc/slides/fig/latex_thesis:
    can use ../doc/slides/fig/latex_thesis.jpg for format html
figure file ../doc/slides/fig/imac:
    can use ../doc/slides/fig/imac.png for format html
figure file ../doc/slides/fig/latex_paper1:
    can use ../doc/slides/fig/latex_paper1.png for format html
figure file ../doc/slides/fig/iphones:
    can use ../doc/slides/fig/iphones.jpg for format html
figure file ../doc/slides/fig/oldbooks:
    can use ../doc/slides/fig/oldbooks.jpg for format html
figure file ../doc/slides/fig/ipad:
    can use ../doc/slides/fig/ipad.png for format html
figure file ../doc/slides/fig/doconce1b:
    can use ../doc/slides/fig/doconce1b.png for format html
figure file ../doc/slides/fig/teacher1:
    can use ../doc/slides/fig/teacher1.gif for format html
figure file ../doc/slides/fig/broken_pen_and_paper:
    can use ../doc/slides/fig/broken_pen_and_paper.jpg for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** warning: found environment begin/end !bsubex
    context:
----------------------------------
eywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$
output in slides2.html
+ '[' 0 -ne 0 ']'
+ system doconce slides_html slides2 reveal --html_slide_type=beigesmall
+ doconce slides_html slides2 reveal --html_slide_type=beigesmall
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
slides written to slides2.html
+ '[' 0 -ne 0 ']'
+ cp slides2.html slides2_reveal.html
+ system doconce format pdflatex slides2
+ doconce format pdflatex slides2
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  slides2.do.txt > tmp_preprocess__slides2.do.txt
translating doconce text in tmp_preprocess__slides2.do.txt to pdflatex
copy complete file ../doc/slides/src/dc_mod.pyopt  (format: pyoptpro)
found info about 1 exercises, written to .slides2.exerinfo
figure file ../doc/slides/fig/latex_thesis:
    can use ../doc/slides/fig/latex_thesis.jpg for format pdflatex
figure file ../doc/slides/fig/imac:
    can use ../doc/slides/fig/imac.png for format pdflatex
figure file ../doc/slides/fig/latex_paper1:
    can use ../doc/slides/fig/latex_paper1.png for format pdflatex
figure file ../doc/slides/fig/iphones:
    can use ../doc/slides/fig/iphones.jpg for format pdflatex
figure file ../doc/slides/fig/oldbooks:
    can use ../doc/slides/fig/oldbooks.jpg for format pdflatex
figure file ../doc/slides/fig/ipad:
    can use ../doc/slides/fig/ipad.png for format pdflatex
figure file ../doc/slides/fig/doconce1b:
    can use ../doc/slides/fig/doconce1b.png for format pdflatex
figure file ../doc/slides/fig/teacher1:
    can use ../doc/slides/fig/teacher1.pdf for format pdflatex
figure file ../doc/slides/fig/broken_pen_and_paper:
    can use ../doc/slides/fig/broken_pen_and_paper.jpg for format pdflatex
*** warning: found environment begin/end !bsubex
    context:
----------------------------------
eywords = random numbers; Monte Carlo simulation

!bsubex
Make a program that simulates flipping a coin $N$
output in slides2.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce ptex2tex slides2 -DLATEX_HEADING=beamer envir=minted
+ doconce ptex2tex slides2 -DLATEX_HEADING=beamer envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bpypro (!bc pypro) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in slides2.tex
+ '[' 0 -ne 0 ']'
+ system doconce slides_beamer slides2
+ doconce slides_beamer slides2
slides written to slides2.tex
+ '[' 0 -ne 0 ']'
+ system doconce format html slides3 --pygments_html_style=emacs SLIDE_TYPE=reveal SLIDE_THEME=beigesmall
+ doconce format html slides3 --pygments_html_style=emacs SLIDE_TYPE=reveal SLIDE_THEME=beigesmall
running preprocess -DFORMAT=html -DDEVICE=screen -DSLIDE_TYPE="reveal" -DSLIDE_THEME="beigesmall" slides3.do.txt > tmp_preprocess__slides3.do.txt
running mako on tmp_preprocess__slides3.do.txt to make tmp_mako__slides3.do.txt
mako variables: {'DEVICE': 'screen', 'SLIDE_TYPE': 'reveal', 'SLIDE_THEME': 'beigesmall', 'FORMAT': 'html'}
translating doconce text in tmp_mako__slides3.do.txt to html
copying from regex "def solver" until "def verify_three"
     file: ../doc/slides/src/dc_mod.py,  lines 5-18  (format: pycod)
figure file ../doc/slides/fig/teacher2:
    can use ../doc/slides/fig/teacher2.jpg for format html
figure file ../doc/slides/fig/CN_logo:
    can use ../doc/slides/fig/CN_logo.png for format html
figure file ../doc/slides/fig/CN:
    can use ../doc/slides/fig/CN.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in slides3.html
+ '[' 0 -ne 0 ']'
+ system doconce slides_html slides3 reveal --html_slide_type=beigesmall
+ doconce slides_html slides3 reveal --html_slide_type=beigesmall
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
slides written to slides3.html
+ '[' 0 -ne 0 ']'
+ cp slides3.html slides3_reveal.html
+ theme=red3
+ system doconce format pdflatex slides3 SLIDE_TYPE=beamer SLIDE_THEME=red3
+ doconce format pdflatex slides3 SLIDE_TYPE=beamer SLIDE_THEME=red3
running preprocess -DFORMAT=pdflatex -DDEVICE=screen -DSLIDE_TYPE="beamer" -DSLIDE_THEME="red3" slides3.do.txt > tmp_preprocess__slides3.do.txt
running mako on tmp_preprocess__slides3.do.txt to make tmp_mako__slides3.do.txt
mako variables: {'DEVICE': 'screen', 'SLIDE_TYPE': 'beamer', 'SLIDE_THEME': 'red3', 'FORMAT': 'pdflatex'}
translating doconce text in tmp_mako__slides3.do.txt to pdflatex
copying from regex "def solver" until "def verify_three"
     file: ../doc/slides/src/dc_mod.py,  lines 5-18  (format: pycod)
figure file ../doc/slides/fig/teacher2:
    can use ../doc/slides/fig/teacher2.jpg for format pdflatex
figure file ../doc/slides/fig/CN_logo:
    can use ../doc/slides/fig/CN_logo.pdf for format pdflatex
figure file ../doc/slides/fig/CN:
    can use ../doc/slides/fig/CN.pdf for format pdflatex
output in slides3.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce ptex2tex slides3 -DLATEX_HEADING=beamer envir=minted
+ doconce ptex2tex slides3 -DLATEX_HEADING=beamer envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
output in slides3.tex
+ '[' 0 -ne 0 ']'
+ system doconce slides_beamer slides3 --beamer_slide_theme=red3
+ doconce slides_beamer slides3 --beamer_slide_theme=red3
could not extract beamerthemered3.sty.sty (from latex_styles.zip in the doconce installation)
slides written to slides3.tex
+ '[' 0 -ne 0 ']'
+ system doconce format html slides1 --pygments_html_style=emacs
+ doconce format html slides1 --pygments_html_style=emacs
translating doconce text in slides1.do.txt to html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in slides1.html
+ '[' 0 -ne 0 ']'
+ system doconce slides_html slides1 all
+ doconce slides_html slides1 all
run
  sh tmp_slides_html_all.sh
to generate the slides
+ '[' 0 -ne 0 ']'
+ system doconce grab --from- '={5} Subsection 1' --to subroutine@ _testdoc.do.txt
+ doconce grab --from- '={5} Subsection 1' --to subroutine@ _testdoc.do.txt
+ '[' 0 -ne 0 ']'
+ doconce grab --from 'Compute a Probability' --to- 'drawing uniformly' _testdoc.do.txt
+ doconce grab --from- '\*\s+\$.+normally' _testdoc.do.txt
+ system doconce format html html_template --html_template=template1.html --no_pygments_html
+ doconce format html html_template --html_template=template1.html --no_pygments_html
translating doconce text in html_template.do.txt to html
output in html_template.html
+ '[' 0 -ne 0 ']'
+ cp html_template.html html_template1.html
+ system doconce format html html_template --html_template=template_inf1100.html --pygments_html_style=emacs
+ doconce format html html_template --html_template=template_inf1100.html --pygments_html_style=emacs
translating doconce text in html_template.do.txt to html
output in html_template.html
+ '[' 0 -ne 0 ']'
+ system doconce format html author1
+ doconce format html author1
translating doconce text in author1.do.txt to html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in author1.html
+ '[' 0 -ne 0 ']'
+ system doconce format latex author1
+ doconce format latex author1

Summary of papers
-----------------

Articles in International Journals: 8
Books:                              3
Edited Books:                       0
Chapters in Books:                  1
Refereed Proceedings:               0
Conference Proceedings:             2
Technical Reports:                  4
Manuals:                            0
Theses:                             2
Courses:                            0
Talks:                              0
Posters:                            0
Public Outreach:                    0
Other Publications:                 1
Total:                              21

Exported 21 paper(s) to papers.bib.
translating doconce text in author1.do.txt to latex

exporting publish database papers.pub to papers.bib:
output in author1.p.tex
+ '[' 0 -ne 0 ']'
+ system doconce format sphinx author1
+ doconce format sphinx author1
translating doconce text in author1.do.txt to sphinx
*** warning: hyperlink to URL demo_testdoc.html is to a local file,
  - recommended to be _static/demo_testdoc.html for sphinx
*** warning: hyperlink to URL demo_testdoc.html#___sec2 is to a local file,
  - recommended to be _static/demo_testdoc.html#___sec2 for sphinx
*** move linked files to _static and change URLs
    (unless you really know that the links will be correct
    when the sphinx build directory is moved to its final destination)
output in author1.rst
+ '[' 0 -ne 0 ']'
+ system doconce format plain author1
+ doconce format plain author1
translating doconce text in author1.do.txt to plain
output in author1.txt
+ '[' 0 -ne 0 ']'
+ name=math_test
+ doconce format pdflatex math_test
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  math_test.do.txt > tmp_preprocess__math_test.do.txt
running mako on tmp_preprocess__math_test.do.txt to make tmp_mako__math_test.do.txt
translating doconce text in tmp_mako__math_test.do.txt to pdflatex
output in math_test.p.tex
+ doconce ptex2tex math_test
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in math_test.tex
+ pdflatex math_test
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 restricted \write18 enabled.
entering extended mode
(./math_test.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


Writing index file math_test.idx
No file math_test.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_bfmath.tex) (./newcommands_replace.tex)





LaTeX Warning: Reference `eq1b' on page 1 

[1{/var/lib/texmf/fonts/map/pdftex/updmap/pdftex.map}]

LaTeX Warning: Reference `eq2b' on page 2 


LaTeX Warning: Reference `eq3b' on page 2 

[2]

LaTeX Warning: Reference `eq2c' on page 3 


LaTeX Warning: Reference `eq3c' on page 3 

No file math_test.ind.
[3] (./math_test.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
 ***********


Package rerunfilecheck Warning: File `math_test.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )</usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></us
r/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx12.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi10.pfb></usr/share/texl
ive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi7.pfb></usr/share/texlive/tex
mf-dist/fonts/type1/public/amsfonts/cm/cmmib10.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-dist/font
s/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fonts/type1/
public/amsfonts/cm/cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public
/amsfonts/cm/cmsy7.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfon
ts/cm/cmtt10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/
cmtt9.pfb>
Output written on math_test.pdf (3 pages, ).
Transcript written on math_test.log.
+ system doconce format html math_test
+ doconce format html math_test
running preprocess -DFORMAT=html -DDEVICE=screen  math_test.do.txt > tmp_preprocess__math_test.do.txt
running mako on tmp_preprocess__math_test.do.txt to make tmp_mako__math_test.do.txt
translating doconce text in tmp_mako__math_test.do.txt to html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in math_test.html
+ '[' 0 -ne 0 ']'
+ cp math_test.html math_test_html.html
+ doconce format sphinx math_test
running preprocess -DFORMAT=sphinx -DDEVICE=screen  math_test.do.txt > tmp_preprocess__math_test.do.txt
running mako on tmp_preprocess__math_test.do.txt to make tmp_mako__math_test.do.txt
translating doconce text in tmp_mako__math_test.do.txt to sphinx

*** warning:
Not recommended for sphinx output: math environment {eqnarray}
(use equation, equation*, \[ \], or align/align*)
Not recommended for sphinx output: math environment {eqnarray*}

Detected non-align equation systems with multiple labels
(that Sphinx will not handle - labels will be removed
and references to them will be empty):
label{eq2c}
label{eq3c}

*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
output in math_test.rst
+ doconce sphinx_dir dirname=sphinx-rootdir-math math_test
Making sphinx-rootdir-math
Welcome to the Sphinx 1.2pre quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]: 
You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: 
Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]: 
The project name will occur in several places in the built documentation.
> Project name: > Author name(s): 
Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don't need this dual structure,
just set both to the same value.
> Project version: > Project release [1.0]: 
The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]: * Please enter a file suffix, e.g. '.rst' or '.txt'.
> Source file suffix [.rst]: 
One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]: 
Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: 
Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: > doctest: automatically test code snippets in doctest blocks (y/N) [n]: > intersphinx: link between Sphinx documentation of different projects (y/N) [n]: > todo: write "todo" entries that can be shown or hidden on build (y/N) [n]: > coverage: checks for documentation coverage (y/N) [n]: > pngmath: include math, rendered as PNG images (y/N) [n]: > mathjax: include math, rendered in the browser by MathJax (y/N) [n]: > ifconfig: conditional inclusion of content based on config values (y/N) [n]: > viewcode: include links to the source code of documented Python objects (y/N) [n]: 
A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: > Create Windows command file? (Y/n) [y]: 
Creating file sphinx-rootdir-math/conf.py.
Creating file sphinx-rootdir-math/index.rst.
Creating file sphinx-rootdir-math/Makefile.
Creating file sphinx-rootdir-math/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file sphinx-rootdir-math/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

searching for TITLE in math_test.do.txt
Using title "How various formats can deal with LaTeX math" from math_test
Author: ['HPL']
Using author(s) "HPL" from math_test
title: How various formats can deal with LaTeX math
author: HPL
theme: default
These Sphinx themes were found: ADCtheme, agni, agogo, basic, basicstrap, bootstrap, cbc, classy, cloud, default, epub, fenics, fenics_minimal, flask, haiku, impressjs, jal, nature, pylons, pyramid, redcloud, scipy_lectures, scrolls, slim-agogo, solarized, sphinxdoc, traditional, vlinux-theme, default

'automake_sphinx.py' contains the steps to (re)compile the sphinx
version. You may want to edit this file, or run the steps manually,
or just run it by

  python automake_sphinx.py

+ cp automake_sphinx.py automake_sphinx_math_test.py
+ python automake_sphinx.py
rm -rf _build/*
sphinx-build -b html -d _build/doctrees   . _build/html
Making output directory...
Running Sphinx v1.2pre
loading pickled environment... not yet created
building [html]: targets for 2 source files that are out of date
updating environment: 2 added, 0 changed, 0 removed
reading sources... [ 50%] index
reading sources... [100%] math_test

looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [ 50%] index
writing output... [100%] math_test

writing additional files... (0 module code pages) genindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.

Build finished. The HTML pages are in _build/html.
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in search.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in search.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in math_test.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in math_test.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in genindex.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in genindex.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in index.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in index.html
/home/hpl/vc/doconce/test/sphinx-rootdir-math
running make clean
running make html
Fix generated files:

google-chrome sphinx-rootdir-math/_build/html/index.html

+ doconce format pandoc math_test
running preprocess -DFORMAT=pandoc -DDEVICE=screen  math_test.do.txt > tmp_preprocess__math_test.do.txt
running mako on tmp_preprocess__math_test.do.txt to make tmp_mako__math_test.do.txt
translating doconce text in tmp_mako__math_test.do.txt to pandoc
*** warning: latex envir \begin{eqnarray*} does not work well.

*** warning: latex envir \begin{eqnarray} does not work well.

output in math_test.md
+ doconce md2html math_test.md
pandoc -f markdown -t html --mathjax -s -o math_test.html math_test.md
output in math_test.html
+ cp math_test.html math_test_pandoc.html
+ doconce format pandoc math_test
running preprocess -DFORMAT=pandoc -DDEVICE=screen  math_test.do.txt > tmp_preprocess__math_test.do.txt
running mako on tmp_preprocess__math_test.do.txt to make tmp_mako__math_test.do.txt
translating doconce text in tmp_mako__math_test.do.txt to pandoc
*** warning: latex envir \begin{eqnarray*} does not work well.

*** warning: latex envir \begin{eqnarray} does not work well.

output in math_test.md
+ doconce md2latex math_test
command "md2latex" is not legal, must be among

format, help, sphinx_dir, subst, replace, replace_from_file, clean, spellcheck, ptex2tex, expand_commands, combine_images, guess_encoding, change_encoding, gwiki_figsubst, md2html, remove_inline_comments, grab, remove, remove_exercise_answers, split_rst, split_html, slides_html, slides_beamer, latin2html, latex_header, latex_footer, bbl2rst, html_colorbullets, list_labels, teamod, sphinxfix_localURLs, make_figure_code_links, latex_exercise_toc, insertdocstr, old2new_format, latex2doconce, latex_dislikes, pygmentize, makefile, diff, gitdiff, fix_bibtex4publish, csv2table
+ admon_tps='colors1 graybox1 paragraph graybox2 yellowbox graybox3 colors2'
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=colors1
+ doconce format pdflatex admon --latex_admon=colors1
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_colors1.tex
+ pdflatex -shell-escape admon_colors1
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_colors1.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_colors1.w18))/usr/local/bin/pygmentize
) (./admon_colors1.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def




Writing index file admon_colors1.idx
No file admon_colors1.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_bfmath.tex) (./newcommands_replace.tex)




(./admon_colors1.out.pyg)
<latex_figs/warning.pdf, id=4, 89.33376pt x 89.33376pt>
<use latex_figs/warning.pdf>
Underfull \hbox (badness 10000) 


<use latex_figs/warning.pdf>
Underfull \hbox (badness 10000) 

[1{/var/lib/texmf/fonts/map/pdftex/updmap/pdftex.map} <./latex_figs/warning.pdf
>]
Underfull \hbox (badness 10000) 


Underfull \hbox (badness 10000) 

<latex_figs/notice.pdf, id=22, 89.33376pt x 89.33376pt>
<use latex_figs/notice.pdf>
Underfull \hbox (badness 10000) 

<use latex_figs/notice.pdf>
Underfull \hbox (badness 10000) 

<latex_figs/question.pdf, id=23, 89.33376pt x 89.33376pt>
<use latex_figs/question.pdf>
Underfull \hbox (badness 10000) 

<use latex_figs/question.pdf>
Underfull \hbox (badness 10000) 

[2 <./latex_figs/notice.pdf> <./latex_figs/question.pdf>]
<use latex_figs/warning.pdf>
Underfull \hbox (badness 10000) 

(./admon_colors1.out.pyg) <use latex_figs/warning.pdf>
Underfull \hbox (badness 10000) 

<use latex_figs/notice.pdf>
Underfull \hbox (badness 10000) 

(./admon_colors1.out.pyg) (./admon_colors1.out.pyg)
<../doc/manual/figs/wavepacket_0001.png, id=42, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png> [3] [4]
<latex_figs/summary.pdf, id=55, 89.33376pt x 89.33376pt>
<use latex_figs/summary.pdf>
Underfull \hbox (badness 10000) 

No file admon_colors1.ind.
[5 <../doc/manual/figs/wavepacket_0001.png> <./latex_figs/summary.pdf>]
(./admon_colors1.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_colors1.w18
admon_colors1.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_colors1.out.pyg
latex_figs/warning.pdf
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
latex_figs/warning.pdf
latex_figs/notice.pdf
latex_figs/notice.pdf
latex_figs/question.pdf
latex_figs/question.pdf
latex_figs/warning.pdf
admon_colors1.out.pyg
latex_figs/warning.pdf
latex_figs/notice.pdf
admon_colors1.out.pyg
admon_colors1.out.pyg
../doc/manual/figs/wavepacket_0001.png
latex_figs/summary.pdf
 ***********


Package rerunfilecheck Warning: File `admon_colors1.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/pu
blic/amsfonts/cm/cmmib10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/
amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmr12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
r7.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr8.pfb><
/usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy10.pfb></usr/s
hare/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti8.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb>
Output written on admon_colors1.pdf (5 pages, ).
Transcript written on admon_colors1.log.
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=graybox1
+ doconce format pdflatex admon --latex_admon=graybox1
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_graybox1.tex
+ pdflatex -shell-escape admon_graybox1
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_graybox1.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_graybox1.w18))/usr/local/bin/pygmentize
) (./admon_graybox1.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty

(/usr/share/texmf/tex/generic/pgf/utilities/pgfutil-latex.def


(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/mdframed/md-frame-1.mdf
)) 
Writing index file admon_graybox1.idx
No file admon_graybox1.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

ABD: EveryShipout initializing macros (./newcommands_bfmath.tex)
(./newcommands_replace.tex)




(./admon_graybox1.out.pyg)
 [1{/var/lib/texmf/font
s/map/pdftex/updmap/pdftex.map}] (./admon_graybox1.out.pyg) [2]
(./admon_graybox1.out.pyg) (./admon_graybox1.out.pyg)
<../doc/manual/figs/wavepacket_0001.png, id=33, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png> [3]
No file admon_graybox1.ind.
[4 <../doc/manual/figs/wavepacket_0001.png>] (./admon_graybox1.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_graybox1.w18
admon_graybox1.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_graybox1.out.pyg
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
admon_graybox1.out.pyg
admon_graybox1.out.pyg
admon_graybox1.out.pyg
../doc/manual/figs/wavepacket_0001.png
 ***********


Package rerunfilecheck Warning: File `admon_graybox1.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )</usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></us
r/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx12.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi10.pfb></usr/share/texl
ive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmib10.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/cm/cmr12.pfb></usr/share/texlive/texmf-dist/font
s/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fonts/type1/
public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/a
msfonts/cm/cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmti8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
tt9.pfb>
Output written on admon_graybox1.pdf (4 pages, ).
Transcript written on admon_graybox1.log.
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=paragraph
+ doconce format pdflatex admon --latex_admon=paragraph
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_paragraph.tex
+ pdflatex -shell-escape admon_paragraph
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_paragraph.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_paragraph.w18))/usr/local/bin/pygmentize
) (./admon_paragraph.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty

(/usr/share/texmf/tex/generic/pgf/utilities/pgfutil-latex.def


(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/mdframed/md-frame-1.mdf
)) 
Writing index file admon_paragraph.idx
No file admon_paragraph.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

ABD: EveryShipout initializing macros (./newcommands_bfmath.tex)
(./newcommands_replace.tex)




(./admon_paragraph.out.pyg)
 [1{/var/lib/texmf/font
s/map/pdftex/updmap/pdftex.map}] (./admon_paragraph.out.pyg) [2]
(./admon_paragraph.out.pyg) (./admon_paragraph.out.pyg [3])
<../doc/manual/figs/wavepacket_0001.png, id=38, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png>
No file admon_paragraph.ind.
[4 <../doc/manual/figs/wavepacket_0001.png>] (./admon_paragraph.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_paragraph.w18
admon_paragraph.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_paragraph.out.pyg
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
admon_paragraph.out.pyg
admon_paragraph.out.pyg
admon_paragraph.out.pyg
../doc/manual/figs/wavepacket_0001.png
 ***********


Package rerunfilecheck Warning: File `admon_paragraph.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )</usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></us
r/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx12.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi10.pfb></usr/share/texl
ive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmib10.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/cm/cmr12.pfb></usr/share/texlive/texmf-dist/font
s/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fonts/type1/
public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/a
msfonts/cm/cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmti8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
tt9.pfb>
Output written on admon_paragraph.pdf (4 pages, ).
Transcript written on admon_paragraph.log.
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=graybox2
+ doconce format pdflatex admon --latex_admon=graybox2
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_graybox2.tex
+ pdflatex -shell-escape admon_graybox2
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_graybox2.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_graybox2.w18))/usr/local/bin/pygmentize
) (./admon_graybox2.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty






















(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty

(/usr/share/texmf/tex/generic/pgf/utilities/pgfutil-latex.def


(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-pdftex.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/mdframed/md-frame-1.mdf
)) 
Writing index file admon_graybox2.idx
No file admon_graybox2.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

ABD: EveryShipout initializing macros (./newcommands_bfmath.tex)
(./newcommands_replace.tex)




(./admon_graybox2.out.pyg)
 [1{/var/lib/texmf/font
s/map/pdftex/updmap/pdftex.map}] (./admon_graybox2.out.pyg) [2]
(./admon_graybox2.out.pyg) (./admon_graybox2.out.pyg)
<../doc/manual/figs/wavepacket_0001.png, id=33, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png> [3] [4 <../doc/manual/figs/wavepac
ket_0001.png>]
No file admon_graybox2.ind.
[5] (./admon_graybox2.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_graybox2.w18
admon_graybox2.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
 wrapfig.sty    2003/01/31  v 3.6
mdframed.sty    2012/04/08 v1.5: mdframed
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_graybox2.out.pyg
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
admon_graybox2.out.pyg
admon_graybox2.out.pyg
admon_graybox2.out.pyg
../doc/manual/figs/wavepacket_0001.png
 ***********


Package rerunfilecheck Warning: File `admon_graybox2.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )</usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></us
r/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmbx12.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi10.pfb></usr/share/texl
ive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmib10.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-di
st/fonts/type1/public/amsfonts/cm/cmr12.pfb></usr/share/texlive/texmf-dist/font
s/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fonts/type1/
public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/a
msfonts/cm/cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmti8.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
tt9.pfb>
Output written on admon_graybox2.pdf (5 pages, ).
Transcript written on admon_graybox2.log.
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=yellowbox
+ doconce format pdflatex admon --latex_admon=yellowbox
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_yellowbox.tex
+ pdflatex -shell-escape admon_yellowbox
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_yellowbox.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_yellowbox.w18))/usr/local/bin/pygmentize
) (./admon_yellowbox.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def





Writing index file admon_yellowbox.idx
No file admon_yellowbox.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_bfmath.tex) (./newcommands_replace.tex)




(./admon_yellowbox.out.pyg)
<latex_figs/small_yellow_warning.pdf, id=4, 32.12pt x 32.12pt>
<use latex_figs/small_yellow_warning.pdf>

<use latex_figs/small_yellow_warning.pdf> [1{/var/lib/texmf/fonts/map/pdftex/up
dmap/pdftex.map} <./latex_figs/small_yellow_warning.pdf>]
<latex_figs/small_yellow_notice.pdf, id=24, 32.12pt x 32.12pt>
<use latex_figs/small_yellow_notice.pdf>
<use latex_figs/small_yellow_notice.pdf>
<latex_figs/small_yellow_question.pdf, id=25, 32.12pt x 32.12pt>
<use latex_figs/small_yellow_question.pdf>
<use latex_figs/small_yellow_question.pdf> [2 <./latex_figs/small_yellow_notice
.pdf> <./latex_figs/small_yellow_question.pdf>]
<use latex_figs/small_yellow_warning.pdf> (./admon_yellowbox.out.pyg)
<use latex_figs/small_yellow_warning.pdf>
<use latex_figs/small_yellow_notice.pdf> (./admon_yellowbox.out.pyg)
(./admon_yellowbox.out.pyg)
<../doc/manual/figs/wavepacket_0001.png, id=49, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png> [3]
Underfull \vbox (badness 10000) detected at line 435

Underfull \vbox (badness 10000) detected at line 435
[4] <latex_figs/small_yellow_summary.pdf, id=61, 32.12pt x 32.12pt>
<use latex_figs/small_yellow_summary.pdf>
No file admon_yellowbox.ind.
[5 <../doc/manual/figs/wavepacket_0001.png> <./latex_figs/small_yellow_summary.
pdf>] (./admon_yellowbox.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_yellowbox.w18
admon_yellowbox.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
 wrapfig.sty    2003/01/31  v 3.6
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_yellowbox.out.pyg
latex_figs/small_yellow_warning.pdf
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
latex_figs/small_yellow_warning.pdf
latex_figs/small_yellow_notice.pdf
latex_figs/small_yellow_notice.pdf
latex_figs/small_yellow_question.pdf
latex_figs/small_yellow_question.pdf
latex_figs/small_yellow_warning.pdf
admon_yellowbox.out.pyg
latex_figs/small_yellow_warning.pdf
latex_figs/small_yellow_notice.pdf
admon_yellowbox.out.pyg
admon_yellowbox.out.pyg
../doc/manual/figs/wavepacket_0001.png
latex_figs/small_yellow_summary.pdf
 ***********


Package rerunfilecheck Warning: File `admon_yellowbox.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/pu
blic/amsfonts/cm/cmmib10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/
amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmr12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
r7.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr8.pfb><
/usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy10.pfb></usr/s
hare/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti8.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb>
Output written on admon_yellowbox.pdf (5 pages, ).
Transcript written on admon_yellowbox.log.
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=graybox3
+ doconce format pdflatex admon --latex_admon=graybox3
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_graybox3.tex
+ pdflatex -shell-escape admon_graybox3
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_graybox3.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_graybox3.w18))/usr/local/bin/pygmentize
) (./admon_graybox3.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def





Writing index file admon_graybox3.idx
No file admon_graybox3.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_bfmath.tex) (./newcommands_replace.tex)




(./admon_graybox3.out.pyg)
<latex_figs/small_gray_warning.pdf, id=4, 48.18pt x 48.18pt>
<use latex_figs/small_gray_warning.pdf>

<use latex_figs/small_gray_warning.pdf> [1{/var/lib/texmf/fonts/map/pdftex/updm
ap/pdftex.map} <./latex_figs/small_gray_warning.pdf>]
<latex_figs/small_gray_notice.pdf, id=24, 64.24pt x 64.24pt>
<use latex_figs/small_gray_notice.pdf> <use latex_figs/small_gray_notice.pdf>
<latex_figs/small_gray_question2.pdf, id=25, 64.24pt x 64.24pt>
<use latex_figs/small_gray_question2.pdf>
<use latex_figs/small_gray_question2.pdf> [2 <./latex_figs/small_gray_notice.pd
f> <./latex_figs/small_gray_question2.pdf>]
<use latex_figs/small_gray_warning.pdf> (./admon_graybox3.out.pyg)
<use latex_figs/small_gray_warning.pdf> <use latex_figs/small_gray_notice.pdf>
(./admon_graybox3.out.pyg) (./admon_graybox3.out.pyg)
<../doc/manual/figs/wavepacket_0001.png, id=49, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png> [3]
Underfull \vbox (badness 10000) detected at line 435

Underfull \vbox (badness 10000) detected at line 435
[4] <latex_figs/small_gray_summary.pdf, id=61, 48.18pt x 48.18pt>
<use latex_figs/small_gray_summary.pdf>
No file admon_graybox3.ind.
[5 <../doc/manual/figs/wavepacket_0001.png> <./latex_figs/small_gray_summary.pd
f>] (./admon_graybox3.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_graybox3.w18
admon_graybox3.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
 wrapfig.sty    2003/01/31  v 3.6
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_graybox3.out.pyg
latex_figs/small_gray_warning.pdf
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
latex_figs/small_gray_warning.pdf
latex_figs/small_gray_notice.pdf
latex_figs/small_gray_notice.pdf
latex_figs/small_gray_question2.pdf
latex_figs/small_gray_question2.pdf
latex_figs/small_gray_warning.pdf
admon_graybox3.out.pyg
latex_figs/small_gray_warning.pdf
latex_figs/small_gray_notice.pdf
admon_graybox3.out.pyg
admon_graybox3.out.pyg
../doc/manual/figs/wavepacket_0001.png
latex_figs/small_gray_summary.pdf
 ***********


Package rerunfilecheck Warning: File `admon_graybox3.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/pu
blic/amsfonts/cm/cmmib10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/
amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmr12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
r7.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr8.pfb><
/usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy10.pfb></usr/s
hare/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti8.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb>
Output written on admon_graybox3.pdf (5 pages, ).
Transcript written on admon_graybox3.log.
+ for admon_tp in '$admon_tps'
+ system doconce format pdflatex admon --latex_admon=colors2
+ doconce format pdflatex admon --latex_admon=colors2
running preprocess -DFORMAT=pdflatex -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to pdflatex
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format pdflatex
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.p.tex
+ '[' 0 -ne 0 ']'
+ doconce ptex2tex admon envir=minted
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95]
output in admon.tex
+ cp admon.tex admon_colors2.tex
+ pdflatex -shell-escape admon_colors2
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./admon_colors2.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty


(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty


(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./admon_colors2.w18))/usr/local/bin/pygmentize
) (./admon_colors2.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def





Writing index file admon_colors2.idx
No file admon_colors2.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_bfmath.tex) (./newcommands_replace.tex)




(./admon_colors2.out.pyg)
<latex_figs/warning.pdf, id=4, 89.33376pt x 89.33376pt>
<use latex_figs/warning.pdf>

<use latex_figs/warning.pdf> [1{/var/lib/texmf/fonts/map/pdftex/updmap/pdftex.m
ap} <./latex_figs/warning.pdf>]
<latex_figs/notice.pdf, id=22, 89.33376pt x 89.33376pt>
<use latex_figs/notice.pdf> <use latex_figs/notice.pdf>
<latex_figs/question.pdf, id=23, 89.33376pt x 89.33376pt>
<use latex_figs/question.pdf> <use latex_figs/question.pdf> [2 <./latex_figs/no
tice.pdf> <./latex_figs/question.pdf>] <use latex_figs/warning.pdf>
(./admon_colors2.out.pyg) <use latex_figs/warning.pdf>
<use latex_figs/notice.pdf> (./admon_colors2.out.pyg) (./admon_colors2.out.pyg)
<../doc/manual/figs/wavepacket_0001.png, id=43, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png> [3]
Underfull \vbox (badness 10000) detected at line 435

Underfull \vbox (badness 10000) detected at line 435
[4] <latex_figs/summary.pdf, id=55, 89.33376pt x 89.33376pt>
<use latex_figs/summary.pdf>
No file admon_colors2.ind.
[5 <../doc/manual/figs/wavepacket_0001.png> <./latex_figs/summary.pdf>]
(./admon_colors2.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
admon_colors2.w18
admon_colors2.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
 wrapfig.sty    2003/01/31  v 3.6
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_bfmath.tex
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
admon_colors2.out.pyg
latex_figs/warning.pdf
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
latex_figs/warning.pdf
latex_figs/notice.pdf
latex_figs/notice.pdf
latex_figs/question.pdf
latex_figs/question.pdf
latex_figs/warning.pdf
admon_colors2.out.pyg
latex_figs/warning.pdf
latex_figs/notice.pdf
admon_colors2.out.pyg
admon_colors2.out.pyg
../doc/manual/figs/wavepacket_0001.png
latex_figs/summary.pdf
 ***********


Package rerunfilecheck Warning: File `admon_colors2.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/pu
blic/amsfonts/cm/cmmib10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/
amsfonts/cm/cmr10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfont
s/cm/cmr12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cm
r7.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr8.pfb><
/usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmsy10.pfb></usr/s
hare/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti8.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb>
Output written on admon_colors2.pdf (5 pages, ).
Transcript written on admon_colors2.log.
+ system doconce format html admon --html_admon=lyx --html_style=blueish2
+ doconce format html admon --html_admon=lyx --html_style=blueish2
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_lyx.html
+ system doconce format html admon --html_admon=paragraph --html_style=blueish2
+ doconce format html admon --html_admon=paragraph --html_style=blueish2
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_paragraph.html
+ system doconce format html admon --html_admon=colors
+ doconce format html admon --html_admon=colors
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_colors.html
+ system doconce format html admon --html_admon=gray --html_style=blueish2
+ doconce format html admon --html_admon=gray --html_style=blueish2
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_gray.html
+ system doconce format html admon --html_admon=yellow
+ doconce format html admon --html_admon=yellow
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_yellow.html
+ system doconce format html admon --html_admon=apricot --html_style=solarized
+ doconce format html admon --html_admon=apricot --html_style=solarized
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_apricot.html
+ system doconce format html admon --html_style=vagrant --pygments_html_style=default --html_template=style_vagrant/template_vagrant.html
+ doconce format html admon --html_style=vagrant --pygments_html_style=default --html_template=style_vagrant/template_vagrant.html
running preprocess -DFORMAT=html -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to html
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format html
*** warning: TITLE may look strange with a template -
             it is recommended to comment out the title: #TITLE:
*** warning: AUTHOR may look strange with a template -
             it is recommended to comment out all authors: #AUTHOR.
             Better to hardcode authors in a footer in the template.
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.html
+ '[' 0 -ne 0 ']'
+ cp admon.html admon_vagrant.html
+ system doconce sphinx_dir dirname=tmp_admon admon
+ doconce sphinx_dir dirname=tmp_admon admon
Making tmp_admon
Welcome to the Sphinx 1.2pre quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]: 
You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: 
Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]: 
The project name will occur in several places in the built documentation.
> Project name: > Author name(s): 
Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don't need this dual structure,
just set both to the same value.
> Project version: > Project release [1.0]: 
The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]: * Please enter a file suffix, e.g. '.rst' or '.txt'.
> Source file suffix [.rst]: 
One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]: 
Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: 
Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: > doctest: automatically test code snippets in doctest blocks (y/N) [n]: > intersphinx: link between Sphinx documentation of different projects (y/N) [n]: > todo: write "todo" entries that can be shown or hidden on build (y/N) [n]: > coverage: checks for documentation coverage (y/N) [n]: > pngmath: include math, rendered as PNG images (y/N) [n]: > mathjax: include math, rendered in the browser by MathJax (y/N) [n]: > ifconfig: conditional inclusion of content based on config values (y/N) [n]: > viewcode: include links to the source code of documented Python objects (y/N) [n]: 
A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: > Create Windows command file? (Y/n) [y]: 
Creating file tmp_admon/conf.py.
Creating file tmp_admon/index.rst.
Creating file tmp_admon/Makefile.
Creating file tmp_admon/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file tmp_admon/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

searching for TITLE in admon.do.txt
Using title "Testing admons" from admon
Author: ['hpl']
Using author(s) "hpl" from admon
title: Testing admons
author: hpl
theme: default
These Sphinx themes were found: ADCtheme, agni, agogo, basic, basicstrap, bootstrap, cbc, classy, cloud, default, epub, fenics, fenics_minimal, flask, haiku, impressjs, jal, nature, pylons, pyramid, redcloud, scipy_lectures, scrolls, slim-agogo, solarized, sphinxdoc, traditional, vlinux-theme, default

'automake_sphinx.py' contains the steps to (re)compile the sphinx
version. You may want to edit this file, or run the steps manually,
or just run it by

  python automake_sphinx.py

+ '[' 0 -ne 0 ']'
+ system python automake_sphinx.py
+ python automake_sphinx.py
running preprocess -DFORMAT=sphinx -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to sphinx
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format sphinx
*** replacing \bm{...} by \boldsymbol{...} (\bm is not supported by MathJax)
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.rst
rm -rf _build/*
sphinx-build -b html -d _build/doctrees   . _build/html
Making output directory...
Running Sphinx v1.2pre
loading pickled environment... not yet created
building [html]: targets for 2 source files that are out of date
updating environment: 2 added, 0 changed, 0 removed
reading sources... [ 50%] admon
reading sources... [100%] index

looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [ 50%] admon
writing output... [100%] index

writing additional files... (0 module code pages) genindex search
copying images... [100%] wavepacket_0001.png

copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.

Build finished. The HTML pages are in _build/html.
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in search.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in search.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in admon.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in admon.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in genindex.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in genindex.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in index.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in index.html
doconce format sphinx admon 
running doconce format sphinx admon 
running doconce guess_encoding admon.rst
copying ../doc/manual/figs/wavepacket_0001.png to tmp_admon
/home/hpl/vc/doconce/test/tmp_admon
running make clean
running make html
Fix generated files:

google-chrome tmp_admon/_build/html/index.html

+ '[' 0 -ne 0 ']'
+ cp tmp_admon/_build/html/admon.html admon_sphinx.html
+ system doconce format mwiki admon
+ doconce format mwiki admon
running preprocess -DFORMAT=mwiki -DDEVICE=screen  admon.do.txt > tmp_preprocess__admon.do.txt
translating doconce text in tmp_preprocess__admon.do.txt to mwiki
figure file ../doc/manual/figs/wavepacket_0001:
    can use ../doc/manual/figs/wavepacket_0001.png for format mwiki
 ...checking if wavepacket_0001.png is stored at en.wikipedia.org/w/api.php...
 ...for wikipedia/wikibooks you must upload image file wavepacket_0001.png to
    common.wikimedia.org
 ...for now we use local file Wavepacket 0001.png
*** error: wrong text size "illegal-size" specified in notice environment!
    must be large or small - will be set to normal
output in admon.mwiki
+ '[' 0 -ne 0 ']'
+ cp admon.mwiki admon_mwiki.mwiki
+ system doconce format pandoc github_md.do.txt --github_md
+ doconce format pandoc github_md.do.txt --github_md
translating doconce text in github_md.do.txt to pandoc
output in github_md.md
+ '[' 0 -ne 0 ']'
+ system doconce guess_encoding encoding1.do.txt
+ doconce guess_encoding encoding1.do.txt
+ '[' 0 -ne 0 ']'
+ cp encoding1.do.txt tmp1.do.txt
+ system doconce change_encoding utf-8 latin1 tmp1.do.txt
+ doconce change_encoding utf-8 latin1 tmp1.do.txt
+ '[' 0 -ne 0 ']'
+ system doconce guess_encoding tmp1.do.txt
+ doconce guess_encoding tmp1.do.txt
+ '[' 0 -ne 0 ']'
+ system doconce change_encoding latin1 utf-8 tmp1.do.txt
+ doconce change_encoding latin1 utf-8 tmp1.do.txt
+ '[' 0 -ne 0 ']'
+ system doconce guess_encoding tmp1.do.txt
+ doconce guess_encoding tmp1.do.txt
+ '[' 0 -ne 0 ']'
+ system doconce guess_encoding encoding2.do.txt
+ doconce guess_encoding encoding2.do.txt
+ '[' 0 -ne 0 ']'
+ cp encoding1.do.txt tmp2.do.txt
+ system doconce change_encoding utf-8 latin1 tmp2.do.txt
+ doconce change_encoding utf-8 latin1 tmp2.do.txt
+ '[' 0 -ne 0 ']'
+ doconce guess_encoding tmp2.do.txt
+ system doconce format html mako_test1 --no_pygments_html
+ doconce format html mako_test1 --no_pygments_html
running mako on mako_test1.do.txt to make tmp_mako__mako_test1.do.txt
translating doconce text in tmp_mako__mako_test1.do.txt to html
output in mako_test1.html
+ '[' 0 -ne 0 ']'
+ system doconce format html mako_test2 --no_pygments_html
+ doconce format html mako_test2 --no_pygments_html
translating doconce text in mako_test2.do.txt to html
output in mako_test2.html
+ '[' 0 -ne 0 ']'
+ system doconce format html mako_test3 --no_pygments_html
+ doconce format html mako_test3 --no_pygments_html
running mako on mako_test3.do.txt to make tmp_mako__mako_test3.do.txt
translating doconce text in tmp_mako__mako_test3.do.txt to html
output in mako_test3.html
+ '[' 0 -ne 0 ']'
+ cp mako_test3.html mako_test3b.html
+ system doconce format html mako_test3 --no_pygments_html
+ doconce format html mako_test3 --no_pygments_html
running mako on mako_test3.do.txt to make tmp_mako__mako_test3.do.txt
translating doconce text in tmp_mako__mako_test3.do.txt to html
output in mako_test3.html
+ '[' 0 -ne 0 ']'
+ system doconce format html mako_test4 --no_pygments_html
+ doconce format html mako_test4 --no_pygments_html
running mako on mako_test4.do.txt to make tmp_mako__mako_test4.do.txt
translating doconce text in tmp_mako__mako_test4.do.txt to html
output in mako_test4.html
+ '[' 0 -ne 0 ']'
+ system doconce csv2table testtable.csv
+ doconce csv2table testtable.csv
+ '[' 0 -ne 0 ']'
+ doconce format plain failures
translating doconce text in failures.do.txt to plain

Syntax error: Must have a plain sentence before
a code block like !bc/!bt/@@@CODE, not a section/paragraph heading,
table, or comment:
fore code is caught by the syntax check ===
 

!bc
more verbatime stuff
!ec

Next we see if backslashes are detected: \\
Abort! (add --no_abort on the command line to avoid this abortion)
+ cp failures.do.txt tmp2.do.txt
+ doconce subst 'failure\}\n\n!bc' 'failure}\n\nHello\n!bc' tmp2.do.txt
failure\}\n\n!bc replaced by failure}\n\nHello\n!bc in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Must have a plain sentence before
a code block like !bc/!bt/@@@CODE, not a section/paragraph heading,
table, or comment:
ybook}.

__Paragraph before code is bad.__



!bc
More verbatim stuff.
!ec

Can we successfully say `__call__` and `__ad
Abort! (add --no_abort on the command line to avoid this abortion)
+ doconce replace '\label' label tmp2.do.txt
replacing \label by label in tmp2.do.txt
+ doconce replace '\idx' idx tmp2.do.txt
replacing \idx by idx in tmp2.do.txt
+ doconce replace '\cite' cite tmp2.do.txt
replacing \cite by cite in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Must have a plain sentence before
a code block like !bc/!bt/@@@CODE, not a section/paragraph heading,
table, or comment:
ybook}.

__Paragraph before code is bad.__



!bc
More verbatim stuff.
!ec

Can we successfully say `__call__` and `__ad
Abort! (add --no_abort on the command line to avoid this abortion)
+ doconce subst -s '__Paragraph before.+!bc' '!bc' tmp2.do.txt
__Paragraph before.+!bc replaced by !bc in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Line before list, !bc, !bt or @@@CODE block is a comment line
which will "swallow" the block in reST format.
Insert some extra line (text) to separate the two elements.

# Comment before list

 * A1
 * A2

Normal text.




Abort! (add --no_abort on the command line to avoid this abortion)
+ doconce replace 'streamtubes width' 'streamtubes,  width' tmp2.do.txt
replacing streamtubes width by streamtubes,  width in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Line before list, !bc, !bt or @@@CODE block is a comment line
which will "swallow" the block in reST format.
Insert some extra line (text) to separate the two elements.

# Comment before list

 * A1
 * A2

Normal text.




Abort! (add --no_abort on the command line to avoid this abortion)
+ doconce replace '# Comment before math' '' tmp2.do.txt
replacing # Comment before math by  in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Line before list, !bc, !bt or @@@CODE block is a comment line
which will "swallow" the block in reST format.
Insert some extra line (text) to separate the two elements.

# Comment before list

 * A1
 * A2

Normal text.




Abort! (add --no_abort on the command line to avoid this abortion)
+ doconce replace '# Comment before list' '' tmp2.do.txt
replacing # Comment before list by  in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format rst
*** warning: you have citations but no bibliography (BIBFILE: ...)
output in tmp2.rst
+ doconce replace '`Google`' '`Google` site' tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format rst
*** warning: you have citations but no bibliography (BIBFILE: ...)
output in tmp2.rst
+ echo

+ echo 'When we reach this point in the script,'
When we reach this point in the script,
+ echo 'it is clearly a successful run of all tests!'
it is clearly a successful run of all tests!

+ sh ./clean.sh
Removing in /home/hpl/vc/doconce/doc/quickref:
+ doconce
+ doconce format html quickref --no_pygments_html --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to html
copy complete file doconce_program.sh  (format: shpro)
output in quickref.html
+ doconce format latex quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to latex
copy complete file doconce_program.sh  (format: shpro)
output in quickref.p.tex
+ doconce ptex2tex quickref -DMINTED -DHELVETICA envir=Verbatim
\bshpro (!bc shpro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95,xleftmargin=0mm]
\bcod (!bc cod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95,xleftmargin=0mm]
\bsys (!bc sys) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95,xleftmargin=0mm]
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.95,xleftmargin=0mm]
output in quickref.tex
+ latex -shell-escape quickref.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./quickref.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty




(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty



(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/usr/share/texlive/texmf-dist/tex/latex/media9/media9.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty
























(/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty



(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./quickref.w18))/usr/local/bin/pygmentize
) (./quickref.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def




(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty

(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty

(/usr/share/texmf/tex/generic/pgf/utilities/pgfutil-latex.def


(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-dvips.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/mdframed/md-frame-1.mdf
)) 
Writing index file quickref.idx
No file quickref.aux.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty


Package hyperref Warning: Rerun to get /PageLabels entry.

ABD: EveryShipout initializing macros






Package hyperref Warning: old toc file detected, not used; run LaTeX again.

 [1]
Overfull \hbox (119.75502pt too wide) 
\OT1/phv/m/n/10 Edit-ing Mode" in Emacs. Store the file in the home di-rec-tory
 and add []
[2]
Overfull \hbox (19.14615pt too wide) 
\OT1/phv/m/n/10 Note that ab-stracts are rec-og-nized by start-ing with [] or [
]
[3] [4]
Overfull \hbox (29.09346pt too wide) 
[]\OT1/phv/m/n/10 Large por-tions of text can be left out us-ing Pre-pro-cess. 
Just place []
[5]
Overfull \hbox (4.40137pt too wide) 
\OT1/phv/m/n/10 fi-ca-tion copies from the first line match-ing the \OT1/phv/m/
sl/10 reg-u-lar ex-pres-sion []

Overfull \hbox (25.94281pt too wide) 
\OT1/phv/m/n/10 up to, but not in-clud-ing the line match-ing the \OT1/phv/m/sl
/10 reg-u-lar ex-pres-sion []\OT1/phv/m/n/10 .
[6] [7] [8]

LaTeX Warning: Reference `quick:sections' on page 9 undefined on input line 716
.

[9]
Overfull \hbox (59.2456pt too wide) 
\OT1/phv/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have []
 on the form [],

Overfull \hbox (20.06894pt too wide) 
[]\OT1/phv/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line [], where []
[10]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

[11] [12] [13] [14]
Overfull \hbox (3.50804pt too wide) 
\OT1/phv/m/n/10 Doconce en-vi-ron-ments start with []benvirname! and end with [
]eenvirname!, where
[15]
Overfull \hbox (0.45856pt too wide) 
\OT1/phv/m/n/10 Doconce doc-u-ments may uti-lize a pre-pro-ces-sor, ei-ther [] 
and/or [].

Overfull \hbox (86.48466pt too wide) 
[]\OT1/phv/m/n/10 Excellent "Sphinx Tu-to-rial" by C. Reller: "http://people.ee
.ethz.ch/ creller/web/tricks/reST.html" 
[16]
No file quickref.ind.
[17] (./quickref.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
   dvips.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
dvipsnam.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  media9.sty    2012/05/02 v0.7 acrobat-9 compatible media
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
l3keys2e.sty    2012/04/23 v3570 LaTeX2e option processing using LaTeX3 keys
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
quickref.w18
quickref.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  helvet.sty    2005/04/12 PSNFSS-v9.2a (WaS) 
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
  hdvips.def    2012/05/13 v6.82q Hyperref driver for dvips
 pdfmark.def    2012/05/13 v6.82q Hyperref definitions for pdfmark specials
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
mdframed.sty    2012/04/08 v1.5: mdframed
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
  ot1phv.fd    2001/06/04 scalable font definitions for OT1/phv.
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
  omsphv.fd    
 ***********


Package rerunfilecheck Warning: File `quickref.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.dvi (17 pages, ).
Transcript written on quickref.log.
+ latex -shell-escape quickref.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./quickref.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty




(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty



(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/usr/share/texlive/texmf-dist/tex/latex/colortbl/colortbl.sty


(/usr/share/texlive/texmf-dist/tex/latex/microtype/microtype.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/usr/share/texlive/texmf-dist/tex/latex/media9/media9.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/expl3.sty
(/usr/share/texlive/texmf-dist/tex/latex/l3kernel/l3names.sty
























(/home/hpl/texmf/tex/latex/misc/minted.sty



(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty



(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./quickref.w18))/usr/local/bin/pygmentize
) (./quickref.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def




(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def


(/usr/share/texlive/texmf-dist/tex/latex/mdframed/mdframed.sty

(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-abspage.sty
(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/zref-base.sty

(/usr/share/texmf/tex/latex/pgf/frontendlayer/tikz.sty
(/usr/share/texmf/tex/latex/pgf/basiclayer/pgf.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfrcs.sty

(/usr/share/texmf/tex/generic/pgf/utilities/pgfutil-latex.def


(/usr/share/texmf/tex/latex/pgf/basiclayer/pgfcore.sty
(/usr/share/texmf/tex/latex/pgf/systemlayer/pgfsys.sty
(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys.code.tex
(/usr/share/texmf/tex/generic/pgf/utilities/pgfkeys.code.tex


(/usr/share/texmf/tex/generic/pgf/systemlayer/pgfsys-dvips.def



(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcore.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmath.code.tex
(/usr/share/texmf/tex/generic/pgf/math/pgfmathcalc.code.tex


(/usr/share/texmf/tex/generic/pgf/math/pgfmathfunctions.code.tex



















(/usr/share/texmf/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex








(/usr/share/texmf/tex/latex/pgf/utilities/pgffor.sty
(/usr/share/texmf/tex/latex/pgf/utilities/pgfkeys.sty


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex


(/usr/share/texmf/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopat
hs.code.tex))) (/usr/share/texlive/texmf-dist/tex/latex/mdframed/md-frame-1.mdf
)) 
Writing index file quickref.idx
(./quickref.aux) 
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./quickref.out) (./quickref.out) ABD: EveryShipout initializing macros





[1] 
Overfull \hbox (119.75502pt too wide) 
\OT1/phv/m/n/10 Edit-ing Mode" in Emacs. Store the file in the home di-rec-tory
 and add []
[2] [3]
Overfull \hbox (19.14615pt too wide) 
\OT1/phv/m/n/10 Note that ab-stracts are rec-og-nized by start-ing with [] or [
]
[4]
Overfull \hbox (29.09346pt too wide) 
[]\OT1/phv/m/n/10 Large por-tions of text can be left out us-ing Pre-pro-cess. 
Just place []
[5] [6]
Overfull \hbox (4.40137pt too wide) 
\OT1/phv/m/n/10 fi-ca-tion copies from the first line match-ing the \OT1/phv/m/
sl/10 reg-u-lar ex-pres-sion []

Overfull \hbox (25.94281pt too wide) 
\OT1/phv/m/n/10 up to, but not in-clud-ing the line match-ing the \OT1/phv/m/sl
/10 reg-u-lar ex-pres-sion []\OT1/phv/m/n/10 .
[7] [8] [9] [10]
Overfull \hbox (59.2456pt too wide) 
\OT1/phv/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have []
 on the form [],

Overfull \hbox (20.06894pt too wide) 
[]\OT1/phv/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line [], where []
[11]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

[12] [13] [14] [15]
Overfull \hbox (3.50804pt too wide) 
\OT1/phv/m/n/10 Doconce en-vi-ron-ments start with []benvirname! and end with [
]eenvirname!, where
[16]
Overfull \hbox (0.45856pt too wide) 
\OT1/phv/m/n/10 Doconce doc-u-ments may uti-lize a pre-pro-ces-sor, ei-ther [] 
and/or [].

Overfull \hbox (86.48466pt too wide) 
[]\OT1/phv/m/n/10 Excellent "Sphinx Tu-to-rial" by C. Reller: "http://people.ee
.ethz.ch/ creller/web/tricks/reST.html" 
[17]
No file quickref.ind.
[18] (./quickref.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
   dvips.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
dvipsnam.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
setspace.sty    2011/12/19 v6.7a set line spacing
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
colortbl.sty    2012/02/13 v1.0a Color table columns (DPC)
   array.sty    2008/09/09 v2.4c Tabular extension package (FMi)
      bm.sty    2004/02/26 v1.1c Bold Symbol Support (DPC/FMi)
microtype.sty    2010/01/10 v2.4 Micro-typography with pdfTeX (RS)
microtype.cfg    2010/01/10 v2.4 microtype main configuration file (RS)
fancyvrb.sty    2008/02/07
  media9.sty    2012/05/02 v0.7 acrobat-9 compatible media
   expl3.sty    2012/04/23 v3570 L3 Experimental code bundle wrapper
 l3names.sty    2012/03/04 v3494 L3 Experimental namespace for primitives
l3bootstrap.sty    2011/12/29 v3110 L3 Experimental bootstrap code
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2012/03/04 v3491 L3 Experimental basic definitions
 l3expan.sty    2012/02/26 v3460 L3 Experimental argument expansion
    l3tl.sty    2012/03/04 v3490 L3 Experimental token lists
   l3seq.sty    2012/03/04 v3490 L3 Experimental sequences and stacks
   l3int.sty    2012/03/04 v3490 L3 Experimental integers
 l3quark.sty    2012/02/12 v3384 L3 Experimental quarks
   l3prg.sty    2012/03/04 v3490 L3 Experimental control structures
 l3clist.sty    2012/03/04 v3490 L3 Experimental comma separated lists
 l3token.sty    2012/03/04 v3491 L3 Experimental token manipulation
  l3prop.sty    2012/03/04 v3490 L3 Experimental property lists
   l3msg.sty    2012/04/23 v3568 L3 Experimental messages
  l3file.sty    2012/03/09 v3520 L3 Experimental file and I/O operations
  l3skip.sty    2012/03/05 v3499 L3 Experimental dimensions and skips
  l3keys.sty    2012/03/03 v3487 L3 Experimental key-value interfaces
    l3fp.sty    2012/03/04 v3490 L3 Experimental floating-point operations
   l3box.sty    2012/03/04 v3490 L3 Experimental boxes
l3coffins.sty    2012/03/03 v3482 L3 Experimental coffin code layer
 l3color.sty    2011/09/07 v2776 L3 Experimental colour support
l3luatex.sty    2012/02/09 v3355 L3 Experimental LuaTeX-specific functions
  xparse.sty    2012/04/23 v3570 L3 Experimental document command parser
l3keys2e.sty    2012/04/23 v3570 LaTeX2e option processing using LaTeX3 keys
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
quickref.w18
quickref.pyg
inputenc.sty    2008/03/30 v1.1d Input encoding file
    utf8.def    2008/04/05 v1.1m UTF-8 support for inputenc
   t1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  ot1enc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  omsenc.dfu    2008/04/05 v1.1m UTF-8 support for inputenc
  helvet.sty    2005/04/12 PSNFSS-v9.2a (WaS) 
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
  hdvips.def    2012/05/13 v6.82q Hyperref driver for dvips
 pdfmark.def    2012/05/13 v6.82q Hyperref definitions for pdfmark specials
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
mdframed.sty    2012/04/08 v1.5: mdframed
etoolbox.sty    2011/01/03 v2.1 e-TeX tools for LaTeX
zref-abspage.sty    2012/04/04 v2.24 Module abspage for zref (HO)
zref-base.sty    2012/04/04 v2.24 Module base for zref (HO)
 auxhook.sty    2011/03/04 v1.3 Hooks for auxiliary files (HO)
    tikz.sty    2010/10/13 v2.10 (rcs-revision 1.76)
     pgf.sty    2008/01/15 v2.10 (rcs-revision 1.12)
  pgfrcs.sty    2010/10/25 v2.10 (rcs-revision 1.24)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  pgfrcs.code.tex
 pgfcore.sty    2010/04/11 v2.10 (rcs-revision 1.7)
  pgfsys.sty    2010/06/30 v2.10 (rcs-revision 1.37)
  pgfsys.code.tex
pgfsyssoftpath.code.tex    2008/07/18  (rcs-revision 1.7)
pgfsysprotocol.code.tex    2006/10/16  (rcs-revision 1.4)
 pgfcore.code.tex
pgfcomp-version-0-65.sty    2007/07/03 v2.10 (rcs-revision 1.7)
pgfcomp-version-1-18.sty    2007/07/23 v2.10 (rcs-revision 1.1)
  pgffor.sty    2010/03/23 v2.10 (rcs-revision 1.18)
 pgfkeys.sty    
 pgfkeys.code.tex
  pgffor.code.tex
    tikz.code.tex
md-frame-1.mdf    2012/04/08  v1.5: md-frame-1
titlesec.sty    2011/12/15 v2.10.0 Sectioning titles
  ot1phv.fd    2001/06/04 scalable font definitions for OT1/phv.
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
quickref.out
quickref.out
  mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
RS)
    umsa.fd    2009/06/22 v3.00 AMS symbols A
  mt-msa.cfg    2006/02/04 v1.1 microtype config. file: AMS symbols (a) (RS)
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  mt-msb.cfg    2005/06/01 v1.0 microtype config. file: AMS symbols (b) (RS)
  omsphv.fd    
 ***********


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.dvi (18 pages, ).
Transcript written on quickref.log.
+ dvipdf quickref.dvi
+ doconce format sphinx quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to sphinx
copy complete file doconce_program.sh  (format: shpro)
output in quickref.rst
+ rm -rf sphinx-rootdir
+ doconce sphinx_dir author=HPL version=0.7 quickref
Making sphinx-rootdir
Welcome to the Sphinx 1.2pre quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]: 
You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: 
Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]: 
The project name will occur in several places in the built documentation.
> Project name: > Author name(s): 
Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don't need this dual structure,
just set both to the same value.
> Project version: > Project release [0.7]: 
The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]: * Please enter a file suffix, e.g. '.rst' or '.txt'.
> Source file suffix [.rst]: 
One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]: 
Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: 
Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: > doctest: automatically test code snippets in doctest blocks (y/N) [n]: > intersphinx: link between Sphinx documentation of different projects (y/N) [n]: > todo: write "todo" entries that can be shown or hidden on build (y/N) [n]: > coverage: checks for documentation coverage (y/N) [n]: > pngmath: include math, rendered as PNG images (y/N) [n]: > mathjax: include math, rendered in the browser by MathJax (y/N) [n]: > ifconfig: conditional inclusion of content based on config values (y/N) [n]: > viewcode: include links to the source code of documented Python objects (y/N) [n]: 
A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: > Create Windows command file? (Y/n) [y]: 
Creating file sphinx-rootdir/conf.py.
Creating file sphinx-rootdir/index.rst.
Creating file sphinx-rootdir/Makefile.
Creating file sphinx-rootdir/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file sphinx-rootdir/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

searching for TITLE in quickref.do.txt
Using title "Doconce Quick Reference" from quickref
Using title "On an Ultimate Markup Language" from quickref
title: On an Ultimate Markup Language
author: HPL
theme: default
These Sphinx themes were found: ADCtheme, agni, agogo, basic, basicstrap, bootstrap, cbc, classy, cloud, default, epub, fenics, fenics_minimal, flask, haiku, impressjs, jal, nature, pylons, pyramid, redcloud, scipy_lectures, scrolls, slim-agogo, solarized, sphinxdoc, traditional, vlinux-theme, default

'automake_sphinx.py' contains the steps to (re)compile the sphinx
version. You may want to edit this file, or run the steps manually,
or just run it by

  python automake_sphinx.py

+ doconce replace 'doconce format sphinx %s' 'doconce format sphinx %s --no-preprocess' automake_sphinx.py
replacing doconce format sphinx %s by doconce format sphinx %s --no-preprocess in automake_sphinx.py
+ python automake_sphinx.py
rm -rf _build/*
sphinx-build -b html -d _build/doctrees   . _build/html
Making output directory...
Running Sphinx v1.2pre
loading pickled environment... not yet created
building [html]: targets for 2 source files that are out of date
updating environment: 2 added, 0 changed, 0 removed
reading sources... [ 50%] index
reading sources... [100%] quickref

looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [ 50%] index
writing output... [100%] quickref

writing additional files... (0 module code pages) genindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.

Build finished. The HTML pages are in _build/html.
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in search.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in search.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in quickref.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in quickref.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in genindex.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in genindex.html
<title>(.+?) &mdash;.+?</title> replaced by <title>\g<1></title> in index.html
replacing </head> by 
   <style type=text/css>
     div.admonition {
       background-color: whiteSmoke;
       border: 1px solid #bababa;
     }
   </style>
  </head>
 in index.html
/home/hpl/vc/doconce/doc/quickref/sphinx-rootdir
running make clean
running make html
Fix generated files:

google-chrome sphinx-rootdir/_build/html/index.html

+ cp quickref.rst quickref.sphinx.rst
+ doconce format rst quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to rst
copy complete file doconce_program.sh  (format: shpro)
output in quickref.rst
+ rst2xml.py quickref.rst
+ rst2odt.py quickref.rst
+ rst2html.py quickref.rst
+ rst2latex.py quickref.rst
+ latex quickref.rst.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 restricted \write18 enabled.
entering extended mode
(./quickref.rst.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class


(/usr/share/texlive/texmf-dist/tex/latex/cmap/cmap.sty

Package cmap Warning: pdftex in DVI mode - exiting.

) 
(/usr/share/texlive/texmf-dist/tex/latex/base/fontenc.sty

(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def







(/usr/share/texlive/texmf-dist/tex/latex/psnfss/helvet.sty


(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def

No file quickref.rst.aux.

(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty


Package hyperref Warning: Rerun to get /PageLabels entry.


Package hyperref Warning: old toc file detected, not used; run LaTeX again.


Overfull \hbox (4.55762pt too wide) 
\T1/ptm/m/n/10 HTML. Other out-lets in-clude Google's \T1/pcr/m/n/10 blogger.co
m\T1/ptm/m/n/10 , Wikipedia/Wikibooks, IPython
 [1]
Overfull \hbox (455.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: H. P. Langtangen at Center for Biomedical Computing, S
imula Research Laboratory & Dept. of Informatics, Univ. of Oslo  

Overfull \hbox (143.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cybe
rspace Inc.  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 name Email: somename@adr.net at institution1 & institution2 

Overfull \hbox (4.50082pt too wide) in alignment at lines 339--347
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 347--355
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 355--357
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 357--358
 [] [] 

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ========= Heading ========

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ======= Appendix: heading

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ===== Appendix: heading

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ======= Exercise: heading

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ===== Exercise: heading

Overfull \hbox (4.50082pt too wide) in alignment at lines 358--419
 [] [] 
[2]
Overfull \hbox (15.61775pt too wide) 
\T1/ptm/m/n/10 Note that ab-stracts are rec-og-nized by start-ing with \T1/pcr/
m/n/10 __Abstract.__ \T1/ptm/m/n/10 or \T1/pcr/m/n/10 __Summary.__

Overfull \hbox (27.20697pt too wide) 
\T1/ptm/m/it/10 sized words\T1/ptm/m/n/10 . Sim-i-larly, an un-der-score sur-ro
unds words that ap-pear in bold-face: \T1/pcr/m/n/10 _boldface_

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 Note that sublists are consistently indented by one or more bl
anks..  
[3]
Overfull \hbox (17.00006pt too wide) 
[] \T1/pcr/m/n/10 - keyword3: and its description may fit on one line 
[4]
Overfull \hbox (35.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html mydoc.do.txt --skip_inline_comments 
[5]
Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=
console 

Overfull \hbox (5.00006pt too wide) 
[]    \T1/pcr/m/n/10 return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z) 

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce spl
it_rst  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce sp
lit_rst 

Overfull \hbox (6.12766pt too wide) 
\T1/ptm/m/n/10 to, but not in-clud-ing the line match-ing the \T1/ptm/m/it/10 r
eg-u-lar ex-pres-sion \T1/pcr/m/n/10 ^doconce split_rst\T1/ptm/m/n/10 .

Overfull \hbox (8.347pt too wide) 
\T1/ptm/m/n/10 cess-ful out-put in re-Struc-tred-Text), not di-rectly af-ter a 
sec-tion/paragraph
[6]
Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\]  

Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\] 

Overfull \hbox (12.58893pt too wide) 
[]\T1/ptm/m/n/10 Use only the equa-tion en-vi-ron-ments \T1/pcr/m/n/10 \[\T1/pt
m/m/n/10 , \T1/pcr/m/n/10 \]\T1/ptm/m/n/10 , \T1/pcr/m/n/10 equation\T1/ptm/m/n
/10 , \T1/pcr/m/n/10 equation*\T1/ptm/m/n/10 ,




 [7]
Overfull \hbox (41.00006pt too wide) 
\T1/pcr/m/n/10 Here is some "some link text": "http://some.net/address"  

Overfull \hbox (5.00006pt too wide) 
[]\T1/pcr/m/n/10 or just the raw address: URL: "http://google.com".  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 Links to files typeset in verbatim mode applies backtics:  

Overfull \hbox (29.00006pt too wide) 
[]\T1/pcr/m/n/10 "`myfile.py`": "http://some.net/some/place/myfile.py".  

Overfull \hbox (503.00006pt too wide) 
\T1/pcr/m/n/10 FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here g
oes the caption which must be on a single line. label{some:fig:label}  

Overfull \hbox (437.00006pt too wide) 
[]\T1/pcr/m/n/10 MOVIE: [relative/path/to/moviefile, width=500] Here goes the c
aption which must be on a single line. label{some:fig:label} 
[8]
Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce combine_images image1 image2 ... output_image 

Overfull \hbox (233.00006pt too wide) 
\T1/pcr/m/n/10 MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 he
ight=315] YouTube movie.  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo
 movie. 

LaTeX Warning: Hyper reference `section-types' on page 9 undefined on input lin
e 998.


Overfull \hbox (107.00006pt too wide) 
\T1/pcr/m/n/10 |----------------c--------|------------------c------------------
--|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |      Section type       |        Syntax                     
    |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |----------------l--------|------------------l----------------
----|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | chapter                 | `========= Heading ========` (9 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | section                 | `======= Heading =======`    (7 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsection              | `===== Heading =====`        (5 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsubsection           | `=== Heading ===`            (3 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | paragraph               | `__Heading.__`               (2 `_
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |-------------------------------------------------------------
----| 
[9]
Overfull \hbox (54.34767pt too wide) 
\T1/ptm/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have \T1
/pcr/m/n/10 name \T1/ptm/m/n/10 on the form \T1/pcr/m/n/10 Author1_Author2_YYYY
\T1/ptm/m/n/10 ,

Overfull \hbox (26.41858pt too wide) 
[]\T1/ptm/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line \T1/pcr/m/n/10 B
IBFILE: papers.pub\T1/ptm/m/n/10 , where \T1/pcr/m/n/10 papers.pub
[10]
Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section": 
 

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 "A Document for Testing Doconce": "testdoc.html" cite{testdoc:
12}],  

Overfull \hbox (2969.00006pt too wide) 
[]\T1/pcr/m/n/10 commands: format help sphinx_dir subst replace replace_from_fi
le clean spellcheck ptex2tex expand_commands combine_images guess_encoding chan
ge_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_ex
ercise_answers split_rst split_html slides_html slides_beamer latin2html latex_
header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_loca
lURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format lat
ex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish c
sv2table  

Overfull \hbox (299.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwik
i|cwiki|pandoc|st|epytext file.do.txt  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # substitute a phrase by another using regular expressions  

Overfull \hbox (197.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce subst [-s -m -x --restore] regex-pattern regex-replace
ment file1 file2 ...  
[11]
Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier
,  

Overfull \hbox (143.00006pt too wide) 
[] \T1/pcr/m/n/10 -x is the re.VERBOSE modifier, --restore copies backup files 
back again)  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 # doconce replace using from and to phrases from file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce replace_from_file file-with-from-to file1 file2 ...  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 (exact text substitution, but a set of from-to relations)  

Overfull \hbox (95.00006pt too wide) 
[]\T1/pcr/m/n/10 # gwiki format requires substitution of figure file names by U
RLs  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce sphinx_dir author='John Doe' title='Long title' \  

Overfull \hbox (53.00006pt too wide) 
[]    \T1/pcr/m/n/10 dirname=sphinx-rootdir theme=default logo=mylogo.png \  

Overfull \hbox (29.00006pt too wide) 
[]\T1/pcr/m/n/10 # replace latex-1 (non-ascii) characters by html codes  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 # walk through a directory tree and insert doconce files as  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 # remove all files that the doconce format can regenerate  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform a .bbl file to a .rst file with reST bibliography 
format  
[12]
Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce split_rst complete_file        # !split delimiters  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 # edit URLs to local files and place them in _static  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 # split an html file into parts according to !split commands  


Overfull \hbox (95.00006pt too wide) 
[]\T1/pcr/m/n/10 # create LaTeX Beamer slides from a (doconce) latex/pdflatex f
ile  

Overfull \hbox (11.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce html_colorbullets file1.html file2.html ...  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce grab   --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce remove --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform ptex2tex files (.p.tex) to ordinary latex file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \  

Overfull \hbox (107.00006pt too wide) 
[]        \T1/pcr/m/n/10 dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{q
uote}  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 # make HTML file via pandoc from Markdown (.md) file  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 # make LaTeX file via pandoc from Markdown (.md) file  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce combine_images image1 image2 ... output_file  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # insert a table of exercises in a latex file myfile.p.tex  
[13]
Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 # list all labels in a document (for purposes of cleaning them
 up)  

Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 # translate a latex document to doconce (requires usually manu
al fixing)  

Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 # check if there are problems with translating latex to doconc
e  

Overfull \hbox (179.00006pt too wide) 
[]\T1/pcr/m/n/10 # typeset a doconce document with pygments (for pretty print o
f doconce itself)  

Overfull \hbox (167.00006pt too wide) 
[]\T1/pcr/m/n/10 # generate a make.sh script for translating a doconce file to 
various formats  

Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce makefile docname doconcefile [html sphinx pdflatex ...
]  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 # fix common problems in bibtex files for publish import  

Overfull \hbox (5.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce fix_bibtex4publish file1.bib file2.bib ...  

Overfull \hbox (131.00006pt too wide) 
[]\T1/pcr/m/n/10 (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diff
use, ...)  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 # find differences between the last two Git versions of severa
l files  
[14]
Overfull \hbox (101.00006pt too wide) 
\T1/pcr/m/n/10 ===== Problem: Derive the Formula for the Area of an Ellipse ===
==  

Overfull \hbox (77.00006pt too wide) 
[]\T1/pcr/m/n/10 Derive an expression for the area of an ellipse by integrating
  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 the area under a curve that defines half of the allipse.  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 "Wolframalpha": "http://wolframalpha.com" can perhaps  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 ===== {Problem}: Derive the Formula for the Area of an Ellipse
 ===== 

Overfull \hbox (41.00006pt too wide) 
\T1/pcr/m/n/10 ===== Exercise: Determine the Distance to the Moon =====  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 Intro to this exercise. Questions are in subexercises below.  

[15]
Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 At the very end of the exercise it may be appropriate to summa
rize  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 and give some perspectives. The text inside the !bremarks-!ere
marks  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 directives is always typeset at the end of the exercise.  

Overfull \hbox (2.38828pt too wide) 
\T1/ptm/m/n/10 Doconce en-vi-ron-ments start with \T1/pcr/m/n/10 !benvirname \T
1/ptm/m/n/10 and end with \T1/pcr/m/n/10 !eenvirname\T1/ptm/m/n/10 , where

Overfull \hbox (47.10902pt too wide) 
[]
[16]
Overfull \hbox (263.00006pt too wide) 
[]\T1/pcr/m/n/10 \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \mul
ticolumn{1}{c}{acceleration} \\  

Overfull \hbox (4.19656pt too wide) 
[][][][][][] \T1/ptm/m/n/10 con-tains some il-lus-tra-tions on how to uti-lize 
\T1/pcr/m/n/10 mako \T1/ptm/m/n/10 (clone the GitHub

Overfull \hbox (114.855pt too wide) 
[]\T1/ptm/m/n/10 Excellent ``Sphinx Tu-to-rial'' by C. Reller: ``[][][][][][]''
 
[17] (./quickref.rst.aux)

Package rerunfilecheck Warning: File `quickref.rst.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.rst.dvi (17 pages, ).
Transcript written on quickref.rst.log.
+ latex quickref.rst.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 restricted \write18 enabled.
entering extended mode
(./quickref.rst.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class


(/usr/share/texlive/texmf-dist/tex/latex/cmap/cmap.sty

Package cmap Warning: pdftex in DVI mode - exiting.

) 
(/usr/share/texlive/texmf-dist/tex/latex/base/fontenc.sty

(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def







(/usr/share/texlive/texmf-dist/tex/latex/psnfss/helvet.sty


(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def

(./quickref.rst.aux) 
(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./quickref.rst.out) (./quickref.rst.out) (./quickref.rst.toc)

Overfull \hbox (4.55762pt too wide) 
\T1/ptm/m/n/10 HTML. Other out-lets in-clude Google's \T1/pcr/m/n/10 blogger.co
m\T1/ptm/m/n/10 , Wikipedia/Wikibooks, IPython
[1]  [2]
Overfull \hbox (455.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: H. P. Langtangen at Center for Biomedical Computing, S
imula Research Laboratory & Dept. of Informatics, Univ. of Oslo  

Overfull \hbox (143.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cybe
rspace Inc.  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 name Email: somename@adr.net at institution1 & institution2 

Overfull \hbox (4.50082pt too wide) in alignment at lines 339--347
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 347--355
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 355--357
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 357--358
 [] [] 

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ========= Heading ========

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ======= Appendix: heading

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ===== Appendix: heading

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ======= Exercise: heading

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ===== Exercise: heading

Overfull \hbox (4.50082pt too wide) in alignment at lines 358--419
 [] [] 
[3]
Overfull \hbox (15.61775pt too wide) 
\T1/ptm/m/n/10 Note that ab-stracts are rec-og-nized by start-ing with \T1/pcr/
m/n/10 __Abstract.__ \T1/ptm/m/n/10 or \T1/pcr/m/n/10 __Summary.__

Overfull \hbox (27.20697pt too wide) 
\T1/ptm/m/it/10 sized words\T1/ptm/m/n/10 . Sim-i-larly, an un-der-score sur-ro
unds words that ap-pear in bold-face: \T1/pcr/m/n/10 _boldface_

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 Note that sublists are consistently indented by one or more bl
anks..  
[4]
Overfull \hbox (17.00006pt too wide) 
[] \T1/pcr/m/n/10 - keyword3: and its description may fit on one line 
[5]
Overfull \hbox (35.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html mydoc.do.txt --skip_inline_comments 
[6]
Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=
console 

Overfull \hbox (5.00006pt too wide) 
[]    \T1/pcr/m/n/10 return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z) 

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce spl
it_rst  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce sp
lit_rst 

Overfull \hbox (6.12766pt too wide) 
\T1/ptm/m/n/10 to, but not in-clud-ing the line match-ing the \T1/ptm/m/it/10 r
eg-u-lar ex-pres-sion \T1/pcr/m/n/10 ^doconce split_rst\T1/ptm/m/n/10 .

Overfull \hbox (8.347pt too wide) 
\T1/ptm/m/n/10 cess-ful out-put in re-Struc-tred-Text), not di-rectly af-ter a 
sec-tion/paragraph
[7]
Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\]  

Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\] 

Overfull \hbox (12.58893pt too wide) 
[]\T1/ptm/m/n/10 Use only the equa-tion en-vi-ron-ments \T1/pcr/m/n/10 \[\T1/pt
m/m/n/10 , \T1/pcr/m/n/10 \]\T1/ptm/m/n/10 , \T1/pcr/m/n/10 equation\T1/ptm/m/n
/10 , \T1/pcr/m/n/10 equation*\T1/ptm/m/n/10 ,




 [8]
Overfull \hbox (41.00006pt too wide) 
\T1/pcr/m/n/10 Here is some "some link text": "http://some.net/address"  

Overfull \hbox (5.00006pt too wide) 
[]\T1/pcr/m/n/10 or just the raw address: URL: "http://google.com".  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 Links to files typeset in verbatim mode applies backtics:  

Overfull \hbox (29.00006pt too wide) 
[]\T1/pcr/m/n/10 "`myfile.py`": "http://some.net/some/place/myfile.py".  

Overfull \hbox (503.00006pt too wide) 
\T1/pcr/m/n/10 FIGURE: [relative/path/to/figurefile, width=500 frac=0.8] Here g
oes the caption which must be on a single line. label{some:fig:label}  

Overfull \hbox (437.00006pt too wide) 
[]\T1/pcr/m/n/10 MOVIE: [relative/path/to/moviefile, width=500] Here goes the c
aption which must be on a single line. label{some:fig:label} 
[9]
Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce combine_images image1 image2 ... output_image 

Overfull \hbox (233.00006pt too wide) 
\T1/pcr/m/n/10 MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 he
ight=315] YouTube movie.  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 MOVIE: [http://vimeo.com/55562330, width=500 height=278] Vimeo
 movie. 

Overfull \hbox (107.00006pt too wide) 
\T1/pcr/m/n/10 |----------------c--------|------------------c------------------
--|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |      Section type       |        Syntax                     
    |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |----------------l--------|------------------l----------------
----|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | chapter                 | `========= Heading ========` (9 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | section                 | `======= Heading =======`    (7 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsection              | `===== Heading =====`        (5 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsubsection           | `=== Heading ===`            (3 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | paragraph               | `__Heading.__`               (2 `_
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |-------------------------------------------------------------
----| 
[10]
Overfull \hbox (54.34767pt too wide) 
\T1/ptm/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have \T1
/pcr/m/n/10 name \T1/ptm/m/n/10 on the form \T1/pcr/m/n/10 Author1_Author2_YYYY
\T1/ptm/m/n/10 ,

Overfull \hbox (26.41858pt too wide) 
[]\T1/ptm/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line \T1/pcr/m/n/10 B
IBFILE: papers.pub\T1/ptm/m/n/10 , where \T1/pcr/m/n/10 papers.pub
[11]
Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section": 
 

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 "A Document for Testing Doconce": "testdoc.html" cite{testdoc:
12}],  

Overfull \hbox (2969.00006pt too wide) 
[]\T1/pcr/m/n/10 commands: format help sphinx_dir subst replace replace_from_fi
le clean spellcheck ptex2tex expand_commands combine_images guess_encoding chan
ge_encoding gwiki_figsubst md2html remove_inline_comments grab remove remove_ex
ercise_answers split_rst split_html slides_html slides_beamer latin2html latex_
header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_loca
lURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format lat
ex2doconce latex_dislikes pygmentize makefile diff gitdiff fix_bibtex4publish c
sv2table  

Overfull \hbox (299.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwik
i|cwiki|pandoc|st|epytext file.do.txt  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # substitute a phrase by another using regular expressions  

Overfull \hbox (197.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce subst [-s -m -x --restore] regex-pattern regex-replace
ment file1 file2 ...  
[12]
Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier
,  

Overfull \hbox (143.00006pt too wide) 
[] \T1/pcr/m/n/10 -x is the re.VERBOSE modifier, --restore copies backup files 
back again)  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 # doconce replace using from and to phrases from file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce replace_from_file file-with-from-to file1 file2 ...  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 (exact text substitution, but a set of from-to relations)  

Overfull \hbox (95.00006pt too wide) 
[]\T1/pcr/m/n/10 # gwiki format requires substitution of figure file names by U
RLs  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce sphinx_dir author='John Doe' title='Long title' \  

Overfull \hbox (53.00006pt too wide) 
[]    \T1/pcr/m/n/10 dirname=sphinx-rootdir theme=default logo=mylogo.png \  

Overfull \hbox (29.00006pt too wide) 
[]\T1/pcr/m/n/10 # replace latex-1 (non-ascii) characters by html codes  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 # walk through a directory tree and insert doconce files as  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 # remove all files that the doconce format can regenerate  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform a .bbl file to a .rst file with reST bibliography 
format  
[13]
Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce split_rst complete_file        # !split delimiters  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 # edit URLs to local files and place them in _static  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 # split an html file into parts according to !split commands  


Overfull \hbox (95.00006pt too wide) 
[]\T1/pcr/m/n/10 # create LaTeX Beamer slides from a (doconce) latex/pdflatex f
ile  

Overfull \hbox (11.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce html_colorbullets file1.html file2.html ...  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce grab   --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce remove --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform ptex2tex files (.p.tex) to ordinary latex file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \  

Overfull \hbox (107.00006pt too wide) 
[]        \T1/pcr/m/n/10 dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{q
uote}  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 # make HTML file via pandoc from Markdown (.md) file  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 # make LaTeX file via pandoc from Markdown (.md) file  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce combine_images image1 image2 ... output_file  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # insert a table of exercises in a latex file myfile.p.tex  
[14]
Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 # list all labels in a document (for purposes of cleaning them
 up)  

Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 # translate a latex document to doconce (requires usually manu
al fixing)  

Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 # check if there are problems with translating latex to doconc
e  

Overfull \hbox (179.00006pt too wide) 
[]\T1/pcr/m/n/10 # typeset a doconce document with pygments (for pretty print o
f doconce itself)  

Overfull \hbox (167.00006pt too wide) 
[]\T1/pcr/m/n/10 # generate a make.sh script for translating a doconce file to 
various formats  

Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce makefile docname doconcefile [html sphinx pdflatex ...
]  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 # fix common problems in bibtex files for publish import  

Overfull \hbox (5.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce fix_bibtex4publish file1.bib file2.bib ...  

Overfull \hbox (131.00006pt too wide) 
[]\T1/pcr/m/n/10 (diffprog can be difflib, diff, pdiff, latexdiff, kdiff3, diff
use, ...)  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 # find differences between the last two Git versions of severa
l files  
[15]
Overfull \hbox (101.00006pt too wide) 
\T1/pcr/m/n/10 ===== Problem: Derive the Formula for the Area of an Ellipse ===
==  

Overfull \hbox (77.00006pt too wide) 
[]\T1/pcr/m/n/10 Derive an expression for the area of an ellipse by integrating
  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 the area under a curve that defines half of the allipse.  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 "Wolframalpha": "http://wolframalpha.com" can perhaps  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 ===== {Problem}: Derive the Formula for the Area of an Ellipse
 ===== 

Overfull \hbox (41.00006pt too wide) 
\T1/pcr/m/n/10 ===== Exercise: Determine the Distance to the Moon =====  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 Intro to this exercise. Questions are in subexercises below.  

[16]
Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 At the very end of the exercise it may be appropriate to summa
rize  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 and give some perspectives. The text inside the !bremarks-!ere
marks  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 directives is always typeset at the end of the exercise.  

Overfull \hbox (2.38828pt too wide) 
\T1/ptm/m/n/10 Doconce en-vi-ron-ments start with \T1/pcr/m/n/10 !benvirname \T
1/ptm/m/n/10 and end with \T1/pcr/m/n/10 !eenvirname\T1/ptm/m/n/10 , where

Overfull \hbox (47.10902pt too wide) 
[]
[17]
Overfull \hbox (263.00006pt too wide) 
[]\T1/pcr/m/n/10 \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \mul
ticolumn{1}{c}{acceleration} \\  

Overfull \hbox (4.19656pt too wide) 
[][][][][][] \T1/ptm/m/n/10 con-tains some il-lus-tra-tions on how to uti-lize 
\T1/pcr/m/n/10 mako \T1/ptm/m/n/10 (clone the GitHub

Overfull \hbox (114.855pt too wide) 
[]\T1/ptm/m/n/10 Excellent ``Sphinx Tu-to-rial'' by C. Reller: ``[][][][][][]''
 
[18] (./quickref.rst.aux)

LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.rst.dvi (18 pages, ).
Transcript written on quickref.rst.log.
+ dvipdf quickref.rst.dvi
+ doconce format plain quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to plain
copy complete file doconce_program.sh  (format: shpro)
output in quickref.txt
+ doconce format gwiki quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to gwiki
copy complete file doconce_program.sh  (format: shpro)
output in quickref.gwiki
+ doconce format mwiki quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to mwiki
copy complete file doconce_program.sh  (format: shpro)
output in quickref.mwiki
+ doconce format cwiki quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to cwiki
copy complete file doconce_program.sh  (format: shpro)
output in quickref.cwiki
+ doconce format st quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to st
copy complete file doconce_program.sh  (format: shpro)
output in quickref.st
+ doconce format epytext quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to epytext
copy complete file doconce_program.sh  (format: shpro)
output in quickref.epytext
+ doconce format pandoc quickref --no_preprocess
running mako on quickref.do.txt to make tmp_mako__quickref.do.txt
translating doconce text in tmp_mako__quickref.do.txt to pandoc
copy complete file doconce_program.sh  (format: shpro)
output in quickref.md
+ rm -rf demo
+ mkdir demo
+ cp -r quickref.do.txt quickref.html quickref.p.tex quickref.tex quickref.pdf quickref.rst quickref.xml quickref.rst.html quickref.rst.tex quickref.rst.pdf quickref.gwiki quickref.mwiki quickref.cwiki quickref.txt quickref.epytext quickref.st quickref.md sphinx-rootdir/_build/html demo
+ cd demo
+ cat
+ echo

+ echo 'Go to the demo directory and load index.html into a web browser.'
Go to the demo directory and load index.html into a web browser.
+ cd ..
+ rm -rf ../demos/quickref
+ cp -r demo ../demos/quickref
+ cp quickref.gwiki ../../../doconce.wiki/Quickref.wiki