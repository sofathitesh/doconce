
************** File: testdoc.do.txt *****************
<%doc>
This is Mako comment block
to test the use of Mako as preprocessor.
</%doc>

TITLE: A Document for Testing Doconce
AUTHOR: Hans Petter Langtangen Email: hpl@simula.no at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo
AUTHOR: Kaare Dump at Segfault Inc, Cyberspace
AUTHOR: A. Dummy Author
AUTHOR: I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst
AUTHOR: J. Doe mail: j_doe@cyberspace.com
DATE: today

TOC: on

!split

The format of this document is
% if FORMAT == 'html':
plain, homemade HTML (from Doconce).
  % elif FORMAT == 'latex':
plain, homemade LaTeX (from Doconce).
  % elif FORMAT == 'pdflatex':
plain, homemade pdfLaTeX (from Doconce).
  %else:
${FORMAT}
% endif

% if SOMEVAR:
# Just a comment
% endif

__Abstract.__
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

# Cannot demonstrate chapter headings since abstract and chapter
# is mutually exclusive in LaTeX

======= Section 1 =======
label{sec1}

Here is a nested list:

  * item1
  * item2
  * item3 which continues
    on the next line to test that feature
  * and a sublist
    * with indented subitem1
    * and a subitem2
  * and perhaps an ordered sublist
    o first item
    o second item,
      continuing on a new line

!bquote
Here are two lines that make up
a block quote.
!equote

!split and check if these extra words are included properly in the comment

===== Subsection 1 =====

More text, with a reference back to Section ref{sec1} and further
to Section ref{subsubsec:ex}. idx{`somefunc` function}

# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

@@@CODE ../doc/manual/__testcode.f fromto: subroutine@
and then just the subroutine,
@@@CODE ../doc/manual/__testcode.f from-to:a comment@^C\s+END1
and finally the complete file:
@@@CODE ../doc/manual/__testcode.f

Testing other code environments. First Python:
!bc
|bc pycod
def f(x):
    return x+1
|ec
!ec
which gets rendered as

!bc pycod
def f(x):
    return x+1
!ec

Now a complete program to be shown via Python Online Tutorial:
!bc pyoptpro
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
!ec

Then Cython:
!bc cycod
cpdef f(double x):
    return x + 1
!ec

# This one tests a + sign before a code environment
C++:
!bc cpppro
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
!ec
# The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

!bc
|bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
|ec
!ec
which then is typeset as

!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec


System call:
!bc sys
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
!ec

It is time to test `verbatim inline font` especially with `a newline
inside the text` and an exclamation mark at the end: `BEGIN`! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the `verb` typesetting... Also test backslashes
like `\begin` and `\end` in inline verbatim text.

===== Subsection 2 =====
label{subsec:ex}
idx{figures}

Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. label{fig:impact}

Figures without captions are allowed.

FIGURE:[../doc/manual/figs/streamtubes, width=200]

idx{movies}
Test of movies.

MOVIE: [../doc/manual/figs/mjolnir.mpeg, width=700 height=400] Mjolnir tsunami (by Sylfest Glimsdal).

# Test empty caption:

MOVIE: [../doc/manual/figs/wavepacket.mpeg, width=700 height=400]

# Test wrong syntax and multi-line caption

   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

# Check out the correct with and height of YouTube movies from the
# embed command that the YouTube page can generate

MOVIE: [http://www.youtube.com/watch?v=_O7iUiftbKU, width=420 height=315] Movies can be uploaded to YouTube and embedded as HTML or as a link.

# Test multi-line caption in figure

Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

Movie ref{mymov} has a similar problem.

# Must be a blank line after MOVIE or FIGURE to detect this problem

# Test URL as figure name

FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]

# Test wikimedia type of files that otherwise reside in subdirs
# #if FORMAT == "mwiki"
FIGURE: [testfigs/df_plot.png, width=800] This is a wikimedia figure file.

# Non-uploaded file with no caption
FIGURE: [testfigs/df2s8765s_plot.png, width=200, frac=0.4]
# #endif

# Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

===== The $\theta$ parameter (not $\nabla$?) =====
label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
!bc
def f(theta):
    return theta**2
!ec

__More on $\theta$.__ Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

!bt
\begin{align*}
\Ddt{u} &= 0
\\
\half &= \halfi\\
\half\x &= \normalvec
\end{align*}
!et

Or with align with label and numbers:

!bt
\begin{align}
\Ddt{u} &= 0
label{aligneq1}\\
\half &= \halfi\\
\half\x &= \normalvec
label{aligneq2}
\end{align}
!et

% if FORMAT == "sphinx":
Sphinx makes a fix here and splits align into multiple equation
environments.
% endif
% if FORMAT == "mwiki":
The labels above are removed in mwiki since mwiki cannot refer to
labels in equations.
% endif

===== Custom Environments =====

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the `.tex` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<%
theorem_counter = 4
%>

# begin theorem
label{theorem:fundamental1}
<%
theorem_counter += 1
theorem_fundamental1 = theorem_counter
%>

__Theorem ${theorem_counter}.__
Let $a=1$ and $b=2$. Then $c=3$.
# end theorem

# begin proof
__Proof.__
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$|$END$
# end proof

As we see, the proof of Theorem ${theorem_counter} is a modest
achievement.


===== Tables =====
label{subsec:table}

idx{test index with `verbatim text` which is possible}
idx{test `two` (separate) `verbatim expressions` which is also possible}
idx{index with!subindex}

# index with comma could fool sphinx
idx{index, with comma, and one more}

Let us take this table from the manual:

% if FORMAT in ("latex", "pdflatex"):
\begin{table}
\caption{
Testing table environment in LaTeX, enabled by testing on the "latex" format
with the preprocessor.
label{mytab}
}
% endif

  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|

% if FORMAT in ("latex", "pdflatex"):
\end{table}
% endif

The Doconce source code reads
!bc ccq
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
!ec

Here is yet another table to test that we can handle more than
one table:

  |--l-------l----------l----------|
  |time  | velocity | acceleration |
  |--l-------l----------l----------|
  | 0.0  | 1.4186   | -5.01        |
  | 1.0  | 1.376512 | 11.919       |
  | 3.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

|-------------------------------|
|$i$ | $h_i$|$\bar T_i$ | `L_i` |
|-l-----r---------r---------r---|
|0   |0     |288        |-0.0065|
|1   |11,000|216        |0.0	|
|2   |20,000|216        |0.001	|
|3   |32,000|228        |0.0028	|
|4   |47,000|270        |0.0	|
|5   |51,000|270        |-0.0028|
|6   |71,000|214        |`NaN`	|
|-------------------------------|

And add one with verbatim headings (with underscores),
and rows starting with `|-` because of a negative number,
and `|` right after verbatim word (with no space):

|-----------------------------------------|
| exact | `v_1`   | $a_i$ + `v_2`|`verb_3_`|
|---r--------r---------r-----------r------|
|9      | 9.62    | 5.57      |  8.98     |
|-20    | -23.39  | -7.65     | -19.93    |
|10     | 17.74   | -4.50     |  9.96     |
|0      | -9.19   | 4.13      | -0.26     |
|-----------------------------------------|


===== A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` =====

__Files `my_file_v1.py` and `my_file_v2.py` define some math $a_{i-1}$.__ Here
is
some text.


===== Example: Examples can be typeset as exercises =====
label{Example}

Examples can start with a subsection heading starting with `Example:`
and then, with the command-line option `--examples-as-exercises` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


!bsubex
State some problem.

!bsol
The answer to this subproblem can be written here.
!esol
!esubex

!bsubex
State some other problem.

!bhint
A hint can be given.
!ehint

!bhint
Maybe even another hint?
!ehint

!bsol
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.
!esol
!esubex


===== URLs =====
label{subsubsec:ex}

Testing of URLs: hpl's home page "hpl":"http://folk.uio.no/hpl", or
the entire URL if desired, "URL": "http://folk.uio.no/hpl".  Here is a
plain file link "URL": "testdoc.do.txt", or "url":"testdoc.do.txt", or
URL: "testdoc.do.txt" or url : "testdoc.do.txt" or "a link with
newline": "testdoc.do.txt". Can test spaces with the link with word
too: "hpl": "http://folk.uio.no/hpl" or "hpl" :
"http://folk.uio.no/hpl". Also `file:///` works: "link to a
file":"file:///home/hpl/vc/doconce/doc/demos/manual/manual.html" is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the `latex` format:
"Newton-Cotes":
"http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas" formulas
and a "good book":
"http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1". Need to test
Newton-Cotes with percentage in URL too:
URL: "http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"
and URL: "http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae" which has a shebang.

# Comments should be inserted outside paragraphs (because in the rst
# format extra blanks make a paragraph break).

# Note that when there is no http: or file:, it can be a file link
# if the link name is URL, url, "URL", or "url". Such files should,
# if rst output is desired, but placed in a `_static*` folder.

More tough tests: repeated URLs whose footnotes when using the
`--latex-printed` option must be correct. We have
"google": "http://google.com", "google": "http://google.com", and
"google": "http://google.com", which should result in exactly three
footnotes.


% if FORMAT == "latex":

===== Test of Some LaTeX Fixes =====

Let's check abbr. of some common kind, e.g. the well-known i.e.
expression as an example. Moreover, Dr. Tang and Prof. Monsen,
or maybe also prof. Ting,
will go to the Dept. of Science to test how Mr. Hansen is doing together
with Ms. Larsen. A sentence containing "refines lines" could easily
fool a regex substitution with only i.e. since the dot matches anything.
Also, look at Fig. 4 to see how the data compares with Tab. ref{mytab}.
% endif

===== LaTeX Mathematics =====

Here is an equation without label using backslash-bracket environment:
!bt
\[ a = b + c \]
!et
or with number and label, as in (ref{my:eq1}), using the equation environment:
!bt
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u label{my:eq1}
\end{equation}
!et
We can refer to this equation by (ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
!bt
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\
b &= \nabla^2 u + \nabla^4 v
\end{align*}
!et


% if FORMAT in ('latex', 'pdflatex', 'sphinx', 'html', 'pandoc'):
And here is a system of equations with labels in an align environment:
!bt
\begin{align}
a &= q + 4 + 5+ 6 label{eq1} \\
b &= \nabla^2 u + \nabla^4 x label{eq2}
\end{align}
!et
We can refer to (ref{eq1})-(ref{eq2}).

Many of the next environments will fail in non-latex formats.
Testing multiline:
!bt
\begin{multline}
a = b = q + \\
  f + \nabla\cdot\nabla u
label{multiline:eq1}
\end{multline}
!et
Testing split:
!bt
\begin{equation}
label{split:envir:eq}
\begin{split}
a = b = q &+ \\
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
!et
We can refer to the last equation by (ref{split:envir:eq}).

Testing gather:
!bt
\begin{gather}
a = b \\
c = d + 7 + 9
\end{gather}
!et

Testing alignat:
!bt
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 label{eq1a} \\
b &= \nabla^2 u + \nabla^4 x & x\in\Omega label{eq2a}
\end{alignat}
!et
Let us refer to (ref{eq1})-(ref{eq2}) again, and to the
alignat variant (ref{eq1a})-(ref{eq2a}), and to (ref{my:eq1}).

Testing eqnarray:
!bt
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, label{myeq1}\\
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g label{myeq2}
\end{eqnarray}
!et
% endif

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem ref{demo:ex:1} and Project ref{demo:ex:2},
as well as Projects ref{proj:circle1} and ref{exer:you}, and in
between there we have Exercise ref{exer:some:formula}.

======= Exercises =======

===== Problem: Flip a Coin =====
label{demo:ex:1}
files = flip_coin.py, flip_coin.pdf
solutions = mysol.txt, mysol_flip_coin.py
keywords = random numbers; Monte Carlo simulation

# Torture tests
file=myfile_should_be_a_part_of_the_text
solutions = mysol.txt, mysol_flip_coin.py, yet_another.file

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

!bhint
Use `r = random.random()` and define head as `r <= 0.5`.
!ehint

# Test syntax error

  !bhint
Draw an integer among $\{1,2\}$ with
`r = random.randint(1,2)` and define head when `r` is 1.
  !ehint

!bans
If the `random.random()` function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
!eans

!bsol
!bc pycod
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
!ec
!esol

=== Remarks ===

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

 o Mark 1.
 o Mark 2.

===== Not an exercise =====

Should be possible to stick a normal section in the middle of many
exercises.

===== Project: Compute a Probability =====

# Minimalistic exercise

label{demo:ex:2}

What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

!bhint
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard `random` module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
!ehint

===== Project: Explore Distributions of Random Circles =====

label{proj:circle1}
file=circles.pdf

The formula for a circle is given by

!bt
\begin{align}
x &= x_0 + R\cos 2\pi t,\\
y &= y_0 + R\sin 2\pi t,
\end{align}
!et
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate `n` points on a circle:

!bc pypro
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
!ec

# Often in an exercise we have some comments about the solution
# which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the `circle` function
above.

!bsubex
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

!bans
Here goes the short answer to part a).
!eans

!bsol
Here goes a full solution to part a).
!esol

!bhint
Use the `numpy.random` module to draw the
$x_0$, $y_0$, and $R$ quantities.
!ehint

!esubex

!bsubex
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.

file=norm.py  # test local filename for subexercise
!esubex

!bsubex
Let $R$ and $(x_0,y_0)$ be normally distributed.
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.
!eremarks

===== Exercise: Determine some Distance =====
label{exer:dist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
With math in answer: $a=b$.
!eans

!bhint
First hint to subexercise a).
With math $a=b$ in hint:

!bt
\[ a=b. \]
!et
And with code returning $x+1$ in hint:

!bc
def func(x):
    return x + 1  # with code in hint
!ec
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

!bt
\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]
!et

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
!bt
\[ \hbox{math in solution: } a = b \]
!et
And code `a=b` in this solution:
!bc
a = b  # code in solution
!ec
End of solution is here.
!esol

#  No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


===== {Exercise}: Some exercise without the "Exercise:" prefix =====

# Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

!bt
\[ \exp{(0)} = 1 \]
!et

And a test that the code `lambda x: x+2` is correctly placed here:

!bc
lambda x: x+2
!ec

===== Example: Just an example =====

# This example needs the --examples-as-exercises option, otherwise
# it is just typeset as it is written.

!bsubex
What is the capital of Norway?

!bans
Oslo.
!eans
!esubex

======= Here goes another section =======

With some text, before we continue with exercises.

======= More Exercises =======

===== Exercise: Make references to projects and problems =====

label{exer:some:formula}
file=verify_formula.py

Pick a statement from Project ref{proj:circle1} or Problem ref{demo:ex:1}
and verify it.


% if FORMAT in ('rst', 'sphinx', 'html'):
===== Project: References in a headings do not work well in ${FORMAT} =====
% else:
===== Project: References to Project ref{demo:ex:2} in a heading works for ${FORMAT} =====
% endif

label{exer:you}
file=selc_composed.pdf

Refer to the previous exercise as Exercise ref{exer:some:formula},
the two before that as Projects ref{demo:ex:2} and ref{proj:circle1},
and this one as Project ref{exer:you}.

======= Appendix: Just for testing; part I =======

This is the first appendix.

===== A subsection within an appendix =====

Some text.

======= Appendix: Just for testing; part II =======

This is more stuff for an appendix.

===== Appendix: Testing identical titles =====

Without label.

===== Appendix: Testing identical titles =====
label{test:title:id1}

With label.

===== Appendix: Testing identical titles =====
label{test:title:id2}

With label.

===== Appendix: Testing identical titles =====

Without label.

!bhint
Here is a hint.
!ehint

!bwarning
And here is a warning about something to pay attention to.
!ewarning

!bsummary
Much testing in this document, otherwise stupid content.
!esummary

!bnotice
Ah, we are close to the end.
With math:
!bt
\[ p=q\]
!et
!enotice

!bquestion
So, how many admonition environments does Doconce support?
!equestion


************** File: testdoc.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1'),
              (' Subsection 1 ', 2, None),
              (' Subsection 2 ', 2, 'subsec:ex'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta'),
              (' Custom Environments ', 2, None),
              (' Tables ', 2, 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example'),
              (' URLs ', 2, 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None),
              (' Exercises ', 1, None),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1'),
              (' Remarks ', 3, None),
              (' Not an exercise ', 2, None),
              (' Project 1: Compute a Probability ', 2, 'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1'),
              (' Remarks ', 3, None),
              (' Exercise 1: Determine some Distance ', 2, 'exer:dist'),
              (' Remarks ', 3, None),
              (' Some exercise without the "Exercise:" prefix ', 2, None),
              (' Example 2: Just an example ', 2, None),
              (' Here goes another section ', 1, None),
              (' More Exercises ', 1, None),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you'),
              (' Appendix: Just for testing; part I ', 1, None),
              (' A subsection within an appendix ', 2, None),
              (' Appendix: Just for testing; part II ', 1, None),
              (' Appendix: Testing identical titles ', 2, None),
              (' Appendix: Testing identical titles ', 2, 'test:title:id1'),
              (' Appendix: Testing identical titles ', 2, 'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None)]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0000"></a>

<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<p>
<!-- ------------------- main content ---------------------- -->


<p>


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s) -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>

<h2>Table of contents</h2>

<p>

<a href="._part0001_testdoc.html#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:ex"> Subsection 2 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec4"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec6"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec9"> LaTeX Mathematics </a><br>
<a href="._part0002_testdoc.html#___sec10"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec12"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec13"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec16"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec19"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec20"> Example 2: Just an example </a><br>
<a href="._part0002_testdoc.html#___sec21"> Here goes another section </a><br>
<a href="._part0002_testdoc.html#___sec22"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="._part0002_testdoc.html#___sec25"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec26"> A subsection within an appendix </a><br>
<a href="._part0002_testdoc.html#___sec27"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec28"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec31"> Appendix: Testing identical titles </a><br>

<p>


<p>

<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: testdoc.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DBOOK -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=Springer-collection
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to command-line arguments (type doconce ptex2tex to see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer-collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------
% #ifdef BOOK
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}
% #else
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}
% #endif

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for epub-style formats
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},              % inner margin (two-sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif


\usepackage{relsize,epsfig,makeidx,amsmath,amsfonts}
\usepackage[latin1]{inputenc}
\usepackage{ptex2tex}
% #ifdef MOVIE15
\usepackage{movie15}
% #endif

% #ifdef MINTED
\usepackage{minted}  % requires latex/pdflatex -shell-escape (to run pygments)
\usemintedstyle{default}
% #endif

% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif

% Hyperlinks in PDF:
\usepackage[%
    colorlinks=true,
    linkcolor=black,
    %linkcolor=blue,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    urlcolor=black,
    pdfmenubar=true,
    pdftoolbar=true,
    urlcolor=black,
    %urlcolor=blue,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\newenvironment{exercise}{}{}
\newcounter{exerno}

\newcommand{\inlinecomment}[2]{  ({\bf #1}: \emph{#2})  }
%\newcommand{\inlinecomment}[2]{}  % turn off inline comments


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_replace}

% ------------------- main content ----------------------





% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"

\title{A Document for Testing Doconce}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{A Document for Testing Doconce}}}

% #elif LATEX_HEADING == "Springer-collection"

\title*{A Document for Testing Doconce}
% Short version of title:
%\titlerunning{...}

% #else

\begin{center}
{\LARGE\bf A Document for Testing Doconce}
\end{center}

% #endif



% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Email: \texttt{hpl@simula.no}. Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo.}
\and Kaare Dump\footnote{Segfault Inc, Cyberspace.}
\and A. Dummy Author
\and I. S. Overworked\footnote{Inst1; Inst2, Somewhere; Third Inst, Elsewhere; and Fourth Inst.}
\and J. Doe\footnote{Email: \texttt{j\_doe@cyberspace.com}.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})}}\\ [3mm]
    
    {\Large\textsf{Kaare Dump${}^{3}$}}\\ [3mm]
    
    {\Large\textsf{A. Dummy Author${}^{}$}}\\ [3mm]
    
    {\Large\textsf{I. S. Overworked${}^{4, 5, 6, 7}$}}\\ [3mm]
    
    {\Large\textsf{J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
{\large\textsf{${}^3$Segfault Inc, Cyberspace} \\ [1.5mm]}
{\large\textsf{${}^4$Inst1} \\ [1.5mm]}
{\large\textsf{${}^5$Inst2, Somewhere} \\ [1.5mm]}
{\large\textsf{${}^6$Third Inst, Elsewhere} \\ [1.5mm]}
{\large\textsf{${}^7$Fourth Inst} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer-collection"

\author{Hans Petter Langtangen and Kaare Dump and A. Dummy Author and I. S. Overworked and J. Doe}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo\email{hpl@simula.no} \and Kaare Dump\at Segfault Inc, Cyberspace \and A. Dummy Author \and I. S. Overworked\at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and and Fourth Inst \and J. Doe\email{j_doe@cyberspace.com}}

% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})} \\ [0mm]
\end{center}


\begin{center}
{\bf Kaare Dump${}^{3}$} \\ [0mm]
\end{center}


\begin{center}
{\bf A. Dummy Author${}^{}$} \\ [0mm]
\end{center}


\begin{center}
{\bf I. S. Overworked${}^{4, 5, 6, 7}$} \\ [0mm]
\end{center}


\begin{center}
{\bf J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\centerline{{\small ${}^3$Segfault Inc, Cyberspace}}
\centerline{{\small ${}^4$Inst1}}
\centerline{{\small ${}^5$Inst2, Somewhere}}
\centerline{{\small ${}^6$Third Inst, Elsewhere}}
\centerline{{\small ${}^7$Fourth Inst}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% ----------------- date -------------------------

% #if LATEX_HEADING == "traditional"

\date{Jan 32, 2100}
\maketitle

% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else

\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\tableofcontents

\vspace{1cm} % after toc





% !split

The format of this document is
plain, homemade {\LaTeX} (from Doconce).


% #if LATEX_HEADING == "Springer-collection"
\abstract{
% #else
\begin{abstract}
% #endif
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
% #if LATEX_HEADING == "Springer-collection"
}
% #else
\end{abstract}
% #endif


\section{Section 1}

\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\bfcod
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efcod
and then just the subroutine,
\bfcod

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\efcod
and finally the complete file:
\bfpro
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efpro

Testing other code environments. First Python:
\bccq
!bc pycod
def f(x):
    return x+1
!ec
\eccq
which gets rendered as

\bpycod
def f(x):
    return x+1
\epycod

Now a complete program to be shown via Python Online Tutorial:
\bpypro
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\epypro
\noindent
(\href{{http://pythontutor.com/visualize.html\#code=def+f\%28x\%29\%3A\%0A++++return+x+\%2B+1\%0A\%0Aa+\%3D+2\%0Ax+\%3D+a\%0Aa+\%3D+1\%0Av+\%3D+f\%28x\%29\%0Aprint+v&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0}}{Visualize execution}) 


Then Cython:
\bcycod
cpdef f(double x):
    return x + 1
\ecycod

% This one tests a + sign before a code environment
C++:
\bcpppro
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\ecpppro
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\bccq
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\eccq
which then is typeset as

\bcod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\ecod


System call:
\bsys
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
\esys

It is time to test \code{verbatim inline font} especially with \code{a newline
inside the text} and an exclamation mark at the end: \code{BEGIN}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the \code{verb} typesetting... Also test backslashes
like \code{\begin} and \code{\end} in inline verbatim text.

\subsection{Subsection 2}

\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
\end{center}


\index{movies}
Test of movies.


\begin{figure}[ht]
\begin{center}

% #ifdef MOVIE15
\includemovie[poster,
label=../doc/manual/figs/mjolnir.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/mjolnir.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/mjolnir.mpeg}    % requires \usepackage{movie15}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/mjolnir.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/mjolnir.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/mjolnir.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/mjolnir.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/mjolnir.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif

% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}

% alternative: \movie command that comes with beamer
% \movie[options]{../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif
\end{center}
\caption{ Mjolnir tsunami (by Sylfest Glimsdal).}
\end{figure}


% Test empty caption:


\begin{figure}[ht]
\begin{center}

% #ifdef MOVIE15
\includemovie[poster,
label=../doc/manual/figs/wavepacket.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/wavepacket.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/wavepacket.mpeg}    % requires \usepackage{movie15}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/wavepacket.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/wavepacket.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/wavepacket.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/wavepacket.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/wavepacket.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif

% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}

% alternative: \movie command that comes with beamer
% \movie[options]{../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif
\end{center}
\caption{}
\end{figure}


% Test wrong syntax and multi-line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files \code{../doc/manual/figs/wavepacket_*.png} in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} }{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} })


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

% Test multi-line caption in figure

Here is figure~\ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.eps}}
  \caption{
  A long caption spanning several lines and containing verbatim words like \protect \code{my\_file\_v1} and \protect \code{my\_file\_v2} as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


Movie~\ref{mymov} has a similar problem.

% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}

\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\bccq
def f(theta):
    return theta**2
\eccq

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}

\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the \code{.tex} by proper begin-end {\LaTeX} environments for theorems.
Should look nice in most formats!



% begin theorem
\label{theorem:fundamental1}


\paragraph{Theorem 5.}
Let $a=1$ and $b=2$. Then $c=3$.
% end theorem

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.

\subsection{Tables}

\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\bccq
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\eccq

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ \code{L\_i} } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & \code{NaN} \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with \code{|-} because of a negative number,
and \code{|} right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ \code{v\_1} } & \multicolumn{1}{c}{ $a_i$ + \code{v\_2} } & \multicolumn{1}{c}{ \code{verb\_3\_} } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: \protect\code{my\_file\_v1} and \protect\code{my\_file\_v2} }

\paragraph{Files \protect\code{my\_file\_v1.py} and \protect\code{my\_file\_v2.py} define some math $a_{i-1}$.}
Here
is
some text.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}

\label{Example}

Examples can start with a subsection heading starting with \code{Example:}
and then, with the command-line option \code{--examples-as-exercises} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---

\subsection{URLs}

\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl} or \href{{http://folk.uio.no/hpl}}{hpl}. Also \code{file:///} works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html} }{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the \code{latex} format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a \code{_static*} folder.

More tough tests: repeated URLs whose footnotes when using the
\code{--latex-printed} option must be correct. We have
\href{{http://google.com}}{google}, \href{{http://google.com}}{google}, and
\href{{http://google.com}}{google}, which should result in exactly three
footnotes.

\subsection{Test of Some {\LaTeX} Fixes}

Let's check abbr.~of some common kind, e.g.~the well-known i.e.
expression as an example. Moreover, Dr.~Tang and Prof.~Monsen,
or maybe also prof.~Ting,
will go to the Dept.~of Science to test how Mr.~Hansen is doing together
with Ms.~Larsen. A sentence containing "refines lines" could easily
fool a regex substitution with only i.e.~since the dot matches anything.
Also, look at Fig.~4 to see how the data compares with Tab.~\ref{mytab}.

\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash-bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}).

Many of the next environments will fail in non-latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.


\section{Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}

\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error

\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use \code{r = random.random()} and define head as \code{r <= 0.5}.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
\code{r = random.randint(1,2)} and define head when \code{r} is 1.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
If the \code{random.random()} function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Code:
\bpycod
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
\epycod
% --- end solution of exercise ---
Filenames: \code{flip_coin.py}, \code{flip_coin.pdf}.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---

\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}

\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard \code{random} module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}

\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate \code{n} points on a circle:

\bpypro
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\epypro

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the \code{circle} function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the \code{numpy.random} module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
Here goes the short answer to part a).
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution to part a).
% --- end solution of exercise ---

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: \code{norm.py}.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: \code{circles.pdf}.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}

\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
\[ \hbox{math in solution: } a = b \]
And code \code{a=b} in this solution:
\bccq
a = b  # code in solution
\eccq
End of solution is here.
% --- end solution of exercise ---


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code returning $x+1$ in hint:

\bccq
def func(x):
    return x + 1  # with code in hint
\eccq
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: \code{subexer_a.pdf}.


% --- begin answer of exercise ---
\paragraph{Answer.}
Short answer to subexercise a).
With math in answer: $a=b$.
% --- end answer of exercise ---

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: \code{subexer_b.pdf}.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes the solution of this subexercise.
% --- end solution of exercise ---

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code \code{lambda x: x+2} is correctly placed here:

\bccq
lambda x: x+2
\eccq

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples-as-exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.


\section{More Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}

\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: \code{verify_formula.py}.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for latex}

\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: \code{selc_composed.pdf}.

\end{exercise}
% --- end exercise ---




\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.


\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\definecolor{hintbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{hintbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/hint.eps}
\vskip-0.3in\hskip1.5in{\large\bf HINT} \\[0.4cm]
Here is a hint.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{warningbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/warning.eps}
\vskip-0.3in\hskip1.5in{\large\bf WARNING} \\[0.4cm]
And here is a warning about something to pay attention to.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{summarybackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/summary.eps}
\vskip-0.3in\hskip1.5in{\large\bf SUMMARY} \\[0.4cm]
Much testing in this document, otherwise stupid content.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{noticebackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/notice.eps}
\vskip-0.3in\hskip1.5in{\large\bf NOTICE} \\[0.4cm]
Ah, we are close to the end.
With math:
\[ p=q\]
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{questionbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{questionbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/question.eps}
\vskip-0.3in\hskip1.5in{\large\bf QUESTION} \\[0.4cm]
So, how many admonition environments does Doconce support?
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: testdoc.tex_ptex2tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------
\documentclass[%
twoside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}

\listfiles               % print all files needed to compile this document



\usepackage{relsize,epsfig,makeidx,amsmath,amsfonts}
\usepackage[latin1]{inputenc}
\usepackage{ptex2tex}
\usepackage{movie15}

\usepackage{minted}  % requires latex/pdflatex -shell-escape (to run pygments)
\usemintedstyle{default}


% Hyperlinks in PDF:
\usepackage[%
    colorlinks=true,
    linkcolor=black,
    %linkcolor=blue,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    urlcolor=black,
    pdfmenubar=true,
    pdftoolbar=true,
    urlcolor=black,
    %urlcolor=blue,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\newenvironment{exercise}{}{}
\newcounter{exerno}

\newcommand{\inlinecomment}[2]{  ({\bf #1}: \emph{#2})  }
%\newcommand{\inlinecomment}[2]{}  % turn off inline comments


\usepackage{theorem}
\newtheorem{theorem}{Theorem}[section]

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_replace}

% ------------------- main content ----------------------





% ----------------- title -------------------------

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{A Document for Testing Doconce}}}




% ----------------- author(s) -------------------------
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})}}\\ [3mm]
    
    {\Large\textsf{Kaare Dump${}^{3}$}}\\ [3mm]
    
    {\Large\textsf{A. Dummy Author${}^{}$}}\\ [3mm]
    
    {\Large\textsf{I. S. Overworked${}^{4, 5, 6, 7}$}}\\ [3mm]
    
    {\Large\textsf{J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
{\large\textsf{${}^3$Segfault Inc, Cyberspace} \\ [1.5mm]}
{\large\textsf{${}^4$Inst1} \\ [1.5mm]}
{\large\textsf{${}^5$Inst2, Somewhere} \\ [1.5mm]}
{\large\textsf{${}^6$Third Inst, Elsewhere} \\ [1.5mm]}
{\large\textsf{${}^7$Fourth Inst} \\ [1.5mm]}
% ----------------- end author(s) -------------------------


% ----------------- date -------------------------


\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage



\tableofcontents

\subsection*{List of Exercises, Problems, and Projects}
\begin{tabular}{lrll}
Problem & 1 & Flip a Coin & p.~\pageref{demo:ex:1} \\
Project & 1 & Compute a Probability & p.~\pageref{demo:ex:2} \\
Project & 2 & Explore Distributions of Random Circles & p.~\pageref{proj:circle1} \\
Exercise & 1 & Determine some Distance & p.~\pageref{exer:dist} \\
Exercise & 2 & Some exercise without the "Exercise:" prefix & \\
Exercise & 3 & Make references to projects and problems & p.~\pageref{exer:some:formula} \\
Project & 3 & References to Project ref{demo:ex:2} in a ... & p.~\pageref{exer:you} \\
\end{tabular}
% --- end of table of exercises



\clearpage % after toc





% !split

The format of this document is
plain, homemade \textsc{pdf}{\LaTeX} (from Doconce).


\begin{abstract}
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
\end{abstract}


\section{Section 1}

\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}
\noindent
and then just the subroutine,
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\end{minted}
\noindent
and finally the complete file:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}
\noindent

Testing other code environments. First Python:
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
!bc pycod
def f(x):
    return x+1
!ec
\end{Verbatim}
\noindent
which gets rendered as

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def f(x):
    return x+1
\end{minted}
\noindent

Now a complete program to be shown via Python Online Tutorial:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\end{minted}
\noindent

Then Cython:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{cython}
cpdef f(double x):
    return x + 1
\end{minted}
\noindent

% This one tests a + sign before a code environment
C++:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{c++}
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\end{minted}
\noindent
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\end{Verbatim}
\noindent
which then is typeset as

\providecommand{\shadedskip}{}
\definecolor{shadecolor}{rgb}{0.87843, 0.95686, 1.0}
\renewenvironment{shadedskip}{
\def\FrameCommand{\colorbox{shadecolor}}\FrameRule0.6pt
\MakeFramed {\FrameRestore}\vskip3mm}{\vskip0mm\endMakeFramed}
\providecommand{\shadedquoteBlue}{}
\renewenvironment{shadedquoteBlue}[1][]{
\bgroup\rmfamily
\fboxsep=0mm\relax
\begin{shadedskip}
\list{}{\parsep=-2mm\parskip=0mm\topsep=0pt\leftmargin=2mm
\rightmargin=2\leftmargin\leftmargin=4pt\relax}
\item\relax}
{\endlist\end{shadedskip}\egroup}\begin{shadedquoteBlue}
\fontsize{9pt}{9pt}
\begin{Verbatim}
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\end{Verbatim}
\end{shadedquoteBlue}
\noindent


System call:
\vspace{4pt}
\begin{Verbatim}[numbers=none,frame=lines,label=\fbox{{\tiny Terminal}},fontsize=\fontsize{9pt}{9pt},
labelposition=topline,framesep=2.5mm,framerule=0.7pt]
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
\end{Verbatim}

It is time to test {\fontsize{10pt}{10pt}\Verb!verbatim inline font!} especially with {\fontsize{10pt}{10pt}\Verb!a newline inside the text!} and an exclamation mark at the end: {\fontsize{10pt}{10pt}\Verb!BEGIN!}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the {\fontsize{10pt}{10pt}\Verb!verb!} typesetting... Also test backslashes
like {\fontsize{10pt}{10pt}\Verb!\begin!} and {\fontsize{10pt}{10pt}\Verb!\end!} in inline verbatim text.

\subsection{Subsection 2}

\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
\end{center}


\index{movies}
Test of movies.


\begin{figure}[ht]
\begin{center}

\includemovie[poster,
label=../doc/manual/figs/mjolnir.mpeg,
autoplay,
%controls,
%toolbar,
text={\small (Loading ../doc/manual/figs/mjolnir.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/mjolnir.mpeg}    % requires \usepackage{movie15}
\movieref[rate=0.5]{../doc/manual/figs/mjolnir.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/mjolnir.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/mjolnir.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/mjolnir.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/mjolnir.mpeg}{Stop}

\end{center}
\caption{ Mjolnir tsunami (by Sylfest Glimsdal).}
\end{figure}


% Test empty caption:


\begin{figure}[ht]
\begin{center}

\includemovie[poster,
label=../doc/manual/figs/wavepacket.mpeg,
autoplay,
%controls,
%toolbar,
text={\small (Loading ../doc/manual/figs/wavepacket.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/wavepacket.mpeg}    % requires \usepackage{movie15}
\movieref[rate=0.5]{../doc/manual/figs/wavepacket.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/wavepacket.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/wavepacket.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/wavepacket.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/wavepacket.mpeg}{Stop}

\end{center}
\caption{}
\end{figure}


% Test wrong syntax and multi-line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files {\fontsize{10pt}{10pt}\Verb!../doc/manual/figs/wavepacket_*.png!} in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} }{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} })


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

% Test multi-line caption in figure

Here is figure~\ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
  \caption{
  A long caption spanning several lines and containing verbatim words like {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v1!} and {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v2!} as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


Movie~\ref{mymov} has a similar problem.

% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}

\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
def f(theta):
    return theta**2
\end{Verbatim}
\noindent

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}

\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the {\fontsize{10pt}{10pt}\Verb!.tex!} by proper begin-end {\LaTeX} environments for theorems.
Should look nice in most formats!



\begin{theorem}
\label{theorem:fundamental1}



Let $a=1$ and $b=2$. Then $c=3$.
\end{theorem}

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.

\subsection{Tables}

\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\end{Verbatim}
\noindent

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ {\fontsize{10pt}{10pt}\Verb!L\_i!} } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & {\fontsize{10pt}{10pt}\Verb!NaN!} \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with {\fontsize{10pt}{10pt}\Verb!|-!} because of a negative number,
and {\fontsize{10pt}{10pt}\Verb!|!} right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ {\fontsize{10pt}{10pt}\Verb!v\_1!} } & \multicolumn{1}{c}{ $a_i$ + {\fontsize{10pt}{10pt}\Verb!v\_2!} } & \multicolumn{1}{c}{ {\fontsize{10pt}{10pt}\Verb!verb\_3\_!} } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v1!} and {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v2!} }

\paragraph{Files {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v1.py!} and {\fontsize{10pt}{10pt}\protect\Verb!my\_file\_v2.py!} define some math $a_{i-1}$.}
Here
is
some text.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}

\label{Example}

Examples can start with a subsection heading starting with {\fontsize{10pt}{10pt}\Verb!Example:!}
and then, with the command-line option {\fontsize{10pt}{10pt}\Verb!--examples-as-exercises!} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---

\subsection{URLs}

\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}} or \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}. Also {\fontsize{10pt}{10pt}\Verb!file:///!} works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html} }{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the {\fontsize{10pt}{10pt}\Verb!latex!} format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes}\footnote{\texttt{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes\_formulas}} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}\footnote{\texttt{http://www.springer.com/mathematics/computational+science+\%26+engineering/book/978-3-642-23098-1}}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a {\fontsize{10pt}{10pt}\Verb!_static*!} folder.

More tough tests: repeated URLs whose footnotes when using the
{\fontsize{10pt}{10pt}\Verb!--latex-printed!} option must be correct. We have
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, \href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, and
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, which should result in exactly three
footnotes.

\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash-bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}).

Many of the next environments will fail in non-latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.


\section{Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}

\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error

\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use {\fontsize{10pt}{10pt}\Verb!r = random.random()!} and define head as {\fontsize{10pt}{10pt}\Verb!r <= 0.5!}.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
{\fontsize{10pt}{10pt}\Verb!r = random.randint(1,2)!} and define head when {\fontsize{10pt}{10pt}\Verb!r!} is 1.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
If the {\fontsize{10pt}{10pt}\Verb!random.random()!} function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Code:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
\end{minted}
\noindent
% --- end solution of exercise ---
Filenames: {\fontsize{10pt}{10pt}\Verb!flip_coin.py!}, {\fontsize{10pt}{10pt}\Verb!flip_coin.pdf!}.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---

\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}

\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard {\fontsize{10pt}{10pt}\Verb!random!} module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}

\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate {\fontsize{10pt}{10pt}\Verb!n!} points on a circle:

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\end{minted}
\noindent

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the {\fontsize{10pt}{10pt}\Verb!circle!} function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the {\fontsize{10pt}{10pt}\Verb!numpy.random!} module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
Here goes the short answer to part a).
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution to part a).
% --- end solution of exercise ---

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: {\fontsize{10pt}{10pt}\Verb!norm.py!}.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: {\fontsize{10pt}{10pt}\Verb!circles.pdf!}.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}

\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
\[ \hbox{math in solution: } a = b \]
And code {\fontsize{10pt}{10pt}\Verb!a=b!} in this solution:
\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
a = b  # code in solution
\end{Verbatim}
\noindent
End of solution is here.
% --- end solution of exercise ---


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code returning $x+1$ in hint:

\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
def func(x):
    return x + 1  # with code in hint
\end{Verbatim}
\noindent
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: {\fontsize{10pt}{10pt}\Verb!subexer_a.pdf!}.


% --- begin answer of exercise ---
\paragraph{Answer.}
Short answer to subexercise a).
With math in answer: $a=b$.
% --- end answer of exercise ---

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: {\fontsize{10pt}{10pt}\Verb!subexer_b.pdf!}.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes the solution of this subexercise.
% --- end solution of exercise ---

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code {\fontsize{10pt}{10pt}\Verb!lambda x: x+2!} is correctly placed here:

\begin{Verbatim}[fontsize=\fontsize{9pt}{9pt},tabsize=8,baselinestretch=0.85,
fontfamily=tt,xleftmargin=7mm]
lambda x: x+2
\end{Verbatim}
\noindent

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples-as-exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.


\section{More Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}

\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: {\fontsize{10pt}{10pt}\Verb!verify_formula.py!}.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for pdflatex}

\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: {\fontsize{10pt}{10pt}\Verb!selc_composed.pdf!}.

\end{exercise}
% --- end exercise ---




\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.


\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\definecolor{hintbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{hintbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/hint.pdf}
\vskip-0.3in\hskip1.5in{\large\bf HINT} \\[0.4cm]
Here is a hint.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{warningbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/warning.pdf}
\vskip-0.3in\hskip1.5in{\large\bf WARNING} \\[0.4cm]
And here is a warning about something to pay attention to.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{summarybackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/summary.pdf}
\vskip-0.3in\hskip1.5in{\large\bf SUMMARY} \\[0.4cm]
Much testing in this document, otherwise stupid content.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{noticebackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/notice.pdf}
\vskip-0.3in\hskip1.5in{\large\bf NOTICE} \\[0.4cm]
Ah, we are close to the end.
With math:
\[ p=q\]
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{questionbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{questionbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/question.pdf}
\vskip-0.3in\hskip1.5in{\large\bf QUESTION} \\[0.4cm]
So, how many admonition environments does Doconce support?
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
% ------------------- end of main content ---------------


\printindex

\end{document}

************** File: testdoc.tex_doconce_ptex2tex *****************
\bsys (!bc sys) -> begin{quote}begin{Verbatim}
\bpypro (!bc pypro) -> \begin{python:nt}
\bfcod (!bc fcod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
\bfpro (!bc fpro) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
\bpycod (!bc pycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
\bcycod (!bc cycod) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{cython}
\bcpppro (!bc cpppro) -> \begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{c++}
\bcod (!bc cod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
----------- end of doconce ptex2tex output ----------------
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%




%-------------------- begin preamble ----------------------
\documentclass[%
twoside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}

\listfiles               % print all files needed to compile this document



\usepackage{relsize,epsfig,makeidx,amsmath,amsfonts}
\usepackage[latin1]{inputenc}
\usepackage{anslistings,minted,fancyvrb} % packages needed for verbatim environments


% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice

% Hyperlinks in PDF:
\usepackage[%
    colorlinks=true,
    linkcolor=black,
    %linkcolor=blue,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    urlcolor=black,
    pdfmenubar=true,
    pdftoolbar=true,
    urlcolor=black,
    %urlcolor=blue,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\newenvironment{exercise}{}{}
\newcounter{exerno}

\newcommand{\inlinecomment}[2]{  ({\bf #1}: \emph{#2})  }
%\newcommand{\inlinecomment}[2]{}  % turn off inline comments


\usepackage{theorem}
\newtheorem{theorem}{Theorem}[section]

\makeindex

%-------------------- end preamble ----------------------

\begin{document}


\input{newcommands_replace}

% ------------------- main content ----------------------





% ----------------- title -------------------------

\begin{center}
{\LARGE\bf A Document for Testing Doconce}
\end{center}




% ----------------- author(s) -------------------------

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})} \\ [0mm]
\end{center}


\begin{center}
{\bf Kaare Dump${}^{3}$} \\ [0mm]
\end{center}


\begin{center}
{\bf A. Dummy Author${}^{}$} \\ [0mm]
\end{center}


\begin{center}
{\bf I. S. Overworked${}^{4, 5, 6, 7}$} \\ [0mm]
\end{center}


\begin{center}
{\bf J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\centerline{{\small ${}^3$Segfault Inc, Cyberspace}}
\centerline{{\small ${}^4$Inst1}}
\centerline{{\small ${}^5$Inst2, Somewhere}}
\centerline{{\small ${}^6$Third Inst, Elsewhere}}
\centerline{{\small ${}^7$Fourth Inst}}
\end{center}
% ----------------- end author(s) -------------------------


% ----------------- date -------------------------


\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}



\tableofcontents

\subsection*{List of Exercises, Problems, and Projects}
\begin{tabular}{lrll}
Problem & 1 & Flip a Coin & p.~\pageref{demo:ex:1} \\
Project & 1 & Compute a Probability & p.~\pageref{demo:ex:2} \\
Project & 2 & Explore Distributions of Random Circles & p.~\pageref{proj:circle1} \\
Exercise & 1 & Determine some Distance & p.~\pageref{exer:dist} \\
Exercise & 2 & Some exercise without the "Exercise:" prefix & \\
Exercise & 3 & Make references to projects and problems & p.~\pageref{exer:some:formula} \\
Project & 3 & References to Project ref{demo:ex:2} in a ... & p.~\pageref{exer:you} \\
\end{tabular}
% --- end of table of exercises



\clearpage % after toc





% !split

The format of this document is
plain, homemade \textsc{pdf}{\LaTeX} (from Doconce).


\begin{abstract}
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
\end{abstract}


\section{Section 1}

\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}
and then just the subroutine,
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\end{minted}
and finally the complete file:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{fortran}
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\end{minted}

Testing other code environments. First Python:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
!bc pycod
def f(x):
    return x+1
!ec
\end{Verbatim}
which gets rendered as

\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
def f(x):
    return x+1
\end{minted}

Now a complete program to be shown via Python Online Tutorial:
\begin{python:nt}
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\end{python:nt}

Then Cython:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{cython}
cpdef f(double x):
    return x + 1
\end{minted}

% This one tests a + sign before a code environment
C++:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{c++}
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\end{minted}
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\end{Verbatim}
which then is typeset as

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\end{Verbatim}


System call:
begin{quote}begin{Verbatim}
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
end{Verbatim}end{quote}

It is time to test \Verb!verbatim inline font! especially with \Verb!a newline inside the text! and an exclamation mark at the end: \Verb!BEGIN!! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the \Verb!verb! typesetting... Also test backslashes
like \Verb!\begin! and \Verb!\end! in inline verbatim text.

\subsection{Subsection 2}

\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.png}}
\end{center}


\index{movies}
Test of movies.


\begin{figure}[ht]
\begin{center}

\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}

% alternative: \movie command that comes with beamer
% \movie[options]{../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
\end{center}
\caption{ Mjolnir tsunami (by Sylfest Glimsdal).}
\end{figure}


% Test empty caption:


\begin{figure}[ht]
\begin{center}

\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}

% alternative: \movie command that comes with beamer
% \movie[options]{../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
\end{center}
\caption{}
\end{figure}


% Test wrong syntax and multi-line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files \Verb!../doc/manual/figs/wavepacket_*.png! in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} }{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} })


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

% Test multi-line caption in figure

Here is figure~\ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.png}}
  \caption{
  A long caption spanning several lines and containing verbatim words like \protect \Verb!my\_file\_v1! and \protect \Verb!my\_file\_v2! as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


Movie~\ref{mymov} has a similar problem.

% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}

\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
def f(theta):
    return theta**2
\end{Verbatim}

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}

\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the \Verb!.tex! by proper begin-end {\LaTeX} environments for theorems.
Should look nice in most formats!



\begin{theorem}
\label{theorem:fundamental1}



Let $a=1$ and $b=2$. Then $c=3$.
\end{theorem}

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.

\subsection{Tables}

\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\end{Verbatim}

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ \Verb!L\_i! } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & \Verb!NaN! \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with \Verb!|-! because of a negative number,
and \Verb!|! right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ \Verb!v\_1! } & \multicolumn{1}{c}{ $a_i$ + \Verb!v\_2! } & \multicolumn{1}{c}{ \Verb!verb\_3\_! } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: \protect\Verb!my\_file\_v1! and \protect\Verb!my\_file\_v2! }

\paragraph{Files \protect\Verb!my\_file\_v1.py! and \protect\Verb!my\_file\_v2.py! define some math $a_{i-1}$.}
Here
is
some text.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}

\label{Example}

Examples can start with a subsection heading starting with \Verb!Example:!
and then, with the command-line option \Verb!--examples-as-exercises! be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---

\subsection{URLs}

\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}} or \href{{http://folk.uio.no/hpl}}{hpl}\footnote{\texttt{http://folk.uio.no/hpl}}. Also \Verb!file:///! works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html} }{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the \Verb!latex! format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes}\footnote{\texttt{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes\_formulas}} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}\footnote{\texttt{http://www.springer.com/mathematics/computational+science+\%26+engineering/book/978-3-642-23098-1}}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a \Verb!_static*! folder.

More tough tests: repeated URLs whose footnotes when using the
\Verb!--latex-printed! option must be correct. We have
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, \href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, and
\href{{http://google.com}}{google}\footnote{\texttt{http://google.com}}, which should result in exactly three
footnotes.

\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash-bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}).

Many of the next environments will fail in non-latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.


\section{Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}

\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error

\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use \Verb!r = random.random()! and define head as \Verb!r <= 0.5!.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
\Verb!r = random.randint(1,2)! and define head when \Verb!r! is 1.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
If the \Verb!random.random()! function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Code:
\begin{minted}[fontsize=\fontsize{9pt}{9pt},linenos=false,mathescape,baselinestretch=1.0,fontfamily=tt,xleftmargin=7mm]{python}
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
\end{minted}
% --- end solution of exercise ---
Filenames: \Verb!flip_coin.py!, \Verb!flip_coin.pdf!.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---

\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}

\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard \Verb!random! module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}

\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate \Verb!n! points on a circle:

\begin{python:nt}
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\end{python:nt}

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the \Verb!circle! function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the \Verb!numpy.random! module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% --- begin answer of exercise ---
\paragraph{Answer.}
Here goes the short answer to part a).
% --- end answer of exercise ---


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution to part a).
% --- end solution of exercise ---

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: \Verb!norm.py!.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: \Verb!circles.pdf!.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}

\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
\[ \hbox{math in solution: } a = b \]
And code \Verb!a=b! in this solution:
\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
a = b  # code in solution
\end{Verbatim}
End of solution is here.
% --- end solution of exercise ---


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code returning $x+1$ in hint:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
def func(x):
    return x + 1  # with code in hint
\end{Verbatim}
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: \Verb!subexer_a.pdf!.


% --- begin answer of exercise ---
\paragraph{Answer.}
Short answer to subexercise a).
With math in answer: $a=b$.
% --- end answer of exercise ---

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: \Verb!subexer_b.pdf!.


% --- begin solution of exercise ---
\paragraph{Solution.}
Here goes the solution of this subexercise.
% --- end solution of exercise ---

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code \Verb!lambda x: x+2! is correctly placed here:

\begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
lambda x: x+2
\end{Verbatim}

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples-as-exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.


\section{More Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}

\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: \Verb!verify_formula.py!.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for pdflatex}

\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: \Verb!selc_composed.pdf!.

\end{exercise}
% --- end exercise ---




\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.


\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\definecolor{hintbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{hintbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/hint.pdf}
\vskip-0.3in\hskip1.5in{\large\bf HINT} \\[0.4cm]
Here is a hint.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{warningbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/warning.pdf}
\vskip-0.3in\hskip1.5in{\large\bf WARNING} \\[0.4cm]
And here is a warning about something to pay attention to.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{summarybackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/summary.pdf}
\vskip-0.3in\hskip1.5in{\large\bf SUMMARY} \\[0.4cm]
Much testing in this document, otherwise stupid content.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{noticebackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/notice.pdf}
\vskip-0.3in\hskip1.5in{\large\bf NOTICE} \\[0.4cm]
Ah, we are close to the end.
With math:
\[ p=q\]
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{questionbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{questionbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/question.pdf}
\vskip-0.3in\hskip1.5in{\large\bf QUESTION} \\[0.4cm]
So, how many admonition environments does Doconce support?
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
% ------------------- end of main content ---------------


\printindex

\end{document}


************** File: testdoc.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)



A Document for Testing Doconce
==============================

:Author: Hans Petter Langtangen (hpl at simula.no), Kaare Dump, A. Dummy Author, I. S. Overworked, J. Doe (j_doe at cyberspace.com)
:Date: Jan 32, 2100

.. contents:: Table of Contents
   :depth: 2



.. !split


The format of this document is
rst

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

.. Cannot demonstrate chapter headings since abstract and chapter

.. is mutually exclusive in LaTeX


.. _sec1:


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line



..

    Here are two lines that make up
    a block quote.

.. !split and check if these extra words are included properly in the comment


Subsection 1
------------

More text, with a reference back to the section `Section 1`_ and further
to the section `URLs`_. 
.. sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console


Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


.. This one tests a + sign before a code environment

C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

.. The next should get correctly typset in sphinx (cod is fcod)

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end



System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test ``verbatim inline font`` especially with ``a newline
inside the text`` and an exclamation mark at the end: ``BEGIN``! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the ``verb`` typesetting... Also test backslashes
like ``\begin`` and ``\end`` in inline verbatim text.

.. _subsec:ex:

Subsection 2
------------

Test of figures. In particular we refer to Figure `fig:impact`_ in which
there is a flow.


.. _fig:impact:

.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200

   *Visualization of flow by streamtubes*  (fig:impact)


Figures without captions are allowed.


.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200



Test of movies.

.. raw:: html
        
        <embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p>
        <em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
        </p>



.. Test empty caption:


.. raw:: html
        
        <embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p>
        <em></em>
        </p>



.. Test wrong syntax and multi-line caption


.. raw:: html
        
        <p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
        <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>



.. Check out the correct with and height of YouTube movies from the

.. embed command that the YouTube page can generate


.. raw:: html
        
        <iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>
        
        <em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>
        



.. Test multi-line caption in figure


Here is figure `myfig`_ with a long multi-line caption
and an extra space before the FIGURE keyword.


.. _myfig:

.. figure:: ../doc/manual/figs/wavepacket_0001.png
   :width: 500

   *A long caption spanning several lines and containing verbatim words like ``my_file_v1`` and ``my_file_v2`` as well as math with subscript as in $t_{i+1}$*  (myfig)


Movie `mymov`_ has a similar problem.

.. Must be a blank line after MOVIE or FIGURE to detect this problem


.. Test URL as figure name



.. figure:: https://doconce.googlecode.com/hg/doc/blog/f_plot.png
   :width: 500



.. Test wikimedia type of files that otherwise reside in subdirs


.. Somewhat challenging heading with latex math, \t, \n, ? and parenthesis


.. _decay:sec:theta:

The \theta parameter (not \nabla?)
----------------------------------

Functions do not always need to be advanced, here is one
involving \theta::


        def f(theta):
            return theta**2


*More on \theta.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
\frac{1}{2}, {1/2}, \pmb{x}, \frac{Du}{dt},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the ``.tex`` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



.. begin theorem


*Theorem 5.* Let a=1 and b=2. Then c=3.
.. end theorem


.. begin proof

*Proof.* Since c=a+b, the result follows from straightforward addition.
END
.. end proof


As we see, the proof of Theorem 5 is a modest
achievement.


.. _subsec:table:

Tables
------


.. index with comma could fool sphinx


Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

========  ========  ========  ========  
   i        h_i     \bar T_i  ``L_i``   
========  ========  ========  ========  
0                0       288   -0.0065  
1           11,000       216       0.0  
2           20,000       216     0.001  
3           32,000       228    0.0028  
4           47,000       270       0.0  
5           51,000       270   -0.0028  
6           71,000       214   ``NaN``  
========  ========  ========  ========  

And add one with verbatim headings (with underscores),
and rows starting with ``|-`` because of a negative number,
and ``|`` right after verbatim word (with no space):

=============  =============  =============  =============  
    exact         ``v_1``     a_i + ``v_2``   ``verb_3_``   
=============  =============  =============  =============  
            9           9.62           5.57           8.98  
          -20         -23.39          -7.65         -19.93  
           10          17.74          -4.50           9.96  
            0          -9.19           4.13          -0.26  
=============  =============  =============  =============  


A test of verbatim words in heading with subscript a_i: ``my_file_v1`` and ``my_file_v2``
-----------------------------------------------------------------------------------------

*Files ``my_file_v1.py`` and ``my_file_v2.py`` define some math a_{i-1}.* Here
is
some text.




.. --- begin exercise ---


.. _Example:

Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with ``Example:``
and then, with the command-line option ``--examples-as-exercises`` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

.. --- end exercise ---



.. _subsubsec:ex:

URLs
----

Testing of URLs: hpl's home page `hpl <http://folk.uio.no/hpl>`_, or
the entire URL if desired, `<http://folk.uio.no/hpl>`_.  Here is a
plain file link `<testdoc.do.txt>`_, or `<testdoc.do.txt>`_, or
`<testdoc.do.txt>`_ or `<testdoc.do.txt>`_ or `a link with
newline <testdoc.do.txt>`_. Can test spaces with the link with word
too: `hpl <http://folk.uio.no/hpl>`_ or `hpl <http://folk.uio.no/hpl>`_. Also ``file:///`` works: `link to a
file <file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>`_ is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in `<http://folk.uio.no/hpl>`_, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the ``latex`` format:
`Newton-Cotes <http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_ formulas
and a `good book <http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>`_. Need to test
Newton-Cotes with percentage in URL too:
`<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_
and `<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>`_ which has a shebang.

.. Comments should be inserted outside paragraphs (because in the rst

.. format extra blanks make a paragraph break).


.. Note that when there is no http: or file:, it can be a file link

.. if the link name is URL, url, "URL", or "url". Such files should,

.. if rst output is desired, but placed in a ``_static*`` folder.


More tough tests: repeated URLs whose footnotes when using the
``--latex-printed`` option must be correct. We have
`google <http://google.com>`_, `google <http://google.com>`_, and
`google <http://google.com>`_, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::

        \begin{equation}
        {\partial u\over\partial t} = \nabla^2 u label{my:eq1}
        \end{equation}

We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::

        \begin{align*}
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        \end{align*}




More mathematical typesetting is demonstrated in the coming exercises.

Below, we have `Problem 1: Flip a Coin`_ and `Project 1: Compute a Probability`_,
as well as `Project 2: Explore Distributions of Random Circles`_ and `Project 3: References in a headings do not work well in rst`_, and in
between there we have `Exercise 3: Make references to projects and problems`_.

Exercises
=========



.. --- begin exercise ---


.. _demo:ex:1:

Problem 1: Flip a Coin
----------------------
.. keywords = random numbers; Monte Carlo simulation


.. Torture tests


Make a program that simulates flipping a coin N times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


.. Test syntax error





Remarks  (1)
~~~~~~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.
.. --- begin hint in exercise ---


*Hint 1.* Use ``r = random.random()`` and define head as ``r <= 0.5``.
.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Draw an integer among \{1,2\} with
``r = random.randint(1,2)`` and define head when ``r`` is 1.
.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* If the ``random.random()`` function returns a number <1/2, let it be
head, otherwise tail. Repeat this N number of times.
.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

.. --- end solution of exercise ---

Filenames: ``flip_coin.py``, ``flip_coin.pdf``.
.. solution files: mysol.txt, mysol_flip_coin.py, yet_another.file


.. --- end exercise ---



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.



.. --- begin exercise ---


.. _demo:ex:2:

Project 1: Compute a Probability
--------------------------------

.. Minimalistic exercise



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval [0,1)?

.. --- begin hint in exercise ---


*Hint.* To answer this question empirically, let a program
draw N such random numbers using Python's standard ``random`` module,
count how many of them, M, that fall in the interval (0.5,0.6), and
compute the probability as M/N.
.. --- end hint in exercise ---


.. --- end exercise ---





.. --- begin exercise ---


.. _proj:circle1:

Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where R is the radius of the circle, (x_0,y_0) is the
center point, and t is a parameter in the unit interval [0,1].
For any t, (x,y) is a point on the circle.
The formula can be used to generate ``n`` points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)


.. Often in an exercise we have some comments about the solution

.. which we normally want to keep where they are.


The goal of this project is to draw N circles with random
center and radius. Plot each circle using the ``circle`` function
above.


*a)* Let R be normally distributed and (x_0,y_0) uniformly distributed.

.. --- begin hint in exercise ---


*Hint.* Use the ``numpy.random`` module to draw the
x_0, y_0, and R quantities.
.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* Here goes the short answer to part a).
.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Here goes a full solution to part a).
.. --- end solution of exercise ---


*b)* Let R be uniformly distributed and (x_0,y_0) normally distributed.
Filename: ``norm.py``.

*c)* Let R and (x_0,y_0) be normally distributed.

Filename: ``circles.pdf``.

.. Closing remarks for this Project


Remarks  (2)
~~~~~~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


.. --- end exercise ---





.. --- begin exercise ---


.. _exer:dist:

Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





.. No meaning in this weired test example:

The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


.. --- begin solution of exercise ---

*Solution.* Here goes a full solution of the whole exercise.
With some math a=b in this solution::

        \[ \hbox{math in solution: } a = b \]

And code ``a=b`` in this solution::


        a = b  # code in solution

End of solution is here.
.. --- end solution of exercise ---



*a)* Subexercises are numbered a), b), etc.

.. --- begin hint in exercise ---


*Hint 1.* First hint to subexercise a).
With math a=b in hint::

        \[ a=b. \]

And with code returning x+1 in hint::


        def func(x):
            return x + 1  # with code in hint

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Second hint to subexercise a).
.. --- end hint in exercise ---

Filename: ``subexer_a.pdf``.


.. --- begin answer of exercise ---

*Answer.* Short answer to subexercise a).
With math in answer: a=b.
.. --- end answer of exercise ---


*b)* Here goes the text for subexercise b).


Some math \cos^2 x + \sin^2 x = 1 written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]


.. --- begin hint in exercise ---


*Hint.* A hint for this subexercise.
.. --- end hint in exercise ---

Filename: ``subexer_b.pdf``.


.. --- begin solution of exercise ---

*Solution.* Here goes the solution of this subexercise.
.. --- end solution of exercise ---


.. Closing remarks for this Exercise


Remarks  (3)
~~~~~~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


.. --- end exercise ---





.. --- begin exercise ---


Some exercise without the "Exercise:" prefix
--------------------------------------------

.. Another minimalistic exercise


Just some text. And some math saying that e^0=1 on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code ``lambda x: x+2`` is correctly placed here::


        lambda x: x+2


.. --- end exercise ---





.. --- begin exercise ---


Example 2: Just an example
--------------------------

.. This example needs the --examples-as-exercises option, otherwise

.. it is just typeset as it is written.



*a)* What is the capital of Norway?

*Answer.* Oslo.

.. --- end exercise ---



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============



.. --- begin exercise ---


.. _exer:some:formula:

Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from `Project 2: Explore Distributions of Random Circles`_ or `Problem 1: Flip a Coin`_
and verify it.
Filename: ``verify_formula.py``.

.. --- end exercise ---





.. --- begin exercise ---


.. _exer:you:

Project 3: References in a headings do not work well in rst
-----------------------------------------------------------

Refer to the previous exercise as `Exercise 3: Make references to projects and problems`_,
the two before that as `Project 1: Compute a Probability`_ and `Project 2: Explore Distributions of Random Circles`_,
and this one as `Project 3: References in a headings do not work well in rst`_.
Filename: ``selc_composed.pdf``.

.. --- end exercise ---



Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles  (1)
---------------------------------------

Without label.

.. _test:title:id1:

Appendix: Testing identical titles  (2)
---------------------------------------

With label.

.. _test:title:id2:

Appendix: Testing identical titles  (3)
---------------------------------------

With label.

Appendix: Testing identical titles  (4)
---------------------------------------

Without label.


.. hint::
   Here is a hint.


.. warning::
    And here is a warning about something to pay attention to.

.. important::
   Much testing in this document, otherwise stupid content.

.. note::
   Ah, we are close to the end.
   With math::

        \[ p=q\]



.. attention::
   So, how many admonition environments does Doconce support?

************** File: testdoc.sphinx.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)



A Document for Testing Doconce
==============================

:Author: Hans Petter Langtangen (hpl at simula.no), Kaare Dump, A. Dummy Author, I. S. Overworked, J. Doe (j_doe at cyberspace.com)
:Date: Jan 32, 2100

.. !split


The format of this document is
sphinx

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

.. Cannot demonstrate chapter headings since abstract and chapter

.. is mutually exclusive in LaTeX


.. _sec1:


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line



..

    Here are two lines that make up
    a block quote.

.. !split and check if these extra words are included properly in the comment


Subsection 1
------------

More text, with a reference back to the section :ref:`sec1` and further
to the section :ref:`subsubsec:ex`. 
.. index:: somefunc function


.. sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console


Let's do some copying from files too. First from subroutine up to the very end,


.. code-block:: fortran

              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine,

.. code-block:: fortran

              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file:

.. code-block:: fortran

        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python:

.. code-block:: text


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as


.. code-block:: python

        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial:

.. raw:: html

        <iframe width="950" height="500" frameborder="0"
                src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
        </iframe>


Then Cython:

.. code-block:: cython

        cpdef f(double x):
            return x + 1


.. This one tests a + sign before a code environment

C++:

.. code-block:: c++

        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

.. The next should get correctly typset in sphinx (cod is fcod)

And a little bit of Fortran:


.. code-block:: text


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as


.. code-block:: python

              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end



System call:

.. code-block:: console

        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test ``verbatim inline font`` especially with ``a newline
inside the text`` and an exclamation mark at the end: ``BEGIN``! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the ``verb`` typesetting... Also test backslashes
like ``\begin`` and ``\end`` in inline verbatim text.

.. _subsec:ex:

Subsection 2
------------

.. index:: figures


Test of figures. In particular we refer to Figure :ref:`fig:impact` in which
there is a flow.


.. _fig:impact:

.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200

   *Visualization of flow by streamtubes*


Figures without captions are allowed.


.. figure:: ../doc/manual/figs/streamtubes.png
   :width: 200




.. index:: movies

Test of movies.

.. raw:: html
        
        <embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p>
        <em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
        </p>



.. Test empty caption:


.. raw:: html
        
        <embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
        <p>
        <em></em>
        </p>



.. Test wrong syntax and multi-line caption


.. raw:: html
        
        <p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
        <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>



.. Check out the correct with and height of YouTube movies from the

.. embed command that the YouTube page can generate


.. raw:: html
        
        <iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>
        
        <em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>
        



.. Test multi-line caption in figure


Here is figure :ref:`myfig` with a long multi-line caption
and an extra space before the FIGURE keyword.


.. _myfig:

.. figure:: ../doc/manual/figs/wavepacket_0001.png
   :width: 500

   A long caption spanning several lines and containing verbatim words like ``my_file_v1`` and ``my_file_v2`` as well as math with subscript as in :math:`t_{i+1}`


Movie :ref:`mymov` has a similar problem.

.. Must be a blank line after MOVIE or FIGURE to detect this problem


.. Test URL as figure name



.. figure:: https://doconce.googlecode.com/hg/doc/blog/f_plot.png
   :width: 500



.. Test wikimedia type of files that otherwise reside in subdirs


.. Somewhat challenging heading with latex math, \t, \n, ? and parenthesis


.. _decay:sec:theta:

The :math:`\theta` parameter (not :math:`\nabla`?)
--------------------------------------------------

Functions do not always need to be advanced, here is one
involving :math:`\theta`:

.. code-block:: text


        def f(theta):
            return theta**2


*More on :math:`\theta`.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
:math:`\frac{1}{2}`, :math:`{1/2}`, :math:`\pmb{x}`, :math:`\frac{Du}{dt}`,
both inline and in block:


.. math::
        
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        


Or with align with label and numbers:


.. math::
   :label: aligneq1
        
        \frac{Du}{dt} = 0
        
        



.. math::
          
        \frac{1}{2} = {1/2}
        



.. math::
   :label: aligneq2
          
        \frac{1}{2}\pmb{x} = \pmb{n}
        
        


Sphinx makes a fix here and splits align into multiple equation
environments.

Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the ``.tex`` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



.. begin theorem


*Theorem 5.* Let :math:`a=1` and :math:`b=2`. Then :math:`c=3`.
.. end theorem


.. begin proof

*Proof.* Since :math:`c=a+b`, the result follows from straightforward addition.
:math:`\Diamond`
.. end proof


As we see, the proof of Theorem 5 is a modest
achievement.


.. _subsec:table:

Tables
------


.. index:: test index with verbatim text which is possible


.. index:: test two (separate) verbatim expressions which is also possible


.. index::
   single: index with; subindex


.. index with comma could fool sphinx


.. index::
   single: index, with comma, and one more


Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads

.. code-block:: text


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

================  ================  ================  ================  
   :math:`i`        :math:`h_i`     :math:`\bar T_i`      ``L_i``       
================  ================  ================  ================  
0                                0               288           -0.0065  
1                           11,000               216               0.0  
2                           20,000               216             0.001  
3                           32,000               228            0.0028  
4                           47,000               270               0.0  
5                           51,000               270           -0.0028  
6                           71,000               214           ``NaN``  
================  ================  ================  ================  

And add one with verbatim headings (with underscores),
and rows starting with ``|-`` because of a negative number,
and ``|`` right after verbatim word (with no space):

=====================  =====================  =====================  =====================  
        exact                 ``v_1``         :math:`a_i` + ``v_2``       ``verb_3_``       
=====================  =====================  =====================  =====================  
                    9                   9.62                   5.57                   8.98  
                  -20                 -23.39                  -7.65                 -19.93  
                   10                  17.74                  -4.50                   9.96  
                    0                  -9.19                   4.13                  -0.26  
=====================  =====================  =====================  =====================  


A test of verbatim words in heading with subscript :math:`a_i`: ``my_file_v1`` and ``my_file_v2``
-------------------------------------------------------------------------------------------------

*Files ``my_file_v1.py`` and ``my_file_v2.py`` define some math :math:`a_{i-1}`.* Here
is
some text.




.. --- begin exercise ---


.. _Example:

Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with ``Example:``
and then, with the command-line option ``--examples-as-exercises`` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

.. --- end exercise ---



.. _subsubsec:ex:

URLs
----

Testing of URLs: hpl's home page `hpl <http://folk.uio.no/hpl>`_, or
the entire URL if desired, `<http://folk.uio.no/hpl>`_.  Here is a
plain file link `<testdoc.do.txt>`_, or `<testdoc.do.txt>`_, or
`<testdoc.do.txt>`_ or `<testdoc.do.txt>`_ or `a link with
newline <testdoc.do.txt>`_. Can test spaces with the link with word
too: `hpl <http://folk.uio.no/hpl>`_ or `hpl <http://folk.uio.no/hpl>`_. Also ``file:///`` works: `link to a
file <file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>`_ is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in `<http://folk.uio.no/hpl>`_, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the ``latex`` format:
`Newton-Cotes <http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_ formulas
and a `good book <http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>`_. Need to test
Newton-Cotes with percentage in URL too:
`<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>`_
and `<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>`_ which has a shebang.

.. Comments should be inserted outside paragraphs (because in the rst

.. format extra blanks make a paragraph break).


.. Note that when there is no http: or file:, it can be a file link

.. if the link name is URL, url, "URL", or "url". Such files should,

.. if rst output is desired, but placed in a ``_static*`` folder.


More tough tests: repeated URLs whose footnotes when using the
``--latex-printed`` option must be correct. We have
`google <http://google.com>`_, `google <http://google.com>`_, and
`google <http://google.com>`_, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment:

.. math::
         a = b + c 

or with number and label, as in :eq:`my:eq1`, using the equation environment:

.. math::
   :label: my:eq1
        
        {\partial u\over\partial t} = \nabla^2 u 
        

We can refer to this equation by :eq:`my:eq1`.

Here is a system without equation numbers, using the align-astrisk environment:

.. math::
        
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        



And here is a system of equations with labels in an align environment:

.. math::
   :label: eq1
        
        a = q + 4 + 5+ 6  
        



.. math::
   :label: eq2
          
        b = \nabla^2 u + \nabla^4 x 
        

We can refer to :eq:`eq1`-:eq:`eq2`.

Many of the next environments will fail in non-latex formats.
Testing multiline:

.. math::
   :label: multiline:eq1
        
        a = b = q + \\ 
          f + \nabla\cdot\nabla u
        
        

Testing split:

.. math::
   :label: split:envir:eq
        
        
        
        a = b = q &+ \\ 
          & f + \nabla\cdot\nabla u
        
        

We can refer to the last equation by :eq:`split:envir:eq`.

Testing gather:

.. math::
        
        a = b \\ 
        c = d + 7 + 9
        


Testing alignat:

.. math::
        \begin{alignat}{2}
        a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0  \\ 
        b &= \nabla^2 u + \nabla^4 x & x\in\Omega 
        \end{alignat}

Let us refer to :eq:`eq1`-:eq:`eq2` again, and to the
alignat variant :eq:`eq1a`-:eq:`eq2a`, and to :eq:`my:eq1`.

Testing eqnarray:

.. math::
        
        {\partial u\over\partial t}  &=  \nabla^2 u + f, \\ 
        {\partial v\over\partial t}  &=  \nabla\cdot(q(u)\nabla v) + g 
        


More mathematical typesetting is demonstrated in the coming exercises.

Below, we have :ref:`demo:ex:1` and :ref:`demo:ex:2`,
as well as :ref:`proj:circle1` and :ref:`exer:you`, and in
between there we have :ref:`exer:some:formula`.

Exercises
=========



.. --- begin exercise ---


.. _demo:ex:1:

Problem 1: Flip a Coin
----------------------
.. keywords = random numbers; Monte Carlo simulation


.. Torture tests


Make a program that simulates flipping a coin :math:`N` times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


.. Test syntax error





Remarks  (1)
~~~~~~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.
.. --- begin hint in exercise ---


*Hint 1.* Use ``r = random.random()`` and define head as ``r <= 0.5``.
.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Draw an integer among :math:`\{1,2\}` with
``r = random.randint(1,2)`` and define head when ``r`` is 1.
.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* If the ``random.random()`` function returns a number :math:`<1/2`, let it be
head, otherwise tail. Repeat this :math:`N` number of times.
.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Code:

.. code-block:: python

        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

.. --- end solution of exercise ---

Filenames: ``flip_coin.py``, ``flip_coin.pdf``.
.. solution files: mysol.txt, mysol_flip_coin.py, yet_another.file


.. --- end exercise ---



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.



.. --- begin exercise ---


.. _demo:ex:2:

Project 1: Compute a Probability
--------------------------------

.. Minimalistic exercise



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval :math:`[0,1)`?

.. --- begin hint in exercise ---


*Hint.* To answer this question empirically, let a program
draw :math:`N` such random numbers using Python's standard ``random`` module,
count how many of them, :math:`M`, that fall in the interval :math:`(0.5,0.6)`, and
compute the probability as :math:`M/N`.
.. --- end hint in exercise ---


.. --- end exercise ---





.. --- begin exercise ---


.. _proj:circle1:

Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by


.. math::
        
        x = x_0 + R\cos 2\pi t,
        



.. math::
          
        y = y_0 + R\sin 2\pi t,
        

where :math:`R` is the radius of the circle, :math:`(x_0,y_0)` is the
center point, and :math:`t` is a parameter in the unit interval :math:`[0,1]`.
For any :math:`t`, :math:`(x,y)` is a point on the circle.
The formula can be used to generate ``n`` points on a circle:


.. code-block:: python

        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)


.. Often in an exercise we have some comments about the solution

.. which we normally want to keep where they are.


The goal of this project is to draw :math:`N` circles with random
center and radius. Plot each circle using the ``circle`` function
above.


*a)* Let :math:`R` be normally distributed and :math:`(x_0,y_0)` uniformly distributed.

.. --- begin hint in exercise ---


*Hint.* Use the ``numpy.random`` module to draw the
:math:`x_0`, :math:`y_0`, and :math:`R` quantities.
.. --- end hint in exercise ---



.. --- begin answer of exercise ---

*Answer.* Here goes the short answer to part a).
.. --- end answer of exercise ---



.. --- begin solution of exercise ---

*Solution.* Here goes a full solution to part a).
.. --- end solution of exercise ---


*b)* Let :math:`R` be uniformly distributed and :math:`(x_0,y_0)` normally distributed.
Filename: ``norm.py``.

*c)* Let :math:`R` and :math:`(x_0,y_0)` be normally distributed.

Filename: ``circles.pdf``.

.. Closing remarks for this Project


Remarks  (2)
~~~~~~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


.. --- end exercise ---





.. --- begin exercise ---


.. _exer:dist:

Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





.. No meaning in this weired test example:

The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


.. --- begin solution of exercise ---

*Solution.* Here goes a full solution of the whole exercise.
With some math :math:`a=b` in this solution:

.. math::
         \hbox{math in solution: } a = b 

And code ``a=b`` in this solution:

.. code-block:: text


        a = b  # code in solution

End of solution is here.
.. --- end solution of exercise ---



*a)* Subexercises are numbered a), b), etc.

.. --- begin hint in exercise ---


*Hint 1.* First hint to subexercise a).
With math :math:`a=b` in hint:


.. math::
         a=b. 

And with code returning :math:`x+1` in hint:


.. code-block:: text


        def func(x):
            return x + 1  # with code in hint

.. --- end hint in exercise ---


.. --- begin hint in exercise ---


*Hint 2.* Second hint to subexercise a).
.. --- end hint in exercise ---

Filename: ``subexer_a.pdf``.


.. --- begin answer of exercise ---

*Answer.* Short answer to subexercise a).
With math in answer: :math:`a=b`.
.. --- end answer of exercise ---


*b)* Here goes the text for subexercise b).


Some math :math:`\cos^2 x + \sin^2 x = 1` written one a single line:


.. math::
         \cos^2 x + \sin^2 x = 1 \thinspace .


.. --- begin hint in exercise ---


*Hint.* A hint for this subexercise.
.. --- end hint in exercise ---

Filename: ``subexer_b.pdf``.


.. --- begin solution of exercise ---

*Solution.* Here goes the solution of this subexercise.
.. --- end solution of exercise ---


.. Closing remarks for this Exercise


Remarks  (3)
~~~~~~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


.. --- end exercise ---





.. --- begin exercise ---


Some exercise without the "Exercise:" prefix
--------------------------------------------

.. Another minimalistic exercise


Just some text. And some math saying that :math:`e^0=1` on a single line,
to test that math block insertion is correct:


.. math::
         \exp{(0)} = 1 


And a test that the code ``lambda x: x+2`` is correctly placed here:


.. code-block:: text


        lambda x: x+2


.. --- end exercise ---





.. --- begin exercise ---


Example 2: Just an example
--------------------------

.. This example needs the --examples-as-exercises option, otherwise

.. it is just typeset as it is written.



*a)* What is the capital of Norway?

*Answer.* Oslo.

.. --- end exercise ---



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============



.. --- begin exercise ---


.. _exer:some:formula:

Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from :ref:`proj:circle1` or :ref:`demo:ex:1`
and verify it.
Filename: ``verify_formula.py``.

.. --- end exercise ---





.. --- begin exercise ---


.. _exer:you:

Project 3: References in a headings do not work well in sphinx
--------------------------------------------------------------

Refer to the previous exercise as :ref:`exer:some:formula`,
the two before that as :ref:`demo:ex:2` and :ref:`proj:circle1`,
and this one as :ref:`exer:you`.
Filename: ``selc_composed.pdf``.

.. --- end exercise ---



Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles  (1)
---------------------------------------

Without label.

.. _test:title:id1:

Appendix: Testing identical titles  (2)
---------------------------------------

With label.

.. _test:title:id2:

Appendix: Testing identical titles  (3)
---------------------------------------

With label.

Appendix: Testing identical titles  (4)
---------------------------------------

Without label.


.. hint::
   Here is a hint.


.. warning::
    And here is a warning about something to pay attention to.

.. important::
   Much testing in this document, otherwise stupid content.

.. note::
   Ah, we are close to the end.
   With math:

.. math::
         p=q



.. attention::
   So, how many admonition environments does Doconce support?

************** File: testdoc.gwiki *****************


#summary A Document for Testing Doconce

By *Hans Petter Langtangen* (hpl at simula.no), *Kaare Dump*, *A. Dummy Author*, *I. S. Overworked*, and *J. Doe* (j_doe at cyberspace.com)

==== Jan 32, 2100 ====

<wiki: toc max_depth="2" />



<wiki:comment> !split </wiki:comment>

The format of this document is
gwiki

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<wiki:comment> Cannot demonstrate chapter headings since abstract and chapter </wiki:comment>
<wiki:comment> is mutually exclusive in LaTeX </wiki:comment>



== Section 1 ==

Here is a nested list:


  * item1
  * item2
  * item3 which continues    on the next line to test that feature
  * and a sublist

    * with indented subitem1
    * and a subitem2


  * and perhaps an ordered sublist

   # first item
   # second item,      continuing on a new line



    Here are two lines that make up
    a block quote.

<wiki:comment> !split and check if these extra words are included properly in the comment </wiki:comment>

==== Subsection 1 ====

More text, with a reference back to the section [#Section_1] and further
to the section [#URLs]. 
<wiki:comment> sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console </wiki:comment>

Let's do some copying from files too. First from subroutine up to the very end,

{{{
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}
and then just the subroutine,
{{{

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
}}}
and finally the complete file:
{{{
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}

Testing other code environments. First Python:
{{{
!bc pycod
def f(x):
    return x+1
!ec
}}}
which gets rendered as

{{{
def f(x):
    return x+1
}}}

Now a complete program to be shown via Python Online Tutorial:
{{{
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
}}}

Then Cython:
{{{
cpdef f(double x):
    return x + 1
}}}

<wiki:comment> This one tests a + sign before a code environment </wiki:comment>
C++:
{{{
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
}}}
<wiki:comment> The next should get correctly typset in sphinx (cod is fcod) </wiki:comment>
And a little bit of Fortran:

{{{
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
}}}
which then is typeset as

{{{
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
}}}


System call:
{{{
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
}}}

It is time to test `verbatim inline font` especially with `a newline
inside the text` and an exclamation mark at the end: `BEGIN`! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the `verb` typesetting... Also test backslashes
like `\begin` and `\end` in inline verbatim text.

==== Subsection 2 ====

Test of figures. In particular we refer to Figure fig:impact in which
there is a flow.



---------------------------------------------------------------

Figure:  Visualization of flow by streamtubes. (fig:impact)

(the URL of the image file ../doc/manual/figs/streamtubes.png must be inserted here)

<wiki:comment>
Put the figure file ../doc/manual/figs/streamtubes.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



Figures without captions are allowed.



---------------------------------------------------------------

Figure: 

(the URL of the image file ../doc/manual/figs/streamtubes.png must be inserted here)

<wiki:comment>
Put the figure file ../doc/manual/figs/streamtubes.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



Test of movies.

 Mjolnir tsunami (by Sylfest Glimsdal). (Movie ../doc/manual/figs/mjolnir.mpeg: play mjolnir.html)

<wiki:comment> Test empty caption: </wiki:comment>

 (Movie ../doc/manual/figs/wavepacket.mpeg: play wavepacket.html)

<wiki:comment> Test wrong syntax and multi-line caption </wiki:comment>


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files `../doc/manual/figs/wavepacket_*.png` in wavepacket_0001.html)


<wiki:comment> Check out the correct with and height of YouTube movies from the </wiki:comment>
<wiki:comment> embed command that the YouTube page can generate </wiki:comment>

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: http://www.youtube.com/watch?v=_O7iUiftbKU

<wiki:comment> Test multi-line caption in figure </wiki:comment>

Here is figure myfig with a long multi-line caption
and an extra space before the FIGURE keyword.



---------------------------------------------------------------

Figure:  A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in `t_{i+1}`. (myfig) 

(the URL of the image file ../doc/manual/figs/wavepacket_0001.png must be inserted here)

<wiki:comment>
Put the figure file ../doc/manual/figs/wavepacket_0001.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



Movie mymov has a similar problem.

<wiki:comment> Must be a blank line after MOVIE or FIGURE to detect this problem </wiki:comment>

<wiki:comment> Test URL as figure name </wiki:comment>



---------------------------------------------------------------

Figure: 

(the URL of the image file https://doconce.googlecode.com/hg/doc/blog/f_plot.png must be inserted here)

<wiki:comment>
Put the figure file https://doconce.googlecode.com/hg/doc/blog/f_plot.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



<wiki:comment> Test wikimedia type of files that otherwise reside in subdirs </wiki:comment>
<wiki:comment> #if FORMAT == "mwiki" </wiki:comment>


---------------------------------------------------------------

Figure:  This is a wikimedia figure file.

(the URL of the image file testfigs/df_plot.png must be inserted here)

<wiki:comment>
Put the figure file testfigs/df_plot.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------



<wiki:comment> Non-uploaded file with no caption </wiki:comment>


---------------------------------------------------------------

Figure: 

(the URL of the image file testfigs/df2s8765s_plot.png must be inserted here)

<wiki:comment>
Put the figure file testfigs/df2s8765s_plot.png on the web (e.g., as part of the
googlecode repository) and substitute the line above with the URL.
</wiki:comment>
---------------------------------------------------------------


<wiki:comment> #endif </wiki:comment>

<wiki:comment> Somewhat challenging heading with latex math, \t, \n, ? and parenthesis </wiki:comment>

==== The `\theta` parameter (not `\nabla`?) ====

Functions do not always need to be advanced, here is one
involving `\theta`:
{{{
def f(theta):
    return theta**2
}}}

*More on `\theta`.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
`\frac{1}{2}`, `{1/2}`, `\pmb{x}`, `\frac{Du}{dt}`,
both inline and in block:

{{{
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
}}}

Or with align with label and numbers:

{{{
\begin{align}
\frac{Du}{dt} &= 0
label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
label{aligneq2}
\end{align}
}}}

==== Custom Environments ====

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the `.tex` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<wiki:comment> begin theorem </wiki:comment>



*Theorem 5.* Let `a=1` and `b=2`. Then `c=3`.
<wiki:comment> end theorem </wiki:comment>

<wiki:comment> begin proof </wiki:comment>
*Proof.* Since `c=a+b`, the result follows from straightforward addition.
`END`
<wiki:comment> end proof </wiki:comment>

As we see, the proof of Theorem 5 is a modest
achievement.

==== Tables ====

<wiki:comment> index with comma could fool sphinx </wiki:comment>

Let us take this table from the manual:



 ||      *time*       ||    *velocity*     ||  *acceleration*   ||
 ||  0.0              ||  1.4186           ||  -5.01            ||
 ||  2.0              ||  1.376512         ||  11.919           ||
 ||  4.0              ||  1.1E+1           ||  14.717624        ||



The Doconce source code reads
{{{
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
}}}

Here is yet another table to test that we can handle more than
one table:


 ||      *time*       ||    *velocity*     ||  *acceleration*   ||
 ||  0.0              ||  1.4186           ||  -5.01            ||
 ||  1.0              ||  1.376512         ||  11.919           ||
 ||  3.0              ||  1.1E+1           ||  14.717624        ||


And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


 ||     _`i`_       ||    _`h_i`_      ||  _`\bar T_i`_   ||    _`L_i`_      ||
 ||  0              ||  0              ||  288            ||  -0.0065        ||
 ||  1              ||  11,000         ||  216            ||  0.0            ||
 ||  2              ||  20,000         ||  216            ||  0.001          ||
 ||  3              ||  32,000         ||  228            ||  0.0028         ||
 ||  4              ||  47,000         ||  270            ||  0.0            ||
 ||  5              ||  51,000         ||  270            ||  -0.0028        ||
 ||  6              ||  71,000         ||  214            ||  `NaN`          ||


And add one with verbatim headings (with underscores),
and rows starting with `|-` because of a negative number,
and `|` right after verbatim word (with no space):


 ||      *exact*       ||      _`v_1`_       ||  _`a_i` + `v_2`_   ||    _`verb_3_`_     ||
 ||  9                 ||  9.62              ||  5.57              ||  8.98              ||
 ||  -20               ||  -23.39            ||  -7.65             ||  -19.93            ||
 ||  10                ||  17.74             ||  -4.50             ||  9.96              ||
 ||  0                 ||  -9.19             ||  4.13              ||  -0.26             ||

==== A test of verbatim words in heading with subscript `a_i`: `my_file_v1` and `my_file_v2` ====

*Files `my_file_v1.py` and `my_file_v2.py` define some math `a_{i-1}`.* Here
is
some text.




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Example 1: Examples can be typeset as exercises ====

Examples can start with a subsection heading starting with `Example:`
and then, with the command-line option `--examples-as-exercises` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<wiki:comment> --- end exercise --- </wiki:comment>

==== URLs ====

Testing of URLs: hpl's home page [http://folk.uio.no/hpl hpl], or
the entire URL if desired, http://folk.uio.no/hpl.  Here is a
plain file link testdoc.do.txt, or testdoc.do.txt, or
testdoc.do.txt or testdoc.do.txt or [testdoc.do.txt a link with
newline]. Can test spaces with the link with word
too: [http://folk.uio.no/hpl hpl] or [http://folk.uio.no/hpl hpl]. Also `file:///` works: [file:///home/hpl/vc/doconce/doc/demos/manual/manual.html link to a
file] is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the `latex` format:
[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas Newton-Cotes] formulas
and a [http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1 good book]. Need to test
Newton-Cotes with percentage in URL too:
http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.

<wiki:comment> Comments should be inserted outside paragraphs (because in the rst </wiki:comment>
<wiki:comment> format extra blanks make a paragraph break). </wiki:comment>

<wiki:comment> Note that when there is no http: or file:, it can be a file link </wiki:comment>
<wiki:comment> if the link name is URL, url, "URL", or "url". Such files should, </wiki:comment>
<wiki:comment> if rst output is desired, but placed in a `_static*` folder. </wiki:comment>

More tough tests: repeated URLs whose footnotes when using the
`--latex-printed` option must be correct. We have
[http://google.com google], [http://google.com google], and
[http://google.com google], which should result in exactly three
footnotes.

==== LaTeX Mathematics ====

Here is an equation without label using backslash-bracket environment:
{{{
\[ a = b + c \]
}}}
or with number and label, as in Equation (my:eq1), using the equation environment:
{{{
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u label{my:eq1}
\end{equation}
}}}
We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment:
{{{
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
}}}



More mathematical typesetting is demonstrated in the coming exercises.

Below, we have [#Problem_1:_Flip_a_Coin] and [#Project_1:_Compute_a_Probability],
as well as [#Project_2:_Explore_Distributions_of_Random_Circles] and [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_gwiki], and in
between there we have [#Exercise_3:_Make_references_to_projects_and_problems].



== Exercises ==

<wiki:comment> --- begin exercise --- </wiki:comment>

==== Problem 1: Flip a Coin ====

<wiki:comment> keywords = random numbers; Monte Carlo simulation </wiki:comment>

<wiki:comment> Torture tests </wiki:comment>

Make a program that simulates flipping a coin `N` times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<wiki:comment> Test syntax error </wiki:comment>

==== Remarks ====

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list


# Mark 1.
# Mark 2.<wiki:comment> --- begin hint in exercise --- </wiki:comment>


*Hint 1.* Use `r = random.random()` and define head as `r <= 0.5`.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint 2.* Draw an integer among `\{1,2\}` with
`r = random.randint(1,2)` and define head when `r` is 1.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
*Answer.* If the `random.random()` function returns a number `<1/2`, let it be
head, otherwise tail. Repeat this `N` number of times.
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Code:
{{{
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
}}}
<wiki:comment> --- end solution of exercise --- </wiki:comment>
Filenames: `flip_coin.py`, `flip_coin.pdf`.
<wiki:comment> solution files: mysol.txt, mysol_flip_coin.py, yet_another.file </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>

==== Not an exercise ====

Should be possible to stick a normal section in the middle of many
exercises.



<wiki:comment> --- begin exercise --- </wiki:comment>

==== Project 1: Compute a Probability ====

<wiki:comment> Minimalistic exercise </wiki:comment>


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval `[0,1)`?

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint.* To answer this question empirically, let a program
draw `N` such random numbers using Python's standard `random` module,
count how many of them, `M`, that fall in the interval `(0.5,0.6)`, and
compute the probability as `M/N`.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Project 2: Explore Distributions of Random Circles ====

The formula for a circle is given by

{{{
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
}}}
where `R` is the radius of the circle, `(x_0,y_0)` is the
center point, and `t` is a parameter in the unit interval `[0,1]`.
For any `t`, `(x,y)` is a point on the circle.
The formula can be used to generate `n` points on a circle:

{{{
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
}}}

<wiki:comment> Often in an exercise we have some comments about the solution </wiki:comment>
<wiki:comment> which we normally want to keep where they are. </wiki:comment>

The goal of this project is to draw `N` circles with random
center and radius. Plot each circle using the `circle` function
above.


*a)* Let `R` be normally distributed and `(x_0,y_0)` uniformly distributed.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint.* Use the `numpy.random` module to draw the
`x_0`, `y_0`, and `R` quantities.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
*Answer.* Here goes the short answer to part a).
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Here goes a full solution to part a).
<wiki:comment> --- end solution of exercise --- </wiki:comment>

*b)* Let `R` be uniformly distributed and `(x_0,y_0)` normally distributed.
Filename: `norm.py`.

*c)* Let `R` and `(x_0,y_0)` be normally distributed.

Filename: `circles.pdf`.

<wiki:comment> Closing remarks for this Project </wiki:comment>

==== Remarks ====

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Exercise 1: Determine some Distance ====

Intro to this exercise. Questions are in subexercises below.





<wiki:comment> No meaning in this weired test example: </wiki:comment>
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Here goes a full solution of the whole exercise.
With some math `a=b` in this solution:
{{{
\[ \hbox{math in solution: } a = b \]
}}}
And code `a=b` in this solution:
{{{
a = b  # code in solution
}}}
End of solution is here.
<wiki:comment> --- end solution of exercise --- </wiki:comment>


*a)* Subexercises are numbered a), b), etc.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint 1.* First hint to subexercise a).
With math `a=b` in hint:

{{{
\[ a=b. \]
}}}
And with code returning `x+1` in hint:

{{{
def func(x):
    return x + 1  # with code in hint
}}}
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint 2.* Second hint to subexercise a).
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: `subexer_a.pdf`.


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
*Answer.* Short answer to subexercise a).
With math in answer: `a=b`.
<wiki:comment> --- end answer of exercise --- </wiki:comment>

*b)* Here goes the text for subexercise b).


Some math `\cos^2 x + \sin^2 x = 1` written one a single line:

{{{
\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]
}}}

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

*Hint.* A hint for this subexercise.
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: `subexer_b.pdf`.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
*Solution.* Here goes the solution of this subexercise.
<wiki:comment> --- end solution of exercise --- </wiki:comment>

<wiki:comment> Closing remarks for this Exercise </wiki:comment>

==== Remarks ====

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Some exercise without the "Exercise:" prefix ====

<wiki:comment> Another minimalistic exercise </wiki:comment>

Just some text. And some math saying that `e^0=1` on a single line,
to test that math block insertion is correct:

{{{
\[ \exp{(0)} = 1 \]
}}}

And a test that the code `lambda x: x+2` is correctly placed here:

{{{
lambda x: x+2
}}}

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Example 2: Just an example ====

<wiki:comment> This example needs the --examples-as-exercises option, otherwise </wiki:comment>
<wiki:comment> it is just typeset as it is written. </wiki:comment>


*a)* What is the capital of Norway?

*Answer.* Oslo.

<wiki:comment> --- end exercise --- </wiki:comment>



== Here goes another section ==

With some text, before we continue with exercises.



== More Exercises ==

<wiki:comment> --- begin exercise --- </wiki:comment>

==== Exercise 3: Make references to projects and problems ====

Pick a statement from [#Project_2:_Explore_Distributions_of_Random_Circles] or [#Problem_1:_Flip_a_Coin]
and verify it.
Filename: `verify_formula.py`.

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>

==== Project 3: References to [#Project_1:_Compute_a_Probability] in a heading works for gwiki ====

Refer to the previous exercise as [#Exercise_3:_Make_references_to_projects_and_problems],
the two before that as [#Project_1:_Compute_a_Probability] and [#Project_2:_Explore_Distributions_of_Random_Circles],
and this one as [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_gwiki].
Filename: `selc_composed.pdf`.

<wiki:comment> --- end exercise --- </wiki:comment>



== Appendix: Just for testing; part I ==

This is the first appendix.

==== A subsection within an appendix ====

Some text.



== Appendix: Just for testing; part II ==

This is more stuff for an appendix.

==== Appendix: Testing identical titles ====

Without label.

==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

Without label.



*Hint.* Here is a hint.



*Warning.* And here is a warning about something to pay attention to.

*Summary.* Much testing in this document, otherwise stupid content.

*Notice.* Ah, we are close to the end.
With math:
{{{
\[ p=q\]
}}}



*Question.* So, how many admonition environments does Doconce support?


************** File: testdoc.mwiki *****************


#TITLE (actually governed by the filename): A Document for Testing Doconce

By '''Hans Petter Langtangen''' (hpl at simula.no), '''Kaare Dump''', '''A. Dummy Author''', '''I. S. Overworked''', and '''J. Doe''' (j_doe at cyberspace.com)

==== Jan 32, 2100 ====

__TOC__



<!-- !split -->

The format of this document is
mwiki

''Abstract.'' This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->



== Section 1 ==

Here is a nested list:


<ul>
  <li> item1
  <li> item2
  <li> item3 which continues
    on the next line to test that feature
  <li> and a sublist

<ul>
    <li><li> with indented subitem1
    <li><li> and a subitem2
</ul>

  <li> and perhaps an ordered sublist

<ol>
   <li><li> first item
   <li><li> second item,
      continuing on a new line
</ol>

</ul>

    Here are two lines that make up
    a block quote.

<!-- !split and check if these extra words are included properly in the comment -->

==== Subsection 1 ====

More text, with a reference back to the section [#Section_1] and further
to the section [#URLs]. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

Let's do some copying from files too. First from subroutine up to the very end,

<syntaxhighlight lang="fortran">
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
</syntaxhighlight>
and then just the subroutine,
<syntaxhighlight lang="fortran">
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
</syntaxhighlight>
and finally the complete file:
<syntaxhighlight lang="fortran">
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
</syntaxhighlight>

Testing other code environments. First Python:
<syntaxhighlight lang="text">
!bc pycod
def f(x):
    return x+1
!ec
</syntaxhighlight>
which gets rendered as

<syntaxhighlight lang="python">
def f(x):
    return x+1
</syntaxhighlight>

Now a complete program to be shown via Python Online Tutorial:
<syntaxhighlight lang="python">
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
</syntaxhighlight>

Then Cython:
<syntaxhighlight lang="python">
cpdef f(double x):
    return x + 1
</syntaxhighlight>

<!-- This one tests a + sign before a code environment -->
C++:
<syntaxhighlight lang="cpp">
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
</syntaxhighlight>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<syntaxhighlight lang="text">
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</syntaxhighlight>
which then is typeset as

<syntaxhighlight lang="python">
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</syntaxhighlight>


System call:
<syntaxhighlight lang="bash">
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
</syntaxhighlight>

It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

==== Subsection 2 ====

Test of figures. In particular we refer to Figure fig:impact in which
there is a flow.


[[File:Streamtubes.png|frame|200px|alt=Streamtubes.png|Visualization of flow by streamtubes. (fig:impact)]] <!-- not yet uploaded to common.wikimedia.org -->


Figures without captions are allowed.


[[File:Streamtubes.png|frame|200px|alt=Streamtubes.png|<span title=""></span>]] <!-- not yet uploaded to common.wikimedia.org -->


Test of movies.

 Mjolnir tsunami (by Sylfest Glimsdal). (Movie ../doc/manual/figs/mjolnir.mpeg: play mjolnir.html)

<!-- Test empty caption: -->

 (Movie ../doc/manual/figs/wavepacket.mpeg: play wavepacket.html)

<!-- Test wrong syntax and multi-line caption -->


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files <code>../doc/manual/figs/wavepacket_*.png</code> in wavepacket_0001.html)


<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate -->

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: http://www.youtube.com/watch?v=_O7iUiftbKU

<!-- Test multi-line caption in figure -->

Here is figure myfig with a long multi-line caption
and an extra space before the FIGURE keyword.


[[File:Wavepacket 0001.png|frame|500px|alt=Wavepacket 0001.png|A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in <math>t_{i+1}</math>. (myfig)]] <!-- not yet uploaded to common.wikimedia.org -->


Movie mymov has a similar problem.

<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<!-- Test URL as figure name -->


[[File:f_plot.png|frame|500,px|link=https://doconce.googlecode.com/hg/doc/blog|alt=f_plot.png|<span title=""></span>]]


<!-- Test wikimedia type of files that otherwise reside in subdirs -->

[[File:Df plot.png|frame|800px|alt=Df plot.png|This is a wikimedia figure file.]] <!-- user: Hplwp, filename: df_plot.png, timestamp: 2013-01-10T11:37:05Z -->


<!-- Non-uploaded file with no caption -->

[[File:Df2s8765s plot.png|frame|200,px|alt=Df2s8765s plot.png|<span title=""></span>]] <!-- not yet uploaded to common.wikimedia.org -->


<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

==== The <math>\theta</math> parameter (not <math>\nabla</math>?) ====

Functions do not always need to be advanced, here is one
involving <math>\theta</math>:
<syntaxhighlight lang="text">
def f(theta):
    return theta**2
</syntaxhighlight>

''More on <math>\theta</math>.''
Here is more text following headline with math.

Newcommands must also be tested in this test report:
<math>\frac{1}{2}</math>, <math>{1/2}</math>, <math>\pmb{x}</math>, <math>\frac{Du}{dt}</math>,
both inline and in block:

:<math>
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
</math>

Or with align with label and numbers:

:<math>
\begin{align}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align}
</math>

The labels above are removed in mwiki since mwiki cannot refer to
labels in equations.

==== Custom Environments ====

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<!-- begin theorem -->



''Theorem 5.''
Let <math>a=1</math> and <math>b=2</math>. Then <math>c=3</math>.
<!-- end theorem -->

<!-- begin proof -->
''Proof.''
Since <math>c=a+b</math>, the result follows from straightforward addition.
<math>\Diamond</math>
<!-- end proof -->

As we see, the proof of Theorem 5 is a modest
achievement.

==== Tables ====

<!-- index with comma could fool sphinx -->

Let us take this table from the manual:


<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>

The Doconce source code reads
<syntaxhighlight lang="text">
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</syntaxhighlight>

Here is yet another table to test that we can handle more than
one table:

<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<table border="1">
<tr><td align="center"><b>     <math>i</math>    </b></td> <td align="center"><b>    <math>h_i</math>   </b></td> <td align="center"><b> <math>\bar T_i</math> </b></td> <td align="center"><b>    <code>L_i</code>   </b></td> </tr>
<tr><td align="left">   0                        </td> <td align="right">   0                        </td> <td align="right">   288                      </td> <td align="right">   -0.0065                  </td> </tr>
<tr><td align="left">   1                        </td> <td align="right">   11,000                   </td> <td align="right">   216                      </td> <td align="right">   0.0                      </td> </tr>
<tr><td align="left">   2                        </td> <td align="right">   20,000                   </td> <td align="right">   216                      </td> <td align="right">   0.001                    </td> </tr>
<tr><td align="left">   3                        </td> <td align="right">   32,000                   </td> <td align="right">   228                      </td> <td align="right">   0.0028                   </td> </tr>
<tr><td align="left">   4                        </td> <td align="right">   47,000                   </td> <td align="right">   270                      </td> <td align="right">   0.0                      </td> </tr>
<tr><td align="left">   5                        </td> <td align="right">   51,000                   </td> <td align="right">   270                      </td> <td align="right">   -0.0028                  </td> </tr>
<tr><td align="left">   6                        </td> <td align="right">   71,000                   </td> <td align="right">   214                      </td> <td align="right">   <code>NaN</code>         </td> </tr>
</table>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<table border="1">
<tr><td align="center"><b>                exact                </b></td> <td align="center"><b>           <code>v_1</code>          </b></td> <td align="center"><b> <math>a_i</math> + <code>v_2</code> </b></td> <td align="center"><b>         <code>verb_3_</code>        </b></td> </tr>
<tr><td align="right">   9                                      </td> <td align="right">   9.62                                   </td> <td align="right">   5.57                                   </td> <td align="right">   8.98                                   </td> </tr>
<tr><td align="right">   -20                                    </td> <td align="right">   -23.39                                 </td> <td align="right">   -7.65                                  </td> <td align="right">   -19.93                                 </td> </tr>
<tr><td align="right">   10                                     </td> <td align="right">   17.74                                  </td> <td align="right">   -4.50                                  </td> <td align="right">   9.96                                   </td> </tr>
<tr><td align="right">   0                                      </td> <td align="right">   -9.19                                  </td> <td align="right">   4.13                                   </td> <td align="right">   -0.26                                  </td> </tr>
</table>

==== A test of verbatim words in heading with subscript <math>a_i</math>: <code>my_file_v1</code> and <code>my_file_v2</code> ====

''Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math <math>a_{i-1}</math>.''
Here
is
some text.




<!-- --- begin exercise --- -->

==== Example 1: Examples can be typeset as exercises ====

Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples-as-exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.


''a)''
State some problem.

''Solution.''
The answer to this subproblem can be written here.

''b)''
State some other problem.

''Hint 1.''
A hint can be given.

''Hint 2.''
Maybe even another hint?

''Solution.''
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<!-- --- end exercise --- -->

==== URLs ====

Testing of URLs: hpl's home page [http://folk.uio.no/hpl hpl], or
the entire URL if desired, http://folk.uio.no/hpl.  Here is a
plain file link testdoc.do.txt, or testdoc.do.txt, or
testdoc.do.txt or testdoc.do.txt or [testdoc.do.txt a link with
newline]. Can test spaces with the link with word
too: [http://folk.uio.no/hpl hpl] or [http://folk.uio.no/hpl hpl]. Also <code>file:///</code> works: [file:///home/hpl/vc/doconce/doc/demos/manual/manual.html link to a
file] is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the <code>latex</code> format:
[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas Newton-Cotes] formulas
and a [http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1 good book]. Need to test
Newton-Cotes with percentage in URL too:
http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.

<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

More tough tests: repeated URLs whose footnotes when using the
<code>--latex-printed</code> option must be correct. We have
[http://google.com google], [http://google.com google], and
[http://google.com google], which should result in exactly three
footnotes.

==== LaTeX Mathematics ====

Here is an equation without label using backslash-bracket environment:
:<math>
 a = b + c 
</math>
or with number and label, as in Equation (my:eq1), using the equation environment:
:<math>
{\partial u\over\partial t} = \nabla^2 u </math>
We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment:
:<math>
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
</math>



More mathematical typesetting is demonstrated in the coming exercises.

Below, we have [#Problem_1:_Flip_a_Coin] and [#Project_1:_Compute_a_Probability],
as well as [#Project_2:_Explore_Distributions_of_Random_Circles] and [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_mwiki], and in
between there we have [#Exercise_3:_Make_references_to_projects_and_problems].



== Exercises ==

<!-- --- begin exercise --- -->

==== Problem 1: Flip a Coin ====

<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- Torture tests -->

Make a program that simulates flipping a coin <math>N</math> times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<!-- Test syntax error -->

==== Remarks ====

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list


<ol>
<li> Mark 1.
<li> Mark 2.
<!-- --- begin hint in exercise --- -->
</ol>

''Hint 1.''
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

''Hint 2.''
Draw an integer among <math>\{1,2\}</math> with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
''Answer.''
If the <code>random.random()</code> function returns a number <math><1/2</math>, let it be
head, otherwise tail. Repeat this <math>N</math> number of times.
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
''Solution.''
Code:
<syntaxhighlight lang="python">
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
</syntaxhighlight>
<!-- --- end solution of exercise --- -->
Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<!-- --- end exercise --- -->

==== Not an exercise ====

Should be possible to stick a normal section in the middle of many
exercises.



<!-- --- begin exercise --- -->

==== Project 1: Compute a Probability ====

<!-- Minimalistic exercise -->


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval <math>[0,1)</math>?

<!-- --- begin hint in exercise --- -->

''Hint.''
To answer this question empirically, let a program
draw <math>N</math> such random numbers using Python's standard <code>random</code> module,
count how many of them, <math>M</math>, that fall in the interval <math>(0.5,0.6)</math>, and
compute the probability as <math>M/N</math>.
<!-- --- end hint in exercise --- -->

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Project 2: Explore Distributions of Random Circles ====

The formula for a circle is given by

:<math>
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
</math>
where <math>R</math> is the radius of the circle, <math>(x_0,y_0)</math> is the
center point, and <math>t</math> is a parameter in the unit interval <math>[0,1]</math>.
For any <math>t</math>, <math>(x,y)</math> is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<syntaxhighlight lang="python">
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
</syntaxhighlight>

<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

The goal of this project is to draw <math>N</math> circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.


''a)''
Let <math>R</math> be normally distributed and <math>(x_0,y_0)</math> uniformly distributed.

<!-- --- begin hint in exercise --- -->

''Hint.''
Use the <code>numpy.random</code> module to draw the
<math>x_0</math>, <math>y_0</math>, and <math>R</math> quantities.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
''Answer.''
Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
''Solution.''
Here goes a full solution to part a).
<!-- --- end solution of exercise --- -->

''b)''
Let <math>R</math> be uniformly distributed and <math>(x_0,y_0)</math> normally distributed.
Filename: <code>norm.py</code>.

''c)''
Let <math>R</math> and <math>(x_0,y_0)</math> be normally distributed.

Filename: <code>circles.pdf</code>.

<!-- Closing remarks for this Project -->

==== Remarks ====

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Exercise 1: Determine some Distance ====

Intro to this exercise. Questions are in subexercises below.





<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<!-- --- begin solution of exercise --- -->
''Solution.''
Here goes a full solution of the whole exercise.
With some math <math>a=b</math> in this solution:
:<math>
 \hbox{math in solution: } a = b 
</math>
And code <code>a=b</code> in this solution:
<syntaxhighlight lang="text">
a = b  # code in solution
</syntaxhighlight>
End of solution is here.
<!-- --- end solution of exercise --- -->


''a)''
Subexercises are numbered a), b), etc.

<!-- --- begin hint in exercise --- -->

''Hint 1.''
First hint to subexercise a).
With math <math>a=b</math> in hint:

:<math>
 a=b. 
</math>
And with code returning <math>x+1</math> in hint:

<syntaxhighlight lang="text">
def func(x):
    return x + 1  # with code in hint
</syntaxhighlight>
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

''Hint 2.''
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.


<!-- --- begin answer of exercise --- -->
''Answer.''
Short answer to subexercise a).
With math in answer: <math>a=b</math>.
<!-- --- end answer of exercise --- -->

''b)''
Here goes the text for subexercise b).


Some math <math>\cos^2 x + \sin^2 x = 1</math> written one a single line:

:<math>
 \cos^2 x + \sin^2 x = 1 \thinspace .
</math>

<!-- --- begin hint in exercise --- -->

''Hint.''
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.


<!-- --- begin solution of exercise --- -->
''Solution.''
Here goes the solution of this subexercise.
<!-- --- end solution of exercise --- -->

<!-- Closing remarks for this Exercise -->

==== Remarks ====

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Some exercise without the "Exercise:" prefix ====

<!-- Another minimalistic exercise -->

Just some text. And some math saying that <math>e^0=1</math> on a single line,
to test that math block insertion is correct:

:<math>
 \exp{(0)} = 1 
</math>

And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<syntaxhighlight lang="text">
lambda x: x+2
</syntaxhighlight>

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Example 2: Just an example ====

<!-- This example needs the --examples-as-exercises option, otherwise -->
<!-- it is just typeset as it is written. -->


''a)''
What is the capital of Norway?

''Answer.''
Oslo.

<!-- --- end exercise --- -->



== Here goes another section ==

With some text, before we continue with exercises.



== More Exercises ==

<!-- --- begin exercise --- -->

==== Exercise 3: Make references to projects and problems ====

Pick a statement from [#Project_2:_Explore_Distributions_of_Random_Circles] or [#Problem_1:_Flip_a_Coin]
and verify it.
Filename: <code>verify_formula.py</code>.

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

==== Project 3: References to [#Project_1:_Compute_a_Probability] in a heading works for mwiki ====

Refer to the previous exercise as [#Exercise_3:_Make_references_to_projects_and_problems],
the two before that as [#Project_1:_Compute_a_Probability] and [#Project_2:_Explore_Distributions_of_Random_Circles],
and this one as [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_mwiki].
Filename: <code>selc_composed.pdf</code>.

<!-- --- end exercise --- -->



== Appendix: Just for testing; part I ==

This is the first appendix.

==== A subsection within an appendix ====

Some text.



== Appendix: Just for testing; part II ==

This is more stuff for an appendix.

==== Appendix: Testing identical titles ====

Without label.

==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

With label.

==== Appendix: Testing identical titles ====

Without label.



''Hint.''
Here is a hint.


{{warning|And here is a warning about something to pay attention to.}}

''Summary.''
Much testing in this document, otherwise stupid content.

''Notice.''
Ah, we are close to the end.
With math:
:<math>
 p=q
</math>



''Question.''
So, how many admonition environments does Doconce support?


************** File: testdoc.cwiki *****************


#summary A Document for Testing Doconce
<wiki:toc max_depth="2" />
By **Hans Petter Langtangen** (hpl at simula.no), **Kaare Dump**, **A. Dummy Author**, **I. S. Overworked**, and **J. Doe** (j_doe at cyberspace.com)

=== Jan 32, 2100 ===

<<TableOfContents>>



<wiki:comment> !split </wiki:comment>

The format of this document is
cwiki

//Abstract.// This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<wiki:comment> Cannot demonstrate chapter headings since abstract and chapter </wiki:comment>
<wiki:comment> is mutually exclusive in LaTeX </wiki:comment>



= Section 1 =

Here is a nested list:


  * item1
  * item2
  * item3 which continues    on the next line to test that feature
  * and a sublist

    ** with indented subitem1
    //* and a subitem2


  // and perhaps an ordered sublist

   ## first item
   ## second item,      continuing on a new line



    Here are two lines that make up
    a block quote.

<wiki:comment> !split and check if these extra words are included properly in the comment </wiki:comment>


== Subsection 1 ==

More text, with a reference back to the section [#Section_1] and further
to the section [#URLs]. 
<wiki:comment> sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console </wiki:comment>

Let's do some copying from files too. First from subroutine up to the very end,

{{{
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}
and then just the subroutine,
{{{

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
}}}
and finally the complete file:
{{{
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
}}}

Testing other code environments. First Python:
{{{
!bc pycod
def f(x):
    return x+1
!ec
}}}
which gets rendered as

{{{
def f(x):
    return x+1
}}}

Now a complete program to be shown via Python Online Tutorial:
{{{
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
}}}

Then Cython:
{{{
cpdef f(double x):
    return x + 1
}}}

<wiki:comment> This one tests a + sign before a code environment </wiki:comment>
C++:
{{{
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
}}}
<wiki:comment> The next should get correctly typset in sphinx (cod is fcod) </wiki:comment>
And a little bit of Fortran:

{{{
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
}}}
which then is typeset as

{{{
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
}}}


System call:
{{{
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
}}}

It is time to test {{{verbatim inline font}}} especially with {{{a newline
inside the text}}} and an exclamation mark at the end: {{{BEGIN}}}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the {{{verb}}} typesetting... Also test backslashes
like {{{\begin}}} and {{{\end}}} in inline verbatim text.


== Subsection 2 ==

Test of figures. In particular we refer to Figure fig:impact in which
there is a flow.

{{../doc/manual/figs/streamtubes.png| Visualization of flow by streamtubes. (fig:impact)}}

Figures without captions are allowed.

{{../doc/manual/figs/streamtubes.png|}}

Test of movies.

 Mjolnir tsunami (by Sylfest Glimsdal). (Movie ../doc/manual/figs/mjolnir.mpeg: play [[mjolnir.html]])

<wiki:comment> Test empty caption: </wiki:comment>

 (Movie ../doc/manual/figs/wavepacket.mpeg: play [[wavepacket.html]])

<wiki:comment> Test wrong syntax and multi-line caption </wiki:comment>


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files {{{../doc/manual/figs/wavepacket_*.png}}} in [[wavepacket_0001.html]])


<wiki:comment> Check out the correct with and height of YouTube movies from the </wiki:comment>
<wiki:comment> embed command that the YouTube page can generate </wiki:comment>

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: [[http://www.youtube.com/watch?v=_O7iUiftbKU]]

<wiki:comment> Test multi-line caption in figure </wiki:comment>

Here is figure myfig with a long multi-line caption
and an extra space before the FIGURE keyword.

{{../doc/manual/figs/wavepacket_0001.png| A long caption spanning several lines and containing verbatim words like {{{my_file_v1}}} and {{{my_file_v2}}} as well as math with subscript as in {{{t_{i+1}}}}. (myfig) }}

Movie mymov has a similar problem.

<wiki:comment> Must be a blank line after MOVIE or FIGURE to detect this problem </wiki:comment>

<wiki:comment> Test URL as figure name </wiki:comment>

{{https://doconce.googlecode.com/hg/doc/blog/f_plot.png|}}

<wiki:comment> Test wikimedia type of files that otherwise reside in subdirs </wiki:comment>

<wiki:comment> Somewhat challenging heading with latex math, \t, \n, ? and parenthesis </wiki:comment>


== The {{{\theta}}} parameter (not {{{\nabla}}}?) ==

Functions do not always need to be advanced, here is one
involving {{{\theta}}}:
{{{
def f(theta):
    return theta**2
}}}

//More on {{{\theta}}}.// Here is more text following headline with math.

Newcommands must also be tested in this test report:
{{{\frac{1}{2}}}}, {{{{1/2}}}}, {{{\pmb{x}}}}, {{{\frac{Du}{dt}}}},
both inline and in block:

{{{
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
}}}

Or with align with label and numbers:

{{{
\begin{align}
\frac{Du}{dt} &= 0
label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
label{aligneq2}
\end{align}
}}}


== Custom Environments ==

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the {{{.tex}}} by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<wiki:comment> begin theorem </wiki:comment>



//Theorem 5.// Let {{{a=1}}} and {{{b=2}}}. Then {{{c=3}}}.
<wiki:comment> end theorem </wiki:comment>

<wiki:comment> begin proof </wiki:comment>
//Proof.// Since {{{c=a+b}}}, the result follows from straightforward addition.
END
<wiki:comment> end proof </wiki:comment>

As we see, the proof of Theorem 5 is a modest
achievement.


== Tables ==

<wiki:comment> index with comma could fool sphinx </wiki:comment>

Let us take this table from the manual:



 | =time             | =velocity         | =acceleration     |
 |  0.0              |  1.4186           |  -5.01            |
 |  2.0              |  1.376512         |  11.919           |
 |  4.0              |  1.1E+1           |  14.717624        |



The Doconce source code reads
{{{
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
}}}

Here is yet another table to test that we can handle more than
one table:


 | =time             | =velocity         | =acceleration     |
 |  0.0              |  1.4186           |  -5.01            |
 |  1.0              |  1.376512         |  11.919           |
 |  3.0              |  1.1E+1           |  14.717624        |


And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


 | ={{{i}}}            | ={{{h_i}}}          | ={{{\bar T_i}}}     | ={{{L_i}}}          |
 |  0                  |  0                  |  288                |  -0.0065            |
 |  1                  |  11,000             |  216                |  0.0                |
 |  2                  |  20,000             |  216                |  0.001              |
 |  3                  |  32,000             |  228                |  0.0028             |
 |  4                  |  47,000             |  270                |  0.0                |
 |  5                  |  51,000             |  270                |  -0.0028            |
 |  6                  |  71,000             |  214                |  {{{NaN}}}          |


And add one with verbatim headings (with underscores),
and rows starting with {{{|-}}} because of a negative number,
and {{{|}}} right after verbatim word (with no space):


 | =exact                     | ={{{v_1}}}                 | ={{{a_i}}} + {{{v_2}}}     | ={{{verb_3_}}}             |
 |  9                         |  9.62                      |  5.57                      |  8.98                      |
 |  -20                       |  -23.39                    |  -7.65                     |  -19.93                    |
 |  10                        |  17.74                     |  -4.50                     |  9.96                      |
 |  0                         |  -9.19                     |  4.13                      |  -0.26                     |


== A test of verbatim words in heading with subscript {{{a_i}}}: {{{my_file_v1}}} and {{{my_file_v2}}} ==

//Files {{{my_file_v1.py}}} and {{{my_file_v2.py}}} define some math {{{a_{i-1}}}}.// Here
is
some text.




<wiki:comment> --- begin exercise --- </wiki:comment>


== Example 1: Examples can be typeset as exercises ==

Examples can start with a subsection heading starting with {{{Example:}}}
and then, with the command-line option {{{--examples-as-exercises}}} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


//a)// State some problem.

//Solution.// The answer to this subproblem can be written here.

//b)// State some other problem.

//Hint 1.// A hint can be given.

//Hint 2.// Maybe even another hint?

//Solution.// The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<wiki:comment> --- end exercise --- </wiki:comment>


== URLs ==

Testing of URLs: hpl's home page [[http://folk.uio.no/hpl|hpl]], or
the entire URL if desired, [[http://folk.uio.no/hpl]].  Here is a
plain file link [[testdoc.do.txt]], or [[testdoc.do.txt]], or
[[testdoc.do.txt]] or [[testdoc.do.txt]] or [[testdoc.do.txt|a link with
newline]]. Can test spaces with the link with word
too: [[http://folk.uio.no/hpl|hpl]] or [[http://folk.uio.no/hpl|hpl]]. Also {{{file:///}}} works: [[file:///home/hpl/vc/doconce/doc/demos/manual/manual.html|link to a
file]] is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in [[http://folk.uio.no/hpl]], if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the {{{latex}}} format:
[[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas|Newton-Cotes]] formulas
and a [[http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1|good book]]. Need to test
Newton-Cotes with percentage in URL too:
[[http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas]]
and [[http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae]] which has a shebang.

<wiki:comment> Comments should be inserted outside paragraphs (because in the rst </wiki:comment>
<wiki:comment> format extra blanks make a paragraph break). </wiki:comment>

<wiki:comment> Note that when there is no http: or file:, it can be a file link </wiki:comment>
<wiki:comment> if the link name is URL, url, "URL", or "url". Such files should, </wiki:comment>
<wiki:comment> if rst output is desired, but placed in a {{{_static*}}} folder. </wiki:comment>

More tough tests: repeated URLs whose footnotes when using the
{{{--latex-printed}}} option must be correct. We have
[[http://google.com|google]], [[http://google.com|google]], and
[[http://google.com|google]], which should result in exactly three
footnotes.


== LaTeX Mathematics ==

Here is an equation without label using backslash-bracket environment:
{{{
\[ a = b + c \]
}}}
or with number and label, as in Equation (my:eq1), using the equation environment:
{{{
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u label{my:eq1}
\end{equation}
}}}
We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment:
{{{
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
}}}



More mathematical typesetting is demonstrated in the coming exercises.

Below, we have [#Problem_1:_Flip_a_Coin] and [#Project_1:_Compute_a_Probability],
as well as [#Project_2:_Explore_Distributions_of_Random_Circles] and [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_cwiki], and in
between there we have [#Exercise_3:_Make_references_to_projects_and_problems].



= Exercises =

<wiki:comment> --- begin exercise --- </wiki:comment>


== Problem 1: Flip a Coin ==

<wiki:comment> keywords = random numbers; Monte Carlo simulation </wiki:comment>

<wiki:comment> Torture tests </wiki:comment>

Make a program that simulates flipping a coin {{{N}}} times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<wiki:comment> Test syntax error </wiki:comment>

=== Remarks ===

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list


# Mark 1.
# Mark 2.<wiki:comment> --- begin hint in exercise --- </wiki:comment>


//Hint 1.// Use {{{r = random.random()}}} and define head as {{{r <= 0.5}}}.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint 2.// Draw an integer among {{{\{1,2\}}}} with
{{{r = random.randint(1,2)}}} and define head when {{{r}}} is 1.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
//Answer.// If the {{{random.random()}}} function returns a number {{{<1/2}}}, let it be
head, otherwise tail. Repeat this {{{N}}} number of times.
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Code:
{{{
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
}}}
<wiki:comment> --- end solution of exercise --- </wiki:comment>
Filenames: {{{flip_coin.py}}}, {{{flip_coin.pdf}}}.
<wiki:comment> solution files: mysol.txt, mysol_flip_coin.py, yet_another.file </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>


== Not an exercise ==

Should be possible to stick a normal section in the middle of many
exercises.



<wiki:comment> --- begin exercise --- </wiki:comment>


== Project 1: Compute a Probability ==

<wiki:comment> Minimalistic exercise </wiki:comment>


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval {{{[0,1)}}}?

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint.// To answer this question empirically, let a program
draw {{{N}}} such random numbers using Python's standard {{{random}}} module,
count how many of them, {{{M}}}, that fall in the interval {{{(0.5,0.6)}}}, and
compute the probability as {{{M/N}}}.
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>


== Project 2: Explore Distributions of Random Circles ==

The formula for a circle is given by

{{{
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
}}}
where {{{R}}} is the radius of the circle, {{{(x_0,y_0)}}} is the
center point, and {{{t}}} is a parameter in the unit interval {{{[0,1]}}}.
For any {{{t}}}, {{{(x,y)}}} is a point on the circle.
The formula can be used to generate {{{n}}} points on a circle:

{{{
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
}}}

<wiki:comment> Often in an exercise we have some comments about the solution </wiki:comment>
<wiki:comment> which we normally want to keep where they are. </wiki:comment>

The goal of this project is to draw {{{N}}} circles with random
center and radius. Plot each circle using the {{{circle}}} function
above.


//a)// Let {{{R}}} be normally distributed and {{{(x_0,y_0)}}} uniformly distributed.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint.// Use the {{{numpy.random}}} module to draw the
{{{x_0}}}, {{{y_0}}}, and {{{R}}} quantities.
<wiki:comment> --- end hint in exercise --- </wiki:comment>


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
//Answer.// Here goes the short answer to part a).
<wiki:comment> --- end answer of exercise --- </wiki:comment>


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Here goes a full solution to part a).
<wiki:comment> --- end solution of exercise --- </wiki:comment>

//b)// Let {{{R}}} be uniformly distributed and {{{(x_0,y_0)}}} normally distributed.
Filename: {{{norm.py}}}.

//c)// Let {{{R}}} and {{{(x_0,y_0)}}} be normally distributed.

Filename: {{{circles.pdf}}}.

<wiki:comment> Closing remarks for this Project </wiki:comment>

=== Remarks ===

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>


== Exercise 1: Determine some Distance ==

Intro to this exercise. Questions are in subexercises below.





<wiki:comment> No meaning in this weired test example: </wiki:comment>
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Here goes a full solution of the whole exercise.
With some math {{{a=b}}} in this solution:
{{{
\[ \hbox{math in solution: } a = b \]
}}}
And code {{{a=b}}} in this solution:
{{{
a = b  # code in solution
}}}
End of solution is here.
<wiki:comment> --- end solution of exercise --- </wiki:comment>


//a)// Subexercises are numbered a), b), etc.

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint 1.// First hint to subexercise a).
With math {{{a=b}}} in hint:

{{{
\[ a=b. \]
}}}
And with code returning {{{x+1}}} in hint:

{{{
def func(x):
    return x + 1  # with code in hint
}}}
<wiki:comment> --- end hint in exercise --- </wiki:comment>

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint 2.// Second hint to subexercise a).
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: {{{subexer_a.pdf}}}.


<wiki:comment> --- begin answer of exercise --- </wiki:comment>
//Answer.// Short answer to subexercise a).
With math in answer: {{{a=b}}}.
<wiki:comment> --- end answer of exercise --- </wiki:comment>

//b)// Here goes the text for subexercise b).


Some math {{{\cos^2 x + \sin^2 x = 1}}} written one a single line:

{{{
\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]
}}}

<wiki:comment> --- begin hint in exercise --- </wiki:comment>

//Hint.// A hint for this subexercise.
<wiki:comment> --- end hint in exercise --- </wiki:comment>
Filename: {{{subexer_b.pdf}}}.


<wiki:comment> --- begin solution of exercise --- </wiki:comment>
//Solution.// Here goes the solution of this subexercise.
<wiki:comment> --- end solution of exercise --- </wiki:comment>

<wiki:comment> Closing remarks for this Exercise </wiki:comment>

=== Remarks ===

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>


== Some exercise without the "Exercise:" prefix ==

<wiki:comment> Another minimalistic exercise </wiki:comment>

Just some text. And some math saying that {{{e^0=1}}} on a single line,
to test that math block insertion is correct:

{{{
\[ \exp{(0)} = 1 \]
}}}

And a test that the code {{{lambda x: x+2}}} is correctly placed here:

{{{
lambda x: x+2
}}}

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>


== Example 2: Just an example ==

<wiki:comment> This example needs the --examples-as-exercises option, otherwise </wiki:comment>
<wiki:comment> it is just typeset as it is written. </wiki:comment>


//a)// What is the capital of Norway?

//Answer.// Oslo.

<wiki:comment> --- end exercise --- </wiki:comment>



= Here goes another section =

With some text, before we continue with exercises.



= More Exercises =

<wiki:comment> --- begin exercise --- </wiki:comment>


== Exercise 3: Make references to projects and problems ==

Pick a statement from [#Project_2:_Explore_Distributions_of_Random_Circles] or [#Problem_1:_Flip_a_Coin]
and verify it.
Filename: {{{verify_formula.py}}}.

<wiki:comment> --- end exercise --- </wiki:comment>




<wiki:comment> --- begin exercise --- </wiki:comment>


== Project 3: References to [#Project_1:_Compute_a_Probability] in a heading works for cwiki ==

Refer to the previous exercise as [#Exercise_3:_Make_references_to_projects_and_problems],
the two before that as [#Project_1:_Compute_a_Probability] and [#Project_2:_Explore_Distributions_of_Random_Circles],
and this one as [#Project_3:_References_to_Project_demo:ex:2_in_a_heading_works_for_cwiki].
Filename: {{{selc_composed.pdf}}}.

<wiki:comment> --- end exercise --- </wiki:comment>



= Appendix: Just for testing; part I =

This is the first appendix.


== A subsection within an appendix ==

Some text.



= Appendix: Just for testing; part II =

This is more stuff for an appendix.


== Appendix: Testing identical titles ==

Without label.


== Appendix: Testing identical titles ==

With label.


== Appendix: Testing identical titles ==

With label.


== Appendix: Testing identical titles ==

Without label.



//Hint.// Here is a hint.



//Warning.// And here is a warning about something to pay attention to.

//Summary.// Much testing in this document, otherwise stupid content.

//Notice.// Ah, we are close to the end.
With math:
{{{
\[ p=q\]
}}}



//Question.// So, how many admonition environments does Doconce support?


************** File: testdoc.st *****************


TITLE: A Document for Testing Doconce
BY: Hans Petter Langtangen (Center for Biomedical Computing, Simula Research Laboratory, and Department of Informatics, University of Oslo); Kaare Dump (Segfault Inc, Cyberspace); A. Dummy Author; I. S. Overworked (Inst1, and Inst2, Somewhere, and Third Inst, Elsewhere, and Fourth Inst); J. Doe
DATE: Jan 32, 2100
# !split

The format of this document is
st
*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

Section 1

Here is a nested list:

  - item1
  - item2
  - item3 which continues
    on the next line to test that feature
  - and a sublist
    - with indented subitem1
    - and a subitem2

  - and perhaps an ordered sublist
   1. first item
   2. second item,
      continuing on a new line


    Here are two lines that make up
    a block quote.

# !split and check if these extra words are included properly in the comment

Subsection 1

More text, with a reference back to the section "Section 1" and further
to the section "URLs". 

Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end



System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test 'verbatim inline font' especially with 'a newline
inside the text' and an exclamation mark at the end: 'BEGIN'! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the 'verb' typesetting... Also test backslashes
like '\begin' and '\end' in inline verbatim text.

Subsection 2

Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. {fig:impact}

Figures without captions are allowed.

FIGURE:[../doc/manual/figs/streamtubes, width=200]

Test of movies.

 Mjolnir tsunami (by Sylfest Glimsdal). (Movie ../doc/manual/figs/mjolnir.mpeg: play "mjolnir.html":mjolnir.html)


 (Movie ../doc/manual/figs/wavepacket.mpeg: play "wavepacket.html":wavepacket.html)



 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files '../doc/manual/figs/wavepacket_*.png' in "wavepacket_0001.html":wavepacket_0001.html)



 Movies can be uploaded to YouTube and embedded as HTML or as a link.: "http://www.youtube.com/watch?v=_O7iUiftbKU":http://www.youtube.com/watch?v=_O7iUiftbKU


Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like 'my_file_v1' and 'my_file_v2' as well as math with subscript as in t_{i+1}. {myfig} 

Movie ref{mymov} has a similar problem.



FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]

The \theta parameter (not \nabla?)

Functions do not always need to be advanced, here is one
involving \theta::


        def f(theta):
            return theta**2


*More on \theta.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
\frac{1}{2}, {1/2}, \pmb{x}, \frac{Du}{dt},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}


Custom Environments

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the '.tex' by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!




*Theorem 5.* Let a=1 and b=2. Then c=3.

*Proof.* Since c=a+b, the result follows from straightforward addition.
END

As we see, the proof of Theorem 5 is a modest
achievement.

Tables

Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

========  ========  ========  ========  
   i        h_i     \bar T_i   'L_i'    
========  ========  ========  ========  
0                0       288   -0.0065  
1           11,000       216       0.0  
2           20,000       216     0.001  
3           32,000       228    0.0028  
4           47,000       270       0.0  
5           51,000       270   -0.0028  
6           71,000       214     'NaN'  
========  ========  ========  ========  

And add one with verbatim headings (with underscores),
and rows starting with '|-' because of a negative number,
and '|' right after verbatim word (with no space):

===========  ===========  ===========  ===========  
   exact        'v_1'     a_i + 'v_2'   'verb_3_'   
===========  ===========  ===========  ===========  
          9         9.62         5.57         8.98  
        -20       -23.39        -7.65       -19.93  
         10        17.74        -4.50         9.96  
          0        -9.19         4.13        -0.26  
===========  ===========  ===========  ===========  

A test of verbatim words in heading with subscript a_i: 'my_file_v1' and 'my_file_v2'

*Files 'my_file_v1.py' and 'my_file_v2.py' define some math a_{i-1}.* Here
is
some text.

Example 1: Examples can be typeset as exercises

Examples can start with a subsection heading starting with 'Example:'
and then, with the command-line option '--examples-as-exercises' be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

URLs

Testing of URLs: hpl's home page "http://folk.uio.no/hpl":hpl, or
the entire URL if desired, "http://folk.uio.no/hpl":http://folk.uio.no/hpl.  Here is a
plain file link "testdoc.do.txt":testdoc.do.txt, or "testdoc.do.txt":testdoc.do.txt, or
"testdoc.do.txt":testdoc.do.txt or "testdoc.do.txt":testdoc.do.txt or "testdoc.do.txt":a link with
newline. Can test spaces with the link with word
too: "http://folk.uio.no/hpl":hpl or "http://folk.uio.no/hpl":hpl. Also 'file:///' works: "file:///home/hpl/vc/doconce/doc/demos/manual/manual.html":link to a
file is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in "http://folk.uio.no/hpl":http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the 'latex' format:
"http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas":Newton-Cotes formulas
and a "http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1":good book. Need to test
Newton-Cotes with percentage in URL too:
"http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas":http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and "http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae":http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.



More tough tests: repeated URLs whose footnotes when using the
'--latex-printed' option must be correct. We have
"http://google.com":google, "http://google.com":google, and
"http://google.com":google, which should result in exactly three
footnotes.

LaTeX Mathematics

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::

        \begin{equation}
        {\partial u\over\partial t} = \nabla^2 u label{my:eq1}
        \end{equation}

We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::

        \begin{align*}
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        \end{align*}




More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  "Problem 1: Flip a Coin" and  "Project 1: Compute a Probability",
as well as  "Project 2: Explore Distributions of Random Circles" and "Project 3: References to Project ref{demo:ex:2} in a heading works for st", and in
between there we have  "Exercise 3: Make references to projects and problems".

Exercises

Problem 1: Flip a Coin

Make a program that simulates flipping a coin N times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

Remarks

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.
2. Mark 2.

*Hint 1.* Use 'r = random.random()' and define head as 'r <= 0.5'.


*Hint 2.* Draw an integer among \{1,2\} with
'r = random.randint(1,2)' and define head when 'r' is 1.


*Answer.* If the 'random.random()' function returns a number <1/2, let it be
head, otherwise tail. Repeat this N number of times.


*Solution.* Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

Filenames: 'flip_coin.py', 'flip_coin.pdf'.

Not an exercise

Should be possible to stick a normal section in the middle of many
exercises.

Project 1: Compute a Probability

What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval [0,1)?


*Hint.* To answer this question empirically, let a program
draw N such random numbers using Python's standard 'random' module,
count how many of them, M, that fall in the interval (0.5,0.6), and
compute the probability as M/N.

Project 2: Explore Distributions of Random Circles

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where R is the radius of the circle, (x_0,y_0) is the
center point, and t is a parameter in the unit interval [0,1].
For any t, (x,y) is a point on the circle.
The formula can be used to generate 'n' points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)



The goal of this project is to draw N circles with random
center and radius. Plot each circle using the 'circle' function
above.


*a)* Let R be normally distributed and (x_0,y_0) uniformly distributed.


*Hint.* Use the 'numpy.random' module to draw the
x_0, y_0, and R quantities.


*Answer.* Here goes the short answer to part a).


*Solution.* Here goes a full solution to part a).

*b)* Let R be uniformly distributed and (x_0,y_0) normally distributed.
Filename: 'norm.py'.

*c)* Let R and (x_0,y_0) be normally distributed.

Filename: 'circles.pdf'.

Remarks

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

Exercise 1: Determine some Distance

Intro to this exercise. Questions are in subexercises below.





The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


*Solution.* Here goes a full solution of the whole exercise.
With some math a=b in this solution::

        \[ \hbox{math in solution: } a = b \]

And code 'a=b' in this solution::


        a = b  # code in solution

End of solution is here.


*a)* Subexercises are numbered a), b), etc.


*Hint 1.* First hint to subexercise a).
With math a=b in hint::

        \[ a=b. \]

And with code returning x+1 in hint::


        def func(x):
            return x + 1  # with code in hint



*Hint 2.* Second hint to subexercise a).
Filename: 'subexer_a.pdf'.


*Answer.* Short answer to subexercise a).
With math in answer: a=b.

*b)* Here goes the text for subexercise b).


Some math \cos^2 x + \sin^2 x = 1 written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]



*Hint.* A hint for this subexercise.
Filename: 'subexer_b.pdf'.


*Solution.* Here goes the solution of this subexercise.

Remarks

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

Some exercise without the "Exercise:" prefix

Just some text. And some math saying that e^0=1 on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code 'lambda x: x+2' is correctly placed here::


        lambda x: x+2


Example 2: Just an example

*a)* What is the capital of Norway?

*Answer.* Oslo.

Here goes another section

With some text, before we continue with exercises.

More Exercises

Exercise 3: Make references to projects and problems

Pick a statement from  "Project 2: Explore Distributions of Random Circles" or  "Problem 1: Flip a Coin"
and verify it.
Filename: 'verify_formula.py'.

Project 3: References to  "Project 1: Compute a Probability" in a heading works for st

Refer to the previous exercise as  "Exercise 3: Make references to projects and problems",
the two before that as  "Project 1: Compute a Probability" and "Project 2: Explore Distributions of Random Circles",
and this one as  "Project 3: References to Project ref{demo:ex:2} in a heading works for st".
Filename: 'selc_composed.pdf'.

Appendix: Just for testing; part I

This is the first appendix.

A subsection within an appendix

Some text.

Appendix: Just for testing; part II

This is more stuff for an appendix.

Appendix: Testing identical titles

Without label.

Appendix: Testing identical titles

With label.

Appendix: Testing identical titles

With label.

Appendix: Testing identical titles

Without label.



*Hint.* Here is a hint.



*Warning.* And here is a warning about something to pay attention to.

*Summary.* Much testing in this document, otherwise stupid content.

*Notice.* Ah, we are close to the end.
With math::

        \[ p=q\]




*Question.* So, how many admonition environments does Doconce support?

************** File: testdoc.epytext *****************


TITLE: A Document for Testing Doconce
BY: Hans Petter Langtangen (Center for Biomedical Computing, Simula Research Laboratory, and Department of Informatics, University of Oslo); Kaare Dump (Segfault Inc, Cyberspace); A. Dummy Author; I. S. Overworked (Inst1, and Inst2, Somewhere, and Third Inst, Elsewhere, and Fourth Inst); J. Doe
DATE: Jan 32, 2100
# !split

The format of this document is
epytext

I{Abstract.} This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.



Section 1
=========

Here is a nested list:

  - item1
  - item2
  - item3 which continues
    on the next line to test that feature
  - and a sublist
    - with indented subitem1
    - and a subitem2

  - and perhaps an ordered sublist
   1. first item
   2. second item,
      continuing on a new line


    Here are two lines that make up
    a block quote.

# !split and check if these extra words are included properly in the comment

Subsection 1
------------

More text, with a reference back to the section "Section 1" and further
to the section "URLs". 

Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end



System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test C{verbatim inline font} especially with C{a newline
inside the text} and an exclamation mark at the end: C{BEGIN}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the C{verb} typesetting... Also test backslashes
like C{\begin} and C{\end} in inline verbatim text.

Subsection 2
------------


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. {fig:impact}

Figures without captions are allowed.

FIGURE:[../doc/manual/figs/streamtubes, width=200]

Test of movies.

 Mjolnir tsunami (by Sylfest Glimsdal). (Movie ../doc/manual/figs/mjolnir.mpeg: play U{mjolnir.html<mjolnir.html>})


 (Movie ../doc/manual/figs/wavepacket.mpeg: play U{wavepacket.html<wavepacket.html>})



 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files C{../doc/manual/figs/wavepacket_*.png} in U{wavepacket_0001.html<wavepacket_0001.html>})



 Movies can be uploaded to YouTube and embedded as HTML or as a link.: U{http://www.youtube.com/watch?v=_O7iUiftbKU<http://www.youtube.com/watch?v=_O7iUiftbKU>}


Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like C{my_file_v1} and C{my_file_v2} as well as math with subscript as in M{t_{i+1}}. {myfig} 

Movie ref{mymov} has a similar problem.



FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]



The M{\theta} parameter (not M{\nabla}?)
----------------------------------------

Functions do not always need to be advanced, here is one
involving M{\theta}::


        def f(theta):
            return theta**2


I{More on M{\theta}.} Here is more text following headline with math.

Newcommands must also be tested in this test report:
M{\frac{1}{2}}, M{{1/2}}, M{\pmb{x}}, M{\frac{Du}{dt}},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the C{.tex} by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!




I{Theorem 5.} Let M{a=1} and M{b=2}. Then M{c=3}.

I{Proof.} Since M{c=a+b}, the result follows from straightforward addition.
M{END}

As we see, the proof of Theorem 5 is a modest
achievement.


Tables
------



Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

===========  ===========  ===========  ===========  
    M{i}        M{h_i}    M{\bar T_i}     C{L_i}    
===========  ===========  ===========  ===========  
0                      0          288      -0.0065  
1                 11,000          216          0.0  
2                 20,000          216        0.001  
3                 32,000          228       0.0028  
4                 47,000          270          0.0  
5                 51,000          270      -0.0028  
6                 71,000          214       C{NaN}  
===========  ===========  ===========  ===========  

And add one with verbatim headings (with underscores),
and rows starting with C{|-} because of a negative number,
and C{|} right after verbatim word (with no space):

===============  ===============  ===============  ===============  
     exact            C{v_1}      M{a_i} + C{v_2}     C{verb_3_}    
===============  ===============  ===============  ===============  
              9             9.62             5.57             8.98  
            -20           -23.39            -7.65           -19.93  
             10            17.74            -4.50             9.96  
              0            -9.19             4.13            -0.26  
===============  ===============  ===============  ===============  


A test of verbatim words in heading with subscript M{a_i}: C{my_file_v1} and C{my_file_v2}
------------------------------------------------------------------------------------------

I{Files C{my_file_v1.py} and C{my_file_v2.py} define some math M{a_{i-1}}.} Here
is
some text.





Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with C{Example:}
and then, with the command-line option C{--examples-as-exercises} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


I{a)} State some problem.

I{Solution.} The answer to this subproblem can be written here.

I{b)} State some other problem.

I{Hint 1.} A hint can be given.

I{Hint 2.} Maybe even another hint?

I{Solution.} The answer to this other subproblem goes here,
maybe over multiple doconce input lines.



URLs
----

Testing of URLs: hpl's home page U{hpl<http://folk.uio.no/hpl>}, or
the entire URL if desired, U{http://folk.uio.no/hpl<http://folk.uio.no/hpl>}.  Here is a
plain file link U{testdoc.do.txt<testdoc.do.txt>}, or U{testdoc.do.txt<testdoc.do.txt>}, or
U{testdoc.do.txt<testdoc.do.txt>} or U{testdoc.do.txt<testdoc.do.txt>} or U{a link with
newline<testdoc.do.txt>}. Can test spaces with the link with word
too: U{hpl<http://folk.uio.no/hpl>} or U{hpl<http://folk.uio.no/hpl>}. Also C{file:///} works: U{link to a
file<file:///home/hpl/vc/doconce/doc/demos/manual/manual.html>} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in U{http://folk.uio.no/hpl<http://folk.uio.no/hpl>}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the C{latex} format:
U{Newton-Cotes<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>} formulas
and a U{good book<http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1>}. Need to test
Newton-Cotes with percentage in URL too:
U{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>}
and U{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae<http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae>} which has a shebang.



More tough tests: repeated URLs whose footnotes when using the
C{--latex-printed} option must be correct. We have
U{google<http://google.com>}, U{google<http://google.com>}, and
U{google<http://google.com>}, which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.





More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  "Problem 1: Flip a Coin" and  "Project 1: Compute a Probability",
as well as  "Project 2: Explore Distributions of Random Circles" and "Project 3: References to Project ref{demo:ex:2} in a heading works for epytext", and in
between there we have  "Exercise 3: Make references to projects and problems".

Exercises
=========




Problem 1: Flip a Coin
----------------------



Make a program that simulates flipping a coin M{N} times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.






Remarks
~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.
2. Mark 2.

I{Hint 1.} Use C{r = random.random()} and define head as C{r <= 0.5}.


I{Hint 2.} Draw an integer among M{\{1,2\}} with
C{r = random.randint(1,2)} and define head when C{r} is 1.


I{Answer.} If the C{random.random()} function returns a number M{<1/2}, let it be
head, otherwise tail. Repeat this M{N} number of times.


I{Solution.} Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

Filenames: C{flip_coin.py}, C{flip_coin.pdf}.



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.




Project 1: Compute a Probability
--------------------------------



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval M{[0,1)}?


I{Hint.} To answer this question empirically, let a program
draw M{N} such random numbers using Python's standard C{random} module,
count how many of them, M{M}, that fall in the interval M{(0.5,0.6)}, and
compute the probability as M{M/N}.






Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where M{R} is the radius of the circle, M{(x_0,y_0)} is the
center point, and M{t} is a parameter in the unit interval M{[0,1]}.
For any M{t}, M{(x,y)} is a point on the circle.
The formula can be used to generate C{n} points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)



The goal of this project is to draw M{N} circles with random
center and radius. Plot each circle using the C{circle} function
above.


I{a)} Let M{R} be normally distributed and M{(x_0,y_0)} uniformly distributed.


I{Hint.} Use the C{numpy.random} module to draw the
M{x_0}, M{y_0}, and M{R} quantities.


I{Answer.} Here goes the short answer to part a).


I{Solution.} Here goes a full solution to part a).

I{b)} Let M{R} be uniformly distributed and M{(x_0,y_0)} normally distributed.
Filename: C{norm.py}.

I{c)} Let M{R} and M{(x_0,y_0)} be normally distributed.

Filename: C{circles.pdf}.


Remarks
~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.







Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


I{Solution.} Here goes a full solution of the whole exercise.
With some math M{a=b} in this solution::

        \[ \hbox{math in solution: } a = b \]

And code C{a=b} in this solution::


        a = b  # code in solution

End of solution is here.


I{a)} Subexercises are numbered a), b), etc.


I{Hint 1.} First hint to subexercise a).
With math M{a=b} in hint::

        \[ a=b. \]

And with code returning M{x+1} in hint::


        def func(x):
            return x + 1  # with code in hint



I{Hint 2.} Second hint to subexercise a).
Filename: C{subexer_a.pdf}.


I{Answer.} Short answer to subexercise a).
With math in answer: M{a=b}.

I{b)} Here goes the text for subexercise b).


Some math M{\cos^2 x + \sin^2 x = 1} written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]



I{Hint.} A hint for this subexercise.
Filename: C{subexer_b.pdf}.


I{Solution.} Here goes the solution of this subexercise.


Remarks
~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.







Some exercise without the "Exercise:" prefix
--------------------------------------------


Just some text. And some math saying that M{e^0=1} on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code C{lambda x: x+2} is correctly placed here::


        lambda x: x+2







Example 2: Just an example
--------------------------



I{a)} What is the capital of Norway?

I{Answer.} Oslo.



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============




Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from  "Project 2: Explore Distributions of Random Circles" or  "Problem 1: Flip a Coin"
and verify it.
Filename: C{verify_formula.py}.






Project 3: References to  "Project 1: Compute a Probability" in a heading works for epytext
-------------------------------------------------------------------------------------------

Refer to the previous exercise as  "Exercise 3: Make references to projects and problems",
the two before that as  "Project 1: Compute a Probability" and "Project 2: Explore Distributions of Random Circles",
and this one as  "Project 3: References to Project ref{demo:ex:2} in a heading works for epytext".
Filename: C{selc_composed.pdf}.



Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles
----------------------------------

Without label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

Without label.



I{Hint.} Here is a hint.



I{Warning.} And here is a warning about something to pay attention to.

I{Summary.} Much testing in this document, otherwise stupid content.

I{Notice.} Ah, we are close to the end.
With math::

        \[ p=q\]




I{Question.} So, how many admonition environments does Doconce support?

************** File: testdoc.txt *****************


A Document for Testing Doconce
==============================

Hans Petter Langtangen [1, 2] (hpl@simula.no)
Kaare Dump [3] 
A. Dummy Author  
I. S. Overworked [4, 5, 6, 7] 
J. Doe  (j_doe@cyberspace.com)

[1] Center for Biomedical Computing, Simula Research Laboratory
[2] Department of Informatics, University of Oslo
[3] Segfault Inc, Cyberspace
[4] Inst1
[5] Inst2, Somewhere
[6] Third Inst, Elsewhere
[7] Fourth Inst

Date: Jan 32, 2100

Table of contents:

 Section 1 
   Subsection 1 
   Subsection 2 
   The \theta parameter (not \nabla?) 
   Custom Environments 
   Tables 
   A test of verbatim words in heading with subscript a_i: my_file_v1 and my_file_v2 
   Example 1: Examples can be typeset as exercises 
   URLs 
   LaTeX Mathematics 
 Exercises 
   Problem 1: Flip a Coin 
     Remarks 
   Not an exercise 
   Project 1: Compute a Probability 
   Project 2: Explore Distributions of Random Circles 
     Remarks 
   Exercise 1: Determine some Distance 
     Remarks 
   Some exercise without the "Exercise:" prefix 
   Example 2: Just an example 
 Here goes another section 
 More Exercises 
   Exercise 3: Make references to projects and problems 
   Project 3: References to  "Project 1: Compute a Probability" in a heading works for plain 
 Appendix: Just for testing; part I 
   A subsection within an appendix 
 Appendix: Just for testing; part II 
   Appendix: Testing identical titles 
   Appendix: Testing identical titles 
   Appendix: Testing identical titles 
   Appendix: Testing identical titles 




# !split

The format of this document is
plain

*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.


Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line


    Here are two lines that make up
    a block quote.

# !split and check if these extra words are included properly in the comment

Subsection 1
------------

More text, with a reference back to the section "Section 1" and further
to the section "URLs". 

Let's do some copying from files too. First from subroutine up to the very end::


              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return

and then just the subroutine::


        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return

and finally the complete file::


        C     a comment
        
              subroutine test()
              integer i
              real*8 r
              r = 0
              do i = 1, i
                 r = r + i
              end do
              return
        C     END1
        
              program testme
              call test()
              return


Testing other code environments. First Python::


        !bc pycod
        def f(x):
            return x+1
        !ec

which gets rendered as::


        def f(x):
            return x+1


Now a complete program to be shown via Python Online Tutorial::


        def f(x):
            return x + 1
        
        a = 2
        x = a
        a = 1
        v = f(x)
        print v


Then Cython::


        cpdef f(double x):
            return x + 1


C++::


        #include <iostream>
        
        int main()
        {
           std::cout << "Sample output" << std::endl;
           return 0
        }

And a little bit of Fortran::


        !bc cod
              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end
        !ec

which then is typeset as::


              subroutine midpt(x, length, a, b)
              real*8 a, b, x
              x = (a + b)/2
              length = b - a
              return
              end



System call::


        Terminal> mkdir test
        Terminal> cd test
        Terminal> myprog -f
        output1
        output2


It is time to test verbatim inline font especially with a newline
inside the text and an exclamation mark at the end: BEGIN! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the verb typesetting... Also test backslashes
like \begin and \end in inline verbatim text.

Subsection 2
------------


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

FIGURE:[../doc/manual/figs/streamtubes, width=200] Visualization of flow by streamtubes. {fig:impact}

Figures without captions are allowed.

FIGURE:[../doc/manual/figs/streamtubes, width=200]

Test of movies.

 Mjolnir tsunami (by Sylfest Glimsdal). (Movie ../doc/manual/figs/mjolnir.mpeg: play mjolnir.html)


 (Movie ../doc/manual/figs/wavepacket.mpeg: play wavepacket.html)



 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).   (Movie of files ../doc/manual/figs/wavepacket_*.png in wavepacket_0001.html)



 Movies can be uploaded to YouTube and embedded as HTML or as a link.: http://www.youtube.com/watch?v=_O7iUiftbKU


Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like my_file_v1 and my_file_v2 as well as math with subscript as in t_{i+1}. {myfig} 

Movie ref{mymov} has a similar problem.



FIGURE: [https://doconce.googlecode.com/hg/doc/blog/f_plot.png, width=500, frac=0.8]



The \theta parameter (not \nabla?)
----------------------------------

Functions do not always need to be advanced, here is one
involving \theta::


        def f(theta):
            return theta**2


*More on \theta.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
\frac{1}{2}, {1/2}, \pmb{x}, \frac{Du}{dt},
both inline and in block::

        \begin{align*}
        \frac{Du}{dt} &= 0
        \\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        \end{align*}


Or with align with label and numbers::

        \begin{align}
        \frac{Du}{dt} &= 0
        label{aligneq1}\\ 
        \frac{1}{2} &= {1/2}\\ 
        \frac{1}{2}\pmb{x} &= \pmb{n}
        label{aligneq2}
        \end{align}



Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the .tex by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!




*Theorem 5.* Let a=1 and b=2. Then c=3.

*Proof.* Since c=a+b, the result follows from straightforward addition.
END

As we see, the proof of Theorem 5 is a modest
achievement.


Tables
------



Let us take this table from the manual:


============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  
============  ============  ============  


The Doconce source code reads::


          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|


Here is yet another table to test that we can handle more than
one table:

============  ============  ============  
    time        velocity    acceleration  
============  ============  ============  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     
============  ============  ============  

And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

========  ========  ========  ========  
   i        h_i     \bar T_i    L_i     
========  ========  ========  ========  
0                0       288   -0.0065  
1           11,000       216       0.0  
2           20,000       216     0.001  
3           32,000       228    0.0028  
4           47,000       270       0.0  
5           51,000       270   -0.0028  
6           71,000       214       NaN  
========  ========  ========  ========  

And add one with verbatim headings (with underscores),
and rows starting with |- because of a negative number,
and | right after verbatim word (with no space):

=========  =========  =========  =========  
  exact       v_1     a_i + v_2   verb_3_   
=========  =========  =========  =========  
        9       9.62       5.57       8.98  
      -20     -23.39      -7.65     -19.93  
       10      17.74      -4.50       9.96  
        0      -9.19       4.13      -0.26  
=========  =========  =========  =========  


A test of verbatim words in heading with subscript a_i: my_file_v1 and my_file_v2
---------------------------------------------------------------------------------

*Files my_file_v1.py and my_file_v2.py define some math a_{i-1}.* Here
is
some text.





Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with Example:
and then, with the command-line option --examples-as-exercises be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.



URLs
----

Testing of URLs: hpl's home page hpl (http://folk.uio.no/hpl), or
the entire URL if desired, http://folk.uio.no/hpl.  Here is a
plain file link testdoc.do.txt, or testdoc.do.txt, or
testdoc.do.txt or testdoc.do.txt or a link with
newline (testdoc.do.txt). Can test spaces with the link with word
too: hpl (http://folk.uio.no/hpl) or hpl (http://folk.uio.no/hpl). Also file:/// works: link to a
file (file:///home/hpl/vc/doconce/doc/demos/manual/manual.html) is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in http://folk.uio.no/hpl, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the latex format:
Newton-Cotes (http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas) formulas
and a good book (http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1). Need to test
Newton-Cotes with percentage in URL too:
http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas
and http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae which has a shebang.



More tough tests: repeated URLs whose footnotes when using the
--latex-printed option must be correct. We have
google (http://google.com), google (http://google.com), and
google (http://google.com), which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment::

        \[ a = b + c \]

or with number and label, as in Equation (my:eq1), using the equation environment::

        \begin{equation}
        {\partial u\over\partial t} = \nabla^2 u label{my:eq1}
        \end{equation}

We can refer to this equation by Equation (my:eq1).

Here is a system without equation numbers, using the align-astrisk environment::

        \begin{align*}
        \pmb{a} &= \pmb{q}\times\pmb{n} \\ 
        b &= \nabla^2 u + \nabla^4 v
        \end{align*}




More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  "Problem 1: Flip a Coin" and  "Project 1: Compute a Probability",
as well as  "Project 2: Explore Distributions of Random Circles" and "Project 3: References to Project ref{demo:ex:2} in a heading works for plain", and in
between there we have  "Exercise 3: Make references to projects and problems".

Exercises
=========




Problem 1: Flip a Coin
----------------------



Make a program that simulates flipping a coin N times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.






Remarks
~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.

*Hint 1.* Use r = random.random() and define head as r <= 0.5.


*Hint 2.* Draw an integer among \{1,2\} with
r = random.randint(1,2) and define head when r is 1.


*Answer.* If the random.random() function returns a number <1/2, let it be
head, otherwise tail. Repeat this N number of times.


*Solution.* Code::


        import sys, random
        N = int(sys.argv[1])
        heads = 0
        for i in range(N):
            r = random.random()
            if r <= 0.5:
                heads += 1
        print 'Flipping a coin %d times gave %d heads' % (N, heads)

Filenames: flip_coin.py, flip_coin.pdf.



Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.




Project 1: Compute a Probability
--------------------------------



What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval [0,1)?


*Hint.* To answer this question empirically, let a program
draw N such random numbers using Python's standard random module,
count how many of them, M, that fall in the interval (0.5,0.6), and
compute the probability as M/N.






Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by::

        \begin{align}
        x &= x_0 + R\cos 2\pi t,\\ 
        y &= y_0 + R\sin 2\pi t,
        \end{align}

where R is the radius of the circle, (x_0,y_0) is the
center point, and t is a parameter in the unit interval [0,1].
For any t, (x,y) is a point on the circle.
The formula can be used to generate n points on a circle::


        import numpy as np
        
        def circle(R, x0, y0, n=501):
            t = np.linspace(0, 1, n)
            x = x0 + R*np.cos(2*np.pi*t)
            y = y0 + R*np.sin(2*np.pi*t)
            return x, y
        
        x, y = circle(2.0, 0, 0)



The goal of this project is to draw N circles with random
center and radius. Plot each circle using the circle function
above.


*a)* Let R be normally distributed and (x_0,y_0) uniformly distributed.


*Hint.* Use the numpy.random module to draw the
x_0, y_0, and R quantities.


*Answer.* Here goes the short answer to part a).


*Solution.* Here goes a full solution to part a).

*b)* Let R be uniformly distributed and (x_0,y_0) normally distributed.
Filename: norm.py.

*c)* Let R and (x_0,y_0) be normally distributed.

Filename: circles.pdf.


Remarks
~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.







Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


*Solution.* Here goes a full solution of the whole exercise.
With some math a=b in this solution::

        \[ \hbox{math in solution: } a = b \]

And code a=b in this solution::


        a = b  # code in solution

End of solution is here.


*a)* Subexercises are numbered a), b), etc.


*Hint 1.* First hint to subexercise a).
With math a=b in hint::

        \[ a=b. \]

And with code returning x+1 in hint::


        def func(x):
            return x + 1  # with code in hint



*Hint 2.* Second hint to subexercise a).
Filename: subexer_a.pdf.


*Answer.* Short answer to subexercise a).
With math in answer: a=b.

*b)* Here goes the text for subexercise b).


Some math \cos^2 x + \sin^2 x = 1 written one a single line::

        \[ \cos^2 x + \sin^2 x = 1 \thinspace .\]



*Hint.* A hint for this subexercise.
Filename: subexer_b.pdf.


*Solution.* Here goes the solution of this subexercise.


Remarks
~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.







Some exercise without the "Exercise:" prefix
--------------------------------------------


Just some text. And some math saying that e^0=1 on a single line,
to test that math block insertion is correct::

        \[ \exp{(0)} = 1 \]


And a test that the code lambda x: x+2 is correctly placed here::


        lambda x: x+2







Example 2: Just an example
--------------------------



*a)* What is the capital of Norway?

*Answer.* Oslo.



Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============




Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from  "Project 2: Explore Distributions of Random Circles" or  "Problem 1: Flip a Coin"
and verify it.
Filename: verify_formula.py.






Project 3: References to  "Project 1: Compute a Probability" in a heading works for plain
-----------------------------------------------------------------------------------------

Refer to the previous exercise as  "Exercise 3: Make references to projects and problems",
the two before that as  "Project 1: Compute a Probability" and "Project 2: Explore Distributions of Random Circles",
and this one as  "Project 3: References to Project ref{demo:ex:2} in a heading works for plain".
Filename: selc_composed.pdf.



Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles
----------------------------------

Without label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

Without label.



*Hint.* Here is a hint.



*Warning.* And here is a warning about something to pay attention to.

*Summary.* Much testing in this document, otherwise stupid content.

*Notice.* Ah, we are close to the end.
With math::

        \[ p=q\]




*Question.* So, how many admonition environments does Doconce support?

************** File: testdoc.md *****************
% A Document for Testing Doconce
% Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo;  Kaare Dump at Segfault Inc, Cyberspace;  A. Dummy Author;  I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst;  J. Doe
% Jan 32, 2100

<!-- Table of contents: Run pandoc with --toc option -->



<!-- !split -->

The format of this document is
pandoc
*Abstract.* This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->



Section 1
=========

Here is a nested list:

  * item1

  * item2

  * item3 which continues
    on the next line to test that feature

  * and a sublist

    * with indented subitem1

    * and a subitem2


  * and perhaps an ordered sublist

   1. first item

   2. second item,
      continuing on a new line


> Here are two lines that make up
> a block quote.

<!-- !split and check if these extra words are included properly in the comment -->

Subsection 1
------------

More text, with a reference back to the section [Section 1](#n-1) and further
to the section [URLs](#s). 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

Let's do some copying from files too. First from subroutine up to the very end,


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and then just the subroutine,

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Fortran}
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and finally the complete file:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Fortran}
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Testing other code environments. First Python:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bc pycod
def f(x):
    return x+1
!ec
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

which gets rendered as


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
def f(x):
    return x+1
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Now a complete program to be shown via Python Online Tutorial:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Then Cython:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cpdef f(double x):
    return x + 1
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- This one tests a + sign before a code environment -->
C++:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Cpp}
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

which then is typeset as


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

System call:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is time to test `verbatim inline font` especially with `a newline
inside the text` and an exclamation mark at the end: `BEGIN`! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the `verb` typesetting... Also test backslashes
like `\begin` and `\end` in inline verbatim text.

Subsection 2
------------


Test of figures. In particular we refer to Figure ref{fig:impact} in which
there is a flow.

![Visualization of flow by streamtubes. ](../doc/manual/figs/streamtubes.png)

Figures without captions are allowed.

![](../doc/manual/figs/streamtubes.png)

Test of movies.


<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
</p>


<!-- Test empty caption: -->


<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em></em>
</p>


<!-- Test wrong syntax and multi-line caption -->


<p><a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>

<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate -->


<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<!-- Test multi-line caption in figure -->

Here is figure ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.

![A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. ](../doc/manual/figs/wavepacket_0001.png)

Movie ref{mymov} has a similar problem.

<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<!-- Test URL as figure name -->

![](https://doconce.googlecode.com/hg/doc/blog/f_plot.png)

<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

The $\theta$ parameter (not $\nabla$?)
--------------------------------------

Functions do not always need to be advanced, here is one
involving $\theta$:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
def f(theta):
    return theta**2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

*More on $\theta$.* Here is more text following headline with math.

Newcommands must also be tested in this test report:
$\frac{1}{2}$, ${1/2}$, $\pmb{x}$, $\frac{Du}{dt}$,
both inline and in block:

$$
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$

Or with align with label and numbers:

$$
\begin{equation}
\frac{Du}{dt} = 0
\label{aligneq1}
\end{equation}
$$

$$
\begin{equation}  
\frac{1}{2} = {1/2}
\end{equation}
$$

$$
\begin{equation}  
\frac{1}{2}\pmb{x} = \pmb{n}
\label{aligneq2}
\end{equation}
$$


Custom Environments
-------------------

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the `.tex` by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!



<!-- begin theorem -->

*Theorem 5.* Let $a=1$ and $b=2$. Then $c=3$.
<!-- end theorem -->

<!-- begin proof -->
*Proof.* Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
<!-- end proof -->

As we see, the proof of Theorem 5 is a modest
achievement.


Tables
------


<!-- index with comma could fool sphinx -->

Let us take this table from the manual:



    time        velocity    acceleration  
------------  ------------  ------------  
0.0                 1.4186         -5.01  
2.0               1.376512        11.919  
4.0                 1.1E+1     14.717624  



The Doconce source code reads

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Here is yet another table to test that we can handle more than
one table:


    time        velocity    acceleration  
------------  ------------  ------------  
0.0           1.4186        -5.01         
1.0           1.376512      11.919        
3.0           1.1E+1        14.717624     


And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


   $i$        $h_i$     $\bar T_i$    `L_i`     
----------  ----------  ----------  ----------  
0                    0         288     -0.0065  
1               11,000         216         0.0  
2               20,000         216       0.001  
3               32,000         228      0.0028  
4               47,000         270         0.0  
5               51,000         270     -0.0028  
6               71,000         214       `NaN`  


And add one with verbatim headings (with underscores),
and rows starting with `|-` because of a negative number,
and `|` right after verbatim word (with no space):


    exact          `v_1`      $a_i$ + `v_2`    `verb_3_`    
-------------  -------------  -------------  -------------  
            9           9.62           5.57           8.98  
          -20         -23.39          -7.65         -19.93  
           10          17.74          -4.50           9.96  
            0          -9.19           4.13          -0.26  



A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2`
---------------------------------------------------------------------------------------

*Files `my_file_v1.py` and `my_file_v2.py` define some math $a_{i-1}$.* Here
is
some text.




<!-- --- begin exercise --- -->

Example 1: Examples can be typeset as exercises
-----------------------------------------------

Examples can start with a subsection heading starting with `Example:`
and then, with the command-line option `--examples-as-exercises` be
typeset as exercises. This is useful if one has solution
environments as part of the example.


*a)* State some problem.

*Solution.* The answer to this subproblem can be written here.

*b)* State some other problem.

*Hint 1.* A hint can be given.

*Hint 2.* Maybe even another hint?

*Solution.* The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<!-- --- end exercise --- -->


URLs
----

Testing of URLs: hpl's home page [hpl](http://folk.uio.no/hpl), or
the entire URL if desired, <http://folk.uio.no/hpl>.  Here is a
plain file link <testdoc.do.txt>, or <testdoc.do.txt>, or
<testdoc.do.txt> or <testdoc.do.txt> or [a link with
newline](testdoc.do.txt). Can test spaces with the link with word
too: [hpl](http://folk.uio.no/hpl) or [hpl](http://folk.uio.no/hpl). Also `file:///` works: [link to a
file](file:///home/hpl/vc/doconce/doc/demos/manual/manual.html) is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <http://folk.uio.no/hpl>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the `latex` format:
[Newton-Cotes](http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas) formulas
and a [good book](http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1). Need to test
Newton-Cotes with percentage in URL too:
<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>
and <http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae> which has a shebang.

<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a `_static*` folder. -->

More tough tests: repeated URLs whose footnotes when using the
`--latex-printed` option must be correct. We have
[google](http://google.com), [google](http://google.com), and
[google](http://google.com), which should result in exactly three
footnotes.



LaTeX Mathematics
-----------------

Here is an equation without label using backslash-bracket environment:
$$
 a = b + c 
$$
or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$
We can refer to this equation by \eqref{my:eq1}.

Here is a system without equation numbers, using the align-astrisk environment:
$$
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
$$


And here is a system of equations with labels in an align environment:
$$
\begin{equation}
a = q + 4 + 5+ 6 \label{eq1} 
\end{equation}
$$

$$
\begin{equation}  
b = \nabla^2 u + \nabla^4 x \label{eq2}
\end{equation}
$$
We can refer to \eqref{eq1}-\eqref{eq2}.

Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$
Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$
We can refer to the last equation by \eqref{split:envir:eq}.

Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$

Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$
Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have  [Problem 1: Flip a Coin](#n) and  [Project 1: Compute a Probability](#y),
as well as  [Project 2: Explore Distributions of Random Circles](#s) and [Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc](#c), and in
between there we have  [Exercise 3: Make references to projects and problems](#s).

Exercises
=========



<!-- --- begin exercise --- -->

Problem 1: Flip a Coin
----------------------

<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- Torture tests -->

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


<!-- Test syntax error -->




Remarks
~~~~~~~

Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

1. Mark 1.

2. Mark 2.
<!-- --- begin hint in exercise --- -->

*Hint 1.* Use `r = random.random()` and define head as `r <= 0.5`.
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

*Hint 2.* Draw an integer among $\{1,2\}$ with
`r = random.randint(1,2)` and define head when `r` is 1.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
*Answer.* If the `random.random()` function returns a number $<1/2$, let it be
head, otherwise tail. Repeat this $N$ number of times.
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
*Solution.* Code:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r <= 0.5:
        heads += 1
print 'Flipping a coin %d times gave %d heads' % (N, heads)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- --- end solution of exercise --- -->
Filenames: `flip_coin.py`, `flip_coin.pdf`.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<!-- --- end exercise --- -->


Not an exercise
---------------

Should be possible to stick a normal section in the middle of many
exercises.



<!-- --- begin exercise --- -->

Project 1: Compute a Probability
--------------------------------

<!-- Minimalistic exercise -->


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

<!-- --- begin hint in exercise --- -->

*Hint.* To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard `random` module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
<!-- --- end hint in exercise --- -->

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

Project 2: Explore Distributions of Random Circles
--------------------------------------------------

The formula for a circle is given by

$$
\begin{equation}
x = x_0 + R\cos 2\pi t,
\end{equation}
$$

$$
\begin{equation}  
y = y_0 + R\sin 2\pi t,
\end{equation}
$$
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate `n` points on a circle:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the `circle` function
above.


*a)* Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

<!-- --- begin hint in exercise --- -->

*Hint.* Use the `numpy.random` module to draw the
$x_0$, $y_0$, and $R$ quantities.
<!-- --- end hint in exercise --- -->


<!-- --- begin answer of exercise --- -->
*Answer.* Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->


<!-- --- begin solution of exercise --- -->
*Solution.* Here goes a full solution to part a).
<!-- --- end solution of exercise --- -->

*b)* Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: `norm.py`.

*c)* Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: `circles.pdf`.

<!-- Closing remarks for this Project -->

Remarks
~~~~~~~

At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

Exercise 1: Determine some Distance
-----------------------------------

Intro to this exercise. Questions are in subexercises below.





<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


<!-- --- begin solution of exercise --- -->
*Solution.* Here goes a full solution of the whole exercise.
With some math $a=b$ in this solution:
$$
 \hbox{math in solution: } a = b 
$$
And code `a=b` in this solution:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
a = b  # code in solution
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

End of solution is here.
<!-- --- end solution of exercise --- -->


*a)* Subexercises are numbered a), b), etc.

<!-- --- begin hint in exercise --- -->

*Hint 1.* First hint to subexercise a).
With math $a=b$ in hint:

$$
 a=b. 
$$
And with code returning $x+1$ in hint:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
def func(x):
    return x + 1  # with code in hint
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

*Hint 2.* Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: `subexer_a.pdf`.


<!-- --- begin answer of exercise --- -->
*Answer.* Short answer to subexercise a).
With math in answer: $a=b$.
<!-- --- end answer of exercise --- -->

*b)* Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

$$
 \cos^2 x + \sin^2 x = 1 \thinspace .
$$

<!-- --- begin hint in exercise --- -->

*Hint.* A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: `subexer_b.pdf`.


<!-- --- begin solution of exercise --- -->
*Solution.* Here goes the solution of this subexercise.
<!-- --- end solution of exercise --- -->

<!-- Closing remarks for this Exercise -->

Remarks
~~~~~~~

Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

Some exercise without the "Exercise:" prefix
--------------------------------------------

<!-- Another minimalistic exercise -->

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

$$
 \exp{(0)} = 1 
$$

And a test that the code `lambda x: x+2` is correctly placed here:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
lambda x: x+2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

Example 2: Just an example
--------------------------

<!-- This example needs the --examples-as-exercises option, otherwise -->
<!-- it is just typeset as it is written. -->


*a)* What is the capital of Norway?

*Answer.* Oslo.

<!-- --- end exercise --- -->


Here goes another section
=========================

With some text, before we continue with exercises.

More Exercises
==============



<!-- --- begin exercise --- -->

Exercise 3: Make references to projects and problems
----------------------------------------------------

Pick a statement from  [Project 2: Explore Distributions of Random Circles](#s) or  [Problem 1: Flip a Coin](#n)
and verify it.
Filename: `verify_formula.py`.

<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

Project 3: References to  [Project 1: Compute a Probability](#y) in a heading works for pandoc
----------------------------------------------------------------------------------------------

Refer to the previous exercise as  [Exercise 3: Make references to projects and problems](#s),
the two before that as  [Project 1: Compute a Probability](#y) and [Project 2: Explore Distributions of Random Circles](#s),
and this one as  [Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc](#c).
Filename: `selc_composed.pdf`.

<!-- --- end exercise --- -->


Appendix: Just for testing; part I
==================================

This is the first appendix.

A subsection within an appendix
-------------------------------

Some text.

Appendix: Just for testing; part II
===================================

This is more stuff for an appendix.

Appendix: Testing identical titles
----------------------------------

Without label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

With label.

Appendix: Testing identical titles
----------------------------------

Without label.



*Hint.* Here is a hint.



*Warning.* And here is a warning about something to pay attention to.

*Summary.* Much testing in this document, otherwise stupid content.

*Notice.* Ah, we are close to the end.
With math:
$$
 p=q
$$



*Question.* So, how many admonition environments does Doconce support?


************** File: testdoc.ipynb *****************
{
 "metadata": {},
 "nbformat": 3,
 "nbformat_minor": 0,
 "worksheets": [
  {
   "cells": [
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "# A Document for Testing Doconce\n",
      "_Jan 32, 2100_\n",
      "\n",
      "<!-- !split -->\n",
      "\n",
      "The format of this document is\n",
      "ipynb\n",
      "\n",
      "*Abstract.* This is a document with many test constructions for doconce syntax.\n",
      "It was used heavily for the development and kept for testing\n",
      "numerous constructions, also special and less common cases.\n",
      "\n",
      "And exactly for test purposes we have an extra line here, which\n",
      "is part of the abstract.\n",
      "\n",
      "<!-- Cannot demonstrate chapter headings since abstract and chapter -->\n",
      "<!-- is mutually exclusive in LaTeX -->\n",
      "\n",
      "\n",
      "\n",
      "## Section 1\n",
      "\n",
      "Here is a nested list:\n",
      "\n",
      "  * item1\n",
      "\n",
      "  * item2\n",
      "\n",
      "  * item3 which continues\n",
      "    on the next line to test that feature\n",
      "\n",
      "  * and a sublist\n",
      "\n",
      "    * with indented subitem1\n",
      "\n",
      "    * and a subitem2\n",
      "\n",
      "\n",
      "  * and perhaps an ordered sublist\n",
      "\n",
      "   1. first item\n",
      "\n",
      "   2. second item,\n",
      "      continuing on a new line\n",
      "\n",
      "\n",
      "> Here are two lines that make up\n",
      "> a block quote.\n",
      "\n",
      "<!-- !split and check if these extra words are included properly in the comment -->\n",
      "\n",
      "### Subsection 1\n",
      "\n",
      "More text, with a reference back to the section [Section 1](#n-1) and further\n",
      "to the section [URLs](#s). \n",
      "<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->\n",
      "\n",
      "Let's do some copying from files too. First from subroutine up to the very end,"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "      subroutine test()\n",
      "      integer i\n",
      "      real*8 r\n",
      "      r = 0\n",
      "      do i = 1, i\n",
      "         r = r + i\n",
      "      end do\n",
      "      return\n",
      "C     END1\n",
      "\n",
      "      program testme\n",
      "      call test()\n",
      "      return\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "and then just the subroutine,"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "\n",
      "      subroutine test()\n",
      "      integer i\n",
      "      real*8 r\n",
      "      r = 0\n",
      "      do i = 1, i\n",
      "         r = r + i\n",
      "      end do\n",
      "      return\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "and finally the complete file:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "C     a comment\n",
      "\n",
      "      subroutine test()\n",
      "      integer i\n",
      "      real*8 r\n",
      "      r = 0\n",
      "      do i = 1, i\n",
      "         r = r + i\n",
      "      end do\n",
      "      return\n",
      "C     END1\n",
      "\n",
      "      program testme\n",
      "      call test()\n",
      "      return\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Testing other code environments. First Python:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "!bc pycod\n",
      "def f(x):\n",
      "    return x+1\n",
      "!ec\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "which gets rendered as"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "def f(x):\n",
      "    return x+1\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Now a complete program to be shown via Python Online Tutorial:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "def f(x):\n",
      "    return x + 1\n",
      "\n",
      "a = 2\n",
      "x = a\n",
      "a = 1\n",
      "v = f(x)\n",
      "print v\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Then Cython:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "cpdef f(double x):\n",
      "    return x + 1\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- This one tests a + sign before a code environment -->\n",
      "C++:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "#include <iostream>\n",
      "\n",
      "int main()\n",
      "{\n",
      "   std::cout << \"Sample output\" << std::endl;\n",
      "   return 0\n",
      "}\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- The next should get correctly typset in sphinx (cod is fcod) -->\n",
      "And a little bit of Fortran:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "!bc cod\n",
      "      subroutine midpt(x, length, a, b)\n",
      "      real*8 a, b, x\n",
      "      x = (a + b)/2\n",
      "      length = b - a\n",
      "      return\n",
      "      end\n",
      "!ec\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "which then is typeset as"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "      subroutine midpt(x, length, a, b)\n",
      "      real*8 a, b, x\n",
      "      x = (a + b)/2\n",
      "      length = b - a\n",
      "      return\n",
      "      end\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "System call:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Terminal> mkdir test\n",
      "Terminal> cd test\n",
      "Terminal> myprog -f\n",
      "output1\n",
      "output2\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "It is time to test `verbatim inline font` especially with `a newline\n",
      "inside the text` and an exclamation mark at the end: `BEGIN`! The\n",
      "exclamation mark inside the verbatim text is not smart for latex as\n",
      "we use ! in the `verb` typesetting... Also test backslashes\n",
      "like `\\begin` and `\\end` in inline verbatim text.\n",
      "\n",
      "### Subsection 2\n",
      "\n",
      "\n",
      "Test of figures. In particular we refer to Figure ref{fig:impact} in which\n",
      "there is a flow.\n",
      "\n",
      "![Visualization of flow by streamtubes. ](../doc/manual/figs/streamtubes.png)\n",
      "\n",
      "Figures without captions are allowed.\n",
      "\n",
      "![](../doc/manual/figs/streamtubes.png)\n",
      "\n",
      "Test of movies.\n",
      "\n",
      "\n",
      "<embed src=\"../doc/manual/figs/mjolnir.mpeg\" width=700 height=400 autoplay=\"false\" loop=\"true\"></embed>\n",
      "<p>\n",
      "<em>Mjolnir tsunami (by Sylfest Glimsdal).</em>\n",
      "</p>\n",
      "\n",
      "\n",
      "<!-- Test empty caption: -->\n",
      "\n",
      "\n",
      "<embed src=\"../doc/manual/figs/wavepacket.mpeg\" width=700 height=400 autoplay=\"false\" loop=\"true\"></embed>\n",
      "<p>\n",
      "<em></em>\n",
      "</p>\n",
      "\n",
      "\n",
      "<!-- Test wrong syntax and multi-line caption -->\n",
      "\n",
      "\n",
      "<p><a href=\"wavepacket_0001.html\">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>\n",
      "<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em></p>\n",
      "\n",
      "<!-- Check out the correct with and height of YouTube movies from the -->\n",
      "<!-- embed command that the YouTube page can generate -->\n",
      "\n",
      "\n",
      "<iframe width=\"420\" height=\"315\" src=\"http://www.youtube.com/embed/_O7iUiftbKU\" frameborder=\"0\" allowfullscreen></iframe>\n",
      "\n",
      "<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>\n",
      "\n",
      "\n",
      "\n",
      "<!-- Test multi-line caption in figure -->\n",
      "\n",
      "Here is figure ref{myfig} with a long multi-line caption\n",
      "and an extra space before the FIGURE keyword.\n",
      "\n",
      "![A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. ](../doc/manual/figs/wavepacket_0001.png)\n",
      "\n",
      "Movie ref{mymov} has a similar problem.\n",
      "\n",
      "<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->\n",
      "\n",
      "<!-- Test URL as figure name -->\n",
      "\n",
      "![](https://doconce.googlecode.com/hg/doc/blog/f_plot.png)\n",
      "\n",
      "<!-- Test wikimedia type of files that otherwise reside in subdirs -->\n",
      "\n",
      "<!-- Somewhat challenging heading with latex math, \\t, \\n, ? and parenthesis -->\n",
      "\n",
      "### The $\\theta$ parameter (not $\\nabla$?)\n",
      "\n",
      "Functions do not always need to be advanced, here is one\n",
      "involving $\\theta$:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "def f(theta):\n",
      "    return theta**2\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "*More on $\\theta$.* Here is more text following headline with math.\n",
      "\n",
      "Newcommands must also be tested in this test report:\n",
      "$\\frac{1}{2}$, ${1/2}$, $\\pmb{x}$, $\\frac{Du}{dt}$,\n",
      "both inline and in block:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{align*}  \\frac{Du}{dt} &= 0  \\\\   \\frac{1}{2} &= {1/2}\\\\   \\frac{1}{2}\\pmb{x} &= \\pmb{n}  \\end{align*} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Or with align with label and numbers:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{equation}  \\frac{Du}{dt} = 0  \\label{aligneq1}  \\end{equation} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": []
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{equation}    \\frac{1}{2} = {1/2}  \\end{equation} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": []
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{equation}    \\frac{1}{2}\\pmb{x} = \\pmb{n}  \\label{aligneq2}  \\end{equation} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### Custom Environments\n",
      "\n",
      "Here is an attempt to create a theorem environment via Mako\n",
      "(for counting theorems) and comment lines to help replacing lines in\n",
      "the `.tex` by proper begin-end LaTeX environments for theorems.\n",
      "Should look nice in most formats!\n",
      "\n",
      "\n",
      "\n",
      "<!-- begin theorem -->\n",
      "\n",
      "*Theorem 5.* Let $a=1$ and $b=2$. Then $c=3$.\n",
      "<!-- end theorem -->\n",
      "\n",
      "<!-- begin proof -->\n",
      "*Proof.* Since $c=a+b$, the result follows from straightforward addition.\n",
      "$\\Diamond$\n",
      "<!-- end proof -->\n",
      "\n",
      "As we see, the proof of Theorem 5 is a modest\n",
      "achievement.\n",
      "\n",
      "\n",
      "### Tables\n",
      "\n",
      "\n",
      "<!-- index with comma could fool sphinx -->\n",
      "\n",
      "Let us take this table from the manual:\n",
      "\n",
      "\n",
      "   {\n",
      "    \"cell_type\": \"markdown\",\n",
      "    \"metadata\": {},\n",
      "    \"source\": [\n",
      "    \"\\n\",\n",
      "    \"    time        velocity    acceleration  \\n\",\n",
      "    \"------------  ------------  ------------  \\n\",\n",
      "    \"0.0                 1.4186         -5.01  \\n\",\n",
      "    \"2.0               1.376512        11.919  \\n\",\n",
      "    \"4.0                 1.1E+1     14.717624  \\n\",\n",
      "    \"\\n\",\n",
      "    \"\"\n",
      "    ]\n",
      "   },\n",
      "\n",
      "The Doconce source code reads"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "  |--------------------------------|\n",
      "  |time  | velocity | acceleration |\n",
      "  |--l--------r-----------r--------|\n",
      "  | 0.0  | 1.4186   | -5.01        |\n",
      "  | 2.0  | 1.376512 | 11.919       |\n",
      "  | 4.0  | 1.1E+1   | 14.717624    |\n",
      "  |--------------------------------|\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "Here is yet another table to test that we can handle more than\n",
      "one table:\n",
      "\n",
      "   {\n",
      "    \"cell_type\": \"markdown\",\n",
      "    \"metadata\": {},\n",
      "    \"source\": [\n",
      "    \"\\n\",\n",
      "    \"    time        velocity    acceleration  \\n\",\n",
      "    \"------------  ------------  ------------  \\n\",\n",
      "    \"0.0           1.4186        -5.01         \\n\",\n",
      "    \"1.0           1.376512      11.919        \\n\",\n",
      "    \"3.0           1.1E+1        14.717624     \\n\",\n",
      "    \"\\n\",\n",
      "    \"\"\n",
      "    ]\n",
      "   },\n",
      "And one with math headings (that are expanded and must be treated\n",
      "accordingly) and verbatim heading and entry:\n",
      "\n",
      "   {\n",
      "    \"cell_type\": \"markdown\",\n",
      "    \"metadata\": {},\n",
      "    \"source\": [\n",
      "    \"\\n\",\n",
      "    \"   $i$        $h_i$     $\\bar T_i$    `L_i`     \\n\",\n",
      "    \"----------  ----------  ----------  ----------  \\n\",\n",
      "    \"0                    0         288     -0.0065  \\n\",\n",
      "    \"1               11,000         216         0.0  \\n\",\n",
      "    \"2               20,000         216       0.001  \\n\",\n",
      "    \"3               32,000         228      0.0028  \\n\",\n",
      "    \"4               47,000         270         0.0  \\n\",\n",
      "    \"5               51,000         270     -0.0028  \\n\",\n",
      "    \"6               71,000         214       `NaN`  \\n\",\n",
      "    \"\\n\",\n",
      "    \"\"\n",
      "    ]\n",
      "   },\n",
      "And add one with verbatim headings (with underscores),\n",
      "and rows starting with `|-` because of a negative number,\n",
      "and `|` right after verbatim word (with no space):\n",
      "\n",
      "   {\n",
      "    \"cell_type\": \"markdown\",\n",
      "    \"metadata\": {},\n",
      "    \"source\": [\n",
      "    \"\\n\",\n",
      "    \"    exact          `v_1`      $a_i$ + `v_2`    `verb_3_`    \\n\",\n",
      "    \"-------------  -------------  -------------  -------------  \\n\",\n",
      "    \"            9           9.62           5.57           8.98  \\n\",\n",
      "    \"          -20         -23.39          -7.65         -19.93  \\n\",\n",
      "    \"           10          17.74          -4.50           9.96  \\n\",\n",
      "    \"            0          -9.19           4.13          -0.26  \\n\",\n",
      "    \"\\n\",\n",
      "    \"\"\n",
      "    ]\n",
      "   },\n",
      "\n",
      "### A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2`\n",
      "\n",
      "*Files `my_file_v1.py` and `my_file_v2.py` define some math $a_{i-1}$.* Here\n",
      "is\n",
      "some text.\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Example 1: Examples can be typeset as exercises\n",
      "\n",
      "Examples can start with a subsection heading starting with `Example:`\n",
      "and then, with the command-line option `--examples-as-exercises` be\n",
      "typeset as exercises. This is useful if one has solution\n",
      "environments as part of the example.\n",
      "\n",
      "\n",
      "*a)* State some problem.\n",
      "\n",
      "*Solution.* The answer to this subproblem can be written here.\n",
      "\n",
      "*b)* State some other problem.\n",
      "\n",
      "*Hint 1.* A hint can be given.\n",
      "\n",
      "*Hint 2.* Maybe even another hint?\n",
      "\n",
      "*Solution.* The answer to this other subproblem goes here,\n",
      "maybe over multiple doconce input lines.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "### URLs\n",
      "\n",
      "Testing of URLs: hpl's home page [hpl](http://folk.uio.no/hpl), or\n",
      "the entire URL if desired, <http://folk.uio.no/hpl>.  Here is a\n",
      "plain file link <testdoc.do.txt>, or <testdoc.do.txt>, or\n",
      "<testdoc.do.txt> or <testdoc.do.txt> or [a link with\n",
      "newline](testdoc.do.txt). Can test spaces with the link with word\n",
      "too: [hpl](http://folk.uio.no/hpl) or [hpl](http://folk.uio.no/hpl). Also `file:///` works: [link to a\n",
      "file](file:///home/hpl/vc/doconce/doc/demos/manual/manual.html) is\n",
      "fine to have. Moreover, \"loose\" URLs work, i.e., no quotes, just\n",
      "the plain URL as in <http://folk.uio.no/hpl>, if followed by space, comma,\n",
      "colon, semi-colon, question mark, exclamation mark, but not a period\n",
      "(which gets confused with the periods inside the URL).\n",
      "\n",
      "Here are some tough tests of URLs, especially for the `latex` format:\n",
      "[Newton-Cotes](http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas) formulas\n",
      "and a [good book](http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1). Need to test\n",
      "Newton-Cotes with percentage in URL too:\n",
      "<http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas>\n",
      "and <http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae> which has a shebang.\n",
      "\n",
      "<!-- Comments should be inserted outside paragraphs (because in the rst -->\n",
      "<!-- format extra blanks make a paragraph break). -->\n",
      "\n",
      "<!-- Note that when there is no http: or file:, it can be a file link -->\n",
      "<!-- if the link name is URL, url, \"URL\", or \"url\". Such files should, -->\n",
      "<!-- if rst output is desired, but placed in a `_static*` folder. -->\n",
      "\n",
      "More tough tests: repeated URLs whose footnotes when using the\n",
      "`--latex-printed` option must be correct. We have\n",
      "[google](http://google.com), [google](http://google.com), and\n",
      "[google](http://google.com), which should result in exactly three\n",
      "footnotes.\n",
      "\n",
      "\n",
      "\n",
      "### LaTeX Mathematics\n",
      "\n",
      "Here is an equation without label using backslash-bracket environment:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $  a = b + c  $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "or with number and label, as in Eq (my:eq1), using the equation environment:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{equation}  {\\partial u\\over\\partial t} = \\nabla^2 u \\label{my:eq1}  \\end{equation} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "We can refer to this equation by Eq (my:eq1).\n",
      "\n",
      "Here is a system without equation numbers, using the align-astrisk environment:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{align*}  \\pmb{a} &= \\pmb{q}\\times\\pmb{n} \\\\   b &= \\nabla^2 u + \\nabla^4 v  \\end{align*} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "More mathematical typesetting is demonstrated in the coming exercises.\n",
      "\n",
      "Below, we have  [Problem 1: Flip a Coin](#n) and  [Project 1: Compute a Probability](#y),\n",
      "as well as  [Project 2: Explore Distributions of Random Circles](#s) and [Project 3: References to Project ref{demo:ex:2} in a heading works for ipynb](#b), and in\n",
      "between there we have  [Exercise 3: Make references to projects and problems](#s).\n",
      "\n",
      "## Exercises\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Problem 1: Flip a Coin\n",
      "\n",
      "<!-- keywords = random numbers; Monte Carlo simulation -->\n",
      "\n",
      "<!-- Torture tests -->\n",
      "\n",
      "Make a program that simulates flipping a coin $N$ times.\n",
      "Print out \"tail\" or \"head\" for each flip and\n",
      "let the program count the number of heads.\n",
      "\n",
      "\n",
      "<!-- Test syntax error -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "#### Remarks\n",
      "\n",
      "Remarks with such a subsubsection heading would previously mark\n",
      "the beginning of a new exercise and cause trouble. Maybe a list\n",
      "\n",
      "1. Mark 1.\n",
      "\n",
      "2. Mark 2.\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 1.* Use `r = random.random()` and define head as `r <= 0.5`.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 2.* Draw an integer among $\\{1,2\\}$ with\n",
      "`r = random.randint(1,2)` and define head when `r` is 1.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin answer of exercise --- -->\n",
      "*Answer.* If the `random.random()` function returns a number $<1/2$, let it be\n",
      "head, otherwise tail. Repeat this $N$ number of times.\n",
      "<!-- --- end answer of exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Code:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "import sys, random\n",
      "N = int(sys.argv[1])\n",
      "heads = 0\n",
      "for i in range(N):\n",
      "    r = random.random()\n",
      "    if r <= 0.5:\n",
      "        heads += 1\n",
      "print 'Flipping a coin %d times gave %d heads' % (N, heads)\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- end solution of exercise --- -->\n",
      "Filenames: `flip_coin.py`, `flip_coin.pdf`.\n",
      "<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "### Not an exercise\n",
      "\n",
      "Should be possible to stick a normal section in the middle of many\n",
      "exercises.\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Project 1: Compute a Probability\n",
      "\n",
      "<!-- Minimalistic exercise -->\n",
      "\n",
      "\n",
      "What is the probability of getting a number between 0.5 and 0.6 when\n",
      "drawing uniformly distributed random numbers from the interval $[0,1)$?\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint.* To answer this question empirically, let a program\n",
      "draw $N$ such random numbers using Python's standard `random` module,\n",
      "count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and\n",
      "compute the probability as $M/N$.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Project 2: Explore Distributions of Random Circles\n",
      "\n",
      "The formula for a circle is given by"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{equation}  x = x_0 + R\\cos 2\\pi t,  \\end{equation} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": []
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $ \\begin{equation}    y = y_0 + R\\sin 2\\pi t,  \\end{equation} $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "where $R$ is the radius of the circle, $(x_0,y_0)$ is the\n",
      "center point, and $t$ is a parameter in the unit interval $[0,1]$.\n",
      "For any $t$, $(x,y)$ is a point on the circle.\n",
      "The formula can be used to generate `n` points on a circle:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "import numpy as np\n",
      "\n",
      "def circle(R, x0, y0, n=501):\n",
      "    t = np.linspace(0, 1, n)\n",
      "    x = x0 + R*np.cos(2*np.pi*t)\n",
      "    y = y0 + R*np.sin(2*np.pi*t)\n",
      "    return x, y\n",
      "\n",
      "x, y = circle(2.0, 0, 0)\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- Often in an exercise we have some comments about the solution -->\n",
      "<!-- which we normally want to keep where they are. -->\n",
      "\n",
      "The goal of this project is to draw $N$ circles with random\n",
      "center and radius. Plot each circle using the `circle` function\n",
      "above.\n",
      "\n",
      "\n",
      "*a)* Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint.* Use the `numpy.random` module to draw the\n",
      "$x_0$, $y_0$, and $R$ quantities.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin answer of exercise --- -->\n",
      "*Answer.* Here goes the short answer to part a).\n",
      "<!-- --- end answer of exercise --- -->\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Here goes a full solution to part a).\n",
      "<!-- --- end solution of exercise --- -->\n",
      "\n",
      "*b)* Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.\n",
      "Filename: `norm.py`.\n",
      "\n",
      "*c)* Let $R$ and $(x_0,y_0)$ be normally distributed.\n",
      "\n",
      "Filename: `circles.pdf`.\n",
      "\n",
      "<!-- Closing remarks for this Project -->\n",
      "\n",
      "#### Remarks\n",
      "\n",
      "At the very end of the exercise it may be appropriate to summarize\n",
      "and give some perspectives.\n",
      "\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Exercise 1: Determine some Distance\n",
      "\n",
      "Intro to this exercise. Questions are in subexercises below.\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- No meaning in this weired test example: -->\n",
      "The text here belongs to the main (intro) part of the exercise. Need\n",
      "closing remarks to have text after subexercises.\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Here goes a full solution of the whole exercise.\n",
      "With some math $a=b$ in this solution:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $  a=b.  $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "And code `a=b` in this solution:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "def func(x):\n",
      "    return x + 1  # with code in hint\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "End of solution is here.\n",
      "<!-- --- end solution of exercise --- -->\n",
      "\n",
      "\n",
      "*a)* Subexercises are numbered a), b), etc.\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 1.* First hint to subexercise a).\n",
      "With math $a=b$ in hint:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $  \\cos^2 x + \\sin^2 x = 1 \\thinspace . $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "And with code returning $x+1$ in hint:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "a = b  # code in solution\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- end hint in exercise --- -->\n",
      "\n",
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint 2.* Second hint to subexercise a).\n",
      "<!-- --- end hint in exercise --- -->\n",
      "Filename: `subexer_a.pdf`.\n",
      "\n",
      "\n",
      "<!-- --- begin answer of exercise --- -->\n",
      "*Answer.* Short answer to subexercise a).\n",
      "With math in answer: $a=b$.\n",
      "<!-- --- end answer of exercise --- -->\n",
      "\n",
      "*b)* Here goes the text for subexercise b).\n",
      "\n",
      "\n",
      "Some math $\\cos^2 x + \\sin^2 x = 1$ written one a single line:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $  \\hbox{math in solution: } a = b  $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- begin hint in exercise --- -->\n",
      "\n",
      "*Hint.* A hint for this subexercise.\n",
      "<!-- --- end hint in exercise --- -->\n",
      "Filename: `subexer_b.pdf`.\n",
      "\n",
      "\n",
      "<!-- --- begin solution of exercise --- -->\n",
      "*Solution.* Here goes the solution of this subexercise.\n",
      "<!-- --- end solution of exercise --- -->\n",
      "\n",
      "<!-- Closing remarks for this Exercise -->\n",
      "\n",
      "#### Remarks\n",
      "\n",
      "Some final closing remarks, e.g., summarizing the main findings\n",
      "and their implications in other problems can be made. These\n",
      "remarks will appear at the end of the typeset exercise.\n",
      "\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Some exercise without the \"Exercise:\" prefix\n",
      "\n",
      "<!-- Another minimalistic exercise -->\n",
      "\n",
      "Just some text. And some math saying that $e^0=1$ on a single line,\n",
      "to test that math block insertion is correct:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $  \\exp{(0)} = 1  $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "And a test that the code `lambda x: x+2` is correctly placed here:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "lambda x: x+2\n"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Example 2: Just an example\n",
      "\n",
      "<!-- This example needs the --examples-as-exercises option, otherwise -->\n",
      "<!-- it is just typeset as it is written. -->\n",
      "\n",
      "\n",
      "*a)* What is the capital of Norway?\n",
      "\n",
      "*Answer.* Oslo.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "## Here goes another section\n",
      "\n",
      "With some text, before we continue with exercises.\n",
      "\n",
      "## More Exercises\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Exercise 3: Make references to projects and problems\n",
      "\n",
      "Pick a statement from  [Project 2: Explore Distributions of Random Circles](#s) or  [Problem 1: Flip a Coin](#n)\n",
      "and verify it.\n",
      "Filename: `verify_formula.py`.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "\n",
      "\n",
      "<!-- --- begin exercise --- -->\n",
      "\n",
      "### Project 3: References to  [Project 1: Compute a Probability](#y) in a heading works for ipynb\n",
      "\n",
      "Refer to the previous exercise as  [Exercise 3: Make references to projects and problems](#s),\n",
      "the two before that as  [Project 1: Compute a Probability](#y) and [Project 2: Explore Distributions of Random Circles](#s),\n",
      "and this one as  [Project 3: References to Project ref{demo:ex:2} in a heading works for ipynb](#b).\n",
      "Filename: `selc_composed.pdf`.\n",
      "\n",
      "<!-- --- end exercise --- -->\n",
      "\n",
      "\n",
      "## Appendix: Just for testing; part I\n",
      "\n",
      "This is the first appendix.\n",
      "\n",
      "### A subsection within an appendix\n",
      "\n",
      "Some text.\n",
      "\n",
      "## Appendix: Just for testing; part II\n",
      "\n",
      "This is more stuff for an appendix.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "Without label.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "With label.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "With label.\n",
      "\n",
      "### Appendix: Testing identical titles\n",
      "\n",
      "Without label.\n",
      "\n",
      "\n",
      "\n",
      "*Hint.* Here is a hint.\n",
      "\n",
      "\n",
      "\n",
      "*Warning.* And here is a warning about something to pay attention to.\n",
      "\n",
      "*Summary.* Much testing in this document, otherwise stupid content.\n",
      "\n",
      "*Notice.* Ah, we are close to the end.\n",
      "With math:"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "### $  p=q $"
     ]
    },
    {
     "cell_type": "markdown",
     "metadata": {},
     "source": [
      "*Question.* So, how many admonition environments does Doconce support?"
     ]
    }
   ],
   "metadata": {}
  }
 ]
}

************** File: testdoc.tmp *****************

More text, with a reference back to Section ref{sec1} and further
to Section ref{subsubsec:ex}. idx{`somefunc` function}

# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

@@@CODE ../doc/manual/__testcode.f fromto: subroutine@
===== Project: Compute a Probability =====

# Minimalistic exercise

label{demo:ex:2}

What is the probability of getting a number between 0.5 and 0.6 when
Could not find match for from regex "\*\s+\$.+normally"

************** File: .testdoc.exerinfo *****************

# Information about all exercises in the file testdoc.do.txt.
# The information can be loaded into a Python list of dicts by
#
# f = open('.testdoc.exerinfo', 'r')
# exer = eval(f.read())
#
[{'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'Example',
  'no': 1,
  'solution': '',
  'solution_file': None,
  'subex': [{'answer': '',
             'file': None,
             'hints': [],
             'solution': 'The answer to this subproblem can be written here.',
             'text': 'State some problem.'},
            {'answer': '',
             'file': None,
             'hints': ['A hint can be given.', 'Maybe even another hint?'],
             'solution': 'The answer to this other subproblem goes here,\nmaybe over multiple doconce input lines.',
             'text': 'State some other problem.'}],
  'text': 'Examples can start with a subsection heading starting with `Example:`\nand then, with the command-line option `--examples-as-exercises` be\ntypeset as exercises. This is useful if one has solution\nenvironments as part of the example.',
  'title': 'Examples can be typeset as exercises',
  'type': 'Example',
  'type_visible': True},
 {'answer': 'If the `random.random()` function returns a number $<1/2$, let it be\nhead, otherwise tail. Repeat this $N$ number of times.',
  'closing_remarks': '',
  'file': ['flip_coin.py', 'flip_coin.pdf'],
  'heading': '=====',
  'hints': ['Use `r = random.random()` and define head as `r <= 0.5`.',
            'Draw an integer among $\\{1,2\\}$ with\n`r = random.randint(1,2)` and define head when `r` is 1.'],
  'keywords': ['random numbers', 'Monte Carlo simulation'],
  'label': 'demo:ex:1',
  'no': 1,
  'solution': "!bc pycod\nimport sys, random\nN = int(sys.argv[1])\nheads = 0\nfor i in range(N):\n    r = random.random()\n    if r <= 0.5:\n        heads += 1\nprint 'Flipping a coin %d times gave %d heads' % (N, heads)\n\n!ec",
  'solution_file': ['mysol.txt', 'mysol_flip_coin.py', 'yet_another.file'],
  'subex': [],
  'text': '# Torture tests\n\nMake a program that simulates flipping a coin $N$ times.\nPrint out "tail" or "head" for each flip and\nlet the program count the number of heads.\n\n\n# Test syntax error\n\n\n\n\n=== Remarks ===\n\nRemarks with such a subsubsection heading would previously mark\nthe beginning of a new exercise and cause trouble. Maybe a list\n\n o Mark 1.\n o Mark 2.',
  'title': 'Flip a Coin',
  'type': 'Problem',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': ["To answer this question empirically, let a program\ndraw $N$ such random numbers using Python's standard `random` module,\ncount how many of them, $M$, that fall in the interval $(0.5,0.6)$, and\ncompute the probability as $M/N$."],
  'keywords': None,
  'label': 'demo:ex:2',
  'no': 1,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': '# Minimalistic exercise\n\n\nWhat is the probability of getting a number between 0.5 and 0.6 when\ndrawing uniformly distributed random numbers from the interval $[0,1)$?',
  'title': 'Compute a Probability',
  'type': 'Project',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': 'At the very end of the exercise it may be appropriate to summarize\nand give some perspectives.',
  'file': ['circles.pdf'],
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'proj:circle1',
  'no': 2,
  'solution': '',
  'solution_file': None,
  'subex': [{'answer': 'Here goes the short answer to part a).',
             'file': None,
             'hints': ['Use the `numpy.random` module to draw the\n$x_0$, $y_0$, and $R$ quantities.'],
             'solution': 'Here goes a full solution to part a).',
             'text': 'Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.'},
            {'answer': '',
             'file': ['norm.py'],
             'hints': [],
             'solution': '',
             'text': 'Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.'},
            {'answer': '',
             'file': None,
             'hints': [],
             'solution': '',
             'text': 'Let $R$ and $(x_0,y_0)$ be normally distributed.'}],
  'text': 'The formula for a circle is given by\n\n!bt\n\\begin{equation}\nx = x_0 + R\\cos 2\\pi t,\n\\end{equation}\n\n!et\n\n!bt\n\\begin{equation}  \ny = y_0 + R\\sin 2\\pi t,\n\\end{equation}\n\n!et\nwhere $R$ is the radius of the circle, $(x_0,y_0)$ is the\ncenter point, and $t$ is a parameter in the unit interval $[0,1]$.\nFor any $t$, $(x,y)$ is a point on the circle.\nThe formula can be used to generate `n` points on a circle:\n\n!bc pypro\nimport numpy as np\n\ndef circle(R, x0, y0, n=501):\n    t = np.linspace(0, 1, n)\n    x = x0 + R*np.cos(2*np.pi*t)\n    y = y0 + R*np.sin(2*np.pi*t)\n    return x, y\n\nx, y = circle(2.0, 0, 0)\n\n!ec\n\n# Often in an exercise we have some comments about the solution\n# which we normally want to keep where they are.\n\nThe goal of this project is to draw $N$ circles with random\ncenter and radius. Plot each circle using the `circle` function\nabove.',
  'title': 'Explore Distributions of Random Circles',
  'type': 'Project',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': 'Some final closing remarks, e.g., summarizing the main findings\nand their implications in other problems can be made. These\nremarks will appear at the end of the typeset exercise.',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'exer:dist',
  'no': 1,
  'solution': 'Here goes a full solution of the whole exercise.\nWith some math $a=b$ in this solution:\n!bt\n\\[ \\hbox{math in solution: } a = b \\]\n\n!et\nAnd code `a=b` in this solution:\n!bc\na = b  # code in solution\n\n!ec \nEnd of solution is here.',
  'solution_file': None,
  'subex': [{'answer': 'Short answer to subexercise a).\nWith math in answer: $a=b$.',
             'file': ['subexer_a.pdf'],
             'hints': ['First hint to subexercise a).\nWith math $a=b$ in hint:\n\n16 <<<!!MATH_BLOCK\nAnd with code returning $x+1$ in hint:\n\n15 <<<!!CODE_BLOCK',
                       'Second hint to subexercise a).'],
             'solution': '',
             'text': 'Subexercises are numbered a), b), etc.'},
            {'answer': '',
             'file': ['subexer_b.pdf'],
             'hints': ['A hint for this subexercise.'],
             'solution': 'Here goes the solution of this subexercise.',
             'text': 'Here goes the text for subexercise b).\n\n\nSome math $\\cos^2 x + \\sin^2 x = 1$ written one a single line:\n\n!bt\n\\[ \\cos^2 x + \\sin^2 x = 1 \\thinspace .\\]\n\n!et'}],
  'text': 'Intro to this exercise. Questions are in subexercises below.\n\n\n\n\n\n#  No meaning in this weired test example:\nThe text here belongs to the main (intro) part of the exercise. Need\nclosing remarks to have text after subexercises.',
  'title': 'Determine some Distance',
  'type': 'Exercise',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': None,
  'no': 2,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': '# Another minimalistic exercise\n\nJust some text. And some math saying that $e^0=1$ on a single line,\nto test that math block insertion is correct:\n\n!bt\n\\[ \\exp{(0)} = 1 \\]\n\n!et\n\nAnd a test that the code `lambda x: x+2` is correctly placed here:\n\n!bc\nlambda x: x+2\n\n!ec',
  'title': 'Some exercise without the "Exercise:" prefix',
  'type': 'Exercise',
  'type_visible': False},
 {'answer': '',
  'closing_remarks': '',
  'file': None,
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': None,
  'no': 2,
  'solution': '',
  'solution_file': None,
  'subex': [{'answer': 'Oslo.',
             'file': None,
             'hints': [],
             'solution': '',
             'text': 'What is the capital of Norway?'}],
  'text': '# This example needs the --examples-as-exercises option, otherwise\n# it is just typeset as it is written.',
  'title': 'Just an example',
  'type': 'Example',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': ['verify_formula.py'],
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'exer:some:formula',
  'no': 3,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': 'Pick a statement from Project ref{proj:circle1} or Problem ref{demo:ex:1}\nand verify it.',
  'title': 'Make references to projects and problems',
  'type': 'Exercise',
  'type_visible': True},
 {'answer': '',
  'closing_remarks': '',
  'file': ['selc_composed.pdf'],
  'heading': '=====',
  'hints': [],
  'keywords': None,
  'label': 'exer:you',
  'no': 3,
  'solution': '',
  'solution_file': None,
  'subex': [],
  'text': 'Refer to the previous exercise as Exercise ref{exer:some:formula},\nthe two before that as Projects ref{demo:ex:2} and ref{proj:circle1},\nand this one as Project ref{exer:you}.',
  'title': 'References to Project ref{demo:ex:2} in a heading works for pandoc',
  'type': 'Project',
  'type_visible': True}]
************** File: tmp_encodings.txt *****************
iso-8859-1
iso-8859-1
iso-8859-1
iso-8859-1
iso-8859-1

************** File: testdoc_pnd_l2h.html *****************
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <script src="https://d3eoax9i5htok0.cloudfront.net/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<p>The format of this document is plain, homemade LaTeX (from Doconce).</p>
<p>This is a document with many test constructions for doconce syntax. It was used heavily for the development and kept for testing numerous constructions, also special and less common cases.</p>
<p>And exactly for test purposes we have an extra line here, which is part of the abstract.</p>
<h1 id="section-1">Section 1</h1>
<p>[sec1]</p>
<p>Here is a nested list:</p>
<ul>
<li><p>item1</p></li>
<li><p>item2</p></li>
<li><p>item3 which continues on the next line to test that feature</p></li>
<li><p>and a sublist</p>
<ul>
<li><p>with indented subitem1</p></li>
<li><p>and a subitem2</p></li>
</ul></li>
<li><p>and perhaps an ordered sublist</p>
<ol style="list-style-type: decimal">
<li><p>first item</p></li>
<li><p>second item, continuing on a new line</p></li>
</ol></li>
</ul>
<blockquote>
<p>Here are two lines that make up a block quote.</p>
</blockquote>
<h2 id="subsection-1">Subsection 1</h2>
<p>More text, with a reference back to Section [sec1] and further to Section [subsubsec:ex].</p>
<p>Let’s do some copying from files too. First from subroutine up to the very end,</p>
<pre><code>subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return</code></pre>
<p>and then just the subroutine,</p>
<pre><code>      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return</code></pre>
<p>and finally the complete file:</p>
<pre><code>C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return</code></pre>
<p>Testing other code environments. First Python:</p>
<pre><code>!bc pycod
def f(x):
    return x+1
!ec</code></pre>
<p>which gets rendered as</p>
<pre><code>def f(x):
    return x+1</code></pre>
<p>Now a complete program to be shown via Python Online Tutorial:</p>
<pre><code>def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v</code></pre>
<p>(<a href="{http://pythontutor.com/visualize.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&amp;mode=display&amp;cumulative=false&amp;heapPrimitives=false&amp;drawParentPointers=false&amp;textReferences=false&amp;py=2&amp;curInstr=0}">Visualize execution</a>)</p>
<p>Then Cython:</p>
<pre><code>cpdef f(double x):
    return x + 1</code></pre>
<p>C++:</p>
<pre><code>#include &lt;iostream&gt;

int main()
{
   std::cout &lt;&lt; &quot;Sample output&quot; &lt;&lt; std::endl;
   return 0
}</code></pre>
<p>And a little bit of Fortran:</p>
<pre><code>!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec</code></pre>
<p>which then is typeset as</p>
<pre><code>subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end</code></pre>
<p>System call:</p>
<pre><code>Terminal&gt; mkdir test
Terminal&gt; cd test
Terminal&gt; myprog -f
output1
output2</code></pre>
<p>It is time to test <code>verbatim inline font</code> especially with <code>a newline inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The exclamation mark inside the verbatim text is not smart for latex as we use ! in the <code>verb</code> typesetting... Also test backslashes like <code>\begin</code> and <code>\end</code> in inline verbatim text.</p>
<h2 id="subsection-2">Subsection 2</h2>
<p>[subsec:ex]</p>
<p>Test of figures. In particular we refer to Figure [fig:impact] in which there is a flow.</p>
<p>[ht]</p>
<div class="figure">
<embed src="../doc/manual/figs/streamtubes.eps"><p class="caption">image</p>
</div>
<p>Figures without captions are allowed.</p>
<div class="figure">
<embed src="../doc/manual/figs/streamtubes.eps"><p class="caption">image</p>
</div>
<p>Test of movies.</p>
<p>[ht]</p>
<p><a href="run:../doc/manual/figs/mjolnir.mpeg">../doc/manual/figs/mjolnir.mpeg</a></p>
<p>[ht]</p>
<p><a href="run:../doc/manual/figs/wavepacket.mpeg">../doc/manual/figs/wavepacket.mpeg</a></p>
<p>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). [mymov] (Movie of files <code>../doc/manual/figs/wavepacket_*.png</code> in <a href="{file:///home/hpl/vc/doconce/test/wavepacket_0001.html}"></a>)</p>
<p>Movies can be uploaded to YouTube and embedded as HTML or as a link.: <a href="{http://www.youtube.com/watch?v=_O7iUiftbKU}"></a></p>
<p>Here is figure [myfig] with a long multi-line caption and an extra space before the FIGURE keyword.</p>
<p>[ht]</p>
<div class="figure">
<embed src="../doc/manual/figs/wavepacket_0001.eps"><p class="caption">image</p>
</div>
<p>Movie [mymov] has a similar problem.</p>
<div class="figure">
<img src="downloaded_figures/f_plot.png" alt="image" /><p class="caption">image</p>
</div>
<h2 id="the-theta-parameter-not-nabla">The \(\theta\) parameter (not \(\nabla\)?)</h2>
<p>[decay:sec:theta]</p>
<p>Functions do not always need to be advanced, here is one involving \(\theta\):</p>
<pre><code>def f(theta):
    return theta**2</code></pre>
<h4 id="more-on-theta.">More on \(\theta\).</h4>
<p>Here is more text following headline with math.</p>
<p>Newcommands must also be tested in this : \(\half\), \(\halfi\), \(\x\), \(\Ddt{u}\), both inline and in block:</p>
<p>\[\begin{aligned}
\Ddt{u} &amp;= 0
\\ 
\half &amp;= \halfi\\ 
\half\x &amp;= \normalvec\end{aligned}\]</p>
<p>Or with align with label and numbers:</p>
<p>\[\begin{aligned}
\Ddt{u} &amp;= 0
\label{aligneq1}\\ 
\half &amp;= \halfi\\ 
\half\x &amp;= \normalvec
\label{aligneq2}\end{aligned}\]</p>
<h2 id="custom-environments">Custom Environments</h2>
<p>Here is an attempt to create a theorem environment via Mako (for counting theorems) and comment lines to help replacing lines in the <code>.tex</code> by proper begin-end LaTeX environments for theorems. Should look nice in most formats!</p>
<p>[theorem:fundamental1]</p>
<h4 id="theorem-5.">Theorem 5.</h4>
<p>Let \(a=1\) and \(b=2\). Then \(c=3\).</p>
<h4 id="proof.">Proof.</h4>
<p>Since \(c=a+b\), the result follows from straightforward addition. \(\Diamond\) As we see, the proof of Theorem 5 is a modest achievement.</p>
<h2 id="tables">Tables</h2>
<p>[subsec:table]</p>
<p>Let us take this table from the manual:</p>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">0.0</td>
<td align="left">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="left">2.0</td>
<td align="left">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="left">4.0</td>
<td align="left">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>The Doconce source code reads</p>
</blockquote>
<pre><code>|--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|</code></pre>
<p>Here is yet another table to test that we can handle more than one table:</p>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">0.0</td>
<td align="left">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="left">1.0</td>
<td align="left">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="left">3.0</td>
<td align="left">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>And one with math headings (that are expanded and must be treated accordingly) and verbatim heading and entry:</p>
</blockquote>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="left">0</td>
<td align="left">288</td>
<td align="left">-0.0065</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">11,000</td>
<td align="left">216</td>
<td align="left">0.0</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">20,000</td>
<td align="left">216</td>
<td align="left">0.001</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">32,000</td>
<td align="left">228</td>
<td align="left">0.0028</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="left">47,000</td>
<td align="left">270</td>
<td align="left">0.0</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="left">51,000</td>
<td align="left">270</td>
<td align="left">-0.0028</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="left">71,000</td>
<td align="left">214</td>
<td align="left"><code>NaN</code></td>
</tr>
</tbody>
</table>
<p>And add one with verbatim headings (with underscores), and rows starting with <code>|-</code> because of a negative number, and <code>|</code> right after verbatim word (with no space):</p>
</blockquote>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left">9</td>
<td align="left">9.62</td>
<td align="left">5.57</td>
<td align="left">8.98</td>
</tr>
<tr class="even">
<td align="left">-20</td>
<td align="left">-23.39</td>
<td align="left">-7.65</td>
<td align="left">-19.93</td>
</tr>
<tr class="odd">
<td align="left">10</td>
<td align="left">17.74</td>
<td align="left">-4.50</td>
<td align="left">9.96</td>
</tr>
<tr class="even">
<td align="left">0</td>
<td align="left">-9.19</td>
<td align="left">4.13</td>
<td align="left">-0.26</td>
</tr>
</tbody>
</table>
<h2>A test of verbatim words in heading with subscript \(a_i\): <code>my\_file\_v1</code> and <code>my\_file\_v2</code></h2>
</blockquote>
<h4 id="files-my_file_v1.py-and-my_file_v2.py-define-some-math-a_i-1.">Files <code>my\_file\_v1.py</code> and <code>my\_file\_v2.py</code> define some math \(a_{i-1}\).</h4>
<p>Here is some text.</p>
<h2 id="example-1-examples-can-be-typeset-as-exercises">Example 1: Examples can be typeset as exercises</h2>
<p>[Example]</p>
<p>Examples can start with a subsection heading starting with <code>Example:</code> and then, with the command-line option <code>--examples-as-exercises</code> be typeset as exercises. This is useful if one has solution environments as part of the example.</p>
<h4 id="a">a)</h4>
<p>State some problem.</p>
<h4 id="solution.">Solution.</h4>
<p>The answer to this subproblem can be written here.</p>
<h4 id="b">b)</h4>
<p>State some other problem.</p>
<h4 id="hint-1.">Hint 1.</h4>
<p>A hint can be given.</p>
<h4 id="hint-2.">Hint 2.</h4>
<p>Maybe even another hint?</p>
<h4 id="solution.-1">Solution.</h4>
<p>The answer to this other subproblem goes here, maybe over multiple doconce input lines.</p>
<h2 id="urls">URLs</h2>
<p>[subsubsec:ex]</p>
<p>Testing of URLs: hpl’s home page <a href="{http://folk.uio.no/hpl}">hpl</a>, or the entire URL if desired, <a href="{http://folk.uio.no/hpl}"></a>. Here is a plain file link <a href="{testdoc.do.txt}"></a>, or <a href="{testdoc.do.txt}"></a>, or <a href="{testdoc.do.txt}"></a> or <a href="{testdoc.do.txt}"></a> or <a href="{testdoc.do.txt}">a link with newline</a>. Can test spaces with the link with word too: <a href="{http://folk.uio.no/hpl}">hpl</a> or <a href="{http://folk.uio.no/hpl}">hpl</a>. Also <code>file:///</code> works: <a href="{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html}">link to a file</a> is fine to have. Moreover, &quot;loose&quot; URLs work, i.e., no quotes, just the plain URL as in <a href="{http://folk.uio.no/hpl}"></a>, if followed by space, comma, colon, semi-colon, question mark, exclamation mark, but not a period (which gets confused with the periods inside the URL).</p>
<p>Here are some tough tests of URLs, especially for the <code>latex</code> format: <a href="{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}">Newton-Cotes</a> formulas and a <a href="{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}">good book</a>. Need to test Newton-Cotes with percentage in URL too: <a href="{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}"></a> and <a href="{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}"></a> which has a shebang.</p>
<p>More tough tests: repeated URLs whose footnotes when using the <code>--latex-printed</code> option must be correct. We have <a href="{http://google.com}">google</a>, <a href="{http://google.com}">google</a>, and <a href="{http://google.com}">google</a>, which should result in exactly three footnotes.</p>
<h2 id="test-of-some-latex-fixes">Test of Some LaTeX Fixes</h2>
<p>Let’s check abbr. of some common kind, e.g. the well-known i.e. expression as an example. Moreover, Dr. Tang and Prof. Monsen, or maybe also prof. Ting, will go to the Dept. of Science to test how Mr. Hansen is doing together with Ms. Larsen. A sentence containing &quot;refines lines&quot; could easily fool a regex substitution with only i.e. since the dot matches anything. Also, look at Fig. 4 to see how the data compares with Tab. [mytab].</p>
<h2 id="latex-mathematics">LaTeX Mathematics</h2>
<p>Here is an equation without label using backslash-bracket environment: \[a = b + c\] or with number and label, as in ([my:eq1]), using the equation environment:</p>
<p>\[{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}\]</p>
<p>We can refer to this equation by ([my:eq1]).</p>
<p>Here is a system without equation numbers, using the align-astrisk environment:</p>
<p>\[\begin{aligned}
\pmb{a} &amp;= \pmb{q}\times\pmb{n} \\ 
b &amp;= \nabla^2 u + \nabla^4 v\end{aligned}\]</p>
<p>And here is a system of equations with labels in an align environment:</p>
<p>\[\begin{aligned}
a &amp;= q + 4 + 5+ 6 \label{eq1} \\ 
b &amp;= \nabla^2 u + \nabla^4 x \label{eq2}\end{aligned}\]</p>
<p>We can refer to ([eq1])-([eq2]).</p>
<p>Many of the next environments will fail in non-latex formats. Testing multiline:</p>
<p>\[\begin{gathered}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}\end{gathered}\]</p>
<p>Testing split:</p>
<p>\[\label{split:envir:eq}
\begin{split}
a = b = q &amp;+ \\ 
  &amp; f + \nabla\cdot\nabla u
\end{split}\]</p>
<p>We can refer to the last equation by ([split:envir:eq]).</p>
<p>Testing gather:</p>
<p>\[\begin{gathered}
a = b \\ 
c = d + 7 + 9\end{gathered}\]</p>
<p>Testing alignat:</p>
<p>\[\begin{aligned}
{2}
a &amp;= q + 4 + 5+ 6\qquad &amp; \mbox{for } q\geq 0 \label{eq1a} \\ 
b &amp;= \nabla^2 u + \nabla^4 x &amp; x\in\Omega \label{eq2a}\end{aligned}\]</p>
<p>Let us refer to ([eq1])-([eq2]) again, and to the alignat variant ([eq1a])-([eq2a]), and to ([my:eq1]).</p>
<p>Testing eqnarray:</p>
<p>\[\begin{aligned}
{\partial u\over\partial t} &amp;=&amp; \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &amp;=&amp; \nabla\cdot(q(u)\nabla v) + g \label{myeq2}\end{aligned}\]</p>
<p>More mathematical typesetting is demonstrated in the coming exercises.</p>
<p>Below, we have Problem [demo:ex:1] and Project [demo:ex:2], as well as Projects [proj:circle1] and [exer:you], and in between there we have Exercise [exer:some:formula].</p>
<h1 id="exercises">Exercises</h1>
<h2 id="problem-1-flip-a-coin">Problem 1: Flip a Coin</h2>
<p>[demo:ex:1] Make a program that simulates flipping a coin \(N\) times. Print out &quot;tail&quot; or &quot;head&quot; for each flip and let the program count the number of heads.</p>
<h4 id="remarks.">Remarks.</h4>
<p>Remarks with such a subsubsection heading would previously mark the beginning of a new exercise and cause trouble. Maybe a list</p>
<ol style="list-style-type: decimal">
<li><p>Mark 1.</p></li>
<li><p>Mark 2.</p></li>
</ol>
<h4 id="hint-1.-1">Hint 1.</h4>
<p>Use <code>r = random.random()</code> and define head as <code>r &lt;= 0.5</code>.</p>
<h4 id="hint-2.-1">Hint 2.</h4>
<p>Draw an integer among \(\{1,2\}\) with <code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.</p>
<h4 id="answer.">Answer.</h4>
<p>If the <code>random.random()</code> function returns a number \(&lt;1/2\), let it be head, otherwise tail. Repeat this \(N\) number of times.</p>
<h4 id="solution.-2">Solution.</h4>
<p>Code:</p>
<pre><code>import sys, random
N = int(sys.argv[1])
heads = 0
for i in range(N):
    r = random.random()
    if r &lt;= 0.5:
        heads += 1
print &#39;Flipping a coin %d times gave %d heads&#39; % (N, heads)</code></pre>
<p>Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.</p>
<h2 id="not-an-exercise">Not an exercise</h2>
<p>Should be possible to stick a normal section in the middle of many exercises.</p>
<h2 id="project-1-compute-a-probability">Project 1: Compute a Probability</h2>
<p>[demo:ex:2]</p>
<p>What is the probability of getting a number between 0.5 and 0.6 when drawing uniformly distributed random numbers from the interval \([0,1)\)?</p>
<h4 id="hint.">Hint.</h4>
<p>To answer this question empirically, let a program draw \(N\) such random numbers using Python’s standard <code>random</code> module, count how many of them, \(M\), that fall in the interval \((0.5,0.6)\), and compute the probability as \(M/N\).</p>
<h2 id="project-2-explore-distributions-of-random-circles">Project 2: Explore Distributions of Random Circles</h2>
<p>[proj:circle1]</p>
<p>The formula for a circle is given by</p>
<p>\[\begin{aligned}
x &amp;= x_0 + R\cos 2\pi t,\\ 
y &amp;= y_0 + R\sin 2\pi t,\end{aligned}\]</p>
<p>where \(R\) is the radius of the circle, \((x_0,y_0)\) is the center point, and \(t\) is a parameter in the unit interval \([0,1]\). For any \(t\), \((x,y)\) is a point on the circle. The formula can be used to generate <code>n</code> points on a circle:</p>
<pre><code>import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)</code></pre>
<p>The goal of this project is to draw \(N\) circles with random center and radius. Plot each circle using the <code>circle</code> function above.</p>
<h4 id="a-1">a)</h4>
<p>Let \(R\) be normally distributed and \((x_0,y_0)\) uniformly distributed.</p>
<h4 id="hint.-1">Hint.</h4>
<p>Use the <code>numpy.random</code> module to draw the \(x_0\), \(y_0\), and \(R\) quantities.</p>
<h4 id="answer.-1">Answer.</h4>
<p>Here goes the short answer to part a).</p>
<h4 id="solution.-3">Solution.</h4>
<p>Here goes a full solution to part a).</p>
<h4 id="b-1">b)</h4>
<p>Let \(R\) be uniformly distributed and \((x_0,y_0)\) normally distributed. Filename: <code>norm.py</code>.</p>
<h4 id="c">c)</h4>
<p>Let \(R\) and \((x_0,y_0)\) be normally distributed.</p>
<p>Filename: <code>circles.pdf</code>.</p>
<h4 id="remarks.-1">Remarks.</h4>
<p>At the very end of the exercise it may be appropriate to summarize and give some perspectives.</p>
<h2 id="exercise-1-determine-some-distance">Exercise 1: Determine some Distance</h2>
<p>[exer:dist]</p>
<p>Intro to this exercise. Questions are in subexercises below.</p>
<p>The text here belongs to the main (intro) part of the exercise. Need closing remarks to have text after subexercises.</p>
<h4 id="solution.-4">Solution.</h4>
<p>Here goes a full solution of the whole exercise. With some math \(a=b\) in this solution: \[\hbox{math in solution: } a = b\] And code <code>a=b</code> in this solution:</p>
<pre><code>a = b  # code in solution</code></pre>
<p>End of solution is here.</p>
<h4 id="a-2">a)</h4>
<p>Subexercises are numbered a), b), etc.</p>
<h4 id="hint-1.-2">Hint 1.</h4>
<p>First hint to subexercise a). With math \(a=b\) in hint:</p>
<p>\[a=b.\] And with code returning \(x+1\) in hint:</p>
<pre><code>def func(x):
    return x + 1  # with code in hint</code></pre>
<h4 id="hint-2.-2">Hint 2.</h4>
<p>Second hint to subexercise a). Filename: <code>subexer_a.pdf</code>.</p>
<h4 id="answer.-2">Answer.</h4>
<p>Short answer to subexercise a). With math in answer: \(a=b\).</p>
<h4 id="b-2">b)</h4>
<p>Here goes the text for subexercise b).</p>
<p>Some math \(\cos^2 x + \sin^2 x = 1\) written one a single line:</p>
<p>\[\cos^2 x + \sin^2 x = 1 \thinspace .\]</p>
<h4 id="hint.-2">Hint.</h4>
<p>A hint for this subexercise. Filename: <code>subexer_b.pdf</code>.</p>
<h4 id="solution.-5">Solution.</h4>
<p>Here goes the solution of this subexercise.</p>
<h4 id="remarks.-2">Remarks.</h4>
<p>Some final closing remarks, e.g., summarizing the main findings and their implications in other problems can be made. These remarks will appear at the end of the typeset exercise.</p>
<h2 id="some-exercise-without-the-exercise-prefix">Some exercise without the &quot;Exercise:&quot; prefix</h2>
<p>Just some text. And some math saying that \(e^0=1\) on a single line, to test that math block insertion is correct:</p>
<p>\[\exp{(0)} = 1\]</p>
<p>And a test that the code <code>lambda x: x+2</code> is correctly placed here:</p>
<pre><code>lambda x: x+2</code></pre>
<h2 id="example-2-just-an-example">Example 2: Just an example</h2>
<h4 id="a-3">a)</h4>
<p>What is the capital of Norway?</p>
<h4 id="answer.-3">Answer.</h4>
<p>Oslo.</p>
<h1 id="here-goes-another-section">Here goes another section</h1>
<p>With some text, before we continue with exercises.</p>
<h1 id="more-exercises">More Exercises</h1>
<h2 id="exercise-3-make-references-to-projects-and-problems">Exercise 3: Make references to projects and problems</h2>
<p>[exer:some:formula]</p>
<p>Pick a statement from Project [proj:circle1] or Problem [demo:ex:1] and verify it. Filename: <code>verify_formula.py</code>.</p>
<h2 id="project-3-references-to-projectdemoex2-in-a-heading-works-for-latex">Project 3: References to Project [demo:ex:2] in a heading works for latex</h2>
<p>[exer:you]</p>
<p>Refer to the previous exercise as Exercise [exer:some:formula], the two before that as Projects [demo:ex:2] and [proj:circle1], and this one as Project [exer:you]. Filename: <code>selc_composed.pdf</code>.</p>
<h1 id="just-for-testing-part-i">Just for testing; part I</h1>
<p>This is the first appendix.</p>
<h2 id="a-subsection-within-an-appendix">A subsection within an appendix</h2>
<p>Some text.</p>
<h1 id="just-for-testing-part-ii">Just for testing; part II</h1>
<p>This is more stuff for an appendix.</p>
<h2 id="appendix-testing-identical-titles">Appendix: Testing identical titles</h2>
<p>Without label.</p>
<h2 id="appendix-testing-identical-titles-1">Appendix: Testing identical titles</h2>
<p>[test:title:id1]</p>
<p>With label.</p>
<h2 id="appendix-testing-identical-titles-2">Appendix: Testing identical titles</h2>
<p>[test:title:id2]</p>
<p>With label.</p>
<h2 id="appendix-testing-identical-titles-3">Appendix: Testing identical titles</h2>
<p>Without label.</p>
</body>
</html>
pandoc 1.9.4.2
Compiled with citeproc-hs 0.3.4, texmath 0.6.0.6, highlighting-kate 0.5.1.
Syntax highlighting is supported for the following languages:
    Actionscript, Ada, Alert, Alert_indent, Apache, Asn1, Asp, Awk, Bash,
    Bibtex, Boo, C, Changelog, Clojure, Cmake, Coffeescript, Coldfusion,
    Commonlisp, Cpp, Cs, Css, D, Diff, Djangotemplate, Doxygen, Dtd, Eiffel,
    Email, Erlang, Fortran, Fsharp, Gnuassembler, Go, Haskell, Haxe, Html, Ini,
    Java, Javadoc, Javascript, Json, Jsp, Latex, Lex, LiterateHaskell, Lua,
    Makefile, Mandoc, Matlab, Maxima, Metafont, Mips, Modula2, Modula3,
    Monobasic, Nasm, Noweb, Objectivec, Objectivecpp, Ocaml, Octave, Pascal,
    Perl, Php, Pike, Postscript, Prolog, Python, R, Relaxngcompact, Rhtml, Ruby,
    Scala, Scheme, Sci, Sed, Sgml, Sql, SqlMysql, SqlPostgresql, Tcl, Texinfo,
    Verilog, Vhdl, Xml, Xorg, Xslt, Xul, Yacc, Yaml
Copyright (C) 2006-2012 John MacFarlane
Web:  http://johnmacfarlane.net/pandoc
This is free software; see the source for copying conditions.  There is no
warranty, not even for merchantability or fitness for a particular purpose.

************** File: testdoc_pnd_d2h.html *****************
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo" />
  <meta name="author" content="Kaare Dump at Segfault Inc, Cyberspace" />
  <meta name="author" content="A. Dummy Author" />
  <meta name="author" content="I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst" />
  <meta name="author" content="J. Doe" />
  <title>A Document for Testing Doconce</title>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <script src="https://d3eoax9i5htok0.cloudfront.net/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
<div id="header">
<h1 class="title">A Document for Testing Doconce</h1>
<h2 class="author">Hans Petter Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo</h2>
<h2 class="author">Kaare Dump at Segfault Inc, Cyberspace</h2>
<h2 class="author">A. Dummy Author</h2>
<h2 class="author">I. S. Overworked at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and Fourth Inst</h2>
<h2 class="author">J. Doe</h2>
<h3 class="date">Jan 32, 2100</h3>
</div>
<!-- Table of contents: Run pandoc with --toc option -->



<!-- !split -->

<p>The format of this document is pandoc <em>Abstract.</em> This is a document with many test constructions for doconce syntax. It was used heavily for the development and kept for testing numerous constructions, also special and less common cases.</p>
<p>And exactly for test purposes we have an extra line here, which is part of the abstract.</p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->



<h1 id="section-1">Section 1</h1>
<p>Here is a nested list:</p>
<ul>
<li><p>item1</p></li>
<li><p>item2</p></li>
<li><p>item3 which continues on the next line to test that feature</p></li>
<li><p>and a sublist</p>
<ul>
<li><p>with indented subitem1</p></li>
<li><p>and a subitem2</p></li>
</ul></li>
<li><p>and perhaps an ordered sublist</p></li>
</ul>
<ol style="list-style-type: decimal">
<li><p>first item</p></li>
<li><p>second item, continuing on a new line</p></li>
</ol>
<blockquote>
<p>Here are two lines that make up a block quote.</p>
</blockquote>
<!-- !split and check if these extra words are included properly in the comment -->

<h2 id="subsection-1">Subsection 1</h2>
<p>More text, with a reference back to the section <a href="#n-1">Section 1</a> and further to the section <a href="#s">URLs</a>. <!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console --></p>
<p>Let's do some copying from files too. First from subroutine up to the very end,</p>
<pre class="sourceCode Fortran"><code class="sourceCode fortran">      <span class="kw">subroutine</span> test()
      <span class="dt">integer</span> i
      <span class="dt">real*8</span> r
      r <span class="kw">=</span> <span class="dv">0</span>
      <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, i
         r <span class="kw">=</span> r <span class="kw">+</span> i
      <span class="kw">end do</span>
      <span class="kw">return</span>
<span class="co">C     END1</span>

      <span class="kw">program</span> testme
      <span class="kw">call</span> test()
      <span class="kw">return</span></code></pre>
<p>and then just the subroutine,</p>
<pre class="sourceCode Fortran"><code class="sourceCode fortran">      <span class="kw">subroutine</span> test()
      <span class="dt">integer</span> i
      <span class="dt">real*8</span> r
      r <span class="kw">=</span> <span class="dv">0</span>
      <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, i
         r <span class="kw">=</span> r <span class="kw">+</span> i
      <span class="kw">end do</span>
      <span class="kw">return</span></code></pre>
<p>and finally the complete file:</p>
<pre class="sourceCode Fortran"><code class="sourceCode fortran"><span class="co">C     a comment</span>

      <span class="kw">subroutine</span> test()
      <span class="dt">integer</span> i
      <span class="dt">real*8</span> r
      r <span class="kw">=</span> <span class="dv">0</span>
      <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, i
         r <span class="kw">=</span> r <span class="kw">+</span> i
      <span class="kw">end do</span>
      <span class="kw">return</span>
<span class="co">C     END1</span>

      <span class="kw">program</span> testme
      <span class="kw">call</span> test()
      <span class="kw">return</span></code></pre>
<p>Testing other code environments. First Python:</p>
<pre><code>!bc pycod
def f(x):
    return x+1
!ec</code></pre>
<p>which gets rendered as</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="kw">def</span> f(x):
    <span class="kw">return</span> x<span class="dv">+1</span></code></pre>
<p>Now a complete program to be shown via Python Online Tutorial:</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="kw">def</span> f(x):
    <span class="kw">return</span> x + <span class="dv">1</span>

a = <span class="dv">2</span>
x = a
a = <span class="dv">1</span>
v = f(x)
<span class="kw">print</span> v</code></pre>
<p>Then Cython:</p>
<pre><code>cpdef f(double x):
    return x + 1</code></pre>
<p><!-- This one tests a + sign before a code environment --> C++:</p>
<pre class="sourceCode Cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;iostream&gt;</span>

<span class="dt">int</span> main()
{
   std::cout &lt;&lt; <span class="st">&quot;Sample output&quot;</span> &lt;&lt; std::endl;
   <span class="kw">return</span> <span class="dv">0</span>
}</code></pre>
<p><!-- The next should get correctly typset in sphinx (cod is fcod) --> And a little bit of Fortran:</p>
<pre><code>!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec</code></pre>
<p>which then is typeset as</p>
<pre class="sourceCode Python"><code class="sourceCode python">      subroutine midpt(x, length, a, b)
      real*<span class="dv">8</span> a, b, x
      x = (a + b)/<span class="dv">2</span>
      length = b - a
      <span class="kw">return</span>
      end</code></pre>
<p>System call:</p>
<pre class="sourceCode Bash"><code class="sourceCode bash">Terminal<span class="kw">&gt;</span> <span class="kw">mkdir</span> <span class="kw">test</span>
Terminal<span class="kw">&gt;</span> <span class="kw">cd</span> <span class="kw">test</span>
Terminal<span class="kw">&gt;</span> myprog -f
output1
output2</code></pre>
<p>It is time to test <code>verbatim inline font</code> especially with <code>a newline inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The exclamation mark inside the verbatim text is not smart for latex as we use ! in the <code>verb</code> typesetting... Also test backslashes like <code>\begin</code> and <code>\end</code> in inline verbatim text.</p>
<h2 id="subsection-2">Subsection 2</h2>
<p>Test of figures. In particular we refer to Figure ref{fig:impact} in which there is a flow.</p>
<div class="figure">
<img src="../doc/manual/figs/streamtubes.png" alt="Visualization of flow by streamtubes." /><p class="caption">Visualization of flow by streamtubes.</p>
</div>
<p>Figures without captions are allowed.</p>
<div class="figure">
<img src="../doc/manual/figs/streamtubes.png" /><p class="caption"></p>
</div>
<p>Test of movies.</p>
<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
</p>


<!-- Test empty caption: -->


<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em></em>
</p>


<!-- Test wrong syntax and multi-line caption -->


<p>
<a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a> <em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie).</em>
</p>

<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate -->


<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<p><em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em></p>
<!-- Test multi-line caption in figure -->

<p>Here is figure ref{myfig} with a long multi-line caption and an extra space before the FIGURE keyword.</p>
<div class="figure">
<img src="../doc/manual/figs/wavepacket_0001.png" alt="A long caption spanning several lines and containing verbatim words like my_file_v1 and my_file_v2 as well as math with subscript as in t_{i+1}." /><p class="caption">A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in \(t_{i+1}\).</p>
</div>
<p>Movie ref{mymov} has a similar problem.</p>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<!-- Test URL as figure name -->

<div class="figure">
<img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" /><p class="caption"></p>
</div>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<h2 id="the-theta-parameter-not-nabla">The \(\theta\) parameter (not \(\nabla\)?)</h2>
<p>Functions do not always need to be advanced, here is one involving \(\theta\):</p>
<pre><code>def f(theta):
    return theta**2</code></pre>
<p><em>More on \(\theta\).</em> Here is more text following headline with math.</p>
<p>Newcommands must also be tested in this test report: \(\frac{1}{2}\), \({1/2}\), \(\pmb{x}\), \(\frac{Du}{dt}\), both inline and in block:</p>
<p>\[
\begin{align*}
\frac{Du}{dt} &amp;= 0
\\ 
\frac{1}{2} &amp;= {1/2}\\ 
\frac{1}{2}\pmb{x} &amp;= \pmb{n}
\end{align*}
\]</p>
<p>Or with align with label and numbers:</p>
<p>\[
\begin{equation}
\frac{Du}{dt} = 0
\label{aligneq1}
\end{equation}
\]</p>
<p>\[
\begin{equation}  
\frac{1}{2} = {1/2}
\end{equation}
\]</p>
<p>\[
\begin{equation}  
\frac{1}{2}\pmb{x} = \pmb{n}
\label{aligneq2}
\end{equation}
\]</p>
<h2 id="custom-environments">Custom Environments</h2>
<p>Here is an attempt to create a theorem environment via Mako (for counting theorems) and comment lines to help replacing lines in the <code>.tex</code> by proper begin-end LaTeX environments for theorems. Should look nice in most formats!</p>
<!-- begin theorem -->

<p><em>Theorem 5.</em> Let \(a=1\) and \(b=2\). Then \(c=3\). <!-- end theorem --></p>
<p><!-- begin proof --> <em>Proof.</em> Since \(c=a+b\), the result follows from straightforward addition. \(\Diamond\) <!-- end proof --></p>
<p>As we see, the proof of Theorem 5 is a modest achievement.</p>
<h2 id="tables">Tables</h2>
<!-- index with comma could fool sphinx -->

<p>Let us take this table from the manual:</p>
<table>
<thead>
<tr class="header">
<th align="center">time</th>
<th align="center">velocity</th>
<th align="left">acceleration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.0</td>
<td align="center">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="center">2.0</td>
<td align="center">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="center">4.0</td>
<td align="center">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>The Doconce source code reads</p>
<pre><code>  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|</code></pre>
<p>Here is yet another table to test that we can handle more than one table:</p>
<table>
<thead>
<tr class="header">
<th align="center">time</th>
<th align="center">velocity</th>
<th align="left">acceleration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0.0</td>
<td align="center">1.4186</td>
<td align="left">-5.01</td>
</tr>
<tr class="even">
<td align="center">1.0</td>
<td align="center">1.376512</td>
<td align="left">11.919</td>
</tr>
<tr class="odd">
<td align="center">3.0</td>
<td align="center">1.1E+1</td>
<td align="left">14.717624</td>
</tr>
</tbody>
</table>
<p>And one with math headings (that are expanded and must be treated accordingly) and verbatim heading and entry:</p>
<table>
<thead>
<tr class="header">
<th align="center">\(i\)</th>
<th align="center">\(h_i\)</th>
<th align="left">\(\bar T_i\)</th>
<th align="center"><code>L_i</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="left">288</td>
<td align="center">-0.0065</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">11,000</td>
<td align="left">216</td>
<td align="center">0.0</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">20,000</td>
<td align="left">216</td>
<td align="center">0.001</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">32,000</td>
<td align="left">228</td>
<td align="center">0.0028</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">47,000</td>
<td align="left">270</td>
<td align="center">0.0</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">51,000</td>
<td align="left">270</td>
<td align="center">-0.0028</td>
</tr>
<tr class="odd">
<td align="center">6</td>
<td align="center">71,000</td>
<td align="left">214</td>
<td align="center"><code>NaN</code></td>
</tr>
</tbody>
</table>
<p>And add one with verbatim headings (with underscores), and rows starting with <code>|-</code> because of a negative number, and <code>|</code> right after verbatim word (with no space):</p>
<table>
<thead>
<tr class="header">
<th align="center">exact</th>
<th align="center"><code>v_1</code></th>
<th align="left">\(a_i\) + <code>v_2</code></th>
<th align="center"><code>verb_3_</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">9</td>
<td align="center">9.62</td>
<td align="left">5.57</td>
<td align="center">8.98</td>
</tr>
<tr class="even">
<td align="center">-20</td>
<td align="center">-23.39</td>
<td align="left">-7.65</td>
<td align="center">-19.93</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">17.74</td>
<td align="left">-4.50</td>
<td align="center">9.96</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">-9.19</td>
<td align="left">4.13</td>
<td align="center">-0.26</td>
</tr>
</tbody>
</table>
<h2 id="a-test-of-verbatim-words-in-heading-with-subscript-a_i-my_file_v1-and-my_file_v2">A test of verbatim words in heading with subscript \(a_i\): <code>my_file_v1</code> and <code>my_file_v2</code></h2>
<p><em>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math \(a_{i-1}\).</em> Here is some text.</p>
<!-- --- begin exercise --- -->

<h2 id="example-1-examples-can-be-typeset-as-exercises">Example 1: Examples can be typeset as exercises</h2>
<p>Examples can start with a subsection heading starting with <code>Example:</code> and then, with the command-line option <code>--examples-as-exercises</code> be typeset as exercises. This is useful if one has solution environments as part of the example.</p>
<p><em>a)</em> State some problem.</p>
<p><em>Solution.</em> The answer to this subproblem can be written here.</p>
<p><em>b)</em> State some other problem.</p>
<p><em>Hint 1.</em> A hint can be given.</p>
<p><em>Hint 2.</em> Maybe even another hint?</p>
<p><em>Solution.</em> The answer to this other subproblem goes here, maybe over multiple doconce input lines.</p>
<!-- --- end exercise --- -->


<h2 id="urls">URLs</h2>
<p>Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or the entire URL if desired, <a href="http://folk.uio.no/hpl"><code class="url">http://folk.uio.no/hpl</code></a>. Here is a plain file link <testdoc.do.txt>, or <testdoc.do.txt>, or <testdoc.do.txt> or <testdoc.do.txt> or <a href="testdoc.do.txt">a link with newline</a>. Can test spaces with the link with word too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a file</a> is fine to have. Moreover, &quot;loose&quot; URLs work, i.e., no quotes, just the plain URL as in <a href="http://folk.uio.no/hpl"><code class="url">http://folk.uio.no/hpl</code></a>, if followed by space, comma, colon, semi-colon, question mark, exclamation mark, but not a period (which gets confused with the periods inside the URL).</p>
<p>Here are some tough tests of URLs, especially for the <code>latex</code> format: <a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test Newton-Cotes with percentage in URL too: <a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><code class="url">http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</code></a> and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><code class="url">http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</code></a> which has a shebang.</p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a `_static*` folder. -->

<p>More tough tests: repeated URLs whose footnotes when using the <code>--latex-printed</code> option must be correct. We have <a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and <a href="http://google.com">google</a>, which should result in exactly three footnotes.</p>
<h2 id="latex-mathematics">LaTeX Mathematics</h2>
<p>Here is an equation without label using backslash-bracket environment: \[
 a = b + c 
\] or with number and label, as in , using the equation environment: \[
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
\] We can refer to this equation by .</p>
<p>Here is a system without equation numbers, using the align-astrisk environment: \[
\begin{align*}
\pmb{a} &amp;= \pmb{q}\times\pmb{n} \\ 
b &amp;= \nabla^2 u + \nabla^4 v
\end{align*}
\]</p>
<p>And here is a system of equations with labels in an align environment: \[
\begin{equation}
a = q + 4 + 5+ 6 \label{eq1} 
\end{equation}
\]</p>
<p>\[
\begin{equation}  
b = \nabla^2 u + \nabla^4 x \label{eq2}
\end{equation}
\] We can refer to -.</p>
<p>Many of the next environments will fail in non-latex formats. Testing multiline: \[
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
\] Testing split: \[
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &amp;+ \\ 
  &amp; f + \nabla\cdot\nabla u
\end{split}
\end{equation}
\] We can refer to the last equation by .</p>
<p>Testing gather: \[
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
\]</p>
<p>Testing alignat: \[
\begin{alignat}{2}
a &amp;= q + 4 + 5+ 6\qquad &amp; \mbox{for } q\geq 0 \label{eq1a} \\ 
b &amp;= \nabla^2 u + \nabla^4 x &amp; x\in\Omega \label{eq2a}
\end{alignat}
\] Let us refer to - again, and to the alignat variant -, and to .</p>
<p>Testing eqnarray: \[
\begin{eqnarray}
{\partial u\over\partial t} &amp;=&amp; \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &amp;=&amp; \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
\]</p>
<p>More mathematical typesetting is demonstrated in the coming exercises.</p>
<p>Below, we have <a href="#n">Problem 1: Flip a Coin</a> and <a href="#y">Project 1: Compute a Probability</a>, as well as <a href="#s">Project 2: Explore Distributions of Random Circles</a> and <a href="#c">Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc</a>, and in between there we have <a href="#s">Exercise 3: Make references to projects and problems</a>.</p>
<h1 id="exercises">Exercises</h1>
<!-- --- begin exercise --- -->

<h2 id="problem-1-flip-a-coin">Problem 1: Flip a Coin</h2>
<!-- keywords = random numbers; Monte Carlo simulation -->

<!-- Torture tests -->

<p>Make a program that simulates flipping a coin \(N\) times. Print out &quot;tail&quot; or &quot;head&quot; for each flip and let the program count the number of heads.</p>
<!-- Test syntax error -->




<p>Remarks ~~~~~~~</p>
<p>Remarks with such a subsubsection heading would previously mark the beginning of a new exercise and cause trouble. Maybe a list</p>
<ol style="list-style-type: decimal">
<li><p>Mark 1.</p></li>
<li><p>Mark 2. <!-- --- begin hint in exercise --- --></p></li>
</ol>
<p><em>Hint 1.</em> Use <code>r = random.random()</code> and define head as <code>r &lt;= 0.5</code>. <!-- --- end hint in exercise --- --></p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint 2.</em> Draw an integer among \(\{1,2\}\) with <code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1. <!-- --- end hint in exercise --- --></p>
<p><!-- --- begin answer of exercise --- --> <em>Answer.</em> If the <code>random.random()</code> function returns a number \(&lt;1/2\), let it be head, otherwise tail. Repeat this \(N\) number of times. <!-- --- end answer of exercise --- --></p>
<p><!-- --- begin solution of exercise --- --> <em>Solution.</em> Code:</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="ch">import</span> sys, random
N = <span class="dt">int</span>(sys.argv[<span class="dv">1</span>])
heads = <span class="dv">0</span>
<span class="kw">for</span> i in <span class="dt">range</span>(N):
    r = random.random()
    <span class="kw">if</span> r &lt;= <span class="fl">0.5</span>:
        heads += <span class="dv">1</span>
<span class="kw">print</span> <span class="st">&#39;Flipping a coin </span><span class="ot">%d</span><span class="st"> times gave </span><span class="ot">%d</span><span class="st"> heads&#39;</span> % (N, heads)</code></pre>
<p><!-- --- end solution of exercise --- --> Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>. <!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file --></p>
<!-- --- end exercise --- -->


<h2 id="not-an-exercise">Not an exercise</h2>
<p>Should be possible to stick a normal section in the middle of many exercises.</p>
<!-- --- begin exercise --- -->

<h2 id="project-1-compute-a-probability">Project 1: Compute a Probability</h2>
<!-- Minimalistic exercise -->


<p>What is the probability of getting a number between 0.5 and 0.6 when drawing uniformly distributed random numbers from the interval \([0,1)\)?</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint.</em> To answer this question empirically, let a program draw \(N\) such random numbers using Python's standard <code>random</code> module, count how many of them, \(M\), that fall in the interval \((0.5,0.6)\), and compute the probability as \(M/N\). <!-- --- end hint in exercise --- --></p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h2 id="project-2-explore-distributions-of-random-circles">Project 2: Explore Distributions of Random Circles</h2>
<p>The formula for a circle is given by</p>
<p>\[
\begin{equation}
x = x_0 + R\cos 2\pi t,
\end{equation}
\]</p>
<p>\[
\begin{equation}  
y = y_0 + R\sin 2\pi t,
\end{equation}
\] where \(R\) is the radius of the circle, \((x_0,y_0)\) is the center point, and \(t\) is a parameter in the unit interval \([0,1]\). For any \(t\), \((x,y)\) is a point on the circle. The formula can be used to generate <code>n</code> points on a circle:</p>
<pre class="sourceCode Python"><code class="sourceCode python"><span class="ch">import</span> numpy <span class="ch">as</span> np

<span class="kw">def</span> circle(R, x0, y0, n=<span class="dv">501</span>):
    t = np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, n)
    x = x0 + R*np.cos(<span class="dv">2</span>*np.pi*t)
    y = y0 + R*np.sin(<span class="dv">2</span>*np.pi*t)
    <span class="kw">return</span> x, y

x, y = circle(<span class="fl">2.0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</code></pre>
<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>The goal of this project is to draw \(N\) circles with random center and radius. Plot each circle using the <code>circle</code> function above.</p>
<p><em>a)</em> Let \(R\) be normally distributed and \((x_0,y_0)\) uniformly distributed.</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint.</em> Use the <code>numpy.random</code> module to draw the \(x_0\), \(y_0\), and \(R\) quantities. <!-- --- end hint in exercise --- --></p>
<p><!-- --- begin answer of exercise --- --> <em>Answer.</em> Here goes the short answer to part a). <!-- --- end answer of exercise --- --></p>
<p><!-- --- begin solution of exercise --- --> <em>Solution.</em> Here goes a full solution to part a). <!-- --- end solution of exercise --- --></p>
<p><em>b)</em> Let \(R\) be uniformly distributed and \((x_0,y_0)\) normally distributed. Filename: <code>norm.py</code>.</p>
<p><em>c)</em> Let \(R\) and \((x_0,y_0)\) be normally distributed.</p>
<p>Filename: <code>circles.pdf</code>.</p>
<!-- Closing remarks for this Project -->

<p>Remarks ~~~~~~~</p>
<p>At the very end of the exercise it may be appropriate to summarize and give some perspectives.</p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h2 id="exercise-1-determine-some-distance">Exercise 1: Determine some Distance</h2>
<p>Intro to this exercise. Questions are in subexercises below.</p>
<p><!-- No meaning in this weired test example: --> The text here belongs to the main (intro) part of the exercise. Need closing remarks to have text after subexercises.</p>
<p><!-- --- begin solution of exercise --- --> <em>Solution.</em> Here goes a full solution of the whole exercise. With some math \(a=b\) in this solution: \[
 \hbox{math in solution: } a = b 
\] And code <code>a=b</code> in this solution:</p>
<pre><code>a = b  # code in solution</code></pre>
<p>End of solution is here. <!-- --- end solution of exercise --- --></p>
<p><em>a)</em> Subexercises are numbered a), b), etc.</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint 1.</em> First hint to subexercise a). With math \(a=b\) in hint:</p>
<p>\[
 a=b. 
\] And with code returning \(x+1\) in hint:</p>
<pre><code>def func(x):
    return x + 1  # with code in hint</code></pre>
<!-- --- end hint in exercise --- -->

<!-- --- begin hint in exercise --- -->

<p><em>Hint 2.</em> Second hint to subexercise a). <!-- --- end hint in exercise --- --> Filename: <code>subexer_a.pdf</code>.</p>
<p><!-- --- begin answer of exercise --- --> <em>Answer.</em> Short answer to subexercise a). With math in answer: \(a=b\). <!-- --- end answer of exercise --- --></p>
<p><em>b)</em> Here goes the text for subexercise b).</p>
<p>Some math \(\cos^2 x + \sin^2 x = 1\) written one a single line:</p>
<p>\[
 \cos^2 x + \sin^2 x = 1 \thinspace .
\]</p>
<!-- --- begin hint in exercise --- -->

<p><em>Hint.</em> A hint for this subexercise. <!-- --- end hint in exercise --- --> Filename: <code>subexer_b.pdf</code>.</p>
<p><!-- --- begin solution of exercise --- --> <em>Solution.</em> Here goes the solution of this subexercise. <!-- --- end solution of exercise --- --></p>
<!-- Closing remarks for this Exercise -->

<p>Remarks ~~~~~~~</p>
<p>Some final closing remarks, e.g., summarizing the main findings and their implications in other problems can be made. These remarks will appear at the end of the typeset exercise.</p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h2 id="some-exercise-without-the-exercise-prefix">Some exercise without the &quot;Exercise:&quot; prefix</h2>
<!-- Another minimalistic exercise -->

<p>Just some text. And some math saying that \(e^0=1\) on a single line, to test that math block insertion is correct:</p>
<p>\[
 \exp{(0)} = 1 
\]</p>
<p>And a test that the code <code>lambda x: x+2</code> is correctly placed here:</p>
<pre><code>lambda x: x+2</code></pre>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h2 id="example-2-just-an-example">Example 2: Just an example</h2>
<!-- This example needs the --examples-as-exercises option, otherwise -->
<!-- it is just typeset as it is written. -->


<p><em>a)</em> What is the capital of Norway?</p>
<p><em>Answer.</em> Oslo.</p>
<!-- --- end exercise --- -->


<h1 id="here-goes-another-section">Here goes another section</h1>
<p>With some text, before we continue with exercises.</p>
<h1 id="more-exercises">More Exercises</h1>
<!-- --- begin exercise --- -->

<h2 id="exercise-3-make-references-to-projects-and-problems">Exercise 3: Make references to projects and problems</h2>
<p>Pick a statement from <a href="#s">Project 2: Explore Distributions of Random Circles</a> or <a href="#n">Problem 1: Flip a Coin</a> and verify it. Filename: <code>verify_formula.py</code>.</p>
<!-- --- end exercise --- -->




<!-- --- begin exercise --- -->

<h2 id="project-3-references-to-project-1-compute-a-probability-in-a-heading-works-for-pandoc">Project 3: References to <a href="#y">Project 1: Compute a Probability</a> in a heading works for pandoc</h2>
<p>Refer to the previous exercise as <a href="#s">Exercise 3: Make references to projects and problems</a>, the two before that as <a href="#y">Project 1: Compute a Probability</a> and <a href="#s">Project 2: Explore Distributions of Random Circles</a>, and this one as <a href="#c">Project 3: References to Project ref{demo:ex:2} in a heading works for pandoc</a>. Filename: <code>selc_composed.pdf</code>.</p>
<!-- --- end exercise --- -->


<h1 id="appendix-just-for-testing-part-i">Appendix: Just for testing; part I</h1>
<p>This is the first appendix.</p>
<h2 id="a-subsection-within-an-appendix">A subsection within an appendix</h2>
<p>Some text.</p>
<h1 id="appendix-just-for-testing-part-ii">Appendix: Just for testing; part II</h1>
<p>This is more stuff for an appendix.</p>
<h2 id="appendix-testing-identical-titles">Appendix: Testing identical titles</h2>
<p>Without label.</p>
<h2 id="appendix-testing-identical-titles-1">Appendix: Testing identical titles</h2>
<p>With label.</p>
<h2 id="appendix-testing-identical-titles-2">Appendix: Testing identical titles</h2>
<p>With label.</p>
<h2 id="appendix-testing-identical-titles-3">Appendix: Testing identical titles</h2>
<p>Without label.</p>
<p><em>Hint.</em> Here is a hint.</p>
<p><em>Warning.</em> And here is a warning about something to pay attention to.</p>
<p><em>Summary.</em> Much testing in this document, otherwise stupid content.</p>
<p><em>Notice.</em> Ah, we are close to the end. With math: \[
 p=q
\]</p>
<p><em>Question.</em> So, how many admonition environments does Doconce support?</p>
</body>
</html>
pandoc 1.9.4.2
Compiled with citeproc-hs 0.3.4, texmath 0.6.0.6, highlighting-kate 0.5.1.
Syntax highlighting is supported for the following languages:
    Actionscript, Ada, Alert, Alert_indent, Apache, Asn1, Asp, Awk, Bash,
    Bibtex, Boo, C, Changelog, Clojure, Cmake, Coffeescript, Coldfusion,
    Commonlisp, Cpp, Cs, Css, D, Diff, Djangotemplate, Doxygen, Dtd, Eiffel,
    Email, Erlang, Fortran, Fsharp, Gnuassembler, Go, Haskell, Haxe, Html, Ini,
    Java, Javadoc, Javascript, Json, Jsp, Latex, Lex, LiterateHaskell, Lua,
    Makefile, Mandoc, Matlab, Maxima, Metafont, Mips, Modula2, Modula3,
    Monobasic, Nasm, Noweb, Objectivec, Objectivecpp, Ocaml, Octave, Pascal,
    Perl, Php, Pike, Postscript, Prolog, Python, R, Relaxngcompact, Rhtml, Ruby,
    Scala, Scheme, Sci, Sed, Sgml, Sql, SqlMysql, SqlPostgresql, Tcl, Texinfo,
    Verilog, Vhdl, Xml, Xorg, Xslt, Xul, Yacc, Yaml
Copyright (C) 2006-2012 John MacFarlane
Web:  http://johnmacfarlane.net/pandoc
This is free software; see the source for copying conditions.  There is no
warranty, not even for merchantability or fitness for a particular purpose.

************** File: html_template.do.txt *****************
DATE: today

===== This is a test of HTML templates =====

Note: When using HTML templates, the Doconce file cannot have a title
(to avoid generating a header). It should neither have an author.

======= This is a 7 heading =======

Here is some code:
!bc pycod
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h
!ec

===== This is a 5 heading =====

The template can be any HTML file with header and footer and
three possible slots: *title*, *date* and *main*,
where *main* will become the Doconce file (the main body of text),
*title* is the first heading in the Doconce file, and
*date* is extracted from the Doconce file (if present).



************** File: html_template1.html *****************
<! -- test template -->

<?xml version="1.0" encoding="utf-8" ?>
<html>
<head>

<style type="text/css">
    body {
      margin-top: 1.0em;
      <!-- background-color: #e1c931; -->
      background-color: #000000;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 1.8em; color: #1e36ce; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { text-align: left; color: #1e36ce; }
    h4 { text-align: left; color: #1e36ce; }
    a { color: #1e36ce; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    <!-- white on black: pre { background: #000; color: #fff; padding: 15px;} -->
    <!-- black on white: pre { background: #fff; color: #000; padding: 15px;} -->
    pre { background: #EDEDED; color: #000; padding: 15px;}
    <!-- http://www.december.com/html/spec/color0.html -->
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
</style>

<!-- Use MathJax to render mathematics -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>

<body bgcolor="white">

<title>This is a test of HTML templates</title>


<h1>Date: Jan 32, 2100</h1>

<!-- main body -->


<!-- ------------------- main content ---------------------- -->

<p>

<p>

<h3>This is a test of HTML templates  <a name="___sec0"></a></h3>
<p>
Note: When using HTML templates, the Doconce file cannot have a title
(to avoid generating a header). It should neither have an author.

<p>

<h2>This is a 7 heading  <a name="___sec1"></a></h2>
<p>
Here is some code:
<!-- begin verbatim block  pycod-->
<pre>
class Diff:
    def __init__(self, f, h=1E-5):
        self.f = f
        self.h = float(h)

class Forward1(Diff):
    def __call__(self, x):
        f, h = self.f, self.h
        return (f(x+h) - f(x))/h
</pre>
<!-- end verbatim block -->

<p>

<h3>This is a 5 heading  <a name="___sec2"></a></h3>
<p>
The template can be any HTML file with header and footer and
three possible slots: <em>title</em>, <em>date</em> and <em>main</em>,
where <em>main</em> will become the Doconce file (the main body of text),
<em>title</em> is the first heading in the Doconce file, and
<em>date</em> is extracted from the Doconce file (if present).
<!-- ------------------- end of main content --------------- -->



<!-- end of main body -->
</body>
</html>



************** File: html_template.html *****************
<!-- Template for INF1100 web pages with University of Oslo web design -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="no" xml:lang="no" xmlns="http://www.w3.org/1999/xhtml">
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <!-- iPhone viewport -->
   <meta name="viewport" content="width=1020, user-scalable=yes" />


     <title>This is a test of HTML templates</title>

    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="http://www.uio.no/vrtx/decorating/resources/dist/images/favicon.ico" />
    <link type="text/css" rel="stylesheet" media="all" href="http://www.uio.no/vrtx/decorating/resources/dist/style/style.css" />

    <link type="text/css" rel="stylesheet" media="all" href="http://www.uio.no/vrtx/decorating/resources/dist/www.uio.no/logos/logos.css" />

    <link type="text/css" rel="stylesheet" media="print" href="http://www.uio.no/vrtx/decorating/resources/dist/style/print.css" />
    <link type="text/css" rel="stylesheet" media="handheld" href="http://www.uio.no/vrtx/decorating/resources/dist/style/handheld.css"/>

   <script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/jquery/jquery-1.4.2.min.js"></script>

   <meta name="MSSmartTagsPreventParsing" content="true" />
   <meta http-equiv="imagetoolbar" content="no" />




          <script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/js/share.js"></script>




  </head>


    <body class='faculty'  id="vrtx-structured-article">


    <!--stopindex-->
    <!-- Navigation start -->
    <ul id="hidnav">
      <li><a href="#globalnav">Hopp til global navigasjon</a></li>
      <li><a href="#main">Hopp til hovedinnholdet</a></li>

      <li><a href="#bottomnav">Hopp til bunnavigasjon</a></li>
      <li><a href="#footer">Hopp til kontaktinformasjon</a></li>
    </ul>
    <!-- Navigation end -->

    <!-- Page header starts -->
    <div id="head-globalnav">


     <!-- normal head -->


       <div id="head">

 	  <div id="logos">
	      <div id="uiologo" title="G&#229; til Universitetet i Oslo"><a href="http://www.uio.no"><span></span>Universitetet i Oslo</a></div>

              <!-- toppniv&#229; -->

	      <div id="facultylogo" title='G&#229; til Universitetet i Oslo'>
                <a href="/"><span></span>Universitetet i Oslo</a>
              </div>


	  </div>

	  <form class="searchform" method="get" action='/'>

	    <fieldset>
	      <label for="searchstring" class="searchstringlabel">S&#248;k i Universitetet i Oslo</label>
              <input type="hidden" name="vrtx" value="searchuio"/>
	      <input type="text" id="searchstring" name="query" value="" />
	      <button type="submit" class="searchsubmit"><span>S&oslash;k</span></button>
	    </fieldset>
	  </form>

	  <!-- head-menu -->
          <div id="head-menu">

              <ul class="ref-menu">

                 <!-- toppniv&#229; -->
                  <li><a href='/english'>English</a></li>


             </ul>

               <ul class="vrtx-uri-menu">

    <li class="for-ansatte">
  <a href="http://www.uio.no/for-ansatte/">For ansatte</a>
    </li>
  </ul>


          </div>
          <!-- head-menu -->
	</div>

        <!-- Global navigation start -->
	<div id="globalnav">

                <ul class="vrtx-tab-menu">

    <li class="root-folder parent-folder">
  <a href="http://www.uio.no/">Forsiden</a>
    </li>

    <li class="forskning">

  <a href="http://www.uio.no/forskning/">Forskning</a>
    </li>

    <li class="vrtx-active-item studier vrtx-current-item">
  <a href="http://www.uio.no/studier/">Studier</a>
    </li>

    <li class="livet-rundt-studiene">
  <a href="http://www.uio.no/livet-rundt-studiene/">Livet rundt studiene</a>

    </li>

    <li class="tjenester">
  <a href="http://www.uio.no/tjenester/">Tjenester og verkt&#248;y</a>
    </li>

    <li class="om">
  <a href="http://www.uio.no/om/">Om UiO</a>
    </li>

    <li class="personer">
  <a href="http://www.uio.no/personer/">Personer</a>
    </li>
  </ul>




        </div>
	<!-- Global navigation end -->

    </div>

    <!-- Page header end -->


    <div id="uiodoc">
        <!-- img-tag for print -->

           <!-- topp-/fakniv&#229; -->
            <img id="head-print" alt="print logo" src="http://www.uio.no/vrtx/decorating/resources/dist/www.uio.no/logos/faculty-small.png"/>



	<!-- Page content start -->
	<div id="main">
          <!--startindex-->

                     <!-- leftmenu (default) -->
            <!--stopindex-->
            <div id="left-main">
              <ul class="vrtx-breadcrumb-menu">
				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/"><span>Studier</span></a> </li>
				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/emner/"><span>Emner</span></a> </li>

				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/emner/matnat/"><span>Matematikk og naturvitenskap</span></a> </li>
				<li class="vrtx-ancestor"> <a href="http://www.uio.no/studier/emner/matnat/ifi/"><span>Informatikk</span></a> </li>
				<li class="vrtx-parent" ><a href="http://www.uio.no/studier/emner/matnat/ifi/INF1100/"><span>INF1100</span></a>
    	<ul>
			<li class="vrtx-child"><a class="vrtx-marked" href="http://www.uio.no/studier/emner/matnat/ifi/INF1100/h12/"><span>H&#248;st 2012</span></a></li>

     	</ul>
   	 </li>
</ul>

            </div>
            <div id="right-main">
              <!--startindex-->


        <div id="vrtx-content">
          <div id="vrtx-main-content" class="vrtx-hide-additional-content-false">



<!-- ------------------- main content ---------------------- -->

<p>

<p>

<h3>This is a test of HTML templates  <a name="___sec0"></a></h3>
<p>
Note: When using HTML templates, the Doconce file cannot have a title
(to avoid generating a header). It should neither have an author.

<p>

<h2>This is a 7 heading  <a name="___sec1"></a></h2>
<p>
Here is some code:
<p>

<!-- code typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Diff</span>:
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__init__</span>(<span style="color: #AA22FF">self</span>, f, h<span style="color: #666666">=1E-5</span>):
        <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>f <span style="color: #666666">=</span> f
        <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>h <span style="color: #666666">=</span> <span style="color: #AA22FF">float</span>(h)

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Forward1</span>(Diff):
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__call__</span>(<span style="color: #AA22FF">self</span>, x):
        f, h <span style="color: #666666">=</span> <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>f, <span style="color: #AA22FF">self</span><span style="color: #666666">.</span>h
        <span style="color: #AA22FF; font-weight: bold">return</span> (f(x<span style="color: #666666">+</span>h) <span style="color: #666666">-</span> f(x))<span style="color: #666666">/</span>h
</pre></div>
<p>


<h3>This is a 5 heading  <a name="___sec2"></a></h3>
<p>
The template can be any HTML file with header and footer and
three possible slots: <em>title</em>, <em>date</em> and <em>main</em>,
where <em>main</em> will become the Doconce file (the main body of text),
<em>title</em> is the first heading in the Doconce file, and
<em>date</em> is extracted from the Doconce file (if present).
<!-- ------------------- end of main content --------------- -->


	    	<div class="vrtx-date-info">
	    	<span class="published-date-label">Publisert</span> <span class="published-date">Jan 32, 2100</span>

	    	</div>

            <div class="vrtx-social-components">

<!-- begin email a friend js -->
<script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/js/email-a-friend.js"></script>
<!-- end email a friend js -->

<a class="vrtx-email-friend" href="http://www.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?vrtx=email-a-friend" onclick="javascript:popup('http://www.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?vrtx=email-a-friend'); return false">Tips en venn</a>

<div id="vrtx-share-component">
  <a href="#vrtx-share-link" id="vrtx-share-link" class="vrtx-share-link" name="vrtx-share-link">
  Del p&#229;...</a>
    <div id="vrtx-send-share">

      <div class="vrtx-send-inner">
        <div class="vrtx-share-top">
          <div class="vrtx-share-title">Del p&#229;...</div>
          <span><a href="#vrtx-share-link" class="vrtx-close-toolbox-send-share">
          Lukk</a></span>
        </div>
        <ul>
          <li><a href="http://www.facebook.com/share.php?u=http%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FINF1100%2Fh10%2Ftemplate.html&amp;t=Template" target="_blank" class="facebook">

          Facebook</a></li>
          <li><a href="http://twitter.com/home?status=http%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FINF1100%2Fh10%2Ftemplate.html" target="_blank" class="twitter">
          Twitter</a></li>
          <li><a href="http://del.icio.us/post?url=http%3A%2F%2Fwww.uio.no%2Fstudier%2Femner%2Fmatnat%2Fifi%2FINF1100%2Fh10%2Ftemplate.html&amp;title=Template" target="_blank" class="delicious">
          del.icio.us</a></li>
        </ul>
     </div>

    </div>
</div>
          	</div>
          </div>
        </div>

              <!--stopindex-->
            </div>

          <!--stopindex-->
         </div>
	<!-- Page content end -->

      <!-- Bottom navigation start -->
	<div id="bottomnav">
           <div id="breadcrumb-container">
	     <div id="vrtx-breadcrumb-start" class="breadcrumb">
	       <span class="vrtx-uio"><a href="http://www.uio.no">UiO</a> <span class="vrtx-breadcrumb-delimiter">&gt;</span></span>

                 <span class="vrtx-faculty"><a href="/">Universitetet i Oslo</a> <span class="vrtx-breadcrumb-delimiter">&gt;</span></span>


             </div>

<div id="vrtx-breadcrumb" class="breadcrumb">
      <span class="vrtx-breadcrumb-level-2"><a href="http://www.uio.no/studier/">Studier</a>
      	<span class="vrtx-breadcrumb-delimiter">&gt;</span>
      </span>
</div>



           </div>
           <div id="bottom-menu">



        <div class="vrtx-subfolder-menu">

          <div class="vrtx-group-1">
    <ul class="resultset-1">
      <li>
    <a href="http://www.uio.no/studier/program/">Studieprogrammer</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/program/litteratur-aarsenhet/">Allmenn litteraturvitenskap (&#229;rsenhet)</a>
          	</li>

	          <li>
    <a href="http://www.uio.no/studier/program/akks/">Antikk kultur og klassiske spr&#229;k (bachelor)</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/program/antikk/">Antikk kultur og klassisk tradisjon (bachelor)</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/program/antikk-master/">Antikk kultur og klassisk tradisjon (master - to &#229;r)</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/program/anvma-master/">Anvendt matematikk og mekanikk</a>
          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/program">Mer...</a>
		</li>
  </ul>

      </li>
  </ul>

    <ul class="resultset-2">
      <li>
    <a href="http://www.uio.no/studier/opptak/">Opptak</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/opptak/so/">S&#248;ke opptak</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/opptak/gsk/">Generell studiekompetanse (GSK)</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/opptak/realkompetanse/">Realkompetanse</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/opptak/spesielle-krav/">Spesielle opptakskrav</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/opptak/enkeltemner/">Enkeltemner</a>
          	</li>
  </ul>
      </li>
  </ul>


    <ul class="resultset-3">
      <li>
    <a href="http://www.uio.no/studier/admin/">Administrer dine studier</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/admin/semesterregistrering/">Registreringer hvert semester</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/admin/melding/">Frister for meldinger til undervisning og eksamen</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/admin/semesteravgift/">Betale semesteravgift</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/admin/kort/">Semesterkort og studiekort</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/admin/karakterutskrift/">Bestille karakterutskrift</a>
          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/admin">Mer...</a>
		</li>
  </ul>

      </li>
  </ul>

    <ul class="resultset-4">
      <li>
    <a href="http://www.uio.no/studier/emner/">Emner</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/emner/hf/">Humanistiske fag</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emner/jus/">Jus</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emner/matnat/">Matematikk og naturvitenskap</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/emner/medisin/">Medisin</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emner/odont/">Odontologi</a>
          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/emner">Mer...</a>
		</li>

  </ul>
      </li>
  </ul>

    <ul class="resultset-5">
      <li>
    <a href="http://www.uio.no/studier/evu/">Etter- og videreutdanning</a>
  <ul>
	          <li>

    <a href="http://www.uio.no/studier/evu/kurs/">Studietilbud</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/evu/oppdrag/">Oppdragsundervisning</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/evu/erfaringsbasert-master/">Erfaringsbasert master</a>

          	</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-6">
      <li>
    <a href="http://www.uio.no/studier/studiestart/">Studiestart for nye studenter</a>
  <ul>

	          <li>
    <a href="http://www.uio.no/studier/studiestart/arrangementer/">Arrangementer</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/studiestart/fadderordning-for-nye-studenter/">Fadderordning for nye studenter</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/studiestart/fadderordningen/">Informasjon til fadderne</a>

          	</li>
  </ul>
      </li>
  </ul>

          </div>
          <div class="vrtx-group-2">
    <ul class="resultset-7">
      <li>
    <a href="http://www.uio.no/studier/tilrettelegging/">Har du spesielle behov?</a>

  <ul>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/adhd/">ADHD</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/asperger/">Asperger</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/tilrettelegging/bevegelseshemming/">Bevegelseshemming</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/dysleksi/">Dysleksi</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/tilrettelegging/kronisk-sydom/">Kronisk sykdom</a>

          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/tilrettelegging">Mer...</a>
		</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-8">
      <li>

    <a href="http://www.uio.no/studier/om/">Om studier</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/om/studier-og-grader/">Studiestruktur og grader</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/om/kvalitet/">Studiekvalitet</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/om/regelverk/">Lover og regler</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/om/godkjenning/">Godkjenning av utenlandsk utdanning</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/om/utvalg/">Komiteer og utvalg</a>
          	</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-9">
      <li>
    <a href="http://www.uio.no/studier/emnegrupper/">Emnegrupper</a>

  <ul>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/hf/">Humanistiske fag</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/jus/">Jus</a>
          	</li>
	          <li>

    <a href="http://www.uio.no/studier/emnegrupper/matnat/">Matematikk og naturvitenskap</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/sv/">Samfunnsvitenskap</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/emnegrupper/teologi/">Teologi</a>

          	</li>
	    <li class="vrtx-more">
			<a href="http://www.uio.no/studier/emnegrupper">Mer...</a>
		</li>
  </ul>
      </li>
  </ul>

    <ul class="resultset-10">
      <li>

    <a href="http://www.uio.no/studier/ressurser/">L&#230;ringsressurser</a>
  <ul>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/bibliotek-lesesaler/">Bibliotek, lesesaler og PC-stuer</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/mifa/">Mangfold i fokus i akademia</a>

          	</li>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/skrivehjelp/">Skrivehjelp</a>
          	</li>
	          <li>
    <a href="http://www.uio.no/studier/ressurser/spraak-tandem/">Spr&#229;k-tandem</a>
          	</li>
  </ul>

      </li>
  </ul>

    <ul class="resultset-11">
      <li>
    <a href="http://www.uio.no/studier/kontakt/">Kontakt oss</a>
      </li>
  </ul>

     </div>

        </div>



           </div>
        </div>
      <!-- Bottom navigation end -->
    </div>
    <!-- Page wrapper end -->
    <div id="footer-wrapper">

    <!-- Page footer start -->
      <div id="footer">
        <div id="footer-main" class="vcard">
	  <div class="institutelogo fn org"><span></span>Universitetet i Oslo : Universitetet i Oslo</div>


             <div class="adr visitor-adress">
  <span class="vrtx-label">N&#248;dnummer</span>
  <span>Ved brann, ulykker og alvorlige hendelser ring <br/>22 85 66 66</span>

</div>
<div class="adr mail-adress">
  <span class="vrtx-label">Adresse</span>
  <span class="post-office-box">Universitetet i Oslo</span>
  <span class="post-office-box">Boks 1072 Blindern</span>
  <span class="postal-code">0316</span>
  <span class="locality"> Oslo</span>

</div>
<div class="phone-fax-email">
  <span class="vrtx-label">Telefon og kontaktpunkter</span>
  <span class="tel">Sentralbord: 22 85 50 50</span>
  <a href="/om/kontaktinformasjon/">Kontaktpunkter UiO</a>
</div>




        </div>

        <div id="footer-admin">

          <ul class="unit-admin-links">
              <li>Ansvarlig for denne siden:</li>
              <li><a href="mailto:studieredaktor@admin.uio.no">Studieredakt&#248;r UiO</a></li>
          </ul>
          <ul class="vrtx-admin-links">
            <li><div class="vrtx-logout" id="vrtx-logout">
  <span class="vrtx-user">Lars Jahr R&#248;ine</span>
  <form id="logoutForm" action="https://www.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?action=logout" method="post" style="display:inline;">

  <input type="hidden"
         name="csrf-prevention-token"
         value="c3ed5c2f65171c0952ab9b76819ef85843a0e40f" />
    <button type="submit" id="logoutAction" name="logoutAction">Logg ut</button>
  </form>
  <!-- Hide submit button, display a link instead: -->
  <script type="text/javascript" language="Javascript"><!--
	   	document.getElementById("logoutAction").style.display = "none";
		var logoutLink = document.createElement("a");
		logoutLink.setAttribute("href","javascript:document.getElementById('logoutForm').submit();");
		logoutLink.innerHTML = "Logg ut"

		var lp = document.createElement("span");
		lp.innerHTML = "( ";
		var rp = document.createElement("span");
		rp.innerHTML = " )";
		document.getElementById("vrtx-logout").appendChild(lp);
		document.getElementById("vrtx-logout").appendChild(logoutLink);
		document.getElementById("vrtx-logout").appendChild(rp);
		// -->
  </script>
</div>
</li>
            <li>

  <a id="vrtx-manage-url" class="vrtx-manage-url" href="http://www-adm.uio.no/studier/emner/matnat/ifi/INF1100/h10/template.html?vrtx=admin">Administrer dette dokumentet</a>
</li>
          </ul>
          <div id="cms">Drevet av <a href="http://www.uio.no/tjenester/it/web/vortex/">Vortex</a></div>
        </div>
      </div>
    <!-- Page footer end -->
   </div>

   <script type="text/javascript" src="http://www.uio.no/vrtx/__vrtx/static-resources/jquery/autocomplete/jquery.autocomplete.js"></script>
   <script type="text/javascript" src="http://www.uio.no/vrtx/decorating/resources/dist/script/jquery-syntax/jquery.syntax.min.js"></script>
   <script type="text/javascript" src="http://www.uio.no/vrtx/decorating/resources/dist/script/uio.js"></script>
   <script type="text/javascript">
      $(document).ready(function() {
        var emnerParams = {selectFirst:false, width:226, max:50, delay:75};
        emnerAutocomplete('course-search', 'emner', emnerParams);
        gotoEmnerAutocompleteSuggestion('course-search');

        var personerParams = {minChars:3, selectFirst:false, width:233, max:50, delay:200, cacheLength:0};
        personerAutocomplete('person-search', 'person', personerParams, '/');
        gotoPersonerAutocompleteSuggestion('person-search');

      });
   </script>

   <!-- Greybox for Email a friend / Tips en venn -->
   <script type="text/javascript">
     var GB_ROOT_DIR = "http://www.uio.no/vrtx/decorating/resources/dist/script/greybox/";
   </script>

   <script type="text/javascript" src="http://www.uio.no/vrtx/decorating/resources/dist/script/greybox/AJS-combined-min.js"></script>

   </body>
</html>



************** File: template1.html *****************
<! -- test template -->

<?xml version="1.0" encoding="utf-8" ?>
<html>
<head>

<style type="text/css">
    body {
      margin-top: 1.0em;
      <!-- background-color: #e1c931; -->
      background-color: #000000;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 1.8em; color: #1e36ce; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { text-align: left; color: #1e36ce; }
    h4 { text-align: left; color: #1e36ce; }
    a { color: #1e36ce; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
    <!-- white on black: pre { background: #000; color: #fff; padding: 15px;} -->
    <!-- black on white: pre { background: #fff; color: #000; padding: 15px;} -->
    pre { background: #EDEDED; color: #000; padding: 15px;}
    <!-- http://www.december.com/html/spec/color0.html -->
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
</style>

<!-- Use MathJax to render mathematics -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>

<body bgcolor="white">

<title>%(title)s</title>


<h1>Date: %(date)s</h1>

<!-- main body -->

%(main)s


<!-- end of main body -->
</body>
</html>


************** File: author1.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    pre { background: #ededed; color: #000; padding: 15px;}
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>
<body>

    
<!-- ------------------- main content ---------------------- -->


<title>Test of one author at one institution</title>

<center><h1>Test of one author at one institution</h1></center>  <!-- document title -->

<p>
<!-- author(s) -->

<center>
<b>John Doe</b>  (<tt>doe at cyberspace.net</tt>)
</center>


<p>
<!-- institution -->

<center><b>Cyberspace Inc.</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
<!-- Externaldocument: testdoc -->

<p>

<h2>Generalized References <a name="genrefs"></a></h2>
<p>
Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers <em>generalized references</em> which allows
a reference to have two different formulations, one for internal
references and one for external references. Since LaTeX supports
references to labels in external documents via the <code>xr</code> package,
the generalized references in Doconce has a syntax that may utilize
the <code>xr</code> feature in LaTeX.

<p>
The syntax of generalized references reads
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">ref[internal][cite][external]
</pre></div>
<p>
If all <code>ref{label}</code> references in the text <code>internal</code> are references
to labels in the present document, the above <code>ref</code> command is replaced
by the text <code>internal</code>. Otherwise, if cite is non-empty and the format
is <code>latex</code> or <code>pdflatex</code> one assumes that the references in <code>internal</code>
are to external documents declared by a comment line <code>#
Externaldocuments: testdoc, mydoc</code> (usually after the title, authors,
and date). In this case the output text is <code>internal cite</code> and the
LaTeX package <code>xr</code> is used to handle the labels in the external documents.
If none of the two situations above applies, the <code>external</code>
text will be the output.

<p>
Here is a specific example on a generalized reference:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">As explained in
ref[Section ref{subsec:ex}][in &quot;Langtangen, 2012&quot;:
&quot;http://code.google.com/p/doconce/wiki/Description&quot;
cite{testdoc:12}][a &quot;section&quot;: &quot;testdoc.html#___sec2&quot; in
the document &quot;A Document for Testing Doconce&quot;: &quot;testdoc.html&quot;
cite{testdoc:12}], Doconce documents may include movies.
</pre></div>
<p>
This is rendered to the following text:
As explained in
a <a href="testdoc.html#___sec2">section</a> in
the document <a href="testdoc.html">A Document for Testing Doconce</a>
<a href="#testdoc:12">[1]</a>, Doconce documents may include movies.

<p>
And here is another example with internal references only:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Generalized references are described in ref[Section ref{genrefs}][][
the document *author1*].
</pre></div>
<p>
The text is rendered to "Generalized references are described in
the section <a href="#genrefs">Generalized References</a>."
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: author1.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DBOOK -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=Springer-collection
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to command-line arguments (type doconce ptex2tex to see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer-collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------
% #ifdef BOOK
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}
% #else
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}
% #endif

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for epub-style formats
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},              % inner margin (two-sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif


\usepackage{relsize,epsfig,makeidx,amsmath,amsfonts}
\usepackage[latin1]{inputenc}
\usepackage{ptex2tex}
% #ifdef MINTED
\usepackage{minted}  % requires latex/pdflatex -shell-escape (to run pygments)
\usemintedstyle{default}
% #endif

% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif

% Hyperlinks in PDF:
\usepackage[%
    colorlinks=true,
    linkcolor=black,
    %linkcolor=blue,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    urlcolor=black,
    pdfmenubar=true,
    pdftoolbar=true,
    urlcolor=black,
    %urlcolor=blue,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\newenvironment{exercise}{}{}
\newcounter{exerno}

\newcommand{\inlinecomment}[2]{  ({\bf #1}: \emph{#2})  }
%\newcommand{\inlinecomment}[2]{}  % turn off inline comments




% References to labels in external documents:
\usepackage{xr}
\externaldocument{testdoc}

% insert custom LaTeX commands...


\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_replace}

% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"

\title{Test of one author at one institution}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{Test of one author at one institution}}}

% #elif LATEX_HEADING == "Springer-collection"

\title*{Test of one author at one institution}
% Short version of title:
%\titlerunning{...}

% #else

\begin{center}
{\LARGE\bf Test of one author at one institution}
\end{center}

% #endif



% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{John Doe\footnote{Email: \texttt{doe@cyberspace.net}. Cyberspace Inc.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

{\Large\textsf{John Doe (\texttt{doe@cyberspace.net})}}\\ [3mm]

\ \\ [2mm]

{\large\textsf{Cyberspace Inc.} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer-collection"

\author{John Doe}
% Short version of authors:
%\authorrunning{...}
\institute{John Doe\at Cyberspace Inc.\email{doe@cyberspace.net}}

% #else

\begin{center}
{\bf John Doe (\texttt{doe@cyberspace.net})}
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small Cyberspace Inc.}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% ----------------- date -------------------------

% #if LATEX_HEADING == "traditional"

\date{Jan 32, 2100}
\maketitle

% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else

\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


% Externaldocument: testdoc


\section{Generalized References}

\label{genrefs}

Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers \emph{generalized references} which allows
a reference to have two different formulations, one for internal
references and one for external references. Since {\LaTeX} supports
references to labels in external documents via the \code{xr} package,
the generalized references in Doconce has a syntax that may utilize
the \code{xr} feature in {\LaTeX}.

The syntax of generalized references reads
\bccq
ref[internal][cite][external]
\eccq
If all \code{ref{label}} references in the text \code{internal} are references
to labels in the present document, the above \code{ref} command is replaced
by the text \code{internal}. Otherwise, if cite is non-empty and the format
is \code{latex} or \code{pdflatex} one assumes that the references in \code{internal}
are to external documents declared by a comment line \code{#
Externaldocuments: testdoc, mydoc} (usually after the title, authors,
and date). In this case the output text is \code{internal cite} and the
{\LaTeX} package \code{xr} is used to handle the labels in the external documents.
If none of the two situations above applies, the \code{external}
text will be the output.

Here is a specific example on a generalized reference:
\bccq
As explained in
ref[Section ref{subsec:ex}][in "Langtangen, 2012":
"http://code.google.com/p/doconce/wiki/Description"
cite{testdoc:12}][a "section": "testdoc.html#___sec2" in
the document "A Document for Testing Doconce": "testdoc.html"
cite{testdoc:12}], Doconce documents may include movies.
\eccq
This is rendered to the following text:
As explained in
Section~\ref{subsec:ex} in \href{{http://code.google.com/p/doconce/wiki/Description}}{Langtangen, 2012}
\cite{testdoc:12}, Doconce documents may include movies.

And here is another example with internal references only:
\bccq
Generalized references are described in ref[Section ref{genrefs}][][
the document *author1*].
\eccq
The text is rendered to "Generalized references are described in
Section~\ref{genrefs}."
% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: author1.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

Test of one author at one institution
=====================================

:Author: John Doe (doe at cyberspace.net)
:Date: Jan 32, 2100

.. Externaldocument: testdoc


.. _genrefs:

Generalized References
======================

Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers *generalized references* which allows
a reference to have two different formulations, one for internal
references and one for external references. Since LaTeX supports
references to labels in external documents via the ``xr`` package,
the generalized references in Doconce has a syntax that may utilize
the ``xr`` feature in LaTeX.

The syntax of generalized references reads

.. code-block:: text


        ref[internal][cite][external]

If all `:ref:`label`` references in the text ``internal`` are references
to labels in the present document, the above ``ref`` command is replaced
by the text ``internal``. Otherwise, if cite is non-empty and the format
is ``latex`` or ``pdflatex`` one assumes that the references in ``internal``
are to external documents declared by a comment line ``#
Externaldocuments: testdoc, mydoc`` (usually after the title, authors,
and date). In this case the output text is ``internal cite`` and the
LaTeX package ``xr`` is used to handle the labels in the external documents.
If none of the two situations above applies, the ``external``
text will be the output.

Here is a specific example on a generalized reference:

.. code-block:: text


        As explained in
        ref[Section ref{subsec:ex}][in "Langtangen, 2012":
        "http://code.google.com/p/doconce/wiki/Description"
        cite{testdoc:12}][a "section": "testdoc.html#___sec2" in
        the document "A Document for Testing Doconce": "testdoc.html"
        cite{testdoc:12}], Doconce documents may include movies.

This is rendered to the following text:
As explained in
a `section <testdoc.html#___sec2>`_ in
the document `A Document for Testing Doconce <testdoc.html>`_
[testdoc:12]_, Doconce documents may include movies.

And here is another example with internal references only:

.. code-block:: text


        Generalized references are described in ref[Section ref{genrefs}][][
        the document *author1*].

The text is rendered to "Generalized references are described in
the section :ref:`genrefs`."

************** File: author1.txt *****************
Test of one author at one institution
=====================================

John Doe [1] (doe@cyberspace.net)

[1] Cyberspace Inc.

Date: Jan 32, 2100

Generalized References
======================

Sometimes a series of individual documents may be assembled to one
large document. The assembly impacts how references to sections
are written: when referring to a section in the same document, a label
can be used, while references to sections in other documents are
written differently, sometimes involving a link (URL) and a citation.
Especially if both the individual documents and the large assembly document
are to exist side by side, a flexible way of referencing is needed.
For this purpose, Doconce offers *generalized references* which allows
a reference to have two different formulations, one for internal
references and one for external references. Since LaTeX supports
references to labels in external documents via the xr package,
the generalized references in Doconce has a syntax that may utilize
the xr feature in LaTeX.

The syntax of generalized references reads::


        ref[internal][cite][external]

If all ref{label} references in the text internal are references
to labels in the present document, the above ref command is replaced
by the text internal. Otherwise, if cite is non-empty and the format
is latex or pdflatex one assumes that the references in internal
are to external documents declared by a comment line #
Externaldocuments: testdoc, mydoc (usually after the title, authors,
and date). In this case the output text is internal cite and the
LaTeX package xr is used to handle the labels in the external documents.
If none of the two situations above applies, the external
text will be the output.

Here is a specific example on a generalized reference::


        As explained in
        ref[Section ref{subsec:ex}][in "Langtangen, 2012":
        "http://code.google.com/p/doconce/wiki/Description"
        cite{testdoc:12}][a "section": "testdoc.html#___sec2" in
        the document "A Document for Testing Doconce": "testdoc.html"
        cite{testdoc:12}], Doconce documents may include movies.

This is rendered to the following text:
As explained in
a section (testdoc.html#___sec2) in
the document A Document for Testing Doconce (testdoc.html)
[1], Doconce documents may include movies.

And here is another example with internal references only::


        Generalized references are described in ref[Section ref{genrefs}][][
        the document *author1*].

The text is rendered to "Generalized references are described in
the section "Generalized References"."

************** File: ._part0000_testdoc.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1'),
              (' Subsection 1 ', 2, None),
              (' Subsection 2 ', 2, 'subsec:ex'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta'),
              (' Custom Environments ', 2, None),
              (' Tables ', 2, 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example'),
              (' URLs ', 2, 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None),
              (' Exercises ', 1, None),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1'),
              (' Remarks ', 3, None),
              (' Not an exercise ', 2, None),
              (' Project 1: Compute a Probability ', 2, 'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1'),
              (' Remarks ', 3, None),
              (' Exercise 1: Determine some Distance ', 2, 'exer:dist'),
              (' Remarks ', 3, None),
              (' Some exercise without the "Exercise:" prefix ', 2, None),
              (' Example 2: Just an example ', 2, None),
              (' Here goes another section ', 1, None),
              (' More Exercises ', 1, None),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you'),
              (' Appendix: Just for testing; part I ', 1, None),
              (' A subsection within an appendix ', 2, None),
              (' Appendix: Just for testing; part II ', 1, None),
              (' Appendix: Testing identical titles ', 2, None),
              (' Appendix: Testing identical titles ', 2, 'test:title:id1'),
              (' Appendix: Testing identical titles ', 2, 'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None)]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0000"></a>

<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<p>
<!-- ------------------- main content ---------------------- -->


<p>


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s) -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>

<h2>Table of contents</h2>

<p>

<a href="._part0001_testdoc.html#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:ex"> Subsection 2 </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec4"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec6"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec9"> LaTeX Mathematics </a><br>
<a href="._part0002_testdoc.html#___sec10"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec12"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec13"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec16"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec19"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec20"> Example 2: Just an example </a><br>
<a href="._part0002_testdoc.html#___sec21"> Here goes another section </a><br>
<a href="._part0002_testdoc.html#___sec22"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="._part0002_testdoc.html#___sec25"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec26"> A subsection within an appendix </a><br>
<a href="._part0002_testdoc.html#___sec27"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec28"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="._part0002_testdoc.html#___sec31"> Appendix: Testing identical titles </a><br>

<p>


<p>

<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: ._part0001_testdoc.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1'),
              (' Subsection 1 ', 2, None),
              (' Subsection 2 ', 2, 'subsec:ex'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta'),
              (' Custom Environments ', 2, None),
              (' Tables ', 2, 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example'),
              (' URLs ', 2, 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None),
              (' Exercises ', 1, None),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1'),
              (' Remarks ', 3, None),
              (' Not an exercise ', 2, None),
              (' Project 1: Compute a Probability ', 2, 'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1'),
              (' Remarks ', 3, None),
              (' Exercise 1: Determine some Distance ', 2, 'exer:dist'),
              (' Remarks ', 3, None),
              (' Some exercise without the "Exercise:" prefix ', 2, None),
              (' Example 2: Just an example ', 2, None),
              (' Here goes another section ', 1, None),
              (' More Exercises ', 1, None),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you'),
              (' Appendix: Just for testing; part I ', 1, None),
              (' A subsection within an appendix ', 2, None),
              (' Appendix: Just for testing; part II ', 1, None),
              (' Appendix: Testing identical titles ', 2, None),
              (' Appendix: Testing identical titles ', 2, 'test:title:id1'),
              (' Appendix: Testing identical titles ', 2, 'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None)]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0001"></a>

<a href="._part0000_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>

<a href="._part0002_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<p>
<!-- !split -->

<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>

<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->

<p>

<h2>Section 1 <a name="sec1"></a></h2>
<p>
Here is a nested list:

<p>

<table border="0">

  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> item1</li>
  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> item2</li>
  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> item3 which continues
    on the next line to test that feature</li>
  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> and a sublist</li>

<table border="0">

    </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/green_bullet2"></td><td> with indented subitem1</li>
    </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/green_bullet2"></td><td> and a subitem2</li>
</td></tr></table>


  </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> and perhaps an ordered sublist</li>

<ol>
   </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> first item</li>
   </tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> second item,
      continuing on a new line</li>
</ol>

</td></tr></table>


<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<p>
<p>

<a href="._part0000_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>

<a href="._part0002_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: ._part0002_testdoc.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    body {
      margin:5;
      padding:0;
      border:0;	/* Remove the border around the viewport in old versions of IE */
      width:100%;
      background: #fdf6e3;
      min-width:600px;	/* Minimum width of layout - remove if not required */
      font-family: Verdana, Helvetica, Arial, sans-serif;
      font-size: 1.0em;
      line-height: 1.3em;
      color: #657b83;
    }
    a { color: #657b83; text-decoration:none; }
    a:hover { color: #b58900; background: #eee8d5; text-decoration:none; }
    h1, h2, h3 { margin:.8em 0 .2em 0; padding:0; line-height: 125%; }
    h2 { font-variant: small-caps; }
    pre {
      background: #fdf6e3;
      -webkit-box-shadow: inset 0 0 2px #000000;
      -moz-box-shadow: inset 0 0 2px #000000;
      box-shadow: inset 0 0 2px #000000;
      color: #586e75;
      margin-left: 0px;
      font-family: 'Droid Sans Mono', monospace;
      padding: 2px;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      -moz-background-clip: padding;
      -webkit-background-clip: padding-box;
      background-clip: padding-box;
    }
    tt { font-family: "Courier New", Courier; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p { text-indent: 0px; }
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1'),
              (' Subsection 1 ', 2, None),
              (' Subsection 2 ', 2, 'subsec:ex'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta'),
              (' Custom Environments ', 2, None),
              (' Tables ', 2, 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example'),
              (' URLs ', 2, 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None),
              (' Exercises ', 1, None),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1'),
              (' Remarks ', 3, None),
              (' Not an exercise ', 2, None),
              (' Project 1: Compute a Probability ', 2, 'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1'),
              (' Remarks ', 3, None),
              (' Exercise 1: Determine some Distance ', 2, 'exer:dist'),
              (' Remarks ', 3, None),
              (' Some exercise without the "Exercise:" prefix ', 2, None),
              (' Example 2: Just an example ', 2, None),
              (' Here goes another section ', 1, None),
              (' More Exercises ', 1, None),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you'),
              (' Appendix: Just for testing; part I ', 1, None),
              (' A subsection within an appendix ', 2, None),
              (' Appendix: Just for testing; part II ', 1, None),
              (' Appendix: Testing identical titles ', 2, None),
              (' Appendix: Testing identical titles ', 2, 'test:title:id1'),
              (' Appendix: Testing identical titles ', 2, 'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None)]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<a name="part0002"></a>

<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>
<p>
<!-- !split and check if these extra words are included properly in the comment -->

<p>

<h3>Subsection 1  <a name="___sec1"></a></h3>
<p>
More text, with a reference back to the section <a href="._part0001_testdoc.html#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #AA22FF; font-weight: bold">subroutine </span><span style="color: #B8860B">test</span>()
      <span style="color: #00BB00; font-weight: bold">integer </span><span style="color: #B8860B">i</span>
      <span style="color: #00BB00; font-weight: bold">real</span><span style="color: #666666">*8</span> <span style="color: #B8860B">r</span>
      <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #AA22FF; font-weight: bold">do </span><span style="color: #B8860B">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #B8860B">i</span>
         <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #B8860B">r</span> <span style="color: #666666">+</span> <span style="color: #B8860B">i</span>
      <span style="color: #AA22FF; font-weight: bold">end do</span>
<span style="color: #AA22FF; font-weight: bold">      return</span>
<span style="color: #B8860B">C</span>     <span style="color: #B8860B">END1</span>

      <span style="color: #AA22FF; font-weight: bold">program </span><span style="color: #B8860B">testme</span>
      <span style="color: #AA22FF; font-weight: bold">call </span><span style="color: #B8860B">test</span>()
      <span style="color: #AA22FF; font-weight: bold">return</span>
</pre></div>
</td></tr></table><p>
and then just the subroutine,
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #AA22FF; font-weight: bold">subroutine </span><span style="color: #B8860B">test</span>()
      <span style="color: #00BB00; font-weight: bold">integer </span><span style="color: #B8860B">i</span>
      <span style="color: #00BB00; font-weight: bold">real</span><span style="color: #666666">*8</span> <span style="color: #B8860B">r</span>
      <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #AA22FF; font-weight: bold">do </span><span style="color: #B8860B">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #B8860B">i</span>
         <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #B8860B">r</span> <span style="color: #666666">+</span> <span style="color: #B8860B">i</span>
      <span style="color: #AA22FF; font-weight: bold">end do</span>
<span style="color: #AA22FF; font-weight: bold">      return</span>
</pre></div>
</td></tr></table><p>
and finally the complete file:
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #B8860B">C</span>     <span style="color: #B8860B">a</span> <span style="color: #B8860B">comment</span>

      <span style="color: #AA22FF; font-weight: bold">subroutine </span><span style="color: #B8860B">test</span>()
      <span style="color: #00BB00; font-weight: bold">integer </span><span style="color: #B8860B">i</span>
      <span style="color: #00BB00; font-weight: bold">real</span><span style="color: #666666">*8</span> <span style="color: #B8860B">r</span>
      <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #AA22FF; font-weight: bold">do </span><span style="color: #B8860B">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #B8860B">i</span>
         <span style="color: #B8860B">r</span> <span style="color: #666666">=</span> <span style="color: #B8860B">r</span> <span style="color: #666666">+</span> <span style="color: #B8860B">i</span>
      <span style="color: #AA22FF; font-weight: bold">end do</span>
<span style="color: #AA22FF; font-weight: bold">      return</span>
<span style="color: #B8860B">C</span>     <span style="color: #B8860B">END1</span>

      <span style="color: #AA22FF; font-weight: bold">program </span><span style="color: #B8860B">testme</span>
      <span style="color: #AA22FF; font-weight: bold">call </span><span style="color: #B8860B">test</span>()
      <span style="color: #AA22FF; font-weight: bold">return</span>
</pre></div>
</td></tr></table><p>

Testing other code environments. First Python:
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
</td></tr></table><p>
which gets rendered as

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">f</span>(x):
    <span style="color: #AA22FF; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
</td></tr></table><p>

Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>

Then Cython:
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">cpdef</span> <span style="color: #00A000">f</span>(double x):
    <span style="color: #AA22FF; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
</td></tr></table><p>

<!-- This one tests a + sign before a code environment -->
C++:
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008800">#include &lt;iostream&gt;</span>

<span style="color: #00BB00; font-weight: bold">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BB4444">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #AA22FF; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
</td></tr></table><p>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
</td></tr></table><p>
which then is typeset as

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
</td></tr></table><p>

System call:
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #AA22FF">test</span>
Terminal&gt; <span style="color: #AA22FF">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
</td></tr></table><p>

It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>

<h3>Subsection 2 <a name="subsec:ex"></a></h3>
<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>

Figures without captions are allowed.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<p>
Test of movies.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
</p>


<p>
<!-- Test empty caption: -->

<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em></em>
</p>


<p>
<!-- Test wrong syntax and multi-line caption -->

<p>
<a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>
<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate -->

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>
<!-- Test multi-line caption in figure -->

<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in \( t_{i+1} \). <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>

Movie <a href="#mymov">mymov</a> has a similar problem.

<p>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<p>
<!-- Test URL as figure name -->

<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<p>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<p>
<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<p>

<h3>The \( \theta \) parameter (not \( \nabla \)?) <a name="decay:sec:theta"></a></h3>
<p>
Functions do not always need to be advanced, here is one
involving \( \theta \):
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
</td></tr></table><p>

<b>More on \( \theta \).</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
\( \frac{1}{2} \), \( {1/2} \), \( \pmb{x} \), \( \frac{Du}{dt} \),
both inline and in block:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
Or with align with label and numbers:

<p>
$$
\begin{align}
\frac{Du}{dt} &= 0
\label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\label{aligneq2}
\end{align}
$$


<p>


<h3>Custom Environments  <a name="___sec4"></a></h3>
<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>

<!-- begin theorem -->
<a name="theorem:fundamental1"></a>

<p>

<b>Theorem 5.</b>
Let \( a=1 \) and \( b=2 \). Then \( c=3 \).
<!-- end theorem -->

<p>
<!-- begin proof -->
<b>Proof.</b>
Since \( c=a+b \), the result follows from straightforward addition.
\( \Diamond \)
<!-- end proof -->

<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<p>


<h3>Tables <a name="subsec:table"></a></h3>
<p>

<!-- index with comma could fool sphinx -->

<p>
Let us take this table from the manual:

<p>

<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>

The Doconce source code reads
<p>

<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
</td></tr></table><p>

Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>     \( i \)      </b></td> <td align="center"><b>    \( h_i \)     </b></td> <td align="center"><b>  \( \bar T_i \)  </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>            exact             </b></td> <td align="center"><b>       <code>v_1</code>       </b></td> <td align="center"><b> \( a_i \) + <code>v_2</code> </b></td> <td align="center"><b>     <code>verb_3_</code>     </b></td> </tr>
<tr><td align="right">   9                               </td> <td align="right">   9.62                            </td> <td align="right">   5.57                            </td> <td align="right">   8.98                            </td> </tr>
<tr><td align="right">   -20                             </td> <td align="right">   -23.39                          </td> <td align="right">   -7.65                           </td> <td align="right">   -19.93                          </td> </tr>
<tr><td align="right">   10                              </td> <td align="right">   17.74                           </td> <td align="right">   -4.50                           </td> <td align="right">   9.96                            </td> </tr>
<tr><td align="right">   0                               </td> <td align="right">   -9.19                           </td> <td align="right">   4.13                            </td> <td align="right">   -0.26                           </td> </tr>
</table>
<p>


<h3>A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec6"></a></h3>
<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math \( a_{i-1} \).</b>
Here
is
some text.

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>
<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples-as-exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>

<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<p>
<!-- --- end exercise --- -->

<p>


<h3>URLs <a name="subsubsec:ex"></a></h3>
<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<p>
<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--latex-printed</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<p>


<h3>LaTeX Mathematics  <a name="___sec9"></a></h3>
<p>
Here is an equation without label using backslash-bracket environment:
$$ a = b + c $$

or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$

We can refer to this equation by \eqref{my:eq1}.

<p>
Here is a system without equation numbers, using the align-astrisk environment:
$$
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
$$


<p>

And here is a system of equations with labels in an align environment:
$$
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
$$

We can refer to \eqref{eq1}-\eqref{eq2}.

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$

Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$

We can refer to the last equation by \eqref{split:envir:eq}.

<p>
Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$


<p>
Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$

Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

<p>
Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<p>

<h2>Exercises  <a name="___sec10"></a></h2>
<p>

<!-- --- begin exercise --- -->

<p>

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>
<!-- keywords = random numbers; Monte Carlo simulation -->

<p>
<!-- Torture tests -->

<p>
Make a program that simulates flipping a coin \( N \) times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<p>

<!-- Test syntax error -->

<p>



<h4>Remarks  <a name="___sec12"></a></h4>
<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> Mark 1.</li>
</tr><p><tr><td valign='top'><img src="https://doconce.googlecode.com/hg/bundled/html_images/red_bullet2"></td><td> Mark 2.
<!-- --- begin hint in exercise --- --></li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Draw an integer among \( \{1,2\} \) with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->

<p>

<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
If the <code>random.random()</code> function returns a number \( <1/2 \), let it be
head, otherwise tail. Repeat this \( N \) number of times.
<!-- --- end answer of exercise --- -->

<p>

Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<p>
<!-- --- end exercise --- -->

<p>


<h3>Not an exercise  <a name="___sec13"></a></h3>
<p>
Should be possible to stick a normal section in the middle of many
exercises.

<p>

<!-- --- begin exercise --- -->

<p>

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>
<p>
<!-- Minimalistic exercise -->

<p>

What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval \( [0,1) \)?

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw \( N \) such random numbers using Python's standard <code>random</code> module,
count how many of them, \( M \), that fall in the interval \( (0.5,0.6) \), and
compute the probability as \( M/N \).
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>
<p>
The formula for a circle is given by

<p>
$$
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
$$

where \( R \) is the radius of the circle, \( (x_0,y_0) \) is the
center point, and \( t \) is a parameter in the unit interval \( [0,1] \).
For any \( t \), \( (x,y) \) is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #AA22FF; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #AA22FF; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
</td></tr></table><p>

<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>
The goal of this project is to draw \( N \) circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>

<b>a)</b>
Let \( R \) be normally distributed and \( (x_0,y_0) \) uniformly distributed.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
\( x_0 \), \( y_0 \), and \( R \) quantities.
<!-- --- end hint in exercise --- -->

<p>

<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
Here goes the short answer to part a).
<!-- --- end answer of exercise --- -->

<p>


<p>
<b>b)</b>
Let \( R \) be uniformly distributed and \( (x_0,y_0) \) normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let \( R \) and \( (x_0,y_0) \) be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<p>
<!-- Closing remarks for this Project -->

<p>

<h4>Remarks  <a name="___sec16"></a></h4>
<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<p>

<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>
<p>
Intro to this exercise. Questions are in subexercises below.

<p>

<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>


<p>

<b>a)</b>
Subexercises are numbered a), b), etc.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math \( a=b \) in hint:

<p>
$$ a=b. $$

And with code returning \( x+1 \) in hint:

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1
2</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
</td></tr></table><p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.

<p>

<!-- --- begin answer of exercise --- -->
<b>Answer.</b>
Short answer to subexercise a).
With math in answer: \( a=b \).
<!-- --- end answer of exercise --- -->

<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>

Some math \( \cos^2 x + \sin^2 x = 1 \) written one a single line:

<p>
$$ \cos^2 x + \sin^2 x = 1 \thinspace .$$


<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.

<p>


<p>
<!-- Closing remarks for this Exercise -->

<p>

<h4>Remarks  <a name="___sec18"></a></h4>
<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<p>

<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec19"></a></h3>
<p>
<!-- Another minimalistic exercise -->

<p>
Just some text. And some math saying that \( e^0=1 \) on a single line,
to test that math block insertion is correct:

<p>
$$ \exp{(0)} = 1 $$


<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>


<!-- code typeset with pygments style "emacs" -->
<table class="highlighttable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px"><pre style="line-height: 125%">1</pre></div></td><td class="code"><div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>
</td></tr></table><p>

<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Example 2: Just an example  <a name="___sec20"></a></h3>
<p>
<!-- This example needs the --examples-as-exercises option, otherwise -->
<!-- it is just typeset as it is written. -->

<p>

<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<p>
<!-- --- end exercise --- -->

<p>


<h2>Here goes another section  <a name="___sec21"></a></h2>
<p>
With some text, before we continue with exercises.

<p>

<h2>More Exercises  <a name="___sec22"></a></h2>
<p>

<!-- --- begin exercise --- -->

<p>

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>
<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<p>
<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>
<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<p>
<!-- --- end exercise --- -->

<p>


<h2>Appendix: Just for testing; part I  <a name="___sec25"></a></h2>
<p>
This is the first appendix.

<p>

<h3>A subsection within an appendix  <a name="___sec26"></a></h3>
<p>
Some text.

<p>

<h2>Appendix: Just for testing; part II  <a name="___sec27"></a></h2>
<p>
This is more stuff for an appendix.

<p>

<h3>Appendix: Testing identical titles  <a name="___sec28"></a></h3>
<p>
Without label.

<p>

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>
<p>
With label.

<p>

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>
<p>
With label.

<p>

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>
<p>
Without label.

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_hint.png" hspace="5" alt="Hint"></td>
<th align="left" valign="middle"><b>Hint</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Here is a hint.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="Warning"></td>
<th align="left" valign="middle"><b>Warning</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
And here is a warning about something to pay attention to.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_summary.png" hspace="5" alt="Summary"></td>
<th align="left" valign="middle"><b>Summary</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Much testing in this document, otherwise stupid content.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="Notice"></td>
<th align="left" valign="middle"><b>Notice</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Ah, we are close to the end.
With math:
$$ p=q$$

</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_question.png" hspace="5" alt="Question"></td>
<th align="left" valign="middle"><b>Question</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
So, how many admonition environments does Doconce support?
</p></td></tr>
</table>
<p>

<a href="._part0001_testdoc.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>
<!-- ------------------- end of main content --------------- -->


</body>
</html>

************** File: slides.do.txt *****************
TITLE: On the Technicalities of Scientific Writing Anno 2012: The Doconce Way
AUTHOR: Hans Petter Langtangen
DATE: Today

!split

===== Figure and bullet list =====

!bslidecell 00
!bpop

  * Here is a *wave packet*
  * It can move
  * But here it is just a figure

!epop
!eslidecell

!bslidecell 01
FIGURE: [../doc/manual/figs/wavepacket_0001.png]
!eslidecell

!bpop highlight-red
Here we have a paragraph to pop up in red.
And a line more
!epop

!split

===== Scientific writing needs to address many new media =====

!bpop

 * Old days (1985-2005): mostly black-and-white documents aimed at printing
 * Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...
 * LaTeX writing may be very different from writing in other formats
 * Main problem:
    * LaTeX provide all sorts of fancy packages, but
    * PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats
 * Conclusion: We need more than LaTeX

!epop

!split

===== Some math and computer code =====

!bt
\[ f(x,y,t) = e^{-xt}\sin\pi y \]
!et
Python implementation:

!bc pycod
import numpy as np

def f(x, y, t):
    return np.exp(-x*t)*np.sin(np.pi*y)

class Fancy:
    def __init__(self):
        pass

    def __call__(self, x, y, t):
        return f(x, y, t)

f2 = Fancy()
!ec



************** File: slides_reveal.html *****************
<!DOCTYPE html>
<html lang="en">

<!--
    Automatically translated from Doconce source.
    http://code.google.com/p/doconce
-->

<head>
<meta charset="utf-8">

<title></title>

<!-- reveal.js: http://lab.hakim.se/reveal-js/ -->

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<!--
<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/reveal.min.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/beigesmall.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/sky.css" id="theme">

*_do.css have left-adjusted header and text:
<link rel="stylesheet" href="reveal.js/css/reveal_do.css">
<link rel="stylesheet" href="reveal.js/css/reveal.min_do.css">
<link rel="stylesheet" href="reveal.js/css/theme/default_do.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/beige_do.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/night_do.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simple_do.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/sky_do.css" id="theme">
-->

<script>
document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
</script>


<!-- Styles for table layout of slides -->
<style type="text/css">
td.padding {
  padding-top:20px;
  padding-bottom:20px;
  padding-right:50px;
  padding-left:50px;
}
</style>

<!-- Use MathJax to render mathematics -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

</head>

<body>
<div class="reveal">

<!-- Any section element inside the <div class="slides"> container
     is displayed as a slide -->

<div class="slides">


<section>
<!-- ------------------- main content ---------------------- -->


<title>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</title>

<center><h1>On the Technicalities of Scientific Writing Anno 2012: The Doconce Way</h1></center>  <!-- document title -->

<p>
<!-- author(s) -->

<center>
<b>Hans Petter Langtangen</b> 
</center>


<p>
<!-- institution(s) -->
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>

</section>


<section>

<p>

<h3>Figure and bullet list  <a name="___sec0"></a></h3>
<p>

<table border="0">
<tr>
<td class="padding"> 


<p>

<ul>
  <li class="fragment"> Here is a <em>wave packet</em></li>
  <li class="fragment"> It can move</li>
  <li class="fragment"> But here it is just a figure</li>
</ul>
<p>


 </td>
<td class="padding"> 
<center><p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" ></p></center>
 </td>
</tr>
</table>


<p>


<p>

<p class="fragment">

<span class="fragment highlight-red">

Here we have a paragraph to pop up in red.
And a line more

</span>

</p>


<p>

</section>


<section>

<p>

<h3>Scientific writing needs to address many new media  <a name="___sec1"></a></h3>
<p>


<p>

<ul>
 <li class="fragment"> Old days (1985-2005): mostly black-and-white documents aimed at printing</li>
 <li class="fragment"> Now: also color PDF, web pages, wikis - for paper, PC, iPad, ...</li>
 <li class="fragment"> LaTeX writing may be very different from writing in other formats</li>
 <li class="fragment"> Main problem:</li>

<ul>
    <li class="fragment"> LaTeX provide all sorts of fancy packages, but</li>
    <li class="fragment"> PDF in browsers has limited capabilities (design, navigation)
      compared to native HTML formats</li>
</ul>
<p>

 <li class="fragment"> Conclusion: We need more than LaTeX</li>
</ul>
<p>



<p>

</section>


<section>

<p>

<h3>Some math and computer code  <a name="___sec2"></a></h3>
<p>
$$ f(x,y,t) = e^{-xt}\sin\pi y $$

Python implementation:

<p>


<!-- code typeset with pygments style "emacs" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #AA22FF; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">f</span>(x, y, t):
    <span style="color: #AA22FF; font-weight: bold">return</span> np<span style="color: #666666">.</span>exp(<span style="color: #666666">-</span>x<span style="color: #666666">*</span>t)<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>y)

<span style="color: #AA22FF; font-weight: bold">class</span> <span style="color: #0000FF">Fancy</span>:
    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__init__</span>(<span style="color: #AA22FF">self</span>):
        <span style="color: #AA22FF; font-weight: bold">pass</span>

    <span style="color: #AA22FF; font-weight: bold">def</span> <span style="color: #00A000">__call__</span>(<span style="color: #AA22FF">self</span>, x, y, t):
        <span style="color: #AA22FF; font-weight: bold">return</span> f(x, y, t)

f2 <span style="color: #666666">=</span> Fancy()
</pre></div>
<p>

</section>



</div> <!-- class="slides" -->
</div> <!-- class="reveal" -->

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.min.js"></script>

<script>

// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
controls: true,
progress: true,
history: true,
center: true,
heme: Reveal.getQueryHash().theme, // available themes are in reveal.js/css/theme
transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

// Optional libraries used to extend on reveal.js
dependencies: [
{ src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
{ src: 'reveal.js/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
{ src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
{ src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
{ src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
// { src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]
});
</script>


</body>
</html>
reveal.js:
css
grunt.js
index.html
js
lib
LICENSE
package.json
plugin
README.md

reveal.js/css:
print
reveal.css
reveal.min.css
shaders
theme

reveal.js/css/print:
paper.css
pdf.css

reveal.js/css/shaders:
tile-flip.fs
tile-flip.vs

reveal.js/css/theme:
beige.css
beigesmall.css
darkgray.css
default.css
night.css
README.md
serif.css
simple.css
sky.css
source
template

reveal.js/css/theme/source:
beige.scss
default.scss
night.scss
serif.scss
simple.scss
sky.scss

reveal.js/css/theme/template:
mixins.scss
settings.scss
theme.scss

reveal.js/js:
reveal.js
reveal.min.js

reveal.js/lib:
css
font
js

reveal.js/lib/css:
zenburn.css

reveal.js/lib/font:
league_gothic_license
league_gothic-webfont.eot
league_gothic-webfont.svg
league_gothic-webfont.ttf
league_gothic-webfont.woff

reveal.js/lib/js:
classList.js
head.min.js
html5shiv.js

reveal.js/plugin:
highlight
markdown
notes
notes-server
postmessage
print-pdf
remotes
zoom-js

reveal.js/plugin/highlight:
highlight.js

reveal.js/plugin/markdown:
markdown.js
showdown.js

reveal.js/plugin/notes:
notes.html
notes.js

reveal.js/plugin/notes-server:
client.js
index.js
notes.html

reveal.js/plugin/postmessage:
example.html
postmessage.js

reveal.js/plugin/print-pdf:
print-pdf.js

reveal.js/plugin/remotes:
remotes.js

reveal.js/plugin/zoom-js:
zoom.js

************** File: tmp_slides_html_all.sh *****************
#!/bin/sh

doconce format html slides
doconce slides_html slides doconce

doconce format html slides --pygments-html-style=monokai
doconce slides_html slides csss --html-slide-theme=csss_default
cp slides.html slides_csss_csss_default.html

doconce format html slides --pygments-html-style=perldoc
doconce slides_html slides reveal --html-slide-theme=beigesmall
cp slides.html slides_reveal_beigesmall.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides reveal --html-slide-theme=simple
cp slides.html slides_reveal_simple.html

doconce format html slides --pygments-html-style=native
doconce slides_html slides reveal --html-slide-theme=darkgray
cp slides.html slides_reveal_darkgray.html

doconce format html slides --pygments-html-style=default
doconce slides_html slides reveal --html-slide-theme=sky
cp slides.html slides_reveal_sky.html

doconce format html slides --pygments-html-style=perldoc
doconce slides_html slides reveal --html-slide-theme=serif
cp slides.html slides_reveal_serif.html

doconce format html slides --pygments-html-style=perldoc
doconce slides_html slides reveal --html-slide-theme=beige
cp slides.html slides_reveal_beige.html

doconce format html slides --pygments-html-style=fruity
doconce slides_html slides reveal --html-slide-theme=night
cp slides.html slides_reveal_night.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides dzslides --html-slide-theme=dzslides_default
cp slides.html slides_dzslides_dzslides_default.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides html5slides --html-slide-theme=template-io2011
cp slides.html slides_html5slides_template-io2011.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides html5slides --html-slide-theme=template-default
cp slides.html slides_html5slides_template-default.html

doconce format html slides --pygments-html-style=fruity
doconce slides_html slides deck --html-slide-theme=sandstone.mightly
cp slides.html slides_deck_sandstone_mightly.html

doconce format html slides --pygments-html-style=fruity
doconce slides_html slides deck --html-slide-theme=neon
cp slides.html slides_deck_neon.html

doconce format html slides --pygments-html-style=perldoc
doconce slides_html slides deck --html-slide-theme=sandstone.default
cp slides.html slides_deck_sandstone_default.html

doconce format html slides --pygments-html-style=native
doconce slides_html slides deck --html-slide-theme=sandstone.dark
cp slides.html slides_deck_sandstone_dark.html

doconce format html slides --pygments-html-style=default
doconce slides_html slides deck --html-slide-theme=sandstone.firefox
cp slides.html slides_deck_sandstone_firefox.html

doconce format html slides --pygments-html-style=emacs
doconce slides_html slides deck --html-slide-theme=sandstone.light
cp slides.html slides_deck_sandstone_light.html

doconce format html slides --pygments-html-style=fruity
doconce slides_html slides deck --html-slide-theme=sandstone.mdn
cp slides.html slides_deck_sandstone_mdn.html

doconce format html slides --pygments-html-style=default
doconce slides_html slides deck --html-slide-theme=mnml
cp slides.html slides_deck_mnml.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides deck --html-slide-theme=web-2.0
cp slides.html slides_deck_web-2_0.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides deck --html-slide-theme=swiss
cp slides.html slides_deck_swiss.html

doconce format html slides --pygments-html-style=fruity
doconce slides_html slides deck --html-slide-theme=sandstone.aurora
cp slides.html slides_deck_sandstone_aurora.html

doconce format html slides --pygments-html-style=autumn
doconce slides_html slides deck --html-slide-theme=beamer
cp slides.html slides_deck_beamer.html

echo "Here are the slide shows:"
/bin/ls slides_*_*.html

************** File: testdoc_wordpress.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    pre { background: #ededed; color: #000; padding: 15px;}
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>



<body>

    



<p>


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  

<p>


<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>


<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> 
<p>

<h2>Table of contents</h2>

<p>

<a href="#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:ex"> Subsection 2 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#decay:sec:theta"> The $latex \theta$ parameter (not $latex \nabla$?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec4"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec6"> A test of verbatim words in heading with subscript $latex a_i$: <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec9"> LaTeX Mathematics </a><br>
<a href="#___sec10"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec12"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec13"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec16"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec19"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec20"> Example 2: Just an example </a><br>
<a href="#___sec21"> Here goes another section </a><br>
<a href="#___sec22"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="#___sec25"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec26"> A subsection within an appendix </a><br>
<a href="#___sec27"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec28"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec31"> Appendix: Testing identical titles </a><br>

<p>




<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>

<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<p>



<p>

<h2>Section 1 <a name="sec1"></a></h2>
<p>
Here is a nested list:

<p>

<ul>
  <li> item1</li>
  <li> item2</li>
  <li> item3 which continues
    on the next line to test that feature</li>
  <li> and a sublist</li>

<ul>
    <li> with indented subitem1</li>
    <li> and a subitem2</li>
</ul>

  <li> and perhaps an ordered sublist</li>

<ol>
   <li> first item</li>
   <li> second item,
      continuing on a new line</li>
</ol>

</ul>

<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<p>


<p>

<h3>Subsection 1  <a name="___sec1"></a></h3>
<p>
More text, with a reference back to the section <a href="#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 


<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
and then just the subroutine,
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
</pre></div>
<p>
and finally the complete file:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #19177C">C</span>     <span style="color: #19177C">a</span> <span style="color: #19177C">comment</span>

      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>

Testing other code environments. First Python:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
<p>
which gets rendered as

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
<p>

Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>

Then Cython:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">cpdef</span> <span style="color: #0000FF">f</span>(double x):
    <span style="color: #008000; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
<p>


C++:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">#include &lt;iostream&gt;</span>

<span style="color: #B00040">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
<p>

And a little bit of Fortran:

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
<p>
which then is typeset as

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
<p>

System call:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #008000">test</span>
Terminal&gt; <span style="color: #008000">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
<p>

It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>

<h3>Subsection 2 <a name="subsec:ex"></a></h3>
<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>

<center> 
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>

Figures without captions are allowed.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<p>
Test of movies.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
</p>


<p>


<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em></em>
</p>


<p>


<p>
<a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>



<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>


<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>

<center> 
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in $latex t_{i+1}$. <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>

Movie <a href="#mymov">mymov</a> has a similar problem.

<p>


<p>


<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<p>


<p>


<p>

<h3>The $latex \theta$ parameter (not $latex \nabla$?) <a name="decay:sec:theta"></a></h3>
<p>
Functions do not always need to be advanced, here is one
involving $latex \theta$:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
<p>

<b>More on $latex \theta$.</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
$latex \frac{1}{2}$, $latex {1/2}$, $latex \pmb{x}$, $latex \frac{Du}{dt}$,
both inline and in block:

<p>

$latex 
\frac{Du}{dt} = 0
 $

$latex  
\frac{1}{2} = {1/2} $

$latex  
\frac{1}{2}\pmb{x} = \pmb{n}
 $



<p>
Or with align with label and numbers:

<p>

$latex 
\frac{Du}{dt} = 0
 $

$latex  
\frac{1}{2} = {1/2} $

$latex  
\frac{1}{2}\pmb{x} = \pmb{n}

 $



<p>


<h3>Custom Environments  <a name="___sec4"></a></h3>
<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>


<a name="theorem:fundamental1"></a>

<p>

<b>Theorem 5.</b>
Let $latex a=1$ and $latex b=2$. Then $latex c=3$.


<p>

<b>Proof.</b>
Since $latex c=a+b$, the result follows from straightforward addition.
$latex latex \Diamond$


<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<p>


<h3>Tables <a name="subsec:table"></a></h3>
<p>



<p>
Let us take this table from the manual:

<p>

<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>

The Doconce source code reads
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
<p>

Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>    $latex latex i$     </b></td> <td align="center"><b>   $latex latex h_i$    </b></td> <td align="center"><b> $latex latex \bar T_i$ </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>             exact              </b></td> <td align="center"><b>        <code>v_1</code>        </b></td> <td align="center"><b> $latex latex a_i$ + <code>v_2</code> </b></td> <td align="center"><b>      <code>verb_3_</code>      </b></td> </tr>
<tr><td align="right">   9                                 </td> <td align="right">   9.62                              </td> <td align="right">   5.57                              </td> <td align="right">   8.98                              </td> </tr>
<tr><td align="right">   -20                               </td> <td align="right">   -23.39                            </td> <td align="right">   -7.65                             </td> <td align="right">   -19.93                            </td> </tr>
<tr><td align="right">   10                                </td> <td align="right">   17.74                             </td> <td align="right">   -4.50                             </td> <td align="right">   9.96                              </td> </tr>
<tr><td align="right">   0                                 </td> <td align="right">   -9.19                             </td> <td align="right">   4.13                              </td> <td align="right">   -0.26                             </td> </tr>
</table>
<p>


<h3>A test of verbatim words in heading with subscript $latex a_i$: <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec6"></a></h3>
<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math $latex a_{i-1}$.</b>
Here
is
some text.

<p>




<p>

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>
<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples-as-exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>

<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<p>


<p>


<h3>URLs <a name="subsubsec:ex"></a></h3>
<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>



<p>




<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--latex-printed</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<p>


<h3>LaTeX Mathematics  <a name="___sec9"></a></h3>
<p>
Here is an equation without label using backslash-bracket environment:

$latex  a = b + c  $


or with number and label, as in <b>(REF to equation my:eq1 not supported)</b>, using the equation environment:

$latex 
{\partial u\over\partial t} = \nabla^2 u 
 $


We can refer to this equation by <b>(REF to equation my:eq1 not supported)</b>.

<p>
Here is a system without equation numbers, using the align-astrisk environment:

$latex 
\pmb{a} = \pmb{q}\times\pmb{n}  $

$latex  
b = \nabla^2 u + \nabla^4 v
 $



<p>

And here is a system of equations with labels in an align environment:

$latex 
a = q + 4 + 5+ 6   $

$latex  
b = \nabla^2 u + \nabla^4 x 
 $


We can refer to <b>(REF to equation eq1 not supported)</b>-<b>(REF to equation eq2 not supported)</b>.

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:

\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u

\end{multline}

Testing split:

$latex 

\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
 $


We can refer to the last equation by <b>(REF to equation split:envir:eq not supported)</b>.

<p>
Testing gather:

\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}


<p>
Testing alignat:

\begin{alignat}{2}
a = q + 4 + 5+ 6\qquad  \mbox{for } q\geq 0   $

$latex  
b = \nabla^2 u + \nabla^4 x  x\in\Omega 
\end{alignat}

Let us refer to <b>(REF to equation eq1 not supported)</b>-<b>(REF to equation eq2 not supported)</b> again, and to the
alignat variant <b>(REF to equation eq1a not supported)</b>-<b>(REF to equation eq2a not supported)</b>, and to <b>(REF to equation my:eq1 not supported)</b>.

<p>
Testing eqnarray:

\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g 
\end{eqnarray}


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<p>

<h2>Exercises  <a name="___sec10"></a></h2>
<p>



<p>

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>


<p>


<p>
Make a program that simulates flipping a coin $latex N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<p>



<p>



<h4>Remarks  <a name="___sec12"></a></h4>
<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
<li> Mark 1.</li>
<li> Mark 2.
</li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.


<p>


<p>
<b>Hint 2.</b>
Draw an integer among $latex \{1,2\}$ with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.


<p>


<b>Answer.</b>
If the <code>random.random()</code> function returns a number $latex <1/2$, let it be
head, otherwise tail. Repeat this $latex N$ number of times.


<p>


<b>Solution.</b>
Code:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">sys</span><span style="color: #666666">,</span> <span style="color: #0000FF; font-weight: bold">random</span>
N <span style="color: #666666">=</span> <span style="color: #008000">int</span>(sys<span style="color: #666666">.</span>argv[<span style="color: #666666">1</span>])
heads <span style="color: #666666">=</span> <span style="color: #666666">0</span>
<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(N):
    r <span style="color: #666666">=</span> random<span style="color: #666666">.</span>random()
    <span style="color: #008000; font-weight: bold">if</span> r <span style="color: #666666">&lt;=</span> <span style="color: #666666">0.5</span>:
        heads <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
<span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Flipping a coin </span><span style="color: #BB6688; font-weight: bold">%d</span><span style="color: #BA2121"> times gave </span><span style="color: #BB6688; font-weight: bold">%d</span><span style="color: #BA2121"> heads&#39;</span> <span style="color: #666666">%</span> (N, heads)
</pre></div>
<p>

Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.


<p>


<p>


<h3>Not an exercise  <a name="___sec13"></a></h3>
<p>
Should be possible to stick a normal section in the middle of many
exercises.

<p>



<p>

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>
<p>


<p>

What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $latex [0,1)$?

<p>


<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw $latex N$ such random numbers using Python's standard <code>random</code> module,
count how many of them, $latex M$, that fall in the interval $latex (0.5,0.6)$, and
compute the probability as $latex M/N$.


<p>


<p>




<p>

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>
<p>
The formula for a circle is given by

<p>

$latex 
x = x_0 + R\cos 2\pi t, $

$latex  
y = y_0 + R\sin 2\pi t,
 $


where $latex R$ is the radius of the circle, $latex (x_0,y_0)$ is the
center point, and $latex t$ is a parameter in the unit interval $latex [0,1]$.
For any $latex t$, $latex (x,y)$ is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #008000; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
<p>




<p>
The goal of this project is to draw $latex N$ circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>

<b>a)</b>
Let $latex R$ be normally distributed and $latex (x_0,y_0)$ uniformly distributed.

<p>


<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
$latex x_0$, $latex y_0$, and $latex R$ quantities.


<p>


<b>Answer.</b>
Here goes the short answer to part a).


<p>


<b>Solution.</b>
Here goes a full solution to part a).


<p>
<b>b)</b>
Let $latex R$ be uniformly distributed and $latex (x_0,y_0)$ normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let $latex R$ and $latex (x_0,y_0)$ be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<p>


<p>

<h4>Remarks  <a name="___sec16"></a></h4>
<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<p>



<p>




<p>

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>
<p>
Intro to this exercise. Questions are in subexercises below.

<p>


The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>


<b>Solution.</b>
Here goes a full solution of the whole exercise.
With some math $latex a=b$ in this solution:

$latex  \hbox{math in solution: } a = b  $


And code <code>a=b</code> in this solution:
<p>


<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">a = b  # code in solution
</pre></div>
<p>
End of solution is here.


<p>

<b>a)</b>
Subexercises are numbered a), b), etc.

<p>


<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math $latex a=b$ in hint:

<p>

$latex  a=b.  $


And with code returning $latex x+1$ in hint:

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
<p>


<p>


<p>
<b>Hint 2.</b>
Second hint to subexercise a).

Filename: <code>subexer_a.pdf</code>.

<p>


<b>Answer.</b>
Short answer to subexercise a).
With math in answer: $latex a=b$.


<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>

Some math $latex \cos^2 x + \sin^2 x = 1$ written one a single line:

<p>

$latex  \cos^2 x + \sin^2 x = 1 \thinspace . $



<p>


<p>
<b>Hint.</b>
A hint for this subexercise.

Filename: <code>subexer_b.pdf</code>.

<p>


<b>Solution.</b>
Here goes the solution of this subexercise.


<p>


<p>

<h4>Remarks  <a name="___sec18"></a></h4>
<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<p>



<p>




<p>

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec19"></a></h3>
<p>


<p>
Just some text. And some math saying that $latex e^0=1$ on a single line,
to test that math block insertion is correct:

<p>

$latex  \exp{(0)} = 1  $



<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>



<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>
<p>



<p>




<p>

<h3>Example 2: Just an example  <a name="___sec20"></a></h3>
<p>



<p>

<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<p>


<p>


<h2>Here goes another section  <a name="___sec21"></a></h2>
<p>
With some text, before we continue with exercises.

<p>

<h2>More Exercises  <a name="___sec22"></a></h2>
<p>



<p>

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>
<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<p>


<p>




<p>

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>
<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<p>


<p>


<h2>Appendix: Just for testing; part I  <a name="___sec25"></a></h2>
<p>
This is the first appendix.

<p>

<h3>A subsection within an appendix  <a name="___sec26"></a></h3>
<p>
Some text.

<p>

<h2>Appendix: Just for testing; part II  <a name="___sec27"></a></h2>
<p>
This is more stuff for an appendix.

<p>

<h3>Appendix: Testing identical titles  <a name="___sec28"></a></h3>
<p>
Without label.

<p>

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>
<p>
With label.

<p>

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>
<p>
With label.

<p>

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>
<p>
Without label.

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_hint.png" hspace="5" alt="Hint"></td>
<th align="left" valign="middle"><b>Hint</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Here is a hint.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="Warning"></td>
<th align="left" valign="middle"><b>Warning</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
And here is a warning about something to pay attention to.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_summary.png" hspace="5" alt="Summary"></td>
<th align="left" valign="middle"><b>Summary</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Much testing in this document, otherwise stupid content.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="Notice"></td>
<th align="left" valign="middle"><b>Notice</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Ah, we are close to the end.
With math:

$latex  p=q $


</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_question.png" hspace="5" alt="Question"></td>
<th align="left" valign="middle"><b>Question</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
So, how many admonition environments does Doconce support?
</p></td></tr>
</table>



</body>
</html>
    


************** File: testdoc_no_solutions.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    pre { background: #ededed; color: #000; padding: 15px;}
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Section 1 ', 1, 'sec1'),
              (' Subsection 1 ', 2, None),
              (' Subsection 2 ', 2, 'subsec:ex'),
              (' The $\\theta$ parameter (not $\\nabla$?) ',
               2,
               'decay:sec:theta'),
              (' Custom Environments ', 2, None),
              (' Tables ', 2, 'subsec:table'),
              (' A test of verbatim words in heading with subscript $a_i$: `my_file_v1` and `my_file_v2` ',
               2,
               None),
              (' Example 1: Examples can be typeset as exercises ',
               2,
               'Example'),
              (' URLs ', 2, 'subsubsec:ex'),
              (' LaTeX Mathematics ', 2, None),
              (' Exercises ', 1, None),
              (' Problem 1: Flip a Coin ', 2, 'demo:ex:1'),
              (' Remarks ', 3, None),
              (' Not an exercise ', 2, None),
              (' Project 1: Compute a Probability ', 2, 'demo:ex:2'),
              (' Project 2: Explore Distributions of Random Circles ',
               2,
               'proj:circle1'),
              (' Remarks ', 3, None),
              (' Exercise 1: Determine some Distance ', 2, 'exer:dist'),
              (' Remarks ', 3, None),
              (' Some exercise without the "Exercise:" prefix ', 2, None),
              (' Example 2: Just an example ', 2, None),
              (' Here goes another section ', 1, None),
              (' More Exercises ', 1, None),
              (' Exercise 3: Make references to projects and problems ',
               2,
               'exer:some:formula'),
              (' Project 3: References in a headings do not work well in html ',
               2,
               'exer:you'),
              (' Appendix: Just for testing; part I ', 1, None),
              (' A subsection within an appendix ', 2, None),
              (' Appendix: Just for testing; part II ', 1, None),
              (' Appendix: Testing identical titles ', 2, None),
              (' Appendix: Testing identical titles ', 2, 'test:title:id1'),
              (' Appendix: Testing identical titles ', 2, 'test:title:id2'),
              (' Appendix: Testing identical titles ', 2, None)]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">


<!-- newcommands_replace.tex -->
$$
\newcommand{\x}{\pmb{x}}
\newcommand{\normalvec}{\pmb{n}}
\newcommand{\Ddt}[1]{\frac{D#1}{dt}}
\newcommand{\halfi}{1/2}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\report}{test report}
$$




    
<!-- ------------------- main content ---------------------- -->


<p>


<title>A Document for Testing Doconce</title>

<center><h1>A Document for Testing Doconce</h1></center>  <!-- document title -->

<p>
<!-- author(s) -->

<center>
<b>Hans Petter Langtangen</b> [1, 2] (<tt>hpl at simula.no</tt>)
</center>

<center>
<b>Kaare Dump</b> [3]
</center>

<center>
<b>A. Dummy Author</b> 
</center>

<center>
<b>I. S. Overworked</b> [4, 5, 6, 7]
</center>

<center>
<b>J. Doe</b>  (<tt>j_doe at cyberspace.com</tt>)
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Center for Biomedical Computing, Simula Research Laboratory</b></center>
<center>[2] <b>Department of Informatics, University of Oslo</b></center>
<center>[3] <b>Segfault Inc, Cyberspace</b></center>
<center>[4] <b>Inst1</b></center>
<center>[5] <b>Inst2, Somewhere</b></center>
<center>[6] <b>Third Inst, Elsewhere</b></center>
<center>[7] <b>Fourth Inst</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>

<h2>Table of contents</h2>

<p>

<a href="#sec1"> Section 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec1"> Subsection 1 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:ex"> Subsection 2 </a><br>
&nbsp; &nbsp; &nbsp; <a href="#decay:sec:theta"> The \( \theta \) parameter (not \( \nabla \)?) </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec4"> Custom Environments </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsec:table"> Tables </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec6"> A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code> </a><br>
&nbsp; &nbsp; &nbsp; <a href="#Example"> Example 1: Examples can be typeset as exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#subsubsec:ex"> URLs </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec9"> LaTeX Mathematics </a><br>
<a href="#___sec10"> Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:1"> Problem 1: Flip a Coin </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec12"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec13"> Not an exercise </a><br>
&nbsp; &nbsp; &nbsp; <a href="#demo:ex:2"> Project 1: Compute a Probability </a><br>
&nbsp; &nbsp; &nbsp; <a href="#proj:circle1"> Project 2: Explore Distributions of Random Circles </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec16"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:dist"> Exercise 1: Determine some Distance </a><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#___sec18"> Remarks </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec19"> Some exercise without the "Exercise:" prefix </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec20"> Example 2: Just an example </a><br>
<a href="#___sec21"> Here goes another section </a><br>
<a href="#___sec22"> More Exercises </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:some:formula"> Exercise 3: Make references to projects and problems </a><br>
&nbsp; &nbsp; &nbsp; <a href="#exer:you"> Project 3: References in a headings do not work well in html </a><br>
<a href="#___sec25"> Appendix: Just for testing; part I </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec26"> A subsection within an appendix </a><br>
<a href="#___sec27"> Appendix: Just for testing; part II </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec28"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id1"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#test:title:id2"> Appendix: Testing identical titles </a><br>
&nbsp; &nbsp; &nbsp; <a href="#___sec31"> Appendix: Testing identical titles </a><br>

<p>


<!-- !split -->

<p>
The format of this document is
plain, homemade HTML (from Doconce).

<p>
<!-- Just a comment -->

<p>
<b>Abstract.</b> This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

<p>
And exactly for test purposes we have an extra line here, which
is part of the abstract.

<p>
<!-- Cannot demonstrate chapter headings since abstract and chapter -->
<!-- is mutually exclusive in LaTeX -->

<p>

<h2>Section 1 <a name="sec1"></a></h2>
<p>
Here is a nested list:

<p>

<ul>
  <li> item1</li>
  <li> item2</li>
  <li> item3 which continues
    on the next line to test that feature</li>
  <li> and a sublist</li>

<ul>
    <li> with indented subitem1</li>
    <li> and a subitem2</li>
</ul>

  <li> and perhaps an ordered sublist</li>

<ol>
   <li> first item</li>
   <li> second item,
      continuing on a new line</li>
</ol>

</ul>

<blockquote>
    Here are two lines that make up
    a block quote.
</blockquote>
<p>
<!-- !split and check if these extra words are included properly in the comment -->

<p>

<h3>Subsection 1  <a name="___sec1"></a></h3>
<p>
More text, with a reference back to the section <a href="#sec1">Section 1</a> and further
to the section <a href="#subsubsec:ex">URLs</a>. 
<!-- sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console -->

<p>
Let's do some copying from files too. First from subroutine up to the very end,

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>
and then just the subroutine,
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
</pre></div>
<p>
and finally the complete file:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #19177C">C</span>     <span style="color: #19177C">a</span> <span style="color: #19177C">comment</span>

      <span style="color: #008000; font-weight: bold">subroutine </span><span style="color: #19177C">test</span>()
      <span style="color: #B00040">integer </span><span style="color: #19177C">i</span>
      <span style="color: #B00040">real</span><span style="color: #666666">*8</span> <span style="color: #19177C">r</span>
      <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>
      <span style="color: #008000; font-weight: bold">do </span><span style="color: #19177C">i</span> <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #19177C">i</span>
         <span style="color: #19177C">r</span> <span style="color: #666666">=</span> <span style="color: #19177C">r</span> <span style="color: #666666">+</span> <span style="color: #19177C">i</span>
      <span style="color: #008000; font-weight: bold">end do</span>
<span style="color: #008000; font-weight: bold">      return</span>
<span style="color: #19177C">C</span>     <span style="color: #19177C">END1</span>

      <span style="color: #008000; font-weight: bold">program </span><span style="color: #19177C">testme</span>
      <span style="color: #008000; font-weight: bold">call </span><span style="color: #19177C">test</span>()
      <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<p>

Testing other code environments. First Python:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc pycod
def f(x):
    return x+1
!ec
</pre></div>
<p>
which gets rendered as

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x):
    <span style="color: #008000; font-weight: bold">return</span> x<span style="color: #666666">+1</span>
</pre></div>
<p>

Now a complete program to be shown via Python Online Tutorial:
<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%29%3A%0A++++return+x+%2B+1%0A%0Aa+%3D+2%0Ax+%3D+a%0Aa+%3D+1%0Av+%3D+f%28x%29%0Aprint+v&curInstr=0&py=2&cumulative=false">
</iframe>
<p>

Then Cython:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">cpdef</span> <span style="color: #0000FF">f</span>(double x):
    <span style="color: #008000; font-weight: bold">return</span> x <span style="color: #666666">+</span> <span style="color: #666666">1</span>
</pre></div>
<p>

<!-- This one tests a + sign before a code environment -->
C++:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #BC7A00">#include &lt;iostream&gt;</span>

<span style="color: #B00040">int</span> main()
{
   std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Sample output&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
}
</pre></div>
<p>
<!-- The next should get correctly typset in sphinx (cod is fcod) -->
And a little bit of Fortran:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
</pre></div>
<p>
which then is typeset as

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
</pre></div>
<p>

System call:
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; mkdir <span style="color: #008000">test</span>
Terminal&gt; <span style="color: #008000">cd test</span>
Terminal&gt; myprog -f
output1
output2
</pre></div>
<p>

It is time to test <code>verbatim inline font</code> especially with <code>a newline
inside the text</code> and an exclamation mark at the end: <code>BEGIN</code>! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the <code>verb</code> typesetting... Also test backslashes
like <code>\begin</code> and <code>\end</code> in inline verbatim text.

<p>

<h3>Subsection 2 <a name="subsec:ex"></a></h3>
<p>
Test of figures. In particular we refer to Figure <a href="#fig:impact">1</a> in which
there is a flow.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 1:  Visualization of flow by streamtubes. <a name="fig:impact"></a> </p></center>
<p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p>
</center>

<p>

Figures without captions are allowed.

<p>
<center><p><img src="../doc/manual/figs/streamtubes.png" align="bottom" width=200></p></center>

<p>
Test of movies.

<p>

<embed src="../doc/manual/figs/mjolnir.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em>Mjolnir tsunami (by Sylfest Glimsdal).</em>
</p>


<p>
<!-- Test empty caption: -->

<p>

<embed src="../doc/manual/figs/wavepacket.mpeg" width=700 height=400 autoplay="false" loop="true"></embed>
<p>
<em></em>
</p>


<p>
<!-- Test wrong syntax and multi-line caption -->

<p>
<a href="wavepacket_0001.html">Movie of files <tt>../doc/manual/figs/wavepacket_*.png</tt></a>
<em>Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). <a name="mymov"></a></em></p>

<p>
<!-- Check out the correct with and height of YouTube movies from the -->
<!-- embed command that the YouTube page can generate -->

<p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/_O7iUiftbKU" frameborder="0" allowfullscreen></iframe>

<em>Movies can be uploaded to YouTube and embedded as HTML or as a link.</em>



<p>
<!-- Test multi-line caption in figure -->

<p>
Here is figure <a href="#myfig">2</a> with a long multi-line caption
and an extra space before the FIGURE keyword.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 2:  A long caption spanning several lines and containing verbatim words like <code>my_file_v1</code> and <code>my_file_v2</code> as well as math with subscript as in \( t_{i+1} \). <a name="myfig"></a> </p></center>
<p><img src="../doc/manual/figs/wavepacket_0001.png" align="bottom" width=500></p>
</center>

<p>

Movie <a href="#mymov">mymov</a> has a similar problem.

<p>
<!-- Must be a blank line after MOVIE or FIGURE to detect this problem -->

<p>
<!-- Test URL as figure name -->

<p>
<center><p><img src="https://doconce.googlecode.com/hg/doc/blog/f_plot.png" align="bottom" width=500,></p></center>

<p>
<!-- Test wikimedia type of files that otherwise reside in subdirs -->

<p>
<!-- Somewhat challenging heading with latex math, \t, \n, ? and parenthesis -->

<p>

<h3>The \( \theta \) parameter (not \( \nabla \)?) <a name="decay:sec:theta"></a></h3>
<p>
Functions do not always need to be advanced, here is one
involving \( \theta \):
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def f(theta):
    return theta**2
</pre></div>
<p>

<b>More on \( \theta \).</b>
Here is more text following headline with math.

<p>
Newcommands must also be tested in this test report:
\( \frac{1}{2} \), \( {1/2} \), \( \pmb{x} \), \( \frac{Du}{dt} \),
both inline and in block:

<p>
$$
\begin{align*}
\frac{Du}{dt} &= 0
\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\end{align*}
$$


<p>
Or with align with label and numbers:

<p>
$$
\begin{align}
\frac{Du}{dt} &= 0
\label{aligneq1}\\ 
\frac{1}{2} &= {1/2}\\ 
\frac{1}{2}\pmb{x} &= \pmb{n}
\label{aligneq2}
\end{align}
$$


<p>


<h3>Custom Environments  <a name="___sec4"></a></h3>
<p>
Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the <code>.tex</code> by proper begin-end LaTeX environments for theorems.
Should look nice in most formats!

<p>

<!-- begin theorem -->
<a name="theorem:fundamental1"></a>

<p>

<b>Theorem 5.</b>
Let \( a=1 \) and \( b=2 \). Then \( c=3 \).
<!-- end theorem -->

<p>
<!-- begin proof -->
<b>Proof.</b>
Since \( c=a+b \), the result follows from straightforward addition.
\( \Diamond \)
<!-- end proof -->

<p>
As we see, the proof of Theorem 5 is a modest
achievement.

<p>


<h3>Tables <a name="subsec:table"></a></h3>
<p>

<!-- index with comma could fool sphinx -->

<p>
Let us take this table from the manual:

<p>

<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="right">   1.4186          </td> <td align="right">   -5.01           </td> </tr>
<tr><td align="left">   2.0             </td> <td align="right">   1.376512        </td> <td align="right">   11.919          </td> </tr>
<tr><td align="left">   4.0             </td> <td align="right">   1.1E+1          </td> <td align="right">   14.717624       </td> </tr>
</table>
<p>

The Doconce source code reads
<p>

<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
</pre></div>
<p>

Here is yet another table to test that we can handle more than
one table:

<p>
<table border="1">
<tr><td align="center"><b>     time     </b></td> <td align="center"><b>   velocity   </b></td> <td align="center"><b> acceleration </b></td> </tr>
<tr><td align="left">   0.0             </td> <td align="left">   1.4186          </td> <td align="left">   -5.01           </td> </tr>
<tr><td align="left">   1.0             </td> <td align="left">   1.376512        </td> <td align="left">   11.919          </td> </tr>
<tr><td align="left">   3.0             </td> <td align="left">   1.1E+1          </td> <td align="left">   14.717624       </td> </tr>
</table>
<p>
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:

<p>
<table border="1">
<tr><td align="center"><b>     \( i \)      </b></td> <td align="center"><b>    \( h_i \)     </b></td> <td align="center"><b>  \( \bar T_i \)  </b></td> <td align="center"><b> <code>L_i</code> </b></td> </tr>
<tr><td align="left">   0                   </td> <td align="right">   0                   </td> <td align="right">   288                 </td> <td align="right">   -0.0065             </td> </tr>
<tr><td align="left">   1                   </td> <td align="right">   11,000              </td> <td align="right">   216                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   2                   </td> <td align="right">   20,000              </td> <td align="right">   216                 </td> <td align="right">   0.001               </td> </tr>
<tr><td align="left">   3                   </td> <td align="right">   32,000              </td> <td align="right">   228                 </td> <td align="right">   0.0028              </td> </tr>
<tr><td align="left">   4                   </td> <td align="right">   47,000              </td> <td align="right">   270                 </td> <td align="right">   0.0                 </td> </tr>
<tr><td align="left">   5                   </td> <td align="right">   51,000              </td> <td align="right">   270                 </td> <td align="right">   -0.0028             </td> </tr>
<tr><td align="left">   6                   </td> <td align="right">   71,000              </td> <td align="right">   214                 </td> <td align="right">   <code>NaN</code>    </td> </tr>
</table>
<p>
And add one with verbatim headings (with underscores),
and rows starting with <code>|-</code> because of a negative number,
and <code>|</code> right after verbatim word (with no space):

<p>
<table border="1">
<tr><td align="center"><b>            exact             </b></td> <td align="center"><b>       <code>v_1</code>       </b></td> <td align="center"><b> \( a_i \) + <code>v_2</code> </b></td> <td align="center"><b>     <code>verb_3_</code>     </b></td> </tr>
<tr><td align="right">   9                               </td> <td align="right">   9.62                            </td> <td align="right">   5.57                            </td> <td align="right">   8.98                            </td> </tr>
<tr><td align="right">   -20                             </td> <td align="right">   -23.39                          </td> <td align="right">   -7.65                           </td> <td align="right">   -19.93                          </td> </tr>
<tr><td align="right">   10                              </td> <td align="right">   17.74                           </td> <td align="right">   -4.50                           </td> <td align="right">   9.96                            </td> </tr>
<tr><td align="right">   0                               </td> <td align="right">   -9.19                           </td> <td align="right">   4.13                            </td> <td align="right">   -0.26                           </td> </tr>
</table>
<p>


<h3>A test of verbatim words in heading with subscript \( a_i \): <code>my_file_v1</code> and <code>my_file_v2</code>  <a name="___sec6"></a></h3>
<p>
<b>Files <code>my_file_v1.py</code> and <code>my_file_v2.py</code> define some math \( a_{i-1} \).</b>
Here
is
some text.

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Example 1: Examples can be typeset as exercises <a name="Example"></a></h3>
<p>
Examples can start with a subsection heading starting with <code>Example:</code>
and then, with the command-line option <code>--examples-as-exercises</code> be
typeset as exercises. This is useful if one has solution
environments as part of the example.

<p>

<b>a)</b>
State some problem.

<p>
<b>Solution.</b>
The answer to this subproblem can be written here.

<p>
<b>b)</b>
State some other problem.

<p>
<b>Hint 1.</b>
A hint can be given.

<p>
<b>Hint 2.</b>
Maybe even another hint?

<p>
<b>Solution.</b>
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

<p>
<!-- --- end exercise --- -->

<p>


<h3>URLs <a name="subsubsec:ex"></a></h3>
<p>
Testing of URLs: hpl's home page <a href="http://folk.uio.no/hpl">hpl</a>, or
the entire URL if desired, <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>.  Here is a
plain file link <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a>, or
<a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt"><tt>testdoc.do.txt</tt></a> or <a href="testdoc.do.txt">a link with
newline</a>. Can test spaces with the link with word
too: <a href="http://folk.uio.no/hpl">hpl</a> or <a href="http://folk.uio.no/hpl">hpl</a>. Also <code>file:///</code> works: <a href="file:///home/hpl/vc/doconce/doc/demos/manual/manual.html">link to a
file</a> is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in <a href="http://folk.uio.no/hpl"><tt>http://folk.uio.no/hpl</tt></a>, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

<p>
Here are some tough tests of URLs, especially for the <code>latex</code> format:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas">Newton-Cotes</a> formulas
and a <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1">good book</a>. Need to test
Newton-Cotes with percentage in URL too:
<a href="http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas"><tt>http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas</tt></a>
and <a href="http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae"><tt>http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae</tt></a> which has a shebang.

<p>
<!-- Comments should be inserted outside paragraphs (because in the rst -->
<!-- format extra blanks make a paragraph break). -->

<p>
<!-- Note that when there is no http: or file:, it can be a file link -->
<!-- if the link name is URL, url, "URL", or "url". Such files should, -->
<!-- if rst output is desired, but placed in a <code>_static*</code> folder. -->

<p>
More tough tests: repeated URLs whose footnotes when using the
<code>--latex-printed</code> option must be correct. We have
<a href="http://google.com">google</a>, <a href="http://google.com">google</a>, and
<a href="http://google.com">google</a>, which should result in exactly three
footnotes.

<p>


<h3>LaTeX Mathematics  <a name="___sec9"></a></h3>
<p>
Here is an equation without label using backslash-bracket environment:
$$ a = b + c $$

or with number and label, as in \eqref{my:eq1}, using the equation environment:
$$
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
$$

We can refer to this equation by \eqref{my:eq1}.

<p>
Here is a system without equation numbers, using the align-astrisk environment:
$$
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}
$$


<p>

And here is a system of equations with labels in an align environment:
$$
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
$$

We can refer to \eqref{eq1}-\eqref{eq2}.

<p>
Many of the next environments will fail in non-latex formats.
Testing multiline:
$$
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
$$

Testing split:
$$
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
$$

We can refer to the last equation by \eqref{split:envir:eq}.

<p>
Testing gather:
$$
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}
$$


<p>
Testing alignat:
$$
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
$$

Let us refer to \eqref{eq1}-\eqref{eq2} again, and to the
alignat variant \eqref{eq1a}-\eqref{eq2a}, and to \eqref{my:eq1}.

<p>
Testing eqnarray:
$$
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}
$$


<p>
More mathematical typesetting is demonstrated in the coming exercises.

<p>
Below, we have <a href="#demo:ex:1">Problem 1: Flip a Coin</a> and <a href="#demo:ex:2">Project 1: Compute a Probability</a>,
as well as <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> and <a href="#exer:you">Project 3: References in a headings do not work well in html</a>, and in
between there we have <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>.

<p>

<h2>Exercises  <a name="___sec10"></a></h2>
<p>

<!-- --- begin exercise --- -->

<p>

<h3>Problem 1: Flip a Coin <a name="demo:ex:1"></a></h3>
<!-- keywords = random numbers; Monte Carlo simulation -->

<p>
<!-- Torture tests -->

<p>
Make a program that simulates flipping a coin \( N \) times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.

<p>

<!-- Test syntax error -->

<p>



<h4>Remarks  <a name="___sec12"></a></h4>
<p>
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

<p>

<ol>
<li> Mark 1.</li>
<li> Mark 2.
<!-- --- begin hint in exercise --- --></li>
</ol>

<b>Hint 1.</b>
Use <code>r = random.random()</code> and define head as <code>r <= 0.5</code>.
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Draw an integer among \( \{1,2\} \) with
<code>r = random.randint(1,2)</code> and define head when <code>r</code> is 1.
<!-- --- end hint in exercise --- -->

<p>

<!-- removed !bans ... !eans environment
 --><!-- (because of the command-line option --without-answers)
 -->
<p>

<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without-solutions)
 -->Filenames: <code>flip_coin.py</code>, <code>flip_coin.pdf</code>.
<!-- solution files: mysol.txt, mysol_flip_coin.py, yet_another.file -->

<p>
<!-- --- end exercise --- -->

<p>


<h3>Not an exercise  <a name="___sec13"></a></h3>
<p>
Should be possible to stick a normal section in the middle of many
exercises.

<p>

<!-- --- begin exercise --- -->

<p>

<h3>Project 1: Compute a Probability <a name="demo:ex:2"></a></h3>
<p>
<!-- Minimalistic exercise -->

<p>

What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval \( [0,1) \)?

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
To answer this question empirically, let a program
draw \( N \) such random numbers using Python's standard <code>random</code> module,
count how many of them, \( M \), that fall in the interval \( (0.5,0.6) \), and
compute the probability as \( M/N \).
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Project 2: Explore Distributions of Random Circles <a name="proj:circle1"></a></h3>
<p>
The formula for a circle is given by

<p>
$$
\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
$$

where \( R \) is the radius of the circle, \( (x_0,y_0) \) is the
center point, and \( t \) is a parameter in the unit interval \( [0,1] \).
For any \( t \), \( (x,y) \) is a point on the circle.
The formula can be used to generate <code>n</code> points on a circle:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">np</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circle</span>(R, x0, y0, n<span style="color: #666666">=501</span>):
    t <span style="color: #666666">=</span> np<span style="color: #666666">.</span>linspace(<span style="color: #666666">0</span>, <span style="color: #666666">1</span>, n)
    x <span style="color: #666666">=</span> x0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>cos(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    y <span style="color: #666666">=</span> y0 <span style="color: #666666">+</span> R<span style="color: #666666">*</span>np<span style="color: #666666">.</span>sin(<span style="color: #666666">2*</span>np<span style="color: #666666">.</span>pi<span style="color: #666666">*</span>t)
    <span style="color: #008000; font-weight: bold">return</span> x, y

x, y <span style="color: #666666">=</span> circle(<span style="color: #666666">2.0</span>, <span style="color: #666666">0</span>, <span style="color: #666666">0</span>)
</pre></div>
<p>

<!-- Often in an exercise we have some comments about the solution -->
<!-- which we normally want to keep where they are. -->

<p>
The goal of this project is to draw \( N \) circles with random
center and radius. Plot each circle using the <code>circle</code> function
above.

<p>

<b>a)</b>
Let \( R \) be normally distributed and \( (x_0,y_0) \) uniformly distributed.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
Use the <code>numpy.random</code> module to draw the
\( x_0 \), \( y_0 \), and \( R \) quantities.
<!-- --- end hint in exercise --- -->

<p>

<!-- removed !bans ... !eans environment
 --><!-- (because of the command-line option --without-answers)
 -->
<p>

<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without-solutions)
 -->
<p>
<b>b)</b>
Let \( R \) be uniformly distributed and \( (x_0,y_0) \) normally distributed.
Filename: <code>norm.py</code>.

<p>
<b>c)</b>
Let \( R \) and \( (x_0,y_0) \) be normally distributed.

<p>
Filename: <code>circles.pdf</code>.

<p>
<!-- Closing remarks for this Project -->

<p>

<h4>Remarks  <a name="___sec16"></a></h4>
<p>
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.

<p>

<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Exercise 1: Determine some Distance <a name="exer:dist"></a></h3>
<p>
Intro to this exercise. Questions are in subexercises below.

<p>

<!-- No meaning in this weired test example: -->
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.

<p>

<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without-solutions)
 -->
<p>

<b>a)</b>
Subexercises are numbered a), b), etc.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 1.</b>
First hint to subexercise a).
With math \( a=b \) in hint:

<p>
$$ a=b. $$

And with code returning \( x+1 \) in hint:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">def func(x):
    return x + 1  # with code in hint
</pre></div>
<p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint 2.</b>
Second hint to subexercise a).
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_a.pdf</code>.

<p>

<!-- removed !bans ... !eans environment
 --><!-- (because of the command-line option --without-answers)
 -->
<p>
<b>b)</b>
Here goes the text for subexercise b).

<p>

Some math \( \cos^2 x + \sin^2 x = 1 \) written one a single line:

<p>
$$ \cos^2 x + \sin^2 x = 1 \thinspace .$$


<p>
<!-- --- begin hint in exercise --- -->

<p>
<b>Hint.</b>
A hint for this subexercise.
<!-- --- end hint in exercise --- -->
Filename: <code>subexer_b.pdf</code>.

<p>

<!-- removed !bsol ... !esol environment
 --><!-- (because of the command-line option --without-solutions)
 -->
<p>
<!-- Closing remarks for this Exercise -->

<p>

<h4>Remarks  <a name="___sec18"></a></h4>
<p>
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.

<p>

<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Some exercise without the "Exercise:" prefix  <a name="___sec19"></a></h3>
<p>
<!-- Another minimalistic exercise -->

<p>
Just some text. And some math saying that \( e^0=1 \) on a single line,
to test that math block insertion is correct:

<p>
$$ \exp{(0)} = 1 $$


<p>
And a test that the code <code>lambda x: x+2</code> is correctly placed here:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">lambda x: x+2
</pre></div>
<p>

<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Example 2: Just an example  <a name="___sec20"></a></h3>
<p>
<!-- This example needs the --examples-as-exercises option, otherwise -->
<!-- it is just typeset as it is written. -->

<p>

<b>a)</b>
What is the capital of Norway?

<p>
<b>Answer.</b>
Oslo.

<p>
<!-- --- end exercise --- -->

<p>


<h2>Here goes another section  <a name="___sec21"></a></h2>
<p>
With some text, before we continue with exercises.

<p>

<h2>More Exercises  <a name="___sec22"></a></h2>
<p>

<!-- --- begin exercise --- -->

<p>

<h3>Exercise 3: Make references to projects and problems <a name="exer:some:formula"></a></h3>
<p>
Pick a statement from <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a> or <a href="#demo:ex:1">Problem 1: Flip a Coin</a>
and verify it.
Filename: <code>verify_formula.py</code>.

<p>
<!-- --- end exercise --- -->

<p>


<!-- --- begin exercise --- -->

<p>

<h3>Project 3: References in a headings do not work well in html <a name="exer:you"></a></h3>
<p>
Refer to the previous exercise as <a href="#exer:some:formula">Exercise 3: Make references to projects and problems</a>,
the two before that as <a href="#demo:ex:2">Project 1: Compute a Probability</a> and <a href="#proj:circle1">Project 2: Explore Distributions of Random Circles</a>,
and this one as <a href="#exer:you">Project 3: References in a headings do not work well in html</a>.
Filename: <code>selc_composed.pdf</code>.

<p>
<!-- --- end exercise --- -->

<p>


<h2>Appendix: Just for testing; part I  <a name="___sec25"></a></h2>
<p>
This is the first appendix.

<p>

<h3>A subsection within an appendix  <a name="___sec26"></a></h3>
<p>
Some text.

<p>

<h2>Appendix: Just for testing; part II  <a name="___sec27"></a></h2>
<p>
This is more stuff for an appendix.

<p>

<h3>Appendix: Testing identical titles  <a name="___sec28"></a></h3>
<p>
Without label.

<p>

<h3>Appendix: Testing identical titles <a name="test:title:id1"></a></h3>
<p>
With label.

<p>

<h3>Appendix: Testing identical titles <a name="test:title:id2"></a></h3>
<p>
With label.

<p>

<h3>Appendix: Testing identical titles  <a name="___sec31"></a></h3>
<p>
Without label.

<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_hint.png" hspace="5" alt="Hint"></td>
<th align="left" valign="middle"><b>Hint</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Here is a hint.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_warning.png" hspace="5" alt="Warning"></td>
<th align="left" valign="middle"><b>Warning</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
And here is a warning about something to pay attention to.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_summary.png" hspace="5" alt="Summary"></td>
<th align="left" valign="middle"><b>Summary</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Much testing in this document, otherwise stupid content.
</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="Notice"></td>
<th align="left" valign="middle"><b>Notice</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
Ah, we are close to the end.
With math:
$$ p=q$$

</p></td></tr>
</table>
<p>

<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_question.png" hspace="5" alt="Question"></td>
<th align="left" valign="middle"><b>Question</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
So, how many admonition environments does Doconce support?
</p></td></tr>
</table>
<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: testdoc_no_solutions.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DBOOK -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=Springer-collection
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to command-line arguments (type doconce ptex2tex to see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer-collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------
% #ifdef BOOK
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}
% #else
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}
% #endif

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for epub-style formats
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},              % inner margin (two-sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif


\usepackage{relsize,epsfig,makeidx,amsmath,amsfonts}
\usepackage[latin1]{inputenc}
\usepackage{ptex2tex}
% #ifdef MOVIE15
\usepackage{movie15}
% #endif

% #ifdef MINTED
\usepackage{minted}  % requires latex/pdflatex -shell-escape (to run pygments)
\usemintedstyle{default}
% #endif

% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif

% Hyperlinks in PDF:
\usepackage[%
    colorlinks=true,
    linkcolor=black,
    %linkcolor=blue,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    urlcolor=black,
    pdfmenubar=true,
    pdftoolbar=true,
    urlcolor=black,
    %urlcolor=blue,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\newenvironment{exercise}{}{}
\newcounter{exerno}

\newcommand{\inlinecomment}[2]{  ({\bf #1}: \emph{#2})  }
%\newcommand{\inlinecomment}[2]{}  % turn off inline comments


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif

\input{newcommands_replace}

% ------------------- main content ----------------------





% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"

\title{A Document for Testing Doconce}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{A Document for Testing Doconce}}}

% #elif LATEX_HEADING == "Springer-collection"

\title*{A Document for Testing Doconce}
% Short version of title:
%\titlerunning{...}

% #else

\begin{center}
{\LARGE\bf A Document for Testing Doconce}
\end{center}

% #endif



% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Email: \texttt{hpl@simula.no}. Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo.}
\and Kaare Dump\footnote{Segfault Inc, Cyberspace.}
\and A. Dummy Author
\and I. S. Overworked\footnote{Inst1; Inst2, Somewhere; Third Inst, Elsewhere; and Fourth Inst.}
\and J. Doe\footnote{Email: \texttt{j\_doe@cyberspace.com}.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})}}\\ [3mm]
    
    {\Large\textsf{Kaare Dump${}^{3}$}}\\ [3mm]
    
    {\Large\textsf{A. Dummy Author${}^{}$}}\\ [3mm]
    
    {\Large\textsf{I. S. Overworked${}^{4, 5, 6, 7}$}}\\ [3mm]
    
    {\Large\textsf{J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Center for Biomedical Computing, Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$Department of Informatics, University of Oslo} \\ [1.5mm]}
{\large\textsf{${}^3$Segfault Inc, Cyberspace} \\ [1.5mm]}
{\large\textsf{${}^4$Inst1} \\ [1.5mm]}
{\large\textsf{${}^5$Inst2, Somewhere} \\ [1.5mm]}
{\large\textsf{${}^6$Third Inst, Elsewhere} \\ [1.5mm]}
{\large\textsf{${}^7$Fourth Inst} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer-collection"

\author{Hans Petter Langtangen and Kaare Dump and A. Dummy Author and I. S. Overworked and J. Doe}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Center for Biomedical Computing, Simula Research Laboratory and Department of Informatics, University of Oslo\email{hpl@simula.no} \and Kaare Dump\at Segfault Inc, Cyberspace \and A. Dummy Author \and I. S. Overworked\at Inst1 and Inst2, Somewhere and Third Inst, Elsewhere and and Fourth Inst \and J. Doe\email{j_doe@cyberspace.com}}

% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$ (\texttt{hpl@simula.no})} \\ [0mm]
\end{center}


\begin{center}
{\bf Kaare Dump${}^{3}$} \\ [0mm]
\end{center}


\begin{center}
{\bf A. Dummy Author${}^{}$} \\ [0mm]
\end{center}


\begin{center}
{\bf I. S. Overworked${}^{4, 5, 6, 7}$} \\ [0mm]
\end{center}


\begin{center}
{\bf J. Doe${}^{}$ (\texttt{j\_doe@cyberspace.com})} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Center for Biomedical Computing, Simula Research Laboratory}}
\centerline{{\small ${}^2$Department of Informatics, University of Oslo}}
\centerline{{\small ${}^3$Segfault Inc, Cyberspace}}
\centerline{{\small ${}^4$Inst1}}
\centerline{{\small ${}^5$Inst2, Somewhere}}
\centerline{{\small ${}^6$Third Inst, Elsewhere}}
\centerline{{\small ${}^7$Fourth Inst}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% ----------------- date -------------------------

% #if LATEX_HEADING == "traditional"

\date{Jan 32, 2100}
\maketitle

% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else

\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\tableofcontents

\vspace{1cm} % after toc





% !split

The format of this document is
plain, homemade {\LaTeX} (from Doconce).

% Just a comment


% #if LATEX_HEADING == "Springer-collection"
\abstract{
% #else
\begin{abstract}
% #endif
This is a document with many test constructions for doconce syntax.
It was used heavily for the development and kept for testing
numerous constructions, also special and less common cases.

And exactly for test purposes we have an extra line here, which
is part of the abstract.

% Cannot demonstrate chapter headings since abstract and chapter
% is mutually exclusive in {\LaTeX}
% #if LATEX_HEADING == "Springer-collection"
}
% #else
\end{abstract}
% #endif


\section{Section 1}

\label{sec1}

Here is a nested list:

\begin{itemize}
  \item item1

  \item item2

  \item item3 which continues
    on the next line to test that feature

  \item and a sublist
\begin{itemize}

    \item with indented subitem1

    \item and a subitem2

\end{itemize}

\noindent
  \item and perhaps an ordered sublist
\begin{enumerate}

   \item first item

   \item second item,
      continuing on a new line
\end{enumerate}

\noindent
\end{itemize}

\noindent

\begin{quote}
    Here are two lines that make up
    a block quote.
\end{quote}
% !split and check if these extra words are included properly in the comment

\subsection{Subsection 1}

More text, with a reference back to Section~\ref{sec1} and further
to Section~\ref{subsubsec:ex}. \index{somefunc@{\rm\texttt{somefunc}} function}

% sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

Let's do some copying from files too. First from subroutine up to the very end,

\bfcod
      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efcod
and then just the subroutine,
\bfcod

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
\efcod
and finally the complete file:
\bfpro
C     a comment

      subroutine test()
      integer i
      real*8 r
      r = 0
      do i = 1, i
         r = r + i
      end do
      return
C     END1

      program testme
      call test()
      return
\efpro

Testing other code environments. First Python:
\bccq
!bc pycod
def f(x):
    return x+1
!ec
\eccq
which gets rendered as

\bpycod
def f(x):
    return x+1
\epycod

Now a complete program to be shown via Python Online Tutorial:
\bpypro
def f(x):
    return x + 1

a = 2
x = a
a = 1
v = f(x)
print v
\epypro
\noindent
(\href{{http://pythontutor.com/visualize.html\#code=def+f\%28x\%29\%3A\%0A++++return+x+\%2B+1\%0A\%0Aa+\%3D+2\%0Ax+\%3D+a\%0Aa+\%3D+1\%0Av+\%3D+f\%28x\%29\%0Aprint+v&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0}}{Visualize execution}) 


Then Cython:
\bcycod
cpdef f(double x):
    return x + 1
\ecycod

% This one tests a + sign before a code environment
C++:
\bcpppro
#include <iostream>

int main()
{
   std::cout << "Sample output" << std::endl;
   return 0
}
\ecpppro
% The next should get correctly typset in sphinx (cod is fcod)
And a little bit of Fortran:

\bccq
!bc cod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
!ec
\eccq
which then is typeset as

\bcod
      subroutine midpt(x, length, a, b)
      real*8 a, b, x
      x = (a + b)/2
      length = b - a
      return
      end
\ecod


System call:
\bsys
Terminal> mkdir test
Terminal> cd test
Terminal> myprog -f
output1
output2
\esys

It is time to test \code{verbatim inline font} especially with \code{a newline
inside the text} and an exclamation mark at the end: \code{BEGIN}! The
exclamation mark inside the verbatim text is not smart for latex as
we use ! in the \code{verb} typesetting... Also test backslashes
like \code{\begin} and \code{\end} in inline verbatim text.

\subsection{Subsection 2}

\label{subsec:ex}
\index{figures}

Test of figures. In particular we refer to Figure~\ref{fig:impact} in which
there is a flow.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
  \caption{
  Visualization of flow by streamtubes. \label{fig:impact}
  }
\end{figure}
%\clearpage % flush figures fig:impact


Figures without captions are allowed.


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/streamtubes.eps}}
\end{center}


\index{movies}
Test of movies.


\begin{figure}[ht]
\begin{center}

% #ifdef MOVIE15
\includemovie[poster,
label=../doc/manual/figs/mjolnir.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/mjolnir.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/mjolnir.mpeg}    % requires \usepackage{movie15}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/mjolnir.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/mjolnir.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/mjolnir.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/mjolnir.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/mjolnir.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif

% #else
\href{run:../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}

% alternative: \movie command that comes with beamer
% \movie[options]{../doc/manual/figs/mjolnir.mpeg}{../doc/manual/figs/mjolnir.mpeg}
% #endif
\end{center}
\caption{ Mjolnir tsunami (by Sylfest Glimsdal).}
\end{figure}


% Test empty caption:


\begin{figure}[ht]
\begin{center}

% #ifdef MOVIE15
\includemovie[poster,
label=../doc/manual/figs/wavepacket.mpeg,
autoplay,
%controls,
%toolbar,
% #ifdef EXTERNAL_MOVIE_VIEWER
externalviewer,
% #endif
text={\small (Loading ../doc/manual/figs/wavepacket.mpeg)},
repeat,
]{0.9\linewidth}{0.9\linewidth}{../doc/manual/figs/wavepacket.mpeg}    % requires \usepackage{movie15}
% #ifndef EXTERNAL_MOVIE_VIEWER
\movieref[rate=0.5]{../doc/manual/figs/wavepacket.mpeg}{Slower}
\movieref[rate=2]{../doc/manual/figs/wavepacket.mpeg}{Faster}
\movieref[default]{../doc/manual/figs/wavepacket.mpeg}{Normal}
\movieref[pause]{../doc/manual/figs/wavepacket.mpeg}{Play/Pause}
\movieref[stop]{../doc/manual/figs/wavepacket.mpeg}{Stop}
% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif

% #else
\href{run:../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}

% alternative: \movie command that comes with beamer
% \movie[options]{../doc/manual/figs/wavepacket.mpeg}{../doc/manual/figs/wavepacket.mpeg}
% #endif
\end{center}
\caption{}
\end{figure}


% Test wrong syntax and multi-line caption


 Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). \label{mymov}  (Movie of files \code{../doc/manual/figs/wavepacket_*.png} in \href{{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} }{\nolinkurl{file:///home/hpl/vc/doconce/test/wavepacket_0001.html} })


% Check out the correct with and height of YouTube movies from the
% embed command that the YouTube page can generate

 Movies can be uploaded to YouTube and embedded as HTML or as a link.: \href{{http://www.youtube.com/watch?v=_O7iUiftbKU}}{\nolinkurl{http://www.youtube.com/watch?v=_O7iUiftbKU}}

% Test multi-line caption in figure

Here is figure~\ref{myfig} with a long multi-line caption
and an extra space before the FIGURE keyword.


\begin{figure}[ht]
  \centerline{\includegraphics[width=0.9\linewidth]{../doc/manual/figs/wavepacket_0001.eps}}
  \caption{
  A long caption spanning several lines and containing verbatim words like \protect \code{my\_file\_v1} and \protect \code{my\_file\_v2} as well as math with subscript as in $t_{i+1}$. \label{myfig}
  }
\end{figure}
%\clearpage % flush figures myfig


Movie~\ref{mymov} has a similar problem.

% Must be a blank line after MOVIE or FIGURE to detect this problem

% Test URL as figure name


\begin{center}  % inline figure
  \centerline{\includegraphics[width=0.8\linewidth]{downloaded_figures/f_plot.png}}
\end{center}


% Test wikimedia type of files that otherwise reside in subdirs

% Somewhat challenging heading with latex math, \t, \n, ? and parenthesis

\subsection{The $\theta$ parameter (not $\nabla$?)}

\label{decay:sec:theta}

Functions do not always need to be advanced, here is one
involving $\theta$:
\bccq
def f(theta):
    return theta**2
\eccq

\paragraph{More on $\theta$.}
Here is more text following headline with math.

Newcommands must also be tested in this \report:
$\half$, $\halfi$, $\x$, $\Ddt{u}$,
both inline and in block:

\begin{align*}
\Ddt{u} &= 0
\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\end{align*}

Or with align with label and numbers:

\begin{align}
\Ddt{u} &= 0
\label{aligneq1}\\ 
\half &= \halfi\\ 
\half\x &= \normalvec
\label{aligneq2}
\end{align}

\subsection{Custom Environments}

Here is an attempt to create a theorem environment via Mako
(for counting theorems) and comment lines to help replacing lines in
the \code{.tex} by proper begin-end {\LaTeX} environments for theorems.
Should look nice in most formats!



% begin theorem
\label{theorem:fundamental1}


\paragraph{Theorem 5.}
Let $a=1$ and $b=2$. Then $c=3$.
% end theorem

% begin proof
\paragraph{Proof.}
Since $c=a+b$, the result follows from straightforward addition.
$\Diamond$
% end proof

As we see, the proof of Theorem 5 is a modest
achievement.

\subsection{Tables}

\label{subsec:table}

\index{test index with verbatim text@test index with {\rm\texttt{verbatim text}} which is possible}
\index{test two@test {\rm\texttt{two}} (separate) {\rm\texttt{verbatim expressions}} which is also possible}
\index{index with!subindex}

% index with comma could fool sphinx
\index{index, with comma, and one more}

Let us take this table from the manual:

\begin{table}
\caption{
Testing table environment in {\LaTeX}, enabled by testing on the "latex" format
with the preprocessor.
\label{mytab}
}


\begin{quote}\begin{tabular}{lrr}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
\end{table}

The Doconce source code reads
\bccq
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
\eccq

Here is yet another table to test that we can handle more than
one table:


\begin{quote}\begin{tabular}{lll}
\hline
\multicolumn{1}{c}{ time } & \multicolumn{1}{c}{ velocity } & \multicolumn{1}{c}{ acceleration } \\
\hline
0.0          & 1.4186       & -5.01        \\
1.0          & 1.376512     & 11.919       \\
3.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}\end{quote}

\noindent
And one with math headings (that are expanded and must be treated
accordingly) and verbatim heading and entry:


\begin{quote}\begin{tabular}{lrrr}
\hline
\multicolumn{1}{c}{ $i$ } & \multicolumn{1}{c}{ $h_i$ } & \multicolumn{1}{c}{ $\bar T_i$ } & \multicolumn{1}{c}{ \code{L\_i} } \\
\hline
0          & 0          & 288        & -0.0065    \\
1          & 11,000     & 216        & 0.0        \\
2          & 20,000     & 216        & 0.001      \\
3          & 32,000     & 228        & 0.0028     \\
4          & 47,000     & 270        & 0.0        \\
5          & 51,000     & 270        & -0.0028    \\
6          & 71,000     & 214        & \code{NaN} \\
\hline
\end{tabular}\end{quote}

\noindent
And add one with verbatim headings (with underscores),
and rows starting with \code{|-} because of a negative number,
and \code{|} right after verbatim word (with no space):


\begin{quote}\begin{tabular}{rrrr}
\hline
\multicolumn{1}{c}{ exact } & \multicolumn{1}{c}{ \code{v\_1} } & \multicolumn{1}{c}{ $a_i$ + \code{v\_2} } & \multicolumn{1}{c}{ \code{verb\_3\_} } \\
\hline
9                  & 9.62               & 5.57               & 8.98               \\
-20                & -23.39             & -7.65              & -19.93             \\
10                 & 17.74              & -4.50              & 9.96               \\
0                  & -9.19              & 4.13               & -0.26              \\
\hline
\end{tabular}\end{quote}

\noindent

\subsection{A test of verbatim words in heading with subscript $a_i$: \protect\code{my\_file\_v1} and \protect\code{my\_file\_v2} }

\paragraph{Files \protect\code{my\_file\_v1.py} and \protect\code{my\_file\_v2.py} define some math $a_{i-1}$.}
Here
is
some text.




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 1: Examples can be typeset as exercises}

\label{Example}

Examples can start with a subsection heading starting with \code{Example:}
and then, with the command-line option \code{--examples-as-exercises} be
typeset as exercises. This is useful if one has solution
environments as part of the example.


\paragraph{a)}
State some problem.

\paragraph{Solution.}
The answer to this subproblem can be written here.

\paragraph{b)}
State some other problem.

\paragraph{Hint 1.}
A hint can be given.

\paragraph{Hint 2.}
Maybe even another hint?

\paragraph{Solution.}
The answer to this other subproblem goes here,
maybe over multiple doconce input lines.

\end{exercise}
% --- end exercise ---

\subsection{URLs}

\label{subsubsec:ex}

Testing of URLs: hpl's home page \href{{http://folk.uio.no/hpl}}{hpl}, or
the entire URL if desired, \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}.  Here is a
plain file link \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}}, or
\href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{\nolinkurl{testdoc.do.txt}} or \href{{testdoc.do.txt}}{a link with
newline}. Can test spaces with the link with word
too: \href{{http://folk.uio.no/hpl}}{hpl} or \href{{http://folk.uio.no/hpl}}{hpl}. Also \code{file:///} works: \href{{file:///home/hpl/vc/doconce/doc/demos/manual/manual.html} }{link to a
file} is
fine to have. Moreover, "loose" URLs work, i.e., no quotes, just
the plain URL as in \href{{http://folk.uio.no/hpl}}{\nolinkurl{http://folk.uio.no/hpl}}, if followed by space, comma,
colon, semi-colon, question mark, exclamation mark, but not a period
(which gets confused with the periods inside the URL).

Here are some tough tests of URLs, especially for the \code{latex} format:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{Newton-Cotes} formulas
and a \href{{http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-23098-1}}{good book}. Need to test
Newton-Cotes with percentage in URL too:
\href{{http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton\%E2\%80\%93Cotes_formulas}}
and \href{{http://en.wikipedia.org/wiki/Newton-Cotes#Open_Newton.E2.80.93Cotes_formulae}}{\nolinkurl{http://en.wikipedia.org/wiki/Newton-Cotes\#Open_Newton.E2.80.93Cotes_formulae}} which has a shebang.

% Comments should be inserted outside paragraphs (because in the rst
% format extra blanks make a paragraph break).

% Note that when there is no http: or file:, it can be a file link
% if the link name is URL, url, "URL", or "url". Such files should,
% if rst output is desired, but placed in a \code{_static*} folder.

More tough tests: repeated URLs whose footnotes when using the
\code{--latex-printed} option must be correct. We have
\href{{http://google.com}}{google}, \href{{http://google.com}}{google}, and
\href{{http://google.com}}{google}, which should result in exactly three
footnotes.

\subsection{Test of Some {\LaTeX} Fixes}

Let's check abbr.~of some common kind, e.g.~the well-known i.e.
expression as an example. Moreover, Dr.~Tang and Prof.~Monsen,
or maybe also prof.~Ting,
will go to the Dept.~of Science to test how Mr.~Hansen is doing together
with Ms.~Larsen. A sentence containing "refines lines" could easily
fool a regex substitution with only i.e.~since the dot matches anything.
Also, look at Fig.~4 to see how the data compares with Tab.~\ref{mytab}.

\subsection{{\LaTeX} Mathematics}

Here is an equation without label using backslash-bracket environment:
\[ a = b + c \]
or with number and label, as in (\ref{my:eq1}), using the equation environment:
\begin{equation}
{\partial u\over\partial t} = \nabla^2 u \label{my:eq1}
\end{equation}
We can refer to this equation by (\ref{my:eq1}).

Here is a system without equation numbers, using the align-astrisk environment:
\begin{align*}
\pmb{a} &= \pmb{q}\times\pmb{n} \\ 
b &= \nabla^2 u + \nabla^4 v
\end{align*}


And here is a system of equations with labels in an align environment:
\begin{align}
a &= q + 4 + 5+ 6 \label{eq1} \\ 
b &= \nabla^2 u + \nabla^4 x \label{eq2}
\end{align}
We can refer to (\ref{eq1})-(\ref{eq2}).

Many of the next environments will fail in non-latex formats.
Testing multiline:
\begin{multline}
a = b = q + \\ 
  f + \nabla\cdot\nabla u
\label{multiline:eq1}
\end{multline}
Testing split:
\begin{equation}
\label{split:envir:eq}
\begin{split}
a = b = q &+ \\ 
  & f + \nabla\cdot\nabla u
\end{split}
\end{equation}
We can refer to the last equation by (\ref{split:envir:eq}).

Testing gather:
\begin{gather}
a = b \\ 
c = d + 7 + 9
\end{gather}

Testing alignat:
\begin{alignat}{2}
a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0 \label{eq1a} \\ 
b &= \nabla^2 u + \nabla^4 x & x\in\Omega \label{eq2a}
\end{alignat}
Let us refer to (\ref{eq1})-(\ref{eq2}) again, and to the
alignat variant (\ref{eq1a})-(\ref{eq2a}), and to (\ref{my:eq1}).

Testing eqnarray:
\begin{eqnarray}
{\partial u\over\partial t} &=& \nabla^2 u + f, \label{myeq1}\\ 
{\partial v\over\partial t} &=& \nabla\cdot(q(u)\nabla v) + g \label{myeq2}
\end{eqnarray}

More mathematical typesetting is demonstrated in the coming exercises.

Below, we have Problem~\ref{demo:ex:1} and Project~\ref{demo:ex:2},
as well as Projects~\ref{proj:circle1} and~\ref{exer:you}, and in
between there we have Exercise~\ref{exer:some:formula}.


\section{Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Problem 1: Flip a Coin}

\label{demo:ex:1}
% keywords = random numbers; Monte Carlo simulation

% Torture tests

Make a program that simulates flipping a coin $N$ times.
Print out "tail" or "head" for each flip and
let the program count the number of heads.


% Test syntax error

\paragraph{Remarks.}
Remarks with such a subsubsection heading would previously mark
the beginning of a new exercise and cause trouble. Maybe a list

\begin{enumerate}
\item Mark 1.

\item Mark 2.
% --- begin hint in exercise ---
\end{enumerate}

\noindent
\paragraph{Hint 1.}
Use \code{r = random.random()} and define head as \code{r <= 0.5}.
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Draw an integer among $\{1,2\}$ with
\code{r = random.randint(1,2)} and define head when \code{r} is 1.
% --- end hint in exercise ---


% removed !bans ... !eans environment
% (because of the command-line option --without-answers)


% removed !bsol ... !esol environment
% (because of the command-line option --without-solutions)
Filenames: \code{flip_coin.py}, \code{flip_coin.pdf}.
% solution files: mysol.txt, mysol_flip_coin.py, yet_another.file

\end{exercise}
% --- end exercise ---

\subsection{Not an exercise}

Should be possible to stick a normal section in the middle of many
exercises.



% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 1: Compute a Probability}

\label{demo:ex:2}

% Minimalistic exercise


What is the probability of getting a number between 0.5 and 0.6 when
drawing uniformly distributed random numbers from the interval $[0,1)$?

% --- begin hint in exercise ---

\paragraph{Hint.}
To answer this question empirically, let a program
draw $N$ such random numbers using Python's standard \code{random} module,
count how many of them, $M$, that fall in the interval $(0.5,0.6)$, and
compute the probability as $M/N$.
% --- end hint in exercise ---

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 2: Explore Distributions of Random Circles}

\label{proj:circle1}

The formula for a circle is given by

\begin{align}
x &= x_0 + R\cos 2\pi t,\\ 
y &= y_0 + R\sin 2\pi t,
\end{align}
where $R$ is the radius of the circle, $(x_0,y_0)$ is the
center point, and $t$ is a parameter in the unit interval $[0,1]$.
For any $t$, $(x,y)$ is a point on the circle.
The formula can be used to generate \code{n} points on a circle:

\bpypro
import numpy as np

def circle(R, x0, y0, n=501):
    t = np.linspace(0, 1, n)
    x = x0 + R*np.cos(2*np.pi*t)
    y = y0 + R*np.sin(2*np.pi*t)
    return x, y

x, y = circle(2.0, 0, 0)
\epypro

% Often in an exercise we have some comments about the solution
% which we normally want to keep where they are.

The goal of this project is to draw $N$ circles with random
center and radius. Plot each circle using the \code{circle} function
above.


\paragraph{a)}
Let $R$ be normally distributed and $(x_0,y_0)$ uniformly distributed.

% --- begin hint in exercise ---

\paragraph{Hint.}
Use the \code{numpy.random} module to draw the
$x_0$, $y_0$, and $R$ quantities.
% --- end hint in exercise ---


% removed !bans ... !eans environment
% (because of the command-line option --without-answers)


% removed !bsol ... !esol environment
% (because of the command-line option --without-solutions)

\paragraph{b)}
Let $R$ be uniformly distributed and $(x_0,y_0)$ normally distributed.
Filename: \code{norm.py}.

\paragraph{c)}
Let $R$ and $(x_0,y_0)$ be normally distributed.

Filename: \code{circles.pdf}.

% Closing remarks for this Project

\paragraph{Remarks.}
At the very end of the exercise it may be appropriate to summarize
and give some perspectives.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 1: Determine some Distance}

\label{exer:dist}

Intro to this exercise. Questions are in subexercises below.





% No meaning in this weired test example:
The text here belongs to the main (intro) part of the exercise. Need
closing remarks to have text after subexercises.


% removed !bsol ... !esol environment
% (because of the command-line option --without-solutions)


\paragraph{a)}
Subexercises are numbered a), b), etc.

% --- begin hint in exercise ---

\paragraph{Hint 1.}
First hint to subexercise a).
With math $a=b$ in hint:

\[ a=b. \]
And with code returning $x+1$ in hint:

\bccq
def func(x):
    return x + 1  # with code in hint
\eccq
% --- end hint in exercise ---

% --- begin hint in exercise ---

\paragraph{Hint 2.}
Second hint to subexercise a).
% --- end hint in exercise ---
Filename: \code{subexer_a.pdf}.


% removed !bans ... !eans environment
% (because of the command-line option --without-answers)

\paragraph{b)}
Here goes the text for subexercise b).


Some math $\cos^2 x + \sin^2 x = 1$ written one a single line:

\[ \cos^2 x + \sin^2 x = 1 \thinspace .\]

% --- begin hint in exercise ---

\paragraph{Hint.}
A hint for this subexercise.
% --- end hint in exercise ---
Filename: \code{subexer_b.pdf}.


% removed !bsol ... !esol environment
% (because of the command-line option --without-solutions)

% Closing remarks for this Exercise

\paragraph{Remarks.}
Some final closing remarks, e.g., summarizing the main findings
and their implications in other problems can be made. These
remarks will appear at the end of the typeset exercise.


\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Some exercise without the "Exercise:" prefix}

% Another minimalistic exercise

Just some text. And some math saying that $e^0=1$ on a single line,
to test that math block insertion is correct:

\[ \exp{(0)} = 1 \]

And a test that the code \code{lambda x: x+2} is correctly placed here:

\bccq
lambda x: x+2
\eccq

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection{Example 2: Just an example}

% This example needs the --examples-as-exercises option, otherwise
% it is just typeset as it is written.


\paragraph{a)}
What is the capital of Norway?

\paragraph{Answer.}
Oslo.

\end{exercise}
% --- end exercise ---


\section{Here goes another section}

With some text, before we continue with exercises.


\section{More Exercises}

% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Exercise 3: Make references to projects and problems}

\label{exer:some:formula}

Pick a statement from Project~\ref{proj:circle1} or Problem~\ref{demo:ex:1}
and verify it.
Filename: \code{verify_formula.py}.

\end{exercise}
% --- end exercise ---




% --- begin exercise ---
\begin{exercise}
\refstepcounter{exerno}

\subsection*{Project 3: References to Project~\ref{demo:ex:2} in a heading works for latex}

\label{exer:you}

Refer to the previous exercise as Exercise~\ref{exer:some:formula},
the two before that as Projects~\ref{demo:ex:2} and~\ref{proj:circle1},
and this one as Project~\ref{exer:you}.
Filename: \code{selc_composed.pdf}.

\end{exercise}
% --- end exercise ---




\appendix

\section{Just for testing; part I}

This is the first appendix.

\subsection{A subsection within an appendix}

Some text.


\section{Just for testing; part II}

This is more stuff for an appendix.

\subsection{Appendix: Testing identical titles}

Without label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id1}

With label.

\subsection{Appendix: Testing identical titles}

\label{test:title:id2}

With label.

\subsection{Appendix: Testing identical titles}

Without label.


\definecolor{hintbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{hintbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/hint.eps}
\vskip-0.3in\hskip1.5in{\large\bf HINT} \\[0.4cm]
Here is a hint.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{warningbackground}{rgb}{1.0, 0.8235294, 0.8235294}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{warningbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/warning.eps}
\vskip-0.3in\hskip1.5in{\large\bf WARNING} \\[0.4cm]
And here is a warning about something to pay attention to.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{summarybackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{summarybackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/summary.eps}
\vskip-0.3in\hskip1.5in{\large\bf SUMMARY} \\[0.4cm]
Much testing in this document, otherwise stupid content.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{noticebackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/notice.eps}
\vskip-0.3in\hskip1.5in{\large\bf NOTICE} \\[0.4cm]
Ah, we are close to the end.
With math:
\[ p=q\]
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default

\definecolor{questionbackground}{rgb}{0.87843, 0.95686, 1.0}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{questionbackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/question.eps}
\vskip-0.3in\hskip1.5in{\large\bf QUESTION} \\[0.4cm]
So, how many admonition environments does Doconce support?
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: mako_test1.html *****************

<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects that mako must be used -->

<p>
This document is translated to the format html.
<!-- ------------------- end of main content --------------- -->


************** File: mako_test2.html *****************

<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects dangerous lines for mako, -->
<!-- starting with a %, but here it is not crucial since the -->
<!-- running text does not need mako :-) -->

<p>
<!-- begin verbatim block -->
<pre>
/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</pre>
<!-- end verbatim block -->

<p>
And more code:
<!-- begin verbatim block -->
<pre>
% Matlab comment only
...
</pre>
<!-- end verbatim block -->
<!-- ------------------- end of main content --------------- -->


************** File: mako_test3.html *****************

<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects dangerous lines for mako, -->
<!-- starting with a %, and here it is crucial since the -->
<!-- running text does need mako -->

<p>
% if FORMAT == "html":

<p>
<!-- This if test will never be treated by mako: for -->
<!-- mako_test3b.html mako is not run because problems -->
<!-- are detected, and for mako_test3.html we use the -->
<!-- --no-mako command-line option -->

<p>
<!-- begin verbatim block -->
<pre>
/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</pre>
<!-- end verbatim block -->

<p>
% endif

<p>
And more code:
<!-- begin verbatim block -->
<pre>
% Matlab comment only
...
</pre>
<!-- end verbatim block -->
<!-- ------------------- end of main content --------------- -->


************** File: mako_test3b.html *****************

<!-- ------------------- main content ---------------------- -->

<!-- Purpose: see if doconce detects dangerous lines for mako, -->
<!-- starting with a %, and here it is crucial since the -->
<!-- running text does need mako -->

<p>
% if FORMAT == "html":

<p>
<!-- This if test will never be treated by mako: for -->
<!-- mako_test3b.html mako is not run because problems -->
<!-- are detected, and for mako_test3.html we use the -->
<!-- --no-mako command-line option -->

<p>
<!-- begin verbatim block -->
<pre>
/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</pre>
<!-- end verbatim block -->

<p>
% endif

<p>
And more code:
<!-- begin verbatim block -->
<pre>
% Matlab comment only
...
</pre>
<!-- end verbatim block -->
<!-- ------------------- end of main content --------------- -->


************** File: mako_test4.html *****************

<!-- ------------------- main content ---------------------- -->

<!-- Purpose: correct mako_test3.do.txt such that we -->
<!-- can use mako and have lines starting with % -->
<!-- (i.e., the lines must manually be edited to -->
<!-- start with %%) -->

<p>

<!-- begin verbatim block -->
<pre>
/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}
</pre>
<!-- end verbatim block -->

<p>

And more code:
<!-- begin verbatim block -->
<pre>
% Matlab comment only
...
</pre>
<!-- end verbatim block -->
<!-- ------------------- end of main content --------------- -->


************** File: automake_sphinx.py *****************
#!/usr/bin/env python
# Autogenerated file (by doconce sphinx_dir)
# Purpose: create HTML Sphinx version of testdoc

# Command-line arguments are transferred to the doconce format sphinx file
# compilation command

import glob, sys, os, commands, shutil

command_line_options = ' '.join(['"%s"' % arg for arg in sys.argv[1:]])

sphinx_rootdir = 'sphinx-rootdir'

def system(cmd, capture_output=False, echo=True):
    if echo:
        print 'running', cmd
    if capture_output:
        failure, outtext = commands.getstatusoutput(cmd) # Unix/Linux only
    else:
        failure = os.system(cmd)
    if failure:
        print 'Could not run', cmd
        sys.exit(1)
    if capture_output:
        return outtext

# Filter doconce format to sphinx format and copy to sphinx directory
filenames = ['testdoc']
print """

"""
for filename in filenames:
    cmd = 'doconce format sphinx %s %s' % (filename, command_line_options)
    print cmd
    system(cmd)

    # Fix: utf-8 encoding for non-English chars
    cmd = 'doconce guess_encoding %s.rst' % filename
    enc = system(cmd, capture_output=True)
    if enc == "iso-8859-1":
        # sphinx does not like non-English characters in iso-8859-1
        system('doconce change_encoding iso-8859-1 utf-8 %s.rst' % filename)

    # Copy generated sphinx file to sphinx root directory
    shutil.copy('%s.rst' % filename, sphinx_rootdir)

# Copy figures and movies directories
figdirs = glob.glob('fig*') + glob.glob('mov*')
for figdir in figdirs:
    destdir = os.path.join(sphinx_rootdir, figdir)
    if os.path.isdir(figdir) and not os.path.isdir(destdir):
        print 'copying', figdir, 'to', sphinx_rootdir
        shutil.copytree(figdir, destdir)

# Copy needed media files in current dir (not in fig* and mov*)
rst_text = ''
for rstfile in glob.glob('*.rst'):
    rstfile += open(rstfile, 'r').read()
import re
media_files = re.findall('.. figure:: (.+)', rstfile)
media_files = [name for name in media_files
               if not os.sep in name]
for name in media_files:
    print 'copying', name, 'to', sphinx_rootdir
    shutil.copy(name, sphinx_rootdir)

# Copy linked local files, placed in _static*, to sphinx-rootdir/_static
staticdirs = glob.glob('_static*')
for staticdir in staticdirs:
    system('cp -r %s/* sphinx-rootdir/_static/' % staticdir)
    # (Note: must do cp -r since shutil.copy/copytree cannot copy a la cp -r)

# Compile web version of the sphinx document
os.chdir(sphinx_rootdir)
print os.getcwd()
system('make clean')
system('make html')
print """
google-chrome sphinx-rootdir/_build/html/index.html
"""

************** File: .testdoc_html_file_collection *****************
testdoc.html
../doc/manual/figs/streamtubes.png
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
../doc/manual/figs/mjolnir.mpeg
../doc/manual/figs/wavepacket.mpeg
../doc/manual/figs/wavepacket_*.png
._part0000_testdoc.html
._part0001_testdoc.html
._part0002_testdoc.html

************** File: make.sh *****************
#!/bin/sh -x
rm -rf html_images reveal.js downloaded_figures

# Note:  --examples-as-exercises is required to avoid abortion

doconce format html testdoc --wordpress  --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp testdoc.html testdoc_wordpress.html

doconce format html testdoc --without-answers --without-solutions --examples-as-exercises -DSOMEVAR
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp testdoc.html testdoc_no_solutions.html

doconce format latex testdoc --without-answers --without-solutions --examples-as-exercises -DSOMEVAR
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp testdoc.p.tex testdoc_no_solutions.p.tex

doconce format html testdoc.do.txt --pygments-html-linenos --html-style=solarized --pygments-html-style=emacs --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce remove_exercise_answers testdoc.html
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce html_colorbullets testdoc.html
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce split_html testdoc.html
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi


doconce format latex testdoc.do.txt --examples-as-exercises SOMEVAR=True
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format pdflatex testdoc.do.txt --latex-printed --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce latex_exercise_toc testdoc
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce replace 'vspace{1cm} % after toc' 'clearpage % after toc' testdoc.p.tex
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

thpack='\\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section]'
doconce subst '% insert custom LaTeX commands\.\.\.' $thpack testdoc.p.tex
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce subst '\\paragraph\{Theorem \d+\.\}' '' testdoc.p.tex
doconce replace '% begin theorem' '\begin{theorem}' testdoc.p.tex
doconce replace '% end theorem' '\end{theorem}' testdoc.p.tex

ptex2tex -DMINTED -DMOVIE15 -DLATEX_HEADING=titlepage testdoc
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# test that pdflatex works
pdflatex -shell-escape testdoc
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp testdoc.tex testdoc.tex_ptex2tex

# -DBOOK will not work for latex/pdflatex since we have an abstract,
# but here we just use the translated text for testing, not latex compiling
doconce ptex2tex testdoc -DBOOK -DPALATINO sys=\begin{quote}\begin{Verbatim}@\end{Verbatim}\end{quote} pypro=ans:nt envir=minted > testdoc.tex_doconce_ptex2tex
echo "----------- end of doconce ptex2tex output ----------------" >> testdoc.tex_doconce_ptex2tex
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cat testdoc.tex >> testdoc.tex_doconce_ptex2tex

doconce format plain testdoc.do.txt --examples-as-exercises -DSOMEVAR=1
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format st testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format sphinx testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

mv -f testdoc.rst testdoc.sphinx.rst

doconce sphinx_dir author=HPL title='Just a test' version=0.1 theme=agni testdoc
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Note: the chapter heading must be removed
# for successful compilation of the sphinx document.
doconce format rst testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format epytext testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format pandoc testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format mwiki testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format cwiki testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format ipynb testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Test mako variables too
doconce format gwiki testdoc.do.txt --skip_inline_comments MYVAR1=3 MYVAR2='a string' --no-preprocess --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Test pandoc: from latex to markdown, from markdown to html
doconce format latex testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce ptex2tex testdoc -DBOOK -DLATEX_HEADING=traditional
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

#doconce subst -s 'And here is a system of equations with labels.+?\\section' '\\section' testdoc.tex
# pandoc cannot work well with \Verb, needs \verb
doconce replace '\Verb!' '\verb!' testdoc.tex
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

pandoc -f latex -t markdown -o testdoc.md testdoc.tex
pandoc -f markdown -t html -o testdoc_pnd_l2h.html --mathjax -s testdoc.md
pandoc -v >> testdoc_pnd_l2h.html

doconce format pandoc testdoc.do.txt --examples-as-exercises
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi
pandoc -t html -o testdoc_pnd_d2h.html --mathjax -s testdoc.md
pandoc -v >> testdoc_pnd_d2h.html

# Test slides
doconce format html slides --pygments-html-style=emacs
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce slides_html slides reveal --html-slide-type=beigesmall
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

mv -f slides.html slides_reveal.html
/bin/ls -R reveal.js >> slides_reveal.html

doconce format html slides --pygments-html-style=emacs
doconce slides_html slides all
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Test grab
doconce grab --from- '={5} Subsection 1' --to 'subroutine@' testdoc.do.txt > testdoc.tmp
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi
doconce grab --from 'Compute a Probability' --to- 'drawing uniformly' testdoc.do.txt >> testdoc.tmp
doconce grab --from- '\*\s+\$.+normally' testdoc.do.txt >> testdoc.tmp

# Test html templates
doconce format html html_template --html-template=template1.html --no-pygments-html
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp html_template.html html_template1.html

doconce format html html_template --html-template=template_inf1100.html  --pygments-html-style=emacs
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Test author special case and generalized references
doconce format html author1
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format latex author1
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format sphinx author1
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format plain author1
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Test encoding
doconce guess_encoding encoding1.do.txt > tmp_encodings.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp encoding1.do.txt tmp1.do.txt

doconce change_encoding utf-8 latin1 tmp1.do.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce guess_encoding tmp1.do.txt >> tmp_encodings.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce change_encoding latin1 utf-8 tmp1.do.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce guess_encoding tmp1.do.txt >> tmp_encodings.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce guess_encoding encoding2.do.txt >> tmp_encodings.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp encoding1.do.txt tmp2.do.txt

doconce change_encoding utf-8 latin1 tmp2.do.txt
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce guess_encoding tmp2.do.txt >> tmp_encodings.txt

# Test mako problems
doconce format html mako_test1 --no-pygments-html  # mako variable only, no % lines
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format html mako_test2 --no-pygments-html  # % lines inside code, but need for mako
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format html mako_test3 --no-pygments-html  # % lines inside code
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

cp mako_test3.html mako_test3b.html

doconce format html mako_test3 --no-mako --no-pygments-html # no problem message
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

doconce format html mako_test4 --no-pygments-html  # works fine, lines start with %%
if [ $? -ne 0 ]; then echo "make.sh: abort"; exit 1; fi

# Test error detection
doconce format plain failures
cp failures.do.txt tmp2.do.txt
doconce subst 'failure\}\n\n!bc' 'failure}\n\nHello\n!bc' tmp2.do.txt
doconce format rst tmp2
doconce replace '\label' 'label' tmp2.do.txt
doconce replace '\idx' 'idx' tmp2.do.txt
doconce replace '\cite' 'cite' tmp2.do.txt
doconce format rst tmp2
doconce subst -s '__Paragraph before.+!bc' '!bc' tmp2.do.txt
doconce format rst tmp2
doconce replace 'streamtubes width' 'streamtubes,  width' tmp2.do.txt
doconce format rst tmp2
doconce replace '# Comment before math' '' tmp2.do.txt
doconce format rst tmp2
doconce replace '# Comment before list' '' tmp2.do.txt
doconce format rst tmp2



************** File: tmp_Doconce.do.txt *****************

TITLE: My Test of Class Doconce
AUTHOR: Hans Petter Langtangen; Simula Research Laboratory; Dept. of Informatics, Univ. of Oslo
DATE: Jan 32, 2100



======= First Section =======


Here is some
text for section 1.

This is a *first* example of using the _DocWriter
module_ for writing documents from *Python* scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as `fixed width fonts`
in plain text.

===== First Subsection =====

Some text for the subsection.

__Test of a Paragraph.__ 
Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
o item1
o item2

    o subitem1
    o subitem2

o item3

    o subitem3
    o subitem4
...with some trailing text.
=== First Subsubsection with an Itemize List ===


* item1
* item2

    * subitem1
    * subitem2

* item3

    * subitem3
    * subitem4
Here is some Python code:
!bc

class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

!ec

======= Second Section =======

Here is a description list:
- keyword1:  item1
- keyword2:  item2 goes here, with a colon : and some text after

    - key3:  subitem1
    - key4:  subitem2

- key5:  item3

    - key6:  subitem3
    - key7:  subitem4


And here is a table:

   |---------------------------------------|
   | a                 | b                 |
   | c                 | d                 |
   | e                 | and a longer text |
   |---------------------------------------|


************** File: tmp_DocWriter.do.txt *****************

TITLE: My Test of Class DocWriter
AUTHOR: Hans Petter Langtangen; Simula Research Laboratory; Dept. of Informatics, Univ. of Oslo
DATE: Jan 32, 2100



======= First Section =======


Here is some
text for section 1.

This is a *first* example of using the _DocWriter
module_ for writing documents from *Python* scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as `fixed width fonts`
in plain text.

===== First Subsection =====

Some text for the subsection.

__Test of a Paragraph.__ 
Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
o item1
o item2

    o subitem1
    o subitem2

o item3

    o subitem3
    o subitem4
...with some trailing text.
=== First Subsubsection with an Itemize List ===


* item1
* item2

    * subitem1
    * subitem2

* item3

    * subitem3
    * subitem4
Here is some Python code:
!bc

class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

!ec

======= Second Section =======

Here is a description list:
- keyword1:  item1
- keyword2:  item2 goes here, with a colon : and some text after

    - key3:  subitem1
    - key4:  subitem2

- key5:  item3

    - key6:  subitem3
    - key7:  subitem4


And here is a table:

   |---------------------------------------|
   | a                 | b                 |
   | c                 | d                 |
   | e                 | and a longer text |
   |---------------------------------------|


************** File: tmp_DocWriter.html *****************
<!-- HTML document generated by __main__.HTML -->
<html>
<body bgcolor="white">

<title>My Test of Class DocWriter</title>
<center><h1>My Test of Class DocWriter</h1></center>

<center>
<h4>Hans Petter Langtangen</h4>
<h6>Simula Research Laboratory</h6>
<h6>Dept. of Informatics, Univ. of Oslo</h6>
</center>

<center>Wed, 20 Feb 2013 (05:27)</center>



<p>

<h1>First Section</h1>

Here is some
text for section 1.

This is a <em>first</em> example of using the <b>DocWriter
module</b> for writing documents from <em>Python</em> scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as <tt>fixed width fonts</tt>
in plain text.

<h3>First Subsection</h3>
Some text for the subsection.

<p><!-- paragraph with heading -->
<b>Test of a Paragraph.</b>

Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
<ol> <!-- start of "enumerate" list -->
<p><li> item1
<p><li> item2

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ol> <!-- end of "enumerate" list -->
<p><li> item3

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ol> <!-- end of "enumerate" list -->
</ol> <!-- end of "enumerate" list -->
...with some trailing text.
<h4>First Subsubsection with an Itemize List</h4>

<ul> <!-- start of "itemize" list -->
<p><li> item1
<p><li> item2

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ul> <!-- end of "itemize" list -->
<p><li> item3

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ul> <!-- end of "itemize" list -->
</ul> <!-- end of "itemize" list -->
Here is some Python code:
<pre>
class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

</pre>

<h1>Second Section</h1>
Here is a description list:
<dl> <!-- start of "description" list -->
<p><dt>keyword1</dt><dd> item1</dd>
<p><dt>keyword2</dt><dd> item2 goes here, with a colon : and some text after</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key3</dt><dd> subitem1</dd>
    <p><dt>key4</dt><dd> subitem2</dd>
  </dl> <!-- end of "description" list -->
<p><dt>key5</dt><dd> item3</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key6</dt><dd> subitem3</dd>
    <p><dt>key7</dt><dd> subitem4</dd>
  </dl> <!-- end of "description" list -->
</dl> <!-- end of "description" list -->

<p>
And here is a table:
<p>
<table border="2" cellpadding="5" cellspacing="2">
<tr><td>a</td><td>b</td></tr>
<tr><td>c</td><td>d</td></tr>
<tr><td>e</td><td>and a longer text</td></tr>
</table>


</body>
</html>

************** File: tmp_HTML.html *****************
<!-- HTML document generated by __main__.HTML -->
<html>
<body bgcolor="white">

<title>My Test of Class HTML</title>
<center><h1>My Test of Class HTML</h1></center>

<center>
<h4>Hans Petter Langtangen</h4>
<h6>Simula Research Laboratory</h6>
<h6>Dept. of Informatics, Univ. of Oslo</h6>
</center>

<center>Wed, 20 Feb 2013 (05:27)</center>



<p>

<h1>First Section</h1>

Here is some
text for section 1.

This is a <em>first</em> example of using the <b>DocWriter
module</b> for writing documents from <em>Python</em> scripts.
It could be a nice tool since we do not need to bother
with special typesetting, such as <tt>fixed width fonts</tt>
in plain text.

<h3>First Subsection</h3>
Some text for the subsection.

<p><!-- paragraph with heading -->
<b>Test of a Paragraph.</b>

Some paragraph text taken from "Documenting Python": The Python language
has a substantial body of documentation, much of it contributed by various
authors. The markup used for the Python documentation is based on
LaTeX and requires a significant set of macros written specifically
for documenting Python. This document describes the macros introduced
to support Python documentation and how they should be used to support
a wide range of output formats.

This document describes the document classes and special markup used
in the Python documentation. Authors may use this guide, in
conjunction with the template files provided with the distribution, to
create or maintain whole documents or sections.

If you're interested in contributing to Python's documentation,
there's no need to learn LaTeX if you're not so inclined; plain text
contributions are more than welcome as well.
Here is an enumerate list:
<ol> <!-- start of "enumerate" list -->
<p><li> item1
<p><li> item2

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ol> <!-- end of "enumerate" list -->
<p><li> item3

  <ol> <!-- start of "enumerate" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ol> <!-- end of "enumerate" list -->
</ol> <!-- end of "enumerate" list -->
...with some trailing text.
<h4>First Subsubsection with an Itemize List</h4>

<ul> <!-- start of "itemize" list -->
<p><li> item1
<p><li> item2

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem1
    <p><li> subitem2
  </ul> <!-- end of "itemize" list -->
<p><li> item3

  <ul> <!-- start of "itemize" list -->
    <p><li> subitem3
    <p><li> subitem4
  </ul> <!-- end of "itemize" list -->
</ul> <!-- end of "itemize" list -->
Here is some Python code:
<pre>
class A:
    pass

class B(A):
    pass

b = B()
b.item = 0  # create a new attribute

</pre>

<h1>Second Section</h1>
Here is a description list:
<dl> <!-- start of "description" list -->
<p><dt>keyword1</dt><dd> item1</dd>
<p><dt>keyword2</dt><dd> item2 goes here, with a colon : and some text after</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key3</dt><dd> subitem1</dd>
    <p><dt>key4</dt><dd> subitem2</dd>
  </dl> <!-- end of "description" list -->
<p><dt>key5</dt><dd> item3</dd>

  <dl> <!-- start of "description" list -->
    <p><dt>key6</dt><dd> subitem3</dd>
    <p><dt>key7</dt><dd> subitem4</dd>
  </dl> <!-- end of "description" list -->
</dl> <!-- end of "description" list -->

<p>
And here is a table:
<p>
<table border="2" cellpadding="5" cellspacing="2">
<tr><td>a</td><td>b</td></tr>
<tr><td>c</td><td>d</td></tr>
<tr><td>e</td><td>and a longer text</td></tr>
</table>


</body>
</html>

************** File: make.sh *****************
#!/bin/sh -x
sh ./clean.sh

# Make latest bin/doconce doc
doconce > doconce_program.sh

doconce format html quickref --no-pygments-html --no-preprocess

# latex (shpro because of @@@CODE copy, need minted style)
doconce format latex quickref --no-preprocess
doconce ptex2tex quickref -DMINTED -DHELVETICA envir=Verbatim
# cannot run ptex2tex since it always runs preprocess
latex -shell-escape quickref.tex
latex -shell-escape quickref.tex
dvipdf quickref.dvi

# Sphinx
doconce format sphinx quickref --no-preprocess
rm -rf sphinx-rootdir
doconce sphinx_dir author='HPL' version=0.7 quickref
doconce replace 'doconce format sphinx %s' 'doconce format sphinx %s --no-preprocess' automake_sphinx.py
python automake_sphinx.py
cp quickref.rst quickref.sphinx.rst  # save

# reStructuredText:
doconce format rst quickref --no-preprocess
rst2xml.py quickref.rst > quickref.xml
rst2odt.py quickref.rst > quickref.odt
rst2html.py quickref.rst > quickref.rst.html
rst2latex.py quickref.rst > quickref.rst.tex
latex quickref.rst.tex
latex quickref.rst.tex
dvipdf quickref.rst.dvi

# Other formats:
doconce format plain quickref --no-preprocess
doconce format gwiki quickref --no-preprocess
doconce format mwiki quickref --no-preprocess
doconce format cwiki quickref --no-preprocess
doconce format st quickref --no-preprocess
doconce format epytext quickref --no-preprocess
doconce format pandoc quickref --no-preprocess

rm -rf demo
mkdir demo
cp -r quickref.do.txt quickref.html quickref.p.tex quickref.tex quickref.pdf quickref.rst quickref.xml quickref.rst.html quickref.rst.tex quickref.rst.pdf quickref.gwiki quickref.mwiki quickref.cwiki quickref.txt quickref.epytext quickref.st quickref.md sphinx-rootdir/_build/html demo

cd demo
cat > index.html <<EOF
<HTML><BODY>
<TITLE>Demo of Doconce formats</TITLE>
<H3>Doconce demo</H3>

Doconce is a minimum tagged markup language. The file
<a href="quickref.do.txt">quickref.do.txt</a> is the source of the
Doconce quickref, written in the Doconce format.
Running
<pre>
doconce format html quickref.do.txt
</pre>
produces the HTML file <a href="quickref.html">quickref.html</a>.
Going from Doconce to LaTeX is done by
<pre>
doconce format latex quickref.do.txt
</pre>
resulting in the file <a href="quickref.tex">quickref.tex</a>, which can
be compiled to a PDF file <a href="quickref.pdf">quickref.pdf</a>
by running <tt>latex</tt> and <tt>dvipdf</tt> the standard way.
<p>
The reStructuredText (reST) format is of particular interest:
<pre>
doconce format rst    quickref.do.txt  # standard reST
doconce format sphinx quickref.do.txt  # Sphinx extension of reST
</pre>
The reST file <a href="quickref.rst">quickref.rst</a> is a starting point
for conversion to many other formats: OpenOffice,
<a href="quickref.xml">XML</a>, <a href="quickref.rst.html">HTML</a>,
<a href="quickref.rst.tex">LaTeX</a>,
and from LaTeX to <a href="quickref.rst.pdf">PDF</a>.
The <a href="quickref.sphinx.rst">Sphinx</a> dialect of reST
can be translated to <a href="quickref.sphinx.pdf">PDF</a>
and <a href="html/index.html">HTML</a>.
<p>
Doconce can also be converted to
<a href="quickref.gwiki">Googlecode wiki</a>,
<a href="quickref.mwiki">MediaWiki</a>,
<a href="quickref.cwiki">Creole wiki</a>,
<a href="quickref.md">a Pandoc</a>,
<a href="quickref.st">Structured Text</a>,
<a href="quickref.epytext">Epytext</a>,
and maybe the most important format of all:
<a href="quickref.txt">plain untagged ASCII text</a>.
</BODY>
</HTML>
EOF

echo
echo "Go to the demo directory and load index.html into a web browser."

# update demo (recall that there is no .hg dir except in the top dir
# so we can just take an rm and cp)
cd ..
rm -rf ../demos/quickref
cp -r demo ../demos/quickref
# update wiki too
cp quickref.gwiki ../../../doconce.wiki/Quickref.wiki

************** File: quickref.do.txt *****************
TITLE: Doconce Quick Reference
AUTHOR: Hans Petter Langtangen at Simula Research Laboratory and University of Oslo
DATE: today
TOC: on

# Very preliminary

_WARNING: This quick reference is very incomplete!_


===== Supported Formats =====

Doconce currently translates files to the following formats:

 * LaTeX (format `latex` and `pdflatex`)
 * HTML (format `html`)
 * reStructuredText (format `rst`)
 * plain (untagged) ASCII (format `plain`)
 * Sphinx (format `sphinx`)
 * (Pandoc extended) Markdown (format `pandoc`)
 * Googlecode wiki (format `gwiki`)
 * MediaWiki for Wikipedia and Wikibooks (format `mwiki`)
 * Creoloe wiki (format `cwiki`)
 * Epydoc (format `epydoc`)
 * StructuredText (format `st`)

The best supported formats are `latex`, `sphinx`, `html`, and `plain`.

===== Title, Authors, and Date =====

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
!bc
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
!ec
The entire title must appear on a single line.
The author syntax is
!bc
name Email: somename@adr.net at institution1 and institution2
!ec
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from `today` if not the
current date is wanted, e.g., `Feb 22, 2016`.

The table of contents is removed by writing `TOC: off`.


===== Section Types =====
label{quick:sections}

|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
| abstract                | `__Abstract.__` Running text...       |
|-----------------------------------------------------------------|

Note that abstracts are recognized by starting with `__Abstract.__` at
the beginning of a line and ending with three or more `=` signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only `latex` output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

===== Inline Formatting =====

Words surrounded by `*` are emphasized: `*emphasized words*` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: `_boldface_` become _boldface_.

===== Lists =====

There are three types of lists: *bullet lists*, where each item starts
with `*`, *enumeration lists*, where each item starts with `o` and gets
consqutive numbers,
and *description* lists, where each item starts with `-` followed
by a keyword and a colon.
!bc
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
!ec
The code above follows.

Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are indented.
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line


===== Comments =====

Lines starting with `#` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats `rst` and
`sphinx` are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes `##` or by blocks of text
inside the comment directives `%<doc>` (beginning) and `<%doc/>` (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax
!bc
[name: running text]
!ec
where `name` is the name or ID of an author or reader making the comment,
and `running text` is the comment. There must be a space after the colon.
Running
!bc sys
doconce format html mydoc.do.txt --skip_inline_comments
!ec
removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:
!bc sys
doconce remove_inline_comments mydoc.do.txt
!ec
This action is appropriate when all issues with such comments are resolved.

===== Verbatim/Computer Code =====

Inline verbatim code is typeset within back-ticks, as in
!bc
Some sentence with `words in verbatim style`.
!ec
resulting in Some sentence with `words in verbatim style`.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between `!bc xxx` and `!ec` directives, which must appear on the
beginning of the line. A specification `xxx` indicates what verbatim
formatting style that is to be used. Typical values for `xxx` are
nothing, `cod` for a code snippet, `pro` for a complete program,
`sys` for a terminal session, `dat` for a data file (or output from a
program),
`Xpro` or `Xcod` for a program or code snipped, respectively,
in programming `X`, where `X` may be `py` for Python,
`cy` for Cython, `sh` for Bash or other Unix shells,
`f` for Fortran, `c` for C, `cpp` for C++, `m` for MATLAB,
`pl` for Perl. For output in `latex` one can let `xxx` reflect any
defined verbatim environment in the `ptex2tex` configuration file
(`.ptex2tex.cfg`). For `sphinx` output one can insert a comment
!bc
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
!ec
that maps environments (`xxx`) onto valid language types for
Pygments (which is what `sphinx` applies to typeset computer code).

The `xxx` specifier has only effect for `latex` and
`sphinx` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

!bc cod
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
!ec

# When showing copy from file in !bc envir, indent a character - otherwise
# ptex2tex is confused and starts copying...
Computer code can also be copied from a file:
!bc
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
!ec
The `@@@CODE` identifier must appear at the very beginning of the line.
The first specification copies the complete file `doconce_program.sh`.
The second specification copies from the first line matching the *regular
expression* `doconce clean` up to, but not including the line
matching the *regular expression* `^doconce split_rst`.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside `!bc shpro`
and `!ec` directives, if a complete file is copied, while the
directives become `!bc shcod` and `!ec` when a code snippet is copied
from file. In general, for a filename extension `.X`, the environment
becomes `!bc Xpro` or `!bc Xcod` for a complete program or snippet,
respectively. The enivorments (`Xcod` and `Xpro`) are only active
for `latex` and `sphinx` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

===== LaTeX Mathematics =====

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats `sphinx`, `latex`, and `pdflatex`
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
$Ax=b$. To help increase readability in other formats than `sphinx`,
`latex`, and `pdflatex`, inline mathematics may have a more human
readable companion expression. The syntax is like
!bc
$\sin(\norm{\bf u})$|$sin(||u||)$
!ec
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
`!bt`
and
`!et` (begin/end TeX) directives starting on the beginning of a line:

!bc
|bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
|et
!ec
# Note: |bt and |et (and |bc and |ec below) are used to illustrate
# tex and code blocks in inside verbatim blocks and are replaced
# by !bt, !et, !bc, and !ec after all other formatting is finished.
This LaTeX code gets rendered as

!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
Here is a single equation:

!bc
|bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
|et
!ec
which results in

!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et

One can use `#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")`
to let the preprocessor choose a block of mathematics in LaTeX format
or (`#else`) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the `sphinx`, `pandoc`,
`mwiki`, or `html` formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in `latex` or `pdflatex` *and*
the mentioned formats with LaTeX support,
the following rules are recommended:

  * Use only the equation environments `\[`, `\]`,
    `equation`, `equation*`, `align`, and `align*`.
  * Labels in multiple equation environments such as `align` are
    not (yet) handled by `pandoc`.
  * MediaWiki (`mwiki`) does not support references to equations.

!bnotice
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as `sphinx`, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically `if FORMAT in ("latex", "pdflatex")`) to
include special code for `latex` and `pdflatex` output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.
!enotice


__LaTeX Newcommands.__
Text missing...


===== Figures and Movies =====

Figures and movies have almost equal syntax:
!bc
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

!ec
Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
`convert` and `montage` programs from the ImageMagick suite:
!bc sys
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
!ec
Use `+append` for stacking left to right, `-append` for top to bottom.
The positioning of the figures can be controlled by `-gravity`.


===== Tables =====

The table in Section ref{quick:sections} was written with this
syntax:
!bc
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
!ec

Note that

 * Each line begins and ends with a vertical bar (pipe symbol).
 * Column data are separated by a vertical bar (pipe symbol).
 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 * Many output formats are so primitive that heading and column alignment
   have no effect.

===== Labels, References, Citations, and Index =====

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
!bc
label{name}
!ec
with no backslash
preceding the label keyword! It is common practice to choose `name`
as some hierarchical name, say `a:b:c`, where `a` and `b` indicate
some abbreviations for a section and/or subsection for the topic and
`c` is some name for the particular unit that has a label.

A reference to the label `name` is written as
!bc
ref{name}
!ec
again with no backslash before `ref`.

Single citations are written as
!bc
cite{name}
!ec
where `name` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have `name` on the form
`Author1_Author2_YYYY`, `Author_YYYY`, or `Author1_etal_YYYY`, where
`YYYY` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
!bc
cite{name1,name2,name3}
!ec

The bibliography is specified by a line `BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py`, where `name` is the logical name of the
document (the doconce file will then normally have the name
`name.do.txt`), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the `BIBFILE` keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with `ref` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is
!bc
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
!ec
The output from a generalized reference is the text `internal` if all
`ref{label}` references in `internal` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
`latex` or `pdflatex` one assumes that the references in `internal`
are to external documents declared by a comment line `#
Externaldocuments: testdoc, mydoc` (usually after the title, authors,
and date). In this case the output text is `internal cite` and the
LaTeX package `xr` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
`external` text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
!bc
index{name}
!ec
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the `latex`, `rst`, and
`sphinx` formats.

===== Capabilities of the "doconce" Program =====

The `doconce` program can be used for a number of purposes besides
transforming a `.do.txt` file to some format. Here is the
list of capabilities:

@@@CODE doconce_program.sh

===== Exercises =====

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  * a label (optional)
  * a solution file (optional)
  * name of file with a student solution (optional)
  * main exercise text (required)
  * a short answer (optional)
  * a full solution (optional)
  * one or more hints (optional)
  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:
!bc
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
!ec
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

!bc
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
!ec
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

!bc
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

!ec
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments `--without-answers` and `--without-solutions`
turn off output of answers and solutions, respectively, except for
examples.


===== Environments =====

Doconce environments start with `!benvirname` and end with `!eenvirname`,
where `envirname` is the name of the environment. Here is a listing of
the environments:

 * `c`: computer code (or verbatim text)
 * `t`: math blocks with LaTeX syntax
 * `subex`: sub-exercise
 * `ans`: short answer to exercise or sub-exercise
 * `sol`: full solution to exercise or sub-exercise
 * `notes`: multi-line notes to be included or not
 * `quote`: indented text
 * `notice`, `summary`, `warning`, `question`, `hint`: boxes with
    specialy typesetting (or symbols)
 * `pop`: text to gradually pop up in slide presentations
 * `slidecell`: indication of cells in a grid layout for elements on a
   slide


===== Labels, Index, and Citations =====

===== Preprocessing =====

Doconce documents may utilize a preprocessor, either `preprocess` and/or
`mako`. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The `mako` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command `doconce format` first runs `preprocess` and then `mako`.
Here is a typical example on utilizing `preprocess` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

!bc
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
!ec

With the `mako` preprocessor the if-else tests have slightly different syntax.
An "example document": "http://hplgit.github.com/bioinf-py/" contains
some illustrations on how to utilize `mako` (clone the GitHub project and
examine the Doconce source and the `doc/src/make.sh` script).

===== Resources =====

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.html *****************
<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />


<style type="text/css">
    /* Color definitions:  http://www.december.com/html/spec/color0.html
       CSS examples:       http://www.w3schools.com/css/css_examples.asp */

    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    h1 { font-size: 1.8em; color: #1e36ce; }
    h2 { font-size: 1.5em; color: #1e36ce; }
    h3 { color: #1e36ce; }
    a { color: #1e36ce; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    pre { background: #ededed; color: #000; padding: 15px;}
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .notice, .summary, .warning, .hint, .question {
    border: 1px solid; margin: 10px 0px; padding:15px 10px 15px 50px;
    background-repeat: no-repeat; background-position: 10px center;
    }
    .notice   { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png'); }
    .summary  { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .warning  { color: #9F6000; background-color: #FEEFB3;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .hint     { color: #00529B; background-color: #BDE5F8;
                background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .question { color: #4F8A10; background-color: #DFF2BF;
                background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

    .alert {
      padding:8px 35px 8px 14px; margin-bottom:18px;
      color:#c09853; text-shadow:0 1px 0 rgba(255,255,255,0.5);
      background-color:#fcf8e3; border:1px solid #fbeed5;
      -webkit-border-radius:4px; -moz-border-radius:4px;
       border-radius:4px}
     .alert-block {padding-top:14px; padding-bottom:14px}
     .alert-block > p, .alert-block > ul {margin-bottom:0}
     .alert-block p+p {margin-top:5px}
     .alert-notice, .alert-warning, .alert-question, .alert-hint, alert-summary {
       color: #555;
       background-color: whiteSmoke;
       background-position: 10px 10px;
       background-repeat: no-repeat;
       padding-left: 52px;
       font-size: 0.8em;
      }
     .alert-notice { background-image: url(https://doconce.googlecode.com/hg/bundled/html_images/Knob_Message.png); }
    .alert-summary  { background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Valid_Green.png'); }
    .alert-warning { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Attention.png'); }
    .alert-hint { background-image: url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Info.png'); }
    .alert-question {background-image:url('https://doconce.googlecode.com/hg/bundled/html_images/Knob_Forward.png'); }

</style>

</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [(' Supported Formats ', 2, None),
              (' Title, Authors, and Date ', 2, None),
              (' Section Types ', 2, 'quick:sections'),
              (' Inline Formatting ', 2, None),
              (' Lists ', 2, None),
              (' Comments ', 2, None),
              (' Verbatim/Computer Code ', 2, None),
              (' LaTeX Mathematics ', 2, None),
              (' Figures and Movies ', 2, None),
              (' Tables ', 2, None),
              (' Labels, References, Citations, and Index ', 2, None),
              (' Capabilities of the "doconce" Program ', 2, None),
              (' Exercises ', 2, None),
              (' Environments ', 2, None),
              (' Labels, Index, and Citations ', 2, None),
              (' Preprocessing ', 2, None),
              (' Resources ', 2, None)]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">




    
<!-- ------------------- main content ---------------------- -->


<title>Doconce Quick Reference</title>

<center><h1>Doconce Quick Reference</h1></center>  <!-- document title -->

<p>
<!-- author(s) -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>
<!-- institution(s) -->

<center>[1] <b>Simula Research Laboratory</b></center>
<center>[2] <b>University of Oslo</b></center>
<p>
<center><h4>Jan 32, 2100</h4></center> <!-- date -->
<p>
<h2>Table of contents</h2>

<p>

<a href="#___sec0"> Supported Formats </a><br>
<a href="#___sec1"> Title, Authors, and Date </a><br>
<a href="#quick:sections"> Section Types </a><br>
<a href="#___sec3"> Inline Formatting </a><br>
<a href="#___sec4"> Lists </a><br>
<a href="#___sec5"> Comments </a><br>
<a href="#___sec6"> Verbatim/Computer Code </a><br>
<a href="#___sec7"> LaTeX Mathematics </a><br>
<a href="#___sec8"> Figures and Movies </a><br>
<a href="#___sec9"> Tables </a><br>
<a href="#___sec10"> Labels, References, Citations, and Index </a><br>
<a href="#___sec11"> Capabilities of the "doconce" Program </a><br>
<a href="#___sec12"> Exercises </a><br>
<a href="#___sec13"> Environments </a><br>
<a href="#___sec14"> Labels, Index, and Citations </a><br>
<a href="#___sec15"> Preprocessing </a><br>
<a href="#___sec16"> Resources </a><br>

<p>


<!-- Very preliminary -->

<p>
<b>WARNING: This quick reference is very incomplete!</b>

<p>


<h3>Supported Formats  <a name="___sec0"></a></h3>
<p>
Doconce currently translates files to the following formats:

<p>

<ul>
 <li> LaTeX (format <code>latex</code> and <code>pdflatex</code>)</li>
 <li> HTML (format <code>html</code>)</li>
 <li> reStructuredText (format <code>rst</code>)</li>
 <li> plain (untagged) ASCII (format <code>plain</code>)</li>
 <li> Sphinx (format <code>sphinx</code>)</li>
 <li> (Pandoc extended) Markdown (format <code>pandoc</code>)</li>
 <li> Googlecode wiki (format <code>gwiki</code>)</li>
 <li> MediaWiki for Wikipedia and Wikibooks (format <code>mwiki</code>)</li>
 <li> Creoloe wiki (format <code>cwiki</code>)</li>
 <li> Epydoc (format <code>epydoc</code>)</li>
 <li> StructuredText (format <code>st</code>)</li>
</ul>

The best supported formats are <code>latex</code>, <code>sphinx</code>, <code>html</code>, and <code>plain</code>.

<p>

<h3>Title, Authors, and Date  <a name="___sec1"></a></h3>
<p>
A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
<!-- begin verbatim block -->
<pre>
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
</pre>
<!-- end verbatim block -->
The entire title must appear on a single line.
The author syntax is
<!-- begin verbatim block -->
<pre>
name Email: somename@adr.net at institution1 and institution2
</pre>
<!-- end verbatim block -->
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

<p>
The date can be set as any text different from <code>today</code> if not the
current date is wanted, e.g., <code>Feb 22, 2016</code>.

<p>
The table of contents is removed by writing <code>TOC: off</code>.

<p>


<h3>Section Types <a name="quick:sections"></a></h3>
<p>
<table border="1">
<tr><td align="center"><b>                        Section type                        </b></td> <td align="center"><b>                           Syntax                           </b></td> </tr>
<tr><td align="left">   chapter                                                       </td> <td align="left">   <code>========= Heading ========</code> (9 <code>=</code>)    </td> </tr>
<tr><td align="left">   section                                                       </td> <td align="left">   <code>======= Heading =======</code>    (7 <code>=</code>)    </td> </tr>
<tr><td align="left">   subsection                                                    </td> <td align="left">   <code>===== Heading =====</code>        (5 <code>=</code>)    </td> </tr>
<tr><td align="left">   subsubsection                                                 </td> <td align="left">   <code>=== Heading ===</code>            (3 <code>=</code>)    </td> </tr>
<tr><td align="left">   paragraph                                                     </td> <td align="left">   <code>__Heading.__</code>               (2 <code>_</code>)    </td> </tr>
<tr><td align="left">   abstract                                                      </td> <td align="left">   <code>__Abstract.__</code> Running text...                    </td> </tr>
</table>
<p>
Note that abstracts are recognized by starting with <code>__Abstract.__</code> at
the beginning of a line and ending with three or more <code>=</code> signs of the
next heading.

<p>
Appendix is supported: just let the heading start with "Appendix: "
(this affects only <code>latex</code> output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

<p>

<h3>Inline Formatting  <a name="___sec3"></a></h3>
<p>
Words surrounded by <code>*</code> are emphasized: <code>*emphasized words*</code> becomes
<em>emphasized words</em>. Similarly, an underscore surrounds words that
appear in boldface: <code>_boldface_</code> become <b>boldface</b>.

<p>

<h3>Lists  <a name="___sec4"></a></h3>
<p>
There are three types of lists: <em>bullet lists</em>, where each item starts
with <code>*</code>, <em>enumeration lists</em>, where each item starts with <code>o</code> and gets
consqutive numbers,
and <em>description</em> lists, where each item starts with <code>-</code> followed
by a keyword and a colon.
<!-- begin verbatim block -->
<pre>
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
</pre>
<!-- end verbatim block -->
The code above follows.

<p>
Here is a bullet list:

<p>

<ul>
 <li> item1</li>
 <li> item2</li>

<ul>
  <li> subitem1 of item2</li>
  <li> subitem2 of item2</li>
</ul>

 <li> item3</li>
</ul>

Note that sublists are indented.
Here is an enumeration list:

<p>

<ol>
<li> item1</li>
<li> item2
   may appear on
   multiple lines</li>

<ol>
 <li> subitem1 of item2</li>
 <li> subitem2 of item2</li>
</ol>

<li> item3</li>
</ol>

And finally a description list:

<p>

<dl>
 <dt>keyword1:<dd> 
   followed by
   some text
   over multiple
   lines
 <dt>keyword2:<dd> 
   followed by text on the next line
 <dt>keyword3:<dd> 
   and its description may fit on one line
</dl>

<h3>Comments  <a name="___sec5"></a></h3>
<p>
Lines starting with <code>#</code> are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats <code>rst</code> and
<code>sphinx</code> are desired.

<p>
When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes <code>##</code> or by blocks of text
inside the comment directives <code>%<doc></code> (beginning) and <code><%doc/></code> (end).

<p>
Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax
<!-- begin verbatim block -->
<pre>
[name: running text]
</pre>
<!-- end verbatim block -->
where <code>name</code> is the name or ID of an author or reader making the comment,
and <code>running text</code> is the comment. There must be a space after the colon.
Running
<!-- begin verbatim block  sys-->
<pre>
doconce format html mydoc.do.txt --skip_inline_comments
</pre>
<!-- end verbatim block -->
removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

<p>
All inline comments to readers can also be physically
removed from the Doconce source if desired:
<!-- begin verbatim block  sys-->
<pre>
doconce remove_inline_comments mydoc.do.txt
</pre>
<!-- end verbatim block -->
This action is appropriate when all issues with such comments are resolved.

<p>

<h3>Verbatim/Computer Code  <a name="___sec6"></a></h3>
<p>
Inline verbatim code is typeset within back-ticks, as in
<!-- begin verbatim block -->
<pre>
Some sentence with `words in verbatim style`.
</pre>
<!-- end verbatim block -->
resulting in Some sentence with <code>words in verbatim style</code>.

<p>
Multi-line blocks of verbatim text, typically computer code, is typeset
in between <code>!bc xxx</code> and <code>!ec</code> directives, which must appear on the
beginning of the line. A specification <code>xxx</code> indicates what verbatim
formatting style that is to be used. Typical values for <code>xxx</code> are
nothing, <code>cod</code> for a code snippet, <code>pro</code> for a complete program,
<code>sys</code> for a terminal session, <code>dat</code> for a data file (or output from a
program),
<code>Xpro</code> or <code>Xcod</code> for a program or code snipped, respectively,
in programming <code>X</code>, where <code>X</code> may be <code>py</code> for Python,
<code>cy</code> for Cython, <code>sh</code> for Bash or other Unix shells,
<code>f</code> for Fortran, <code>c</code> for C, <code>cpp</code> for C++, <code>m</code> for MATLAB,
<code>pl</code> for Perl. For output in <code>latex</code> one can let <code>xxx</code> reflect any
defined verbatim environment in the <code>ptex2tex</code> configuration file
(<code>.ptex2tex.cfg</code>). For <code>sphinx</code> output one can insert a comment
<!-- begin verbatim block -->
<pre>
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
</pre>
<!-- end verbatim block -->
that maps environments (<code>xxx</code>) onto valid language types for
Pygments (which is what <code>sphinx</code> applies to typeset computer code).

<p>
The <code>xxx</code> specifier has only effect for <code>latex</code> and
<code>sphinx</code> output. All other formats use a fixed monospace font for all
kinds of verbatim output.

<p>
Here is an example of computer code (see the source of this document
for exact syntax):

<p>
<!-- begin verbatim block  cod-->
<pre>
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
</pre>
<!-- end verbatim block -->

<p>
<!-- When showing copy from file in !bc envir, indent a character - otherwise -->
<!-- ptex2tex is confused and starts copying... -->
Computer code can also be copied from a file:
<!-- begin verbatim block -->
<pre>
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
</pre>
<!-- end verbatim block -->
The <code>@@@CODE</code> identifier must appear at the very beginning of the line.
The first specification copies the complete file <code>doconce_program.sh</code>.
The second specification copies from the first line matching the <em>regular
expression</em> <code>doconce clean</code> up to, but not including the line
matching the <em>regular expression</em> <code>^doconce split_rst</code>.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

<p>
The copied line from file are in this example put inside <code>!bc shpro</code>
and <code>!ec</code> directives, if a complete file is copied, while the
directives become <code>!bc shcod</code> and <code>!ec</code> when a code snippet is copied
from file. In general, for a filename extension <code>.X</code>, the environment
becomes <code>!bc Xpro</code> or <code>!bc Xcod</code> for a complete program or snippet,
respectively. The enivorments (<code>Xcod</code> and <code>Xpro</code>) are only active
for <code>latex</code> and <code>sphinx</code> outout.

<p>
Important warnings:

<p>

<ul>
 <li> A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.</li>
 <li> Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.</li>
</ul>

<h3>LaTeX Mathematics  <a name="___sec7"></a></h3>
<p>
Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats <code>sphinx</code>, <code>latex</code>, and <code>pdflatex</code>
work with this syntax while all other formats will just display the
raw LaTeX code.

<p>
Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
\( Ax=b \). To help increase readability in other formats than <code>sphinx</code>,
<code>latex</code>, and <code>pdflatex</code>, inline mathematics may have a more human
readable companion expression. The syntax is like
<!-- begin verbatim block -->
<pre>
$\sin(\norm{\bf u})$|$sin(||u||)$
</pre>
<!-- end verbatim block -->
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

<p>
Blocks of LaTeX mathematics are written within
<code>!bt</code>
and
<code>!et</code> (begin/end TeX) directives starting on the beginning of a line:

<p>
<!-- begin verbatim block -->
<pre>
!bt
\begin{align*}
\nabla\cdot \pmb{u} &amp;= 0,\\
\nabla\times \pmb{u} &amp;= 0.
\end{align*}
!et
</pre>
<!-- end verbatim block -->
<!-- Note: !bt and !et (and !bc and !ec below) are used to illustrate -->
<!-- tex and code blocks in inside verbatim blocks and are replaced -->
<!-- by !bt, !et, !bc, and !ec after all other formatting is finished. -->
This LaTeX code gets rendered as

<p>
$$
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
$$

Here is a single equation:

<p>
<!-- begin verbatim block -->
<pre>
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
</pre>
<!-- end verbatim block -->
which results in

<p>
$$ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.$$


<p>
One can use <code>#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")</code>
to let the preprocessor choose a block of mathematics in LaTeX format
or (<code>#else</code>) a modified form more suited for plain text and wiki
formats without support for mathematics.

<p>
Any LaTeX syntax is accepted, but if output in the <code>sphinx</code>, <code>pandoc</code>,
<code>mwiki</code>, or <code>html</code> formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in <code>latex</code> or <code>pdflatex</code> <em>and</em>
the mentioned formats with LaTeX support,
the following rules are recommended:

<p>

<ul>
  <li> Use only the equation environments <code>\[</code>, <code>\]</code>,
    <code>equation</code>, <code>equation*</code>, <code>align</code>, and <code>align*</code>.</li>
  <li> Labels in multiple equation environments such as <code>align</code> are
    not (yet) handled by <code>pandoc</code>.</li>
  <li> MediaWiki (<code>mwiki</code>) does not support references to equations.</li>
</ul>


<table width="95%" border="0">
<tr>
<td width="25" align="center" valign="top">
<img src="https://doconce.googlecode.com/hg/bundled/html_images/lyx_notice.png" hspace="5" alt="Notice"></td>
<th align="left" valign="middle"><b>Notice</b></th>
</tr>
<tr><td>&nbsp;</td> <td align="left" valign="top"><p>
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as <code>sphinx</code>, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically <code>if FORMAT in ("latex", "pdflatex")</code>) to
include special code for <code>latex</code> and <code>pdflatex</code> output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.
</p></td></tr>
</table>
<p>

<b>LaTeX Newcommands.</b>
Text missing...

<p>


<h3>Figures and Movies  <a name="___sec8"></a></h3>
<p>
Figures and movies have almost equal syntax:
<!-- begin verbatim block -->
<pre>
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

</pre>
<!-- end verbatim block -->
Note the mandatory comma after the figure/movie file.

<p>
The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

<p>
Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

<p>
Combining several image files into one can be done by the
<code>convert</code> and <code>montage</code> programs from the ImageMagick suite:
<!-- begin verbatim block  sys-->
<pre>
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
</pre>
<!-- end verbatim block -->
Use <code>+append</code> for stacking left to right, <code>-append</code> for top to bottom.
The positioning of the figures can be controlled by <code>-gravity</code>.

<p>


<h3>Tables  <a name="___sec9"></a></h3>
<p>
The table in the section <a href="#quick:sections">Section Types</a> was written with this
syntax:
<!-- begin verbatim block -->
<pre>
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
</pre>
<!-- end verbatim block -->

<p>
Note that

<p>

<ul>
 <li> Each line begins and ends with a vertical bar (pipe symbol).</li>
 <li> Column data are separated by a vertical bar (pipe symbol).</li>
 <li> There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).</li>
 <li> If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.</li>
 <li> Many output formats are so primitive that heading and column alignment
   have no effect.</li>
</ul>

<h3>Labels, References, Citations, and Index  <a name="___sec10"></a></h3>
<p>
The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
<!-- begin verbatim block -->
<pre>
label{name}
</pre>
<!-- end verbatim block -->
with no backslash
preceding the label keyword! It is common practice to choose <code>name</code>
as some hierarchical name, say <code>a:b:c</code>, where <code>a</code> and <code>b</code> indicate
some abbreviations for a section and/or subsection for the topic and
<code>c</code> is some name for the particular unit that has a label.

<p>
A reference to the label <code>name</code> is written as
<!-- begin verbatim block -->
<pre>
ref{name}
</pre>
<!-- end verbatim block -->
again with no backslash before <code>ref</code>.

<p>
Single citations are written as
<!-- begin verbatim block -->
<pre>
cite{name}
</pre>
<!-- end verbatim block -->
where <code>name</code> is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have <code>name</code> on the form
<code>Author1_Author2_YYYY</code>, <code>Author_YYYY</code>, or <code>Author1_etal_YYYY</code>, where
<code>YYYY</code> is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
<!-- begin verbatim block -->
<pre>
cite{name1,name2,name3}
</pre>
<!-- end verbatim block -->

<p>
The bibliography is specified by a line <code>BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py</code>, where <code>name</code> is the logical name of the
document (the doconce file will then normally have the name
<code>name.do.txt</code>), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the <code>BIBFILE</code> keyword appears.

<p>
There is a <em>generalized referencing</em> feature in Doconce that allows
a reference with <code>ref</code> to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is
<!-- begin verbatim block -->
<pre>
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a &quot;section&quot;:
&quot;testdoc.html#___sec2&quot; in the document
&quot;A Document for Testing Doconce&quot;: &quot;testdoc.html&quot; cite{testdoc:12}],
Doconce documents may include movies.
</pre>
<!-- end verbatim block -->
The output from a generalized reference is the text <code>internal</code> if all
<code>ref{label}</code> references in <code>internal</code> are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
<code>latex</code> or <code>pdflatex</code> one assumes that the references in <code>internal</code>
are to external documents declared by a comment line <code>#
Externaldocuments: testdoc, mydoc</code> (usually after the title, authors,
and date). In this case the output text is <code>internal cite</code> and the
LaTeX package <code>xr</code> is used to handle the labels in the external
documents.  If none of the two situations above applies, the
<code>external</code> text will be the output.

<p>
Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
<!-- begin verbatim block -->
<pre>
index{name}
</pre>
<!-- end verbatim block -->
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the <code>latex</code>, <code>rst</code>, and
<code>sphinx</code> formats.

<p>

<h3>Capabilities of the "doconce" Program  <a name="___sec11"></a></h3>
<p>
The <code>doconce</code> program can be used for a number of purposes besides
transforming a <code>.do.txt</code> file to some format. Here is the
list of capabilities:

<p>
<!-- begin verbatim block  shpro-->
<pre>
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title=&quot;Short title&quot; version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version &gt;= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce split_rst complete_file.rst

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# remove answers to exercises
doconce remove_exercise_answers file_in_some_format

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile
</pre>
<!-- end verbatim block -->

<p>

<h3>Exercises  <a name="___sec12"></a></h3>
<p>
Doconce supports <em>Exercise</em>, <em>Problem</em>, <em>Project</em>, and <em>Example</em>.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain <em>elements</em>:

<p>

<ul>
  <li> a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)</li>
  <li> a label (optional)</li>
  <li> a solution file (optional)</li>
  <li> name of file with a student solution (optional)</li>
  <li> main exercise text (required)</li>
  <li> a short answer (optional)</li>
  <li> a full solution (optional)</li>
  <li> one or more hints (optional)</li>
  <li> one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)</li>
</ul>

A typical sketch of a a problem without subexercises goes as follows:
<!-- begin verbatim block -->
<pre>
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
&quot;Wolframalpha&quot;: &quot;http://wolframalpha.com&quot; can perhaps
compute the integral.
!ehint
</pre>
<!-- end verbatim block -->
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

<p>
<!-- begin verbatim block -->
<pre>
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
</pre>
<!-- end verbatim block -->
the title becomes just "Derive the ...".

<p>
An exercise with subproblems, answers and full solutions has this
setup-up:

<p>
<!-- begin verbatim block -->
<pre>
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

</pre>
<!-- end verbatim block -->
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments <code>--without-answers</code> and <code>--without-solutions</code>
turn off output of answers and solutions, respectively, except for
examples.

<p>


<h3>Environments  <a name="___sec13"></a></h3>
<p>
Doconce environments start with <code>!benvirname</code> and end with <code>!eenvirname</code>,
where <code>envirname</code> is the name of the environment. Here is a listing of
the environments:

<p>

<ul>
 <li> <code>c</code>: computer code (or verbatim text)</li>
 <li> <code>t</code>: math blocks with LaTeX syntax</li>
 <li> <code>subex</code>: sub-exercise</li>
 <li> <code>ans</code>: short answer to exercise or sub-exercise</li>
 <li> <code>sol</code>: full solution to exercise or sub-exercise</li>
 <li> <code>notes</code>: multi-line notes to be included or not</li>
 <li> <code>quote</code>: indented text</li>
 <li> <code>notice</code>, <code>summary</code>, <code>warning</code>, <code>question</code>, <code>hint</code>: boxes with
    specialy typesetting (or symbols)</li>
 <li> <code>pop</code>: text to gradually pop up in slide presentations</li>
 <li> <code>slidecell</code>: indication of cells in a grid layout for elements on a
   slide</li>
</ul>

<h3>Labels, Index, and Citations  <a name="___sec14"></a></h3>
<p>

<h3>Preprocessing  <a name="___sec15"></a></h3>
<p>
Doconce documents may utilize a preprocessor, either <code>preprocess</code> and/or
<code>mako</code>. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The <code>mako</code> preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

<p>
The command <code>doconce format</code> first runs <code>preprocess</code> and then <code>mako</code>.
Here is a typical example on utilizing <code>preprocess</code> to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

<p>
<!-- begin verbatim block -->
<pre>
# #include &quot;myotherdoc.do.txt&quot;

# #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} &amp; \multicolumn{1}{c}{velocity} &amp; \multicolumn{1}{c}{acceleration} \\
\hline
0.0          &amp; 1.4186       &amp; -5.01        \\
2.0          &amp; 1.376512     &amp; 11.919       \\
4.0          &amp; 1.1E+1       &amp; 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
</pre>
<!-- end verbatim block -->

<p>
With the <code>mako</code> preprocessor the if-else tests have slightly different syntax.
An <a href="http://hplgit.github.com/bioinf-py/">example document</a> contains
some illustrations on how to utilize <code>mako</code> (clone the GitHub project and
examine the Doconce source and the <code>doc/src/make.sh</code> script).

<p>

<h3>Resources  <a name="___sec16"></a></h3>
<p>

<ul>
 <li> Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"</li>
</ul>

<!-- ------------------- end of main content --------------- -->


</body>
</html>
    


************** File: quickref.p.tex *****************
%%
%% Automatically generated file from Doconce source
%% (http://code.google.com/p/doconce/)
%%
% #ifdef PTEX2TEX_EXPLANATION
%%
%% The file follows the ptex2tex extended LaTeX format, see
%% ptex2tex: http://code.google.com/p/ptex2tex/
%%
%% Run
%%      ptex2tex myfile
%% or
%%      doconce ptex2tex myfile
%%
%% to turn myfile.p.tex into an ordinary LaTeX file myfile.tex.
%% (The ptex2tex program: http://code.google.com/p/ptex2tex)
%% Many preprocess options can be added to ptex2tex or doconce ptex2tex
%%
%%      ptex2tex -DBOOK -DMINTED -DPALATINO -DA6PAPER -DLATEX_HEADING=traditional myfile
%%      doconce ptex2tex myfile -DMINTED -DLATEX_HEADING=Springer-collection
%%
%% ptex2tex will typeset code environments according to a global or local
%% .ptex2tex.cfg configure file. doconce ptex2tex will typeset code
%% according to command-line arguments (type doconce ptex2tex to see examples).
% #endif

% #ifndef LATEX_HEADING
% #define LATEX_HEADING
% #endif

% #ifndef PREAMBLE
% #if LATEX_HEADING == "Springer-collection"
% #undef PREAMBLE
% #else
% #define PREAMBLE
% #endif
% #endif


% #ifdef PREAMBLE
%-------------------- begin preamble ----------------------
% #ifdef BOOK
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
chapterprefix=true,      % "Chapter" word at beginning of each chapter
open=right               % start new chapters on odd-numbered pages
10pt]{book}
% #else
\documentclass[%
oneside,                 % oneside: electronic viewing, twoside: printing
final,                   % or draft (marks overfull hboxes)
10pt]{article}
% #endif

\listfiles               % print all files needed to compile this document

% #ifdef A4PAPER
\usepackage[a4paper]{geometry}
% #endif
% #ifdef A6PAPER
% a6paper is suitable for epub-style formats
\usepackage[%
  a6paper,
  text={90mm,130mm},
  inner={5mm},              % inner margin (two-sided documents)
  top=5mm,
  headsep=4mm
  ]{geometry}
% #endif


\usepackage{relsize,epsfig,makeidx,amsmath,amsfonts}
\usepackage[latin1]{inputenc}
\usepackage{ptex2tex}
% #ifdef MINTED
\usepackage{minted}  % requires latex/pdflatex -shell-escape (to run pygments)
\usemintedstyle{default}
% #endif

% #ifdef HELVETICA
% Set helvetica as the default font family:
\RequirePackage{helvet}
\renewcommand\familydefault{phv}
% #endif
% #ifdef PALATINO
% Set palatino as the default font family:
\usepackage[sc]{mathpazo}    % Palatino fonts
\linespread{1.05}            % Palatino needs extra line spread to look nice
% #endif

% Hyperlinks in PDF:
\usepackage[%
    colorlinks=true,
    linkcolor=black,
    %linkcolor=blue,
    citecolor=black,
    filecolor=black,
    %filecolor=blue,
    urlcolor=black,
    pdfmenubar=true,
    pdftoolbar=true,
    urlcolor=black,
    %urlcolor=blue,
    bookmarksdepth=3   % Uncomment (and tweak) for PDF bookmarks with more levels than the TOC
            ]{hyperref}
%\hyperbaseurl{}   % hyperlinks are relative to this root

\setcounter{tocdepth}{2}

% Tricks for having figures close to where they are defined:
% 1. define less restrictive rules for where to put figures
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{2}
\setcounter{totalnumber}{4}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.85}
\renewcommand{\textfraction}{0.15}
\renewcommand{\floatpagefraction}{0.7}
% 2. ensure all figures are flushed before next section
\usepackage[section]{placeins}
% 3. enable begin{figure}[H] (often leads to ugly pagebreaks)
%\usepackage{float}\restylefloat{figure}

\newenvironment{exercise}{}{}
\newcounter{exerno}

\newcommand{\inlinecomment}[2]{  ({\bf #1}: \emph{#2})  }
%\newcommand{\inlinecomment}[2]{}  % turn off inline comments


% insert custom LaTeX commands...

\makeindex

%-------------------- end preamble ----------------------

\begin{document}

% #endif


% ------------------- main content ----------------------



% ----------------- title -------------------------
% #if LATEX_HEADING == "traditional"

\title{Doconce Quick Reference}

% #elif LATEX_HEADING == "titlepage"

\thispagestyle{empty}
\hbox{\ \ }
\vfill
\begin{center}
{\huge{\bfseries{Doconce Quick Reference}}}

% #elif LATEX_HEADING == "Springer-collection"

\title*{Doconce Quick Reference}
% Short version of title:
%\titlerunning{...}

% #else

\begin{center}
{\LARGE\bf Doconce Quick Reference}
\end{center}

% #endif



% ----------------- author(s) -------------------------
% #if LATEX_HEADING == "traditional"
\author{Hans Petter Langtangen\footnote{Simula Research Laboratory and University of Oslo.}}

% #elif LATEX_HEADING == "titlepage"
\vspace{1.3cm}

    {\Large\textsf{Hans Petter Langtangen${}^{1, 2}$}}\\ [3mm]
    
\ \\ [2mm]

{\large\textsf{${}^1$Simula Research Laboratory} \\ [1.5mm]}
{\large\textsf{${}^2$University of Oslo} \\ [1.5mm]}
% #elif LATEX_HEADING == "Springer-collection"

\author{Hans Petter Langtangen}
% Short version of authors:
%\authorrunning{...}
\institute{Hans Petter Langtangen\at Simula Research Laboratory and University of Oslo}

% #else

\begin{center}
{\bf Hans Petter Langtangen${}^{1, 2}$} \\ [0mm]
\end{center}

\begin{center}
% List of all institutions:
\centerline{{\small ${}^1$Simula Research Laboratory}}
\centerline{{\small ${}^2$University of Oslo}}
\end{center}
% #endif
% ----------------- end author(s) -------------------------


% ----------------- date -------------------------

% #if LATEX_HEADING == "traditional"

\date{Jan 32, 2100}
\maketitle

% #elif LATEX_HEADING == "titlepage"

\ \\ [10mm]
{\large\textsf{Jan 32, 2100}}

\end{center}
\vfill
\clearpage

% #else

\begin{center}
Jan 32, 2100
\end{center}

\vspace{1cm}

% #endif


\tableofcontents

\vspace{1cm} % after toc





% Very preliminary

\textbf{WARNING: This quick reference is very incomplete!}

\subsection{Supported Formats}

Doconce currently translates files to the following formats:

\begin{itemize}
 \item {\LaTeX} (format \code{latex} and \code{pdflatex})

 \item HTML (format \code{html})

 \item reStructuredText (format \code{rst})

 \item plain (untagged) ASCII (format \code{plain})

 \item Sphinx (format \code{sphinx})

 \item (Pandoc extended) Markdown (format \code{pandoc})

 \item Googlecode wiki (format \code{gwiki})

 \item MediaWiki for Wikipedia and Wikibooks (format \code{mwiki})

 \item Creoloe wiki (format \code{cwiki})

 \item Epydoc (format \code{epydoc})

 \item StructuredText (format \code{st})
\end{itemize}

\noindent
The best supported formats are \code{latex}, \code{sphinx}, \code{html}, and \code{plain}.

\subsection{Title, Authors, and Date}

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
\bccq
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
\eccq
The entire title must appear on a single line.
The author syntax is
\bccq
name Email: somename@adr.net at institution1 and institution2
\eccq
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from \code{today} if not the
current date is wanted, e.g., \code{Feb 22, 2016}.

The table of contents is removed by writing \code{TOC: off}.

\subsection{Section Types}

\label{quick:sections}


\begin{quote}\begin{tabular}{ll}
\hline
\multicolumn{1}{c}{ Section type } & \multicolumn{1}{c}{ Syntax } \\
\hline
chapter                                        & \code{========= Heading ========} (9 \code{=}) \\
section                                        & \code{======= Heading =======}    (7 \code{=}) \\
subsection                                     & \code{===== Heading =====}        (5 \code{=}) \\
subsubsection                                  & \code{=== Heading ===}            (3 \code{=}) \\
paragraph                                      & \code{__Heading.__}               (2 \code{_}) \\
abstract                                       & \code{__Abstract.__} Running text...           \\
\hline
\end{tabular}\end{quote}

\noindent
Note that abstracts are recognized by starting with \code{__Abstract.__} at
the beginning of a line and ending with three or more \code{=} signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only \code{latex} output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

\subsection{Inline Formatting}

Words surrounded by \code{*} are emphasized: \code{*emphasized words*} becomes
\emph{emphasized words}. Similarly, an underscore surrounds words that
appear in boldface: \code{_boldface_} become \textbf{boldface}.

\subsection{Lists}

There are three types of lists: \emph{bullet lists}, where each item starts
with \code{*}, \emph{enumeration lists}, where each item starts with \code{o} and gets
consqutive numbers,
and \emph{description} lists, where each item starts with \code{-} followed
by a keyword and a colon.
\bccq
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
\eccq
The code above follows.

Here is a bullet list:

\begin{itemize}
 \item item1

 \item item2
\begin{itemize}

  \item subitem1 of item2

  \item subitem2 of item2

\end{itemize}

\noindent
 \item item3
\end{itemize}

\noindent
Note that sublists are indented.
Here is an enumeration list:

\begin{enumerate}
\item item1

\item item2
   may appear on
   multiple lines
\begin{enumerate}

 \item subitem1 of item2

 \item subitem2 of item2

\end{enumerate}

\noindent
\item item3
\end{enumerate}

\noindent
And finally a description list:

\begin{description}
 \item[keyword1:] 
   followed by
   some text
   over multiple
   lines

 \item[keyword2:] 
   followed by text on the next line

 \item[keyword3:] 
   and its description may fit on one line
\end{description}

\noindent

\subsection{Comments}

Lines starting with \code{#} are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before {\LaTeX} math
blocks, verbatim code blocks, or lists if the formats \code{rst} and
\code{sphinx} are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes \code{##} or by blocks of text
inside the comment directives \code{%<doc>} (beginning) and \code{<%doc/>} (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax
\bccq
[name: running text]
\eccq
where \code{name} is the name or ID of an author or reader making the comment,
and \code{running text} is the comment. There must be a space after the colon.
Running
\bsys
doconce format html mydoc.do.txt --skip_inline_comments
\esys
removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:
\bsys
doconce remove_inline_comments mydoc.do.txt
\esys
This action is appropriate when all issues with such comments are resolved.

\subsection{Verbatim/Computer Code}

Inline verbatim code is typeset within back-ticks, as in
\bccq
Some sentence with `words in verbatim style`.
\eccq
resulting in Some sentence with \code{words in verbatim style}.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between \code{!bc xxx} and \code{!ec} directives, which must appear on the
beginning of the line. A specification \code{xxx} indicates what verbatim
formatting style that is to be used. Typical values for \code{xxx} are
nothing, \code{cod} for a code snippet, \code{pro} for a complete program,
\code{sys} for a terminal session, \code{dat} for a data file (or output from a
program),
\code{Xpro} or \code{Xcod} for a program or code snipped, respectively,
in programming \code{X}, where \code{X} may be \code{py} for Python,
\code{cy} for Cython, \code{sh} for Bash or other Unix shells,
\code{f} for Fortran, \code{c} for C, \code{cpp} for C++, \code{m} for MATLAB,
\code{pl} for Perl. For output in \code{latex} one can let \code{xxx} reflect any
defined verbatim environment in the \code{ptex2tex} configuration file
(\code{.ptex2tex.cfg}). For \code{sphinx} output one can insert a comment
\bccq
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
\eccq
that maps environments (\code{xxx}) onto valid language types for
Pygments (which is what \code{sphinx} applies to typeset computer code).

The \code{xxx} specifier has only effect for \code{latex} and
\code{sphinx} output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

\bcod
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
\ecod

% When showing copy from file in !bc envir, indent a character - otherwise
% ptex2tex is confused and starts copying...
Computer code can also be copied from a file:
\bccq
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
\eccq
The \code{@@@CODE} identifier must appear at the very beginning of the line.
The first specification copies the complete file \code{doconce_program.sh}.
The second specification copies from the first line matching the \emph{regular
expression} \code{doconce clean} up to, but not including the line
matching the \emph{regular expression} \code{^doconce split_rst}.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside \code{!bc shpro}
and \code{!ec} directives, if a complete file is copied, while the
directives become \code{!bc shcod} and \code{!ec} when a code snippet is copied
from file. In general, for a filename extension \code{.X}, the environment
becomes \code{!bc Xpro} or \code{!bc Xcod} for a complete program or snippet,
respectively. The enivorments (\code{Xcod} and \code{Xpro}) are only active
for \code{latex} and \code{sphinx} outout.

Important warnings:

\begin{itemize}
 \item A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 \item Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.
\end{itemize}

\noindent

\subsection{{\LaTeX} Mathematics}

Doconce supports inline mathematics and blocks of mathematics, using
standard {\LaTeX} syntax. The output formats \code{sphinx}, \code{latex}, and \code{pdflatex}
work with this syntax while all other formats will just display the
raw {\LaTeX} code.

Inline expressions are written in the standard
{\LaTeX} way with the mathematics surrounded by dollar signs, as in
$Ax=b$. To help increase readability in other formats than \code{sphinx},
\code{latex}, and \code{pdflatex}, inline mathematics may have a more human
readable companion expression. The syntax is like
\bccq
$\sin(\norm{\bf u})$|$sin(||u||)$
\eccq
That is, the {\LaTeX} expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of {\LaTeX} mathematics are written within
\code{!bt}
and
\code{!et} (begin/end TeX) directives starting on the beginning of a line:

\bccq
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
\eccq
% Note: !bt and !et (and !bc and !ec below) are used to illustrate
% tex and code blocks in inside verbatim blocks and are replaced
% by !bt, !et, !bc, and !ec after all other formatting is finished.
This {\LaTeX} code gets rendered as

\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
Here is a single equation:

\bccq
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
\eccq
which results in

\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]

One can use \code{#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")}
to let the preprocessor choose a block of mathematics in {\LaTeX} format
or (\code{#else}) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any {\LaTeX} syntax is accepted, but if output in the \code{sphinx}, \code{pandoc},
\code{mwiki}, or \code{html} formats
is important, one must know that these formats does not support many
{\LaTeX} constructs. For output both in \code{latex} or \code{pdflatex} \emph{and}
the mentioned formats with {\LaTeX} support,
the following rules are recommended:

\begin{itemize}
  \item Use only the equation environments \code{\[}, \code{\]},
    \code{equation}, \code{equation*}, \code{align}, and \code{align*}.

  \item Labels in multiple equation environments such as \code{align} are
    not (yet) handled by \code{pandoc}.

  \item MediaWiki (\code{mwiki}) does not support references to equations.
\end{itemize}

\noindent

\definecolor{noticebackground}{rgb}{0.988235, 0.964706, 0.862745}
\setlength{\fboxrule}{2pt}
\begin{center}
\fcolorbox{black}{noticebackground}{
\begin{minipage}{0.8\textwidth}
\includegraphics[height=0.3in]{latex_figs/notice.eps}
\vskip-0.3in\hskip1.5in{\large\bf NOTICE} \\[0.4cm]
{\LaTeX} supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as \code{sphinx}, makes it necessary
to only utilze very standard {\LaTeX} and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically \code{if FORMAT in ("latex", "pdflatex")}) to
include special code for \code{latex} and \code{pdflatex} output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced {\LaTeX} features and fine tuning of resulting
PDF document.
\end{minipage}}
\end{center}
\setlength{\fboxrule}{0.4pt} % Back to default
\paragraph{LaTeX Newcommands.}
Text missing...

\subsection{Figures and Movies}

Figures and movies have almost equal syntax:
\bccq
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

\eccq
Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
\code{convert} and \code{montage} programs from the ImageMagick suite:
\bsys
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
\esys
Use \code{+append} for stacking left to right, \code{-append} for top to bottom.
The positioning of the figures can be controlled by \code{-gravity}.

\subsection{Tables}

The table in Section~\ref{quick:sections} was written with this
syntax:
\bccq
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
\eccq

Note that

\begin{itemize}
 \item Each line begins and ends with a vertical bar (pipe symbol).

 \item Column data are separated by a vertical bar (pipe symbol).

 \item There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 \item If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in {\LaTeX}.

 \item Many output formats are so primitive that heading and column alignment
   have no effect.
\end{itemize}

\noindent

\subsection{Labels, References, Citations, and Index}

The notion of labels, references, citations, and an index is adopted
from {\LaTeX} with a very similar syntax. As in {\LaTeX}, a label can be
inserted anywhere, using the syntax
\bccq
label{name}
\eccq
with no backslash
preceding the label keyword! It is common practice to choose \code{name}
as some hierarchical name, say \code{a:b:c}, where \code{a} and \code{b} indicate
some abbreviations for a section and/or subsection for the topic and
\code{c} is some name for the particular unit that has a label.

A reference to the label \code{name} is written as
\bccq
ref{name}
\eccq
again with no backslash before \code{ref}.

Single citations are written as
\bccq
cite{name}
\eccq
where \code{name} is a logical name
of the reference (again, {\LaTeX} writers must not insert a backslash).
Bibliography citations often have \code{name} on the form
\code{Author1_Author2_YYYY}, \code{Author_YYYY}, or \code{Author1_etal_YYYY}, where
\code{YYYY} is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
\bccq
cite{name1,name2,name3}
\eccq

The bibliography is specified by a line \code{BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py}, where \code{name} is the logical name of the
document (the doconce file will then normally have the name
\code{name.do.txt}), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the \code{BIBFILE} keyword appears.

There is a \emph{generalized referencing} feature in Doconce that allows
a reference with \code{ref} to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is
\bccq
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
\eccq
The output from a generalized reference is the text \code{internal} if all
\code{ref{label}} references in \code{internal} are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
\code{latex} or \code{pdflatex} one assumes that the references in \code{internal}
are to external documents declared by a comment line \code{#
Externaldocuments: testdoc, mydoc} (usually after the title, authors,
and date). In this case the output text is \code{internal cite} and the
{\LaTeX} package \code{xr} is used to handle the labels in the external
documents.  If none of the two situations above applies, the
\code{external} text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
\bccq
index{name}
\eccq
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the \code{latex}, \code{rst}, and
\code{sphinx} formats.

\subsection{Capabilities of the "doconce" Program}

The \code{doconce} program can be used for a number of purposes besides
transforming a \code{.do.txt} file to some format. Here is the
list of capabilities:

\bshpro
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce split_rst complete_file.rst

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# remove answers to exercises
doconce remove_exercise_answers file_in_some_format

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile
\eshpro

\subsection{Exercises}

Doconce supports \emph{Exercise}, \emph{Problem}, \emph{Project}, and \emph{Example}.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain \emph{elements}:

\begin{itemize}
  \item a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  \item a label (optional)

  \item a solution file (optional)

  \item name of file with a student solution (optional)

  \item main exercise text (required)

  \item a short answer (optional)

  \item a full solution (optional)

  \item one or more hints (optional)

  \item one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)
\end{itemize}

\noindent
A typical sketch of a a problem without subexercises goes as follows:
\bccq
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
\eccq
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

\bccq
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
\eccq
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

\bccq
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

\eccq
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments \code{--without-answers} and \code{--without-solutions}
turn off output of answers and solutions, respectively, except for
examples.

\subsection{Environments}

Doconce environments start with \code{!benvirname} and end with \code{!eenvirname},
where \code{envirname} is the name of the environment. Here is a listing of
the environments:

\begin{itemize}
 \item \code{c}: computer code (or verbatim text)

 \item \code{t}: math blocks with {\LaTeX} syntax

 \item \code{subex}: sub-exercise

 \item \code{ans}: short answer to exercise or sub-exercise

 \item \code{sol}: full solution to exercise or sub-exercise

 \item \code{notes}: multi-line notes to be included or not

 \item \code{quote}: indented text

 \item \code{notice}, \code{summary}, \code{warning}, \code{question}, \code{hint}: boxes with
    specialy typesetting (or symbols)

 \item \code{pop}: text to gradually pop up in slide presentations

 \item \code{slidecell}: indication of cells in a grid layout for elements on a
   slide
\end{itemize}

\noindent

\subsection{Labels, Index, and Citations}

\subsection{Preprocessing}

Doconce documents may utilize a preprocessor, either \code{preprocess} and/or
\code{mako}. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The \code{mako} preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command \code{doconce format} first runs \code{preprocess} and then \code{mako}.
Here is a typical example on utilizing \code{preprocess} to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

\bccq
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
\eccq

With the \code{mako} preprocessor the if-else tests have slightly different syntax.
An \href{{http://hplgit.github.com/bioinf-py/}}{example document} contains
some illustrations on how to utilize \code{mako} (clone the GitHub project and
examine the Doconce source and the \code{doc/src/make.sh} script).

\subsection{Resources}

\begin{itemize}
 \item Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"
\end{itemize}

\noindent
% ------------------- end of main content ---------------


% #ifdef PREAMBLE
\printindex

\end{document}
% #endif


************** File: quickref.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

Doconce Quick Reference
-----------------------

:Author: Hans Petter Langtangen
:Date: Jan 32, 2100

.. contents:: Table of Contents
   :depth: 2



.. Very preliminary


**WARNING: This quick reference is very incomplete!**


Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format ``latex`` and ``pdflatex``)

 * HTML (format ``html``)

 * reStructuredText (format ``rst``)

 * plain (untagged) ASCII (format ``plain``)

 * Sphinx (format ``sphinx``)

 * (Pandoc extended) Markdown (format ``pandoc``)

 * Googlecode wiki (format ``gwiki``)

 * MediaWiki for Wikipedia and Wikibooks (format ``mwiki``)

 * Creoloe wiki (format ``cwiki``)

 * Epydoc (format ``epydoc``)

 * StructuredText (format ``st``)

The best supported formats are ``latex``, ``sphinx``, ``html``, and ``plain``.

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 and institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from ``today`` if not the
current date is wanted, e.g., ``Feb 22, 2016``.

The table of contents is removed by writing ``TOC: off``.


.. _quick:sections:

Section Types
-------------

========================================  ========================================  
              Section type                                 Syntax                   
========================================  ========================================  
chapter                                   ``========= Heading ========`` (9 ``=``)  
section                                   ``======= Heading =======``    (7 ``=``)  
subsection                                ``===== Heading =====``        (5 ``=``)  
subsubsection                             ``=== Heading ===``            (3 ``=``)  
paragraph                                 ``__Heading.__``               (2 ``_``)  
abstract                                  ``__Abstract.__`` Running text...         
========================================  ========================================  

Note that abstracts are recognized by starting with ``__Abstract.__`` at
the beginning of a line and ending with three or more ``=`` signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only ``latex`` output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

Inline Formatting
-----------------

Words surrounded by ``*`` are emphasized: ``*emphasized words*`` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: ``_boldface_`` become **boldface**.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with ``*``, *enumeration lists*, where each item starts with ``o`` and gets
consqutive numbers,
and *description* lists, where each item starts with ``-`` followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1: 
   followed by
   some text
   over multiple
   lines

 keyword2: 
   followed by text on the next line

 keyword3: 
   and its description may fit on one line

Comments
--------

Lines starting with ``#`` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats ``rst`` and
``sphinx`` are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes ``##`` or by blocks of text
inside the comment directives ``%<doc>`` (beginning) and ``<%doc/>`` (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax::


        [name: running text]

where ``name`` is the name or ID of an author or reader making the comment,
and ``running text`` is the comment. There must be a space after the colon.
Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired::


        doconce remove_inline_comments mydoc.do.txt

This action is appropriate when all issues with such comments are resolved.

Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with ``words in verbatim style``.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between ``!bc xxx`` and ``!ec`` directives, which must appear on the
beginning of the line. A specification ``xxx`` indicates what verbatim
formatting style that is to be used. Typical values for ``xxx`` are
nothing, ``cod`` for a code snippet, ``pro`` for a complete program,
``sys`` for a terminal session, ``dat`` for a data file (or output from a
program),
``Xpro`` or ``Xcod`` for a program or code snipped, respectively,
in programming ``X``, where ``X`` may be ``py`` for Python,
``cy`` for Cython, ``sh`` for Bash or other Unix shells,
``f`` for Fortran, ``c`` for C, ``cpp`` for C++, ``m`` for MATLAB,
``pl`` for Perl. For output in ``latex`` one can let ``xxx`` reflect any
defined verbatim environment in the ``ptex2tex`` configuration file
(``.ptex2tex.cfg``). For ``sphinx`` output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (``xxx``) onto valid language types for
Pygments (which is what ``sphinx`` applies to typeset computer code).

The ``xxx`` specifier has only effect for ``latex`` and
``sphinx`` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


.. When showing copy from file in !bc envir, indent a character - otherwise

.. ptex2tex is confused and starts copying...

Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The ``@@@CODE`` identifier must appear at the very beginning of the line.
The first specification copies the complete file ``doconce_program.sh``.
The second specification copies from the first line matching the *regular
expression* ``doconce clean`` up to, but not including the line
matching the *regular expression* ``^doconce split_rst``.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside ``!bc shpro``
and ``!ec`` directives, if a complete file is copied, while the
directives become ``!bc shcod`` and ``!ec`` when a code snippet is copied
from file. In general, for a filename extension ``.X``, the environment
becomes ``!bc Xpro`` or ``!bc Xcod`` for a complete program or snippet,
respectively. The enivorments (``Xcod`` and ``Xpro``) are only active
for ``latex`` and ``sphinx`` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats ``sphinx``, ``latex``, and ``pdflatex``
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
Ax=b. To help increase readability in other formats than ``sphinx``,
``latex``, and ``pdflatex``, inline mathematics may have a more human
readable companion expression. The syntax is like::


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
``!bt``
and
``!et`` (begin/end TeX) directives starting on the beginning of a line::


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et

.. Note: !bt and !et (and !bc and !ec below) are used to illustrate

.. tex and code blocks in inside verbatim blocks and are replaced

.. by !bt, !et, !bc, and !ec after all other formatting is finished.

This LaTeX code gets rendered as::

        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}

Here is a single equation::


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in::

        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]


One can use ``#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")``
to let the preprocessor choose a block of mathematics in LaTeX format
or (``#else``) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the ``sphinx``, ``pandoc``,
``mwiki``, or ``html`` formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in ``latex`` or ``pdflatex`` *and*
the mentioned formats with LaTeX support,
the following rules are recommended:

  * Use only the equation environments ``\[``, ``\]``,
    ``equation``, ``equation*``, ``align``, and ``align*``.

  * Labels in multiple equation environments such as ``align`` are
    not (yet) handled by ``pandoc``.

  * MediaWiki (``mwiki``) does not support references to equations.


.. note::
   LaTeX supports lots of fancy formatting, for example, multiple
   plots in the same figure, footnotes, margin notes, etc.
   Allowing other output formats, such as ``sphinx``, makes it necessary
   to only utilze very standard LaTeX and avoid, for instance, more than
   one plot per figure. However, one can use preprocessor if-tests on
   the format (typically ``if FORMAT in ("latex", "pdflatex")``) to
   include special code for ``latex`` and ``pdflatex`` output and more
   straightforward typesetting for other formats. In this way, one can
   also allow advanced LaTeX features and fine tuning of resulting
   PDF document.

*LaTeX Newcommands.* Text missing...


Figures and Movies
------------------

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
``convert`` and ``montage`` programs from the ImageMagick suite::


        montage file1.png file2.png ... file4.png -geometry +2+2  result.png
        montage file1.png file2.png -tile x1 result.png
        montage file1.png file2.png -tile 1x result.png
        
        convert -background white file1.png file2.png +append tmp.png

Use ``+append`` for stacking left to right, ``-append`` for top to bottom.
The positioning of the figures can be controlled by ``-gravity``.


Tables
------

The table in the section `Section Types`_ was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

Labels, References, Citations, and Index
----------------------------------------

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword! It is common practice to choose ``name``
as some hierarchical name, say ``a:b:c``, where ``a`` and ``b`` indicate
some abbreviations for a section and/or subsection for the topic and
``c`` is some name for the particular unit that has a label.

A reference to the label ``name`` is written as::


        ref{name}

again with no backslash before ``ref``.

Single citations are written as::


        cite{name}

where ``name`` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have ``name`` on the form
``Author1_Author2_YYYY``, ``Author_YYYY``, or ``Author1_etal_YYYY``, where
``YYYY`` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line ``BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py``, where ``name`` is the logical name of the
document (the doconce file will then normally have the name
``name.do.txt``), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the ``BIBFILE`` keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with ``ref`` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text ``internal`` if all
``label`_` references in ``internal`` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
``latex`` or ``pdflatex`` one assumes that the references in ``internal``
are to external documents declared by a comment line ``#
Externaldocuments: testdoc, mydoc`` (usually after the title, authors,
and date). In this case the output text is ``internal cite`` and the
LaTeX package ``xr`` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
``external`` text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the ``latex``, ``rst``, and
``sphinx`` formats.

Capabilities of the "doconce" Program
-------------------------------------

The ``doconce`` program can be used for a number of purposes besides
transforming a ``.do.txt`` file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce split_rst complete_file.rst
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # remove answers to exercises
        doconce remove_exercise_answers file_in_some_format
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile


Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments ``--without-answers`` and ``--without-solutions``
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with ``!benvirname`` and end with ``!eenvirname``,
where ``envirname`` is the name of the environment. Here is a listing of
the environments:

 * ``c``: computer code (or verbatim text)

 * ``t``: math blocks with LaTeX syntax

 * ``subex``: sub-exercise

 * ``ans``: short answer to exercise or sub-exercise

 * ``sol``: full solution to exercise or sub-exercise

 * ``notes``: multi-line notes to be included or not

 * ``quote``: indented text

 * ``notice``, ``summary``, ``warning``, ``question``, ``hint``: boxes with
    specialy typesetting (or symbols)

 * ``pop``: text to gradually pop up in slide presentations

 * ``slidecell``: indication of cells in a grid layout for elements on a
   slide

Labels, Index, and Citations
----------------------------

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either ``preprocess`` and/or
``mako``. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The ``mako`` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command ``doconce format`` first runs ``preprocess`` and then ``mako``.
Here is a typical example on utilizing ``preprocess`` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
        \hline
        0.0          & 1.4186       & -5.01        \\
        2.0          & 1.376512     & 11.919       \\
        4.0          & 1.1E+1       & 14.717624    \\
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the ``mako`` preprocessor the if-else tests have slightly different syntax.
An `example document <http://hplgit.github.com/bioinf-py/>`_ contains
some illustrations on how to utilize ``mako`` (clone the GitHub project and
examine the Doconce source and the ``doc/src/make.sh`` script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"

************** File: quickref.sphinx.rst *****************
.. Automatically generated reST file from Doconce source
   (http://code.google.com/p/doconce/)

Doconce Quick Reference
-----------------------

:Author: Hans Petter Langtangen
:Date: Jan 32, 2100

.. Very preliminary


**WARNING: This quick reference is very incomplete!**


Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format ``latex`` and ``pdflatex``)

 * HTML (format ``html``)

 * reStructuredText (format ``rst``)

 * plain (untagged) ASCII (format ``plain``)

 * Sphinx (format ``sphinx``)

 * (Pandoc extended) Markdown (format ``pandoc``)

 * Googlecode wiki (format ``gwiki``)

 * MediaWiki for Wikipedia and Wikibooks (format ``mwiki``)

 * Creoloe wiki (format ``cwiki``)

 * Epydoc (format ``epydoc``)

 * StructuredText (format ``st``)

The best supported formats are ``latex``, ``sphinx``, ``html``, and ``plain``.

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads

.. code-block:: text


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is

.. code-block:: text


        name Email: somename@adr.net at institution1 and institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from ``today`` if not the
current date is wanted, e.g., ``Feb 22, 2016``.

The table of contents is removed by writing ``TOC: off``.


.. _quick:sections:

Section Types
-------------

========================================  ========================================  
              Section type                                 Syntax                   
========================================  ========================================  
chapter                                   ``========= Heading ========`` (9 ``=``)  
section                                   ``======= Heading =======``    (7 ``=``)  
subsection                                ``===== Heading =====``        (5 ``=``)  
subsubsection                             ``=== Heading ===``            (3 ``=``)  
paragraph                                 ``__Heading.__``               (2 ``_``)  
abstract                                  ``__Abstract.__`` Running text...         
========================================  ========================================  

Note that abstracts are recognized by starting with ``__Abstract.__`` at
the beginning of a line and ending with three or more ``=`` signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only ``latex`` output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

Inline Formatting
-----------------

Words surrounded by ``*`` are emphasized: ``*emphasized words*`` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: ``_boldface_`` become **boldface**.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with ``*``, *enumeration lists*, where each item starts with ``o`` and gets
consqutive numbers,
and *description* lists, where each item starts with ``-`` followed
by a keyword and a colon.

.. code-block:: text


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1: 
   followed by
   some text
   over multiple
   lines

 keyword2: 
   followed by text on the next line

 keyword3: 
   and its description may fit on one line

Comments
--------

Lines starting with ``#`` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats ``rst`` and
``sphinx`` are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes ``##`` or by blocks of text
inside the comment directives ``%<doc>`` (beginning) and ``<%doc/>`` (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax

.. code-block:: text


        [name: running text]

where ``name`` is the name or ID of an author or reader making the comment,
and ``running text`` is the comment. There must be a space after the colon.
Running

.. code-block:: console

        doconce format html mydoc.do.txt --skip_inline_comments

removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:

.. code-block:: console

        doconce remove_inline_comments mydoc.do.txt

This action is appropriate when all issues with such comments are resolved.

Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in

.. code-block:: text


        Some sentence with `words in verbatim style`.

resulting in Some sentence with ``words in verbatim style``.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between ``!bc xxx`` and ``!ec`` directives, which must appear on the
beginning of the line. A specification ``xxx`` indicates what verbatim
formatting style that is to be used. Typical values for ``xxx`` are
nothing, ``cod`` for a code snippet, ``pro`` for a complete program,
``sys`` for a terminal session, ``dat`` for a data file (or output from a
program),
``Xpro`` or ``Xcod`` for a program or code snipped, respectively,
in programming ``X``, where ``X`` may be ``py`` for Python,
``cy`` for Cython, ``sh`` for Bash or other Unix shells,
``f`` for Fortran, ``c`` for C, ``cpp`` for C++, ``m`` for MATLAB,
``pl`` for Perl. For output in ``latex`` one can let ``xxx`` reflect any
defined verbatim environment in the ``ptex2tex`` configuration file
(``.ptex2tex.cfg``). For ``sphinx`` output one can insert a comment

.. code-block:: text


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (``xxx``) onto valid language types for
Pygments (which is what ``sphinx`` applies to typeset computer code).

The ``xxx`` specifier has only effect for ``latex`` and
``sphinx`` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):


.. code-block:: python

        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


.. When showing copy from file in !bc envir, indent a character - otherwise

.. ptex2tex is confused and starts copying...

Computer code can also be copied from a file:

.. code-block:: text


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The ``@@@CODE`` identifier must appear at the very beginning of the line.
The first specification copies the complete file ``doconce_program.sh``.
The second specification copies from the first line matching the *regular
expression* ``doconce clean`` up to, but not including the line
matching the *regular expression* ``^doconce split_rst``.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside ``!bc shpro``
and ``!ec`` directives, if a complete file is copied, while the
directives become ``!bc shcod`` and ``!ec`` when a code snippet is copied
from file. In general, for a filename extension ``.X``, the environment
becomes ``!bc Xpro`` or ``!bc Xcod`` for a complete program or snippet,
respectively. The enivorments (``Xcod`` and ``Xpro``) are only active
for ``latex`` and ``sphinx`` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats ``sphinx``, ``latex``, and ``pdflatex``
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
:math:`Ax=b`. To help increase readability in other formats than ``sphinx``,
``latex``, and ``pdflatex``, inline mathematics may have a more human
readable companion expression. The syntax is like

.. code-block:: text


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
``!bt``
and
``!et`` (begin/end TeX) directives starting on the beginning of a line:


.. code-block:: text


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et

.. Note: !bt and !et (and !bc and !ec below) are used to illustrate

.. tex and code blocks in inside verbatim blocks and are replaced

.. by !bt, !et, !bc, and !ec after all other formatting is finished.

This LaTeX code gets rendered as


.. math::
        
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        

Here is a single equation:


.. code-block:: text


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in


.. math::
         \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.


One can use ``#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")``
to let the preprocessor choose a block of mathematics in LaTeX format
or (``#else``) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the ``sphinx``, ``pandoc``,
``mwiki``, or ``html`` formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in ``latex`` or ``pdflatex`` *and*
the mentioned formats with LaTeX support,
the following rules are recommended:

  * Use only the equation environments ``\[``, ``\]``,
    ``equation``, ``equation*``, ``align``, and ``align*``.

  * Labels in multiple equation environments such as ``align`` are
    not (yet) handled by ``pandoc``.

  * MediaWiki (``mwiki``) does not support references to equations.


.. note::
   LaTeX supports lots of fancy formatting, for example, multiple
   plots in the same figure, footnotes, margin notes, etc.
   Allowing other output formats, such as ``sphinx``, makes it necessary
   to only utilze very standard LaTeX and avoid, for instance, more than
   one plot per figure. However, one can use preprocessor if-tests on
   the format (typically ``if FORMAT in ("latex", "pdflatex")``) to
   include special code for ``latex`` and ``pdflatex`` output and more
   straightforward typesetting for other formats. In this way, one can
   also allow advanced LaTeX features and fine tuning of resulting
   PDF document.

*LaTeX Newcommands.* Text missing...


Figures and Movies
------------------

Figures and movies have almost equal syntax:

.. code-block:: text


        FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
``convert`` and ``montage`` programs from the ImageMagick suite:

.. code-block:: console

        montage file1.png file2.png ... file4.png -geometry +2+2  result.png
        montage file1.png file2.png -tile x1 result.png
        montage file1.png file2.png -tile 1x result.png
        
        convert -background white file1.png file2.png +append tmp.png

Use ``+append`` for stacking left to right, ``-append`` for top to bottom.
The positioning of the figures can be controlled by ``-gravity``.


Tables
------

The table in the section :ref:`quick:sections` was written with this
syntax:

.. code-block:: text


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

Labels, References, Citations, and Index
----------------------------------------

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax

.. code-block:: text


        label{name}

with no backslash
preceding the label keyword! It is common practice to choose ``name``
as some hierarchical name, say ``a:b:c``, where ``a`` and ``b`` indicate
some abbreviations for a section and/or subsection for the topic and
``c`` is some name for the particular unit that has a label.

A reference to the label ``name`` is written as

.. code-block:: text


        ref{name}

again with no backslash before ``ref``.

Single citations are written as

.. code-block:: text


        cite{name}

where ``name`` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have ``name`` on the form
``Author1_Author2_YYYY``, ``Author_YYYY``, or ``Author1_etal_YYYY``, where
``YYYY`` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:

.. code-block:: text


        cite{name1,name2,name3}


The bibliography is specified by a line ``BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py``, where ``name`` is the logical name of the
document (the doconce file will then normally have the name
``name.do.txt``), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the ``BIBFILE`` keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with ``ref`` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is

.. code-block:: text


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text ``internal`` if all
`:ref:`label`` references in ``internal`` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
``latex`` or ``pdflatex`` one assumes that the references in ``internal``
are to external documents declared by a comment line ``#
Externaldocuments: testdoc, mydoc`` (usually after the title, authors,
and date). In this case the output text is ``internal cite`` and the
LaTeX package ``xr`` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
``external`` text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)

.. code-block:: text


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the ``latex``, ``rst``, and
``sphinx`` formats.

Capabilities of the "doconce" Program
-------------------------------------

The ``doconce`` program can be used for a number of purposes besides
transforming a ``.do.txt`` file to some format. Here is the
list of capabilities:


.. code-block:: bash

        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce split_rst complete_file.rst
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # remove answers to exercises
        doconce remove_exercise_answers file_in_some_format
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile


Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:

.. code-block:: text


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads


.. code-block:: text


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:


.. code-block:: text


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments ``--without-answers`` and ``--without-solutions``
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with ``!benvirname`` and end with ``!eenvirname``,
where ``envirname`` is the name of the environment. Here is a listing of
the environments:

 * ``c``: computer code (or verbatim text)

 * ``t``: math blocks with LaTeX syntax

 * ``subex``: sub-exercise

 * ``ans``: short answer to exercise or sub-exercise

 * ``sol``: full solution to exercise or sub-exercise

 * ``notes``: multi-line notes to be included or not

 * ``quote``: indented text

 * ``notice``, ``summary``, ``warning``, ``question``, ``hint``: boxes with
    specialy typesetting (or symbols)

 * ``pop``: text to gradually pop up in slide presentations

 * ``slidecell``: indication of cells in a grid layout for elements on a
   slide

Labels, Index, and Citations
----------------------------

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either ``preprocess`` and/or
``mako``. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The ``mako`` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command ``doconce format`` first runs ``preprocess`` and then ``mako``.
Here is a typical example on utilizing ``preprocess`` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:


.. code-block:: text


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
        \hline
        0.0          & 1.4186       & -5.01        \\
        2.0          & 1.376512     & 11.919       \\
        4.0          & 1.1E+1       & 14.717624    \\
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the ``mako`` preprocessor the if-else tests have slightly different syntax.
An `example document <http://hplgit.github.com/bioinf-py/>`_ contains
some illustrations on how to utilize ``mako`` (clone the GitHub project and
examine the Doconce source and the ``doc/src/make.sh`` script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"

************** File: quickref.gwiki *****************
#summary Doconce Quick Reference

By *Hans Petter Langtangen*

==== Jan 32, 2100 ====

<wiki: toc max_depth="2" />



<wiki:comment> Very preliminary </wiki:comment>

*WARNING: This quick reference is very incomplete!*

==== Supported Formats ====

Doconce currently translates files to the following formats:


 * LaTeX (format `latex` and `pdflatex`)
 * HTML (format `html`)
 * reStructuredText (format `rst`)
 * plain (untagged) ASCII (format `plain`)
 * Sphinx (format `sphinx`)
 * (Pandoc extended) Markdown (format `pandoc`)
 * Googlecode wiki (format `gwiki`)
 * MediaWiki for Wikipedia and Wikibooks (format `mwiki`)
 * Creoloe wiki (format `cwiki`)
 * Epydoc (format `epydoc`)
 * StructuredText (format `st`)

The best supported formats are `latex`, `sphinx`, `html`, and `plain`.

==== Title, Authors, and Date ====

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
{{{
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
}}}
The entire title must appear on a single line.
The author syntax is
{{{
name Email: somename@adr.net at institution1 and institution2
}}}
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from `today` if not the
current date is wanted, e.g., `Feb 22, 2016`.

The table of contents is removed by writing `TOC: off`.

==== Section Types ====

 ||              *Section type*               ||                 *Syntax*                  ||
 ||  chapter                                  ||  `========= Heading ========` (9 `=`)     ||
 ||  section                                  ||  `======= Heading =======`    (7 `=`)     ||
 ||  subsection                               ||  `===== Heading =====`        (5 `=`)     ||
 ||  subsubsection                            ||  `=== Heading ===`            (3 `=`)     ||
 ||  paragraph                                ||  `__Heading.__`               (2 `_`)     ||
 ||  abstract                                 ||  `__Abstract.__` Running text...          ||


Note that abstracts are recognized by starting with `__Abstract.__` at
the beginning of a line and ending with three or more `=` signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only `latex` output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

==== Inline Formatting ====

Words surrounded by `*` are emphasized: `*emphasized words*` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: `_boldface_` become *boldface*.

==== Lists ====

There are three types of lists: *bullet lists*, where each item starts
with `*`, *enumeration lists*, where each item starts with `o` and gets
consqutive numbers,
and *description* lists, where each item starts with `-` followed
by a keyword and a colon.
{{{
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
}}}
The code above follows.

Here is a bullet list:


 * item1
 * item2

  * subitem1 of item2
  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:


# item1
# item2   may appear on   multiple lines

 # subitem1 of item2
 # subitem2 of item2


# item3

And finally a description list:


 * keyword1:  
   followed by   some text   over multiple   lines
 * keyword2:     followed by text on the next line
 * keyword3:  
   and its description may fit on one line

==== Comments ====

Lines starting with `#` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats `rst` and
`sphinx` are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes `##` or by blocks of text
inside the comment directives `%<doc>` (beginning) and `<%doc/>` (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax
{{{
[name: running text]
}}}
where `name` is the name or ID of an author or reader making the comment,
and `running text` is the comment. There must be a space after the colon.
Running
{{{
doconce format html mydoc.do.txt --skip_inline_comments
}}}
removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:
{{{
doconce remove_inline_comments mydoc.do.txt
}}}
This action is appropriate when all issues with such comments are resolved.

==== Verbatim/Computer Code ====

Inline verbatim code is typeset within back-ticks, as in
{{{
Some sentence with `words in verbatim style`.
}}}
resulting in Some sentence with `words in verbatim style`.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between `!bc xxx` and `!ec` directives, which must appear on the
beginning of the line. A specification `xxx` indicates what verbatim
formatting style that is to be used. Typical values for `xxx` are
nothing, `cod` for a code snippet, `pro` for a complete program,
`sys` for a terminal session, `dat` for a data file (or output from a
program),
`Xpro` or `Xcod` for a program or code snipped, respectively,
in programming `X`, where `X` may be `py` for Python,
`cy` for Cython, `sh` for Bash or other Unix shells,
`f` for Fortran, `c` for C, `cpp` for C++, `m` for MATLAB,
`pl` for Perl. For output in `latex` one can let `xxx` reflect any
defined verbatim environment in the `ptex2tex` configuration file
(`.ptex2tex.cfg`). For `sphinx` output one can insert a comment
{{{
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
}}}
that maps environments (`xxx`) onto valid language types for
Pygments (which is what `sphinx` applies to typeset computer code).

The `xxx` specifier has only effect for `latex` and
`sphinx` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

{{{
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
}}}

<wiki:comment> When showing copy from file in !bc envir, indent a character - otherwise </wiki:comment>
<wiki:comment> ptex2tex is confused and starts copying... </wiki:comment>
Computer code can also be copied from a file:
{{{
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
}}}
The `@@@CODE` identifier must appear at the very beginning of the line.
The first specification copies the complete file `doconce_program.sh`.
The second specification copies from the first line matching the *regular
expression* `doconce clean` up to, but not including the line
matching the *regular expression* `^doconce split_rst`.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside `!bc shpro`
and `!ec` directives, if a complete file is copied, while the
directives become `!bc shcod` and `!ec` when a code snippet is copied
from file. In general, for a filename extension `.X`, the environment
becomes `!bc Xpro` or `!bc Xcod` for a complete program or snippet,
respectively. The enivorments (`Xcod` and `Xpro`) are only active
for `latex` and `sphinx` outout.

Important warnings:


 * A code block must come after some plain sentence (at least for successful   output in reStructredText), not directly after a section/paragraph heading,   table, comment, figure, or movie.
 * Verbatim code blocks inside lists can be ugly typeset in some   output formats. A more robust approach is to replace the list by   paragraphs with headings.

==== LaTeX Mathematics ====

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats `sphinx`, `latex`, and `pdflatex`
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
`Ax=b`. To help increase readability in other formats than `sphinx`,
`latex`, and `pdflatex`, inline mathematics may have a more human
readable companion expression. The syntax is like
{{{
$\sin(\norm{\bf u})$|$sin(||u||)$
}}}
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
`!bt`
and
`!et` (begin/end TeX) directives starting on the beginning of a line:

{{{
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
}}}
<wiki:comment> Note: !bt and !et (and !bc and !ec below) are used to illustrate </wiki:comment>
<wiki:comment> tex and code blocks in inside verbatim blocks and are replaced </wiki:comment>
<wiki:comment> by !bt, !et, !bc, and !ec after all other formatting is finished. </wiki:comment>
This LaTeX code gets rendered as

{{{
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
}}}
Here is a single equation:

{{{
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
}}}
which results in

{{{
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
}}}

One can use `#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")`
to let the preprocessor choose a block of mathematics in LaTeX format
or (`#else`) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the `sphinx`, `pandoc`,
`mwiki`, or `html` formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in `latex` or `pdflatex` *and*
the mentioned formats with LaTeX support,
the following rules are recommended:


  * Use only the equation environments `\[`, `\]`,    `equation`, `equation*`, `align`, and `align*`.
  * Labels in multiple equation environments such as `align` are    not (yet) handled by `pandoc`.
  * MediaWiki (`mwiki`) does not support references to equations.



*Notice.* LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as `sphinx`, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically `if FORMAT in ("latex", "pdflatex")`) to
include special code for `latex` and `pdflatex` output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* Text missing...

==== Figures and Movies ====

Figures and movies have almost equal syntax:
{{{
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

}}}
Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
`convert` and `montage` programs from the ImageMagick suite:
{{{
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
}}}
Use `+append` for stacking left to right, `-append` for top to bottom.
The positioning of the figures can be controlled by `-gravity`.

==== Tables ====

The table in the section [#Section_Types] was written with this
syntax:
{{{
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
}}}

Note that


 * Each line begins and ends with a vertical bar (pipe symbol).
 * Column data are separated by a vertical bar (pipe symbol).
 * There may be horizontal rules, i.e., lines with dashes for   indicating the heading and the end of the table, and these may   contain characters 'c', 'l', or 'r' for how to align headings or   columns. The first horizontal rule may indicate how to align   headings (center, left, right), and the horizontal rule after the   heading line may indicate how to align the data in the columns   (center, left, right).
 * If the horizontal rules are without alignment information there should   be no vertical bar (pipe symbol) between the columns. Otherwise, such   a bar indicates a vertical bar between columns in LaTeX.
 * Many output formats are so primitive that heading and column alignment   have no effect.

==== Labels, References, Citations, and Index ====

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
{{{
label{name}
}}}
with no backslash
preceding the label keyword! It is common practice to choose `name`
as some hierarchical name, say `a:b:c`, where `a` and `b` indicate
some abbreviations for a section and/or subsection for the topic and
`c` is some name for the particular unit that has a label.

A reference to the label `name` is written as
{{{
ref{name}
}}}
again with no backslash before `ref`.

Single citations are written as
{{{
cite{name}
}}}
where `name` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have `name` on the form
`Author1_Author2_YYYY`, `Author_YYYY`, or `Author1_etal_YYYY`, where
`YYYY` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
{{{
cite{name1,name2,name3}
}}}

The bibliography is specified by a line `BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py`, where `name` is the logical name of the
document (the doconce file will then normally have the name
`name.do.txt`), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the `BIBFILE` keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with `ref` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is
{{{
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
}}}
The output from a generalized reference is the text `internal` if all
`label` references in `internal` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
`latex` or `pdflatex` one assumes that the references in `internal`
are to external documents declared by a comment line `#
Externaldocuments: testdoc, mydoc` (usually after the title, authors,
and date). In this case the output text is `internal cite` and the
LaTeX package `xr` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
`external` text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
{{{
index{name}
}}}
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the `latex`, `rst`, and
`sphinx` formats.

==== Capabilities of the "doconce" Program ====

The `doconce` program can be used for a number of purposes besides
transforming a `.do.txt` file to some format. Here is the
list of capabilities:

{{{
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce split_rst complete_file.rst

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# remove answers to exercises
doconce remove_exercise_answers file_in_some_format

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile
}}}

==== Exercises ====

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:


  * a headline at the level of a subsection    containing one of the words "Exercise:", "Problem:",    "Project:", or "Example:", followed by a title (required)
  * a label (optional)
  * a solution file (optional)
  * name of file with a student solution (optional)
  * main exercise text (required)
  * a short answer (optional)
  * a full solution (optional)
  * one or more hints (optional)
  * one or more subexercises (subproblems, subprojects), which can also    contain a text, a short answer, a full solution, name student file    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:
{{{
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
}}}
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

{{{
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
}}}
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

{{{
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

}}}
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments `--without-answers` and `--without-solutions`
turn off output of answers and solutions, respectively, except for
examples.

==== Environments ====

Doconce environments start with `!benvirname` and end with `!eenvirname`,
where `envirname` is the name of the environment. Here is a listing of
the environments:


 * `c`: computer code (or verbatim text)
 * `t`: math blocks with LaTeX syntax
 * `subex`: sub-exercise
 * `ans`: short answer to exercise or sub-exercise
 * `sol`: full solution to exercise or sub-exercise
 * `notes`: multi-line notes to be included or not
 * `quote`: indented text
 * `notice`, `summary`, `warning`, `question`, `hint`: boxes with    specialy typesetting (or symbols)
 * `pop`: text to gradually pop up in slide presentations
 * `slidecell`: indication of cells in a grid layout for elements on a   slide

==== Labels, Index, and Citations ====

==== Preprocessing ====

Doconce documents may utilize a preprocessor, either `preprocess` and/or
`mako`. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The `mako` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command `doconce format` first runs `preprocess` and then `mako`.
Here is a typical example on utilizing `preprocess` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

{{{
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
}}}

With the `mako` preprocessor the if-else tests have slightly different syntax.
An [http://hplgit.github.com/bioinf-py/ example document] contains
some illustrations on how to utilize `mako` (clone the GitHub project and
examine the Doconce source and the `doc/src/make.sh` script).

==== Resources ====

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.mwiki *****************
#TITLE (actually governed by the filename): Doconce Quick Reference

By '''Hans Petter Langtangen'''

==== Jan 32, 2100 ====

__TOC__



<!-- Very preliminary -->

'''WARNING: This quick reference is very incomplete!'''

==== Supported Formats ====

Doconce currently translates files to the following formats:


<ul>
 <li> LaTeX (format <code>latex</code> and <code>pdflatex</code>)
 <li> HTML (format <code>html</code>)
 <li> reStructuredText (format <code>rst</code>)
 <li> plain (untagged) ASCII (format <code>plain</code>)
 <li> Sphinx (format <code>sphinx</code>)
 <li> (Pandoc extended) Markdown (format <code>pandoc</code>)
 <li> Googlecode wiki (format <code>gwiki</code>)
 <li> MediaWiki for Wikipedia and Wikibooks (format <code>mwiki</code>)
 <li> Creoloe wiki (format <code>cwiki</code>)
 <li> Epydoc (format <code>epydoc</code>)
 <li> StructuredText (format <code>st</code>)
</ul>

The best supported formats are <code>latex</code>, <code>sphinx</code>, <code>html</code>, and <code>plain</code>.

==== Title, Authors, and Date ====

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
<syntaxhighlight lang="text">
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
</syntaxhighlight>
The entire title must appear on a single line.
The author syntax is
<syntaxhighlight lang="text">
name Email: somename@adr.net at institution1 and institution2
</syntaxhighlight>
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from <code>today</code> if not the
current date is wanted, e.g., <code>Feb 22, 2016</code>.

The table of contents is removed by writing <code>TOC: off</code>.

==== Section Types ====

<table border="1">
<tr><td align="center"><b>                        Section type                        </b></td> <td align="center"><b>                           Syntax                           </b></td> </tr>
<tr><td align="left">   chapter                                                       </td> <td align="left">   <code>========= Heading ========</code> (9 <code>=</code>)    </td> </tr>
<tr><td align="left">   section                                                       </td> <td align="left">   <code>======= Heading =======</code>    (7 <code>=</code>)    </td> </tr>
<tr><td align="left">   subsection                                                    </td> <td align="left">   <code>===== Heading =====</code>        (5 <code>=</code>)    </td> </tr>
<tr><td align="left">   subsubsection                                                 </td> <td align="left">   <code>=== Heading ===</code>            (3 <code>=</code>)    </td> </tr>
<tr><td align="left">   paragraph                                                     </td> <td align="left">   <code>__Heading.__</code>               (2 <code>_</code>)    </td> </tr>
<tr><td align="left">   abstract                                                      </td> <td align="left">   <code>__Abstract.__</code> Running text...                    </td> </tr>
</table>
Note that abstracts are recognized by starting with <code>__Abstract.__</code> at
the beginning of a line and ending with three or more <code>=</code> signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only <code>latex</code> output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

==== Inline Formatting ====

Words surrounded by <code>*</code> are emphasized: <code>*emphasized words*</code> becomes
''emphasized words''. Similarly, an underscore surrounds words that
appear in boldface: <code>_boldface_</code> become '''boldface'''.

==== Lists ====

There are three types of lists: ''bullet lists'', where each item starts
with <code>*</code>, ''enumeration lists'', where each item starts with <code>o</code> and gets
consqutive numbers,
and ''description'' lists, where each item starts with <code>-</code> followed
by a keyword and a colon.
<syntaxhighlight lang="text">
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
</syntaxhighlight>
The code above follows.

Here is a bullet list:


<ul>
 <li> item1
 <li> item2

<ul>
  <li><li> subitem1 of item2
  <li><li> subitem2 of item2
</ul>

 <li> item3
</ul>

Note that sublists are indented.
Here is an enumeration list:


<ol>
<li> item1
<li> item2
   may appear on
   multiple lines

<ol>
 <li><li> subitem1 of item2
 <li><li> subitem2 of item2
</ol>

<li> item3
</ol>

And finally a description list:


<dl>
 <dt>keyword1:<dd> 
   followed by
   some text
   over multiple
   lines
 <dt>keyword2:<dd> 
   followed by text on the next line
 <dt>keyword3:<dd> 
   and its description may fit on one line
</dl>

==== Comments ====

Lines starting with <code>#</code> are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats <code>rst</code> and
<code>sphinx</code> are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes <code>##</code> or by blocks of text
inside the comment directives <code>%<doc></code> (beginning) and <code><%doc/></code> (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax
<syntaxhighlight lang="text">
[name: running text]
</syntaxhighlight>
where <code>name</code> is the name or ID of an author or reader making the comment,
and <code>running text</code> is the comment. There must be a space after the colon.
Running
<syntaxhighlight lang="bash">
doconce format html mydoc.do.txt --skip_inline_comments
</syntaxhighlight>
removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:
<syntaxhighlight lang="bash">
doconce remove_inline_comments mydoc.do.txt
</syntaxhighlight>
This action is appropriate when all issues with such comments are resolved.

==== Verbatim/Computer Code ====

Inline verbatim code is typeset within back-ticks, as in
<syntaxhighlight lang="text">
Some sentence with `words in verbatim style`.
</syntaxhighlight>
resulting in Some sentence with <code>words in verbatim style</code>.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between <code>!bc xxx</code> and <code>!ec</code> directives, which must appear on the
beginning of the line. A specification <code>xxx</code> indicates what verbatim
formatting style that is to be used. Typical values for <code>xxx</code> are
nothing, <code>cod</code> for a code snippet, <code>pro</code> for a complete program,
<code>sys</code> for a terminal session, <code>dat</code> for a data file (or output from a
program),
<code>Xpro</code> or <code>Xcod</code> for a program or code snipped, respectively,
in programming <code>X</code>, where <code>X</code> may be <code>py</code> for Python,
<code>cy</code> for Cython, <code>sh</code> for Bash or other Unix shells,
<code>f</code> for Fortran, <code>c</code> for C, <code>cpp</code> for C++, <code>m</code> for MATLAB,
<code>pl</code> for Perl. For output in <code>latex</code> one can let <code>xxx</code> reflect any
defined verbatim environment in the <code>ptex2tex</code> configuration file
(<code>.ptex2tex.cfg</code>). For <code>sphinx</code> output one can insert a comment
<syntaxhighlight lang="text">
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
</syntaxhighlight>
that maps environments (<code>xxx</code>) onto valid language types for
Pygments (which is what <code>sphinx</code> applies to typeset computer code).

The <code>xxx</code> specifier has only effect for <code>latex</code> and
<code>sphinx</code> output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

<syntaxhighlight lang="python">
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
</syntaxhighlight>

<!-- When showing copy from file in !bc envir, indent a character - otherwise -->
<!-- ptex2tex is confused and starts copying... -->
Computer code can also be copied from a file:
<syntaxhighlight lang="text">
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
</syntaxhighlight>
The <code>@@@CODE</code> identifier must appear at the very beginning of the line.
The first specification copies the complete file <code>doconce_program.sh</code>.
The second specification copies from the first line matching the ''regular
expression'' <code>doconce clean</code> up to, but not including the line
matching the ''regular expression'' <code>^doconce split_rst</code>.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside <code>!bc shpro</code>
and <code>!ec</code> directives, if a complete file is copied, while the
directives become <code>!bc shcod</code> and <code>!ec</code> when a code snippet is copied
from file. In general, for a filename extension <code>.X</code>, the environment
becomes <code>!bc Xpro</code> or <code>!bc Xcod</code> for a complete program or snippet,
respectively. The enivorments (<code>Xcod</code> and <code>Xpro</code>) are only active
for <code>latex</code> and <code>sphinx</code> outout.

Important warnings:


<ul>
 <li> A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 <li> Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.
</ul>

==== LaTeX Mathematics ====

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats <code>sphinx</code>, <code>latex</code>, and <code>pdflatex</code>
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
<math>Ax=b</math>. To help increase readability in other formats than <code>sphinx</code>,
<code>latex</code>, and <code>pdflatex</code>, inline mathematics may have a more human
readable companion expression. The syntax is like
<syntaxhighlight lang="text">
$\sin(\norm{\bf u})$|$sin(||u||)$
</syntaxhighlight>
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
<code>!bt</code>
and
<code>!et</code> (begin/end TeX) directives starting on the beginning of a line:

<syntaxhighlight lang="text">
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
</syntaxhighlight>
<!-- Note: !bt and !et (and !bc and !ec below) are used to illustrate -->
<!-- tex and code blocks in inside verbatim blocks and are replaced -->
<!-- by !bt, !et, !bc, and !ec after all other formatting is finished. -->
This LaTeX code gets rendered as

:<math>
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
</math>
Here is a single equation:

<syntaxhighlight lang="text">
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
</syntaxhighlight>
which results in

:<math>
 \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.
</math>

One can use <code>#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")</code>
to let the preprocessor choose a block of mathematics in LaTeX format
or (<code>#else</code>) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the <code>sphinx</code>, <code>pandoc</code>,
<code>mwiki</code>, or <code>html</code> formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in <code>latex</code> or <code>pdflatex</code> ''and''
the mentioned formats with LaTeX support,
the following rules are recommended:


<ul>
  <li> Use only the equation environments <code>\[</code>, <code>\]</code>,
    <code>equation</code>, <code>equation*</code>, <code>align</code>, and <code>align*</code>.
  <li> Labels in multiple equation environments such as <code>align</code> are
    not (yet) handled by <code>pandoc</code>.
  <li> MediaWiki (<code>mwiki</code>) does not support references to equations.
</ul>



''Notice.''
LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as <code>sphinx</code>, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically <code>if FORMAT in ("latex", "pdflatex")</code>) to
include special code for <code>latex</code> and <code>pdflatex</code> output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

''LaTeX Newcommands.''
Text missing...

==== Figures and Movies ====

Figures and movies have almost equal syntax:
<syntaxhighlight lang="text">
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

</syntaxhighlight>
Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
<code>convert</code> and <code>montage</code> programs from the ImageMagick suite:
<syntaxhighlight lang="bash">
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
</syntaxhighlight>
Use <code>+append</code> for stacking left to right, <code>-append</code> for top to bottom.
The positioning of the figures can be controlled by <code>-gravity</code>.

==== Tables ====

The table in the section [#Section_Types] was written with this
syntax:
<syntaxhighlight lang="text">
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
</syntaxhighlight>

Note that


<ul>
 <li> Each line begins and ends with a vertical bar (pipe symbol).
 <li> Column data are separated by a vertical bar (pipe symbol).
 <li> There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 <li> If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 <li> Many output formats are so primitive that heading and column alignment
   have no effect.
</ul>

==== Labels, References, Citations, and Index ====

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
<syntaxhighlight lang="text">
label{name}
</syntaxhighlight>
with no backslash
preceding the label keyword! It is common practice to choose <code>name</code>
as some hierarchical name, say <code>a:b:c</code>, where <code>a</code> and <code>b</code> indicate
some abbreviations for a section and/or subsection for the topic and
<code>c</code> is some name for the particular unit that has a label.

A reference to the label <code>name</code> is written as
<syntaxhighlight lang="text">
ref{name}
</syntaxhighlight>
again with no backslash before <code>ref</code>.

Single citations are written as
<syntaxhighlight lang="text">
cite{name}
</syntaxhighlight>
where <code>name</code> is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have <code>name</code> on the form
<code>Author1_Author2_YYYY</code>, <code>Author_YYYY</code>, or <code>Author1_etal_YYYY</code>, where
<code>YYYY</code> is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
<syntaxhighlight lang="text">
cite{name1,name2,name3}
</syntaxhighlight>

The bibliography is specified by a line <code>BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py</code>, where <code>name</code> is the logical name of the
document (the doconce file will then normally have the name
<code>name.do.txt</code>), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the <code>BIBFILE</code> keyword appears.

There is a ''generalized referencing'' feature in Doconce that allows
a reference with <code>ref</code> to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is
<syntaxhighlight lang="text">
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
</syntaxhighlight>
The output from a generalized reference is the text <code>internal</code> if all
<code>label</code> references in <code>internal</code> are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
<code>latex</code> or <code>pdflatex</code> one assumes that the references in <code>internal</code>
are to external documents declared by a comment line <code>#
Externaldocuments: testdoc, mydoc</code> (usually after the title, authors,
and date). In this case the output text is <code>internal cite</code> and the
LaTeX package <code>xr</code> is used to handle the labels in the external
documents.  If none of the two situations above applies, the
<code>external</code> text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
<syntaxhighlight lang="text">
index{name}
</syntaxhighlight>
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the <code>latex</code>, <code>rst</code>, and
<code>sphinx</code> formats.

==== Capabilities of the "doconce" Program ====

The <code>doconce</code> program can be used for a number of purposes besides
transforming a <code>.do.txt</code> file to some format. Here is the
list of capabilities:

<syntaxhighlight lang="bash">
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce split_rst complete_file.rst

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# remove answers to exercises
doconce remove_exercise_answers file_in_some_format

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile
</syntaxhighlight>

==== Exercises ====

Doconce supports ''Exercise'', ''Problem'', ''Project'', and ''Example''.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain ''elements'':


<ul>
  <li> a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  <li> a label (optional)
  <li> a solution file (optional)
  <li> name of file with a student solution (optional)
  <li> main exercise text (required)
  <li> a short answer (optional)
  <li> a full solution (optional)
  <li> one or more hints (optional)
  <li> one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)
</ul>

A typical sketch of a a problem without subexercises goes as follows:
<syntaxhighlight lang="text">
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
</syntaxhighlight>
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

<syntaxhighlight lang="text">
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
</syntaxhighlight>
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

<syntaxhighlight lang="text">
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

</syntaxhighlight>
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments <code>--without-answers</code> and <code>--without-solutions</code>
turn off output of answers and solutions, respectively, except for
examples.

==== Environments ====

Doconce environments start with <code>!benvirname</code> and end with <code>!eenvirname</code>,
where <code>envirname</code> is the name of the environment. Here is a listing of
the environments:


<ul>
 <li> <code>c</code>: computer code (or verbatim text)
 <li> <code>t</code>: math blocks with LaTeX syntax
 <li> <code>subex</code>: sub-exercise
 <li> <code>ans</code>: short answer to exercise or sub-exercise
 <li> <code>sol</code>: full solution to exercise or sub-exercise
 <li> <code>notes</code>: multi-line notes to be included or not
 <li> <code>quote</code>: indented text
 <li> <code>notice</code>, <code>summary</code>, <code>warning</code>, <code>question</code>, <code>hint</code>: boxes with
    specialy typesetting (or symbols)
 <li> <code>pop</code>: text to gradually pop up in slide presentations
 <li> <code>slidecell</code>: indication of cells in a grid layout for elements on a
   slide
</ul>

==== Labels, Index, and Citations ====

==== Preprocessing ====

Doconce documents may utilize a preprocessor, either <code>preprocess</code> and/or
<code>mako</code>. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The <code>mako</code> preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command <code>doconce format</code> first runs <code>preprocess</code> and then <code>mako</code>.
Here is a typical example on utilizing <code>preprocess</code> to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

<syntaxhighlight lang="text">
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
</syntaxhighlight>

With the <code>mako</code> preprocessor the if-else tests have slightly different syntax.
An [http://hplgit.github.com/bioinf-py/ example document] contains
some illustrations on how to utilize <code>mako</code> (clone the GitHub project and
examine the Doconce source and the <code>doc/src/make.sh</code> script).

==== Resources ====

<ul>
 <li> Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"
</ul>


************** File: quickref.cwiki *****************
#summary Doconce Quick Reference
<wiki:toc max_depth="2" />
By **Hans Petter Langtangen**

=== Jan 32, 2100 ===

<<TableOfContents>>



<wiki:comment> Very preliminary </wiki:comment>

**WARNING: This quick reference is very incomplete!**


== Supported Formats ==

Doconce currently translates files to the following formats:


 * LaTeX (format {{{latex}}} and {{{pdflatex}}})
 * HTML (format {{{html}}})
 * reStructuredText (format {{{rst}}})
 * plain (untagged) ASCII (format {{{plain}}})
 * Sphinx (format {{{sphinx}}})
 * (Pandoc extended) Markdown (format {{{pandoc}}})
 * Googlecode wiki (format {{{gwiki}}})
 * MediaWiki for Wikipedia and Wikibooks (format {{{mwiki}}})
 * Creoloe wiki (format {{{cwiki}}})
 * Epydoc (format {{{epydoc}}})
 * StructuredText (format {{{st}}})

The best supported formats are {{{latex}}}, {{{sphinx}}}, {{{html}}}, and {{{plain}}}.


== Title, Authors, and Date ==

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads
{{{
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
}}}
The entire title must appear on a single line.
The author syntax is
{{{
name Email: somename@adr.net at institution1 and institution2
}}}
where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from {{{today}}} if not the
current date is wanted, e.g., {{{Feb 22, 2016}}}.

The table of contents is removed by writing {{{TOC: off}}}.


== Section Types ==

 | =Section type                                     | =Syntax                                           |
 |  chapter                                          |  {{{========= Heading ========}}} (9 {{{=}}})     |
 |  section                                          |  {{{======= Heading =======}}}    (7 {{{=}}})     |
 |  subsection                                       |  {{{===== Heading =====}}}        (5 {{{=}}})     |
 |  subsubsection                                    |  {{{=== Heading ===}}}            (3 {{{=}}})     |
 |  paragraph                                        |  {{{__Heading.__}}}               (2 {{{_}}})     |
 |  abstract                                         |  {{{__Abstract.__}}} Running text...              |


Note that abstracts are recognized by starting with {{{__Abstract.__}}} at
the beginning of a line and ending with three or more {{{=}}} signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only {{{latex}}} output, where the appendix formatting
is used - all other formats just leave the heading as it is written).


== Inline Formatting ==

Words surrounded by {{{*}}} are emphasized: {{{*emphasized words*}}} becomes
//emphasized words//. Similarly, an underscore surrounds words that
appear in boldface: {{{_boldface_}}} become **boldface**.


== Lists ==

There are three types of lists: //bullet lists//, where each item starts
with {{{*}}}, //enumeration lists//, where each item starts with {{{o}}} and gets
consqutive numbers,
and //description// lists, where each item starts with {{{-}}} followed
by a keyword and a colon.
{{{
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
}}}
The code above follows.

Here is a bullet list:


 * item1
 * item2

  ** subitem1 of item2
  //* subitem2 of item2


 // item3

Note that sublists are indented.
Here is an enumeration list:


# item1
# item2   may appear on   multiple lines

 ## subitem1 of item2
 ## subitem2 of item2


# item3

And finally a description list:


 * keyword1:  
   followed by   some text   over multiple   lines
 * keyword2:     followed by text on the next line
 * keyword3:  
   and its description may fit on one line


== Comments ==

Lines starting with {{{#}}} are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats {{{rst}}} and
{{{sphinx}}} are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes {{{##}}} or by blocks of text
inside the comment directives {{{%<doc>}}} (beginning) and {{{<%doc/>}}} (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax
{{{
[name: running text]
}}}
where {{{name}}} is the name or ID of an author or reader making the comment,
and {{{running text}}} is the comment. There must be a space after the colon.
Running
{{{
doconce format html mydoc.do.txt --skip_inline_comments
}}}
removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:
{{{
doconce remove_inline_comments mydoc.do.txt
}}}
This action is appropriate when all issues with such comments are resolved.


== Verbatim/Computer Code ==

Inline verbatim code is typeset within back-ticks, as in
{{{
Some sentence with `words in verbatim style`.
}}}
resulting in Some sentence with {{{words in verbatim style}}}.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between {{{!bc xxx}}} and {{{!ec}}} directives, which must appear on the
beginning of the line. A specification {{{xxx}}} indicates what verbatim
formatting style that is to be used. Typical values for {{{xxx}}} are
nothing, {{{cod}}} for a code snippet, {{{pro}}} for a complete program,
{{{sys}}} for a terminal session, {{{dat}}} for a data file (or output from a
program),
{{{Xpro}}} or {{{Xcod}}} for a program or code snipped, respectively,
in programming {{{X}}}, where {{{X}}} may be {{{py}}} for Python,
{{{cy}}} for Cython, {{{sh}}} for Bash or other Unix shells,
{{{f}}} for Fortran, {{{c}}} for C, {{{cpp}}} for C++, {{{m}}} for MATLAB,
{{{pl}}} for Perl. For output in {{{latex}}} one can let {{{xxx}}} reflect any
defined verbatim environment in the {{{ptex2tex}}} configuration file
({{{.ptex2tex.cfg}}}). For {{{sphinx}}} output one can insert a comment
{{{
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
}}}
that maps environments ({{{xxx}}}) onto valid language types for
Pygments (which is what {{{sphinx}}} applies to typeset computer code).

The {{{xxx}}} specifier has only effect for {{{latex}}} and
{{{sphinx}}} output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):

{{{
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
}}}

<wiki:comment> When showing copy from file in !bc envir, indent a character - otherwise </wiki:comment>
<wiki:comment> ptex2tex is confused and starts copying... </wiki:comment>
Computer code can also be copied from a file:
{{{
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
}}}
The {{{@@@CODE}}} identifier must appear at the very beginning of the line.
The first specification copies the complete file {{{doconce_program.sh}}}.
The second specification copies from the first line matching the //regular
expression// {{{doconce clean}}} up to, but not including the line
matching the //regular expression// {{{^doconce split_rst}}}.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside {{{!bc shpro}}}
and {{{!ec}}} directives, if a complete file is copied, while the
directives become {{{!bc shcod}}} and {{{!ec}}} when a code snippet is copied
from file. In general, for a filename extension {{{.X}}}, the environment
becomes {{{!bc Xpro}}} or {{{!bc Xcod}}} for a complete program or snippet,
respectively. The enivorments ({{{Xcod}}} and {{{Xpro}}}) are only active
for {{{latex}}} and {{{sphinx}}} outout.

Important warnings:


 * A code block must come after some plain sentence (at least for successful   output in reStructredText), not directly after a section/paragraph heading,   table, comment, figure, or movie.
 * Verbatim code blocks inside lists can be ugly typeset in some   output formats. A more robust approach is to replace the list by   paragraphs with headings.


== LaTeX Mathematics ==

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats {{{sphinx}}}, {{{latex}}}, and {{{pdflatex}}}
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
{{{Ax=b}}}. To help increase readability in other formats than {{{sphinx}}},
{{{latex}}}, and {{{pdflatex}}}, inline mathematics may have a more human
readable companion expression. The syntax is like
{{{
$\sin(\norm{\bf u})$|$sin(||u||)$
}}}
That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
{{{!bt}}}
and
{{{!et}}} (begin/end TeX) directives starting on the beginning of a line:

{{{
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
}}}
<wiki:comment> Note: !bt and !et (and !bc and !ec below) are used to illustrate </wiki:comment>
<wiki:comment> tex and code blocks in inside verbatim blocks and are replaced </wiki:comment>
<wiki:comment> by !bt, !et, !bc, and !ec after all other formatting is finished. </wiki:comment>
This LaTeX code gets rendered as

{{{
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
}}}
Here is a single equation:

{{{
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
}}}
which results in

{{{
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
}}}

One can use {{{#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")}}}
to let the preprocessor choose a block of mathematics in LaTeX format
or ({{{#else}}}) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the {{{sphinx}}}, {{{pandoc}}},
{{{mwiki}}}, or {{{html}}} formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in {{{latex}}} or {{{pdflatex}}} //and//
the mentioned formats with LaTeX support,
the following rules are recommended:


  * Use only the equation environments {{{\[}}}, {{{\]}}},    {{{equation}}}, {{{equation*}}}, {{{align}}}, and {{{align*}}}.
  * Labels in multiple equation environments such as {{{align}}} are    not (yet) handled by {{{pandoc}}}.
  * MediaWiki ({{{mwiki}}}) does not support references to equations.



//Notice.// LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as {{{sphinx}}}, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically {{{if FORMAT in ("latex", "pdflatex")}}}) to
include special code for {{{latex}}} and {{{pdflatex}}} output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

//LaTeX Newcommands.// Text missing...


== Figures and Movies ==

Figures and movies have almost equal syntax:
{{{
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}

}}}
Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
{{{convert}}} and {{{montage}}} programs from the ImageMagick suite:
{{{
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
}}}
Use {{{+append}}} for stacking left to right, {{{-append}}} for top to bottom.
The positioning of the figures can be controlled by {{{-gravity}}}.


== Tables ==

The table in the section [#Section_Types] was written with this
syntax:
{{{
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
}}}

Note that


 * Each line begins and ends with a vertical bar (pipe symbol).
 * Column data are separated by a vertical bar (pipe symbol).
 * There may be horizontal rules, i.e., lines with dashes for   indicating the heading and the end of the table, and these may   contain characters 'c', 'l', or 'r' for how to align headings or   columns. The first horizontal rule may indicate how to align   headings (center, left, right), and the horizontal rule after the   heading line may indicate how to align the data in the columns   (center, left, right).
 * If the horizontal rules are without alignment information there should   be no vertical bar (pipe symbol) between the columns. Otherwise, such   a bar indicates a vertical bar between columns in LaTeX.
 * Many output formats are so primitive that heading and column alignment   have no effect.


== Labels, References, Citations, and Index ==

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax
{{{
label{name}
}}}
with no backslash
preceding the label keyword! It is common practice to choose {{{name}}}
as some hierarchical name, say {{{a:b:c}}}, where {{{a}}} and {{{b}}} indicate
some abbreviations for a section and/or subsection for the topic and
{{{c}}} is some name for the particular unit that has a label.

A reference to the label {{{name}}} is written as
{{{
ref{name}
}}}
again with no backslash before {{{ref}}}.

Single citations are written as
{{{
cite{name}
}}}
where {{{name}}} is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have {{{name}}} on the form
{{{Author1_Author2_YYYY}}}, {{{Author_YYYY}}}, or {{{Author1_etal_YYYY}}}, where
{{{YYYY}}} is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:
{{{
cite{name1,name2,name3}
}}}

The bibliography is specified by a line {{{BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py}}}, where {{{name}}} is the logical name of the
document (the doconce file will then normally have the name
{{{name.do.txt}}}), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the {{{BIBFILE}}} keyword appears.

There is a //generalized referencing// feature in Doconce that allows
a reference with {{{ref}}} to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is
{{{
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
}}}
The output from a generalized reference is the text {{{internal}}} if all
{{{label}}} references in {{{internal}}} are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
{{{latex}}} or {{{pdflatex}}} one assumes that the references in {{{internal}}}
are to external documents declared by a comment line {{{#
Externaldocuments: testdoc, mydoc}}} (usually after the title, authors,
and date). In this case the output text is {{{internal cite}}} and the
LaTeX package {{{xr}}} is used to handle the labels in the external
documents.  If none of the two situations above applies, the
{{{external}}} text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)
{{{
index{name}
}}}
It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the {{{latex}}}, {{{rst}}}, and
{{{sphinx}}} formats.


== Capabilities of the "doconce" Program ==

The {{{doconce}}} program can be used for a number of purposes besides
transforming a {{{.do.txt}}} file to some format. Here is the
list of capabilities:

{{{
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce split_rst complete_file.rst

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# remove answers to exercises
doconce remove_exercise_answers file_in_some_format

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile
}}}


== Exercises ==

Doconce supports //Exercise//, //Problem//, //Project//, and //Example//.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain //elements//:


  * a headline at the level of a subsection    containing one of the words "Exercise:", "Problem:",    "Project:", or "Example:", followed by a title (required)
  * a label (optional)
  * a solution file (optional)
  * name of file with a student solution (optional)
  * main exercise text (required)
  * a short answer (optional)
  * a full solution (optional)
  * one or more hints (optional)
  * one or more subexercises (subproblems, subprojects), which can also    contain a text, a short answer, a full solution, name student file    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:
{{{
===== Problem: Derive the Formula for the Area of an Ellipse =====
label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
}}}
If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads

{{{
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
}}}
the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:

{{{
===== Exercise: Determine the Distance to the Moon =====
label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

}}}
By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments {{{--without-answers}}} and {{{--without-solutions}}}
turn off output of answers and solutions, respectively, except for
examples.


== Environments ==

Doconce environments start with {{{!benvirname}}} and end with {{{!eenvirname}}},
where {{{envirname}}} is the name of the environment. Here is a listing of
the environments:


 * {{{c}}}: computer code (or verbatim text)
 * {{{t}}}: math blocks with LaTeX syntax
 * {{{subex}}}: sub-exercise
 * {{{ans}}}: short answer to exercise or sub-exercise
 * {{{sol}}}: full solution to exercise or sub-exercise
 * {{{notes}}}: multi-line notes to be included or not
 * {{{quote}}}: indented text
 * {{{notice}}}, {{{summary}}}, {{{warning}}}, {{{question}}}, {{{hint}}}: boxes with    specialy typesetting (or symbols)
 * {{{pop}}}: text to gradually pop up in slide presentations
 * {{{slidecell}}}: indication of cells in a grid layout for elements on a   slide


== Labels, Index, and Citations ==


== Preprocessing ==

Doconce documents may utilize a preprocessor, either {{{preprocess}}} and/or
{{{mako}}}. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The {{{mako}}} preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command {{{doconce format}}} first runs {{{preprocess}}} and then {{{mako}}}.
Here is a typical example on utilizing {{{preprocess}}} to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:

{{{
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
}}}

With the {{{mako}}} preprocessor the if-else tests have slightly different syntax.
An [[http://hplgit.github.com/bioinf-py/|example document]] contains
some illustrations on how to utilize {{{mako}}} (clone the GitHub project and
examine the Doconce source and the {{{doc/src/make.sh}}} script).


== Resources ==

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"


************** File: quickref.st *****************
TITLE: Doconce Quick Reference
BY: Hans Petter Langtangen (Simula Research Laboratory, and University of Oslo)
DATE: Jan 32, 2100
**WARNING: This quick reference is very incomplete!**

Supported Formats

Doconce currently translates files to the following formats:

 - LaTeX (format 'latex' and 'pdflatex')
 - HTML (format 'html')
 - reStructuredText (format 'rst')
 - plain (untagged) ASCII (format 'plain')
 - Sphinx (format 'sphinx')
 - (Pandoc extended) Markdown (format 'pandoc')
 - Googlecode wiki (format 'gwiki')
 - MediaWiki for Wikipedia and Wikibooks (format 'mwiki')
 - Creoloe wiki (format 'cwiki')
 - Epydoc (format 'epydoc')
 - StructuredText (format 'st')

The best supported formats are 'latex', 'sphinx', 'html', and 'plain'.

Title, Authors, and Date

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 and institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from 'today' if not the
current date is wanted, e.g., 'Feb 22, 2016'.

The table of contents is removed by writing 'TOC: off'.

Section Types

====================================  ====================================  
            Section type                             Syntax                 
====================================  ====================================  
chapter                               '========= Heading ========' (9 '=')  
section                               '======= Heading ======='    (7 '=')  
subsection                            '===== Heading ====='        (5 '=')  
subsubsection                         '=== Heading ==='            (3 '=')  
paragraph                             '__Heading.__'               (2 '_')  
abstract                              '__Abstract.__' Running text...       
====================================  ====================================  

Note that abstracts are recognized by starting with '__Abstract.__' at
the beginning of a line and ending with three or more '=' signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only 'latex' output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

Inline Formatting

Words surrounded by '*' are emphasized: '*emphasized words*' becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: '_boldface_' become **boldface**.

Lists

There are three types of lists: *bullet lists*, where each item starts
with '*', *enumeration lists*, where each item starts with 'o' and gets
consqutive numbers,
and *description* lists, where each item starts with '-' followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 - item1
 - item2
  - subitem1 of item2
  - subitem2 of item2

 - item3

Note that sublists are indented.
Here is an enumeration list:

1. item1
2. item2
   may appear on
   multiple lines
 1. subitem1 of item2
 2. subitem2 of item2

3. item3

And finally a description list:

 keyword1: --  
   followed by
   some text
   over multiple
   lines
 keyword2: --  
   followed by text on the next line
 keyword3: --  
   and its description may fit on one line

Comments

Lines starting with '#' are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats 'rst' and
'sphinx' are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes '##' or by blocks of text
inside the comment directives '%<doc>' (beginning) and '<%doc/>' (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax::


        [name: running text]

where 'name' is the name or ID of an author or reader making the comment,
and 'running text' is the comment. There must be a space after the colon.
Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired::


        doconce remove_inline_comments mydoc.do.txt

This action is appropriate when all issues with such comments are resolved.

Verbatim/Computer Code

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with 'words in verbatim style'.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between '!bc xxx' and '!ec' directives, which must appear on the
beginning of the line. A specification 'xxx' indicates what verbatim
formatting style that is to be used. Typical values for 'xxx' are
nothing, 'cod' for a code snippet, 'pro' for a complete program,
'sys' for a terminal session, 'dat' for a data file (or output from a
program),
'Xpro' or 'Xcod' for a program or code snipped, respectively,
in programming 'X', where 'X' may be 'py' for Python,
'cy' for Cython, 'sh' for Bash or other Unix shells,
'f' for Fortran, 'c' for C, 'cpp' for C++, 'm' for MATLAB,
'pl' for Perl. For output in 'latex' one can let 'xxx' reflect any
defined verbatim environment in the 'ptex2tex' configuration file
('.ptex2tex.cfg'). For 'sphinx' output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments ('xxx') onto valid language types for
Pygments (which is what 'sphinx' applies to typeset computer code).

The 'xxx' specifier has only effect for 'latex' and
'sphinx' output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The '@@@CODE' identifier must appear at the very beginning of the line.
The first specification copies the complete file 'doconce_program.sh'.
The second specification copies from the first line matching the *regular
expression* 'doconce clean' up to, but not including the line
matching the *regular expression* '^doconce split_rst'.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside '!bc shpro'
and '!ec' directives, if a complete file is copied, while the
directives become '!bc shcod' and '!ec' when a code snippet is copied
from file. In general, for a filename extension '.X', the environment
becomes '!bc Xpro' or '!bc Xcod' for a complete program or snippet,
respectively. The enivorments ('Xcod' and 'Xpro') are only active
for 'latex' and 'sphinx' outout.

Important warnings:

 - A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 - Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats 'sphinx', 'latex', and 'pdflatex'
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
Ax=b. To help increase readability in other formats than 'sphinx',
'latex', and 'pdflatex', inline mathematics may have a more human
readable companion expression. The syntax is like::


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
'!bt'
and
'!et' (begin/end TeX) directives starting on the beginning of a line::


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et

This LaTeX code gets rendered as::

        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}

Here is a single equation::


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in::

        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]


One can use '#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")'
to let the preprocessor choose a block of mathematics in LaTeX format
or ('#else') a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the 'sphinx', 'pandoc',
'mwiki', or 'html' formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in 'latex' or 'pdflatex' *and*
the mentioned formats with LaTeX support,
the following rules are recommended:

  - Use only the equation environments '\[', '\]',
    'equation', 'equation*', 'align', and 'align*'.
  - Labels in multiple equation environments such as 'align' are
    not (yet) handled by 'pandoc'.
  - MediaWiki ('mwiki') does not support references to equations.



*Notice.* LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as 'sphinx', makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically 'if FORMAT in ("latex", "pdflatex")') to
include special code for 'latex' and 'pdflatex' output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* Text missing...

Figures and Movies

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
'convert' and 'montage' programs from the ImageMagick suite::


        montage file1.png file2.png ... file4.png -geometry +2+2  result.png
        montage file1.png file2.png -tile x1 result.png
        montage file1.png file2.png -tile 1x result.png
        
        convert -background white file1.png file2.png +append tmp.png

Use '+append' for stacking left to right, '-append' for top to bottom.
The positioning of the figures can be controlled by '-gravity'.

Tables

The table in the section "Section Types" was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 - Each line begins and ends with a vertical bar (pipe symbol).
 - Column data are separated by a vertical bar (pipe symbol).
 - There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 - If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 - Many output formats are so primitive that heading and column alignment
   have no effect.

Labels, References, Citations, and Index

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword! It is common practice to choose 'name'
as some hierarchical name, say 'a:b:c', where 'a' and 'b' indicate
some abbreviations for a section and/or subsection for the topic and
'c' is some name for the particular unit that has a label.

A reference to the label 'name' is written as::


        ref{name}

again with no backslash before 'ref'.

Single citations are written as::


        cite{name}

where 'name' is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have 'name' on the form
'Author1_Author2_YYYY', 'Author_YYYY', or 'Author1_etal_YYYY', where
'YYYY' is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line 'BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py', where 'name' is the logical name of the
document (the doconce file will then normally have the name
'name.do.txt'), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the 'BIBFILE' keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with 'ref' to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text 'internal' if all
'ref{label}' references in 'internal' are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
'latex' or 'pdflatex' one assumes that the references in 'internal'
are to external documents declared by a comment line '#
Externaldocuments: testdoc, mydoc' (usually after the title, authors,
and date). In this case the output text is 'internal cite' and the
LaTeX package 'xr' is used to handle the labels in the external
documents.  If none of the two situations above applies, the
'external' text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the 'latex', 'rst', and
'sphinx' formats.

Capabilities of the "doconce" Program

The 'doconce' program can be used for a number of purposes besides
transforming a '.do.txt' file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce split_rst complete_file.rst
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # remove answers to exercises
        doconce remove_exercise_answers file_in_some_format
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile


Exercises

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  - a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  - a label (optional)
  - a solution file (optional)
  - name of file with a student solution (optional)
  - main exercise text (required)
  - a short answer (optional)
  - a full solution (optional)
  - one or more hints (optional)
  - one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments '--without-answers' and '--without-solutions'
turn off output of answers and solutions, respectively, except for
examples.

Environments

Doconce environments start with '!benvirname' and end with '!eenvirname',
where 'envirname' is the name of the environment. Here is a listing of
the environments:

 - 'c': computer code (or verbatim text)
 - 't': math blocks with LaTeX syntax
 - 'subex': sub-exercise
 - 'ans': short answer to exercise or sub-exercise
 - 'sol': full solution to exercise or sub-exercise
 - 'notes': multi-line notes to be included or not
 - 'quote': indented text
 - 'notice', 'summary', 'warning', 'question', 'hint': boxes with
    specialy typesetting (or symbols)
 - 'pop': text to gradually pop up in slide presentations
 - 'slidecell': indication of cells in a grid layout for elements on a
   slide

Labels, Index, and Citations

Preprocessing

Doconce documents may utilize a preprocessor, either 'preprocess' and/or
'mako'. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The 'mako' preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command 'doconce format' first runs 'preprocess' and then 'mako'.
Here is a typical example on utilizing 'preprocess' to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
        \hline
        0.0          & 1.4186       & -5.01        \\
        2.0          & 1.376512     & 11.919       \\
        4.0          & 1.1E+1       & 14.717624    \\
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the 'mako' preprocessor the if-else tests have slightly different syntax.
An "http://hplgit.github.com/bioinf-py/":example document contains
some illustrations on how to utilize 'mako' (clone the GitHub project and
examine the Doconce source and the 'doc/src/make.sh' script).

Resources

 - Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"

************** File: quickref.epytext *****************
TITLE: Doconce Quick Reference
BY: Hans Petter Langtangen (Simula Research Laboratory, and University of Oslo)
DATE: Jan 32, 2100
B{WARNING: This quick reference is very incomplete!}


Supported Formats
-----------------

Doconce currently translates files to the following formats:

 - LaTeX (format C{latex} and C{pdflatex})
 - HTML (format C{html})
 - reStructuredText (format C{rst})
 - plain (untagged) ASCII (format C{plain})
 - Sphinx (format C{sphinx})
 - (Pandoc extended) Markdown (format C{pandoc})
 - Googlecode wiki (format C{gwiki})
 - MediaWiki for Wikipedia and Wikibooks (format C{mwiki})
 - Creoloe wiki (format C{cwiki})
 - Epydoc (format C{epydoc})
 - StructuredText (format C{st})

The best supported formats are C{latex}, C{sphinx}, C{html}, and C{plain}.

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 and institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from C{today} if not the
current date is wanted, e.g., C{Feb 22, 2016}.

The table of contents is removed by writing C{TOC: off}.


Section Types
-------------

======================================  ======================================  
             Section type                               Syntax                  
======================================  ======================================  
chapter                                 C{========= Heading ========} (9 C{=})  
section                                 C{======= Heading =======}    (7 C{=})  
subsection                              C{===== Heading =====}        (5 C{=})  
subsubsection                           C{=== Heading ===}            (3 C{=})  
paragraph                               C{__Heading.__}               (2 C{_})  
abstract                                C{__Abstract.__} Running text...        
======================================  ======================================  

Note that abstracts are recognized by starting with C{__Abstract.__} at
the beginning of a line and ending with three or more C{=} signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only C{latex} output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

Inline Formatting
-----------------

Words surrounded by C{*} are emphasized: C{*emphasized words*} becomes
I{emphasized words}. Similarly, an underscore surrounds words that
appear in boldface: C{_boldface_} become B{boldface}.

Lists
-----

There are three types of lists: I{bullet lists}, where each item starts
with C{*}, I{enumeration lists}, where each item starts with C{o} and gets
consqutive numbers,
and I{description} lists, where each item starts with C{-} followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 - item1
 - item2
  - subitem1 of item2
  - subitem2 of item2

 - item3

Note that sublists are indented.
Here is an enumeration list:

1. item1
2. item2
   may appear on
   multiple lines
 1. subitem1 of item2
 2. subitem2 of item2

3. item3

And finally a description list:

 - keyword1: 
   followed by
   some text
   over multiple
   lines
 - keyword2: 
   followed by text on the next line
 - keyword3: 
   and its description may fit on one line

Comments
--------

Lines starting with C{#} are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats C{rst} and
C{sphinx} are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes C{##} or by blocks of text
inside the comment directives C{%<doc>} (beginning) and C{<%doc/>} (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax::


        [name: running text]

where C{name} is the name or ID of an author or reader making the comment,
and C{running text} is the comment. There must be a space after the colon.
Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired::


        doconce remove_inline_comments mydoc.do.txt

This action is appropriate when all issues with such comments are resolved.

Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with C{words in verbatim style}.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between C{!bc xxx} and C{!ec} directives, which must appear on the
beginning of the line. A specification C{xxx} indicates what verbatim
formatting style that is to be used. Typical values for C{xxx} are
nothing, C{cod} for a code snippet, C{pro} for a complete program,
C{sys} for a terminal session, C{dat} for a data file (or output from a
program),
C{Xpro} or C{Xcod} for a program or code snipped, respectively,
in programming C{X}, where C{X} may be C{py} for Python,
C{cy} for Cython, C{sh} for Bash or other Unix shells,
C{f} for Fortran, C{c} for C, C{cpp} for C++, C{m} for MATLAB,
C{pl} for Perl. For output in C{latex} one can let C{xxx} reflect any
defined verbatim environment in the C{ptex2tex} configuration file
(C{.ptex2tex.cfg}). For C{sphinx} output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (C{xxx}) onto valid language types for
Pygments (which is what C{sphinx} applies to typeset computer code).

The C{xxx} specifier has only effect for C{latex} and
C{sphinx} output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The C{@@@CODE} identifier must appear at the very beginning of the line.
The first specification copies the complete file C{doconce_program.sh}.
The second specification copies from the first line matching the I{regular
expression} C{doconce clean} up to, but not including the line
matching the I{regular expression} C{^doconce split_rst}.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside C{!bc shpro}
and C{!ec} directives, if a complete file is copied, while the
directives become C{!bc shcod} and C{!ec} when a code snippet is copied
from file. In general, for a filename extension C{.X}, the environment
becomes C{!bc Xpro} or C{!bc Xcod} for a complete program or snippet,
respectively. The enivorments (C{Xcod} and C{Xpro}) are only active
for C{latex} and C{sphinx} outout.

Important warnings:

 - A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.
 - Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats C{sphinx}, C{latex}, and C{pdflatex}
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
M{Ax=b}. To help increase readability in other formats than C{sphinx},
C{latex}, and C{pdflatex}, inline mathematics may have a more human
readable companion expression. The syntax is like::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
C{!bt}
and
C{!et} (begin/end TeX) directives starting on the beginning of a line::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


This LaTeX code gets rendered as::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


Here is a single equation::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.


which results in::


            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.



One can use C{#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")}
to let the preprocessor choose a block of mathematics in LaTeX format
or (C{#else}) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the C{sphinx}, C{pandoc},
C{mwiki}, or C{html} formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in C{latex} or C{pdflatex} I{and}
the mentioned formats with LaTeX support,
the following rules are recommended:

  - Use only the equation environments C{\[}, C{\]},
    C{equation}, C{equation*}, C{align}, and C{align*}.
  - Labels in multiple equation environments such as C{align} are
    not (yet) handled by C{pandoc}.
  - MediaWiki (C{mwiki}) does not support references to equations.



I{Notice.} LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as C{sphinx}, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically C{if FORMAT in ("latex", "pdflatex")}) to
include special code for C{latex} and C{pdflatex} output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

I{LaTeX Newcommands.} Text missing...


Figures and Movies
------------------

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
C{convert} and C{montage} programs from the ImageMagick suite::


        montage file1.png file2.png ... file4.png -geometry +2+2  result.png
        montage file1.png file2.png -tile x1 result.png
        montage file1.png file2.png -tile 1x result.png
        
        convert -background white file1.png file2.png +append tmp.png

Use C{+append} for stacking left to right, C{-append} for top to bottom.
The positioning of the figures can be controlled by C{-gravity}.


Tables
------

The table in the section "Section Types" was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 - Each line begins and ends with a vertical bar (pipe symbol).
 - Column data are separated by a vertical bar (pipe symbol).
 - There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).
 - If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.
 - Many output formats are so primitive that heading and column alignment
   have no effect.

Labels, References, Citations, and Index
----------------------------------------

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword! It is common practice to choose C{name}
as some hierarchical name, say C{a:b:c}, where C{a} and C{b} indicate
some abbreviations for a section and/or subsection for the topic and
C{c} is some name for the particular unit that has a label.

A reference to the label C{name} is written as::


        ref{name}

again with no backslash before C{ref}.

Single citations are written as::


        cite{name}

where C{name} is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have C{name} on the form
C{Author1_Author2_YYYY}, C{Author_YYYY}, or C{Author1_etal_YYYY}, where
C{YYYY} is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line C{BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py}, where C{name} is the logical name of the
document (the doconce file will then normally have the name
C{name.do.txt}), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the C{BIBFILE} keyword appears.

There is a I{generalized referencing} feature in Doconce that allows
a reference with C{ref} to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text C{internal} if all
C{ref{label}} references in C{internal} are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
C{latex} or C{pdflatex} one assumes that the references in C{internal}
are to external documents declared by a comment line C{#
Externaldocuments: testdoc, mydoc} (usually after the title, authors,
and date). In this case the output text is C{internal cite} and the
LaTeX package C{xr} is used to handle the labels in the external
documents.  If none of the two situations above applies, the
C{external} text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the C{latex}, C{rst}, and
C{sphinx} formats.

Capabilities of the "doconce" Program
-------------------------------------

The C{doconce} program can be used for a number of purposes besides
transforming a C{.do.txt} file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce split_rst complete_file.rst
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # remove answers to exercises
        doconce remove_exercise_answers file_in_some_format
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile


Exercises
---------

Doconce supports I{Exercise}, I{Problem}, I{Project}, and I{Example}.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain I{elements}:

  - a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)
  - a label (optional)
  - a solution file (optional)
  - name of file with a student solution (optional)
  - main exercise text (required)
  - a short answer (optional)
  - a full solution (optional)
  - one or more hints (optional)
  - one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments C{--without-answers} and C{--without-solutions}
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with C{!benvirname} and end with C{!eenvirname},
where C{envirname} is the name of the environment. Here is a listing of
the environments:

 - C{c}: computer code (or verbatim text)
 - C{t}: math blocks with LaTeX syntax
 - C{subex}: sub-exercise
 - C{ans}: short answer to exercise or sub-exercise
 - C{sol}: full solution to exercise or sub-exercise
 - C{notes}: multi-line notes to be included or not
 - C{quote}: indented text
 - C{notice}, C{summary}, C{warning}, C{question}, C{hint}: boxes with
    specialy typesetting (or symbols)
 - C{pop}: text to gradually pop up in slide presentations
 - C{slidecell}: indication of cells in a grid layout for elements on a
   slide

Labels, Index, and Citations
----------------------------

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either C{preprocess} and/or
C{mako}. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The C{mako} preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command C{doconce format} first runs C{preprocess} and then C{mako}.
Here is a typical example on utilizing C{preprocess} to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::



            NOTE: A verbatim block has been removed because
                  it causes problems for Epytext.



With the C{mako} preprocessor the if-else tests have slightly different syntax.
An U{example document<http://hplgit.github.com/bioinf-py/>} contains
some illustrations on how to utilize C{mako} (clone the GitHub project and
examine the Doconce source and the C{doc/src/make.sh} script).

Resources
---------

 - Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"

************** File: quickref.txt *****************
Doconce Quick Reference
=======================

Hans Petter Langtangen [1, 2] 

[1] Simula Research Laboratory
[2] University of Oslo

Date: Jan 32, 2100

Table of contents:

 Supported Formats 
 Title, Authors, and Date 
 Section Types 
 Inline Formatting 
 Lists 
 Comments 
 Verbatim/Computer Code 
 LaTeX Mathematics 
 Figures and Movies 
 Tables 
 Labels, References, Citations, and Index 
 Capabilities of the "doconce" Program 
 Exercises 
 Environments 
 Labels, Index, and Citations 
 Preprocessing 
 Resources 





_WARNING: This quick reference is very incomplete!_


Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format latex and pdflatex)

 * HTML (format html)

 * reStructuredText (format rst)

 * plain (untagged) ASCII (format plain)

 * Sphinx (format sphinx)

 * (Pandoc extended) Markdown (format pandoc)

 * Googlecode wiki (format gwiki)

 * MediaWiki for Wikipedia and Wikibooks (format mwiki)

 * Creoloe wiki (format cwiki)

 * Epydoc (format epydoc)

 * StructuredText (format st)

The best supported formats are latex, sphinx, html, and plain.

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads::


        TITLE: On an Ultimate Markup Language
        AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
        AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
        AUTHOR: A. Dummy Author
        DATE: today
        TOC: on

The entire title must appear on a single line.
The author syntax is::


        name Email: somename@adr.net at institution1 and institution2

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from today if not the
current date is wanted, e.g., Feb 22, 2016.

The table of contents is removed by writing TOC: off.


Section Types
-------------

================================  ================================  
          Section type                         Syntax               
================================  ================================  
chapter                           ========= Heading ======== (9 =)  
section                           ======= Heading =======    (7 =)  
subsection                        ===== Heading =====        (5 =)  
subsubsection                     === Heading ===            (3 =)  
paragraph                         __Heading.__               (2 _)  
abstract                          __Abstract.__ Running text...     
================================  ================================  

Note that abstracts are recognized by starting with __Abstract.__ at
the beginning of a line and ending with three or more = signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only latex output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

Inline Formatting
-----------------

Words surrounded by * are emphasized: *emphasized words* becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: _boldface_ become _boldface_.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with *, *enumeration lists*, where each item starts with o and gets
consqutive numbers,
and *description* lists, where each item starts with - followed
by a keyword and a colon::


        Here is a bullet list:
        
         * item1
         * item2
          * subitem1 of item2
          * subitem2 of item2
         * item3
        
        Note that sublists are consistently indented by one or more blanks..
        Here is an enumeration list:
        
         o item1
         o item2
           may appear on
           multiple lines
          o subitem1 of item2
          o subitem2 of item2
         o item3
        
        And finally a description list:
        
         - keyword1: followed by
           some text
           over multiple
           lines
         - keyword2:
           followed by text on the next line
         - keyword3: and its description may fit on one line

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1: 
   followed by
   some text
   over multiple
   lines

 keyword2: 
   followed by text on the next line

 keyword3: 
   and its description may fit on one line

Comments
--------

Lines starting with # are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats rst and
sphinx are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes ## or by blocks of text
inside the comment directives %<doc> (beginning) and <%doc/> (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax::


        [name: running text]

where name is the name or ID of an author or reader making the comment,
and running text is the comment. There must be a space after the colon.
Running::


        doconce format html mydoc.do.txt --skip_inline_comments

removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired::


        doconce remove_inline_comments mydoc.do.txt

This action is appropriate when all issues with such comments are resolved.

Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in::


        Some sentence with `words in verbatim style`.

resulting in Some sentence with words in verbatim style.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between !bc xxx and !ec directives, which must appear on the
beginning of the line. A specification xxx indicates what verbatim
formatting style that is to be used. Typical values for xxx are
nothing, cod for a code snippet, pro for a complete program,
sys for a terminal session, dat for a data file (or output from a
program),
Xpro or Xcod for a program or code snipped, respectively,
in programming X, where X may be py for Python,
cy for Cython, sh for Bash or other Unix shells,
f for Fortran, c for C, cpp for C++, m for MATLAB,
pl for Perl. For output in latex one can let xxx reflect any
defined verbatim environment in the ptex2tex configuration file
(.ptex2tex.cfg). For sphinx output one can insert a comment::


        # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console

that maps environments (xxx) onto valid language types for
Pygments (which is what sphinx applies to typeset computer code).

The xxx specifier has only effect for latex and
sphinx output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax)::


        from numpy import sin, cos, exp, pi
        
        def f(x, y, z, t):
            return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)


Computer code can also be copied from a file::


         @@@CODE doconce_program.sh
         @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
         @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst

The @@@CODE identifier must appear at the very beginning of the line.
The first specification copies the complete file doconce_program.sh.
The second specification copies from the first line matching the *regular
expression* doconce clean up to, but not including the line
matching the *regular expression* ^doconce split_rst.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside !bc shpro
and !ec directives, if a complete file is copied, while the
directives become !bc shcod and !ec when a code snippet is copied
from file. In general, for a filename extension .X, the environment
becomes !bc Xpro or !bc Xcod for a complete program or snippet,
respectively. The enivorments (Xcod and Xpro) are only active
for latex and sphinx outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats sphinx, latex, and pdflatex
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
Ax=b. To help increase readability in other formats than sphinx,
latex, and pdflatex, inline mathematics may have a more human
readable companion expression. The syntax is like::


        $\sin(\norm{\bf u})$|$sin(||u||)$

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
  !bt
and
  !et (begin/end TeX) directives starting on the beginning of a line::


        !bt
        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}
        !et

This LaTeX code gets rendered as::

        \begin{align*}
        \nabla\cdot \pmb{u} &= 0,\\
        \nabla\times \pmb{u} &= 0.
        \end{align*}

Here is a single equation::


        !bt
        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
        !et

which results in::

        \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]


One can use #if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")
to let the preprocessor choose a block of mathematics in LaTeX format
or (#else) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the sphinx, pandoc,
mwiki, or html formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in latex or pdflatex *and*
the mentioned formats with LaTeX support,
the following rules are recommended:

  * Use only the equation environments \[, \],
    equation, equation*, align, and align*.

  * Labels in multiple equation environments such as align are
    not (yet) handled by pandoc.

  * MediaWiki (mwiki) does not support references to equations.



*Notice.* LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as sphinx, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically if FORMAT in ("latex", "pdflatex")) to
include special code for latex and pdflatex output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* Text missing...


Figures and Movies
------------------

Figures and movies have almost equal syntax::


        FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        
        MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. label{some:fig:label}
        

Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
convert and montage programs from the ImageMagick suite::


        montage file1.png file2.png ... file4.png -geometry +2+2  result.png
        montage file1.png file2.png -tile x1 result.png
        montage file1.png file2.png -tile 1x result.png
        
        convert -background white file1.png file2.png +append tmp.png

Use +append for stacking left to right, -append for top to bottom.
The positioning of the figures can be controlled by -gravity.


Tables
------

The table in the section "Section Types" was written with this
syntax::


        |----------------c--------|------------------c--------------------|
        |      Section type       |        Syntax                         |
        |----------------l--------|------------------l--------------------|
        | chapter                 | `========= Heading ========` (9 `=`)  |
        | section                 | `======= Heading =======`    (7 `=`)  |
        | subsection              | `===== Heading =====`        (5 `=`)  |
        | subsubsection           | `=== Heading ===`            (3 `=`)  |
        | paragraph               | `__Heading.__`               (2 `_`)  |
        |-----------------------------------------------------------------|


Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

Labels, References, Citations, and Index
----------------------------------------

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax::


        label{name}

with no backslash
preceding the label keyword! It is common practice to choose name
as some hierarchical name, say a:b:c, where a and b indicate
some abbreviations for a section and/or subsection for the topic and
c is some name for the particular unit that has a label.

A reference to the label name is written as::


        ref{name}

again with no backslash before ref.

Single citations are written as::


        cite{name}

where name is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have name on the form
Author1_Author2_YYYY, Author_YYYY, or Author1_etal_YYYY, where
YYYY is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma::


        cite{name1,name2,name3}


The bibliography is specified by a line BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py, where name is the logical name of the
document (the doconce file will then normally have the name
name.do.txt), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the BIBFILE keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with ref to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is::


        ref[internal][cite][external]
        
        # Example:
        As explained in
        ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
        "testdoc.html#___sec2" in the document
        "A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
        Doconce documents may include movies.

The output from a generalized reference is the text internal if all
ref{label} references in internal are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
latex or pdflatex one assumes that the references in internal
are to external documents declared by a comment line #
Externaldocuments: testdoc, mydoc (usually after the title, authors,
and date). In this case the output text is internal cite and the
LaTeX package xr is used to handle the labels in the external
documents.  If none of the two situations above applies, the
external text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)::


        index{name}

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the latex, rst, and
sphinx formats.

Capabilities of the "doconce" Program
-------------------------------------

The doconce program can be used for a number of purposes besides
transforming a .do.txt file to some format. Here is the
list of capabilities::


        Usage: doconce command [optional arguments]
        commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format
        
        
        # transform doconce file to another format
        doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt
        
        # substitute a phrase by another using regular expressions
        doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
        (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
         -x is the re.VERBOSE modifier, --restore copies backup files back again)
        
        # replace a phrase by another literally
        doconce replace from-text to-text file1 file2 ...
        (exact text substutition)
        
        # doconce replace using from and to phrases from file
        doconce replace_from_file file-with-from-to file1 file2 ...
        (exact text substitution, but a set of from-to relations)
        
        # gwiki format requires substitution of figure file names by URLs
        doconce gwiki_figsubst file.gwiki URL-of-fig-dir
        
        # remove all inline comments in a doconce file
        doconce remove_inline_comments file.do.txt
        
        # create a directory for the sphinx format
        doconce sphinx_dir author='John Doe' title='Long title' \
            short_title="Short title" version=0.1 \
            dirname=sphinx-rootdir theme=default logo=mylogo.png \
            do_file [do_file2 do_file3 ...]
        (requires sphinx version >= 1.1)
        
        # replace latex-1 (non-ascii) characters by html codes
        doconce latin2html file.html
        
        # walk through a directory tree and insert doconce files as
        # docstrings in *.p.py files
        doconce insertdocstr rootdir
        
        # remove all files that the doconce format can regenerate
        doconce clean
        
        # print the header (preamble) for latex file
        doconce latex_header
        
        # print the footer for latex files
        doconce latex_footer
        
        # change encoding
        doconce change_encoding utf-8 latin1 filename
        
        # guess the encoding in a text
        doconce guess_encoding filename
        
        # transform a .bbl file to a .rst file with reST bibliography format
        doconce bbl2rst file.bbl
        
        # split a sphinx/rst file into parts
        doconce split_rst complete_file.rst
        
        # edit URLs to local files and place them in _static
        doconce sphinxfix_local_URLs file.rst
        
        # split an html file into parts according to !split commands
        doconce split_html complete_file.html
        
        # create slides from a (doconce) html file
        doconce slides_html slide_type complete_file.html
        
        # replace bullets in lists by colored bullets
        doconce html_colorbullets file1.html file2.html ...
        
        # grab selected text from a file
        doconce grab   --from[-] from-text [--to[-] to-text] somefile
        
        # remove selected text from a file
        doconce remove --from[-] from-text [--to[-] to-text] somefile
        
        # remove answers to exercises
        doconce remove_exercise_answers file_in_some_format
        
        # run spellcheck on a set of files
        doconce spellcheck [-d .mydict.txt] *.do.txt
        
        # transform ptex2tex files (.p.tex) to ordinary latex file
        # and manage the code environments
        doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
                dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}
        
        # expand short cut commands to full form in files
        doconce expand_commands file1 file2 ...
        
        # combine several images into one
        doconce combine_images image1 image2 ... output_file
        
        # insert a table of exercises in a latex file myfile.p.tex
        doconce latex_exercise_toc myfile
        
        # list all labels in a document (for purposes of cleaning them up)
        doconce list_labels myfile


Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows::


        ===== Problem: Derive the Formula for the Area of an Ellipse =====
        label{problem:ellipsearea1}
        file=ellipse_area.pdf
        solution=ellipse_area1_sol.pdf
        
        Derive an expression for the area of an ellipse by integrating
        the area under a curve that defines half of the allipse.
        Show each step in the mathematical derivation.
        
        !bhint
        Wikipedia has the formula for the curve.
        !ehint
        
        !bhint
        "Wolframalpha": "http://wolframalpha.com" can perhaps
        compute the integral.
        !ehint

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads::


        ===== {Problem}: Derive the Formula for the Area of an Ellipse =====

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up::


        ===== Exercise: Determine the Distance to the Moon =====
        label{exer:moondist}
        
        Intro to this exercise. Questions are in subexercises below.
        
        !bsubex
        Subexercises are numbered a), b), etc.
        
        file=subexer_a.pdf
        
        !bans
        Short answer to subexercise a).
        !eans
        
        !bhint
        First hint to subexercise a).
        !ehint
        
        !bhint
        Second hint to subexercise a).
        !ehint
        !esubex
        
        !bsubex
        Here goes the text for subexercise b).
        
        file=subexer_b.pdf
        
        !bhint
        A hint for this subexercise.
        !ehint
        
        !bsol
        Here goes the solution of this subexercise.
        !esol
        !esubex
        
        !bremarks
        At the very end of the exercise it may be appropriate to summarize
        and give some perspectives. The text inside the !bremarks-!eremarks
        directives is always typeset at the end of the exercise.
        !eremarks
        
        !bsol
        Here goes a full solution of the whole exercise.
        !esol
        

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments --without-answers and --without-solutions
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with !benvirname and end with !eenvirname,
where envirname is the name of the environment. Here is a listing of
the environments:

 * c: computer code (or verbatim text)

 * t: math blocks with LaTeX syntax

 * subex: sub-exercise

 * ans: short answer to exercise or sub-exercise

 * sol: full solution to exercise or sub-exercise

 * notes: multi-line notes to be included or not

 * quote: indented text

 * notice, summary, warning, question, hint: boxes with
    specialy typesetting (or symbols)

 * pop: text to gradually pop up in slide presentations

 * slidecell: indication of cells in a grid layout for elements on a
   slide

Labels, Index, and Citations
----------------------------

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either preprocess and/or
mako. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The mako preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command doconce format first runs preprocess and then mako.
Here is a typical example on utilizing preprocess to include another
document, "comment out" a large portion of text, and to write format-specific
constructions::


        # #include "myotherdoc.do.txt"
        
        # #if FORMAT in ("latex", "pdflatex")
        \begin{table}
        \caption{Some words... label{mytab}}
        \begin{tabular}{lrr}
        \hline\noalign{\smallskip}
        \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
        \hline
        0.0          & 1.4186       & -5.01        \\
        2.0          & 1.376512     & 11.919       \\
        4.0          & 1.1E+1       & 14.717624    \\
        \hline
        \end{tabular}
        \end{table}
        # #else
          |--------------------------------|
          |time  | velocity | acceleration |
          |--l--------r-----------r--------|
          | 0.0  | 1.4186   | -5.01        |
          | 2.0  | 1.376512 | 11.919       |
          | 4.0  | 1.1E+1   | 14.717624    |
          |--------------------------------|
        # #endif
        
        # #ifdef EXTRA_MATERIAL
        ....large portions of text...
        # #endif


With the mako preprocessor the if-else tests have slightly different syntax.
An example document (http://hplgit.github.com/bioinf-py/) contains
some illustrations on how to utilize mako (clone the GitHub project and
examine the Doconce source and the doc/src/make.sh script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"

************** File: quickref.md *****************
% Doconce Quick Reference
% Hans Petter Langtangen at Simula Research Laboratory and University of Oslo
% Jan 32, 2100

<!-- Table of contents: Run pandoc with --toc option -->



<!-- Very preliminary -->

_WARNING: This quick reference is very incomplete!_


Supported Formats
-----------------

Doconce currently translates files to the following formats:

 * LaTeX (format `latex` and `pdflatex`)

 * HTML (format `html`)

 * reStructuredText (format `rst`)

 * plain (untagged) ASCII (format `plain`)

 * Sphinx (format `sphinx`)

 * (Pandoc extended) Markdown (format `pandoc`)

 * Googlecode wiki (format `gwiki`)

 * MediaWiki for Wikipedia and Wikibooks (format `mwiki`)

 * Creoloe wiki (format `cwiki`)

 * Epydoc (format `epydoc`)

 * StructuredText (format `st`)

The best supported formats are `latex`, `sphinx`, `html`, and `plain`.

Title, Authors, and Date
------------------------

A typical example of giving a title, a set of authors, a date,
and an optional table of contents
reads

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
TITLE: On an Ultimate Markup Language
AUTHOR: H. P. Langtangen at Center for Biomedical Computing, Simula Research Laboratory and Dept. of Informatics, Univ. of Oslo
AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cyberspace Inc.
AUTHOR: A. Dummy Author
DATE: today
TOC: on
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The entire title must appear on a single line.
The author syntax is

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
name Email: somename@adr.net at institution1 and institution2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

where the email is optional, the "at" keyword is required if one or
more institutions are to be specified, and the "and" keyword
separates the institutions. Each author specification must appear
on a single line.
When more than one author belong to the
same institution, make sure that the institution is specified in an identical
way for each author.

The date can be set as any text different from `today` if not the
current date is wanted, e.g., `Feb 22, 2016`.

The table of contents is removed by writing `TOC: off`.


Section Types
-------------


            Section type                             Syntax                 
------------------------------------  ------------------------------------  
chapter                               `========= Heading ========` (9 `=`)  
section                               `======= Heading =======`    (7 `=`)  
subsection                            `===== Heading =====`        (5 `=`)  
subsubsection                         `=== Heading ===`            (3 `=`)  
paragraph                             `__Heading.__`               (2 `_`)  
abstract                              `__Abstract.__` Running text...       


Note that abstracts are recognized by starting with `__Abstract.__` at
the beginning of a line and ending with three or more `=` signs of the
next heading.

Appendix is supported: just let the heading start with "Appendix: "
(this affects only `latex` output, where the appendix formatting
is used - all other formats just leave the heading as it is written).

Inline Formatting
-----------------

Words surrounded by `*` are emphasized: `*emphasized words*` becomes
*emphasized words*. Similarly, an underscore surrounds words that
appear in boldface: `_boldface_` become _boldface_.

Lists
-----

There are three types of lists: *bullet lists*, where each item starts
with `*`, *enumeration lists*, where each item starts with `o` and gets
consqutive numbers,
and *description* lists, where each item starts with `-` followed
by a keyword and a colon.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Here is a bullet list:

 * item1
 * item2
  * subitem1 of item2
  * subitem2 of item2
 * item3

Note that sublists are consistently indented by one or more blanks..
Here is an enumeration list:

 o item1
 o item2
   may appear on
   multiple lines
  o subitem1 of item2
  o subitem2 of item2
 o item3

And finally a description list:

 - keyword1: followed by
   some text
   over multiple
   lines
 - keyword2:
   followed by text on the next line
 - keyword3: and its description may fit on one line
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The code above follows.

Here is a bullet list:

 * item1

 * item2

  * subitem1 of item2

  * subitem2 of item2


 * item3

Note that sublists are indented.
Here is an enumeration list:

1. item1

2. item2
   may appear on
   multiple lines

 1. subitem1 of item2

 2. subitem2 of item2


3. item3

And finally a description list:

 keyword1:
  :    
   followed by
   some text
   over multiple
   lines

 keyword2:
  :    
   followed by text on the next line

 keyword3:
  :    
   and its description may fit on one line

Comments
--------

Lines starting with `#` are treated as comments in the document and
translated to the proper syntax for comments in the output
document. Such comment lines should not appear before LaTeX math
blocks, verbatim code blocks, or lists if the formats `rst` and
`sphinx` are desired.

When using the Mako preprocessor one can also place comments in
the Doconce source file that will be removed by Mako before
Doconce starts processing the file. Mako comments are recognized
by lines starting with two hashes `##` or by blocks of text
inside the comment directives `%<doc>` (beginning) and `<%doc/>` (end).

Inline comments, in the text, that are meant as messages or notes to readers
(authors in particular)
are often useful and enabled by the syntax

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[name: running text]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

where `name` is the name or ID of an author or reader making the comment,
and `running text` is the comment. There must be a space after the colon.
Running

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
doconce format html mydoc.do.txt --skip_inline_comments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

removes all such inline comments from the output. This feature makes it easy
to turn on and off notes to readers and is frequently used while writing
a document.

All inline comments to readers can also be physically
removed from the Doconce source if desired:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
doconce remove_inline_comments mydoc.do.txt
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This action is appropriate when all issues with such comments are resolved.

Verbatim/Computer Code
----------------------

Inline verbatim code is typeset within back-ticks, as in

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Some sentence with `words in verbatim style`.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

resulting in Some sentence with `words in verbatim style`.

Multi-line blocks of verbatim text, typically computer code, is typeset
in between `!bc xxx` and `!ec` directives, which must appear on the
beginning of the line. A specification `xxx` indicates what verbatim
formatting style that is to be used. Typical values for `xxx` are
nothing, `cod` for a code snippet, `pro` for a complete program,
`sys` for a terminal session, `dat` for a data file (or output from a
program),
`Xpro` or `Xcod` for a program or code snipped, respectively,
in programming `X`, where `X` may be `py` for Python,
`cy` for Cython, `sh` for Bash or other Unix shells,
`f` for Fortran, `c` for C, `cpp` for C++, `m` for MATLAB,
`pl` for Perl. For output in `latex` one can let `xxx` reflect any
defined verbatim environment in the `ptex2tex` configuration file
(`.ptex2tex.cfg`). For `sphinx` output one can insert a comment

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=console
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

that maps environments (`xxx`) onto valid language types for
Pygments (which is what `sphinx` applies to typeset computer code).

The `xxx` specifier has only effect for `latex` and
`sphinx` output. All other formats use a fixed monospace font for all
kinds of verbatim output.

Here is an example of computer code (see the source of this document
for exact syntax):


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Python}
from numpy import sin, cos, exp, pi

def f(x, y, z, t):
    return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- When showing copy from file in !bc envir, indent a character - otherwise -->
<!-- ptex2tex is confused and starts copying... -->
Computer code can also be copied from a file:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 @@@CODE doconce_program.sh
 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce split_rst
 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce split_rst
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The `@@@CODE` identifier must appear at the very beginning of the line.
The first specification copies the complete file `doconce_program.sh`.
The second specification copies from the first line matching the *regular
expression* `doconce clean` up to, but not including the line
matching the *regular expression* `^doconce split_rst`.
The third specification behaves as the second, but the line matching
the first regular expression is not copied (aimed at copying
text between begin-end comment pair in the file).

The copied line from file are in this example put inside `!bc shpro`
and `!ec` directives, if a complete file is copied, while the
directives become `!bc shcod` and `!ec` when a code snippet is copied
from file. In general, for a filename extension `.X`, the environment
becomes `!bc Xpro` or `!bc Xcod` for a complete program or snippet,
respectively. The enivorments (`Xcod` and `Xpro`) are only active
for `latex` and `sphinx` outout.

Important warnings:

 * A code block must come after some plain sentence (at least for successful
   output in reStructredText), not directly after a section/paragraph heading,
   table, comment, figure, or movie.

 * Verbatim code blocks inside lists can be ugly typeset in some
   output formats. A more robust approach is to replace the list by
   paragraphs with headings.

LaTeX Mathematics
-----------------

Doconce supports inline mathematics and blocks of mathematics, using
standard LaTeX syntax. The output formats `sphinx`, `latex`, and `pdflatex`
work with this syntax while all other formats will just display the
raw LaTeX code.

Inline expressions are written in the standard
LaTeX way with the mathematics surrounded by dollar signs, as in
$Ax=b$. To help increase readability in other formats than `sphinx`,
`latex`, and `pdflatex`, inline mathematics may have a more human
readable companion expression. The syntax is like

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
$\sin(\norm{\bf u})$|$sin(||u||)$
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

That is, the LaTeX expression appears to the left of a vertical bar (pipe
symbol) and the more readable expression appears to the right. Both
expressions are surrounded by dollar signs. Plain text formats and HTML
will applied the expression to the right.

Blocks of LaTeX mathematics are written within
`!bt`
and
`!et` (begin/end TeX) directives starting on the beginning of a line:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<!-- Note: !bt and !et (and !bc and !ec below) are used to illustrate -->
<!-- tex and code blocks in inside verbatim blocks and are replaced -->
<!-- by !bt, !et, !bc, and !ec after all other formatting is finished. -->
This LaTeX code gets rendered as

$$
\begin{align*}
\nabla\cdot \pmb{u} &= 0,\\
\nabla\times \pmb{u} &= 0.
\end{align*}
$$
Here is a single equation:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
!bt
\[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.\]
!et
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

which results in

$$
 \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb{u} = 0.
$$

One can use `#if FORMAT in ("latex", "pdflatex", "html", "sphinx", "mwiki")`
to let the preprocessor choose a block of mathematics in LaTeX format
or (`#else`) a modified form more suited for plain text and wiki
formats without support for mathematics.

Any LaTeX syntax is accepted, but if output in the `sphinx`, `pandoc`,
`mwiki`, or `html` formats
is important, one must know that these formats does not support many
LaTeX constructs. For output both in `latex` or `pdflatex` *and*
the mentioned formats with LaTeX support,
the following rules are recommended:

  * Use only the equation environments `\[`, `\]`,
    `equation`, `equation*`, `align`, and `align*`.

  * Labels in multiple equation environments such as `align` are
    not (yet) handled by `pandoc`.

  * MediaWiki (`mwiki`) does not support references to equations.



*Notice.* LaTeX supports lots of fancy formatting, for example, multiple
plots in the same figure, footnotes, margin notes, etc.
Allowing other output formats, such as `sphinx`, makes it necessary
to only utilze very standard LaTeX and avoid, for instance, more than
one plot per figure. However, one can use preprocessor if-tests on
the format (typically `if FORMAT in ("latex", "pdflatex")`) to
include special code for `latex` and `pdflatex` output and more
straightforward typesetting for other formats. In this way, one can
also allow advanced LaTeX features and fine tuning of resulting
PDF document.

*LaTeX Newcommands.* Text missing...


Figures and Movies
------------------

Figures and movies have almost equal syntax:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
FIGURE: [relative/path/to/figurefile, width=500] Here goes the caption which must be on a single line. \label{some:fig:label}

MOVIE: [relative/path/to/moviefile, width=500] Here goes the caption which must be on a single line. \label{some:fig:label}

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Note the mandatory comma after the figure/movie file.

The figure file can be listed without extension. Doconce will then find
the version of the file with the most appropriate extension for the chosen
output format. If not suitable version is found, Doconce will convert
another format to the desired one.

Movie files can either be a video or a wildcard expression for a
series of frames. In the latter case, a simple device in an HTML page
will display the individual frame files as a movie.

Combining several image files into one can be done by the
`convert` and `montage` programs from the ImageMagick suite:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~{.Bash}
montage file1.png file2.png ... file4.png -geometry +2+2  result.png
montage file1.png file2.png -tile x1 result.png
montage file1.png file2.png -tile 1x result.png

convert -background white file1.png file2.png +append tmp.png
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Use `+append` for stacking left to right, `-append` for top to bottom.
The positioning of the figures can be controlled by `-gravity`.


Tables
------

The table in the section [Section Types](#s) was written with this
syntax:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
|----------------c--------|------------------c--------------------|
|      Section type       |        Syntax                         |
|----------------l--------|------------------l--------------------|
| chapter                 | `========= Heading ========` (9 `=`)  |
| section                 | `======= Heading =======`    (7 `=`)  |
| subsection              | `===== Heading =====`        (5 `=`)  |
| subsubsection           | `=== Heading ===`            (3 `=`)  |
| paragraph               | `__Heading.__`               (2 `_`)  |
|-----------------------------------------------------------------|
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Note that

 * Each line begins and ends with a vertical bar (pipe symbol).

 * Column data are separated by a vertical bar (pipe symbol).

 * There may be horizontal rules, i.e., lines with dashes for
   indicating the heading and the end of the table, and these may
   contain characters 'c', 'l', or 'r' for how to align headings or
   columns. The first horizontal rule may indicate how to align
   headings (center, left, right), and the horizontal rule after the
   heading line may indicate how to align the data in the columns
   (center, left, right).

 * If the horizontal rules are without alignment information there should
   be no vertical bar (pipe symbol) between the columns. Otherwise, such
   a bar indicates a vertical bar between columns in LaTeX.

 * Many output formats are so primitive that heading and column alignment
   have no effect.

Labels, References, Citations, and Index
----------------------------------------

The notion of labels, references, citations, and an index is adopted
from LaTeX with a very similar syntax. As in LaTeX, a label can be
inserted anywhere, using the syntax

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
\label{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

with no backslash
preceding the label keyword! It is common practice to choose `name`
as some hierarchical name, say `a:b:c`, where `a` and `b` indicate
some abbreviations for a section and/or subsection for the topic and
`c` is some name for the particular unit that has a label.

A reference to the label `name` is written as

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ref{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

again with no backslash before `ref`.

Single citations are written as

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cite{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

where `name` is a logical name
of the reference (again, LaTeX writers must not insert a backslash).
Bibliography citations often have `name` on the form
`Author1_Author2_YYYY`, `Author_YYYY`, or `Author1_etal_YYYY`, where
`YYYY` is the year of the publication.
Multiple citations at once is possible by separating the logical names
by comma:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cite{name1,name2,name3}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The bibliography is specified by a line `BIBFILE: name_bib.bib,
name_bib.rst, name_bib.py`, where `name` is the logical name of the
document (the doconce file will then normally have the name
`name.do.txt`), and the various files reflect different formattings of
the bibliography: '.bib' indicates a BibTeX file, '.rst' a reST-style
bibliography, and '.py' a Python list of dictionaries for specifying
the entries in the bibliography. The bibliography (as read from file)
is inserted where the `BIBFILE` keyword appears.

There is a *generalized referencing* feature in Doconce that allows
a reference with `ref` to have one formulation if the label is
in the same document and another formulation if the reference is
to an item in an external document. The syntax of a generalized
reference is

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ref[internal][cite][external]

# Example:
As explained in
ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section":
"testdoc.html#___sec2" in the document
"A Document for Testing Doconce": "testdoc.html" cite{testdoc:12}],
Doconce documents may include movies.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The output from a generalized reference is the text `internal` if all
`ref{label}` references in `internal` are references to labels in the
present document. Otherwise, if cite is non-empty and the format is
`latex` or `pdflatex` one assumes that the references in `internal`
are to external documents declared by a comment line `#
Externaldocuments: testdoc, mydoc` (usually after the title, authors,
and date). In this case the output text is `internal cite` and the
LaTeX package `xr` is used to handle the labels in the external
documents.  If none of the two situations above applies, the
`external` text will be the output.

Doconce supports creating an index of keywords. A certain keyword
is registered for the index by a syntax like (no
backslash!)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
index{name}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is recommended to place any index of this type outside
running text, i.e., after (sub)section titles and in the space between
paragraphs. Index specifications placed right before paragraphs also
gives the doconce source code an indication of the content in the
forthcoming text. The index is only produced for the `latex`, `rst`, and
`sphinx` formats.

Capabilities of the "doconce" Program
-------------------------------------

The `doconce` program can be used for a number of purposes besides
transforming a `.do.txt` file to some format. Here is the
list of capabilities:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Usage: doconce command [optional arguments]
commands: format help sphinx_dir subst replace replace_from_file clean spellcheck ptex2tex expand_commands combine_images guess_encoding change_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_answers split_rst split_html slides_html latin2html latex_header latex_footer bbl2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code_links latex_exercise_toc insertdocstr old2new_format


# transform doconce file to another format
doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwiki|cwiki|pandoc|st|epytext file.do.txt

# substitute a phrase by another using regular expressions
doconce subst [-s -m -x --restore] regex-pattern regex-replacement file1 file2 ...
(-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier,
 -x is the re.VERBOSE modifier, --restore copies backup files back again)

# replace a phrase by another literally
doconce replace from-text to-text file1 file2 ...
(exact text substutition)

# doconce replace using from and to phrases from file
doconce replace_from_file file-with-from-to file1 file2 ...
(exact text substitution, but a set of from-to relations)

# gwiki format requires substitution of figure file names by URLs
doconce gwiki_figsubst file.gwiki URL-of-fig-dir

# remove all inline comments in a doconce file
doconce remove_inline_comments file.do.txt

# create a directory for the sphinx format
doconce sphinx_dir author='John Doe' title='Long title' \
    short_title="Short title" version=0.1 \
    dirname=sphinx-rootdir theme=default logo=mylogo.png \
    do_file [do_file2 do_file3 ...]
(requires sphinx version >= 1.1)

# replace latex-1 (non-ascii) characters by html codes
doconce latin2html file.html

# walk through a directory tree and insert doconce files as
# docstrings in *.p.py files
doconce insertdocstr rootdir

# remove all files that the doconce format can regenerate
doconce clean

# print the header (preamble) for latex file
doconce latex_header

# print the footer for latex files
doconce latex_footer

# change encoding
doconce change_encoding utf-8 latin1 filename

# guess the encoding in a text
doconce guess_encoding filename

# transform a .bbl file to a .rst file with reST bibliography format
doconce bbl2rst file.bbl

# split a sphinx/rst file into parts
doconce split_rst complete_file.rst

# edit URLs to local files and place them in _static
doconce sphinxfix_local_URLs file.rst

# split an html file into parts according to !split commands
doconce split_html complete_file.html

# create slides from a (doconce) html file
doconce slides_html slide_type complete_file.html

# replace bullets in lists by colored bullets
doconce html_colorbullets file1.html file2.html ...

# grab selected text from a file
doconce grab   --from[-] from-text [--to[-] to-text] somefile

# remove selected text from a file
doconce remove --from[-] from-text [--to[-] to-text] somefile

# remove answers to exercises
doconce remove_exercise_answers file_in_some_format

# run spellcheck on a set of files
doconce spellcheck [-d .mydict.txt] *.do.txt

# transform ptex2tex files (.p.tex) to ordinary latex file
# and manage the code environments
doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \
        dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{quote}

# expand short cut commands to full form in files
doconce expand_commands file1 file2 ...

# combine several images into one
doconce combine_images image1 image2 ... output_file

# insert a table of exercises in a latex file myfile.p.tex
doconce latex_exercise_toc myfile

# list all labels in a document (for purposes of cleaning them up)
doconce list_labels myfile
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Exercises
---------

Doconce supports *Exercise*, *Problem*, *Project*, and *Example*.
These are typeset
as ordinary sections and referred to by their section labels.
Exercise, problem, project, or example sections contains certain *elements*:

  * a headline at the level of a subsection
    containing one of the words "Exercise:", "Problem:",
    "Project:", or "Example:", followed by a title (required)

  * a label (optional)

  * a solution file (optional)

  * name of file with a student solution (optional)

  * main exercise text (required)

  * a short answer (optional)

  * a full solution (optional)

  * one or more hints (optional)

  * one or more subexercises (subproblems, subprojects), which can also
    contain a text, a short answer, a full solution, name student file
    to be handed in, and one or more hints (optional)

A typical sketch of a a problem without subexercises goes as follows:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
===== Problem: Derive the Formula for the Area of an Ellipse =====
\label{problem:ellipsearea1}
file=ellipse_area.pdf
solution=ellipse_area1_sol.pdf

Derive an expression for the area of an ellipse by integrating
the area under a curve that defines half of the allipse.
Show each step in the mathematical derivation.

!bhint
Wikipedia has the formula for the curve.
!ehint

!bhint
"Wolframalpha": "http://wolframalpha.com" can perhaps
compute the integral.
!ehint
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If the exercise type (Exercise, Problem, Project, or Example)
is enclosed in braces, the type is left out of the title in the
output. For example, the if the title line above reads


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
===== {Problem}: Derive the Formula for the Area of an Ellipse =====
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

the title becomes just "Derive the ...".

An exercise with subproblems, answers and full solutions has this
setup-up:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
===== Exercise: Determine the Distance to the Moon =====
\label{exer:moondist}

Intro to this exercise. Questions are in subexercises below.

!bsubex
Subexercises are numbered a), b), etc.

file=subexer_a.pdf

!bans
Short answer to subexercise a).
!eans

!bhint
First hint to subexercise a).
!ehint

!bhint
Second hint to subexercise a).
!ehint
!esubex

!bsubex
Here goes the text for subexercise b).

file=subexer_b.pdf

!bhint
A hint for this subexercise.
!ehint

!bsol
Here goes the solution of this subexercise.
!esol
!esubex

!bremarks
At the very end of the exercise it may be appropriate to summarize
and give some perspectives. The text inside the !bremarks-!eremarks
directives is always typeset at the end of the exercise.
!eremarks

!bsol
Here goes a full solution of the whole exercise.
!esol

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

By default, answers, solutions, and hints are typeset as paragraphs.
The command-line arguments `--without-answers` and `--without-solutions`
turn off output of answers and solutions, respectively, except for
examples.


Environments
------------

Doconce environments start with `!benvirname` and end with `!eenvirname`,
where `envirname` is the name of the environment. Here is a listing of
the environments:

 * `c`: computer code (or verbatim text)

 * `t`: math blocks with LaTeX syntax

 * `subex`: sub-exercise

 * `ans`: short answer to exercise or sub-exercise

 * `sol`: full solution to exercise or sub-exercise

 * `notes`: multi-line notes to be included or not

 * `quote`: indented text

 * `notice`, `summary`, `warning`, `question`, `hint`: boxes with
    specialy typesetting (or symbols)

 * `pop`: text to gradually pop up in slide presentations

 * `slidecell`: indication of cells in a grid layout for elements on a
   slide

Labels, Index, and Citations
----------------------------

Preprocessing
-------------

Doconce documents may utilize a preprocessor, either `preprocess` and/or
`mako`. The former is a C-style preprocessor that allows if-tests
and including other files (but not macros with arguments).
The `mako` preprocessor is much more advanced - it is actually a full
programming language, very similar to Python.

The command `doconce format` first runs `preprocess` and then `mako`.
Here is a typical example on utilizing `preprocess` to include another
document, "comment out" a large portion of text, and to write format-specific
constructions:


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# #include "myotherdoc.do.txt"

# #if FORMAT in ("latex", "pdflatex")
\begin{table}
\caption{Some words... \label{mytab}}
\begin{tabular}{lrr}
\hline\noalign{\smallskip}
\multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \multicolumn{1}{c}{acceleration} \\
\hline
0.0          & 1.4186       & -5.01        \\
2.0          & 1.376512     & 11.919       \\
4.0          & 1.1E+1       & 14.717624    \\
\hline
\end{tabular}
\end{table}
# #else
  |--------------------------------|
  |time  | velocity | acceleration |
  |--l--------r-----------r--------|
  | 0.0  | 1.4186   | -5.01        |
  | 2.0  | 1.376512 | 11.919       |
  | 4.0  | 1.1E+1   | 14.717624    |
  |--------------------------------|
# #endif

# #ifdef EXTRA_MATERIAL
....large portions of text...
# #endif
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

With the `mako` preprocessor the if-else tests have slightly different syntax.
An [example document](http://hplgit.github.com/bioinf-py/) contains
some illustrations on how to utilize `mako` (clone the GitHub project and
examine the Doconce source and the `doc/src/make.sh` script).

Resources
---------

 * Excellent "Sphinx Tutorial" by C. Reller: "http://people.ee.ethz.ch/~creller/web/tricks/reST.html"

+ rm -rf html_images reveal.js downloaded_figures
+ doconce format html testdoc --wordpress --examples-as-exercises
running preprocess -DFORMAT=html  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
output in testdoc.html
+ [ 0 -ne 0 ]
+ cp testdoc.html testdoc_wordpress.html
+ doconce format html testdoc --without-answers --without-solutions --examples-as-exercises -DSOMEVAR
running preprocess -DFORMAT=html -DSOMEVAR testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
mako variables: {'SOMEVAR': True, 'FORMAT': 'html'}
translating preprocessed doconce text in __tmp.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
output in testdoc.html
+ [ 0 -ne 0 ]
+ cp testdoc.html testdoc_no_solutions.html
+ doconce format latex testdoc --without-answers --without-solutions --examples-as-exercises -DSOMEVAR
running preprocess -DFORMAT=latex -DSOMEVAR testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
mako variables: {'SOMEVAR': True, 'FORMAT': 'latex'}
translating preprocessed doconce text in __tmp.do.txt to latex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.eps for format latex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......
output in testdoc.p.tex
+ [ 0 -ne 0 ]
+ cp testdoc.p.tex testdoc_no_solutions.p.tex
+ doconce format html testdoc.do.txt --pygments-html-linenos --html-style=solarized --pygments-html-style=emacs --examples-as-exercises
running preprocess -DFORMAT=html  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to html

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format html
output in testdoc.html
+ [ 0 -ne 0 ]
+ doconce remove_exercise_answers testdoc.html
no answers/solutions to exercises found in testdoc.html
+ [ 0 -ne 0 ]
+ doconce html_colorbullets testdoc.html
+ [ 0 -ne 0 ]
+ doconce split_html testdoc.html
testdoc.html now links to the generated files
._part0000_testdoc.html, ._part0001_testdoc.html, ._part0002_testdoc.html
+ [ 0 -ne 0 ]
+ doconce format latex testdoc.do.txt --examples-as-exercises SOMEVAR=True
running preprocess -DFORMAT=latex -DSOMEVAR=True testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
mako variables: {'SOMEVAR': True, 'FORMAT': 'latex'}
translating preprocessed doconce text in __tmp.do.txt to latex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.eps for format latex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......
output in testdoc.p.tex
+ [ 0 -ne 0 ]
+ doconce format pdflatex testdoc.do.txt --latex-printed --examples-as-exercises
running preprocess -DFORMAT=pdflatex  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to pdflatex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format pdflatex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......
output in testdoc.p.tex
+ [ 0 -ne 0 ]
+ doconce latex_exercise_toc testdoc
table of exercises inserted in testdoc.p.tex
+ [ 0 -ne 0 ]
+ doconce replace vspace{1cm} % after toc clearpage % after toc testdoc.p.tex
replacing vspace{1cm} % after toc by clearpage % after toc in testdoc.p.tex
+ [ 0 -ne 0 ]
+ thpack=\\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section]
+ doconce subst % insert custom LaTeX commands\.\.\. \\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section] testdoc.p.tex
% insert custom LaTeX commands\.\.\. replaced by \\usepackage{theorem}\n\\newtheorem{theorem}{Theorem}[section] in testdoc.p.tex
+ [ 0 -ne 0 ]
+ doconce subst \\paragraph\{Theorem \d+\.\}  testdoc.p.tex
\\paragraph\{Theorem \d+\.\} replaced by  in testdoc.p.tex
+ doconce replace % begin theorem \begin{theorem} testdoc.p.tex
replacing % begin theorem by \begin{theorem} in testdoc.p.tex
+ doconce replace % end theorem \end{theorem} testdoc.p.tex
replacing % end theorem by \end{theorem} in testdoc.p.tex
+ ptex2tex -DMINTED -DMOVIE15 -DLATEX_HEADING=titlepage testdoc
running preprocessor on testdoc.p.tex...  defines: 'MINTED', 'LATEX_HEADING', 'MOVIE15'  done
done testdoc.p.tex -> testdoc.tex
+ [ 0 -ne 0 ]
+ pdflatex -shell-escape testdoc
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./testdoc.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty


(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def



(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty

(/home/hpl/texmf/tex/latex/misc/ptex2tex.sty
(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz))
(/usr/share/texlive/texmf-dist/tex/latex/moreverb/moreverb.sty


(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty

(/home/hpl/texmf/tex/latex/misc/anslistings.sty
(/usr/share/texlive/texmf-dist/tex/latex/listings/listings.sty


(/usr/share/texmf/tex/latex/xcolor/xcolor.sty

(/home/hpl/texmf/tex/latex/misc/movie15.sty




(/home/hpl/texmf/tex/latex/misc/minted.sty


(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty

(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./testdoc.w18))/usr/local/bin/pygmentize
) (./testdoc.pyg)
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (autodetected): hpdftex.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def


(/usr/share/texlive/texmf-dist/tex/latex/tools/theorem.sty

Writing index file testdoc.idx
No file testdoc.aux.
(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii
[Loading MPS to PDF converter (version 2006.09.02).]
) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty


ABD: EveryShipout initializing macros
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./newcommands_replace.tex)

 [1{/var/lib/texmf/fo
nts/map/pdftex/updmap/pdftex.map}]

LaTeX Warning: Reference `demo:ex:1' on page 2 


LaTeX Warning: Reference `demo:ex:2' on page 2 


LaTeX Warning: Reference `proj:circle1' on page 2 


LaTeX Warning: Reference `exer:dist' on page 2 


LaTeX Warning: Reference `exer:some:formula' on page 2 undefined on input line 
143.


LaTeX Warning: Reference `exer:you' on page 2 

[2] 

LaTeX Warning: Reference `sec1' on page 3 


LaTeX Warning: Reference `subsubsec:ex' on page 3 

(./testdoc.out.pyg) (./testdoc.out.pyg [3]) (./testdoc.out.pyg)
(./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg) (./testdoc.out.pyg)
[4]
Overfull \hbox (43.91478pt too wide) 
[]\OT1/cmr/m/n/10 It is time to test [] es-pe-cially with []

LaTeX Warning: Reference `fig:impact' on page 5 

<../doc/manual/figs/streamtubes.png, id=40, 583.17876pt x 437.635pt>
<use ../doc/manual/figs/streamtubes.png>
<use ../doc/manual/figs/streamtubes.png>
Underfull \vbox (badness 2310) has occurred while \output is active [5]
Overfull \hbox (47.04507pt too wide) 
\OT1/cmr/m/n/10 the full wavepacket.mpeg movie). [](Movie of files []
[6 <../doc/manual/figs/streamtubes.png>]

LaTeX Warning: Reference `myfig' on page 7 

<../doc/manual/figs/wavepacket_0001.png, id=88, 642.4pt x 481.8pt>
<use ../doc/manual/figs/wavepacket_0001.png>

LaTeX Warning: Reference `mymov' on page 7 

<downloaded_figures/f_plot.png, id=89, 578.16pt x 433.62pt>
<use downloaded_figures/f_plot.png>
Underfull \vbox (badness 10000) has occurred while \output is active [7<<../doc
/manual/figs/mjolnir.mpeg>>]
Overfull \vbox (29.43953pt too high) has occurred while \output is active
[8<<../doc/manual/figs/wavepacket.mpeg>> <./downloaded_figures/f_plot.png>]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\theta' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\nabla' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 

[9 <../doc/manual/figs/wavepacket_0001.png>] [10]

Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `subscript' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `math shift' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 


Package hyperref Warning: Token not allowed in a PDF string (PDFDocEncoding):
(hyperref)                removing `\new@ifnextchar' on 

[11]
Overfull \hbox (78.30609pt too wide) 
[][][]\OT1/cmtt/m/n/8 http://www.springer.com/mathematics/computational+science
+%26+engineering/book/978-3-642-23098-1| 

Overfull \hbox (1.55275pt too wide) 
\OT1/cmtt/m/n/10 formulas$[][] \OT1/cmr/m/n/10 and [][]$\OT1/cmtt/m/n/10 http :
 / / en . wikipedia . org / wiki / Newton-[]Cotes # Open _ Newton .

Overfull \hbox (31.36086pt too wide) 
[]\OT1/cmr/m/n/10 More tough tests: re-peated URLs whose foot-notes when us-ing
 the []

LaTeX Warning: Reference `my:eq1' on page 12 


Package amsmath Warning: Foreign command \over;
(amsmath)                \frac or \genfrac should be used instead
(amsmath)                 on 


LaTeX Warning: Reference `my:eq1' on page 12 

[12]

LaTeX Warning: Reference `eq1' on page 13 


LaTeX Warning: Reference `eq2' on page 13 


LaTeX Warning: Reference `split:envir:eq' on page 13 undefined on input line 78
8.


LaTeX Warning: Reference `eq1' on page 13 


LaTeX Warning: Reference `eq2' on page 13 


LaTeX Warning: Reference `eq1a' on page 13 


LaTeX Warning: Reference `eq2a' on page 13 


LaTeX Warning: Reference `my:eq1' on page 13 


LaTeX Warning: Reference `demo:ex:1' on page 13 


LaTeX Warning: Reference `demo:ex:2' on page 13 


LaTeX Warning: Reference `proj:circle1' on page 13 



LaTeX Warning: Reference `exer:you' on page 13 


LaTeX Warning: Reference `exer:some:formula' on page 13 undefined on input line
 814.

[13] (./testdoc.out.pyg) (./testdoc.out.pyg [14]) [15] [16]

LaTeX Warning: Reference `proj:circle1' on page 17 undefined on input line 1174
.


LaTeX Warning: Reference `demo:ex:1' on page 17 


LaTeX Warning: Reference `demo:ex:2' on page 17 


LaTeX Warning: Reference `exer:some:formula' on page 17 undefined on input line
 1192.


LaTeX Warning: Reference `demo:ex:2' on page 17 


LaTeX Warning: Reference `proj:circle1' on page 17 undefined on input line 1193
.


LaTeX Warning: Reference `exer:you' on page 17 

<latex_figs/hint.pdf, id=262, 89.33376pt x 89.33376pt>
<use latex_figs/hint.pdf> [17]
<latex_figs/warning.pdf, id=279, 89.33376pt x 89.33376pt>
<use latex_figs/warning.pdf>
<latex_figs/summary.pdf, id=280, 89.33376pt x 89.33376pt>
<use latex_figs/summary.pdf>
<latex_figs/notice.pdf, id=281, 89.33376pt x 89.33376pt>
<use latex_figs/notice.pdf>
<latex_figs/question.pdf, id=282, 89.33376pt x 89.33376pt>
<use latex_figs/question.pdf>
No file testdoc.ind.

Package movie15 Warning: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
(movie15)                @@ Rerun to get object references right! @@
(movie15)                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.

[18 <./latex_figs/hint.pdf> <./latex_figs/warning.pdf> <./latex_figs/summary.pd
f> <./latex_figs/notice.pdf> <./latex_figs/question.pdf>] (./testdoc.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
  pdftex.def    2011/05/27 v0.06d Graphics/color for pdfTeX
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
inputenc.sty    2008/03/30 v1.1d Input encoding file
  latin1.def    2008/03/30 v1.1d Input encoding file
ptex2tex.sty    
fancyvrb.sty    2008/02/07
moreverb.sty    2008/06/03 v2.3a `more' verbatim facilities
verbatim.sty    2003/08/22 v1.5q LaTeX2e package for verbatim enhancements
  framed.sty    2011/10/22 v 0.96: framed or shaded text with page breaks
   color.sty    1999/02/16
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
anslistings.sty    2009/03/28 code highlighting; provided by Olivier Verdier <o
livier@maths.lth.se>
listings.sty    2007/02/22 1.4 (Carsten Heinz)
 lstmisc.sty    2007/02/22 1.4 (Carsten Heinz)
listings.cfg    2007/02/22 1.4 listings configuration
  xcolor.sty    2007/01/21 v2.11 LaTeX color extensions (UK)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
 movie15.sty    2009/07/07
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
 ifdraft.sty    2008/08/11 v1.3 Detect class options draft and final (HO)
everyshi.sty    2001/05/15 v3.00 EveryShipout Package (MS)
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
 testdoc.w18
 testdoc.pyg
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
 hpdftex.def    2012/05/13 v6.82q Hyperref driver for pdfTeX
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
 theorem.sty    1995/11/23 v2.2c Theorem extension package (FMi)
     thp.sty    1995/11/23 v2.2c Theorem extension package (FMi)
supp-pdf.mkii
epstopdf-base.sty    2010/02/09 v2.5 Base part for package epstopdf
  grfext.sty    2010/08/19 v1.1 Manage graphics extensions (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX Live
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
newcommands_replace.tex
    umsa.fd    2009/06/22 v3.00 AMS symbols A
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  omscmr.fd    1999/05/25 v2.5h Standard LaTeX font definitions
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
 testdoc.out.pyg
../doc/manual/figs/streamtubes.png
../doc/manual/figs/streamtubes.png
../doc/manual/figs/wavepacket_0001.png
downloaded_figures/f_plot.png
 testdoc.out.pyg
 testdoc.out.pyg
latex_figs/hint.pdf
latex_figs/warning.pdf
latex_figs/summary.pdf
latex_figs/notice.pdf
latex_figs/question.pdf
 ***********


Package rerunfilecheck Warning: File `testdoc.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)</usr/share/texlive/texmf-d
ist/fonts/type1/public/amsfonts/cm/cmbx10.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmbx12.pfb></usr/share/texlive/texmf-dist/fonts/ty
pe1/public/amsfonts/cm/cmbx8.pfb></usr/share/texlive/texmf-dist/fonts/type1/pub
lic/amsfonts/cm/cmbx9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/ams
fonts/cm/cmcsc10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts
/cm/cmitt10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/c
mmi10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi12.
pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi7.pfb></u
sr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmmi8.pfb></usr/shar
e/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb></usr/share/texli
ve/texmf-dist/fonts/type1/public/amsfonts/cm/cmr6.pfb></usr/share/texlive/texmf
-dist/fonts/type1/public/amsfonts/cm/cmr7.pfb></usr/share/texlive/texmf-dist/fo
nts/type1/public/amsfonts/cm/cmr8.pfb></usr/share/texlive/texmf-dist/fonts/type
1/public/amsfonts/cm/cmr9.pfb></usr/share/texlive/texmf-dist/fonts/type1/public
/amsfonts/cm/cmss12.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfo
nts/cm/cmsy10.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm
/cmsy7.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmti10
.pfb></usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt10.pfb><
/usr/share/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt12.pfb></usr/s
hare/texlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt8.pfb></usr/share/te
xlive/texmf-dist/fonts/type1/public/amsfonts/cm/cmtt9.pfb></usr/share/texlive/t
exmf-dist/fonts/type1/public/amsfonts/symbols/msam10.pfb>
Output written on testdoc.pdf (18 pages, ).
Transcript written on testdoc.log.
+ [ 0 -ne 0 ]
+ cp testdoc.tex testdoc.tex_ptex2tex
+ doconce ptex2tex testdoc -DBOOK -DPALATINO sys=begin{quote}begin{Verbatim}@end{Verbatim}end{quote} pypro=ans:nt envir=minted
+ echo ----------- end of doconce ptex2tex output ----------------
+ [ 0 -ne 0 ]
+ cat testdoc.tex
+ doconce format plain testdoc.do.txt --examples-as-exercises -DSOMEVAR=1
running preprocess -DFORMAT=plain -DSOMEVAR=1 testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
mako variables: {'SOMEVAR': 1, 'FORMAT': 'plain'}
translating preprocessed doconce text in __tmp.do.txt to plain

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
output in testdoc.txt
+ [ 0 -ne 0 ]
+ doconce format st testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=st  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to st

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
output in testdoc.st
+ [ 0 -ne 0 ]
+ doconce format sphinx testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=sphinx  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to sphinx

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!



*** warning:
Not recommended for sphinx output: math environment {eqnarray}
(use equation, \[ \], or align/align*)
Not recommended for sphinx output: math environment {multline}
Not recommended for sphinx output: math environment {gather}
*** warning: hyperlink to URL testdoc.do.txt is to a local file,
  - should be _static/testdoc.do.txt for sphinx.
Move files to _static and change URLs!
copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format sphinx

Warning: the "alignat" environment will give errors in Sphinx:

        \begin{alignat}{2}
        a &= q + 4 + 5+ 6\qquad & \mbox{for } q\geq 0  \\ 
        b &= \nabla^2 u + \nabla^4 x & x\in\Omega 
        \end{alignat}



Detected (align) equation systems with multiple labels
(that Sphinx will not handle - labels will be removed
and references to them will be empty):
label{eq1a}
label{eq2a}

output in testdoc.rst
+ [ 0 -ne 0 ]
+ mv -f testdoc.rst testdoc.sphinx.rst
+ doconce sphinx_dir author=HPL title=Just a test version=0.1 theme=agni testdoc
Making sphinx-rootdir
Welcome to the Sphinx 1.2pre quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]: 
You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: 
Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]: 
The project name will occur in several places in the built documentation.
> Project name: > Author name(s): 
Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don't need this dual structure,
just set both to the same value.
> Project version: > Project release [0.1]: 
The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]: * Please enter a file suffix, e.g. '.rst' or '.txt'.
> Source file suffix [.rst]: 
One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]: 
Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: 
Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: > doctest: automatically test code snippets in doctest blocks (y/N) [n]: > intersphinx: link between Sphinx documentation of different projects (y/N) [n]: > todo: write "todo" entries that can be shown or hidden on build (y/N) [n]: > coverage: checks for documentation coverage (y/N) [n]: > pngmath: include math, rendered as PNG images (y/N) [n]: > mathjax: include math, rendered in the browser by MathJax (y/N) [n]: > ifconfig: conditional inclusion of content based on config values (y/N) [n]: > viewcode: include links to the source code of documented Python objects (y/N) [n]: 
A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: > Create Windows command file? (Y/n) [y]: 
Creating file sphinx-rootdir/conf.py.
Creating file sphinx-rootdir/index.rst.
Creating file sphinx-rootdir/Makefile.
Creating file sphinx-rootdir/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file sphinx-rootdir/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__released__', '__version__', 'err', 'main', 'out', 'p', 'package_dir', 'path', 'subprocess', 'sys'] True
title: Just a test
author: HPL
theme: agni
These Sphinx themes were found: agni, agogo, basic, cbc, classy, cloud, default, epub, fenics, fenics_minimal, flask, haiku, jal, nature, pylons, pyramid, redcloud, scrolls, slim-agogo, solarized, sphinxdoc, traditional, vlinux-theme, default

'automake_sphinx.py' contains the steps to (re)compile the sphinx
version. You may want to edit this file, or run the steps manually,
or just run it by

  python automake_sphinx.py

+ [ 0 -ne 0 ]
+ doconce format rst testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=rst  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to rst

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format rst
output in testdoc.rst
+ [ 0 -ne 0 ]
+ doconce format epytext testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=epytext  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to epytext

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
output in testdoc.epytext
+ [ 0 -ne 0 ]
+ doconce format pandoc testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=pandoc  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to pandoc

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format pandoc
*** warning: latex envir \begin{multline} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

*** warning: latex envir \begin{gather} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

*** warning: latex envir \begin{alignat} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

*** warning: latex envir \begin{eqnarray} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

output in testdoc.md
+ [ 0 -ne 0 ]
+ doconce format mwiki testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=mwiki  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to mwiki

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format mwiki
NOTE: You must upload image file streamtubes.png to common.wikimedia.org
NOTE: You must upload image file streamtubes.png to common.wikimedia.org
NOTE: You must upload image file wavepacket_0001.png to common.wikimedia.org
NOTE: You must upload image file df2s8765s_plot.png to common.wikimedia.org
*** warning: reference to label "my:eq1" in an equation does not work in MediaWiki
output in testdoc.mwiki
+ [ 0 -ne 0 ]
+ doconce format cwiki testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=cwiki  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to cwiki

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format cwiki
output in testdoc.cwiki
+ [ 0 -ne 0 ]
+ doconce format ipynb testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=ipynb  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to ipynb

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format ipynb
output in testdoc.ipynb
+ [ 0 -ne 0 ]
+ doconce format gwiki testdoc.do.txt --skip_inline_comments MYVAR1=3 MYVAR2=a string --no-preprocess --examples-as-exercises
Found preprocess-like statements, but --no-preprocess prevents running preprocess
running mako on __tmp.do.txt to make __tmp.do.txt
mako variables: {'MYVAR1': 3, 'MYVAR2': 'a string', 'FORMAT': 'gwiki'}
translating preprocessed doconce text in __tmp.do.txt to gwiki

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format gwiki

NOTE: Place ../doc/manual/figs/streamtubes.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place ../doc/manual/figs/streamtubes.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place ../doc/manual/figs/wavepacket_0001.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place https://doconce.googlecode.com/hg/doc/blog/f_plot.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place testfigs/df_plot.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL


NOTE: Place testfigs/df2s8765s_plot.png at some place on the web and edit the
      .gwiki page, either manually (seach for 'Figure: ')
      or use the doconce script:
      doconce gwiki_figsubst.py mydoc.gwiki URL

output in testdoc.gwiki
+ [ 0 -ne 0 ]
+ doconce format latex testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=latex  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to latex

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.eps for format latex
downloading https://doconce.googlecode.com/hg/doc/blog/f_plot.png .......
output in testdoc.p.tex
+ [ 0 -ne 0 ]
+ doconce ptex2tex testdoc -DBOOK -DLATEX_HEADING=traditional
\bpypro (!bc pypro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bcpppro (!bc cpppro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bfpro (!bc fpro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bcod (!bc cod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bpycod (!bc pycod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bcycod (!bc cycod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bfcod (!bc fcod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bsys (!bc sys) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85]
+ [ 0 -ne 0 ]
+ doconce replace \Verb! \verb! testdoc.tex
replacing \Verb! by \verb! in testdoc.tex
+ [ 0 -ne 0 ]
+ pandoc -f latex -t markdown -o testdoc.md testdoc.tex
+ pandoc -f markdown -t html -o testdoc_pnd_l2h.html --mathjax -s testdoc.md
+ pandoc -v
+ doconce format pandoc testdoc.do.txt --examples-as-exercises
running preprocess -DFORMAT=pandoc  testdoc.do.txt > __tmp.do.txt
running mako on __tmp.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to pandoc

FIX: multi-line caption

 Movie
based on collection of frames
(here just a few frames compared with the full wavepacket.mpeg movie).
label{mymov}

-- fixed to one line

FIX: multi-line caption

 A long
caption spanning
several lines and containing verbatim words like `my_file_v1` and `my_file_v2`
as well as math with subscript as in $t_{i+1}$. label{myfig}

-- fixed to one line

FIX: FIGURE not at the beginning of the line - 1 fixes
 FIGURE: [../doc/manual/figs/wavepacket_0001.png, width=500] A long caption spanning several lines and containing verbatim words like `my_file_v1` and `my_file_v2` as well as math with subscript as in $t_{i+1}$. label{myfig} 


FIX: MOVIE not at the beginning of the line - 1 fixes
   MOVIE: [../doc/manual/figs/wavepacket_*.png, width=700 height=400] Movie based on collection of frames (here just a few frames compared with the full wavepacket.mpeg movie). label{mymov} 


FIX: !bhint not at the beginning of the line - 1 fixes
  !bhint


FIX: !ehint not at the beginning of the line - 1 fixes
  !ehint


*** The total of 6 fixes above should be incorporated in the file!


copying from regex "subroutine" until ""
     file: ../doc/manual/__testcode.f,  lines 3-16  (format: fcod)
copying after regex "a comment" until "^C\s+END1"
     file: ../doc/manual/__testcode.f,  lines 2-11  (format: fcod)
copy complete file ../doc/manual/__testcode.f  (format: fpro)

warning: open the solution in exercise "Flip a Coin" with a line of
text before the code! (Now "Code:" is inserted)

found info about 9 exercises, written to .testdoc.exerinfo
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format pandoc
*** warning: latex envir \begin{multline} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

*** warning: latex envir \begin{gather} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

*** warning: latex envir \begin{alignat} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

*** warning: latex envir \begin{eqnarray} does not work well:
    pandoc-extended markdown syntax handles only single equations
    (but doconce splits align environments into single equations).
    Labels in equations do not work with pandoc-extended markdown
    output.

output in testdoc.md
+ [ 0 -ne 0 ]
+ pandoc -t html -o testdoc_pnd_d2h.html --mathjax -s testdoc.md
+ pandoc -v
+ doconce format html slides --pygments-html-style=emacs
translating doconce text in slides.do.txt to html
output in slides.html
+ [ 0 -ne 0 ]
+ doconce slides_html slides reveal --html-slide-type=beigesmall
made subdirectory reveal.js
*** warning: pygments style "emacs" is not recommended for "beige"!
recommended styles are "perldoc"
slides written to slides.html
+ [ 0 -ne 0 ]
+ mv -f slides.html slides_reveal.html
+ /bin/ls -R reveal.js
+ doconce format html slides --pygments-html-style=emacs
translating doconce text in slides.do.txt to html
output in slides.html
+ doconce slides_html slides all
run
  sh tmp_slides_html_all.sh
to generate the slides
+ [ 0 -ne 0 ]
+ doconce grab --from- ={5} Subsection 1 --to subroutine@ testdoc.do.txt
+ [ 0 -ne 0 ]
+ doconce grab --from Compute a Probability --to- drawing uniformly testdoc.do.txt
+ doconce grab --from- \*\s+\$.+normally testdoc.do.txt
+ doconce format html html_template --html-template=template1.html --no-pygments-html
translating doconce text in html_template.do.txt to html
output in html_template.html
+ [ 0 -ne 0 ]
+ cp html_template.html html_template1.html
+ doconce format html html_template --html-template=template_inf1100.html --pygments-html-style=emacs
translating doconce text in html_template.do.txt to html
output in html_template.html
+ [ 0 -ne 0 ]
+ doconce format html author1
translating doconce text in author1.do.txt to html
output in author1.html
+ [ 0 -ne 0 ]
+ doconce format latex author1
translating doconce text in author1.do.txt to latex
output in author1.p.tex
+ [ 0 -ne 0 ]
+ doconce format sphinx author1
translating doconce text in author1.do.txt to sphinx
*** warning: hyperlink to URL testdoc.html#___sec2 is to a local file,
  - should be _static/testdoc.html#___sec2 for sphinx.
*** warning: hyperlink to URL testdoc.html is to a local file,
  - should be _static/testdoc.html for sphinx.
Move files to _static and change URLs!
output in author1.rst
+ [ 0 -ne 0 ]
+ doconce format plain author1
translating doconce text in author1.do.txt to plain
output in author1.txt
+ [ 0 -ne 0 ]
+ doconce guess_encoding encoding1.do.txt
+ [ 0 -ne 0 ]
+ cp encoding1.do.txt tmp1.do.txt
+ doconce change_encoding utf-8 latin1 tmp1.do.txt
+ [ 0 -ne 0 ]
+ doconce guess_encoding tmp1.do.txt
+ [ 0 -ne 0 ]
+ doconce change_encoding latin1 utf-8 tmp1.do.txt
+ [ 0 -ne 0 ]
+ doconce guess_encoding tmp1.do.txt
+ [ 0 -ne 0 ]
+ doconce guess_encoding encoding2.do.txt
+ [ 0 -ne 0 ]
+ cp encoding1.do.txt tmp2.do.txt
+ doconce change_encoding utf-8 latin1 tmp2.do.txt
+ [ 0 -ne 0 ]
+ doconce guess_encoding tmp2.do.txt
+ doconce format html mako_test1 --no-pygments-html
running mako on mako_test1.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to html
output in mako_test1.html
+ [ 0 -ne 0 ]
+ doconce format html mako_test2 --no-pygments-html
translating doconce text in mako_test2.do.txt to html
output in mako_test2.html
+ [ 0 -ne 0 ]
+ doconce format html mako_test3 --no-pygments-html


*** warning: the code block
---------------------------
/* Here is some SWIG code code */
%module MyMod
%{
...
%}

%init %{
import_array();
%}

---------------------------
contains a single % on the beginning of a line: %m
Such lines cause problems for the mako preprocessor
since it thinks this is a mako statement.




*** warning: the code block
---------------------------
% Matlab comment only
...

---------------------------
contains a single % on the beginning of a line: % 
Such lines cause problems for the mako preprocessor
since it thinks this is a mako statement.


Use %% in the code block(s) above to fix the
problem with % at the beginning of lines,
or put the code in a file that is included
with @@@CODE filename, or drop mako instructions
or variables and rely on preprocess only in the
preprocessing step. In the latter case you
need to include --no-mako on the command line.

mako is not run because of the lines starting with %!!

translating doconce text in mako_test3.do.txt to html
output in mako_test3.html
+ [ 0 -ne 0 ]
+ cp mako_test3.html mako_test3b.html
+ doconce format html mako_test3 --no-mako --no-pygments-html
*** warning: mako is not run because of the option --no-mako
translating doconce text in mako_test3.do.txt to html
output in mako_test3.html
+ [ 0 -ne 0 ]
+ doconce format html mako_test4 --no-pygments-html
running mako on mako_test4.do.txt to make __tmp.do.txt
translating preprocessed doconce text in __tmp.do.txt to html
output in mako_test4.html
+ [ 0 -ne 0 ]
+ doconce format plain failures
translating doconce text in failures.do.txt to plain

Syntax error: Must have a plain sentence before
a code block like !bc/!bt/@@@CODE, not a section/paragraph heading,
table, or comment:
fore code is caught by the syntax check ===
 

!bc
more verbatime stuff
!ec

Next we see if backslashes are detected: \\
Abort! (add --no-abort on the command line to avoid this abortion)
+ cp failures.do.txt tmp2.do.txt
+ doconce subst failure\}\n\n!bc failure}\n\nHello\n!bc tmp2.do.txt
failure\}\n\n!bc replaced by failure}\n\nHello\n!bc in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Must have a plain sentence before
a code block like !bc/!bt/@@@CODE, not a section/paragraph heading,
table, or comment:
ybook}.

__Paragraph before code is bad.__



!bc
More verbatim stuff.
!ec

Can we successfully say `__call__` and `__ad
Abort! (add --no-abort on the command line to avoid this abortion)
+ doconce replace \label label tmp2.do.txt
replacing \label by label in tmp2.do.txt
+ doconce replace \idx idx tmp2.do.txt
replacing \idx by idx in tmp2.do.txt
+ doconce replace \cite cite tmp2.do.txt
replacing \cite by cite in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Must have a plain sentence before
a code block like !bc/!bt/@@@CODE, not a section/paragraph heading,
table, or comment:
ybook}.

__Paragraph before code is bad.__



!bc
More verbatim stuff.
!ec

Can we successfully say `__call__` and `__ad
Abort! (add --no-abort on the command line to avoid this abortion)
+ doconce subst -s __Paragraph before.+!bc !bc tmp2.do.txt
__Paragraph before.+!bc replaced by !bc in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Line before list, !bc, !bt or @@@CODE block is a comment line
which will "swallow" the block in reST format.
Insert some extra line (text) to separate the two elements.
# Comment before math
!bt
\begin{align}
a &= b,  label{eq1}\\
a &= b,  label{eq2
Abort! (add --no-abort on the command line to avoid this abortion)
+ doconce replace streamtubes width streamtubes,  width tmp2.do.txt
replacing streamtubes width by streamtubes,  width in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Line before list, !bc, !bt or @@@CODE block is a comment line
which will "swallow" the block in reST format.
Insert some extra line (text) to separate the two elements.
# Comment before math
!bt
\begin{align}
a &= b,  label{eq1}\\
a &= b,  label{eq2
Abort! (add --no-abort on the command line to avoid this abortion)
+ doconce replace # Comment before math  tmp2.do.txt
replacing # Comment before math by  in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst

Syntax error: Line before list, !bc, !bt or @@@CODE block is a comment line
which will "swallow" the block in reST format.
Insert some extra line (text) to separate the two elements.

# Comment before list

 * A1
 * A2

Normal text.




Abort! (add --no-abort on the command line to avoid this abortion)
+ doconce replace # Comment before list  tmp2.do.txt
replacing # Comment before list by  in tmp2.do.txt
+ doconce format rst tmp2
translating doconce text in tmp2.do.txt to rst
figure file ../doc/manual/figs/streamtubes:
    can use ../doc/manual/figs/streamtubes.png for format rst
output in tmp2.rst

+ sh ./clean.sh
Removing in /home/hpl/vc/doconce/doc/quickref:
+ doconce
+ doconce format html quickref --no-pygments-html --no-preprocess
translating doconce text in quickref.do.txt to html
copy complete file doconce_program.sh  (format: shpro)
output in quickref.html
+ doconce format latex quickref --no-preprocess
translating doconce text in quickref.do.txt to latex
copy complete file doconce_program.sh  (format: shpro)
output in quickref.p.tex
+ doconce ptex2tex quickref -DMINTED -DHELVETICA envir=Verbatim
\bshpro (!bc shpro) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85,xleftmargin=0mm]
\bcod (!bc cod) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85,xleftmargin=0mm]
\bsys (!bc sys) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85,xleftmargin=0mm]
\bccq (!bc ccq) -> \begin{Verbatim}[numbers=none,fontsize=\fontsize{9pt}{9pt},baselinestretch=0.85,xleftmargin=0mm]
+ latex -shell-escape quickref.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./quickref.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty




(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty





(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty




(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./quickref.w18))/usr/local/bin/pygmentize
) (./quickref.pyg)

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def


Writing index file quickref.idx
No file quickref.aux.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty


Package hyperref Warning: Rerun to get /PageLabels entry.




Package hyperref Warning: old toc file detected, not used; run LaTeX again.

 [1] [2] [3] [4]
Overfull \hbox (4.40137pt too wide) 
\OT1/phv/m/n/10 fi-ca-tion copies from the first line match-ing the \OT1/phv/m/
sl/10 reg-u-lar ex-pres-sion []

Overfull \hbox (27.8928pt too wide) 
\OT1/phv/m/n/10 up to, but not in-clud-ing the line match-ing the \OT1/phv/m/sl
/10 reg-u-lar ex-pres-sion []\OT1/phv/m/n/10 .
[5]
Overfull \hbox (52.99661pt too wide) 
[]\OT1/phv/m/n/10 One can use []
[6] <latex_figs/notice.eps>
Underfull \hbox (badness 1924) 
\OT1/phv/m/n/10 nec-es-sary to only utilze very stan-dard L[]T[]X and avoid,

Underfull \hbox (badness 1701) 
\OT1/phv/m/n/10 for in-stance, more than one plot per fig-ure. How-ever,

Underfull \hbox (badness 2564) 
[]\OT1/phv/m/n/10 ) to in-clude spe-cial
[7]

LaTeX Warning: Reference `quick:sections' on page 8 undefined on input line 574
.

[8]
Overfull \hbox (60.6356pt too wide) 
\OT1/phv/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have []
 on the form [],

Overfull \hbox (88.21638pt too wide) 
[]\OT1/phv/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line [],
[9] [10] [11] [12]
Overfull \hbox (3.50804pt too wide) 
\OT1/phv/m/n/10 Doconce en-vi-ron-ments start with []benvirname! and end with [
]eenvirname!, where

Overfull \hbox (2.40855pt too wide) 
\OT1/phv/m/n/10 Doconce doc-u-ments may uti-lize a pre-pro-ces-sor, ei-ther [] 
and/or [].

Overfull \hbox (0.18839pt too wide) 
\OT1/phv/m/n/10 is a typ-i-cal ex-am-ple on uti-liz-ing [] to in-clude an-other
 doc-u-ment, "com-
[13]
Overfull \hbox (87.48466pt too wide) 
[]\OT1/phv/m/n/10 Excellent "Sphinx Tu-to-rial" by C. Reller: "http://people.ee
.ethz.ch/ creller/web/tricks/reST.html" 
No file quickref.ind.
[14] (./quickref.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
   dvips.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
inputenc.sty    2008/03/30 v1.1d Input encoding file
  latin1.def    2008/03/30 v1.1d Input encoding file
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   color.sty    2005/11/14 v1.0j Standard LaTeX Color (DPC)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
dvipsnam.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
quickref.w18
quickref.pyg
  helvet.sty    2005/04/12 PSNFSS-v9.2a (WaS) 
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
  hdvips.def    2012/05/13 v6.82q Hyperref driver for dvips
 pdfmark.def    2012/05/13 v6.82q Hyperref definitions for pdfmark specials
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
  ot1phv.fd    2001/06/04 scalable font definitions for OT1/phv.
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
    umsa.fd    2009/06/22 v3.00 AMS symbols A
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  omsphv.fd    
latex_figs/notice.eps
 ***********


Package rerunfilecheck Warning: File `quickref.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.dvi (14 pages, ).
Transcript written on quickref.log.
+ latex -shell-escape quickref.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 \write18 enabled.
entering extended mode
(./quickref.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class

(/usr/share/texlive/texmf-dist/tex/latex/relsize/relsize.sty
Examine \normalsize starts \@setfontsize size may be \@xpt. 
Examine \small starts \@setfontsize size may be \@ixpt. 
Examine \footnotesize starts \@setfontsize size may be \@viiipt. 
Examine \large starts \@setfontsize size may be \@xiipt. 
Examine \Large starts \@setfontsize size may be \@xivpt. 
Examine \LARGE starts \@setfontsize size may be \@xviipt. 
Examine \scriptsize starts \@setfontsize size may be \@viipt. 
Examine \tiny starts \@setfontsize size may be \@vpt. 
Examine \huge starts \@setfontsize size may be \@xxpt. 
Examine \Huge starts \@setfontsize size may be \@xxvpt. )
(/usr/share/texlive/texmf-dist/tex/latex/graphics/epsfig.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty

(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty




(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty




(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty

(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix 
<2008/02/07> (tvz)) (/home/hpl/texmf/tex/latex/misc/minted.sty
(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty





(/usr/share/texlive/texmf-dist/tex/latex/ifplatform/ifplatform.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty




(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/catchfile.sty

(./quickref.w18))/usr/local/bin/pygmentize
) (./quickref.pyg)

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def


Writing index file quickref.idx
(./quickref.aux) 
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./quickref.out) (./quickref.out)


 [1] [2] [3] [4]
Overfull \hbox (4.40137pt too wide) 
\OT1/phv/m/n/10 fi-ca-tion copies from the first line match-ing the \OT1/phv/m/
sl/10 reg-u-lar ex-pres-sion []

Overfull \hbox (27.8928pt too wide) 
\OT1/phv/m/n/10 up to, but not in-clud-ing the line match-ing the \OT1/phv/m/sl
/10 reg-u-lar ex-pres-sion []\OT1/phv/m/n/10 .
[5]
Overfull \hbox (52.99661pt too wide) 
[]\OT1/phv/m/n/10 One can use []
[6] <latex_figs/notice.eps>
Underfull \hbox (badness 1924) 
\OT1/phv/m/n/10 nec-es-sary to only utilze very stan-dard L[]T[]X and avoid,

Underfull \hbox (badness 1701) 
\OT1/phv/m/n/10 for in-stance, more than one plot per fig-ure. How-ever,

Underfull \hbox (badness 2564) 
[]\OT1/phv/m/n/10 ) to in-clude spe-cial
[7] [8]
Overfull \hbox (60.6356pt too wide) 
\OT1/phv/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have []
 on the form [],

Overfull \hbox (88.21638pt too wide) 
[]\OT1/phv/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line [],
[9] [10] [11] [12]
Overfull \hbox (3.50804pt too wide) 
\OT1/phv/m/n/10 Doconce en-vi-ron-ments start with []benvirname! and end with [
]eenvirname!, where
[13]
Overfull \hbox (2.40855pt too wide) 
\OT1/phv/m/n/10 Doconce doc-u-ments may uti-lize a pre-pro-ces-sor, ei-ther [] 
and/or [].

Overfull \hbox (0.18839pt too wide) 
\OT1/phv/m/n/10 is a typ-i-cal ex-am-ple on uti-liz-ing [] to in-clude an-other
 doc-u-ment, "com-

Overfull \hbox (87.48466pt too wide) 
[]\OT1/phv/m/n/10 Excellent "Sphinx Tu-to-rial" by C. Reller: "http://people.ee
.ethz.ch/ creller/web/tricks/reST.html" 
[14]
No file quickref.ind.
[15] (./quickref.aux)

 *File List*
 article.cls    2007/10/19 v1.4h Standard LaTeX document class
  size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
 relsize.sty    2011/09/21 ver 4.0
  epsfig.sty    1999/02/16 v1.7a (e)psfig emulation (SPQR)
graphicx.sty    1999/02/16 v1.0f Enhanced LaTeX Graphics (DPC,SPQR)
  keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
graphics.sty    2009/02/05 v1.0o Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    1999/03/16 v1.09 sin cos tan (DPC)
graphics.cfg    2010/04/23 v1.9 graphics configuration of TeX Live
   dvips.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
 makeidx.sty    2000/03/29 v1.0m Standard LaTeX package
 amsmath.sty    2000/07/18 v2.13 AMS math features
 amstext.sty    2000/06/29 v2.01
  amsgen.sty    1999/11/30 v2.0
  amsbsy.sty    1999/11/29 v1.2d
  amsopn.sty    1999/12/14 v2.01 operator names
amsfonts.sty    2009/06/22 v3.00 Basic AMSFonts support
inputenc.sty    2008/03/30 v1.1d Input encoding file
  latin1.def    2008/03/30 v1.1d Input encoding file
fancyvrb.sty    2008/02/07
  minted.sty    2010/01/27 v1.6 Yet another Pygments shim for LaTeX
   color.sty    2005/11/14 v1.0j Standard LaTeX Color (DPC)
   color.cfg    2007/01/18 v1.5 color configuration of teTeX/TeXLive
dvipsnam.def    1999/02/16 v3.0i Driver-dependant file (DPC,SPQR)
   float.sty    2001/11/08 v1.3d Float enhancements (AL)
  ifthen.sty    2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
ifplatform.sty    2010/10/22 v0.4 Testing for the operating system
pdftexcmds.sty    2011/11/29 v0.20 Utility functions of pdfTeX for LuaTeX (HO)
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/error messages (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
 ltxcmds.sty    2011/11/09 v1.22 LaTeX kernel commands for general use (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
catchfile.sty    2011/03/01 v1.6 Catch the contents of a file (HO)
etexcmds.sty    2011/02/16 v1.5 Avoid name clashes with e-TeX commands (HO)
quickref.w18
quickref.pyg
  helvet.sty    2005/04/12 PSNFSS-v9.2a (WaS) 
hyperref.sty    2012/05/13 v6.82q Hypertext links for LaTeX
hobsub-hyperref.sty    2012/05/28 v1.13 Bundle oberdiek, subset hyperref (HO)
hobsub-generic.sty    2012/05/28 v1.13 Bundle oberdiek, subset generic (HO)
  hobsub.sty    2012/05/28 v1.13 Construct package bundles (HO)
  ifvtex.sty    2010/03/01 v1.5 Detect VTeX and its facilities (HO)
 intcalc.sty    2007/09/27 v1.1 Expandable calculations with integers (HO)
kvsetkeys.sty    2012/04/25 v1.16 Key value parser (HO)
kvdefinekeys.sty    2011/04/07 v1.3 Define keys (HO)
pdfescape.sty    2011/11/25 v1.13 Implements pdfTeX's escape features (HO)
bigintcalc.sty    2012/04/08 v1.3 Expandable calculations on big integers (HO)
  bitset.sty    2011/01/30 v1.1 Handle bit-vector datatype (HO)
uniquecounter.sty    2011/01/30 v1.2 Provide unlimited unique counter (HO)
letltxmacro.sty    2010/09/02 v1.4 Let assignment for LaTeX macros (HO)
 hopatch.sty    2012/05/28 v1.2 Wrapper for package hooks (HO)
xcolor-patch.sty    2011/01/30 xcolor patch
atveryend.sty    2011/06/30 v1.8 Hooks at the very end of document (HO)
atbegshi.sty    2011/10/05 v1.16 At begin shipout hook (HO)
refcount.sty    2011/10/16 v3.4 Data extraction from label references (HO)
 hycolor.sty    2011/01/30 v1.7 Color options for hyperref/bookmark (HO)
 ifxetex.sty    2010/09/12 v0.6 Provides ifxetex conditional
kvoptions.sty    2011/06/30 v3.11 Key value format for package options (HO)
  pd1enc.def    2012/05/13 v6.82q Hyperref: PDFDocEncoding definition (HO)
hyperref.cfg    2002/06/06 v1.2 hyperref configuration of TeXLive
     url.sty    2006/04/12  ver 3.3  Verb mode for urls, etc.
  hdvips.def    2012/05/13 v6.82q Hyperref driver for dvips
 pdfmark.def    2012/05/13 v6.82q Hyperref definitions for pdfmark specials
rerunfilecheck.sty    2011/04/15 v1.7 Rerun checks for auxiliary files (HO)
placeins.sty    2005/04/18  v 2.2
  ot1phv.fd    2001/06/04 scalable font definitions for OT1/phv.
 nameref.sty    2010/04/30 v2.40 Cross-referencing by name of section
gettitlestring.sty    2010/12/03 v1.4 Cleanup title references (HO)
quickref.out
quickref.out
    umsa.fd    2009/06/22 v3.00 AMS symbols A
    umsb.fd    2009/06/22 v3.00 AMS symbols B
  omsphv.fd    
latex_figs/notice.eps
 ***********

 )
(see the transcript file for additional information)
Output written on quickref.dvi (15 pages, ).
Transcript written on quickref.log.
+ dvipdf quickref.dvi
+ doconce format sphinx quickref --no-preprocess
translating doconce text in quickref.do.txt to sphinx
*** warning: hyperlink to URL testdoc.html#___sec2 is to a local file,
  - should be _static/testdoc.html#___sec2 for sphinx.
*** warning: hyperlink to URL testdoc.html is to a local file,
  - should be _static/testdoc.html for sphinx.
Move files to _static and change URLs!
copy complete file doconce_program.sh  (format: shpro)
output in quickref.rst
+ rm -rf sphinx-rootdir
+ doconce sphinx_dir author=HPL version=0.7 quickref
Making sphinx-rootdir
Welcome to the Sphinx 1.2pre quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
> Root path for the documentation [.]: 
You have two options for placing the build directory for Sphinx output.
Either, you use a directory "_build" within the root path, or you separate
"source" and "build" directories within the root path.
> Separate source and build directories (y/N) [n]: 
Inside the root directory, two more directories will be created; "_templates"
for custom HTML templates and "_static" for custom stylesheets and other static
files. You can enter another prefix (such as ".") to replace the underscore.
> Name prefix for templates and static dir [_]: 
The project name will occur in several places in the built documentation.
> Project name: > Author name(s): 
Sphinx has the notion of a "version" and a "release" for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don't need this dual structure,
just set both to the same value.
> Project version: > Project release [0.7]: 
The file name suffix for source files. Commonly, this is either ".txt"
or ".rst".  Only files with this suffix are considered documents.
> Source file suffix [.rst]: * Please enter a file suffix, e.g. '.rst' or '.txt'.
> Source file suffix [.rst]: 
One document is special in that it is considered the top node of the
"contents tree", that is, it is the root of the hierarchical structure
of the documents. Normally, this is "index", but if your "index"
document is a custom template, you can also set this to another filename.
> Name of your master document (without suffix) [index]: 
Sphinx can also add configuration for epub output:
> Do you want to use the epub builder (y/N) [n]: 
Please indicate if you want to use one of the following Sphinx extensions:
> autodoc: automatically insert docstrings from modules (y/N) [n]: > doctest: automatically test code snippets in doctest blocks (y/N) [n]: > intersphinx: link between Sphinx documentation of different projects (y/N) [n]: > todo: write "todo" entries that can be shown or hidden on build (y/N) [n]: > coverage: checks for documentation coverage (y/N) [n]: > pngmath: include math, rendered as PNG images (y/N) [n]: > mathjax: include math, rendered in the browser by MathJax (y/N) [n]: > ifconfig: conditional inclusion of content based on config values (y/N) [n]: > viewcode: include links to the source code of documented Python objects (y/N) [n]: 
A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html' instead of invoking sphinx-build
directly.
> Create Makefile? (Y/n) [y]: > Create Windows command file? (Y/n) [y]: 
Creating file sphinx-rootdir/conf.py.
Creating file sphinx-rootdir/index.rst.
Creating file sphinx-rootdir/Makefile.
Creating file sphinx-rootdir/make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file sphinx-rootdir/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where "builder" is one of the supported builders, e.g. html, latex or linkcheck.

['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__released__', '__version__', 'err', 'main', 'out', 'p', 'package_dir', 'path', 'subprocess', 'sys'] True
searching for TITLE in quickref.do.txt
Using title "Doconce Quick Reference" from quickref.do.txt
title: Doconce Quick Reference
author: HPL
theme: default
These Sphinx themes were found: agni, agogo, basic, cbc, classy, cloud, default, epub, fenics, fenics_minimal, flask, haiku, jal, nature, pylons, pyramid, redcloud, scrolls, slim-agogo, solarized, sphinxdoc, traditional, vlinux-theme, default

'automake_sphinx.py' contains the steps to (re)compile the sphinx
version. You may want to edit this file, or run the steps manually,
or just run it by

  python automake_sphinx.py

+ doconce replace doconce format sphinx %s doconce format sphinx %s --no-preprocess automake_sphinx.py
replacing doconce format sphinx %s by doconce format sphinx %s --no-preprocess in automake_sphinx.py
+ python automake_sphinx.py
translating doconce text in quickref.do.txt to sphinx
*** warning: hyperlink to URL testdoc.html#___sec2 is to a local file,
  - should be _static/testdoc.html#___sec2 for sphinx.
*** warning: hyperlink to URL testdoc.html is to a local file,
  - should be _static/testdoc.html for sphinx.
Move files to _static and change URLs!
copy complete file doconce_program.sh  (format: shpro)
output in quickref.rst
rm -rf _build/*
sphinx-build -b html -d _build/doctrees   . _build/html
Making output directory...
Running Sphinx v1.2pre
loading pickled environment... not yet created
building [html]: targets for 2 source files that are out of date
updating environment: 2 added, 0 changed, 0 removed
reading sources... [ 50%] index
reading sources... [100%] quickref

looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [ 50%] index
writing output... [100%] quickref

writing additional files... (0 module code pages) genindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded.

Build finished. The HTML pages are in _build/html.



doconce format sphinx quickref --no-preprocess 
running doconce format sphinx quickref --no-preprocess 
running doconce guess_encoding quickref.rst
/home/hpl/vc/doconce/doc/quickref/sphinx-rootdir
running make clean
running make html

google-chrome sphinx-rootdir/_build/html/index.html

+ cp quickref.rst quickref.sphinx.rst
+ doconce format rst quickref --no-preprocess
translating doconce text in quickref.do.txt to rst
copy complete file doconce_program.sh  (format: shpro)
output in quickref.rst
+ rst2xml.py quickref.rst
+ rst2odt.py quickref.rst
+ rst2html.py quickref.rst
+ rst2latex.py quickref.rst
+ latex quickref.rst.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 restricted \write18 enabled.
entering extended mode
(./quickref.rst.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class


(/usr/share/texlive/texmf-dist/tex/latex/cmap/cmap.sty

Package cmap Warning: pdftex in DVI mode - exiting.

) 
(/usr/share/texlive/texmf-dist/tex/latex/base/fontenc.sty

(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def







(/usr/share/texlive/texmf-dist/tex/latex/psnfss/helvet.sty


(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def

No file quickref.rst.aux.

(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty


Package hyperref Warning: Rerun to get /PageLabels entry.


Package hyperref Warning: old toc file detected, not used; run LaTeX again.



Overfull \hbox (467.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: H. P. Langtangen at Center for Biomedical Computing, S
imula Research Laboratory and Dept. of Informatics, Univ. of Oslo  

Overfull \hbox (143.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cybe
rspace Inc.  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 name Email: somename@adr.net at institution1 and institution2 

[1]
Overfull \hbox (4.50082pt too wide) in alignment at lines 191--199
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 199--207
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 207--209
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 209--210
 [] [] 

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ========= Heading ========

Overfull \hbox (4.50082pt too wide) in alignment at lines 210--247
 [] [] 

Overfull \hbox (27.20697pt too wide) 
\T1/ptm/m/it/10 sized words\T1/ptm/m/n/10 . Sim-i-larly, an un-der-score sur-ro
unds words that ap-pear in bold-face: \T1/pcr/m/n/10 _boldface_

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 Note that sublists are consistently indented by one or more bl
anks..  
[2]
Overfull \hbox (17.00006pt too wide) 
[] \T1/pcr/m/n/10 - keyword3: and its description may fit on one line 
[3]
Overfull \hbox (35.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html mydoc.do.txt --skip_inline_comments 

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=
console 
[4]
Overfull \hbox (5.00006pt too wide) 
[]    \T1/pcr/m/n/10 return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z) 

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce spl
it_rst  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce sp
lit_rst 

Overfull \hbox (6.12766pt too wide) 
\T1/ptm/m/n/10 to, but not in-clud-ing the line match-ing the \T1/ptm/m/it/10 r
eg-u-lar ex-pres-sion \T1/pcr/m/n/10 ^doconce split_rst\T1/ptm/m/n/10 .

Overfull \hbox (8.347pt too wide) 
\T1/ptm/m/n/10 cess-ful out-put in re-Struc-tred-Text), not di-rectly af-ter a 
sec-tion/paragraph
[5]
Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\]  

Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\] 

Overfull \hbox (37.5697pt too wide) 
[]\T1/ptm/m/n/10 One can use \T1/pcr/m/n/10 #if FORMAT in ("latex", "pdflatex",
 "html", "sphinx",

Overfull \hbox (12.58893pt too wide) 
[]\T1/ptm/m/n/10 Use only the equa-tion en-vi-ron-ments \T1/pcr/m/n/10 \[\T1/pt
m/m/n/10 , \T1/pcr/m/n/10 \]\T1/ptm/m/n/10 , \T1/pcr/m/n/10 equation\T1/ptm/m/n
/10 , \T1/pcr/m/n/10 equation*\T1/ptm/m/n/10 ,





Overfull \hbox (449.00006pt too wide) 
\T1/pcr/m/n/10 FIGURE: [relative/path/to/figurefile, width=500] Here goes the c
aption which must be on a single line. label{some:fig:label}  
[6]
Overfull \hbox (437.00006pt too wide) 
[]\T1/pcr/m/n/10 MOVIE: [relative/path/to/moviefile, width=500] Here goes the c
aption which must be on a single line. label{some:fig:label} 

Overfull \hbox (2.15817pt too wide) 
[]\T1/ptm/m/n/10 Combining sev-eral im-age files into one can be done by the \T
1/pcr/m/n/10 convert \T1/ptm/m/n/10 and \T1/pcr/m/n/10 montage

Overfull \hbox (113.00006pt too wide) 
\T1/pcr/m/n/10 montage file1.png file2.png ... file4.png -geometry +2+2  result
.png  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 convert -background white file1.png file2.png +append tmp.png 


LaTeX Warning: Hyper reference `section-types' on page 7 undefined on input lin
e 745.


Overfull \hbox (107.00006pt too wide) 
\T1/pcr/m/n/10 |----------------c--------|------------------c------------------
--|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |      Section type       |        Syntax                     
    |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |----------------l--------|------------------l----------------
----|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | chapter                 | `========= Heading ========` (9 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | section                 | `======= Heading =======`    (7 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsection              | `===== Heading =====`        (5 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsubsection           | `=== Heading ===`            (3 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | paragraph               | `__Heading.__`               (2 `_
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |-------------------------------------------------------------
----| 
[7]
Overfull \hbox (54.34767pt too wide) 
\T1/ptm/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have \T1
/pcr/m/n/10 name \T1/ptm/m/n/10 on the form \T1/pcr/m/n/10 Author1_Author2_YYYY
\T1/ptm/m/n/10 ,

Overfull \hbox (37.56873pt too wide) 
[]\T1/ptm/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line \T1/pcr/m/n/10 B
IBFILE: name_bib.bib, name_bib.rst,

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section": 
 

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 "A Document for Testing Doconce": "testdoc.html" cite{testdoc:
12}],  
[8]
Overfull \hbox (2291.00006pt too wide) 
[]\T1/pcr/m/n/10 commands: format help sphinx_dir subst replace replace_from_fi
le clean spellcheck ptex2tex expand_commands combine_images guess_encoding chan
ge_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_a
nswers split_rst split_html slides_html latin2html latex_header latex_footer bb
l2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code
_links latex_exercise_toc insertdocstr old2new_format  

Overfull \hbox (299.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwik
i|cwiki|pandoc|st|epytext file.do.txt  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # substitute a phrase by another using regular expressions  

Overfull \hbox (197.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce subst [-s -m -x --restore] regex-pattern regex-replace
ment file1 file2 ...  

Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier
,  

Overfull \hbox (143.00006pt too wide) 
[] \T1/pcr/m/n/10 -x is the re.VERBOSE modifier, --restore copies backup files 
back again)  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 # doconce replace using from and to phrases from file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce replace_from_file file-with-from-to file1 file2 ...  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 (exact text substitution, but a set of from-to relations)  

Overfull \hbox (95.00006pt too wide) 
[]\T1/pcr/m/n/10 # gwiki format requires substitution of figure file names by U
RLs  
[9]
Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce sphinx_dir author='John Doe' title='Long title' \  

Overfull \hbox (53.00006pt too wide) 
[]    \T1/pcr/m/n/10 dirname=sphinx-rootdir theme=default logo=mylogo.png \  

Overfull \hbox (29.00006pt too wide) 
[]\T1/pcr/m/n/10 # replace latex-1 (non-ascii) characters by html codes  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 # walk through a directory tree and insert doconce files as  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 # remove all files that the doconce format can regenerate  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform a .bbl file to a .rst file with reST bibliography 
format  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 # edit URLs to local files and place them in _static  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 # split an html file into parts according to !split commands  


Overfull \hbox (11.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce html_colorbullets file1.html file2.html ...  
[10]
Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce grab   --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce remove --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (11.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce remove_exercise_answers file_in_some_format  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform ptex2tex files (.p.tex) to ordinary latex file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \  

Overfull \hbox (107.00006pt too wide) 
[]        \T1/pcr/m/n/10 dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{q
uote}  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce combine_images image1 image2 ... output_file  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # insert a table of exercises in a latex file myfile.p.tex  

Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 # list all labels in a document (for purposes of cleaning them
 up)  
[11]
Overfull \hbox (101.00006pt too wide) 
\T1/pcr/m/n/10 ===== Problem: Derive the Formula for the Area of an Ellipse ===
==  

Overfull \hbox (77.00006pt too wide) 
[]\T1/pcr/m/n/10 Derive an expression for the area of an ellipse by integrating
  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 the area under a curve that defines half of the allipse.  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 "Wolframalpha": "http://wolframalpha.com" can perhaps  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 ===== {Problem}: Derive the Formula for the Area of an Ellipse
 ===== 

Overfull \hbox (41.00006pt too wide) 
\T1/pcr/m/n/10 ===== Exercise: Determine the Distance to the Moon =====  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 Intro to this exercise. Questions are in subexercises below.  

[12]
Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 At the very end of the exercise it may be appropriate to summa
rize  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 and give some perspectives. The text inside the !bremarks-!ere
marks  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 directives is always typeset at the end of the exercise.  

Overfull \hbox (2.38828pt too wide) 
\T1/ptm/m/n/10 Doconce en-vi-ron-ments start with \T1/pcr/m/n/10 !benvirname \T
1/ptm/m/n/10 and end with \T1/pcr/m/n/10 !eenvirname\T1/ptm/m/n/10 , where

Overfull \hbox (28.47902pt too wide) 
[]\T1/ptm/m/n/10 specialy
[13]
Overfull \hbox (263.00006pt too wide) 
[]\T1/pcr/m/n/10 \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \mul
ticolumn{1}{c}{acceleration} \\  

Overfull \hbox (4.19656pt too wide) 
[][][][][][] \T1/ptm/m/n/10 con-tains some il-lus-tra-tions on how to uti-lize 
\T1/pcr/m/n/10 mako \T1/ptm/m/n/10 (clone the GitHub

Overfull \hbox (114.855pt too wide) 
[]\T1/ptm/m/n/10 Excellent ``Sphinx Tu-to-rial'' by C. Reller: ``[][][][][][]''
 
[14] (./quickref.rst.aux)

Package rerunfilecheck Warning: File `quickref.rst.out' has changed.
(rerunfilecheck)                Rerun to get outlines right
(rerunfilecheck)                or use package `bookmark'.


LaTeX Warning: There were undefined references.


LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.rst.dvi (14 pages, ).
Transcript written on quickref.rst.log.
+ latex quickref.rst.tex
This is pdfTeX, Version 3.1415926-2.4-1.40.13 (TeX Live 2012/Debian)
 restricted \write18 enabled.
entering extended mode
(./quickref.rst.tex
LaTeX2e <2011/06/27>
Babel <v3.8m> and hyphenation patterns for english, dumylang, nohyphenation, lo
aded.
(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class


(/usr/share/texlive/texmf-dist/tex/latex/cmap/cmap.sty

Package cmap Warning: pdftex in DVI mode - exiting.

) 
(/usr/share/texlive/texmf-dist/tex/latex/base/fontenc.sty

(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty
(/usr/share/texlive/texmf-dist/tex/latex/base/utf8.def







(/usr/share/texlive/texmf-dist/tex/latex/psnfss/helvet.sty


(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty
(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty







Package hyperref Message: Driver (default): hdvips.

(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hdvips.def
(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pdfmark.def

(./quickref.rst.aux) 
(/usr/share/texlive/texmf-dist/tex/latex/graphics/color.sty



(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty

(./quickref.rst.out) (./quickref.rst.out) (./quickref.rst.toc)

 [1]
Overfull \hbox (467.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: H. P. Langtangen at Center for Biomedical Computing, S
imula Research Laboratory and Dept. of Informatics, Univ. of Oslo  

Overfull \hbox (143.00006pt too wide) 
[]\T1/pcr/m/n/10 AUTHOR: Kaare Dump Email: dump@cyb.space.com at Segfault, Cybe
rspace Inc.  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 name Email: somename@adr.net at institution1 and institution2 


Overfull \hbox (4.50082pt too wide) in alignment at lines 191--199
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 199--207
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 207--209
 [] [] 

Overfull \hbox (4.50082pt too wide) in alignment at lines 209--210
 [] [] 

Underfull \hbox (badness 10000) 
[]|\T1/pcr/m/n/10 ========= Heading ========

Overfull \hbox (4.50082pt too wide) in alignment at lines 210--247
 [] [] 

Overfull \vbox (8.32294pt too high) has occurred while \output is active
[2]
Overfull \hbox (27.20697pt too wide) 
\T1/ptm/m/it/10 sized words\T1/ptm/m/n/10 . Sim-i-larly, an un-der-score sur-ro
unds words that ap-pear in bold-face: \T1/pcr/m/n/10 _boldface_

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 Note that sublists are consistently indented by one or more bl
anks..  

Overfull \hbox (17.00006pt too wide) 
[] \T1/pcr/m/n/10 - keyword3: and its description may fit on one line 
[3]
Overfull \hbox (35.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html mydoc.do.txt --skip_inline_comments 
[4]
Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 # sphinx code-blocks: pycod=python cod=fortran cppcod=c++ sys=
console 

Overfull \hbox (5.00006pt too wide) 
[]    \T1/pcr/m/n/10 return exp(-t)*sin(pi*x)*sin(pi*y)*cos(2*pi*z) 

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  fromto: doconce clean@^doconce spl
it_rst  

Overfull \hbox (119.00006pt too wide) 
[]\T1/pcr/m/n/10 @@@CODE doconce_program.sh  from-to: doconce clean@^doconce sp
lit_rst 

Overfull \hbox (6.12766pt too wide) 
\T1/ptm/m/n/10 to, but not in-clud-ing the line match-ing the \T1/ptm/m/it/10 r
eg-u-lar ex-pres-sion \T1/pcr/m/n/10 ^doconce split_rst\T1/ptm/m/n/10 .

Overfull \hbox (8.347pt too wide) 
\T1/ptm/m/n/10 cess-ful out-put in re-Struc-tred-Text), not di-rectly af-ter a 
sec-tion/paragraph
[5]
Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\]  

Overfull \hbox (137.00006pt too wide) 
[]\T1/pcr/m/n/10 \[ \frac{\partial\pmb{u}}{\partial t} + \pmb{u}\cdot\nabla\pmb
{u} = 0.\] 

Overfull \hbox (37.5697pt too wide) 
[]\T1/ptm/m/n/10 One can use \T1/pcr/m/n/10 #if FORMAT in ("latex", "pdflatex",
 "html", "sphinx",
[6]
Overfull \hbox (12.58893pt too wide) 
[]\T1/ptm/m/n/10 Use only the equa-tion en-vi-ron-ments \T1/pcr/m/n/10 \[\T1/pt
m/m/n/10 , \T1/pcr/m/n/10 \]\T1/ptm/m/n/10 , \T1/pcr/m/n/10 equation\T1/ptm/m/n
/10 , \T1/pcr/m/n/10 equation*\T1/ptm/m/n/10 ,





Overfull \hbox (449.00006pt too wide) 
\T1/pcr/m/n/10 FIGURE: [relative/path/to/figurefile, width=500] Here goes the c
aption which must be on a single line. label{some:fig:label}  

Overfull \hbox (437.00006pt too wide) 
[]\T1/pcr/m/n/10 MOVIE: [relative/path/to/moviefile, width=500] Here goes the c
aption which must be on a single line. label{some:fig:label} 

Overfull \hbox (2.15817pt too wide) 
[]\T1/ptm/m/n/10 Combining sev-eral im-age files into one can be done by the \T
1/pcr/m/n/10 convert \T1/ptm/m/n/10 and \T1/pcr/m/n/10 montage

Overfull \hbox (113.00006pt too wide) 
\T1/pcr/m/n/10 montage file1.png file2.png ... file4.png -geometry +2+2  result
.png  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 convert -background white file1.png file2.png +append tmp.png 

[7]
Overfull \hbox (107.00006pt too wide) 
\T1/pcr/m/n/10 |----------------c--------|------------------c------------------
--|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |      Section type       |        Syntax                     
    |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |----------------l--------|------------------l----------------
----|  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | chapter                 | `========= Heading ========` (9 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | section                 | `======= Heading =======`    (7 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsection              | `===== Heading =====`        (5 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | subsubsection           | `=== Heading ===`            (3 `=
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 | paragraph               | `__Heading.__`               (2 `_
`)  |  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 |-------------------------------------------------------------
----| 

Overfull \hbox (54.34767pt too wide) 
\T1/ptm/m/n/10 sert a back-slash). Bib-li-og-ra-phy ci-ta-tions of-ten have \T1
/pcr/m/n/10 name \T1/ptm/m/n/10 on the form \T1/pcr/m/n/10 Author1_Author2_YYYY
\T1/ptm/m/n/10 ,
[8]
Overfull \hbox (37.56873pt too wide) 
[]\T1/ptm/m/n/10 The bib-li-og-ra-phy is spec-i-fied by a line \T1/pcr/m/n/10 B
IBFILE: name_bib.bib, name_bib.rst,

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 ref[Section ref{subsec:ex}][in cite{testdoc:12}][a "section": 
 

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 "A Document for Testing Doconce": "testdoc.html" cite{testdoc:
12}],  

Overfull \hbox (2291.00006pt too wide) 
[]\T1/pcr/m/n/10 commands: format help sphinx_dir subst replace replace_from_fi
le clean spellcheck ptex2tex expand_commands combine_images guess_encoding chan
ge_encoding gwiki_figsubst remove_inline_comments grab remove remove_exercise_a
nswers split_rst split_html slides_html latin2html latex_header latex_footer bb
l2rst html_colorbullets list_labels teamod sphinxfix_localURLs make_figure_code
_links latex_exercise_toc insertdocstr old2new_format  
[9]
Overfull \hbox (299.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce format html|latex|pdflatex|rst|sphinx|plain|gwiki|mwik
i|cwiki|pandoc|st|epytext file.do.txt  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # substitute a phrase by another using regular expressions  

Overfull \hbox (197.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce subst [-s -m -x --restore] regex-pattern regex-replace
ment file1 file2 ...  

Overfull \hbox (83.00006pt too wide) 
[]\T1/pcr/m/n/10 (-s is the re.DOTALL modifier, -m is the re.MULTILINE modifier
,  

Overfull \hbox (143.00006pt too wide) 
[] \T1/pcr/m/n/10 -x is the re.VERBOSE modifier, --restore copies backup files 
back again)  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 # doconce replace using from and to phrases from file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce replace_from_file file-with-from-to file1 file2 ...  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 (exact text substitution, but a set of from-to relations)  

Overfull \hbox (95.00006pt too wide) 
[]\T1/pcr/m/n/10 # gwiki format requires substitution of figure file names by U
RLs  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce sphinx_dir author='John Doe' title='Long title' \  

Overfull \hbox (53.00006pt too wide) 
[]    \T1/pcr/m/n/10 dirname=sphinx-rootdir theme=default logo=mylogo.png \  

Overfull \hbox (29.00006pt too wide) 
[]\T1/pcr/m/n/10 # replace latex-1 (non-ascii) characters by html codes  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 # walk through a directory tree and insert doconce files as  

Overfull \hbox (47.00006pt too wide) 
[]\T1/pcr/m/n/10 # remove all files that the doconce format can regenerate  
[10]
Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform a .bbl file to a .rst file with reST bibliography 
format  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 # edit URLs to local files and place them in _static  

Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 # split an html file into parts according to !split commands  


Overfull \hbox (11.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce html_colorbullets file1.html file2.html ...  

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce grab   --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (71.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce remove --from[-] from-text [--to[-] to-text] somefile 
 

Overfull \hbox (11.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce remove_exercise_answers file_in_some_format  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # transform ptex2tex files (.p.tex) to ordinary latex file  

Overfull \hbox (59.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce ptex2tex mydoc -DMINTED pycod=minted sys=Verbatim \  

Overfull \hbox (107.00006pt too wide) 
[]        \T1/pcr/m/n/10 dat=\begin{quote}\begin{verbatim};\end{verbatim}\end{q
uote}  

Overfull \hbox (17.00006pt too wide) 
[]\T1/pcr/m/n/10 doconce combine_images image1 image2 ... output_file  

Overfull \hbox (53.00006pt too wide) 
[]\T1/pcr/m/n/10 # insert a table of exercises in a latex file myfile.p.tex  

Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 # list all labels in a document (for purposes of cleaning them
 up)  
[11]
Overfull \hbox (101.00006pt too wide) 
\T1/pcr/m/n/10 ===== Problem: Derive the Formula for the Area of an Ellipse ===
==  

Overfull \hbox (77.00006pt too wide) 
[]\T1/pcr/m/n/10 Derive an expression for the area of an ellipse by integrating
  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 the area under a curve that defines half of the allipse.  

Overfull \hbox (23.00006pt too wide) 
[]\T1/pcr/m/n/10 "Wolframalpha": "http://wolframalpha.com" can perhaps  

Overfull \hbox (113.00006pt too wide) 
[]\T1/pcr/m/n/10 ===== {Problem}: Derive the Formula for the Area of an Ellipse
 ===== 

Overfull \hbox (41.00006pt too wide) 
\T1/pcr/m/n/10 ===== Exercise: Determine the Distance to the Moon =====  
[12]
Overfull \hbox (65.00006pt too wide) 
[]\T1/pcr/m/n/10 Intro to this exercise. Questions are in subexercises below.  


Overfull \hbox (101.00006pt too wide) 
[]\T1/pcr/m/n/10 At the very end of the exercise it may be appropriate to summa
rize  

Overfull \hbox (107.00006pt too wide) 
[]\T1/pcr/m/n/10 and give some perspectives. The text inside the !bremarks-!ere
marks  

Overfull \hbox (41.00006pt too wide) 
[]\T1/pcr/m/n/10 directives is always typeset at the end of the exercise.  
[13]
Overfull \hbox (2.38828pt too wide) 
\T1/ptm/m/n/10 Doconce en-vi-ron-ments start with \T1/pcr/m/n/10 !benvirname \T
1/ptm/m/n/10 and end with \T1/pcr/m/n/10 !eenvirname\T1/ptm/m/n/10 , where

Overfull \hbox (28.47902pt too wide) 
[]\T1/ptm/m/n/10 specialy

Overfull \hbox (263.00006pt too wide) 
[]\T1/pcr/m/n/10 \multicolumn{1}{c}{time} & \multicolumn{1}{c}{velocity} & \mul
ticolumn{1}{c}{acceleration} \\  
[14]
Overfull \hbox (4.19656pt too wide) 
[][][][][][] \T1/ptm/m/n/10 con-tains some il-lus-tra-tions on how to uti-lize 
\T1/pcr/m/n/10 mako \T1/ptm/m/n/10 (clone the GitHub

Overfull \hbox (114.855pt too wide) 
[]\T1/ptm/m/n/10 Excellent ``Sphinx Tu-to-rial'' by C. Reller: ``[][][][][][]''
 
[15] (./quickref.rst.aux)

LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

 )
(see the transcript file for additional information)
Output written on quickref.rst.dvi (15 pages, ).
Transcript written on quickref.rst.log.
+ dvipdf quickref.rst.dvi
+ doconce format plain quickref --no-preprocess
translating doconce text in quickref.do.txt to plain
copy complete file doconce_program.sh  (format: shpro)
output in quickref.txt
+ doconce format gwiki quickref --no-preprocess
translating doconce text in quickref.do.txt to gwiki
copy complete file doconce_program.sh  (format: shpro)
output in quickref.gwiki
+ doconce format mwiki quickref --no-preprocess
translating doconce text in quickref.do.txt to mwiki
copy complete file doconce_program.sh  (format: shpro)
output in quickref.mwiki
+ doconce format cwiki quickref --no-preprocess
translating doconce text in quickref.do.txt to cwiki
copy complete file doconce_program.sh  (format: shpro)
output in quickref.cwiki
+ doconce format st quickref --no-preprocess
translating doconce text in quickref.do.txt to st
copy complete file doconce_program.sh  (format: shpro)
output in quickref.st
+ doconce format epytext quickref --no-preprocess
translating doconce text in quickref.do.txt to epytext
copy complete file doconce_program.sh  (format: shpro)
output in quickref.epytext
+ doconce format pandoc quickref --no-preprocess
translating doconce text in quickref.do.txt to pandoc
copy complete file doconce_program.sh  (format: shpro)
output in quickref.md
+ rm -rf demo
+ mkdir demo
+ cp -r quickref.do.txt quickref.html quickref.p.tex quickref.tex quickref.pdf quickref.rst quickref.xml quickref.rst.html quickref.rst.tex quickref.rst.pdf quickref.gwiki quickref.mwiki quickref.cwiki quickref.txt quickref.epytext quickref.st quickref.md sphinx-rootdir/_build/html demo
+ cd demo
+ cat
+ echo

+ echo Go to the demo directory and load index.html into a web browser.
Go to the demo directory and load index.html into a web browser.
+ cd ..
+ rm -rf ../demos/quickref
+ cp -r demo ../demos/quickref
+ cp quickref.gwiki ../../../doconce.wiki/Quickref.wiki